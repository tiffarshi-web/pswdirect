var SZ=Object.defineProperty;var MO=e=>{throw TypeError(e)};var CZ=(e,t,r)=>t in e?SZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var IO=(e,t,r)=>CZ(e,typeof t!="symbol"?t+"":t,r),DN=(e,t,r)=>t.has(e)||MO("Cannot "+r);var Se=(e,t,r)=>(DN(e,t,"read from private field"),r?r.call(e):t.get(e)),Vt=(e,t,r)=>t.has(e)?MO("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),vt=(e,t,r,n)=>(DN(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),ss=(e,t,r)=>(DN(e,t,"access private method"),r);var rv=(e,t,r,n)=>({set _(a){vt(e,t,a,r)},get _(){return Se(e,t,n)}});function PZ(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Km=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var dL={exports:{}},Yb={},uL={exports:{}},Dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rx=Symbol.for("react.element"),kZ=Symbol.for("react.portal"),EZ=Symbol.for("react.fragment"),TZ=Symbol.for("react.strict_mode"),AZ=Symbol.for("react.profiler"),OZ=Symbol.for("react.provider"),MZ=Symbol.for("react.context"),IZ=Symbol.for("react.forward_ref"),RZ=Symbol.for("react.suspense"),DZ=Symbol.for("react.memo"),$Z=Symbol.for("react.lazy"),RO=Symbol.iterator;function LZ(e){return e===null||typeof e!="object"?null:(e=RO&&e[RO]||e["@@iterator"],typeof e=="function"?e:null)}var hL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fL=Object.assign,mL={};function Of(e,t,r){this.props=e,this.context=t,this.refs=mL,this.updater=r||hL}Of.prototype.isReactComponent={};Of.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Of.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function pL(){}pL.prototype=Of.prototype;function yP(e,t,r){this.props=e,this.context=t,this.refs=mL,this.updater=r||hL}var bP=yP.prototype=new pL;bP.constructor=yP;fL(bP,Of.prototype);bP.isPureReactComponent=!0;var DO=Array.isArray,gL=Object.prototype.hasOwnProperty,wP={current:null},xL={key:!0,ref:!0,__self:!0,__source:!0};function vL(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)gL.call(t,n)&&!xL.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:rx,type:e,key:i,ref:o,props:a,_owner:wP.current}}function FZ(e,t){return{$$typeof:rx,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function jP(e){return typeof e=="object"&&e!==null&&e.$$typeof===rx}function BZ(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var $O=/\/+/g;function $N(e,t){return typeof e=="object"&&e!==null&&e.key!=null?BZ(""+e.key):t.toString(36)}function ly(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case rx:case kZ:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+$N(o,0):n,DO(a)?(r="",e!=null&&(r=e.replace($O,"$&/")+"/"),ly(a,t,r,"",function(d){return d})):a!=null&&(jP(a)&&(a=FZ(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace($O,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",DO(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+$N(i,l);o+=ly(i,t,r,c,a)}else if(c=LZ(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+$N(i,l++),o+=ly(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function nv(e,t,r){if(e==null)return e;var n=[],a=0;return ly(e,n,"","",function(i){return t.call(r,i,a++)}),n}function zZ(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Is={current:null},cy={transition:null},UZ={ReactCurrentDispatcher:Is,ReactCurrentBatchConfig:cy,ReactCurrentOwner:wP};function yL(){throw Error("act(...) is not supported in production builds of React.")}Dt.Children={map:nv,forEach:function(e,t,r){nv(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return nv(e,function(){t++}),t},toArray:function(e){return nv(e,function(t){return t})||[]},only:function(e){if(!jP(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Dt.Component=Of;Dt.Fragment=EZ;Dt.Profiler=AZ;Dt.PureComponent=yP;Dt.StrictMode=TZ;Dt.Suspense=RZ;Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UZ;Dt.act=yL;Dt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=fL({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=wP.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)gL.call(t,c)&&!xL.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:rx,type:e.type,key:a,ref:i,props:n,_owner:o}};Dt.createContext=function(e){return e={$$typeof:MZ,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:OZ,_context:e},e.Consumer=e};Dt.createElement=vL;Dt.createFactory=function(e){var t=vL.bind(null,e);return t.type=e,t};Dt.createRef=function(){return{current:null}};Dt.forwardRef=function(e){return{$$typeof:IZ,render:e}};Dt.isValidElement=jP;Dt.lazy=function(e){return{$$typeof:$Z,_payload:{_status:-1,_result:e},_init:zZ}};Dt.memo=function(e,t){return{$$typeof:DZ,type:e,compare:t===void 0?null:t}};Dt.startTransition=function(e){var t=cy.transition;cy.transition={};try{e()}finally{cy.transition=t}};Dt.unstable_act=yL;Dt.useCallback=function(e,t){return Is.current.useCallback(e,t)};Dt.useContext=function(e){return Is.current.useContext(e)};Dt.useDebugValue=function(){};Dt.useDeferredValue=function(e){return Is.current.useDeferredValue(e)};Dt.useEffect=function(e,t){return Is.current.useEffect(e,t)};Dt.useId=function(){return Is.current.useId()};Dt.useImperativeHandle=function(e,t,r){return Is.current.useImperativeHandle(e,t,r)};Dt.useInsertionEffect=function(e,t){return Is.current.useInsertionEffect(e,t)};Dt.useLayoutEffect=function(e,t){return Is.current.useLayoutEffect(e,t)};Dt.useMemo=function(e,t){return Is.current.useMemo(e,t)};Dt.useReducer=function(e,t,r){return Is.current.useReducer(e,t,r)};Dt.useRef=function(e){return Is.current.useRef(e)};Dt.useState=function(e){return Is.current.useState(e)};Dt.useSyncExternalStore=function(e,t,r){return Is.current.useSyncExternalStore(e,t,r)};Dt.useTransition=function(){return Is.current.useTransition()};Dt.version="18.3.1";uL.exports=Dt;var x=uL.exports;const q=tr(x),NP=PZ({__proto__:null,default:q},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WZ=x,HZ=Symbol.for("react.element"),VZ=Symbol.for("react.fragment"),qZ=Object.prototype.hasOwnProperty,GZ=WZ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,KZ={key:!0,ref:!0,__self:!0,__source:!0};function bL(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)qZ.call(t,n)&&!KZ.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:HZ,type:e,key:i,ref:o,props:a,_owner:GZ.current}}Yb.Fragment=VZ;Yb.jsx=bL;Yb.jsxs=bL;dL.exports=Yb;var s=dL.exports,wL={exports:{}},Da={},jL={exports:{}},NL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,z){var G=R.length;R.push(z);e:for(;0<G;){var ie=G-1>>>1,ae=R[ie];if(0<a(ae,z))R[ie]=z,R[G]=ae,G=ie;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var z=R[0],G=R.pop();if(G!==z){R[0]=G;e:for(var ie=0,ae=R.length,X=ae>>>1;ie<X;){var le=2*(ie+1)-1,fe=R[le],ge=le+1,ee=R[ge];if(0>a(fe,G))ge<ae&&0>a(ee,fe)?(R[ie]=ee,R[ge]=G,ie=ge):(R[ie]=fe,R[le]=G,ie=le);else if(ge<ae&&0>a(ee,G))R[ie]=ee,R[ge]=G,ie=ge;else break e}}return z}function a(R,z){var G=R.sortIndex-z.sortIndex;return G!==0?G:R.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,f=null,m=3,p=!1,y=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(R){for(var z=r(d);z!==null;){if(z.callback===null)n(d);else if(z.startTime<=R)n(d),z.sortIndex=z.expirationTime,t(c,z);else break;z=r(d)}}function S(R){if(v=!1,w(R),!y)if(r(c)!==null)y=!0,H(C);else{var z=r(d);z!==null&&F(S,z.startTime-R)}}function C(R,z){y=!1,v&&(v=!1,N(O),O=-1),p=!0;var G=m;try{for(w(z),f=r(c);f!==null&&(!(f.expirationTime>z)||R&&!I());){var ie=f.callback;if(typeof ie=="function"){f.callback=null,m=f.priorityLevel;var ae=ie(f.expirationTime<=z);z=e.unstable_now(),typeof ae=="function"?f.callback=ae:f===r(c)&&n(c),w(z)}else n(c);f=r(c)}if(f!==null)var X=!0;else{var le=r(d);le!==null&&F(S,le.startTime-z),X=!1}return X}finally{f=null,m=G,p=!1}}var P=!1,T=null,O=-1,E=5,D=-1;function I(){return!(e.unstable_now()-D<E)}function A(){if(T!==null){var R=e.unstable_now();D=R;var z=!0;try{z=T(!0,R)}finally{z?V():(P=!1,T=null)}}else P=!1}var V;if(typeof j=="function")V=function(){j(A)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,$=U.port2;U.port1.onmessage=A,V=function(){$.postMessage(null)}}else V=function(){b(A,0)};function H(R){T=R,P||(P=!0,V())}function F(R,z){O=b(function(){R(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){y||p||(y=!0,H(C))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(R){switch(m){case 1:case 2:case 3:var z=3;break;default:z=m}var G=m;m=z;try{return R()}finally{m=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,z){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var G=m;m=R;try{return z()}finally{m=G}},e.unstable_scheduleCallback=function(R,z,G){var ie=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ie+G:ie):G=ie,R){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=G+ae,R={id:h++,callback:z,priorityLevel:R,startTime:G,expirationTime:ae,sortIndex:-1},G>ie?(R.sortIndex=G,t(d,R),r(c)===null&&R===r(d)&&(v?(N(O),O=-1):v=!0,F(S,G-ie))):(R.sortIndex=ae,t(c,R),y||p||(y=!0,H(C))),R},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(R){var z=m;return function(){var G=m;m=z;try{return R.apply(this,arguments)}finally{m=G}}}})(NL);jL.exports=NL;var YZ=jL.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZZ=x,Aa=YZ;function De(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _L=new Set,Tp={};function eu(e,t){Dh(e,t),Dh(e+"Capture",t)}function Dh(e,t){for(Tp[e]=t,e=0;e<t.length;e++)_L.add(t[e])}var al=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$1=Object.prototype.hasOwnProperty,XZ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,LO={},FO={};function JZ(e){return $1.call(FO,e)?!0:$1.call(LO,e)?!1:XZ.test(e)?FO[e]=!0:(LO[e]=!0,!1)}function QZ(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function eX(e,t,r,n){if(t===null||typeof t>"u"||QZ(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Rs(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Qn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Qn[e]=new Rs(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Qn[t]=new Rs(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Qn[e]=new Rs(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Qn[e]=new Rs(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Qn[e]=new Rs(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Qn[e]=new Rs(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Qn[e]=new Rs(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Qn[e]=new Rs(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Qn[e]=new Rs(e,5,!1,e.toLowerCase(),null,!1,!1)});var _P=/[\-:]([a-z])/g;function SP(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(_P,SP);Qn[t]=new Rs(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(_P,SP);Qn[t]=new Rs(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(_P,SP);Qn[t]=new Rs(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Qn[e]=new Rs(e,1,!1,e.toLowerCase(),null,!1,!1)});Qn.xlinkHref=new Rs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Qn[e]=new Rs(e,1,!1,e.toLowerCase(),null,!0,!0)});function CP(e,t,r,n){var a=Qn.hasOwnProperty(t)?Qn[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(eX(t,r,a,n)&&(r=null),n||a===null?JZ(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var yl=ZZ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sv=Symbol.for("react.element"),Vu=Symbol.for("react.portal"),qu=Symbol.for("react.fragment"),PP=Symbol.for("react.strict_mode"),L1=Symbol.for("react.profiler"),SL=Symbol.for("react.provider"),CL=Symbol.for("react.context"),kP=Symbol.for("react.forward_ref"),F1=Symbol.for("react.suspense"),B1=Symbol.for("react.suspense_list"),EP=Symbol.for("react.memo"),Fl=Symbol.for("react.lazy"),PL=Symbol.for("react.offscreen"),BO=Symbol.iterator;function _m(e){return e===null||typeof e!="object"?null:(e=BO&&e[BO]||e["@@iterator"],typeof e=="function"?e:null)}var Ur=Object.assign,LN;function Ym(e){if(LN===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);LN=t&&t[1]||""}return`
`+LN+e}var FN=!1;function BN(e,t){if(!e||FN)return"";FN=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{FN=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ym(e):""}function tX(e){switch(e.tag){case 5:return Ym(e.type);case 16:return Ym("Lazy");case 13:return Ym("Suspense");case 19:return Ym("SuspenseList");case 0:case 2:case 15:return e=BN(e.type,!1),e;case 11:return e=BN(e.type.render,!1),e;case 1:return e=BN(e.type,!0),e;default:return""}}function z1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case qu:return"Fragment";case Vu:return"Portal";case L1:return"Profiler";case PP:return"StrictMode";case F1:return"Suspense";case B1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case CL:return(e.displayName||"Context")+".Consumer";case SL:return(e._context.displayName||"Context")+".Provider";case kP:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case EP:return t=e.displayName||null,t!==null?t:z1(e.type)||"Memo";case Fl:t=e._payload,e=e._init;try{return z1(e(t))}catch{}}return null}function rX(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z1(t);case 8:return t===PP?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function gc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function kL(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function nX(e){var t=kL(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function av(e){e._valueTracker||(e._valueTracker=nX(e))}function EL(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=kL(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Uy(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function U1(e,t){var r=t.checked;return Ur({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function zO(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=gc(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function TL(e,t){t=t.checked,t!=null&&CP(e,"checked",t,!1)}function W1(e,t){TL(e,t);var r=gc(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?H1(e,t.type,r):t.hasOwnProperty("defaultValue")&&H1(e,t.type,gc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function UO(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function H1(e,t,r){(t!=="number"||Uy(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Zm=Array.isArray;function dh(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+gc(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function V1(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(De(91));return Ur({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function WO(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(De(92));if(Zm(r)){if(1<r.length)throw Error(De(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:gc(r)}}function AL(e,t){var r=gc(t.value),n=gc(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function HO(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function OL(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function q1(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?OL(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var iv,ML=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(iv=iv||document.createElement("div"),iv.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=iv.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ap(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var cp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sX=["Webkit","ms","Moz","O"];Object.keys(cp).forEach(function(e){sX.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),cp[t]=cp[e]})});function IL(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||cp.hasOwnProperty(e)&&cp[e]?(""+t).trim():t+"px"}function RL(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=IL(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var aX=Ur({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function G1(e,t){if(t){if(aX[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(De(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(De(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(De(61))}if(t.style!=null&&typeof t.style!="object")throw Error(De(62))}}function K1(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Y1=null;function TP(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Z1=null,uh=null,hh=null;function VO(e){if(e=ax(e)){if(typeof Z1!="function")throw Error(De(280));var t=e.stateNode;t&&(t=ew(t),Z1(e.stateNode,e.type,t))}}function DL(e){uh?hh?hh.push(e):hh=[e]:uh=e}function $L(){if(uh){var e=uh,t=hh;if(hh=uh=null,VO(e),t)for(e=0;e<t.length;e++)VO(t[e])}}function LL(e,t){return e(t)}function FL(){}var zN=!1;function BL(e,t,r){if(zN)return e(t,r);zN=!0;try{return LL(e,t,r)}finally{zN=!1,(uh!==null||hh!==null)&&(FL(),$L())}}function Op(e,t){var r=e.stateNode;if(r===null)return null;var n=ew(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(De(231,t,typeof r));return r}var X1=!1;if(al)try{var Sm={};Object.defineProperty(Sm,"passive",{get:function(){X1=!0}}),window.addEventListener("test",Sm,Sm),window.removeEventListener("test",Sm,Sm)}catch{X1=!1}function iX(e,t,r,n,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(h){this.onError(h)}}var dp=!1,Wy=null,Hy=!1,J1=null,oX={onError:function(e){dp=!0,Wy=e}};function lX(e,t,r,n,a,i,o,l,c){dp=!1,Wy=null,iX.apply(oX,arguments)}function cX(e,t,r,n,a,i,o,l,c){if(lX.apply(this,arguments),dp){if(dp){var d=Wy;dp=!1,Wy=null}else throw Error(De(198));Hy||(Hy=!0,J1=d)}}function tu(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function zL(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function qO(e){if(tu(e)!==e)throw Error(De(188))}function dX(e){var t=e.alternate;if(!t){if(t=tu(e),t===null)throw Error(De(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return qO(a),e;if(i===n)return qO(a),t;i=i.sibling}throw Error(De(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(De(189))}}if(r.alternate!==n)throw Error(De(190))}if(r.tag!==3)throw Error(De(188));return r.stateNode.current===r?e:t}function UL(e){return e=dX(e),e!==null?WL(e):null}function WL(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=WL(e);if(t!==null)return t;e=e.sibling}return null}var HL=Aa.unstable_scheduleCallback,GO=Aa.unstable_cancelCallback,uX=Aa.unstable_shouldYield,hX=Aa.unstable_requestPaint,en=Aa.unstable_now,fX=Aa.unstable_getCurrentPriorityLevel,AP=Aa.unstable_ImmediatePriority,VL=Aa.unstable_UserBlockingPriority,Vy=Aa.unstable_NormalPriority,mX=Aa.unstable_LowPriority,qL=Aa.unstable_IdlePriority,Zb=null,mo=null;function pX(e){if(mo&&typeof mo.onCommitFiberRoot=="function")try{mo.onCommitFiberRoot(Zb,e,void 0,(e.current.flags&128)===128)}catch{}}var Li=Math.clz32?Math.clz32:vX,gX=Math.log,xX=Math.LN2;function vX(e){return e>>>=0,e===0?32:31-(gX(e)/xX|0)|0}var ov=64,lv=4194304;function Xm(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function qy(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=Xm(l):(i&=o,i!==0&&(n=Xm(i)))}else o=r&~a,o!==0?n=Xm(o):i!==0&&(n=Xm(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Li(t),a=1<<r,n|=e[r],t&=~a;return n}function yX(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bX(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Li(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=yX(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Q1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function GL(){var e=ov;return ov<<=1,!(ov&4194240)&&(ov=64),e}function UN(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function nx(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Li(t),e[t]=r}function wX(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Li(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function OP(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Li(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var sr=0;function KL(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var YL,MP,ZL,XL,JL,eS=!1,cv=[],sc=null,ac=null,ic=null,Mp=new Map,Ip=new Map,Hl=[],jX="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function KO(e,t){switch(e){case"focusin":case"focusout":sc=null;break;case"dragenter":case"dragleave":ac=null;break;case"mouseover":case"mouseout":ic=null;break;case"pointerover":case"pointerout":Mp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ip.delete(t.pointerId)}}function Cm(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=ax(t),t!==null&&MP(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function NX(e,t,r,n,a){switch(t){case"focusin":return sc=Cm(sc,e,t,r,n,a),!0;case"dragenter":return ac=Cm(ac,e,t,r,n,a),!0;case"mouseover":return ic=Cm(ic,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Mp.set(i,Cm(Mp.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Ip.set(i,Cm(Ip.get(i)||null,e,t,r,n,a)),!0}return!1}function QL(e){var t=hd(e.target);if(t!==null){var r=tu(t);if(r!==null){if(t=r.tag,t===13){if(t=zL(r),t!==null){e.blockedOn=t,JL(e.priority,function(){ZL(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function dy(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=tS(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Y1=n,r.target.dispatchEvent(n),Y1=null}else return t=ax(r),t!==null&&MP(t),e.blockedOn=r,!1;t.shift()}return!0}function YO(e,t,r){dy(e)&&r.delete(t)}function _X(){eS=!1,sc!==null&&dy(sc)&&(sc=null),ac!==null&&dy(ac)&&(ac=null),ic!==null&&dy(ic)&&(ic=null),Mp.forEach(YO),Ip.forEach(YO)}function Pm(e,t){e.blockedOn===t&&(e.blockedOn=null,eS||(eS=!0,Aa.unstable_scheduleCallback(Aa.unstable_NormalPriority,_X)))}function Rp(e){function t(a){return Pm(a,e)}if(0<cv.length){Pm(cv[0],e);for(var r=1;r<cv.length;r++){var n=cv[r];n.blockedOn===e&&(n.blockedOn=null)}}for(sc!==null&&Pm(sc,e),ac!==null&&Pm(ac,e),ic!==null&&Pm(ic,e),Mp.forEach(t),Ip.forEach(t),r=0;r<Hl.length;r++)n=Hl[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Hl.length&&(r=Hl[0],r.blockedOn===null);)QL(r),r.blockedOn===null&&Hl.shift()}var fh=yl.ReactCurrentBatchConfig,Gy=!0;function SX(e,t,r,n){var a=sr,i=fh.transition;fh.transition=null;try{sr=1,IP(e,t,r,n)}finally{sr=a,fh.transition=i}}function CX(e,t,r,n){var a=sr,i=fh.transition;fh.transition=null;try{sr=4,IP(e,t,r,n)}finally{sr=a,fh.transition=i}}function IP(e,t,r,n){if(Gy){var a=tS(e,t,r,n);if(a===null)JN(e,t,n,Ky,r),KO(e,n);else if(NX(a,e,t,r,n))n.stopPropagation();else if(KO(e,n),t&4&&-1<jX.indexOf(e)){for(;a!==null;){var i=ax(a);if(i!==null&&YL(i),i=tS(e,t,r,n),i===null&&JN(e,t,n,Ky,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else JN(e,t,n,null,r)}}var Ky=null;function tS(e,t,r,n){if(Ky=null,e=TP(n),e=hd(e),e!==null)if(t=tu(e),t===null)e=null;else if(r=t.tag,r===13){if(e=zL(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ky=e,null}function e6(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fX()){case AP:return 1;case VL:return 4;case Vy:case mX:return 16;case qL:return 536870912;default:return 16}default:return 16}}var Jl=null,RP=null,uy=null;function t6(){if(uy)return uy;var e,t=RP,r=t.length,n,a="value"in Jl?Jl.value:Jl.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return uy=a.slice(e,1<n?1-n:void 0)}function hy(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function dv(){return!0}function ZO(){return!1}function $a(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?dv:ZO,this.isPropagationStopped=ZO,this}return Ur(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=dv)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=dv)},persist:function(){},isPersistent:dv}),t}var Mf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},DP=$a(Mf),sx=Ur({},Mf,{view:0,detail:0}),PX=$a(sx),WN,HN,km,Xb=Ur({},sx,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$P,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==km&&(km&&e.type==="mousemove"?(WN=e.screenX-km.screenX,HN=e.screenY-km.screenY):HN=WN=0,km=e),WN)},movementY:function(e){return"movementY"in e?e.movementY:HN}}),XO=$a(Xb),kX=Ur({},Xb,{dataTransfer:0}),EX=$a(kX),TX=Ur({},sx,{relatedTarget:0}),VN=$a(TX),AX=Ur({},Mf,{animationName:0,elapsedTime:0,pseudoElement:0}),OX=$a(AX),MX=Ur({},Mf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),IX=$a(MX),RX=Ur({},Mf,{data:0}),JO=$a(RX),DX={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$X={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LX={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FX(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=LX[e])?!!t[e]:!1}function $P(){return FX}var BX=Ur({},sx,{key:function(e){if(e.key){var t=DX[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=hy(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?$X[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$P,charCode:function(e){return e.type==="keypress"?hy(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?hy(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zX=$a(BX),UX=Ur({},Xb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),QO=$a(UX),WX=Ur({},sx,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$P}),HX=$a(WX),VX=Ur({},Mf,{propertyName:0,elapsedTime:0,pseudoElement:0}),qX=$a(VX),GX=Ur({},Xb,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),KX=$a(GX),YX=[9,13,27,32],LP=al&&"CompositionEvent"in window,up=null;al&&"documentMode"in document&&(up=document.documentMode);var ZX=al&&"TextEvent"in window&&!up,r6=al&&(!LP||up&&8<up&&11>=up),e4=" ",t4=!1;function n6(e,t){switch(e){case"keyup":return YX.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function s6(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gu=!1;function XX(e,t){switch(e){case"compositionend":return s6(t);case"keypress":return t.which!==32?null:(t4=!0,e4);case"textInput":return e=t.data,e===e4&&t4?null:e;default:return null}}function JX(e,t){if(Gu)return e==="compositionend"||!LP&&n6(e,t)?(e=t6(),uy=RP=Jl=null,Gu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return r6&&t.locale!=="ko"?null:t.data;default:return null}}var QX={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function r4(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!QX[e.type]:t==="textarea"}function a6(e,t,r,n){DL(n),t=Yy(t,"onChange"),0<t.length&&(r=new DP("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var hp=null,Dp=null;function eJ(e){g6(e,0)}function Jb(e){var t=Zu(e);if(EL(t))return e}function tJ(e,t){if(e==="change")return t}var i6=!1;if(al){var qN;if(al){var GN="oninput"in document;if(!GN){var n4=document.createElement("div");n4.setAttribute("oninput","return;"),GN=typeof n4.oninput=="function"}qN=GN}else qN=!1;i6=qN&&(!document.documentMode||9<document.documentMode)}function s4(){hp&&(hp.detachEvent("onpropertychange",o6),Dp=hp=null)}function o6(e){if(e.propertyName==="value"&&Jb(Dp)){var t=[];a6(t,Dp,e,TP(e)),BL(eJ,t)}}function rJ(e,t,r){e==="focusin"?(s4(),hp=t,Dp=r,hp.attachEvent("onpropertychange",o6)):e==="focusout"&&s4()}function nJ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Jb(Dp)}function sJ(e,t){if(e==="click")return Jb(t)}function aJ(e,t){if(e==="input"||e==="change")return Jb(t)}function iJ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ui=typeof Object.is=="function"?Object.is:iJ;function $p(e,t){if(Ui(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!$1.call(t,a)||!Ui(e[a],t[a]))return!1}return!0}function a4(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function i4(e,t){var r=a4(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=a4(r)}}function l6(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?l6(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function c6(){for(var e=window,t=Uy();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Uy(e.document)}return t}function FP(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function oJ(e){var t=c6(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&l6(r.ownerDocument.documentElement,r)){if(n!==null&&FP(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=i4(r,i);var o=i4(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var lJ=al&&"documentMode"in document&&11>=document.documentMode,Ku=null,rS=null,fp=null,nS=!1;function o4(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;nS||Ku==null||Ku!==Uy(n)||(n=Ku,"selectionStart"in n&&FP(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),fp&&$p(fp,n)||(fp=n,n=Yy(rS,"onSelect"),0<n.length&&(t=new DP("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Ku)))}function uv(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Yu={animationend:uv("Animation","AnimationEnd"),animationiteration:uv("Animation","AnimationIteration"),animationstart:uv("Animation","AnimationStart"),transitionend:uv("Transition","TransitionEnd")},KN={},d6={};al&&(d6=document.createElement("div").style,"AnimationEvent"in window||(delete Yu.animationend.animation,delete Yu.animationiteration.animation,delete Yu.animationstart.animation),"TransitionEvent"in window||delete Yu.transitionend.transition);function Qb(e){if(KN[e])return KN[e];if(!Yu[e])return e;var t=Yu[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in d6)return KN[e]=t[r];return e}var u6=Qb("animationend"),h6=Qb("animationiteration"),f6=Qb("animationstart"),m6=Qb("transitionend"),p6=new Map,l4="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nc(e,t){p6.set(e,t),eu(t,[e])}for(var YN=0;YN<l4.length;YN++){var ZN=l4[YN],cJ=ZN.toLowerCase(),dJ=ZN[0].toUpperCase()+ZN.slice(1);Nc(cJ,"on"+dJ)}Nc(u6,"onAnimationEnd");Nc(h6,"onAnimationIteration");Nc(f6,"onAnimationStart");Nc("dblclick","onDoubleClick");Nc("focusin","onFocus");Nc("focusout","onBlur");Nc(m6,"onTransitionEnd");Dh("onMouseEnter",["mouseout","mouseover"]);Dh("onMouseLeave",["mouseout","mouseover"]);Dh("onPointerEnter",["pointerout","pointerover"]);Dh("onPointerLeave",["pointerout","pointerover"]);eu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));eu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));eu("onBeforeInput",["compositionend","keypress","textInput","paste"]);eu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));eu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));eu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uJ=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jm));function c4(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,cX(n,t,void 0,e),e.currentTarget=null}function g6(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;c4(a,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;c4(a,l,d),i=c}}}if(Hy)throw e=J1,Hy=!1,J1=null,e}function kr(e,t){var r=t[lS];r===void 0&&(r=t[lS]=new Set);var n=e+"__bubble";r.has(n)||(x6(t,e,2,!1),r.add(n))}function XN(e,t,r){var n=0;t&&(n|=4),x6(r,e,n,t)}var hv="_reactListening"+Math.random().toString(36).slice(2);function Lp(e){if(!e[hv]){e[hv]=!0,_L.forEach(function(r){r!=="selectionchange"&&(uJ.has(r)||XN(r,!1,e),XN(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[hv]||(t[hv]=!0,XN("selectionchange",!1,t))}}function x6(e,t,r,n){switch(e6(t)){case 1:var a=SX;break;case 4:a=CX;break;default:a=IP}r=a.bind(null,t,r,e),a=void 0,!X1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function JN(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=hd(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}BL(function(){var d=i,h=TP(r),f=[];e:{var m=p6.get(e);if(m!==void 0){var p=DP,y=e;switch(e){case"keypress":if(hy(r)===0)break e;case"keydown":case"keyup":p=zX;break;case"focusin":y="focus",p=VN;break;case"focusout":y="blur",p=VN;break;case"beforeblur":case"afterblur":p=VN;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=XO;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=EX;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=HX;break;case u6:case h6:case f6:p=OX;break;case m6:p=qX;break;case"scroll":p=PX;break;case"wheel":p=KX;break;case"copy":case"cut":case"paste":p=IX;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=QO}var v=(t&4)!==0,b=!v&&e==="scroll",N=v?m!==null?m+"Capture":null:m;v=[];for(var j=d,w;j!==null;){w=j;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,N!==null&&(S=Op(j,N),S!=null&&v.push(Fp(j,S,w)))),b)break;j=j.return}0<v.length&&(m=new p(m,y,null,r,h),f.push({event:m,listeners:v}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",m&&r!==Y1&&(y=r.relatedTarget||r.fromElement)&&(hd(y)||y[il]))break e;if((p||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,p?(y=r.relatedTarget||r.toElement,p=d,y=y?hd(y):null,y!==null&&(b=tu(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=d),p!==y)){if(v=XO,S="onMouseLeave",N="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(v=QO,S="onPointerLeave",N="onPointerEnter",j="pointer"),b=p==null?m:Zu(p),w=y==null?m:Zu(y),m=new v(S,j+"leave",p,r,h),m.target=b,m.relatedTarget=w,S=null,hd(h)===d&&(v=new v(N,j+"enter",y,r,h),v.target=w,v.relatedTarget=b,S=v),b=S,p&&y)t:{for(v=p,N=y,j=0,w=v;w;w=_u(w))j++;for(w=0,S=N;S;S=_u(S))w++;for(;0<j-w;)v=_u(v),j--;for(;0<w-j;)N=_u(N),w--;for(;j--;){if(v===N||N!==null&&v===N.alternate)break t;v=_u(v),N=_u(N)}v=null}else v=null;p!==null&&d4(f,m,p,v,!1),y!==null&&b!==null&&d4(f,b,y,v,!0)}}e:{if(m=d?Zu(d):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var C=tJ;else if(r4(m))if(i6)C=aJ;else{C=nJ;var P=rJ}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(C=sJ);if(C&&(C=C(e,d))){a6(f,C,r,h);break e}P&&P(e,m,d),e==="focusout"&&(P=m._wrapperState)&&P.controlled&&m.type==="number"&&H1(m,"number",m.value)}switch(P=d?Zu(d):window,e){case"focusin":(r4(P)||P.contentEditable==="true")&&(Ku=P,rS=d,fp=null);break;case"focusout":fp=rS=Ku=null;break;case"mousedown":nS=!0;break;case"contextmenu":case"mouseup":case"dragend":nS=!1,o4(f,r,h);break;case"selectionchange":if(lJ)break;case"keydown":case"keyup":o4(f,r,h)}var T;if(LP)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Gu?n6(e,r)&&(O="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(O="onCompositionStart");O&&(r6&&r.locale!=="ko"&&(Gu||O!=="onCompositionStart"?O==="onCompositionEnd"&&Gu&&(T=t6()):(Jl=h,RP="value"in Jl?Jl.value:Jl.textContent,Gu=!0)),P=Yy(d,O),0<P.length&&(O=new JO(O,e,null,r,h),f.push({event:O,listeners:P}),T?O.data=T:(T=s6(r),T!==null&&(O.data=T)))),(T=ZX?XX(e,r):JX(e,r))&&(d=Yy(d,"onBeforeInput"),0<d.length&&(h=new JO("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:d}),h.data=T))}g6(f,t)})}function Fp(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Yy(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Op(e,r),i!=null&&n.unshift(Fp(e,i,a)),i=Op(e,t),i!=null&&n.push(Fp(e,i,a))),e=e.return}return n}function _u(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function d4(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,a?(c=Op(r,i),c!=null&&o.unshift(Fp(r,c,l))):a||(c=Op(r,i),c!=null&&o.push(Fp(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var hJ=/\r\n?/g,fJ=/\u0000|\uFFFD/g;function u4(e){return(typeof e=="string"?e:""+e).replace(hJ,`
`).replace(fJ,"")}function fv(e,t,r){if(t=u4(t),u4(e)!==t&&r)throw Error(De(425))}function Zy(){}var sS=null,aS=null;function iS(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var oS=typeof setTimeout=="function"?setTimeout:void 0,mJ=typeof clearTimeout=="function"?clearTimeout:void 0,h4=typeof Promise=="function"?Promise:void 0,pJ=typeof queueMicrotask=="function"?queueMicrotask:typeof h4<"u"?function(e){return h4.resolve(null).then(e).catch(gJ)}:oS;function gJ(e){setTimeout(function(){throw e})}function QN(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Rp(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Rp(t)}function oc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function f4(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var If=Math.random().toString(36).slice(2),co="__reactFiber$"+If,Bp="__reactProps$"+If,il="__reactContainer$"+If,lS="__reactEvents$"+If,xJ="__reactListeners$"+If,vJ="__reactHandles$"+If;function hd(e){var t=e[co];if(t)return t;for(var r=e.parentNode;r;){if(t=r[il]||r[co]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=f4(e);e!==null;){if(r=e[co])return r;e=f4(e)}return t}e=r,r=e.parentNode}return null}function ax(e){return e=e[co]||e[il],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(De(33))}function ew(e){return e[Bp]||null}var cS=[],Xu=-1;function _c(e){return{current:e}}function Or(e){0>Xu||(e.current=cS[Xu],cS[Xu]=null,Xu--)}function jr(e,t){Xu++,cS[Xu]=e.current,e.current=t}var xc={},fs=_c(xc),Ys=_c(!1),Md=xc;function $h(e,t){var r=e.type.contextTypes;if(!r)return xc;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Zs(e){return e=e.childContextTypes,e!=null}function Xy(){Or(Ys),Or(fs)}function m4(e,t,r){if(fs.current!==xc)throw Error(De(168));jr(fs,t),jr(Ys,r)}function v6(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(De(108,rX(e)||"Unknown",a));return Ur({},r,n)}function Jy(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xc,Md=fs.current,jr(fs,e),jr(Ys,Ys.current),!0}function p4(e,t,r){var n=e.stateNode;if(!n)throw Error(De(169));r?(e=v6(e,t,Md),n.__reactInternalMemoizedMergedChildContext=e,Or(Ys),Or(fs),jr(fs,e)):Or(Ys),jr(Ys,r)}var Vo=null,tw=!1,e_=!1;function y6(e){Vo===null?Vo=[e]:Vo.push(e)}function yJ(e){tw=!0,y6(e)}function Sc(){if(!e_&&Vo!==null){e_=!0;var e=0,t=sr;try{var r=Vo;for(sr=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Vo=null,tw=!1}catch(a){throw Vo!==null&&(Vo=Vo.slice(e+1)),HL(AP,Sc),a}finally{sr=t,e_=!1}}return null}var Ju=[],Qu=0,Qy=null,e0=0,Ga=[],Ka=0,Id=null,Go=1,Ko="";function Jc(e,t){Ju[Qu++]=e0,Ju[Qu++]=Qy,Qy=e,e0=t}function b6(e,t,r){Ga[Ka++]=Go,Ga[Ka++]=Ko,Ga[Ka++]=Id,Id=e;var n=Go;e=Ko;var a=32-Li(n)-1;n&=~(1<<a),r+=1;var i=32-Li(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Go=1<<32-Li(t)+a|r<<a|n,Ko=i+e}else Go=1<<i|r<<a|n,Ko=e}function BP(e){e.return!==null&&(Jc(e,1),b6(e,1,0))}function zP(e){for(;e===Qy;)Qy=Ju[--Qu],Ju[Qu]=null,e0=Ju[--Qu],Ju[Qu]=null;for(;e===Id;)Id=Ga[--Ka],Ga[Ka]=null,Ko=Ga[--Ka],Ga[Ka]=null,Go=Ga[--Ka],Ga[Ka]=null}var Pa=null,Ca=null,Ir=!1,Ii=null;function w6(e,t){var r=Za(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function g4(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Pa=e,Ca=oc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Pa=e,Ca=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Id!==null?{id:Go,overflow:Ko}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Za(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Pa=e,Ca=null,!0):!1;default:return!1}}function dS(e){return(e.mode&1)!==0&&(e.flags&128)===0}function uS(e){if(Ir){var t=Ca;if(t){var r=t;if(!g4(e,t)){if(dS(e))throw Error(De(418));t=oc(r.nextSibling);var n=Pa;t&&g4(e,t)?w6(n,r):(e.flags=e.flags&-4097|2,Ir=!1,Pa=e)}}else{if(dS(e))throw Error(De(418));e.flags=e.flags&-4097|2,Ir=!1,Pa=e}}}function x4(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Pa=e}function mv(e){if(e!==Pa)return!1;if(!Ir)return x4(e),Ir=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!iS(e.type,e.memoizedProps)),t&&(t=Ca)){if(dS(e))throw j6(),Error(De(418));for(;t;)w6(e,t),t=oc(t.nextSibling)}if(x4(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(De(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ca=oc(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ca=null}}else Ca=Pa?oc(e.stateNode.nextSibling):null;return!0}function j6(){for(var e=Ca;e;)e=oc(e.nextSibling)}function Lh(){Ca=Pa=null,Ir=!1}function UP(e){Ii===null?Ii=[e]:Ii.push(e)}var bJ=yl.ReactCurrentBatchConfig;function Em(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(De(309));var n=r.stateNode}if(!n)throw Error(De(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(De(284));if(!r._owner)throw Error(De(290,e))}return e}function pv(e,t){throw e=Object.prototype.toString.call(t),Error(De(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function v4(e){var t=e._init;return t(e._payload)}function N6(e){function t(N,j){if(e){var w=N.deletions;w===null?(N.deletions=[j],N.flags|=16):w.push(j)}}function r(N,j){if(!e)return null;for(;j!==null;)t(N,j),j=j.sibling;return null}function n(N,j){for(N=new Map;j!==null;)j.key!==null?N.set(j.key,j):N.set(j.index,j),j=j.sibling;return N}function a(N,j){return N=uc(N,j),N.index=0,N.sibling=null,N}function i(N,j,w){return N.index=w,e?(w=N.alternate,w!==null?(w=w.index,w<j?(N.flags|=2,j):w):(N.flags|=2,j)):(N.flags|=1048576,j)}function o(N){return e&&N.alternate===null&&(N.flags|=2),N}function l(N,j,w,S){return j===null||j.tag!==6?(j=o_(w,N.mode,S),j.return=N,j):(j=a(j,w),j.return=N,j)}function c(N,j,w,S){var C=w.type;return C===qu?h(N,j,w.props.children,S,w.key):j!==null&&(j.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Fl&&v4(C)===j.type)?(S=a(j,w.props),S.ref=Em(N,j,w),S.return=N,S):(S=yy(w.type,w.key,w.props,null,N.mode,S),S.ref=Em(N,j,w),S.return=N,S)}function d(N,j,w,S){return j===null||j.tag!==4||j.stateNode.containerInfo!==w.containerInfo||j.stateNode.implementation!==w.implementation?(j=l_(w,N.mode,S),j.return=N,j):(j=a(j,w.children||[]),j.return=N,j)}function h(N,j,w,S,C){return j===null||j.tag!==7?(j=Ed(w,N.mode,S,C),j.return=N,j):(j=a(j,w),j.return=N,j)}function f(N,j,w){if(typeof j=="string"&&j!==""||typeof j=="number")return j=o_(""+j,N.mode,w),j.return=N,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case sv:return w=yy(j.type,j.key,j.props,null,N.mode,w),w.ref=Em(N,null,j),w.return=N,w;case Vu:return j=l_(j,N.mode,w),j.return=N,j;case Fl:var S=j._init;return f(N,S(j._payload),w)}if(Zm(j)||_m(j))return j=Ed(j,N.mode,w,null),j.return=N,j;pv(N,j)}return null}function m(N,j,w,S){var C=j!==null?j.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return C!==null?null:l(N,j,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case sv:return w.key===C?c(N,j,w,S):null;case Vu:return w.key===C?d(N,j,w,S):null;case Fl:return C=w._init,m(N,j,C(w._payload),S)}if(Zm(w)||_m(w))return C!==null?null:h(N,j,w,S,null);pv(N,w)}return null}function p(N,j,w,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return N=N.get(w)||null,l(j,N,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case sv:return N=N.get(S.key===null?w:S.key)||null,c(j,N,S,C);case Vu:return N=N.get(S.key===null?w:S.key)||null,d(j,N,S,C);case Fl:var P=S._init;return p(N,j,w,P(S._payload),C)}if(Zm(S)||_m(S))return N=N.get(w)||null,h(j,N,S,C,null);pv(j,S)}return null}function y(N,j,w,S){for(var C=null,P=null,T=j,O=j=0,E=null;T!==null&&O<w.length;O++){T.index>O?(E=T,T=null):E=T.sibling;var D=m(N,T,w[O],S);if(D===null){T===null&&(T=E);break}e&&T&&D.alternate===null&&t(N,T),j=i(D,j,O),P===null?C=D:P.sibling=D,P=D,T=E}if(O===w.length)return r(N,T),Ir&&Jc(N,O),C;if(T===null){for(;O<w.length;O++)T=f(N,w[O],S),T!==null&&(j=i(T,j,O),P===null?C=T:P.sibling=T,P=T);return Ir&&Jc(N,O),C}for(T=n(N,T);O<w.length;O++)E=p(T,N,O,w[O],S),E!==null&&(e&&E.alternate!==null&&T.delete(E.key===null?O:E.key),j=i(E,j,O),P===null?C=E:P.sibling=E,P=E);return e&&T.forEach(function(I){return t(N,I)}),Ir&&Jc(N,O),C}function v(N,j,w,S){var C=_m(w);if(typeof C!="function")throw Error(De(150));if(w=C.call(w),w==null)throw Error(De(151));for(var P=C=null,T=j,O=j=0,E=null,D=w.next();T!==null&&!D.done;O++,D=w.next()){T.index>O?(E=T,T=null):E=T.sibling;var I=m(N,T,D.value,S);if(I===null){T===null&&(T=E);break}e&&T&&I.alternate===null&&t(N,T),j=i(I,j,O),P===null?C=I:P.sibling=I,P=I,T=E}if(D.done)return r(N,T),Ir&&Jc(N,O),C;if(T===null){for(;!D.done;O++,D=w.next())D=f(N,D.value,S),D!==null&&(j=i(D,j,O),P===null?C=D:P.sibling=D,P=D);return Ir&&Jc(N,O),C}for(T=n(N,T);!D.done;O++,D=w.next())D=p(T,N,O,D.value,S),D!==null&&(e&&D.alternate!==null&&T.delete(D.key===null?O:D.key),j=i(D,j,O),P===null?C=D:P.sibling=D,P=D);return e&&T.forEach(function(A){return t(N,A)}),Ir&&Jc(N,O),C}function b(N,j,w,S){if(typeof w=="object"&&w!==null&&w.type===qu&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case sv:e:{for(var C=w.key,P=j;P!==null;){if(P.key===C){if(C=w.type,C===qu){if(P.tag===7){r(N,P.sibling),j=a(P,w.props.children),j.return=N,N=j;break e}}else if(P.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Fl&&v4(C)===P.type){r(N,P.sibling),j=a(P,w.props),j.ref=Em(N,P,w),j.return=N,N=j;break e}r(N,P);break}else t(N,P);P=P.sibling}w.type===qu?(j=Ed(w.props.children,N.mode,S,w.key),j.return=N,N=j):(S=yy(w.type,w.key,w.props,null,N.mode,S),S.ref=Em(N,j,w),S.return=N,N=S)}return o(N);case Vu:e:{for(P=w.key;j!==null;){if(j.key===P)if(j.tag===4&&j.stateNode.containerInfo===w.containerInfo&&j.stateNode.implementation===w.implementation){r(N,j.sibling),j=a(j,w.children||[]),j.return=N,N=j;break e}else{r(N,j);break}else t(N,j);j=j.sibling}j=l_(w,N.mode,S),j.return=N,N=j}return o(N);case Fl:return P=w._init,b(N,j,P(w._payload),S)}if(Zm(w))return y(N,j,w,S);if(_m(w))return v(N,j,w,S);pv(N,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,j!==null&&j.tag===6?(r(N,j.sibling),j=a(j,w),j.return=N,N=j):(r(N,j),j=o_(w,N.mode,S),j.return=N,N=j),o(N)):r(N,j)}return b}var Fh=N6(!0),_6=N6(!1),t0=_c(null),r0=null,eh=null,WP=null;function HP(){WP=eh=r0=null}function VP(e){var t=t0.current;Or(t0),e._currentValue=t}function hS(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function mh(e,t){r0=e,WP=eh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Gs=!0),e.firstContext=null)}function ri(e){var t=e._currentValue;if(WP!==e)if(e={context:e,memoizedValue:t,next:null},eh===null){if(r0===null)throw Error(De(308));eh=e,r0.dependencies={lanes:0,firstContext:e}}else eh=eh.next=e;return t}var fd=null;function qP(e){fd===null?fd=[e]:fd.push(e)}function S6(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,qP(t)):(r.next=a.next,a.next=r),t.interleaved=r,ol(e,n)}function ol(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Bl=!1;function GP(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function C6(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Jo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function lc(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Bt&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,ol(e,r)}return a=n.interleaved,a===null?(t.next=t,qP(n)):(t.next=a.next,a.next=t),n.interleaved=t,ol(e,r)}function fy(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,OP(e,r)}}function y4(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function n0(e,t,r,n){var a=e.updateQueue;Bl=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;o=0,h=d=c=null,l=i;do{var m=l.lane,p=l.eventTime;if((n&m)===m){h!==null&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,v=l;switch(m=t,p=r,v.tag){case 1:if(y=v.payload,typeof y=="function"){f=y.call(p,f,m);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,m=typeof y=="function"?y.call(p,f,m):y,m==null)break e;f=Ur({},f,m);break e;case 2:Bl=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=a.effects,m===null?a.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=p,c=f):h=h.next=p,o|=m;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;m=l,l=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);if(h===null&&(c=f),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=h,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Dd|=o,e.lanes=o,e.memoizedState=f}}function b4(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(De(191,a));a.call(n)}}}var ix={},po=_c(ix),zp=_c(ix),Up=_c(ix);function md(e){if(e===ix)throw Error(De(174));return e}function KP(e,t){switch(jr(Up,t),jr(zp,e),jr(po,ix),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:q1(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=q1(t,e)}Or(po),jr(po,t)}function Bh(){Or(po),Or(zp),Or(Up)}function P6(e){md(Up.current);var t=md(po.current),r=q1(t,e.type);t!==r&&(jr(zp,e),jr(po,r))}function YP(e){zp.current===e&&(Or(po),Or(zp))}var Br=_c(0);function s0(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var t_=[];function ZP(){for(var e=0;e<t_.length;e++)t_[e]._workInProgressVersionPrimary=null;t_.length=0}var my=yl.ReactCurrentDispatcher,r_=yl.ReactCurrentBatchConfig,Rd=0,zr=null,wn=null,Mn=null,a0=!1,mp=!1,Wp=0,wJ=0;function as(){throw Error(De(321))}function XP(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ui(e[r],t[r]))return!1;return!0}function JP(e,t,r,n,a,i){if(Rd=i,zr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,my.current=e===null||e.memoizedState===null?SJ:CJ,e=r(n,a),mp){i=0;do{if(mp=!1,Wp=0,25<=i)throw Error(De(301));i+=1,Mn=wn=null,t.updateQueue=null,my.current=PJ,e=r(n,a)}while(mp)}if(my.current=i0,t=wn!==null&&wn.next!==null,Rd=0,Mn=wn=zr=null,a0=!1,t)throw Error(De(300));return e}function QP(){var e=Wp!==0;return Wp=0,e}function ao(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mn===null?zr.memoizedState=Mn=e:Mn=Mn.next=e,Mn}function ni(){if(wn===null){var e=zr.alternate;e=e!==null?e.memoizedState:null}else e=wn.next;var t=Mn===null?zr.memoizedState:Mn.next;if(t!==null)Mn=t,wn=e;else{if(e===null)throw Error(De(310));wn=e,e={memoizedState:wn.memoizedState,baseState:wn.baseState,baseQueue:wn.baseQueue,queue:wn.queue,next:null},Mn===null?zr.memoizedState=Mn=e:Mn=Mn.next=e}return Mn}function Hp(e,t){return typeof t=="function"?t(e):t}function n_(e){var t=ni(),r=t.queue;if(r===null)throw Error(De(311));r.lastRenderedReducer=e;var n=wn,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,d=i;do{var h=d.lane;if((Rd&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,zr.lanes|=h,Dd|=h}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,Ui(n,t.memoizedState)||(Gs=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,zr.lanes|=i,Dd|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function s_(e){var t=ni(),r=t.queue;if(r===null)throw Error(De(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Ui(i,t.memoizedState)||(Gs=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function k6(){}function E6(e,t){var r=zr,n=ni(),a=t(),i=!Ui(n.memoizedState,a);if(i&&(n.memoizedState=a,Gs=!0),n=n.queue,ek(O6.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Mn!==null&&Mn.memoizedState.tag&1){if(r.flags|=2048,Vp(9,A6.bind(null,r,n,a,t),void 0,null),Dn===null)throw Error(De(349));Rd&30||T6(r,t,a)}return a}function T6(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=zr.updateQueue,t===null?(t={lastEffect:null,stores:null},zr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function A6(e,t,r,n){t.value=r,t.getSnapshot=n,M6(t)&&I6(e)}function O6(e,t,r){return r(function(){M6(t)&&I6(e)})}function M6(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ui(e,r)}catch{return!0}}function I6(e){var t=ol(e,1);t!==null&&Fi(t,e,1,-1)}function w4(e){var t=ao();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hp,lastRenderedState:e},t.queue=e,e=e.dispatch=_J.bind(null,zr,e),[t.memoizedState,e]}function Vp(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=zr.updateQueue,t===null?(t={lastEffect:null,stores:null},zr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function R6(){return ni().memoizedState}function py(e,t,r,n){var a=ao();zr.flags|=e,a.memoizedState=Vp(1|t,r,void 0,n===void 0?null:n)}function rw(e,t,r,n){var a=ni();n=n===void 0?null:n;var i=void 0;if(wn!==null){var o=wn.memoizedState;if(i=o.destroy,n!==null&&XP(n,o.deps)){a.memoizedState=Vp(t,r,i,n);return}}zr.flags|=e,a.memoizedState=Vp(1|t,r,i,n)}function j4(e,t){return py(8390656,8,e,t)}function ek(e,t){return rw(2048,8,e,t)}function D6(e,t){return rw(4,2,e,t)}function $6(e,t){return rw(4,4,e,t)}function L6(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function F6(e,t,r){return r=r!=null?r.concat([e]):null,rw(4,4,L6.bind(null,t,e),r)}function tk(){}function B6(e,t){var r=ni();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&XP(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function z6(e,t){var r=ni();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&XP(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function U6(e,t,r){return Rd&21?(Ui(r,t)||(r=GL(),zr.lanes|=r,Dd|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Gs=!0),e.memoizedState=r)}function jJ(e,t){var r=sr;sr=r!==0&&4>r?r:4,e(!0);var n=r_.transition;r_.transition={};try{e(!1),t()}finally{sr=r,r_.transition=n}}function W6(){return ni().memoizedState}function NJ(e,t,r){var n=dc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},H6(e))V6(t,r);else if(r=S6(e,t,r,n),r!==null){var a=Cs();Fi(r,e,n,a),q6(r,t,n)}}function _J(e,t,r){var n=dc(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(H6(e))V6(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,Ui(l,o)){var c=t.interleaved;c===null?(a.next=a,qP(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=S6(e,t,a,n),r!==null&&(a=Cs(),Fi(r,e,n,a),q6(r,t,n))}}function H6(e){var t=e.alternate;return e===zr||t!==null&&t===zr}function V6(e,t){mp=a0=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function q6(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,OP(e,r)}}var i0={readContext:ri,useCallback:as,useContext:as,useEffect:as,useImperativeHandle:as,useInsertionEffect:as,useLayoutEffect:as,useMemo:as,useReducer:as,useRef:as,useState:as,useDebugValue:as,useDeferredValue:as,useTransition:as,useMutableSource:as,useSyncExternalStore:as,useId:as,unstable_isNewReconciler:!1},SJ={readContext:ri,useCallback:function(e,t){return ao().memoizedState=[e,t===void 0?null:t],e},useContext:ri,useEffect:j4,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,py(4194308,4,L6.bind(null,t,e),r)},useLayoutEffect:function(e,t){return py(4194308,4,e,t)},useInsertionEffect:function(e,t){return py(4,2,e,t)},useMemo:function(e,t){var r=ao();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ao();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=NJ.bind(null,zr,e),[n.memoizedState,e]},useRef:function(e){var t=ao();return e={current:e},t.memoizedState=e},useState:w4,useDebugValue:tk,useDeferredValue:function(e){return ao().memoizedState=e},useTransition:function(){var e=w4(!1),t=e[0];return e=jJ.bind(null,e[1]),ao().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=zr,a=ao();if(Ir){if(r===void 0)throw Error(De(407));r=r()}else{if(r=t(),Dn===null)throw Error(De(349));Rd&30||T6(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,j4(O6.bind(null,n,i,e),[e]),n.flags|=2048,Vp(9,A6.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=ao(),t=Dn.identifierPrefix;if(Ir){var r=Ko,n=Go;r=(n&~(1<<32-Li(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Wp++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=wJ++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},CJ={readContext:ri,useCallback:B6,useContext:ri,useEffect:ek,useImperativeHandle:F6,useInsertionEffect:D6,useLayoutEffect:$6,useMemo:z6,useReducer:n_,useRef:R6,useState:function(){return n_(Hp)},useDebugValue:tk,useDeferredValue:function(e){var t=ni();return U6(t,wn.memoizedState,e)},useTransition:function(){var e=n_(Hp)[0],t=ni().memoizedState;return[e,t]},useMutableSource:k6,useSyncExternalStore:E6,useId:W6,unstable_isNewReconciler:!1},PJ={readContext:ri,useCallback:B6,useContext:ri,useEffect:ek,useImperativeHandle:F6,useInsertionEffect:D6,useLayoutEffect:$6,useMemo:z6,useReducer:s_,useRef:R6,useState:function(){return s_(Hp)},useDebugValue:tk,useDeferredValue:function(e){var t=ni();return wn===null?t.memoizedState=e:U6(t,wn.memoizedState,e)},useTransition:function(){var e=s_(Hp)[0],t=ni().memoizedState;return[e,t]},useMutableSource:k6,useSyncExternalStore:E6,useId:W6,unstable_isNewReconciler:!1};function Si(e,t){if(e&&e.defaultProps){t=Ur({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function fS(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ur({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var nw={isMounted:function(e){return(e=e._reactInternals)?tu(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Cs(),a=dc(e),i=Jo(n,a);i.payload=t,r!=null&&(i.callback=r),t=lc(e,i,a),t!==null&&(Fi(t,e,a,n),fy(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Cs(),a=dc(e),i=Jo(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=lc(e,i,a),t!==null&&(Fi(t,e,a,n),fy(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Cs(),n=dc(e),a=Jo(r,n);a.tag=2,t!=null&&(a.callback=t),t=lc(e,a,n),t!==null&&(Fi(t,e,n,r),fy(t,e,n))}};function N4(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!$p(r,n)||!$p(a,i):!0}function G6(e,t,r){var n=!1,a=xc,i=t.contextType;return typeof i=="object"&&i!==null?i=ri(i):(a=Zs(t)?Md:fs.current,n=t.contextTypes,i=(n=n!=null)?$h(e,a):xc),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=nw,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function _4(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&nw.enqueueReplaceState(t,t.state,null)}function mS(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},GP(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=ri(i):(i=Zs(t)?Md:fs.current,a.context=$h(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(fS(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&nw.enqueueReplaceState(a,a.state,null),n0(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function zh(e,t){try{var r="",n=t;do r+=tX(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function a_(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function pS(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var kJ=typeof WeakMap=="function"?WeakMap:Map;function K6(e,t,r){r=Jo(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){l0||(l0=!0,SS=n),pS(e,t)},r}function Y6(e,t,r){r=Jo(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){pS(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){pS(e,t),typeof n!="function"&&(cc===null?cc=new Set([this]):cc.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function S4(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new kJ;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=UJ.bind(null,e,t,r),t.then(e,e))}function C4(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function P4(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Jo(-1,1),t.tag=2,lc(r,t,1))),r.lanes|=1),e)}var EJ=yl.ReactCurrentOwner,Gs=!1;function ys(e,t,r,n){t.child=e===null?_6(t,null,r,n):Fh(t,e.child,r,n)}function k4(e,t,r,n,a){r=r.render;var i=t.ref;return mh(t,a),n=JP(e,t,r,n,i,a),r=QP(),e!==null&&!Gs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ll(e,t,a)):(Ir&&r&&BP(t),t.flags|=1,ys(e,t,n,a),t.child)}function E4(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!ck(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Z6(e,t,i,n,a)):(e=yy(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:$p,r(o,n)&&e.ref===t.ref)return ll(e,t,a)}return t.flags|=1,e=uc(i,n),e.ref=t.ref,e.return=t,t.child=e}function Z6(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if($p(i,n)&&e.ref===t.ref)if(Gs=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Gs=!0);else return t.lanes=e.lanes,ll(e,t,a)}return gS(e,t,r,n,a)}function X6(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},jr(rh,fa),fa|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,jr(rh,fa),fa|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,jr(rh,fa),fa|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,jr(rh,fa),fa|=n;return ys(e,t,a,r),t.child}function J6(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function gS(e,t,r,n,a){var i=Zs(r)?Md:fs.current;return i=$h(t,i),mh(t,a),r=JP(e,t,r,n,i,a),n=QP(),e!==null&&!Gs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ll(e,t,a)):(Ir&&n&&BP(t),t.flags|=1,ys(e,t,r,a),t.child)}function T4(e,t,r,n,a){if(Zs(r)){var i=!0;Jy(t)}else i=!1;if(mh(t,a),t.stateNode===null)gy(e,t),G6(t,r,n),mS(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=ri(d):(d=Zs(r)?Md:fs.current,d=$h(t,d));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&_4(t,o,n,d),Bl=!1;var m=t.memoizedState;o.state=m,n0(t,n,o,a),c=t.memoizedState,l!==n||m!==c||Ys.current||Bl?(typeof h=="function"&&(fS(t,r,h,n),c=t.memoizedState),(l=Bl||N4(t,r,l,n,m,c,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,C6(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Si(t.type,l),o.props=d,f=t.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=ri(c):(c=Zs(r)?Md:fs.current,c=$h(t,c));var p=r.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==c)&&_4(t,o,n,c),Bl=!1,m=t.memoizedState,o.state=m,n0(t,n,o,a);var y=t.memoizedState;l!==f||m!==y||Ys.current||Bl?(typeof p=="function"&&(fS(t,r,p,n),y=t.memoizedState),(d=Bl||N4(t,r,d,n,m,y,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),o.props=n,o.state=y,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return xS(e,t,r,n,i,a)}function xS(e,t,r,n,a,i){J6(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&p4(t,r,!1),ll(e,t,i);n=t.stateNode,EJ.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Fh(t,e.child,null,i),t.child=Fh(t,null,l,i)):ys(e,t,l,i),t.memoizedState=n.state,a&&p4(t,r,!0),t.child}function Q6(e){var t=e.stateNode;t.pendingContext?m4(e,t.pendingContext,t.pendingContext!==t.context):t.context&&m4(e,t.context,!1),KP(e,t.containerInfo)}function A4(e,t,r,n,a){return Lh(),UP(a),t.flags|=256,ys(e,t,r,n),t.child}var vS={dehydrated:null,treeContext:null,retryLane:0};function yS(e){return{baseLanes:e,cachePool:null,transitions:null}}function eF(e,t,r){var n=t.pendingProps,a=Br.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),jr(Br,a&1),e===null)return uS(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=iw(o,n,0,null),e=Ed(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=yS(r),t.memoizedState=vS,e):rk(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return TJ(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=uc(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=uc(l,i):(i=Ed(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?yS(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=vS,n}return i=e.child,e=i.sibling,n=uc(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function rk(e,t){return t=iw({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function gv(e,t,r,n){return n!==null&&UP(n),Fh(t,e.child,null,r),e=rk(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function TJ(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=a_(Error(De(422))),gv(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=iw({mode:"visible",children:n.children},a,0,null),i=Ed(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Fh(t,e.child,null,o),t.child.memoizedState=yS(o),t.memoizedState=vS,i);if(!(t.mode&1))return gv(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(De(419)),n=a_(i,n,void 0),gv(e,t,o,n)}if(l=(o&e.childLanes)!==0,Gs||l){if(n=Dn,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,ol(e,a),Fi(n,e,a,-1))}return lk(),n=a_(Error(De(421))),gv(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=WJ.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Ca=oc(a.nextSibling),Pa=t,Ir=!0,Ii=null,e!==null&&(Ga[Ka++]=Go,Ga[Ka++]=Ko,Ga[Ka++]=Id,Go=e.id,Ko=e.overflow,Id=t),t=rk(t,n.children),t.flags|=4096,t)}function O4(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),hS(e.return,t,r)}function i_(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function tF(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(ys(e,t,n.children,r),n=Br.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&O4(e,r,t);else if(e.tag===19)O4(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(jr(Br,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&s0(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),i_(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&s0(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}i_(t,!0,r,null,i);break;case"together":i_(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function gy(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ll(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Dd|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(De(153));if(t.child!==null){for(e=t.child,r=uc(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=uc(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function AJ(e,t,r){switch(t.tag){case 3:Q6(t),Lh();break;case 5:P6(t);break;case 1:Zs(t.type)&&Jy(t);break;case 4:KP(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;jr(t0,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(jr(Br,Br.current&1),t.flags|=128,null):r&t.child.childLanes?eF(e,t,r):(jr(Br,Br.current&1),e=ll(e,t,r),e!==null?e.sibling:null);jr(Br,Br.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return tF(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),jr(Br,Br.current),n)break;return null;case 22:case 23:return t.lanes=0,X6(e,t,r)}return ll(e,t,r)}var rF,bS,nF,sF;rF=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};bS=function(){};nF=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,md(po.current);var i=null;switch(r){case"input":a=U1(e,a),n=U1(e,n),i=[];break;case"select":a=Ur({},a,{value:void 0}),n=Ur({},n,{value:void 0}),i=[];break;case"textarea":a=V1(e,a),n=V1(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Zy)}G1(r,n);var o;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Tp.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Tp.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&kr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};sF=function(e,t,r,n){r!==n&&(t.flags|=4)};function Tm(e,t){if(!Ir)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function is(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function OJ(e,t,r){var n=t.pendingProps;switch(zP(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return is(t),null;case 1:return Zs(t.type)&&Xy(),is(t),null;case 3:return n=t.stateNode,Bh(),Or(Ys),Or(fs),ZP(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(mv(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ii!==null&&(kS(Ii),Ii=null))),bS(e,t),is(t),null;case 5:YP(t);var a=md(Up.current);if(r=t.type,e!==null&&t.stateNode!=null)nF(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(De(166));return is(t),null}if(e=md(po.current),mv(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[co]=t,n[Bp]=i,e=(t.mode&1)!==0,r){case"dialog":kr("cancel",n),kr("close",n);break;case"iframe":case"object":case"embed":kr("load",n);break;case"video":case"audio":for(a=0;a<Jm.length;a++)kr(Jm[a],n);break;case"source":kr("error",n);break;case"img":case"image":case"link":kr("error",n),kr("load",n);break;case"details":kr("toggle",n);break;case"input":zO(n,i),kr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},kr("invalid",n);break;case"textarea":WO(n,i),kr("invalid",n)}G1(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&fv(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&fv(n.textContent,l,e),a=["children",""+l]):Tp.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&kr("scroll",n)}switch(r){case"input":av(n),UO(n,i,!0);break;case"textarea":av(n),HO(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Zy)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=OL(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[co]=t,e[Bp]=n,rF(e,t,!1,!1),t.stateNode=e;e:{switch(o=K1(r,n),r){case"dialog":kr("cancel",e),kr("close",e),a=n;break;case"iframe":case"object":case"embed":kr("load",e),a=n;break;case"video":case"audio":for(a=0;a<Jm.length;a++)kr(Jm[a],e);a=n;break;case"source":kr("error",e),a=n;break;case"img":case"image":case"link":kr("error",e),kr("load",e),a=n;break;case"details":kr("toggle",e),a=n;break;case"input":zO(e,n),a=U1(e,n),kr("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Ur({},n,{value:void 0}),kr("invalid",e);break;case"textarea":WO(e,n),a=V1(e,n),kr("invalid",e);break;default:a=n}G1(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?RL(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ML(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Ap(e,c):typeof c=="number"&&Ap(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Tp.hasOwnProperty(i)?c!=null&&i==="onScroll"&&kr("scroll",e):c!=null&&CP(e,i,c,o))}switch(r){case"input":av(e),UO(e,n,!1);break;case"textarea":av(e),HO(e);break;case"option":n.value!=null&&e.setAttribute("value",""+gc(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?dh(e,!!n.multiple,i,!1):n.defaultValue!=null&&dh(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Zy)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return is(t),null;case 6:if(e&&t.stateNode!=null)sF(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(De(166));if(r=md(Up.current),md(po.current),mv(t)){if(n=t.stateNode,r=t.memoizedProps,n[co]=t,(i=n.nodeValue!==r)&&(e=Pa,e!==null))switch(e.tag){case 3:fv(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&fv(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[co]=t,t.stateNode=n}return is(t),null;case 13:if(Or(Br),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ir&&Ca!==null&&t.mode&1&&!(t.flags&128))j6(),Lh(),t.flags|=98560,i=!1;else if(i=mv(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(De(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(De(317));i[co]=t}else Lh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;is(t),i=!1}else Ii!==null&&(kS(Ii),Ii=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Br.current&1?jn===0&&(jn=3):lk())),t.updateQueue!==null&&(t.flags|=4),is(t),null);case 4:return Bh(),bS(e,t),e===null&&Lp(t.stateNode.containerInfo),is(t),null;case 10:return VP(t.type._context),is(t),null;case 17:return Zs(t.type)&&Xy(),is(t),null;case 19:if(Or(Br),i=t.memoizedState,i===null)return is(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Tm(i,!1);else{if(jn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=s0(e),o!==null){for(t.flags|=128,Tm(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return jr(Br,Br.current&1|2),t.child}e=e.sibling}i.tail!==null&&en()>Uh&&(t.flags|=128,n=!0,Tm(i,!1),t.lanes=4194304)}else{if(!n)if(e=s0(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Tm(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ir)return is(t),null}else 2*en()-i.renderingStartTime>Uh&&r!==1073741824&&(t.flags|=128,n=!0,Tm(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=en(),t.sibling=null,r=Br.current,jr(Br,n?r&1|2:r&1),t):(is(t),null);case 22:case 23:return ok(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?fa&1073741824&&(is(t),t.subtreeFlags&6&&(t.flags|=8192)):is(t),null;case 24:return null;case 25:return null}throw Error(De(156,t.tag))}function MJ(e,t){switch(zP(t),t.tag){case 1:return Zs(t.type)&&Xy(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Bh(),Or(Ys),Or(fs),ZP(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return YP(t),null;case 13:if(Or(Br),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(De(340));Lh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Or(Br),null;case 4:return Bh(),null;case 10:return VP(t.type._context),null;case 22:case 23:return ok(),null;case 24:return null;default:return null}}var xv=!1,cs=!1,IJ=typeof WeakSet=="function"?WeakSet:Set,He=null;function th(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Kr(e,t,n)}else r.current=null}function wS(e,t,r){try{r()}catch(n){Kr(e,t,n)}}var M4=!1;function RJ(e,t){if(sS=Gy,e=c6(),FP(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,h=0,f=e,m=null;t:for(;;){for(var p;f!==r||a!==0&&f.nodeType!==3||(l=o+a),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)m=f,f=p;for(;;){if(f===e)break t;if(m===r&&++d===a&&(l=o),m===i&&++h===n&&(c=o),(p=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(aS={focusedElem:e,selectionRange:r},Gy=!1,He=t;He!==null;)if(t=He,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,He=e;else for(;He!==null;){t=He;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,b=y.memoizedState,N=t.stateNode,j=N.getSnapshotBeforeUpdate(t.elementType===t.type?v:Si(t.type,v),b);N.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(De(163))}}catch(S){Kr(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,He=e;break}He=t.return}return y=M4,M4=!1,y}function pp(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&wS(t,r,i)}a=a.next}while(a!==n)}}function sw(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function jS(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function aF(e){var t=e.alternate;t!==null&&(e.alternate=null,aF(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[co],delete t[Bp],delete t[lS],delete t[xJ],delete t[vJ])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function iF(e){return e.tag===5||e.tag===3||e.tag===4}function I4(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||iF(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function NS(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Zy));else if(n!==4&&(e=e.child,e!==null))for(NS(e,t,r),e=e.sibling;e!==null;)NS(e,t,r),e=e.sibling}function _S(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(_S(e,t,r),e=e.sibling;e!==null;)_S(e,t,r),e=e.sibling}var Gn=null,Ti=!1;function El(e,t,r){for(r=r.child;r!==null;)oF(e,t,r),r=r.sibling}function oF(e,t,r){if(mo&&typeof mo.onCommitFiberUnmount=="function")try{mo.onCommitFiberUnmount(Zb,r)}catch{}switch(r.tag){case 5:cs||th(r,t);case 6:var n=Gn,a=Ti;Gn=null,El(e,t,r),Gn=n,Ti=a,Gn!==null&&(Ti?(e=Gn,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Gn.removeChild(r.stateNode));break;case 18:Gn!==null&&(Ti?(e=Gn,r=r.stateNode,e.nodeType===8?QN(e.parentNode,r):e.nodeType===1&&QN(e,r),Rp(e)):QN(Gn,r.stateNode));break;case 4:n=Gn,a=Ti,Gn=r.stateNode.containerInfo,Ti=!0,El(e,t,r),Gn=n,Ti=a;break;case 0:case 11:case 14:case 15:if(!cs&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&wS(r,t,o),a=a.next}while(a!==n)}El(e,t,r);break;case 1:if(!cs&&(th(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Kr(r,t,l)}El(e,t,r);break;case 21:El(e,t,r);break;case 22:r.mode&1?(cs=(n=cs)||r.memoizedState!==null,El(e,t,r),cs=n):El(e,t,r);break;default:El(e,t,r)}}function R4(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new IJ),t.forEach(function(n){var a=HJ.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function bi(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Gn=l.stateNode,Ti=!1;break e;case 3:Gn=l.stateNode.containerInfo,Ti=!0;break e;case 4:Gn=l.stateNode.containerInfo,Ti=!0;break e}l=l.return}if(Gn===null)throw Error(De(160));oF(i,o,a),Gn=null,Ti=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Kr(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)lF(t,e),t=t.sibling}function lF(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(bi(t,e),to(e),n&4){try{pp(3,e,e.return),sw(3,e)}catch(v){Kr(e,e.return,v)}try{pp(5,e,e.return)}catch(v){Kr(e,e.return,v)}}break;case 1:bi(t,e),to(e),n&512&&r!==null&&th(r,r.return);break;case 5:if(bi(t,e),to(e),n&512&&r!==null&&th(r,r.return),e.flags&32){var a=e.stateNode;try{Ap(a,"")}catch(v){Kr(e,e.return,v)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&TL(a,i),K1(l,o);var d=K1(l,i);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?RL(a,f):h==="dangerouslySetInnerHTML"?ML(a,f):h==="children"?Ap(a,f):CP(a,h,f,d)}switch(l){case"input":W1(a,i);break;case"textarea":AL(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?dh(a,!!i.multiple,p,!1):m!==!!i.multiple&&(i.defaultValue!=null?dh(a,!!i.multiple,i.defaultValue,!0):dh(a,!!i.multiple,i.multiple?[]:"",!1))}a[Bp]=i}catch(v){Kr(e,e.return,v)}}break;case 6:if(bi(t,e),to(e),n&4){if(e.stateNode===null)throw Error(De(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(v){Kr(e,e.return,v)}}break;case 3:if(bi(t,e),to(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Rp(t.containerInfo)}catch(v){Kr(e,e.return,v)}break;case 4:bi(t,e),to(e);break;case 13:bi(t,e),to(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(ak=en())),n&4&&R4(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(cs=(d=cs)||h,bi(t,e),cs=d):bi(t,e),to(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(He=e,h=e.child;h!==null;){for(f=He=h;He!==null;){switch(m=He,p=m.child,m.tag){case 0:case 11:case 14:case 15:pp(4,m,m.return);break;case 1:th(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(v){Kr(n,r,v)}}break;case 5:th(m,m.return);break;case 22:if(m.memoizedState!==null){$4(f);continue}}p!==null?(p.return=m,He=p):$4(f)}h=h.sibling}e:for(h=null,f=e;;){if(f.tag===5){if(h===null){h=f;try{a=f.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=IL("display",o))}catch(v){Kr(e,e.return,v)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(v){Kr(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:bi(t,e),to(e),n&4&&R4(e);break;case 21:break;default:bi(t,e),to(e)}}function to(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(iF(r)){var n=r;break e}r=r.return}throw Error(De(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Ap(a,""),n.flags&=-33);var i=I4(e);_S(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=I4(e);NS(e,l,o);break;default:throw Error(De(161))}}catch(c){Kr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function DJ(e,t,r){He=e,cF(e)}function cF(e,t,r){for(var n=(e.mode&1)!==0;He!==null;){var a=He,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||xv;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||cs;l=xv;var d=cs;if(xv=o,(cs=c)&&!d)for(He=a;He!==null;)o=He,c=o.child,o.tag===22&&o.memoizedState!==null?L4(a):c!==null?(c.return=o,He=c):L4(a);for(;i!==null;)He=i,cF(i),i=i.sibling;He=a,xv=l,cs=d}D4(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,He=i):D4(e)}}function D4(e){for(;He!==null;){var t=He;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:cs||sw(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!cs)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Si(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&b4(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}b4(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Rp(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(De(163))}cs||t.flags&512&&jS(t)}catch(m){Kr(t,t.return,m)}}if(t===e){He=null;break}if(r=t.sibling,r!==null){r.return=t.return,He=r;break}He=t.return}}function $4(e){for(;He!==null;){var t=He;if(t===e){He=null;break}var r=t.sibling;if(r!==null){r.return=t.return,He=r;break}He=t.return}}function L4(e){for(;He!==null;){var t=He;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{sw(4,t)}catch(c){Kr(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Kr(t,a,c)}}var i=t.return;try{jS(t)}catch(c){Kr(t,i,c)}break;case 5:var o=t.return;try{jS(t)}catch(c){Kr(t,o,c)}}}catch(c){Kr(t,t.return,c)}if(t===e){He=null;break}var l=t.sibling;if(l!==null){l.return=t.return,He=l;break}He=t.return}}var $J=Math.ceil,o0=yl.ReactCurrentDispatcher,nk=yl.ReactCurrentOwner,Ja=yl.ReactCurrentBatchConfig,Bt=0,Dn=null,fn=null,Zn=0,fa=0,rh=_c(0),jn=0,qp=null,Dd=0,aw=0,sk=0,gp=null,Vs=null,ak=0,Uh=1/0,Uo=null,l0=!1,SS=null,cc=null,vv=!1,Ql=null,c0=0,xp=0,CS=null,xy=-1,vy=0;function Cs(){return Bt&6?en():xy!==-1?xy:xy=en()}function dc(e){return e.mode&1?Bt&2&&Zn!==0?Zn&-Zn:bJ.transition!==null?(vy===0&&(vy=GL()),vy):(e=sr,e!==0||(e=window.event,e=e===void 0?16:e6(e.type)),e):1}function Fi(e,t,r,n){if(50<xp)throw xp=0,CS=null,Error(De(185));nx(e,r,n),(!(Bt&2)||e!==Dn)&&(e===Dn&&(!(Bt&2)&&(aw|=r),jn===4&&Vl(e,Zn)),Xs(e,n),r===1&&Bt===0&&!(t.mode&1)&&(Uh=en()+500,tw&&Sc()))}function Xs(e,t){var r=e.callbackNode;bX(e,t);var n=qy(e,e===Dn?Zn:0);if(n===0)r!==null&&GO(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&GO(r),t===1)e.tag===0?yJ(F4.bind(null,e)):y6(F4.bind(null,e)),pJ(function(){!(Bt&6)&&Sc()}),r=null;else{switch(KL(n)){case 1:r=AP;break;case 4:r=VL;break;case 16:r=Vy;break;case 536870912:r=qL;break;default:r=Vy}r=xF(r,dF.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function dF(e,t){if(xy=-1,vy=0,Bt&6)throw Error(De(327));var r=e.callbackNode;if(ph()&&e.callbackNode!==r)return null;var n=qy(e,e===Dn?Zn:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=d0(e,n);else{t=n;var a=Bt;Bt|=2;var i=hF();(Dn!==e||Zn!==t)&&(Uo=null,Uh=en()+500,kd(e,t));do try{BJ();break}catch(l){uF(e,l)}while(!0);HP(),o0.current=i,Bt=a,fn!==null?t=0:(Dn=null,Zn=0,t=jn)}if(t!==0){if(t===2&&(a=Q1(e),a!==0&&(n=a,t=PS(e,a))),t===1)throw r=qp,kd(e,0),Vl(e,n),Xs(e,en()),r;if(t===6)Vl(e,n);else{if(a=e.current.alternate,!(n&30)&&!LJ(a)&&(t=d0(e,n),t===2&&(i=Q1(e),i!==0&&(n=i,t=PS(e,i))),t===1))throw r=qp,kd(e,0),Vl(e,n),Xs(e,en()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(De(345));case 2:Qc(e,Vs,Uo);break;case 3:if(Vl(e,n),(n&130023424)===n&&(t=ak+500-en(),10<t)){if(qy(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Cs(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=oS(Qc.bind(null,e,Vs,Uo),t);break}Qc(e,Vs,Uo);break;case 4:if(Vl(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-Li(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=en()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*$J(n/1960))-n,10<n){e.timeoutHandle=oS(Qc.bind(null,e,Vs,Uo),n);break}Qc(e,Vs,Uo);break;case 5:Qc(e,Vs,Uo);break;default:throw Error(De(329))}}}return Xs(e,en()),e.callbackNode===r?dF.bind(null,e):null}function PS(e,t){var r=gp;return e.current.memoizedState.isDehydrated&&(kd(e,t).flags|=256),e=d0(e,t),e!==2&&(t=Vs,Vs=r,t!==null&&kS(t)),e}function kS(e){Vs===null?Vs=e:Vs.push.apply(Vs,e)}function LJ(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Ui(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vl(e,t){for(t&=~sk,t&=~aw,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Li(t),n=1<<r;e[r]=-1,t&=~n}}function F4(e){if(Bt&6)throw Error(De(327));ph();var t=qy(e,0);if(!(t&1))return Xs(e,en()),null;var r=d0(e,t);if(e.tag!==0&&r===2){var n=Q1(e);n!==0&&(t=n,r=PS(e,n))}if(r===1)throw r=qp,kd(e,0),Vl(e,t),Xs(e,en()),r;if(r===6)throw Error(De(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Qc(e,Vs,Uo),Xs(e,en()),null}function ik(e,t){var r=Bt;Bt|=1;try{return e(t)}finally{Bt=r,Bt===0&&(Uh=en()+500,tw&&Sc())}}function $d(e){Ql!==null&&Ql.tag===0&&!(Bt&6)&&ph();var t=Bt;Bt|=1;var r=Ja.transition,n=sr;try{if(Ja.transition=null,sr=1,e)return e()}finally{sr=n,Ja.transition=r,Bt=t,!(Bt&6)&&Sc()}}function ok(){fa=rh.current,Or(rh)}function kd(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,mJ(r)),fn!==null)for(r=fn.return;r!==null;){var n=r;switch(zP(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Xy();break;case 3:Bh(),Or(Ys),Or(fs),ZP();break;case 5:YP(n);break;case 4:Bh();break;case 13:Or(Br);break;case 19:Or(Br);break;case 10:VP(n.type._context);break;case 22:case 23:ok()}r=r.return}if(Dn=e,fn=e=uc(e.current,null),Zn=fa=t,jn=0,qp=null,sk=aw=Dd=0,Vs=gp=null,fd!==null){for(t=0;t<fd.length;t++)if(r=fd[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}fd=null}return e}function uF(e,t){do{var r=fn;try{if(HP(),my.current=i0,a0){for(var n=zr.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}a0=!1}if(Rd=0,Mn=wn=zr=null,mp=!1,Wp=0,nk.current=null,r===null||r.return===null){jn=1,qp=t,fn=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Zn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=C4(o);if(p!==null){p.flags&=-257,P4(p,o,l,i,t),p.mode&1&&S4(i,d,t),t=p,c=d;var y=t.updateQueue;if(y===null){var v=new Set;v.add(c),t.updateQueue=v}else y.add(c);break e}else{if(!(t&1)){S4(i,d,t),lk();break e}c=Error(De(426))}}else if(Ir&&l.mode&1){var b=C4(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),P4(b,o,l,i,t),UP(zh(c,l));break e}}i=c=zh(c,l),jn!==4&&(jn=2),gp===null?gp=[i]:gp.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var N=K6(i,c,t);y4(i,N);break e;case 1:l=c;var j=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof j.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(cc===null||!cc.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=Y6(i,l,t);y4(i,S);break e}}i=i.return}while(i!==null)}mF(r)}catch(C){t=C,fn===r&&r!==null&&(fn=r=r.return);continue}break}while(!0)}function hF(){var e=o0.current;return o0.current=i0,e===null?i0:e}function lk(){(jn===0||jn===3||jn===2)&&(jn=4),Dn===null||!(Dd&268435455)&&!(aw&268435455)||Vl(Dn,Zn)}function d0(e,t){var r=Bt;Bt|=2;var n=hF();(Dn!==e||Zn!==t)&&(Uo=null,kd(e,t));do try{FJ();break}catch(a){uF(e,a)}while(!0);if(HP(),Bt=r,o0.current=n,fn!==null)throw Error(De(261));return Dn=null,Zn=0,jn}function FJ(){for(;fn!==null;)fF(fn)}function BJ(){for(;fn!==null&&!uX();)fF(fn)}function fF(e){var t=gF(e.alternate,e,fa);e.memoizedProps=e.pendingProps,t===null?mF(e):fn=t,nk.current=null}function mF(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=MJ(r,t),r!==null){r.flags&=32767,fn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{jn=6,fn=null;return}}else if(r=OJ(r,t,fa),r!==null){fn=r;return}if(t=t.sibling,t!==null){fn=t;return}fn=t=e}while(t!==null);jn===0&&(jn=5)}function Qc(e,t,r){var n=sr,a=Ja.transition;try{Ja.transition=null,sr=1,zJ(e,t,r,n)}finally{Ja.transition=a,sr=n}return null}function zJ(e,t,r,n){do ph();while(Ql!==null);if(Bt&6)throw Error(De(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(De(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(wX(e,i),e===Dn&&(fn=Dn=null,Zn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||vv||(vv=!0,xF(Vy,function(){return ph(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Ja.transition,Ja.transition=null;var o=sr;sr=1;var l=Bt;Bt|=4,nk.current=null,RJ(e,r),lF(r,e),oJ(aS),Gy=!!sS,aS=sS=null,e.current=r,DJ(r),hX(),Bt=l,sr=o,Ja.transition=i}else e.current=r;if(vv&&(vv=!1,Ql=e,c0=a),i=e.pendingLanes,i===0&&(cc=null),pX(r.stateNode),Xs(e,en()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(l0)throw l0=!1,e=SS,SS=null,e;return c0&1&&e.tag!==0&&ph(),i=e.pendingLanes,i&1?e===CS?xp++:(xp=0,CS=e):xp=0,Sc(),null}function ph(){if(Ql!==null){var e=KL(c0),t=Ja.transition,r=sr;try{if(Ja.transition=null,sr=16>e?16:e,Ql===null)var n=!1;else{if(e=Ql,Ql=null,c0=0,Bt&6)throw Error(De(331));var a=Bt;for(Bt|=4,He=e.current;He!==null;){var i=He,o=i.child;if(He.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(He=d;He!==null;){var h=He;switch(h.tag){case 0:case 11:case 15:pp(8,h,i)}var f=h.child;if(f!==null)f.return=h,He=f;else for(;He!==null;){h=He;var m=h.sibling,p=h.return;if(aF(h),h===d){He=null;break}if(m!==null){m.return=p,He=m;break}He=p}}}var y=i.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}He=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,He=o;else e:for(;He!==null;){if(i=He,i.flags&2048)switch(i.tag){case 0:case 11:case 15:pp(9,i,i.return)}var N=i.sibling;if(N!==null){N.return=i.return,He=N;break e}He=i.return}}var j=e.current;for(He=j;He!==null;){o=He;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,He=w;else e:for(o=j;He!==null;){if(l=He,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:sw(9,l)}}catch(C){Kr(l,l.return,C)}if(l===o){He=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,He=S;break e}He=l.return}}if(Bt=a,Sc(),mo&&typeof mo.onPostCommitFiberRoot=="function")try{mo.onPostCommitFiberRoot(Zb,e)}catch{}n=!0}return n}finally{sr=r,Ja.transition=t}}return!1}function B4(e,t,r){t=zh(r,t),t=K6(e,t,1),e=lc(e,t,1),t=Cs(),e!==null&&(nx(e,1,t),Xs(e,t))}function Kr(e,t,r){if(e.tag===3)B4(e,e,r);else for(;t!==null;){if(t.tag===3){B4(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(cc===null||!cc.has(n))){e=zh(r,e),e=Y6(t,e,1),t=lc(t,e,1),e=Cs(),t!==null&&(nx(t,1,e),Xs(t,e));break}}t=t.return}}function UJ(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Cs(),e.pingedLanes|=e.suspendedLanes&r,Dn===e&&(Zn&r)===r&&(jn===4||jn===3&&(Zn&130023424)===Zn&&500>en()-ak?kd(e,0):sk|=r),Xs(e,t)}function pF(e,t){t===0&&(e.mode&1?(t=lv,lv<<=1,!(lv&130023424)&&(lv=4194304)):t=1);var r=Cs();e=ol(e,t),e!==null&&(nx(e,t,r),Xs(e,r))}function WJ(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),pF(e,r)}function HJ(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(De(314))}n!==null&&n.delete(t),pF(e,r)}var gF;gF=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ys.current)Gs=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Gs=!1,AJ(e,t,r);Gs=!!(e.flags&131072)}else Gs=!1,Ir&&t.flags&1048576&&b6(t,e0,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;gy(e,t),e=t.pendingProps;var a=$h(t,fs.current);mh(t,r),a=JP(null,t,n,e,a,r);var i=QP();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Zs(n)?(i=!0,Jy(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,GP(t),a.updater=nw,t.stateNode=a,a._reactInternals=t,mS(t,n,e,r),t=xS(null,t,n,!0,i,r)):(t.tag=0,Ir&&i&&BP(t),ys(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(gy(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=qJ(n),e=Si(n,e),a){case 0:t=gS(null,t,n,e,r);break e;case 1:t=T4(null,t,n,e,r);break e;case 11:t=k4(null,t,n,e,r);break e;case 14:t=E4(null,t,n,Si(n.type,e),r);break e}throw Error(De(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Si(n,a),gS(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Si(n,a),T4(e,t,n,a,r);case 3:e:{if(Q6(t),e===null)throw Error(De(387));n=t.pendingProps,i=t.memoizedState,a=i.element,C6(e,t),n0(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=zh(Error(De(423)),t),t=A4(e,t,n,r,a);break e}else if(n!==a){a=zh(Error(De(424)),t),t=A4(e,t,n,r,a);break e}else for(Ca=oc(t.stateNode.containerInfo.firstChild),Pa=t,Ir=!0,Ii=null,r=_6(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Lh(),n===a){t=ll(e,t,r);break e}ys(e,t,n,r)}t=t.child}return t;case 5:return P6(t),e===null&&uS(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,iS(n,a)?o=null:i!==null&&iS(n,i)&&(t.flags|=32),J6(e,t),ys(e,t,o,r),t.child;case 6:return e===null&&uS(t),null;case 13:return eF(e,t,r);case 4:return KP(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Fh(t,null,n,r):ys(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Si(n,a),k4(e,t,n,a,r);case 7:return ys(e,t,t.pendingProps,r),t.child;case 8:return ys(e,t,t.pendingProps.children,r),t.child;case 12:return ys(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,jr(t0,n._currentValue),n._currentValue=o,i!==null)if(Ui(i.value,o)){if(i.children===a.children&&!Ys.current){t=ll(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Jo(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),hS(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(De(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),hS(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ys(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,mh(t,r),a=ri(a),n=n(a),t.flags|=1,ys(e,t,n,r),t.child;case 14:return n=t.type,a=Si(n,t.pendingProps),a=Si(n.type,a),E4(e,t,n,a,r);case 15:return Z6(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Si(n,a),gy(e,t),t.tag=1,Zs(n)?(e=!0,Jy(t)):e=!1,mh(t,r),G6(t,n,a),mS(t,n,a,r),xS(null,t,n,!0,e,r);case 19:return tF(e,t,r);case 22:return X6(e,t,r)}throw Error(De(156,t.tag))};function xF(e,t){return HL(e,t)}function VJ(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Za(e,t,r,n){return new VJ(e,t,r,n)}function ck(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qJ(e){if(typeof e=="function")return ck(e)?1:0;if(e!=null){if(e=e.$$typeof,e===kP)return 11;if(e===EP)return 14}return 2}function uc(e,t){var r=e.alternate;return r===null?(r=Za(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function yy(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")ck(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case qu:return Ed(r.children,a,i,t);case PP:o=8,a|=8;break;case L1:return e=Za(12,r,t,a|2),e.elementType=L1,e.lanes=i,e;case F1:return e=Za(13,r,t,a),e.elementType=F1,e.lanes=i,e;case B1:return e=Za(19,r,t,a),e.elementType=B1,e.lanes=i,e;case PL:return iw(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case SL:o=10;break e;case CL:o=9;break e;case kP:o=11;break e;case EP:o=14;break e;case Fl:o=16,n=null;break e}throw Error(De(130,e==null?e:typeof e,""))}return t=Za(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Ed(e,t,r,n){return e=Za(7,e,n,t),e.lanes=r,e}function iw(e,t,r,n){return e=Za(22,e,n,t),e.elementType=PL,e.lanes=r,e.stateNode={isHidden:!1},e}function o_(e,t,r){return e=Za(6,e,null,t),e.lanes=r,e}function l_(e,t,r){return t=Za(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function GJ(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=UN(0),this.expirationTimes=UN(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=UN(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function dk(e,t,r,n,a,i,o,l,c){return e=new GJ(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Za(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},GP(i),e}function KJ(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vu,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function vF(e){if(!e)return xc;e=e._reactInternals;e:{if(tu(e)!==e||e.tag!==1)throw Error(De(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Zs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(De(171))}if(e.tag===1){var r=e.type;if(Zs(r))return v6(e,r,t)}return t}function yF(e,t,r,n,a,i,o,l,c){return e=dk(r,n,!0,e,a,i,o,l,c),e.context=vF(null),r=e.current,n=Cs(),a=dc(r),i=Jo(n,a),i.callback=t??null,lc(r,i,a),e.current.lanes=a,nx(e,a,n),Xs(e,n),e}function ow(e,t,r,n){var a=t.current,i=Cs(),o=dc(a);return r=vF(r),t.context===null?t.context=r:t.pendingContext=r,t=Jo(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=lc(a,t,o),e!==null&&(Fi(e,a,o,i),fy(e,a,o)),o}function u0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function z4(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function uk(e,t){z4(e,t),(e=e.alternate)&&z4(e,t)}function YJ(){return null}var bF=typeof reportError=="function"?reportError:function(e){console.error(e)};function hk(e){this._internalRoot=e}lw.prototype.render=hk.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(De(409));ow(e,t,null,null)};lw.prototype.unmount=hk.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;$d(function(){ow(null,e,null,null)}),t[il]=null}};function lw(e){this._internalRoot=e}lw.prototype.unstable_scheduleHydration=function(e){if(e){var t=XL();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Hl.length&&t!==0&&t<Hl[r].priority;r++);Hl.splice(r,0,e),r===0&&QL(e)}};function fk(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function cw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function U4(){}function ZJ(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=u0(o);i.call(d)}}var o=yF(t,n,e,0,null,!1,!1,"",U4);return e._reactRootContainer=o,e[il]=o.current,Lp(e.nodeType===8?e.parentNode:e),$d(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var d=u0(c);l.call(d)}}var c=dk(e,0,!1,null,null,!1,!1,"",U4);return e._reactRootContainer=c,e[il]=c.current,Lp(e.nodeType===8?e.parentNode:e),$d(function(){ow(t,c,r,n)}),c}function dw(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=u0(o);l.call(c)}}ow(t,o,e,a)}else o=ZJ(r,t,e,a,n);return u0(o)}YL=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Xm(t.pendingLanes);r!==0&&(OP(t,r|1),Xs(t,en()),!(Bt&6)&&(Uh=en()+500,Sc()))}break;case 13:$d(function(){var n=ol(e,1);if(n!==null){var a=Cs();Fi(n,e,1,a)}}),uk(e,1)}};MP=function(e){if(e.tag===13){var t=ol(e,134217728);if(t!==null){var r=Cs();Fi(t,e,134217728,r)}uk(e,134217728)}};ZL=function(e){if(e.tag===13){var t=dc(e),r=ol(e,t);if(r!==null){var n=Cs();Fi(r,e,t,n)}uk(e,t)}};XL=function(){return sr};JL=function(e,t){var r=sr;try{return sr=e,t()}finally{sr=r}};Z1=function(e,t,r){switch(t){case"input":if(W1(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=ew(n);if(!a)throw Error(De(90));EL(n),W1(n,a)}}}break;case"textarea":AL(e,r);break;case"select":t=r.value,t!=null&&dh(e,!!r.multiple,t,!1)}};LL=ik;FL=$d;var XJ={usingClientEntryPoint:!1,Events:[ax,Zu,ew,DL,$L,ik]},Am={findFiberByHostInstance:hd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},JJ={bundleType:Am.bundleType,version:Am.version,rendererPackageName:Am.rendererPackageName,rendererConfig:Am.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=UL(e),e===null?null:e.stateNode},findFiberByHostInstance:Am.findFiberByHostInstance||YJ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yv.isDisabled&&yv.supportsFiber)try{Zb=yv.inject(JJ),mo=yv}catch{}}Da.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XJ;Da.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fk(t))throw Error(De(200));return KJ(e,t,null,r)};Da.createRoot=function(e,t){if(!fk(e))throw Error(De(299));var r=!1,n="",a=bF;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=dk(e,1,!1,null,null,r,!1,n,a),e[il]=t.current,Lp(e.nodeType===8?e.parentNode:e),new hk(t)};Da.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(De(188)):(e=Object.keys(e).join(","),Error(De(268,e)));return e=UL(t),e=e===null?null:e.stateNode,e};Da.flushSync=function(e){return $d(e)};Da.hydrate=function(e,t,r){if(!cw(t))throw Error(De(200));return dw(null,e,t,!0,r)};Da.hydrateRoot=function(e,t,r){if(!fk(e))throw Error(De(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=bF;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=yF(t,null,e,1,r??null,a,!1,i,o),e[il]=t.current,Lp(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new lw(t)};Da.render=function(e,t,r){if(!cw(t))throw Error(De(200));return dw(null,e,t,!1,r)};Da.unmountComponentAtNode=function(e){if(!cw(e))throw Error(De(40));return e._reactRootContainer?($d(function(){dw(null,null,e,!1,function(){e._reactRootContainer=null,e[il]=null})}),!0):!1};Da.unstable_batchedUpdates=ik;Da.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!cw(r))throw Error(De(200));if(e==null||e._reactInternals===void 0)throw Error(De(38));return dw(e,t,r,!1,n)};Da.version="18.3.1-next-f1338f8080-20240426";function wF(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wF)}catch(e){console.error(e)}}wF(),wL.exports=Da;var Cc=wL.exports;const jF=tr(Cc);var NF,W4=Cc;NF=W4.createRoot,W4.hydrateRoot;const QJ=1,eQ=1e6;let c_=0;function tQ(){return c_=(c_+1)%Number.MAX_SAFE_INTEGER,c_.toString()}const d_=new Map,H4=e=>{if(d_.has(e))return;const t=setTimeout(()=>{d_.delete(e),vp({type:"REMOVE_TOAST",toastId:e})},eQ);d_.set(e,t)},rQ=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,QJ)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?H4(r):e.toasts.forEach(n=>{H4(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},by=[];let wy={toasts:[]};function vp(e){wy=rQ(wy,e),by.forEach(t=>{t(wy)})}function nQ({...e}){const t=tQ(),r=a=>vp({type:"UPDATE_TOAST",toast:{...a,id:t}}),n=()=>vp({type:"DISMISS_TOAST",toastId:t});return vp({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||n()}}}),{id:t,dismiss:n,update:r}}function _F(){const[e,t]=x.useState(wy);return x.useEffect(()=>(by.push(t),()=>{const r=by.indexOf(t);r>-1&&by.splice(r,1)}),[e]),{...e,toast:nQ,dismiss:r=>vp({type:"DISMISS_TOAST",toastId:r})}}function Ie(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function V4(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function uw(...e){return t=>{let r=!1;const n=e.map(a=>{const i=V4(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():V4(e[a],null)}}}}function nt(...e){return x.useCallback(uw(...e),e)}function sQ(e,t){const r=x.createContext(t),n=i=>{const{children:o,...l}=i,c=x.useMemo(()=>l,Object.values(l));return s.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function a(i){const o=x.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,a]}function sn(e,t=[]){let r=[];function n(i,o){const l=x.createContext(o),c=r.length;r=[...r,o];const d=f=>{var N;const{scope:m,children:p,...y}=f,v=((N=m==null?void 0:m[e])==null?void 0:N[c])||l,b=x.useMemo(()=>y,Object.values(y));return s.jsx(v.Provider,{value:b,children:p})};d.displayName=i+"Provider";function h(f,m){var v;const p=((v=m==null?void 0:m[e])==null?void 0:v[c])||l,y=x.useContext(p);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,h]}const a=()=>{const i=r.map(o=>x.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return x.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,aQ(a,...t)]}function aQ(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...l,...f}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function vc(e){const t=oQ(e),r=x.forwardRef((n,a)=>{const{children:i,...o}=n,l=x.Children.toArray(i),c=l.find(lQ);if(c){const d=c.props.children,h=l.map(f=>f===c?x.Children.count(d)>1?x.Children.only(null):x.isValidElement(d)?d.props.children:null:f);return s.jsx(t,{...o,ref:a,children:x.isValidElement(d)?x.cloneElement(d,void 0,h):null})}return s.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}var iQ=vc("Slot");function oQ(e){const t=x.forwardRef((r,n)=>{const{children:a,...i}=r;if(x.isValidElement(a)){const o=dQ(a),l=cQ(i,a.props);return a.type!==x.Fragment&&(l.ref=n?uw(n,o):o),x.cloneElement(a,l)}return x.Children.count(a)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var SF=Symbol("radix.slottable");function CF(e){const t=({children:r})=>s.jsx(s.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=SF,t}function lQ(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===SF}function cQ(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function dQ(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Rf(e){const t=e+"CollectionProvider",[r,n]=sn(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:b,children:N}=v,j=q.useRef(null),w=q.useRef(new Map).current;return s.jsx(a,{scope:b,itemMap:w,collectionRef:j,children:N})};o.displayName=t;const l=e+"CollectionSlot",c=vc(l),d=q.forwardRef((v,b)=>{const{scope:N,children:j}=v,w=i(l,N),S=nt(b,w.collectionRef);return s.jsx(c,{ref:S,children:j})});d.displayName=l;const h=e+"CollectionItemSlot",f="data-radix-collection-item",m=vc(h),p=q.forwardRef((v,b)=>{const{scope:N,children:j,...w}=v,S=q.useRef(null),C=nt(b,S),P=i(h,N);return q.useEffect(()=>(P.itemMap.set(S,{ref:S,...w}),()=>void P.itemMap.delete(S))),s.jsx(m,{[f]:"",ref:C,children:j})});p.displayName=h;function y(v){const b=i(e+"CollectionConsumer",v);return q.useCallback(()=>{const j=b.collectionRef.current;if(!j)return[];const w=Array.from(j.querySelectorAll(`[${f}]`));return Array.from(b.itemMap.values()).sort((P,T)=>w.indexOf(P.ref.current)-w.indexOf(T.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:d,ItemSlot:p},y,n]}var uQ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ze=uQ.reduce((e,t)=>{const r=vc(`Primitive.${t}`),n=x.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function mk(e,t){e&&Cc.flushSync(()=>e.dispatchEvent(t))}function Zr(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),x.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function hQ(e,t=globalThis==null?void 0:globalThis.document){const r=Zr(e);x.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var fQ="DismissableLayer",ES="dismissableLayer.update",mQ="dismissableLayer.pointerDownOutside",pQ="dismissableLayer.focusOutside",q4,PF=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ru=x.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,d=x.useContext(PF),[h,f]=x.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=x.useState({}),y=nt(t,T=>f(T)),v=Array.from(d.layers),[b]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),N=v.indexOf(b),j=h?v.indexOf(h):-1,w=d.layersWithOutsidePointerEventsDisabled.size>0,S=j>=N,C=xQ(T=>{const O=T.target,E=[...d.branches].some(D=>D.contains(O));!S||E||(a==null||a(T),o==null||o(T),T.defaultPrevented||l==null||l())},m),P=vQ(T=>{const O=T.target;[...d.branches].some(D=>D.contains(O))||(i==null||i(T),o==null||o(T),T.defaultPrevented||l==null||l())},m);return hQ(T=>{j===d.layers.size-1&&(n==null||n(T),!T.defaultPrevented&&l&&(T.preventDefault(),l()))},m),x.useEffect(()=>{if(h)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(q4=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),G4(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=q4)}},[h,m,r,d]),x.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),G4())},[h,d]),x.useEffect(()=>{const T=()=>p({});return document.addEventListener(ES,T),()=>document.removeEventListener(ES,T)},[]),s.jsx(ze.div,{...c,ref:y,style:{pointerEvents:w?S?"auto":"none":void 0,...e.style},onFocusCapture:Ie(e.onFocusCapture,P.onFocusCapture),onBlurCapture:Ie(e.onBlurCapture,P.onBlurCapture),onPointerDownCapture:Ie(e.onPointerDownCapture,C.onPointerDownCapture)})});ru.displayName=fQ;var gQ="DismissableLayerBranch",kF=x.forwardRef((e,t)=>{const r=x.useContext(PF),n=x.useRef(null),a=nt(t,n);return x.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),s.jsx(ze.div,{...e,ref:a})});kF.displayName=gQ;function xQ(e,t=globalThis==null?void 0:globalThis.document){const r=Zr(e),n=x.useRef(!1),a=x.useRef(()=>{});return x.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){EF(mQ,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function vQ(e,t=globalThis==null?void 0:globalThis.document){const r=Zr(e),n=x.useRef(!1);return x.useEffect(()=>{const a=i=>{i.target&&!n.current&&EF(pQ,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function G4(){const e=new CustomEvent(ES);document.dispatchEvent(e)}function EF(e,t,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?mk(a,i):a.dispatchEvent(i)}var yQ=ru,bQ=kF,Xr=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},wQ="Portal",Df=x.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[a,i]=x.useState(!1);Xr(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?jF.createPortal(s.jsx(ze.div,{...n,ref:t}),o):null});Df.displayName=wQ;function jQ(e,t){return x.useReducer((r,n)=>t[r][n]??r,e)}var kn=e=>{const{present:t,children:r}=e,n=NQ(t),a=typeof r=="function"?r({present:n.isPresent}):x.Children.only(r),i=nt(n.ref,_Q(a));return typeof r=="function"||n.isPresent?x.cloneElement(a,{ref:i}):null};kn.displayName="Presence";function NQ(e){const[t,r]=x.useState(),n=x.useRef(null),a=x.useRef(e),i=x.useRef("none"),o=e?"mounted":"unmounted",[l,c]=jQ(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const d=bv(n.current);i.current=l==="mounted"?d:"none"},[l]),Xr(()=>{const d=n.current,h=a.current;if(h!==e){const m=i.current,p=bv(d);e?c("MOUNT"):p==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(h&&m!==p?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),Xr(()=>{if(t){let d;const h=t.ownerDocument.defaultView??window,f=p=>{const v=bv(n.current).includes(p.animationName);if(p.target===t&&v&&(c("ANIMATION_END"),!a.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",d=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},m=p=>{p.target===t&&(i.current=bv(n.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{h.clearTimeout(d),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:x.useCallback(d=>{n.current=d?getComputedStyle(d):null,r(d)},[])}}function bv(e){return(e==null?void 0:e.animationName)||"none"}function _Q(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var SQ=NP[" useInsertionEffect ".trim().toString()]||Xr;function Ln({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[a,i,o]=CQ({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:a;{const h=x.useRef(e!==void 0);x.useEffect(()=>{const f=h.current;f!==l&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,n])}const d=x.useCallback(h=>{var f;if(l){const m=PQ(h)?h(e):h;m!==e&&((f=o.current)==null||f.call(o,m))}else i(h)},[l,e,i,o]);return[c,d]}function CQ({defaultProp:e,onChange:t}){const[r,n]=x.useState(e),a=x.useRef(r),i=x.useRef(t);return SQ(()=>{i.current=t},[t]),x.useEffect(()=>{var o;a.current!==r&&((o=i.current)==null||o.call(i,r),a.current=r)},[r,a]),[r,n,i]}function PQ(e){return typeof e=="function"}var TF=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),kQ="VisuallyHidden",hw=x.forwardRef((e,t)=>s.jsx(ze.span,{...e,ref:t,style:{...TF,...e.style}}));hw.displayName=kQ;var EQ=hw,pk="ToastProvider",[gk,TQ,AQ]=Rf("Toast"),[AF,hze]=sn("Toast",[AQ]),[OQ,fw]=AF(pk),OF=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=x.useState(null),[d,h]=x.useState(0),f=x.useRef(!1),m=x.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${pk}\`. Expected non-empty \`string\`.`),s.jsx(gk.Provider,{scope:t,children:s.jsx(OQ,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:x.useCallback(()=>h(p=>p+1),[]),onToastRemove:x.useCallback(()=>h(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:o})})};OF.displayName=pk;var MF="ToastViewport",MQ=["F8"],TS="toast.viewportPause",AS="toast.viewportResume",IF=x.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=MQ,label:a="Notifications ({hotkey})",...i}=e,o=fw(MF,r),l=TQ(r),c=x.useRef(null),d=x.useRef(null),h=x.useRef(null),f=x.useRef(null),m=nt(t,f,o.onViewportChange),p=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=o.toastCount>0;x.useEffect(()=>{const b=N=>{var w;n.length!==0&&n.every(S=>N[S]||N.code===S)&&((w=f.current)==null||w.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[n]),x.useEffect(()=>{const b=c.current,N=f.current;if(y&&b&&N){const j=()=>{if(!o.isClosePausedRef.current){const P=new CustomEvent(TS);N.dispatchEvent(P),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const P=new CustomEvent(AS);N.dispatchEvent(P),o.isClosePausedRef.current=!1}},S=P=>{!b.contains(P.relatedTarget)&&w()},C=()=>{b.contains(document.activeElement)||w()};return b.addEventListener("focusin",j),b.addEventListener("focusout",S),b.addEventListener("pointermove",j),b.addEventListener("pointerleave",C),window.addEventListener("blur",j),window.addEventListener("focus",w),()=>{b.removeEventListener("focusin",j),b.removeEventListener("focusout",S),b.removeEventListener("pointermove",j),b.removeEventListener("pointerleave",C),window.removeEventListener("blur",j),window.removeEventListener("focus",w)}}},[y,o.isClosePausedRef]);const v=x.useCallback(({tabbingDirection:b})=>{const j=l().map(w=>{const S=w.ref.current,C=[S,...qQ(S)];return b==="forwards"?C:C.reverse()});return(b==="forwards"?j.reverse():j).flat()},[l]);return x.useEffect(()=>{const b=f.current;if(b){const N=j=>{var C,P,T;const w=j.altKey||j.ctrlKey||j.metaKey;if(j.key==="Tab"&&!w){const O=document.activeElement,E=j.shiftKey;if(j.target===b&&E){(C=d.current)==null||C.focus();return}const A=v({tabbingDirection:E?"backwards":"forwards"}),V=A.findIndex(U=>U===O);u_(A.slice(V+1))?j.preventDefault():E?(P=d.current)==null||P.focus():(T=h.current)==null||T.focus()}};return b.addEventListener("keydown",N),()=>b.removeEventListener("keydown",N)}},[l,v]),s.jsxs(bQ,{ref:c,role:"region","aria-label":a.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&s.jsx(OS,{ref:d,onFocusFromOutsideViewport:()=>{const b=v({tabbingDirection:"forwards"});u_(b)}}),s.jsx(gk.Slot,{scope:r,children:s.jsx(ze.ol,{tabIndex:-1,...i,ref:m})}),y&&s.jsx(OS,{ref:h,onFocusFromOutsideViewport:()=>{const b=v({tabbingDirection:"backwards"});u_(b)}})]})});IF.displayName=MF;var RF="ToastFocusProxy",OS=x.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,i=fw(RF,r);return s.jsx(hw,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&n()}})});OS.displayName=RF;var ox="Toast",IQ="toast.swipeStart",RQ="toast.swipeMove",DQ="toast.swipeCancel",$Q="toast.swipeEnd",DF=x.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...o}=e,[l,c]=Ln({prop:n,defaultProp:a??!0,onChange:i,caller:ox});return s.jsx(kn,{present:r||l,children:s.jsx(BQ,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Zr(e.onPause),onResume:Zr(e.onResume),onSwipeStart:Ie(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ie(e.onSwipeMove,d=>{const{x:h,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:Ie(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ie(e.onSwipeEnd,d=>{const{x:h,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});DF.displayName=ox;var[LQ,FQ]=AF(ox,{onClose(){}}),BQ=x.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:p,...y}=e,v=fw(ox,r),[b,N]=x.useState(null),j=nt(t,U=>N(U)),w=x.useRef(null),S=x.useRef(null),C=a||v.duration,P=x.useRef(0),T=x.useRef(C),O=x.useRef(0),{onToastAdd:E,onToastRemove:D}=v,I=Zr(()=>{var $;(b==null?void 0:b.contains(document.activeElement))&&(($=v.viewport)==null||$.focus()),o()}),A=x.useCallback(U=>{!U||U===1/0||(window.clearTimeout(O.current),P.current=new Date().getTime(),O.current=window.setTimeout(I,U))},[I]);x.useEffect(()=>{const U=v.viewport;if(U){const $=()=>{A(T.current),d==null||d()},H=()=>{const F=new Date().getTime()-P.current;T.current=T.current-F,window.clearTimeout(O.current),c==null||c()};return U.addEventListener(TS,H),U.addEventListener(AS,$),()=>{U.removeEventListener(TS,H),U.removeEventListener(AS,$)}}},[v.viewport,C,c,d,A]),x.useEffect(()=>{i&&!v.isClosePausedRef.current&&A(C)},[i,C,v.isClosePausedRef,A]),x.useEffect(()=>(E(),()=>D()),[E,D]);const V=x.useMemo(()=>b?WF(b):null,[b]);return v.viewport?s.jsxs(s.Fragment,{children:[V&&s.jsx(zQ,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:V}),s.jsx(LQ,{scope:r,onClose:I,children:Cc.createPortal(s.jsx(gk.ItemSlot,{scope:r,children:s.jsx(yQ,{asChild:!0,onEscapeKeyDown:Ie(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||I(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(ze.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...y,ref:j,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Ie(e.onKeyDown,U=>{U.key==="Escape"&&(l==null||l(U.nativeEvent),U.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:Ie(e.onPointerDown,U=>{U.button===0&&(w.current={x:U.clientX,y:U.clientY})}),onPointerMove:Ie(e.onPointerMove,U=>{if(!w.current)return;const $=U.clientX-w.current.x,H=U.clientY-w.current.y,F=!!S.current,R=["left","right"].includes(v.swipeDirection),z=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,G=R?z(0,$):0,ie=R?0:z(0,H),ae=U.pointerType==="touch"?10:2,X={x:G,y:ie},le={originalEvent:U,delta:X};F?(S.current=X,wv(RQ,f,le,{discrete:!1})):K4(X,v.swipeDirection,ae)?(S.current=X,wv(IQ,h,le,{discrete:!1}),U.target.setPointerCapture(U.pointerId)):(Math.abs($)>ae||Math.abs(H)>ae)&&(w.current=null)}),onPointerUp:Ie(e.onPointerUp,U=>{const $=S.current,H=U.target;if(H.hasPointerCapture(U.pointerId)&&H.releasePointerCapture(U.pointerId),S.current=null,w.current=null,$){const F=U.currentTarget,R={originalEvent:U,delta:$};K4($,v.swipeDirection,v.swipeThreshold)?wv($Q,p,R,{discrete:!0}):wv(DQ,m,R,{discrete:!0}),F.addEventListener("click",z=>z.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),zQ=e=>{const{__scopeToast:t,children:r,...n}=e,a=fw(ox,t),[i,o]=x.useState(!1),[l,c]=x.useState(!1);return HQ(()=>o(!0)),x.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:s.jsx(Df,{asChild:!0,children:s.jsx(hw,{...n,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",r]})})})},UQ="ToastTitle",$F=x.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(ze.div,{...n,ref:t})});$F.displayName=UQ;var WQ="ToastDescription",LF=x.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(ze.div,{...n,ref:t})});LF.displayName=WQ;var FF="ToastAction",BF=x.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?s.jsx(UF,{altText:r,asChild:!0,children:s.jsx(xk,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${FF}\`. Expected non-empty \`string\`.`),null)});BF.displayName=FF;var zF="ToastClose",xk=x.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=FQ(zF,r);return s.jsx(UF,{asChild:!0,children:s.jsx(ze.button,{type:"button",...n,ref:t,onClick:Ie(e.onClick,a.onClose)})})});xk.displayName=zF;var UF=x.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return s.jsx(ze.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function WF(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),VQ(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...WF(n))}}),t}function wv(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?mk(a,i):a.dispatchEvent(i)}var K4=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),i=n>a;return t==="left"||t==="right"?i&&n>r:!i&&a>r};function HQ(e=()=>{}){const t=Zr(e);Xr(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function VQ(e){return e.nodeType===e.ELEMENT_NODE}function qQ(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function u_(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var GQ=OF,HF=IF,VF=DF,qF=$F,GF=LF,KF=BF,YF=xk;function ZF(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=ZF(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Nt(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=ZF(e))&&(n&&(n+=" "),n+=t);return n}const Y4=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Z4=Nt,$f=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return Z4(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(d=>{const h=r==null?void 0:r[d],f=i==null?void 0:i[d];if(h===null)return null;const m=Y4(h)||Y4(f);return a[d][m]}),l=r&&Object.entries(r).reduce((d,h)=>{let[f,m]=h;return m===void 0||(d[f]=m),d},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,h)=>{let{class:f,className:m,...p}=h;return Object.entries(p).every(y=>{let[v,b]=y;return Array.isArray(b)?b.includes({...i,...l}[v]):{...i,...l}[v]===b})?[...d,f,m]:d},[]);return Z4(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KQ=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),XF=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var YQ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZQ=x.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},c)=>x.createElement("svg",{ref:c,...YQ,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:XF("lucide",a),...l},[...o.map(([d,h])=>x.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=(e,t)=>{const r=x.forwardRef(({className:n,...a},i)=>x.createElement(ZQ,{ref:i,iconNode:t,className:XF(`lucide-${KQ(e)}`,n),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=Ce("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XQ=Ce("ArchiveRestore",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h2",key:"tvwodi"}],["path",{d:"M20 8v11a2 2 0 0 1-2 2h-2",key:"1gkqxj"}],["path",{d:"m9 15 3-3 3 3",key:"1pd0qc"}],["path",{d:"M12 12v9",key:"192myk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=Ce("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=Ce("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=Ce("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=Ce("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=Ce("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=Ce("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=Ce("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=Ce("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=Ce("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=Ce("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tM=Ce("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JQ=Ce("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=Ce("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=Ce("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=Ce("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=Ce("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=Ce("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kp=Ce("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=Ce("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lf=Ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=Ce("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pc=Ce("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jk=Ce("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=Ce("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=Ce("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=Ce("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QQ=Ce("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eee=Ce("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tee=Ce("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=Ce("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ree=Ce("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nee=Ce("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=Ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const see=Ce("CopyPlus",[["line",{x1:"15",x2:"15",y1:"12",y2:"18",key:"1p7wdc"}],["line",{x1:"12",x2:"18",y1:"15",y2:"15",key:"1nscbv"}],["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=Ce("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=Ce("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JF=Ce("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=Ce("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QF=Ce("DoorOpen",[["path",{d:"M13 4h3a2 2 0 0 1 2 2v14",key:"hrm0s9"}],["path",{d:"M2 20h3",key:"1gaodv"}],["path",{d:"M13 20h9",key:"s90cdi"}],["path",{d:"M10 12v.01",key:"vx6srw"}],["path",{d:"M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z",key:"199qr4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=Ce("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nk=Ce("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=Ce("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=Ce("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=Ce("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aee=Ce("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=Ce("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iee=Ce("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=Ce("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oee=Ce("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lee=Ce("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cee=Ce("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=Ce("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=Ce("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=Ce("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=Ce("Hospital",[["path",{d:"M12 6v4",key:"16clxf"}],["path",{d:"M14 14h-4",key:"esezmu"}],["path",{d:"M14 18h-4",key:"16mqa2"}],["path",{d:"M14 8h-4",key:"z8ypaz"}],["path",{d:"M18 12h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h2",key:"b1k337"}],["path",{d:"M18 22V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v18",key:"16g51d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dee=Ce("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uee=Ce("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=Ce("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hee=Ce("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fee=Ce("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mee=Ce("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pee=Ce("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=Ce("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=Ce("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=Ce("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=Ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=Ce("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=Ce("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gee=Ce("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xee=Ce("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=Ce("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=Ce("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=Ce("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=Ce("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=Ce("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=Ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0=Ce("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=Ce("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=Ce("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=Ce("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=Ce("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vee=Ce("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=Ce("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=Ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=Ce("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yee=Ce("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=Ce("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pk=Ce("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nM=Ce("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=Ce("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=Ce("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bee=Ce("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=Ce("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=Ce("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=Ce("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wee=Ce("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8=Ce("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=Ce("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=Ce("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=Ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=Ce("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=Ce("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=Ce("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jee=Ce("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=Ce("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=Ce("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=Ce("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sM=Ce("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=Ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=Ce("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Ek="-",Nee=e=>{const t=See(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(Ek);return l[0]===""&&l.length!==1&&l.shift(),t8(l,t)||_ee(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},t8=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?t8(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(Ek);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},aM=/^\[(.+)\]$/,_ee=e=>{if(aM.test(e)){const t=aM.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},See=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return Pee(Object.entries(e.classGroups),r).forEach(([i,o])=>{DS(o,n,i,t)}),n},DS=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:iM(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(Cee(a)){DS(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{DS(o,iM(t,i),r,n)})})},iM=(e,t)=>{let r=e;return t.split(Ek).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},Cee=e=>e.isThemeGetter,Pee=(e,t)=>t?e.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,a]}):e,kee=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},r8="!",Eee=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let d=0,h=0,f;for(let b=0;b<l.length;b++){let N=l[b];if(d===0){if(N===a&&(n||l.slice(b,b+i)===t)){c.push(l.slice(h,b)),h=b+i;continue}if(N==="/"){f=b;continue}}N==="["?d++:N==="]"&&d--}const m=c.length===0?l:l.substring(h),p=m.startsWith(r8),y=p?m.substring(1):m,v=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:y,maybePostfixModifierPosition:v}};return r?l=>r({className:l,parseClassName:o}):o},Tee=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},Aee=e=>({cache:kee(e.cacheSize),parseClassName:Eee(e),...Nee(e)}),Oee=/\s+/,Mee=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(Oee);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:p}=r(d);let y=!!p,v=n(y?m.substring(0,p):m);if(!v){if(!y){l=d+(l.length>0?" "+l:l);continue}if(v=n(m),!v){l=d+(l.length>0?" "+l:l);continue}y=!1}const b=Tee(h).join(":"),N=f?b+r8:b,j=N+v;if(i.includes(j))continue;i.push(j);const w=a(v,y);for(let S=0;S<w.length;++S){const C=w[S];i.push(N+C)}l=d+(l.length>0?" "+l:l)}return l};function Iee(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=n8(t))&&(n&&(n+=" "),n+=r);return n}const n8=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=n8(e[n]))&&(r&&(r+=" "),r+=t);return r};function Ree(e,...t){let r,n,a,i=o;function o(c){const d=t.reduce((h,f)=>f(h),e());return r=Aee(d),n=r.cache.get,a=r.cache.set,i=l,l(c)}function l(c){const d=n(c);if(d)return d;const h=Mee(c,r);return a(c,h),h}return function(){return i(Iee.apply(null,arguments))}}const Pr=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},s8=/^\[(?:([a-z-]+):)?(.+)\]$/i,Dee=/^\d+\/\d+$/,$ee=new Set(["px","full","screen"]),Lee=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Fee=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Bee=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,zee=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Uee=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,$o=e=>xh(e)||$ee.has(e)||Dee.test(e),Tl=e=>Ff(e,"length",Zee),xh=e=>!!e&&!Number.isNaN(Number(e)),m_=e=>Ff(e,"number",xh),Om=e=>!!e&&Number.isInteger(Number(e)),Wee=e=>e.endsWith("%")&&xh(e.slice(0,-1)),jt=e=>s8.test(e),Al=e=>Lee.test(e),Hee=new Set(["length","size","percentage"]),Vee=e=>Ff(e,Hee,a8),qee=e=>Ff(e,"position",a8),Gee=new Set(["image","url"]),Kee=e=>Ff(e,Gee,Jee),Yee=e=>Ff(e,"",Xee),Mm=()=>!0,Ff=(e,t,r)=>{const n=s8.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},Zee=e=>Fee.test(e)&&!Bee.test(e),a8=()=>!1,Xee=e=>zee.test(e),Jee=e=>Uee.test(e),Qee=()=>{const e=Pr("colors"),t=Pr("spacing"),r=Pr("blur"),n=Pr("brightness"),a=Pr("borderColor"),i=Pr("borderRadius"),o=Pr("borderSpacing"),l=Pr("borderWidth"),c=Pr("contrast"),d=Pr("grayscale"),h=Pr("hueRotate"),f=Pr("invert"),m=Pr("gap"),p=Pr("gradientColorStops"),y=Pr("gradientColorStopPositions"),v=Pr("inset"),b=Pr("margin"),N=Pr("opacity"),j=Pr("padding"),w=Pr("saturate"),S=Pr("scale"),C=Pr("sepia"),P=Pr("skew"),T=Pr("space"),O=Pr("translate"),E=()=>["auto","contain","none"],D=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto",jt,t],A=()=>[jt,t],V=()=>["",$o,Tl],U=()=>["auto",xh,jt],$=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],H=()=>["solid","dashed","dotted","double","none"],F=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],R=()=>["start","end","center","between","around","evenly","stretch"],z=()=>["","0",jt],G=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ie=()=>[xh,jt];return{cacheSize:500,separator:":",theme:{colors:[Mm],spacing:[$o,Tl],blur:["none","",Al,jt],brightness:ie(),borderColor:[e],borderRadius:["none","","full",Al,jt],borderSpacing:A(),borderWidth:V(),contrast:ie(),grayscale:z(),hueRotate:ie(),invert:z(),gap:A(),gradientColorStops:[e],gradientColorStopPositions:[Wee,Tl],inset:I(),margin:I(),opacity:ie(),padding:A(),saturate:ie(),scale:ie(),sepia:z(),skew:ie(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",jt]}],container:["container"],columns:[{columns:[Al]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...$(),jt]}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Om,jt]}],basis:[{basis:I()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",jt]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",Om,jt]}],"grid-cols":[{"grid-cols":[Mm]}],"col-start-end":[{col:["auto",{span:["full",Om,jt]},jt]}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":[Mm]}],"row-start-end":[{row:["auto",{span:[Om,jt]},jt]}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",jt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",jt]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...R()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...R(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...R(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[j]}],px:[{px:[j]}],py:[{py:[j]}],ps:[{ps:[j]}],pe:[{pe:[j]}],pt:[{pt:[j]}],pr:[{pr:[j]}],pb:[{pb:[j]}],pl:[{pl:[j]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",jt,t]}],"min-w":[{"min-w":[jt,t,"min","max","fit"]}],"max-w":[{"max-w":[jt,t,"none","full","min","max","fit","prose",{screen:[Al]},Al]}],h:[{h:[jt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[jt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[jt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[jt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Al,Tl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",m_]}],"font-family":[{font:[Mm]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",jt]}],"line-clamp":[{"line-clamp":["none",xh,m_]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",$o,jt]}],"list-image":[{"list-image":["none",jt]}],"list-style-type":[{list:["none","disc","decimal",jt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[N]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[N]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...H(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",$o,Tl]}],"underline-offset":[{"underline-offset":["auto",$o,jt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",jt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",jt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[N]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...$(),qee]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Vee]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Kee]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[N]}],"border-style":[{border:[...H(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[N]}],"divide-style":[{divide:H()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...H()]}],"outline-offset":[{"outline-offset":[$o,jt]}],"outline-w":[{outline:[$o,Tl]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[N]}],"ring-offset-w":[{"ring-offset":[$o,Tl]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Al,Yee]}],"shadow-color":[{shadow:[Mm]}],opacity:[{opacity:[N]}],"mix-blend":[{"mix-blend":[...F(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":F()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Al,jt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[w]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[N]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",jt]}],duration:[{duration:ie()}],ease:[{ease:["linear","in","out","in-out",jt]}],delay:[{delay:ie()}],animate:[{animate:["none","spin","ping","pulse","bounce",jt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Om,jt]}],"translate-x":[{"translate-x":[O]}],"translate-y":[{"translate-y":[O]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",jt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",jt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",jt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[$o,Tl,m_]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},ete=Ree(Qee);function Re(...e){return ete(Nt(e))}const tte=GQ,i8=x.forwardRef(({className:e,...t},r)=>s.jsx(HF,{ref:r,className:Re("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));i8.displayName=HF.displayName;const rte=$f("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),o8=x.forwardRef(({className:e,variant:t,...r},n)=>s.jsx(VF,{ref:n,className:Re(rte({variant:t}),e),...r}));o8.displayName=VF.displayName;const nte=x.forwardRef(({className:e,...t},r)=>s.jsx(KF,{ref:r,className:Re("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));nte.displayName=KF.displayName;const l8=x.forwardRef(({className:e,...t},r)=>s.jsx(YF,{ref:r,className:Re("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(Hr,{className:"h-4 w-4"})}));l8.displayName=YF.displayName;const c8=x.forwardRef(({className:e,...t},r)=>s.jsx(qF,{ref:r,className:Re("text-sm font-semibold",e),...t}));c8.displayName=qF.displayName;const d8=x.forwardRef(({className:e,...t},r)=>s.jsx(GF,{ref:r,className:Re("text-sm opacity-90",e),...t}));d8.displayName=GF.displayName;function ste(){const{toasts:e}=_F();return s.jsxs(tte,{children:[e.map(function({id:t,title:r,description:n,action:a,...i}){return s.jsxs(o8,{...i,children:[s.jsxs("div",{className:"grid gap-1",children:[r&&s.jsx(c8,{children:r}),n&&s.jsx(d8,{children:n})]}),a,s.jsx(l8,{})]},t)}),s.jsx(i8,{})]})}var oM=["light","dark"],ate="(prefers-color-scheme: dark)",ite=x.createContext(void 0),ote={setTheme:e=>{},themes:[]},lte=()=>{var e;return(e=x.useContext(ite))!=null?e:ote};x.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:a,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let d=i==="system",h=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(y=>`'${y}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,f=a?oM.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(y,v=!1,b=!0)=>{let N=o?o[y]:y,j=v?y+"|| ''":`'${N}'`,w="";return a&&b&&!v&&oM.includes(y)&&(w+=`d.style.colorScheme = '${y}';`),r==="class"?v||N?w+=`c.add(${j})`:w+="null":N&&(w+=`d[s](n,${j})`),w},p=e?`!function(){${h}${m(e)}}()`:n?`!function(){try{${h}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${d})){var t='${ate}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${d?"":"else{"+m(i,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(i,!1,!1)};}${f}}catch(t){}}();`;return x.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})});var cte=e=>{switch(e){case"success":return hte;case"info":return mte;case"warning":return fte;case"error":return pte;default:return null}},dte=Array(12).fill(0),ute=({visible:e,className:t})=>q.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},q.createElement("div",{className:"sonner-spinner"},dte.map((r,n)=>q.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),hte=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),fte=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),mte=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),pte=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),gte=q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},q.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),q.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),xte=()=>{let[e,t]=q.useState(document.hidden);return q.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},$S=1,vte=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:$S++,i=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),i?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:r}),{...l,...e,id:a,dismissible:o,title:r}):l):this.addToast({title:r,...n,dismissible:o,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),a=r!==void 0,i,o=n.then(async c=>{if(i=["resolve",c],q.isValidElement(c))a=!1,this.create({id:r,type:"default",message:c});else if(bte(c)&&!c.ok){a=!1;let d=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,h=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:d,description:h})}else if(t.success!==void 0){a=!1;let d=typeof t.success=="function"?await t.success(c):t.success,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:d,description:h})}}).catch(async c=>{if(i=["reject",c],t.error!==void 0){a=!1;let d=typeof t.error=="function"?await t.error(c):t.error,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:d,description:h})}}).finally(()=>{var c;a&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,d)=>o.then(()=>i[0]==="reject"?d(i[1]):c(i[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||$S++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Us=new vte,yte=(e,t)=>{let r=(t==null?void 0:t.id)||$S++;return Us.addToast({title:e,...t,id:r}),r},bte=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",wte=yte,jte=()=>Us.toasts,Nte=()=>Us.getActiveToasts(),Z=Object.assign(wte,{success:Us.success,info:Us.info,warning:Us.warning,error:Us.error,custom:Us.custom,message:Us.message,promise:Us.promise,dismiss:Us.dismiss,loading:Us.loading},{getHistory:jte,getToasts:Nte});function _te(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}_te(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Nv(e){return e.label!==void 0}var Ste=3,Cte="32px",Pte="16px",lM=4e3,kte=356,Ete=14,Tte=20,Ate=200;function wi(...e){return e.filter(Boolean).join(" ")}function Ote(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var Mte=e=>{var t,r,n,a,i,o,l,c,d,h,f;let{invert:m,toast:p,unstyled:y,interacting:v,setHeights:b,visibleToasts:N,heights:j,index:w,toasts:S,expanded:C,removeToast:P,defaultRichColors:T,closeButton:O,style:E,cancelButtonStyle:D,actionButtonStyle:I,className:A="",descriptionClassName:V="",duration:U,position:$,gap:H,loadingIcon:F,expandByDefault:R,classNames:z,icons:G,closeButtonAriaLabel:ie="Close toast",pauseWhenPageIsHidden:ae}=e,[X,le]=q.useState(null),[fe,ge]=q.useState(null),[ee,re]=q.useState(!1),[ue,Ne]=q.useState(!1),[je,Y]=q.useState(!1),[xe,Me]=q.useState(!1),[$e,ce]=q.useState(!1),[Le,qe]=q.useState(0),[Xe,Et]=q.useState(0),B=q.useRef(p.duration||U||lM),ve=q.useRef(null),Fe=q.useRef(null),st=w===0,pt=w+1<=N,et=p.type,Zt=p.dismissible!==!1,mt=p.className||"",zn=p.descriptionClassName||"",Qt=q.useMemo(()=>j.findIndex(Te=>Te.toastId===p.id)||0,[j,p.id]),aa=q.useMemo(()=>{var Te;return(Te=p.closeButton)!=null?Te:O},[p.closeButton,O]),$r=q.useMemo(()=>p.duration||U||lM,[p.duration,U]),xn=q.useRef(0),Cr=q.useRef(0),gt=q.useRef(0),Un=q.useRef(null),[ns,Fs]=$.split("-"),ia=q.useMemo(()=>j.reduce((Te,Ke,xt)=>xt>=Qt?Te:Te+Ke.height,0),[j,Qt]),La=xte(),gi=p.invert||m,oa=et==="loading";Cr.current=q.useMemo(()=>Qt*H+ia,[Qt,ia]),q.useEffect(()=>{B.current=$r},[$r]),q.useEffect(()=>{re(!0)},[]),q.useEffect(()=>{let Te=Fe.current;if(Te){let Ke=Te.getBoundingClientRect().height;return Et(Ke),b(xt=>[{toastId:p.id,height:Ke,position:p.position},...xt]),()=>b(xt=>xt.filter(pr=>pr.toastId!==p.id))}},[b,p.id]),q.useLayoutEffect(()=>{if(!ee)return;let Te=Fe.current,Ke=Te.style.height;Te.style.height="auto";let xt=Te.getBoundingClientRect().height;Te.style.height=Ke,Et(xt),b(pr=>pr.find(dr=>dr.toastId===p.id)?pr.map(dr=>dr.toastId===p.id?{...dr,height:xt}:dr):[{toastId:p.id,height:xt,position:p.position},...pr])},[ee,p.title,p.description,b,p.id]);let Tn=q.useCallback(()=>{Ne(!0),qe(Cr.current),b(Te=>Te.filter(Ke=>Ke.toastId!==p.id)),setTimeout(()=>{P(p)},Ate)},[p,P,b,Cr]);q.useEffect(()=>{if(p.promise&&et==="loading"||p.duration===1/0||p.type==="loading")return;let Te;return C||v||ae&&La?(()=>{if(gt.current<xn.current){let Ke=new Date().getTime()-xn.current;B.current=B.current-Ke}gt.current=new Date().getTime()})():B.current!==1/0&&(xn.current=new Date().getTime(),Te=setTimeout(()=>{var Ke;(Ke=p.onAutoClose)==null||Ke.call(p,p),Tn()},B.current)),()=>clearTimeout(Te)},[C,v,p,et,ae,La,Tn]),q.useEffect(()=>{p.delete&&Tn()},[Tn,p.delete]);function we(){var Te,Ke,xt;return G!=null&&G.loading?q.createElement("div",{className:wi(z==null?void 0:z.loader,(Te=p==null?void 0:p.classNames)==null?void 0:Te.loader,"sonner-loader"),"data-visible":et==="loading"},G.loading):F?q.createElement("div",{className:wi(z==null?void 0:z.loader,(Ke=p==null?void 0:p.classNames)==null?void 0:Ke.loader,"sonner-loader"),"data-visible":et==="loading"},F):q.createElement(ute,{className:wi(z==null?void 0:z.loader,(xt=p==null?void 0:p.classNames)==null?void 0:xt.loader),visible:et==="loading"})}return q.createElement("li",{tabIndex:0,ref:Fe,className:wi(A,mt,z==null?void 0:z.toast,(t=p==null?void 0:p.classNames)==null?void 0:t.toast,z==null?void 0:z.default,z==null?void 0:z[et],(r=p==null?void 0:p.classNames)==null?void 0:r[et]),"data-sonner-toast":"","data-rich-colors":(n=p.richColors)!=null?n:T,"data-styled":!(p.jsx||p.unstyled||y),"data-mounted":ee,"data-promise":!!p.promise,"data-swiped":$e,"data-removed":ue,"data-visible":pt,"data-y-position":ns,"data-x-position":Fs,"data-index":w,"data-front":st,"data-swiping":je,"data-dismissible":Zt,"data-type":et,"data-invert":gi,"data-swipe-out":xe,"data-swipe-direction":fe,"data-expanded":!!(C||R&&ee),style:{"--index":w,"--toasts-before":w,"--z-index":S.length-w,"--offset":`${ue?Le:Cr.current}px`,"--initial-height":R?"auto":`${Xe}px`,...E,...p.style},onDragEnd:()=>{Y(!1),le(null),Un.current=null},onPointerDown:Te=>{oa||!Zt||(ve.current=new Date,qe(Cr.current),Te.target.setPointerCapture(Te.pointerId),Te.target.tagName!=="BUTTON"&&(Y(!0),Un.current={x:Te.clientX,y:Te.clientY}))},onPointerUp:()=>{var Te,Ke,xt,pr;if(xe||!Zt)return;Un.current=null;let dr=Number(((Te=Fe.current)==null?void 0:Te.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Jr=Number(((Ke=Fe.current)==null?void 0:Ke.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ae=new Date().getTime()-((xt=ve.current)==null?void 0:xt.getTime()),at=X==="x"?dr:Jr,ur=Math.abs(at)/Ae;if(Math.abs(at)>=Tte||ur>.11){qe(Cr.current),(pr=p.onDismiss)==null||pr.call(p,p),ge(X==="x"?dr>0?"right":"left":Jr>0?"down":"up"),Tn(),Me(!0),ce(!1);return}Y(!1),le(null)},onPointerMove:Te=>{var Ke,xt,pr,dr;if(!Un.current||!Zt||((Ke=window.getSelection())==null?void 0:Ke.toString().length)>0)return;let Jr=Te.clientY-Un.current.y,Ae=Te.clientX-Un.current.x,at=(xt=e.swipeDirections)!=null?xt:Ote($);!X&&(Math.abs(Ae)>1||Math.abs(Jr)>1)&&le(Math.abs(Ae)>Math.abs(Jr)?"x":"y");let ur={x:0,y:0};X==="y"?(at.includes("top")||at.includes("bottom"))&&(at.includes("top")&&Jr<0||at.includes("bottom")&&Jr>0)&&(ur.y=Jr):X==="x"&&(at.includes("left")||at.includes("right"))&&(at.includes("left")&&Ae<0||at.includes("right")&&Ae>0)&&(ur.x=Ae),(Math.abs(ur.x)>0||Math.abs(ur.y)>0)&&ce(!0),(pr=Fe.current)==null||pr.style.setProperty("--swipe-amount-x",`${ur.x}px`),(dr=Fe.current)==null||dr.style.setProperty("--swipe-amount-y",`${ur.y}px`)}},aa&&!p.jsx?q.createElement("button",{"aria-label":ie,"data-disabled":oa,"data-close-button":!0,onClick:oa||!Zt?()=>{}:()=>{var Te;Tn(),(Te=p.onDismiss)==null||Te.call(p,p)},className:wi(z==null?void 0:z.closeButton,(a=p==null?void 0:p.classNames)==null?void 0:a.closeButton)},(i=G==null?void 0:G.close)!=null?i:gte):null,p.jsx||x.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:q.createElement(q.Fragment,null,et||p.icon||p.promise?q.createElement("div",{"data-icon":"",className:wi(z==null?void 0:z.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||we():null,p.type!=="loading"?p.icon||(G==null?void 0:G[et])||cte(et):null):null,q.createElement("div",{"data-content":"",className:wi(z==null?void 0:z.content,(l=p==null?void 0:p.classNames)==null?void 0:l.content)},q.createElement("div",{"data-title":"",className:wi(z==null?void 0:z.title,(c=p==null?void 0:p.classNames)==null?void 0:c.title)},typeof p.title=="function"?p.title():p.title),p.description?q.createElement("div",{"data-description":"",className:wi(V,zn,z==null?void 0:z.description,(d=p==null?void 0:p.classNames)==null?void 0:d.description)},typeof p.description=="function"?p.description():p.description):null),x.isValidElement(p.cancel)?p.cancel:p.cancel&&Nv(p.cancel)?q.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||D,onClick:Te=>{var Ke,xt;Nv(p.cancel)&&Zt&&((xt=(Ke=p.cancel).onClick)==null||xt.call(Ke,Te),Tn())},className:wi(z==null?void 0:z.cancelButton,(h=p==null?void 0:p.classNames)==null?void 0:h.cancelButton)},p.cancel.label):null,x.isValidElement(p.action)?p.action:p.action&&Nv(p.action)?q.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||I,onClick:Te=>{var Ke,xt;Nv(p.action)&&((xt=(Ke=p.action).onClick)==null||xt.call(Ke,Te),!Te.defaultPrevented&&Tn())},className:wi(z==null?void 0:z.actionButton,(f=p==null?void 0:p.classNames)==null?void 0:f.actionButton)},p.action.label):null))};function cM(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function Ite(e,t){let r={};return[e,t].forEach((n,a)=>{let i=a===1,o=i?"--mobile-offset":"--offset",l=i?Pte:Cte;function c(d){["top","right","bottom","left"].forEach(h=>{r[`${o}-${h}`]=typeof d=="number"?`${d}px`:d})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(d=>{n[d]===void 0?r[`${o}-${d}`]=l:r[`${o}-${d}`]=typeof n[d]=="number"?`${n[d]}px`:n[d]}):c(l)}),r}var Rte=x.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:a=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:d,theme:h="light",richColors:f,duration:m,style:p,visibleToasts:y=Ste,toastOptions:v,dir:b=cM(),gap:N=Ete,loadingIcon:j,icons:w,containerAriaLabel:S="Notifications",pauseWhenPageIsHidden:C}=e,[P,T]=q.useState([]),O=q.useMemo(()=>Array.from(new Set([n].concat(P.filter(ae=>ae.position).map(ae=>ae.position)))),[P,n]),[E,D]=q.useState([]),[I,A]=q.useState(!1),[V,U]=q.useState(!1),[$,H]=q.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),F=q.useRef(null),R=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),z=q.useRef(null),G=q.useRef(!1),ie=q.useCallback(ae=>{T(X=>{var le;return(le=X.find(fe=>fe.id===ae.id))!=null&&le.delete||Us.dismiss(ae.id),X.filter(({id:fe})=>fe!==ae.id)})},[]);return q.useEffect(()=>Us.subscribe(ae=>{if(ae.dismiss){T(X=>X.map(le=>le.id===ae.id?{...le,delete:!0}:le));return}setTimeout(()=>{jF.flushSync(()=>{T(X=>{let le=X.findIndex(fe=>fe.id===ae.id);return le!==-1?[...X.slice(0,le),{...X[le],...ae},...X.slice(le+1)]:[ae,...X]})})})}),[]),q.useEffect(()=>{if(h!=="system"){H(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?H("dark"):H("light")),typeof window>"u")return;let ae=window.matchMedia("(prefers-color-scheme: dark)");try{ae.addEventListener("change",({matches:X})=>{H(X?"dark":"light")})}catch{ae.addListener(({matches:le})=>{try{H(le?"dark":"light")}catch(fe){console.error(fe)}})}},[h]),q.useEffect(()=>{P.length<=1&&A(!1)},[P]),q.useEffect(()=>{let ae=X=>{var le,fe;a.every(ge=>X[ge]||X.code===ge)&&(A(!0),(le=F.current)==null||le.focus()),X.code==="Escape"&&(document.activeElement===F.current||(fe=F.current)!=null&&fe.contains(document.activeElement))&&A(!1)};return document.addEventListener("keydown",ae),()=>document.removeEventListener("keydown",ae)},[a]),q.useEffect(()=>{if(F.current)return()=>{z.current&&(z.current.focus({preventScroll:!0}),z.current=null,G.current=!1)}},[F.current]),q.createElement("section",{ref:t,"aria-label":`${S} ${R}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},O.map((ae,X)=>{var le;let[fe,ge]=ae.split("-");return P.length?q.createElement("ol",{key:ae,dir:b==="auto"?cM():b,tabIndex:-1,ref:F,className:l,"data-sonner-toaster":!0,"data-theme":$,"data-y-position":fe,"data-lifted":I&&P.length>1&&!i,"data-x-position":ge,style:{"--front-toast-height":`${((le=E[0])==null?void 0:le.height)||0}px`,"--width":`${kte}px`,"--gap":`${N}px`,...p,...Ite(c,d)},onBlur:ee=>{G.current&&!ee.currentTarget.contains(ee.relatedTarget)&&(G.current=!1,z.current&&(z.current.focus({preventScroll:!0}),z.current=null))},onFocus:ee=>{ee.target instanceof HTMLElement&&ee.target.dataset.dismissible==="false"||G.current||(G.current=!0,z.current=ee.relatedTarget)},onMouseEnter:()=>A(!0),onMouseMove:()=>A(!0),onMouseLeave:()=>{V||A(!1)},onDragEnd:()=>A(!1),onPointerDown:ee=>{ee.target instanceof HTMLElement&&ee.target.dataset.dismissible==="false"||U(!0)},onPointerUp:()=>U(!1)},P.filter(ee=>!ee.position&&X===0||ee.position===ae).map((ee,re)=>{var ue,Ne;return q.createElement(Mte,{key:ee.id,icons:w,index:re,toast:ee,defaultRichColors:f,duration:(ue=v==null?void 0:v.duration)!=null?ue:m,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:r,visibleToasts:y,closeButton:(Ne=v==null?void 0:v.closeButton)!=null?Ne:o,interacting:V,position:ae,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:ie,toasts:P.filter(je=>je.position==ee.position),heights:E.filter(je=>je.position==ee.position),setHeights:D,expandByDefault:i,gap:N,loadingIcon:j,expanded:I,pauseWhenPageIsHidden:C,swipeDirections:e.swipeDirections})})):null}))});const Dte=({...e})=>{const{theme:t="system"}=lte();return s.jsx(Rte,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var $te=NP[" useId ".trim().toString()]||(()=>{}),Lte=0;function Qs(e){const[t,r]=x.useState($te());return Xr(()=>{r(n=>n??String(Lte++))},[e]),t?`radix-${t}`:""}const Fte=["top","right","bottom","left"],bc=Math.min,wa=Math.max,p0=Math.round,_v=Math.floor,vo=e=>({x:e,y:e}),Bte={left:"right",right:"left",bottom:"top",top:"bottom"},zte={start:"end",end:"start"};function LS(e,t,r){return wa(e,bc(t,r))}function dl(e,t){return typeof e=="function"?e(t):e}function ul(e){return e.split("-")[0]}function Bf(e){return e.split("-")[1]}function Tk(e){return e==="x"?"y":"x"}function Ak(e){return e==="y"?"height":"width"}const Ute=new Set(["top","bottom"]);function ho(e){return Ute.has(ul(e))?"y":"x"}function Ok(e){return Tk(ho(e))}function Wte(e,t,r){r===void 0&&(r=!1);const n=Bf(e),a=Ok(e),i=Ak(a);let o=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=g0(o)),[o,g0(o)]}function Hte(e){const t=g0(e);return[FS(e),t,FS(t)]}function FS(e){return e.replace(/start|end/g,t=>zte[t])}const dM=["left","right"],uM=["right","left"],Vte=["top","bottom"],qte=["bottom","top"];function Gte(e,t,r){switch(e){case"top":case"bottom":return r?t?uM:dM:t?dM:uM;case"left":case"right":return t?Vte:qte;default:return[]}}function Kte(e,t,r,n){const a=Bf(e);let i=Gte(ul(e),r==="start",n);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(FS)))),i}function g0(e){return e.replace(/left|right|bottom|top/g,t=>Bte[t])}function Yte(e){return{top:0,right:0,bottom:0,left:0,...e}}function u8(e){return typeof e!="number"?Yte(e):{top:e,right:e,bottom:e,left:e}}function x0(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function hM(e,t,r){let{reference:n,floating:a}=e;const i=ho(t),o=Ok(t),l=Ak(o),c=ul(t),d=i==="y",h=n.x+n.width/2-a.width/2,f=n.y+n.height/2-a.height/2,m=n[l]/2-a[l]/2;let p;switch(c){case"top":p={x:h,y:n.y-a.height};break;case"bottom":p={x:h,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:f};break;case"left":p={x:n.x-a.width,y:f};break;default:p={x:n.x,y:n.y}}switch(Bf(t)){case"start":p[o]-=m*(r&&d?-1:1);break;case"end":p[o]+=m*(r&&d?-1:1);break}return p}const Zte=async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:h,y:f}=hM(d,n,c),m=n,p={},y=0;for(let v=0;v<l.length;v++){const{name:b,fn:N}=l[v],{x:j,y:w,data:S,reset:C}=await N({x:h,y:f,initialPlacement:n,placement:m,strategy:a,middlewareData:p,rects:d,platform:o,elements:{reference:e,floating:t}});h=j??h,f=w??f,p={...p,[b]:{...p[b],...S}},C&&y<=50&&(y++,typeof C=="object"&&(C.placement&&(m=C.placement),C.rects&&(d=C.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):C.rects),{x:h,y:f}=hM(d,m,c)),v=-1)}return{x:h,y:f,placement:m,strategy:a,middlewareData:p}};async function Yp(e,t){var r;t===void 0&&(t={});const{x:n,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:p=0}=dl(t,e),y=u8(p),b=l[m?f==="floating"?"reference":"floating":f],N=x0(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(b)))==null||r?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:c})),j=f==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),S=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},C=x0(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:j,offsetParent:w,strategy:c}):j);return{top:(N.top-C.top+y.top)/S.y,bottom:(C.bottom-N.bottom+y.bottom)/S.y,left:(N.left-C.left+y.left)/S.x,right:(C.right-N.right+y.right)/S.x}}const Xte=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:h=0}=dl(e,t)||{};if(d==null)return{};const f=u8(h),m={x:r,y:n},p=Ok(a),y=Ak(p),v=await o.getDimensions(d),b=p==="y",N=b?"top":"left",j=b?"bottom":"right",w=b?"clientHeight":"clientWidth",S=i.reference[y]+i.reference[p]-m[p]-i.floating[y],C=m[p]-i.reference[p],P=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let T=P?P[w]:0;(!T||!await(o.isElement==null?void 0:o.isElement(P)))&&(T=l.floating[w]||i.floating[y]);const O=S/2-C/2,E=T/2-v[y]/2-1,D=bc(f[N],E),I=bc(f[j],E),A=D,V=T-v[y]-I,U=T/2-v[y]/2+O,$=LS(A,U,V),H=!c.arrow&&Bf(a)!=null&&U!==$&&i.reference[y]/2-(U<A?D:I)-v[y]/2<0,F=H?U<A?U-A:U-V:0;return{[p]:m[p]+F,data:{[p]:$,centerOffset:U-$-F,...H&&{alignmentOffset:F}},reset:H}}}),Jte=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:v=!0,...b}=dl(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const N=ul(a),j=ho(l),w=ul(l)===l,S=await(c.isRTL==null?void 0:c.isRTL(d.floating)),C=m||(w||!v?[g0(l)]:Hte(l)),P=y!=="none";!m&&P&&C.push(...Kte(l,v,y,S));const T=[l,...C],O=await Yp(t,b),E=[];let D=((n=i.flip)==null?void 0:n.overflows)||[];if(h&&E.push(O[N]),f){const U=Wte(a,o,S);E.push(O[U[0]],O[U[1]])}if(D=[...D,{placement:a,overflows:E}],!E.every(U=>U<=0)){var I,A;const U=(((I=i.flip)==null?void 0:I.index)||0)+1,$=T[U];if($&&(!(f==="alignment"?j!==ho($):!1)||D.every(R=>R.overflows[0]>0&&ho(R.placement)===j)))return{data:{index:U,overflows:D},reset:{placement:$}};let H=(A=D.filter(F=>F.overflows[0]<=0).sort((F,R)=>F.overflows[1]-R.overflows[1])[0])==null?void 0:A.placement;if(!H)switch(p){case"bestFit":{var V;const F=(V=D.filter(R=>{if(P){const z=ho(R.placement);return z===j||z==="y"}return!0}).map(R=>[R.placement,R.overflows.filter(z=>z>0).reduce((z,G)=>z+G,0)]).sort((R,z)=>R[1]-z[1])[0])==null?void 0:V[0];F&&(H=F);break}case"initialPlacement":H=l;break}if(a!==H)return{reset:{placement:H}}}return{}}}};function fM(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function mM(e){return Fte.some(t=>e[t]>=0)}const Qte=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...a}=dl(e,t);switch(n){case"referenceHidden":{const i=await Yp(t,{...a,elementContext:"reference"}),o=fM(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:mM(o)}}}case"escaped":{const i=await Yp(t,{...a,altBoundary:!0}),o=fM(i,r.floating);return{data:{escapedOffsets:o,escaped:mM(o)}}}default:return{}}}}},h8=new Set(["left","top"]);async function ere(e,t){const{placement:r,platform:n,elements:a}=e,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=ul(r),l=Bf(r),c=ho(r)==="y",d=h8.has(o)?-1:1,h=i&&c?-1:1,f=dl(t,e);let{mainAxis:m,crossAxis:p,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof y=="number"&&(p=l==="end"?y*-1:y),c?{x:p*h,y:m*d}:{x:m*d,y:p*h}}const tre=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await ere(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},rre=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:b=>{let{x:N,y:j}=b;return{x:N,y:j}}},...c}=dl(e,t),d={x:r,y:n},h=await Yp(t,c),f=ho(ul(a)),m=Tk(f);let p=d[m],y=d[f];if(i){const b=m==="y"?"top":"left",N=m==="y"?"bottom":"right",j=p+h[b],w=p-h[N];p=LS(j,p,w)}if(o){const b=f==="y"?"top":"left",N=f==="y"?"bottom":"right",j=y+h[b],w=y-h[N];y=LS(j,y,w)}const v=l.fn({...t,[m]:p,[f]:y});return{...v,data:{x:v.x-r,y:v.y-n,enabled:{[m]:i,[f]:o}}}}}},nre=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=dl(e,t),h={x:r,y:n},f=ho(a),m=Tk(f);let p=h[m],y=h[f];const v=dl(l,t),b=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const w=m==="y"?"height":"width",S=i.reference[m]-i.floating[w]+b.mainAxis,C=i.reference[m]+i.reference[w]-b.mainAxis;p<S?p=S:p>C&&(p=C)}if(d){var N,j;const w=m==="y"?"width":"height",S=h8.has(ul(a)),C=i.reference[f]-i.floating[w]+(S&&((N=o.offset)==null?void 0:N[f])||0)+(S?0:b.crossAxis),P=i.reference[f]+i.reference[w]+(S?0:((j=o.offset)==null?void 0:j[f])||0)-(S?b.crossAxis:0);y<C?y=C:y>P&&(y=P)}return{[m]:p,[f]:y}}}},sre=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...d}=dl(e,t),h=await Yp(t,d),f=ul(a),m=Bf(a),p=ho(a)==="y",{width:y,height:v}=i.floating;let b,N;f==="top"||f==="bottom"?(b=f,N=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(N=f,b=m==="end"?"top":"bottom");const j=v-h.top-h.bottom,w=y-h.left-h.right,S=bc(v-h[b],j),C=bc(y-h[N],w),P=!t.middlewareData.shift;let T=S,O=C;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(O=w),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(T=j),P&&!m){const D=wa(h.left,0),I=wa(h.right,0),A=wa(h.top,0),V=wa(h.bottom,0);p?O=y-2*(D!==0||I!==0?D+I:wa(h.left,h.right)):T=v-2*(A!==0||V!==0?A+V:wa(h.top,h.bottom))}await c({...t,availableWidth:O,availableHeight:T});const E=await o.getDimensions(l.floating);return y!==E.width||v!==E.height?{reset:{rects:!0}}:{}}}};function gw(){return typeof window<"u"}function zf(e){return f8(e)?(e.nodeName||"").toLowerCase():"#document"}function ka(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Eo(e){var t;return(t=(f8(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function f8(e){return gw()?e instanceof Node||e instanceof ka(e).Node:!1}function Wi(e){return gw()?e instanceof Element||e instanceof ka(e).Element:!1}function _o(e){return gw()?e instanceof HTMLElement||e instanceof ka(e).HTMLElement:!1}function pM(e){return!gw()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ka(e).ShadowRoot}const are=new Set(["inline","contents"]);function dx(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=Hi(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!are.has(a)}const ire=new Set(["table","td","th"]);function ore(e){return ire.has(zf(e))}const lre=[":popover-open",":modal"];function xw(e){return lre.some(t=>{try{return e.matches(t)}catch{return!1}})}const cre=["transform","translate","scale","rotate","perspective"],dre=["transform","translate","scale","rotate","perspective","filter"],ure=["paint","layout","strict","content"];function Mk(e){const t=Ik(),r=Wi(e)?Hi(e):e;return cre.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||dre.some(n=>(r.willChange||"").includes(n))||ure.some(n=>(r.contain||"").includes(n))}function hre(e){let t=wc(e);for(;_o(t)&&!Gh(t);){if(Mk(t))return t;if(xw(t))return null;t=wc(t)}return null}function Ik(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const fre=new Set(["html","body","#document"]);function Gh(e){return fre.has(zf(e))}function Hi(e){return ka(e).getComputedStyle(e)}function vw(e){return Wi(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function wc(e){if(zf(e)==="html")return e;const t=e.assignedSlot||e.parentNode||pM(e)&&e.host||Eo(e);return pM(t)?t.host:t}function m8(e){const t=wc(e);return Gh(t)?e.ownerDocument?e.ownerDocument.body:e.body:_o(t)&&dx(t)?t:m8(t)}function Zp(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=m8(e),i=a===((n=e.ownerDocument)==null?void 0:n.body),o=ka(a);if(i){const l=BS(o);return t.concat(o,o.visualViewport||[],dx(a)?a:[],l&&r?Zp(l):[])}return t.concat(a,Zp(a,[],r))}function BS(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function p8(e){const t=Hi(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=_o(e),i=a?e.offsetWidth:r,o=a?e.offsetHeight:n,l=p0(r)!==i||p0(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function Rk(e){return Wi(e)?e:e.contextElement}function vh(e){const t=Rk(e);if(!_o(t))return vo(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:i}=p8(t);let o=(i?p0(r.width):r.width)/n,l=(i?p0(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const mre=vo(0);function g8(e){const t=ka(e);return!Ik()||!t.visualViewport?mre:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function pre(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==ka(e)?!1:t}function Fd(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=Rk(e);let o=vo(1);t&&(n?Wi(n)&&(o=vh(n)):o=vh(e));const l=pre(i,r,n)?g8(i):vo(0);let c=(a.left+l.x)/o.x,d=(a.top+l.y)/o.y,h=a.width/o.x,f=a.height/o.y;if(i){const m=ka(i),p=n&&Wi(n)?ka(n):n;let y=m,v=BS(y);for(;v&&n&&p!==y;){const b=vh(v),N=v.getBoundingClientRect(),j=Hi(v),w=N.left+(v.clientLeft+parseFloat(j.paddingLeft))*b.x,S=N.top+(v.clientTop+parseFloat(j.paddingTop))*b.y;c*=b.x,d*=b.y,h*=b.x,f*=b.y,c+=w,d+=S,y=ka(v),v=BS(y)}}return x0({width:h,height:f,x:c,y:d})}function Dk(e,t){const r=vw(e).scrollLeft;return t?t.left+r:Fd(Eo(e)).left+r}function x8(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),a=n.left+t.scrollLeft-(r?0:Dk(e,n)),i=n.top+t.scrollTop;return{x:a,y:i}}function gre(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const i=a==="fixed",o=Eo(n),l=t?xw(t.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},d=vo(1);const h=vo(0),f=_o(n);if((f||!f&&!i)&&((zf(n)!=="body"||dx(o))&&(c=vw(n)),_o(n))){const p=Fd(n);d=vh(n),h.x=p.x+n.clientLeft,h.y=p.y+n.clientTop}const m=o&&!f&&!i?x8(o,c,!0):vo(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+h.x+m.x,y:r.y*d.y-c.scrollTop*d.y+h.y+m.y}}function xre(e){return Array.from(e.getClientRects())}function vre(e){const t=Eo(e),r=vw(e),n=e.ownerDocument.body,a=wa(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=wa(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+Dk(e);const l=-r.scrollTop;return Hi(n).direction==="rtl"&&(o+=wa(t.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:l}}function yre(e,t){const r=ka(e),n=Eo(e),a=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const d=Ik();(!d||d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}const bre=new Set(["absolute","fixed"]);function wre(e,t){const r=Fd(e,!0,t==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,i=_o(e)?vh(e):vo(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,d=n*i.y;return{width:o,height:l,x:c,y:d}}function gM(e,t,r){let n;if(t==="viewport")n=yre(e,r);else if(t==="document")n=vre(Eo(e));else if(Wi(t))n=wre(t,r);else{const a=g8(e);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return x0(n)}function v8(e,t){const r=wc(e);return r===t||!Wi(r)||Gh(r)?!1:Hi(r).position==="fixed"||v8(r,t)}function jre(e,t){const r=t.get(e);if(r)return r;let n=Zp(e,[],!1).filter(l=>Wi(l)&&zf(l)!=="body"),a=null;const i=Hi(e).position==="fixed";let o=i?wc(e):e;for(;Wi(o)&&!Gh(o);){const l=Hi(o),c=Mk(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&bre.has(a.position)||dx(o)&&!c&&v8(e,o))?n=n.filter(h=>h!==o):a=l,o=wc(o)}return t.set(e,n),n}function Nre(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const o=[...r==="clippingAncestors"?xw(t)?[]:jre(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((d,h)=>{const f=gM(t,h,a);return d.top=wa(f.top,d.top),d.right=bc(f.right,d.right),d.bottom=bc(f.bottom,d.bottom),d.left=wa(f.left,d.left),d},gM(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function _re(e){const{width:t,height:r}=p8(e);return{width:t,height:r}}function Sre(e,t,r){const n=_o(t),a=Eo(t),i=r==="fixed",o=Fd(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=vo(0);function d(){c.x=Dk(a)}if(n||!n&&!i)if((zf(t)!=="body"||dx(a))&&(l=vw(t)),n){const p=Fd(t,!0,i,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else a&&d();i&&!n&&a&&d();const h=a&&!n&&!i?x8(a,l):vo(0),f=o.left+l.scrollLeft-c.x-h.x,m=o.top+l.scrollTop-c.y-h.y;return{x:f,y:m,width:o.width,height:o.height}}function p_(e){return Hi(e).position==="static"}function xM(e,t){if(!_o(e)||Hi(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Eo(e)===r&&(r=r.ownerDocument.body),r}function y8(e,t){const r=ka(e);if(xw(e))return r;if(!_o(e)){let a=wc(e);for(;a&&!Gh(a);){if(Wi(a)&&!p_(a))return a;a=wc(a)}return r}let n=xM(e,t);for(;n&&ore(n)&&p_(n);)n=xM(n,t);return n&&Gh(n)&&p_(n)&&!Mk(n)?r:n||hre(e)||r}const Cre=async function(e){const t=this.getOffsetParent||y8,r=this.getDimensions,n=await r(e.floating);return{reference:Sre(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Pre(e){return Hi(e).direction==="rtl"}const kre={convertOffsetParentRelativeRectToViewportRelativeRect:gre,getDocumentElement:Eo,getClippingRect:Nre,getOffsetParent:y8,getElementRects:Cre,getClientRects:xre,getDimensions:_re,getScale:vh,isElement:Wi,isRTL:Pre};function b8(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Ere(e,t){let r=null,n;const a=Eo(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=e.getBoundingClientRect(),{left:h,top:f,width:m,height:p}=d;if(l||t(),!m||!p)return;const y=_v(f),v=_v(a.clientWidth-(h+m)),b=_v(a.clientHeight-(f+p)),N=_v(h),w={rootMargin:-y+"px "+-v+"px "+-b+"px "+-N+"px",threshold:wa(0,bc(1,c))||1};let S=!0;function C(P){const T=P[0].intersectionRatio;if(T!==c){if(!S)return o();T?o(!1,T):n=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!b8(d,e.getBoundingClientRect())&&o(),S=!1}try{r=new IntersectionObserver(C,{...w,root:a.ownerDocument})}catch{r=new IntersectionObserver(C,w)}r.observe(e)}return o(!0),i}function Tre(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=Rk(e),h=a||i?[...d?Zp(d):[],...Zp(t)]:[];h.forEach(N=>{a&&N.addEventListener("scroll",r,{passive:!0}),i&&N.addEventListener("resize",r)});const f=d&&l?Ere(d,r):null;let m=-1,p=null;o&&(p=new ResizeObserver(N=>{let[j]=N;j&&j.target===d&&p&&(p.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(t)})),r()}),d&&!c&&p.observe(d),p.observe(t));let y,v=c?Fd(e):null;c&&b();function b(){const N=Fd(e);v&&!b8(v,N)&&r(),v=N,y=requestAnimationFrame(b)}return r(),()=>{var N;h.forEach(j=>{a&&j.removeEventListener("scroll",r),i&&j.removeEventListener("resize",r)}),f==null||f(),(N=p)==null||N.disconnect(),p=null,c&&cancelAnimationFrame(y)}}const Are=tre,Ore=rre,Mre=Jte,Ire=sre,Rre=Qte,vM=Xte,Dre=nre,$re=(e,t,r)=>{const n=new Map,a={platform:kre,...r},i={...a.platform,_c:n};return Zte(e,t,{...a,platform:i})};var Lre=typeof document<"u",Fre=function(){},jy=Lre?x.useLayoutEffect:Fre;function v0(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!v0(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&e.$$typeof)&&!v0(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function w8(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function yM(e,t){const r=w8(e);return Math.round(t*r)/r}function g_(e){const t=x.useRef(e);return jy(()=>{t.current=e}),t}function Bre(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[h,f]=x.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[m,p]=x.useState(n);v0(m,n)||p(n);const[y,v]=x.useState(null),[b,N]=x.useState(null),j=x.useCallback(R=>{R!==P.current&&(P.current=R,v(R))},[]),w=x.useCallback(R=>{R!==T.current&&(T.current=R,N(R))},[]),S=i||y,C=o||b,P=x.useRef(null),T=x.useRef(null),O=x.useRef(h),E=c!=null,D=g_(c),I=g_(a),A=g_(d),V=x.useCallback(()=>{if(!P.current||!T.current)return;const R={placement:t,strategy:r,middleware:m};I.current&&(R.platform=I.current),$re(P.current,T.current,R).then(z=>{const G={...z,isPositioned:A.current!==!1};U.current&&!v0(O.current,G)&&(O.current=G,Cc.flushSync(()=>{f(G)}))})},[m,t,r,I,A]);jy(()=>{d===!1&&O.current.isPositioned&&(O.current.isPositioned=!1,f(R=>({...R,isPositioned:!1})))},[d]);const U=x.useRef(!1);jy(()=>(U.current=!0,()=>{U.current=!1}),[]),jy(()=>{if(S&&(P.current=S),C&&(T.current=C),S&&C){if(D.current)return D.current(S,C,V);V()}},[S,C,V,D,E]);const $=x.useMemo(()=>({reference:P,floating:T,setReference:j,setFloating:w}),[j,w]),H=x.useMemo(()=>({reference:S,floating:C}),[S,C]),F=x.useMemo(()=>{const R={position:r,left:0,top:0};if(!H.floating)return R;const z=yM(H.floating,h.x),G=yM(H.floating,h.y);return l?{...R,transform:"translate("+z+"px, "+G+"px)",...w8(H.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:z,top:G}},[r,l,H.floating,h.x,h.y]);return x.useMemo(()=>({...h,update:V,refs:$,elements:H,floatingStyles:F}),[h,V,$,H,F])}const zre=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?vM({element:n.current,padding:a}).fn(r):{}:n?vM({element:n,padding:a}).fn(r):{}}}},Ure=(e,t)=>({...Are(e),options:[e,t]}),Wre=(e,t)=>({...Ore(e),options:[e,t]}),Hre=(e,t)=>({...Dre(e),options:[e,t]}),Vre=(e,t)=>({...Mre(e),options:[e,t]}),qre=(e,t)=>({...Ire(e),options:[e,t]}),Gre=(e,t)=>({...Rre(e),options:[e,t]}),Kre=(e,t)=>({...zre(e),options:[e,t]});var Yre="Arrow",j8=x.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...i}=e;return s.jsx(ze.svg,{...i,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});j8.displayName=Yre;var Zre=j8;function yw(e){const[t,r]=x.useState(void 0);return Xr(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var $k="Popper",[N8,kc]=sn($k),[Xre,_8]=N8($k),S8=e=>{const{__scopePopper:t,children:r}=e,[n,a]=x.useState(null);return s.jsx(Xre,{scope:t,anchor:n,onAnchorChange:a,children:r})};S8.displayName=$k;var C8="PopperAnchor",P8=x.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,i=_8(C8,r),o=x.useRef(null),l=nt(t,o);return x.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:s.jsx(ze.div,{...a,ref:l})});P8.displayName=C8;var Lk="PopperContent",[Jre,Qre]=N8(Lk),k8=x.forwardRef((e,t)=>{var ee,re,ue,Ne,je,Y;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:y,...v}=e,b=_8(Lk,r),[N,j]=x.useState(null),w=nt(t,xe=>j(xe)),[S,C]=x.useState(null),P=yw(S),T=(P==null?void 0:P.width)??0,O=(P==null?void 0:P.height)??0,E=n+(i!=="center"?"-"+i:""),D=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},I=Array.isArray(d)?d:[d],A=I.length>0,V={padding:D,boundary:I.filter(tne),altBoundary:A},{refs:U,floatingStyles:$,placement:H,isPositioned:F,middlewareData:R}=Bre({strategy:"fixed",placement:E,whileElementsMounted:(...xe)=>Tre(...xe,{animationFrame:p==="always"}),elements:{reference:b.anchor},middleware:[Ure({mainAxis:a+O,alignmentAxis:o}),c&&Wre({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Hre():void 0,...V}),c&&Vre({...V}),qre({...V,apply:({elements:xe,rects:Me,availableWidth:$e,availableHeight:ce})=>{const{width:Le,height:qe}=Me.reference,Xe=xe.floating.style;Xe.setProperty("--radix-popper-available-width",`${$e}px`),Xe.setProperty("--radix-popper-available-height",`${ce}px`),Xe.setProperty("--radix-popper-anchor-width",`${Le}px`),Xe.setProperty("--radix-popper-anchor-height",`${qe}px`)}}),S&&Kre({element:S,padding:l}),rne({arrowWidth:T,arrowHeight:O}),m&&Gre({strategy:"referenceHidden",...V})]}),[z,G]=A8(H),ie=Zr(y);Xr(()=>{F&&(ie==null||ie())},[F,ie]);const ae=(ee=R.arrow)==null?void 0:ee.x,X=(re=R.arrow)==null?void 0:re.y,le=((ue=R.arrow)==null?void 0:ue.centerOffset)!==0,[fe,ge]=x.useState();return Xr(()=>{N&&ge(window.getComputedStyle(N).zIndex)},[N]),s.jsx("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:{...$,transform:F?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:fe,"--radix-popper-transform-origin":[(Ne=R.transformOrigin)==null?void 0:Ne.x,(je=R.transformOrigin)==null?void 0:je.y].join(" "),...((Y=R.hide)==null?void 0:Y.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(Jre,{scope:r,placedSide:z,onArrowChange:C,arrowX:ae,arrowY:X,shouldHideArrow:le,children:s.jsx(ze.div,{"data-side":z,"data-align":G,...v,ref:w,style:{...v.style,animation:F?void 0:"none"}})})})});k8.displayName=Lk;var E8="PopperArrow",ene={top:"bottom",right:"left",bottom:"top",left:"right"},T8=x.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,i=Qre(E8,n),o=ene[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(Zre,{...a,ref:r,style:{...a.style,display:"block"}})})});T8.displayName=E8;function tne(e){return e!==null}var rne=e=>({name:"transformOrigin",options:e,fn(t){var b,N,j;const{placement:r,rects:n,middlewareData:a}=t,o=((b=a.arrow)==null?void 0:b.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[d,h]=A8(r),f={start:"0%",center:"50%",end:"100%"}[h],m=(((N=a.arrow)==null?void 0:N.x)??0)+l/2,p=(((j=a.arrow)==null?void 0:j.y)??0)+c/2;let y="",v="";return d==="bottom"?(y=o?f:`${m}px`,v=`${-c}px`):d==="top"?(y=o?f:`${m}px`,v=`${n.floating.height+c}px`):d==="right"?(y=`${-c}px`,v=o?f:`${p}px`):d==="left"&&(y=`${n.floating.width+c}px`,v=o?f:`${p}px`),{data:{x:y,y:v}}}});function A8(e){const[t,r="center"]=e.split("-");return[t,r]}var bw=S8,ux=P8,ww=k8,jw=T8,[Nw,fze]=sn("Tooltip",[kc]),_w=kc(),O8="TooltipProvider",nne=700,zS="tooltip.open",[sne,Fk]=Nw(O8),M8=e=>{const{__scopeTooltip:t,delayDuration:r=nne,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=e,o=x.useRef(!0),l=x.useRef(!1),c=x.useRef(0);return x.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),s.jsx(sne,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:x.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:x.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:x.useCallback(d=>{l.current=d},[]),disableHoverableContent:a,children:i})};M8.displayName=O8;var Xp="Tooltip",[ane,Sw]=Nw(Xp),I8=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:a,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=e,c=Fk(Xp,e.__scopeTooltip),d=_w(t),[h,f]=x.useState(null),m=Qs(),p=x.useRef(0),y=o??c.disableHoverableContent,v=l??c.delayDuration,b=x.useRef(!1),[N,j]=Ln({prop:n,defaultProp:a??!1,onChange:T=>{T?(c.onOpen(),document.dispatchEvent(new CustomEvent(zS))):c.onClose(),i==null||i(T)},caller:Xp}),w=x.useMemo(()=>N?b.current?"delayed-open":"instant-open":"closed",[N]),S=x.useCallback(()=>{window.clearTimeout(p.current),p.current=0,b.current=!1,j(!0)},[j]),C=x.useCallback(()=>{window.clearTimeout(p.current),p.current=0,j(!1)},[j]),P=x.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{b.current=!0,j(!0),p.current=0},v)},[v,j]);return x.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),s.jsx(bw,{...d,children:s.jsx(ane,{scope:t,contentId:m,open:N,stateAttribute:w,trigger:h,onTriggerChange:f,onTriggerEnter:x.useCallback(()=>{c.isOpenDelayedRef.current?P():S()},[c.isOpenDelayedRef,P,S]),onTriggerLeave:x.useCallback(()=>{y?C():(window.clearTimeout(p.current),p.current=0)},[C,y]),onOpen:S,onClose:C,disableHoverableContent:y,children:r})})};I8.displayName=Xp;var US="TooltipTrigger",R8=x.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=Sw(US,r),i=Fk(US,r),o=_w(r),l=x.useRef(null),c=nt(t,l,a.onTriggerChange),d=x.useRef(!1),h=x.useRef(!1),f=x.useCallback(()=>d.current=!1,[]);return x.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),s.jsx(ux,{asChild:!0,...o,children:s.jsx(ze.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:Ie(e.onPointerMove,m=>{m.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),h.current=!0)}),onPointerLeave:Ie(e.onPointerLeave,()=>{a.onTriggerLeave(),h.current=!1}),onPointerDown:Ie(e.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Ie(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:Ie(e.onBlur,a.onClose),onClick:Ie(e.onClick,a.onClose)})})});R8.displayName=US;var ine="TooltipPortal",[mze,one]=Nw(ine,{forceMount:void 0}),Kh="TooltipContent",D8=x.forwardRef((e,t)=>{const r=one(Kh,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...i}=e,o=Sw(Kh,e.__scopeTooltip);return s.jsx(kn,{present:n||o.open,children:o.disableHoverableContent?s.jsx($8,{side:a,...i,ref:t}):s.jsx(lne,{side:a,...i,ref:t})})}),lne=x.forwardRef((e,t)=>{const r=Sw(Kh,e.__scopeTooltip),n=Fk(Kh,e.__scopeTooltip),a=x.useRef(null),i=nt(t,a),[o,l]=x.useState(null),{trigger:c,onClose:d}=r,h=a.current,{onPointerInTransitChange:f}=n,m=x.useCallback(()=>{l(null),f(!1)},[f]),p=x.useCallback((y,v)=>{const b=y.currentTarget,N={x:y.clientX,y:y.clientY},j=fne(N,b.getBoundingClientRect()),w=mne(N,j),S=pne(v.getBoundingClientRect()),C=xne([...w,...S]);l(C),f(!0)},[f]);return x.useEffect(()=>()=>m(),[m]),x.useEffect(()=>{if(c&&h){const y=b=>p(b,h),v=b=>p(b,c);return c.addEventListener("pointerleave",y),h.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",y),h.removeEventListener("pointerleave",v)}}},[c,h,p,m]),x.useEffect(()=>{if(o){const y=v=>{const b=v.target,N={x:v.clientX,y:v.clientY},j=(c==null?void 0:c.contains(b))||(h==null?void 0:h.contains(b)),w=!gne(N,o);j?m():w&&(m(),d())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,h,o,d,m]),s.jsx($8,{...e,ref:i})}),[cne,dne]=Nw(Xp,{isInside:!1}),une=CF("TooltipContent"),$8=x.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=Sw(Kh,r),d=_w(r),{onClose:h}=c;return x.useEffect(()=>(document.addEventListener(zS,h),()=>document.removeEventListener(zS,h)),[h]),x.useEffect(()=>{if(c.trigger){const f=m=>{const p=m.target;p!=null&&p.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),s.jsx(ru,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:s.jsxs(ww,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(une,{children:n}),s.jsx(cne,{scope:r,isInside:!0,children:s.jsx(EQ,{id:c.contentId,role:"tooltip",children:a||n})})]})})});D8.displayName=Kh;var L8="TooltipArrow",hne=x.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=_w(r);return dne(L8,r).isInside?null:s.jsx(jw,{...a,...n,ref:t})});hne.displayName=L8;function fne(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,a,i)){case i:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function mne(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function pne(e){const{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}function gne(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],d=l.x,h=l.y,f=c.x,m=c.y;h>n!=m>n&&r<(f-d)*(n-h)/(m-h)+d&&(a=!a)}return a}function xne(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),vne(t)}function vne(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const a=e[n];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var yne=M8,bne=I8,wne=R8,F8=D8;const B8=yne,jne=bne,Nne=wne,z8=x.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(F8,{ref:n,sideOffset:t,className:Re("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));z8.displayName=F8.displayName;var Cw=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Pw=typeof window>"u"||"Deno"in globalThis;function Ci(){}function _ne(e,t){return typeof e=="function"?e(t):e}function Sne(e){return typeof e=="number"&&e>=0&&e!==1/0}function Cne(e,t){return Math.max(e+(t||0)-Date.now(),0)}function WS(e,t){return typeof e=="function"?e(t):e}function Pne(e,t){return typeof e=="function"?e(t):e}function bM(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==Bk(o,t.options))return!1}else if(!Qp(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function wM(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Jp(t.options.mutationKey)!==Jp(i))return!1}else if(!Qp(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function Bk(e,t){return((t==null?void 0:t.queryKeyHashFn)||Jp)(e)}function Jp(e){return JSON.stringify(e,(t,r)=>HS(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function Qp(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Qp(e[r],t[r])):!1}function U8(e,t){if(e===t)return e;const r=jM(e)&&jM(t);if(r||HS(e)&&HS(t)){const n=r?e:Object.keys(e),a=n.length,i=r?t:Object.keys(t),o=i.length,l=r?[]:{},c=new Set(n);let d=0;for(let h=0;h<o;h++){const f=r?h:i[h];(!r&&c.has(f)||r)&&e[f]===void 0&&t[f]===void 0?(l[f]=void 0,d++):(l[f]=U8(e[f],t[f]),l[f]===e[f]&&e[f]!==void 0&&d++)}return a===o&&d===a?e:l}return t}function jM(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function HS(e){if(!NM(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!NM(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function NM(e){return Object.prototype.toString.call(e)==="[object Object]"}function kne(e){return new Promise(t=>{setTimeout(t,e)})}function Ene(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?U8(e,t):t}function Tne(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function Ane(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var zk=Symbol();function W8(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===zk?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var jd,Gl,kh,tL,One=(tL=class extends Cw{constructor(){super();Vt(this,jd);Vt(this,Gl);Vt(this,kh);vt(this,kh,t=>{if(!Pw&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Se(this,Gl)||this.setEventListener(Se(this,kh))}onUnsubscribe(){var t;this.hasListeners()||((t=Se(this,Gl))==null||t.call(this),vt(this,Gl,void 0))}setEventListener(t){var r;vt(this,kh,t),(r=Se(this,Gl))==null||r.call(this),vt(this,Gl,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){Se(this,jd)!==t&&(vt(this,jd,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof Se(this,jd)=="boolean"?Se(this,jd):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},jd=new WeakMap,Gl=new WeakMap,kh=new WeakMap,tL),H8=new One,Eh,Kl,Th,rL,Mne=(rL=class extends Cw{constructor(){super();Vt(this,Eh,!0);Vt(this,Kl);Vt(this,Th);vt(this,Th,t=>{if(!Pw&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){Se(this,Kl)||this.setEventListener(Se(this,Th))}onUnsubscribe(){var t;this.hasListeners()||((t=Se(this,Kl))==null||t.call(this),vt(this,Kl,void 0))}setEventListener(t){var r;vt(this,Th,t),(r=Se(this,Kl))==null||r.call(this),vt(this,Kl,t(this.setOnline.bind(this)))}setOnline(t){Se(this,Eh)!==t&&(vt(this,Eh,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return Se(this,Eh)}},Eh=new WeakMap,Kl=new WeakMap,Th=new WeakMap,rL),y0=new Mne;function Ine(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}function Rne(e){return Math.min(1e3*2**e,3e4)}function V8(e){return(e??"online")==="online"?y0.isOnline():!0}var q8=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function x_(e){return e instanceof q8}function G8(e){let t=!1,r=0,n=!1,a;const i=Ine(),o=v=>{var b;n||(m(new q8(v)),(b=e.abort)==null||b.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>H8.isFocused()&&(e.networkMode==="always"||y0.isOnline())&&e.canRun(),h=()=>V8(e.networkMode)&&e.canRun(),f=v=>{var b;n||(n=!0,(b=e.onSuccess)==null||b.call(e,v),a==null||a(),i.resolve(v))},m=v=>{var b;n||(n=!0,(b=e.onError)==null||b.call(e,v),a==null||a(),i.reject(v))},p=()=>new Promise(v=>{var b;a=N=>{(n||d())&&v(N)},(b=e.onPause)==null||b.call(e)}).then(()=>{var v;a=void 0,n||(v=e.onContinue)==null||v.call(e)}),y=()=>{if(n)return;let v;const b=r===0?e.initialPromise:void 0;try{v=b??e.fn()}catch(N){v=Promise.reject(N)}Promise.resolve(v).then(f).catch(N=>{var P;if(n)return;const j=e.retry??(Pw?0:3),w=e.retryDelay??Rne,S=typeof w=="function"?w(r,N):w,C=j===!0||typeof j=="number"&&r<j||typeof j=="function"&&j(r,N);if(t||!C){m(N);return}r++,(P=e.onFail)==null||P.call(e,r,N),kne(S).then(()=>d()?void 0:p()).then(()=>{t?m(N):y()})})};return{promise:i,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?y():p().then(y),i)}}var Dne=e=>setTimeout(e,0);function $ne(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=Dne;const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var ws=$ne(),Nd,nL,K8=(nL=class{constructor(){Vt(this,Nd)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Sne(this.gcTime)&&vt(this,Nd,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Pw?1/0:5*60*1e3))}clearGcTimeout(){Se(this,Nd)&&(clearTimeout(Se(this,Nd)),vt(this,Nd,void 0))}},Nd=new WeakMap,nL),Ah,_d,qa,Sd,os,ex,Cd,ki,zo,sL,Lne=(sL=class extends K8{constructor(t){super();Vt(this,ki);Vt(this,Ah);Vt(this,_d);Vt(this,qa);Vt(this,Sd);Vt(this,os);Vt(this,ex);Vt(this,Cd);vt(this,Cd,!1),vt(this,ex,t.defaultOptions),this.setOptions(t.options),this.observers=[],vt(this,Sd,t.client),vt(this,qa,Se(this,Sd).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,vt(this,Ah,Bne(this.options)),this.state=t.state??Se(this,Ah),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Se(this,os))==null?void 0:t.promise}setOptions(t){this.options={...Se(this,ex),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Se(this,qa).remove(this)}setData(t,r){const n=Ene(this.state.data,t,this.options);return ss(this,ki,zo).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){ss(this,ki,zo).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=Se(this,os))==null?void 0:n.promise;return(a=Se(this,os))==null||a.cancel(t),r?r.then(Ci).catch(Ci):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Se(this,Ah))}isActive(){return this.observers.some(t=>Pne(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===zk||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>WS(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Cne(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=Se(this,os))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=Se(this,os))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Se(this,qa).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(Se(this,os)&&(Se(this,Cd)?Se(this,os).cancel({revert:!0}):Se(this,os).cancelRetry()),this.scheduleGc()),Se(this,qa).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ss(this,ki,zo).call(this,{type:"invalidate"})}fetch(t,r){var d,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Se(this,os))return Se(this,os).continueRetry(),Se(this,os).promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(p=>p.options.queryFn);m&&this.setOptions(m.options)}const n=new AbortController,a=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(vt(this,Cd,!0),n.signal)})},i=()=>{const m=W8(this.options,r),y=(()=>{const v={client:Se(this,Sd),queryKey:this.queryKey,meta:this.meta};return a(v),v})();return vt(this,Cd,!1),this.options.persister?this.options.persister(m,y,this):m(y)},l=(()=>{const m={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Se(this,Sd),state:this.state,fetchFn:i};return a(m),m})();(d=this.options.behavior)==null||d.onFetch(l,this),vt(this,_d,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&ss(this,ki,zo).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=m=>{var p,y,v,b;x_(m)&&m.silent||ss(this,ki,zo).call(this,{type:"error",error:m}),x_(m)||((y=(p=Se(this,qa).config).onError)==null||y.call(p,m,this),(b=(v=Se(this,qa).config).onSettled)==null||b.call(v,this.state.data,m,this)),this.scheduleGc()};return vt(this,os,G8({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:m=>{var p,y,v,b;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(N){c(N);return}(y=(p=Se(this,qa).config).onSuccess)==null||y.call(p,m,this),(b=(v=Se(this,qa).config).onSettled)==null||b.call(v,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,p)=>{ss(this,ki,zo).call(this,{type:"failed",failureCount:m,error:p})},onPause:()=>{ss(this,ki,zo).call(this,{type:"pause"})},onContinue:()=>{ss(this,ki,zo).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),Se(this,os).start()}},Ah=new WeakMap,_d=new WeakMap,qa=new WeakMap,Sd=new WeakMap,os=new WeakMap,ex=new WeakMap,Cd=new WeakMap,ki=new WeakSet,zo=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Fne(n.data,this.options),fetchMeta:t.meta??null};case"success":return vt(this,_d,void 0),{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return x_(a)&&a.revert&&Se(this,_d)?{...Se(this,_d),fetchStatus:"idle"}:{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),ws.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),Se(this,qa).notify({query:this,type:"updated",action:t})})},sL);function Fne(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:V8(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Bne(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var io,aL,zne=(aL=class extends Cw{constructor(t={}){super();Vt(this,io);this.config=t,vt(this,io,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??Bk(a,r);let o=this.get(i);return o||(o=new Lne({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){Se(this,io).has(t.queryHash)||(Se(this,io).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=Se(this,io).get(t.queryHash);r&&(t.destroy(),r===t&&Se(this,io).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ws.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Se(this,io).get(t)}getAll(){return[...Se(this,io).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>bM(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>bM(t,n)):r}notify(t){ws.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){ws.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ws.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},io=new WeakMap,aL),oo,vs,Pd,lo,Il,iL,Une=(iL=class extends K8{constructor(t){super();Vt(this,lo);Vt(this,oo);Vt(this,vs);Vt(this,Pd);this.mutationId=t.mutationId,vt(this,vs,t.mutationCache),vt(this,oo,[]),this.state=t.state||Wne(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Se(this,oo).includes(t)||(Se(this,oo).push(t),this.clearGcTimeout(),Se(this,vs).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){vt(this,oo,Se(this,oo).filter(r=>r!==t)),this.scheduleGc(),Se(this,vs).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Se(this,oo).length||(this.state.status==="pending"?this.scheduleGc():Se(this,vs).remove(this))}continue(){var t;return((t=Se(this,Pd))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,l,c,d,h,f,m,p,y,v,b,N,j,w,S,C,P,T,O;const r=()=>{ss(this,lo,Il).call(this,{type:"continue"})};vt(this,Pd,G8({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(E,D)=>{ss(this,lo,Il).call(this,{type:"failed",failureCount:E,error:D})},onPause:()=>{ss(this,lo,Il).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Se(this,vs).canRun(this)}));const n=this.state.status==="pending",a=!Se(this,Pd).canStart();try{if(n)r();else{ss(this,lo,Il).call(this,{type:"pending",variables:t,isPaused:a}),await((o=(i=Se(this,vs).config).onMutate)==null?void 0:o.call(i,t,this));const D=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));D!==this.state.context&&ss(this,lo,Il).call(this,{type:"pending",context:D,variables:t,isPaused:a})}const E=await Se(this,Pd).start();return await((h=(d=Se(this,vs).config).onSuccess)==null?void 0:h.call(d,E,t,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,E,t,this.state.context)),await((y=(p=Se(this,vs).config).onSettled)==null?void 0:y.call(p,E,null,this.state.variables,this.state.context,this)),await((b=(v=this.options).onSettled)==null?void 0:b.call(v,E,null,t,this.state.context)),ss(this,lo,Il).call(this,{type:"success",data:E}),E}catch(E){try{throw await((j=(N=Se(this,vs).config).onError)==null?void 0:j.call(N,E,t,this.state.context,this)),await((S=(w=this.options).onError)==null?void 0:S.call(w,E,t,this.state.context)),await((P=(C=Se(this,vs).config).onSettled)==null?void 0:P.call(C,void 0,E,this.state.variables,this.state.context,this)),await((O=(T=this.options).onSettled)==null?void 0:O.call(T,void 0,E,t,this.state.context)),E}finally{ss(this,lo,Il).call(this,{type:"error",error:E})}}finally{Se(this,vs).runNext(this)}}},oo=new WeakMap,vs=new WeakMap,Pd=new WeakMap,lo=new WeakSet,Il=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ws.batch(()=>{Se(this,oo).forEach(n=>{n.onMutationUpdate(t)}),Se(this,vs).notify({mutation:this,type:"updated",action:t})})},iL);function Wne(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var qo,Ei,tx,oL,Hne=(oL=class extends Cw{constructor(t={}){super();Vt(this,qo);Vt(this,Ei);Vt(this,tx);this.config=t,vt(this,qo,new Set),vt(this,Ei,new Map),vt(this,tx,0)}build(t,r,n){const a=new Une({mutationCache:this,mutationId:++rv(this,tx)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){Se(this,qo).add(t);const r=Sv(t);if(typeof r=="string"){const n=Se(this,Ei).get(r);n?n.push(t):Se(this,Ei).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Se(this,qo).delete(t)){const r=Sv(t);if(typeof r=="string"){const n=Se(this,Ei).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&Se(this,Ei).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Sv(t);if(typeof r=="string"){const n=Se(this,Ei).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=Sv(t);if(typeof r=="string"){const a=(n=Se(this,Ei).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ws.batch(()=>{Se(this,qo).forEach(t=>{this.notify({type:"removed",mutation:t})}),Se(this,qo).clear(),Se(this,Ei).clear()})}getAll(){return Array.from(Se(this,qo))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>wM(r,n))}findAll(t={}){return this.getAll().filter(r=>wM(t,r))}notify(t){ws.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return ws.batch(()=>Promise.all(t.map(r=>r.continue().catch(Ci))))}},qo=new WeakMap,Ei=new WeakMap,tx=new WeakMap,oL);function Sv(e){var t;return(t=e.options.scope)==null?void 0:t.id}function _M(e){return{onFetch:(t,r)=>{var h,f,m,p,y;const n=t.options,a=(m=(f=(h=t.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((p=t.state.data)==null?void 0:p.pages)||[],o=((y=t.state.data)==null?void 0:y.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let v=!1;const b=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},N=W8(t.options,t.fetchOptions),j=async(w,S,C)=>{if(v)return Promise.reject();if(S==null&&w.pages.length)return Promise.resolve(w);const T=(()=>{const I={client:t.client,queryKey:t.queryKey,pageParam:S,direction:C?"backward":"forward",meta:t.options.meta};return b(I),I})(),O=await N(T),{maxPages:E}=t.options,D=C?Ane:Tne;return{pages:D(w.pages,O,E),pageParams:D(w.pageParams,S,E)}};if(a&&i.length){const w=a==="backward",S=w?Vne:SM,C={pages:i,pageParams:o},P=S(n,C);l=await j(C,P,w)}else{const w=e??i.length;do{const S=c===0?o[0]??n.initialPageParam:SM(n,l);if(c>0&&S==null)break;l=await j(l,S),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var v,b;return(b=(v=t.options).persister)==null?void 0:b.call(v,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function SM(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function Vne(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var qr,Yl,Zl,Oh,Mh,Xl,Ih,Rh,lL,qne=(lL=class{constructor(e={}){Vt(this,qr);Vt(this,Yl);Vt(this,Zl);Vt(this,Oh);Vt(this,Mh);Vt(this,Xl);Vt(this,Ih);Vt(this,Rh);vt(this,qr,e.queryCache||new zne),vt(this,Yl,e.mutationCache||new Hne),vt(this,Zl,e.defaultOptions||{}),vt(this,Oh,new Map),vt(this,Mh,new Map),vt(this,Xl,0)}mount(){rv(this,Xl)._++,Se(this,Xl)===1&&(vt(this,Ih,H8.subscribe(async e=>{e&&(await this.resumePausedMutations(),Se(this,qr).onFocus())})),vt(this,Rh,y0.subscribe(async e=>{e&&(await this.resumePausedMutations(),Se(this,qr).onOnline())})))}unmount(){var e,t;rv(this,Xl)._--,Se(this,Xl)===0&&((e=Se(this,Ih))==null||e.call(this),vt(this,Ih,void 0),(t=Se(this,Rh))==null||t.call(this),vt(this,Rh,void 0))}isFetching(e){return Se(this,qr).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Se(this,Yl).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Se(this,qr).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=Se(this,qr).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(WS(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return Se(this,qr).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=Se(this,qr).get(n.queryHash),i=a==null?void 0:a.state.data,o=_ne(t,i);if(o!==void 0)return Se(this,qr).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return ws.batch(()=>Se(this,qr).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Se(this,qr).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=Se(this,qr);ws.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=Se(this,qr);return ws.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=ws.batch(()=>Se(this,qr).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(Ci).catch(Ci)}invalidateQueries(e,t={}){return ws.batch(()=>(Se(this,qr).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=ws.batch(()=>Se(this,qr).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(Ci)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Ci)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=Se(this,qr).build(this,t);return r.isStaleByTime(WS(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ci).catch(Ci)}fetchInfiniteQuery(e){return e.behavior=_M(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ci).catch(Ci)}ensureInfiniteQueryData(e){return e.behavior=_M(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return y0.isOnline()?Se(this,Yl).resumePausedMutations():Promise.resolve()}getQueryCache(){return Se(this,qr)}getMutationCache(){return Se(this,Yl)}getDefaultOptions(){return Se(this,Zl)}setDefaultOptions(e){vt(this,Zl,e)}setQueryDefaults(e,t){Se(this,Oh).set(Jp(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Se(this,Oh).values()],r={};return t.forEach(n=>{Qp(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){Se(this,Mh).set(Jp(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Se(this,Mh).values()],r={};return t.forEach(n=>{Qp(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Se(this,Zl).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Bk(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===zk&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Se(this,Zl).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Se(this,qr).clear(),Se(this,Yl).clear()}},qr=new WeakMap,Yl=new WeakMap,Zl=new WeakMap,Oh=new WeakMap,Mh=new WeakMap,Xl=new WeakMap,Ih=new WeakMap,Rh=new WeakMap,lL),Gne=x.createContext(void 0),Kne=({client:e,children:t})=>(x.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(Gne.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eg(){return eg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eg.apply(this,arguments)}var ec;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ec||(ec={}));const CM="popstate";function Yne(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return VS("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:b0(a)}return Xne(t,r,null,e)}function rn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Y8(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Zne(){return Math.random().toString(36).substr(2,8)}function PM(e,t){return{usr:e.state,key:e.key,idx:t}}function VS(e,t,r,n){return r===void 0&&(r=null),eg({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Uf(t):t,{state:r,key:t&&t.key||n||Zne()})}function b0(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Uf(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Xne(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=ec.Pop,c=null,d=h();d==null&&(d=0,o.replaceState(eg({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function f(){l=ec.Pop;let b=h(),N=b==null?null:b-d;d=b,c&&c({action:l,location:v.location,delta:N})}function m(b,N){l=ec.Push;let j=VS(v.location,b,N);d=h()+1;let w=PM(j,d),S=v.createHref(j);try{o.pushState(w,"",S)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;a.location.assign(S)}i&&c&&c({action:l,location:v.location,delta:1})}function p(b,N){l=ec.Replace;let j=VS(v.location,b,N);d=h();let w=PM(j,d),S=v.createHref(j);o.replaceState(w,"",S),i&&c&&c({action:l,location:v.location,delta:0})}function y(b){let N=a.location.origin!=="null"?a.location.origin:a.location.href,j=typeof b=="string"?b:b0(b);return j=j.replace(/ $/,"%20"),rn(N,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,N)}let v={get action(){return l},get location(){return e(a,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(CM,f),c=b,()=>{a.removeEventListener(CM,f),c=null}},createHref(b){return t(a,b)},createURL:y,encodeLocation(b){let N=y(b);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:m,replace:p,go(b){return o.go(b)}};return v}var kM;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(kM||(kM={}));function Jne(e,t,r){return r===void 0&&(r="/"),Qne(e,t,r,!1)}function Qne(e,t,r,n){let a=typeof t=="string"?Uf(t):t,i=Uk(a.pathname||"/",r);if(i==null)return null;let o=Z8(e);ese(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=use(i);l=cse(o[c],d,n)}return l}function Z8(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(rn(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=hc([n,c.relativePath]),h=r.concat(c);i.children&&i.children.length>0&&(rn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Z8(i.children,t,h,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:ose(d,i.index),routesMeta:h})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of X8(i.path))a(i,o,c)}),t}function X8(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=X8(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function ese(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:lse(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const tse=/^:[\w-]+$/,rse=3,nse=2,sse=1,ase=10,ise=-2,EM=e=>e==="*";function ose(e,t){let r=e.split("/"),n=r.length;return r.some(EM)&&(n+=ise),t&&(n+=nse),r.filter(a=>!EM(a)).reduce((a,i)=>a+(tse.test(i)?rse:i===""?sse:ase),n)}function lse(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function cse(e,t,r){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,h=i==="/"?t:t.slice(i.length)||"/",f=TM({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),m=c.route;if(!f&&d&&r&&!n[n.length-1].route.index&&(f=TM({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:hc([i,f.pathname]),pathnameBase:pse(hc([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=hc([i,f.pathnameBase]))}return o}function TM(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=dse(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((d,h,f)=>{let{paramName:m,isOptional:p}=h;if(m==="*"){let v=l[f]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const y=l[f];return p&&!y?d[m]=void 0:d[m]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function dse(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Y8(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function use(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Y8(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Uk(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function hse(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Uf(e):e;return{pathname:r?r.startsWith("/")?r:fse(r,t):t,search:gse(n),hash:xse(a)}}function fse(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function v_(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function mse(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Wk(e,t){let r=mse(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Hk(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Uf(e):(a=eg({},e),rn(!a.pathname||!a.pathname.includes("?"),v_("?","pathname","search",a)),rn(!a.pathname||!a.pathname.includes("#"),v_("#","pathname","hash",a)),rn(!a.search||!a.search.includes("#"),v_("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;a.pathname=m.join("/")}l=f>=0?t[f]:"/"}let c=hse(a,l),d=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const hc=e=>e.join("/").replace(/\/\/+/g,"/"),pse=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),gse=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,xse=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function vse(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const J8=["post","put","patch","delete"];new Set(J8);const yse=["get",...J8];new Set(yse);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tg(){return tg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tg.apply(this,arguments)}const Vk=x.createContext(null),bse=x.createContext(null),Ec=x.createContext(null),kw=x.createContext(null),bl=x.createContext({outlet:null,matches:[],isDataRoute:!1}),Q8=x.createContext(null);function wse(e,t){let{relative:r}=t===void 0?{}:t;Wf()||rn(!1);let{basename:n,navigator:a}=x.useContext(Ec),{hash:i,pathname:o,search:l}=tB(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:hc([n,o])),a.createHref({pathname:c,search:l,hash:i})}function Wf(){return x.useContext(kw)!=null}function su(){return Wf()||rn(!1),x.useContext(kw).location}function eB(e){x.useContext(Ec).static||x.useLayoutEffect(e)}function ps(){let{isDataRoute:e}=x.useContext(bl);return e?Rse():jse()}function jse(){Wf()||rn(!1);let e=x.useContext(Vk),{basename:t,future:r,navigator:n}=x.useContext(Ec),{matches:a}=x.useContext(bl),{pathname:i}=su(),o=JSON.stringify(Wk(a,r.v7_relativeSplatPath)),l=x.useRef(!1);return eB(()=>{l.current=!0}),x.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let f=Hk(d,JSON.parse(o),i,h.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:hc([t,f.pathname])),(h.replace?n.replace:n.push)(f,h.state,h)},[t,n,o,i,e])}function Nse(){let{matches:e}=x.useContext(bl),t=e[e.length-1];return t?t.params:{}}function tB(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=x.useContext(Ec),{matches:a}=x.useContext(bl),{pathname:i}=su(),o=JSON.stringify(Wk(a,n.v7_relativeSplatPath));return x.useMemo(()=>Hk(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function _se(e,t){return Sse(e,t)}function Sse(e,t,r,n){Wf()||rn(!1);let{navigator:a}=x.useContext(Ec),{matches:i}=x.useContext(bl),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=su(),h;if(t){var f;let b=typeof t=="string"?Uf(t):t;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||rn(!1),h=b}else h=d;let m=h.pathname||"/",p=m;if(c!=="/"){let b=c.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(b.length).join("/")}let y=Jne(e,{pathname:p}),v=Tse(y&&y.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:hc([c,a.encodeLocation?a.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:hc([c,a.encodeLocation?a.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,r,n);return t&&v?x.createElement(kw.Provider,{value:{location:tg({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:ec.Pop}},v):v}function Cse(){let e=Ise(),t=vse(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),r?x.createElement("pre",{style:a},r):null,null)}const Pse=x.createElement(Cse,null);class kse extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?x.createElement(bl.Provider,{value:this.props.routeContext},x.createElement(Q8.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ese(e){let{routeContext:t,match:r,children:n}=e,a=x.useContext(Vk);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),x.createElement(bl.Provider,{value:t},n)}function Tse(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let h=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);h>=0||rn(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:m,errors:p}=r,y=f.route.loader&&m[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||y){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,f,m)=>{let p,y=!1,v=null,b=null;r&&(p=l&&f.route.id?l[f.route.id]:void 0,v=f.route.errorElement||Pse,c&&(d<0&&m===0?(y=!0,b=null):d===m&&(y=!0,b=f.route.hydrateFallbackElement||null)));let N=t.concat(o.slice(0,m+1)),j=()=>{let w;return p?w=v:y?w=b:f.route.Component?w=x.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=h,x.createElement(Ese,{match:f,routeContext:{outlet:h,matches:N,isDataRoute:r!=null},children:w})};return r&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?x.createElement(kse,{location:r.location,revalidation:r.revalidation,component:v,error:p,children:j(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):j()},null)}var rB=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(rB||{}),w0=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(w0||{});function Ase(e){let t=x.useContext(Vk);return t||rn(!1),t}function Ose(e){let t=x.useContext(bse);return t||rn(!1),t}function Mse(e){let t=x.useContext(bl);return t||rn(!1),t}function nB(e){let t=Mse(),r=t.matches[t.matches.length-1];return r.route.id||rn(!1),r.route.id}function Ise(){var e;let t=x.useContext(Q8),r=Ose(w0.UseRouteError),n=nB(w0.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Rse(){let{router:e}=Ase(rB.UseNavigateStable),t=nB(w0.UseNavigateStable),r=x.useRef(!1);return eB(()=>{r.current=!0}),x.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,tg({fromRouteId:t},i)))},[e,t])}function Dse(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Yh(e){let{to:t,replace:r,state:n,relative:a}=e;Wf()||rn(!1);let{future:i,static:o}=x.useContext(Ec),{matches:l}=x.useContext(bl),{pathname:c}=su(),d=ps(),h=Hk(t,Wk(l,i.v7_relativeSplatPath),c,a==="path"),f=JSON.stringify(h);return x.useEffect(()=>d(JSON.parse(f),{replace:r,state:n,relative:a}),[d,f,a,r,n]),null}function zs(e){rn(!1)}function $se(e){let{basename:t="/",children:r=null,location:n,navigationType:a=ec.Pop,navigator:i,static:o=!1,future:l}=e;Wf()&&rn(!1);let c=t.replace(/^\/*/,"/"),d=x.useMemo(()=>({basename:c,navigator:i,static:o,future:tg({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=Uf(n));let{pathname:h="/",search:f="",hash:m="",state:p=null,key:y="default"}=n,v=x.useMemo(()=>{let b=Uk(h,c);return b==null?null:{location:{pathname:b,search:f,hash:m,state:p,key:y},navigationType:a}},[c,h,f,m,p,y,a]);return v==null?null:x.createElement(Ec.Provider,{value:d},x.createElement(kw.Provider,{children:r,value:v}))}function Lse(e){let{children:t,location:r}=e;return _se(qS(t),r)}new Promise(()=>{});function qS(e,t){t===void 0&&(t=[]);let r=[];return x.Children.forEach(e,(n,a)=>{if(!x.isValidElement(n))return;let i=[...t,a];if(n.type===x.Fragment){r.push.apply(r,qS(n.props.children,i));return}n.type!==zs&&rn(!1),!n.props.index||!n.props.children||rn(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=qS(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function GS(){return GS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},GS.apply(this,arguments)}function Fse(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Bse(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function zse(e,t){return e.button===0&&(!t||t==="_self")&&!Bse(e)}function KS(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function Use(e,t){let r=KS(e);return t&&t.forEach((n,a)=>{r.has(a)||t.getAll(a).forEach(i=>{r.append(a,i)})}),r}const Wse=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Hse="6";try{window.__reactRouterVersion=Hse}catch{}const Vse="startTransition",AM=NP[Vse];function qse(e){let{basename:t,children:r,future:n,window:a}=e,i=x.useRef();i.current==null&&(i.current=Yne({window:a,v5Compat:!0}));let o=i.current,[l,c]=x.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},h=x.useCallback(f=>{d&&AM?AM(()=>c(f)):c(f)},[c,d]);return x.useLayoutEffect(()=>o.listen(h),[o,h]),x.useEffect(()=>Dse(n),[n]),x.createElement($se,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const Gse=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Kse=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dn=x.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:h,viewTransition:f}=t,m=Fse(t,Wse),{basename:p}=x.useContext(Ec),y,v=!1;if(typeof d=="string"&&Kse.test(d)&&(y=d,Gse))try{let w=new URL(window.location.href),S=d.startsWith("//")?new URL(w.protocol+d):new URL(d),C=Uk(S.pathname,p);S.origin===w.origin&&C!=null?d=C+S.search+S.hash:v=!0}catch{}let b=wse(d,{relative:a}),N=Yse(d,{replace:o,state:l,target:c,preventScrollReset:h,relative:a,viewTransition:f});function j(w){n&&n(w),w.defaultPrevented||N(w)}return x.createElement("a",GS({},m,{href:y||b,onClick:v||i?n:j,ref:r,target:c}))});var OM;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(OM||(OM={}));var MM;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(MM||(MM={}));function Yse(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=ps(),d=su(),h=tB(e,{relative:o});return x.useCallback(f=>{if(zse(f,r)){f.preventDefault();let m=n!==void 0?n:b0(d)===b0(h);c(e,{replace:m,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,h,n,a,r,e,i,o,l])}function sB(e){let t=x.useRef(KS(e)),r=x.useRef(!1),n=su(),a=x.useMemo(()=>Use(n.search,r.current?null:t.current),[n.search]),i=ps(),o=x.useCallback((l,c)=>{const d=KS(typeof l=="function"?l(a):l);r.current=!0,i("?"+d,c)},[i,a]);return[a,o]}var uo=function(){return uo=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},uo.apply(this,arguments)};function Hf(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function Zse(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(h){try{d(n.next(h))}catch(f){o(f)}}function c(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?i(h.value):a(h.value).then(l,c)}d((n=n.apply(e,t||[])).next())})}function Xse(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}const Jse=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class qk extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Qse extends qk{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class IM extends qk{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class RM extends qk{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var YS;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(YS||(YS={}));class eae{constructor(t,{headers:r={},customFetch:n,region:a=YS.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=Jse(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Zse(this,arguments,void 0,function*(r,n={}){var a;let i,o;try{const{headers:l,method:c,body:d,signal:h,timeout:f}=n;let m={},{region:p}=n;p||(p=this.region);const y=new URL(`${this.url}/${r}`);p&&p!=="any"&&(m["x-region"]=p,y.searchParams.set("forceFunctionRegion",p));let v;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",v=d):typeof d=="string"?(m["Content-Type"]="text/plain",v=d):typeof FormData<"u"&&d instanceof FormData?v=d:(m["Content-Type"]="application/json",v=JSON.stringify(d)):d&&typeof d!="string"&&!(typeof Blob<"u"&&d instanceof Blob)&&!(d instanceof ArrayBuffer)&&!(typeof FormData<"u"&&d instanceof FormData)?v=JSON.stringify(d):v=d;let b=h;f&&(o=new AbortController,i=setTimeout(()=>o.abort(),f),h?(b=o.signal,h.addEventListener("abort",()=>o.abort())):b=o.signal);const N=yield this.fetch(y.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),l),body:v,signal:b}).catch(C=>{throw new Qse(C)}),j=N.headers.get("x-relay-error");if(j&&j==="true")throw new IM(N);if(!N.ok)throw new RM(N);let w=((a=N.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),S;return w==="application/json"?S=yield N.json():w==="application/octet-stream"||w==="application/pdf"?S=yield N.blob():w==="text/event-stream"?S=N:w==="multipart/form-data"?S=yield N.formData():S=yield N.text(),{data:S,error:null,response:N}}catch(l){return{data:null,error:l,response:l instanceof RM||l instanceof IM?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var tae=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},rae=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,c=null,d=i.status,h=i.statusText;if(i.ok){var f,m;if(r.method!=="HEAD"){var p;const N=await i.text();N===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((p=r.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?l=N:l=JSON.parse(N))}const v=(f=r.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),b=(m=i.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");v&&b&&b.length>1&&(c=parseInt(b[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,d=406,h="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var y;const v=await i.text();try{o=JSON.parse(v),Array.isArray(o)&&i.status===404&&(l=[],o=null,d=200,h="OK")}catch{i.status===404&&v===""?(d=204,h="No Content"):o={message:v}}if(o&&r.isMaybeSingle&&(!(o==null||(y=o.details)===null||y===void 0)&&y.includes("0 rows"))&&(o=null,d=200,h="OK"),o&&r.shouldThrowOnError)throw new tae(o)}return{error:o,data:l,count:c,status:d,statusText:h}});return this.shouldThrowOnError||(a=a.catch(i=>{var o;let l="";const c=i==null?void 0:i.cause;if(c){var d,h,f,m;const y=(d=c==null?void 0:c.message)!==null&&d!==void 0?d:"",v=(h=c==null?void 0:c.code)!==null&&h!==void 0?h:"";l=`${(f=i==null?void 0:i.name)!==null&&f!==void 0?f:"FetchError"}: ${i==null?void 0:i.message}`,l+=`

Caused by: ${(m=c==null?void 0:c.name)!==null&&m!==void 0?m:"Error"}: ${y}`,v&&(l+=` (${v})`),c!=null&&c.stack&&(l+=`
${c.stack}`)}else{var p;l=(p=i==null?void 0:i.stack)!==null&&p!==void 0?p:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(e,t)}returns(){return this}overrideTypes(){return this}},nae=class extends rae{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:a=n}={}){const i=a?`${a}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:a=!1,format:i="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const DM=new RegExp("[,()]");var Lu=class extends nae{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&DM.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&DM.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let a="";n==="plain"?a="pl":n==="phrase"?a="ph":n==="websearch"&&(a="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},sae=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},a=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(d=>/\s/.test(d)&&!i?"":(d==='"'&&(i=!i),d)).join(""),{url:l,headers:c}=this.cloneRequestState();return l.searchParams.set("select",o),n&&c.append("Prefer",`count=${n}`),new Lu({method:a,url:l,headers:c,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const a="POST",{url:i,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),r||o.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(l.length>0){const c=[...new Set(l)].map(d=>`"${d}"`);i.searchParams.set("columns",c.join(","))}}return new Lu({method:a,url:i,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:a=!0}={}){var i;const o="POST",{url:l,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&l.searchParams.set("on_conflict",t),n&&c.append("Prefer",`count=${n}`),a||c.append("Prefer","missing=default"),Array.isArray(e)){const d=e.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(d.length>0){const h=[...new Set(d)].map(f=>`"${f}"`);l.searchParams.set("columns",h.join(","))}}return new Lu({method:o,url:l,headers:c,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH",{url:a,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new Lu({method:n,url:a,headers:i,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new Lu({method:r,url:n,headers:a,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},aae=class aB{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=a}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new sae(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new aB(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let d;const h=p=>p!==null&&typeof p=="object"&&(!Array.isArray(p)||p.some(h)),f=n&&Object.values(r).some(h);f?(l="POST",d=r):n||a?(l=n?"HEAD":"GET",Object.entries(r).filter(([p,y])=>y!==void 0).map(([p,y])=>[p,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([p,y])=>{c.searchParams.append(p,y)})):(l="POST",d=r);const m=new Headers(this.headers);return f?m.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&m.set("Prefer",`count=${i}`),new Lu({method:l,url:c,headers:m,schema:this.schemaName,body:d,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class iae{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const a=n.node,i=parseInt(a.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const oae="2.90.1",lae=`realtime-js/${oae}`,iB="1.0.0",cae="2.0.0",$M=iB,ZS=1e4,dae=1e3,uae=100;var zl;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(zl||(zl={}));var bn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(bn||(bn={}));var Ai;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ai||(Ai={}));var XS;(function(e){e.websocket="websocket"})(XS||(XS={}));var id;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(id||(id={}));class hae{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var a,i;const o=t.topic,l=(a=t.ref)!==null&&a!==void 0?a:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",d=t.payload.event,h=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},f=Object.keys(h).length===0?"":JSON.stringify(h);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const m=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+d.length+f.length,p=new ArrayBuffer(this.HEADER_LENGTH+m);let y=new DataView(p),v=0;y.setUint8(v++,this.KINDS.userBroadcastPush),y.setUint8(v++,c.length),y.setUint8(v++,l.length),y.setUint8(v++,o.length),y.setUint8(v++,d.length),y.setUint8(v++,f.length),y.setUint8(v++,r),Array.from(c,N=>y.setUint8(v++,N.charCodeAt(0))),Array.from(l,N=>y.setUint8(v++,N.charCodeAt(0))),Array.from(o,N=>y.setUint8(v++,N.charCodeAt(0))),Array.from(d,N=>y.setUint8(v++,N.charCodeAt(0))),Array.from(f,N=>y.setUint8(v++,N.charCodeAt(0)));var b=new Uint8Array(p.byteLength+n.byteLength);return b.set(new Uint8Array(p),0),b.set(new Uint8Array(n),p.byteLength),b.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[a,i,o,l,c]=n;return r({join_ref:a,ref:i,topic:o,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,a)}}_decodeUserBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const d=n.decode(t.slice(c,c+a));c=c+a;const h=n.decode(t.slice(c,c+i));c=c+i;const f=n.decode(t.slice(c,c+o));c=c+o;const m=t.slice(c,t.byteLength),p=l===this.JSON_ENCODING?JSON.parse(n.decode(m)):m,y={type:this.BROADCAST_EVENT,event:h,payload:p};return o>0&&(y.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class oB{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var xr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(xr||(xr={}));const LM=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=fae(o,e,t,a),i),{}):{}},fae=(e,t,r,n)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!n.includes(i)?lB(i,o):JS(o)},lB=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return xae(t,r)}switch(e){case xr.bool:return mae(t);case xr.float4:case xr.float8:case xr.int2:case xr.int4:case xr.int8:case xr.numeric:case xr.oid:return pae(t);case xr.json:case xr.jsonb:return gae(t);case xr.timestamp:return vae(t);case xr.abstime:case xr.date:case xr.daterange:case xr.int4range:case xr.int8range:case xr.money:case xr.reltime:case xr.text:case xr.time:case xr.timestamptz:case xr.timetz:case xr.tsrange:case xr.tstzrange:return JS(t);default:return JS(t)}},JS=e=>e,mae=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},pae=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},gae=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},xae=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>lB(t,l))}return e},vae=e=>typeof e=="string"?e.replace(" ","T"):e,cB=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class y_{constructor(t,r,n={},a=ZS){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var FM;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(FM||(FM={}));class yp{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=yp.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=yp.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=yp.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(d,h)=>{o[d]||(c[d]=h)}),this.map(o,(d,h)=>{const f=i[d];if(f){const m=h.map(b=>b.presence_ref),p=f.map(b=>b.presence_ref),y=h.filter(b=>p.indexOf(b.presence_ref)<0),v=f.filter(b=>m.indexOf(b.presence_ref)<0);y.length>0&&(l[d]=y),v.length>0&&(c[d]=v)}else l[d]=h}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var d;const h=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),h.length>0){const f=t[l].map(p=>p.presence_ref),m=h.filter(p=>f.indexOf(p.presence_ref)<0);t[l].unshift(...m)}n(l,h,c)}),this.map(o,(l,c)=>{let d=t[l];if(!d)return;const h=c.map(f=>f.presence_ref);d=d.filter(f=>h.indexOf(f.presence_ref)<0),t[l]=d,a(l,d,c),d.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var BM;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(BM||(BM={}));var bp;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(bp||(bp={}));var Wo;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Wo||(Wo={}));class nh{constructor(t,r={config:{}},n){var a,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=bn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new y_(this,Ai.join,this.params,this.timeout),this.rejoinTimer=new oB(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=bn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=bn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=bn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=bn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=bn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ai.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new yp(this),this.broadcastEndpointURL=cB(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==bn.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,d=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&a!==void 0?a:[],h=!!this.bindings[bp.PRESENCE]&&this.bindings[bp.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},m={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(Wo.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(Wo.CLOSED)),this.updateJoinPayload(Object.assign({config:m},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var y;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){t==null||t(Wo.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(y=v==null?void 0:v.length)!==null&&y!==void 0?y:0,N=[];for(let j=0;j<b;j++){const w=v[j],{filter:{event:S,schema:C,table:P,filter:T}}=w,O=p&&p[j];if(O&&O.event===S&&nh.isFilterValueEqual(O.schema,C)&&nh.isFilterValueEqual(O.table,P)&&nh.isFilterValueEqual(O.filter,T))N.push(Object.assign(Object.assign({},w),{id:O.id}));else{this.unsubscribe(),this.state=bn.errored,t==null||t(Wo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,t&&t(Wo.SUBSCRIBED);return}}).receive("error",p=>{this.state=bn.errored,t==null||t(Wo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Wo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===bn.joined&&t===bp.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var a;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const d=await l.json();c=d.error||d.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=bn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ai.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new y_(this,Ai.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=bn.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new y_(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>uae){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:h}=Ai;if(n&&[l,c,d,h].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(p=>{var y,v,b;return((y=p.filter)===null||y===void 0?void 0:y.event)==="*"||((b=(v=p.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(p=>p.callback(m,n)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var y,v,b,N,j,w,S,C;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const P=p.id,T=(y=p.filter)===null||y===void 0?void 0:y.event;return P&&((v=r.ids)===null||v===void 0?void 0:v.includes(P))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))&&(!(!((N=p.filter)===null||N===void 0)&&N.table)||p.filter.table===((j=r.data)===null||j===void 0?void 0:j.table))}else{const P=(S=(w=p==null?void 0:p.filter)===null||w===void 0?void 0:w.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return P==="*"||P===((C=r==null?void 0:r.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof m=="object"&&"ids"in m){const y=m.data,{schema:v,table:b,commit_timestamp:N,type:j,errors:w}=y;m=Object.assign(Object.assign({},{schema:v,table:b,commit_timestamp:N,eventType:j,new:{},old:{},errors:w}),this._getPayloadRecords(y))}p.callback(m,n)})}_isClosed(){return this.state===bn.closed}_isJoined(){return this.state===bn.joined}_isJoining(){return this.state===bn.joining}_isLeaving(){return this.state===bn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&nh.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ai.close,{},t)}_onError(t){this._on(Ai.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=bn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=LM(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=LM(t.columns,t.old_record)),r}}const b_=()=>{},Cv={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},yae=[1e3,2e3,5e3,1e4],bae=1e4,wae=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class jae{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ZS,this.transport=null,this.heartbeatIntervalMs=Cv.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=b_,this.ref=0,this.reconnectTimer=null,this.vsn=$M,this.logger=b_,this.conn=null,this.sendBuffer=[],this.serializer=new hae,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${XS.websocket}`,this.httpEndpoint=cB(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=iae.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case zl.connecting:return id.Connecting;case zl.open:return id.Open;case zl.closing:return id.Closing;default:return id.Closed}}isConnected(){return this.connectionState()===id.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new nh(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(dae,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Cv.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const d=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",d)}catch(h){this.log("error","error in heartbeat callback",h)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:a,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===zl.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===zl.open||this.conn.readyState===zl.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ai.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([wae],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const i={access_token:r,version:lae};r&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(Ai.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new oB(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Cv.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,o,l,c,d,h,f,m,p;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:ZS,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Cv.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:b_,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:$M,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:y=>yae[y-1]||bae,this.vsn){case iB:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:(y,v)=>v(JSON.stringify(y)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:(y,v)=>v(JSON.parse(y));break;case cae:this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var rg=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Nae(e,t,r){const n=new URL(t,e);if(r)for(const[a,i]of Object.entries(r))i!==void 0&&n.searchParams.set(a,i);return n.toString()}async function _ae(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function Sae(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:a,body:i,headers:o}){const l=Nae(e.baseUrl,n,a),c=await _ae(e.auth),d=await t(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),h=await d.text(),f=(d.headers.get("content-type")||"").includes("application/json"),m=f&&h?JSON.parse(h):h;if(!d.ok){const p=f?m:void 0,y=p==null?void 0:p.error;throw new rg((y==null?void 0:y.message)??`Request failed with status ${d.status}`,{status:d.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:p})}return{status:d.status,headers:d.headers,data:m}}}}function Pv(e){return e.join("")}var Cae=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Pv(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Pv(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Pv(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Pv(e.namespace)}`}),!0}catch(t){if(t instanceof rg&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof rg&&r.status===409)return;throw r}}};function Su(e){return e.join("")}var Pae=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Su(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Su(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Su(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Su(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Su(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Su(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof rg&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof rg&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},kae=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=Sae({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new Cae(this.client,t),this.tableOps=new Pae(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Ew=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Fr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Eae=class extends Ew{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},QS=class extends Ew{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const Gk=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Tae=()=>Response,eC=e=>{if(Array.isArray(e))return e.map(r=>eC(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=eC(n)}),t},Aae=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Oae=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function ng(e){"@babel/helpers - typeof";return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ng(e)}function Mae(e,t){if(ng(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ng(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Iae(e){var t=Mae(e,"string");return ng(t)=="symbol"?t:t+""}function Rae(e,t,r){return(t=Iae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zM(Object(r),!0).forEach(function(n){Rae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const w_=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},Dae=async(e,t,r)=>{e instanceof await Tae()&&!(r!=null&&r.noResolveJson)?e.json().then(n=>{const a=e.status||500,i=(n==null?void 0:n.statusCode)||a+"";t(new Eae(w_(n),a,i))}).catch(n=>{t(new QS(w_(n),n))}):t(new QS(w_(e),e))},$ae=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(Aae(n)?(a.headers=lt({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),lt(lt({},a),r))};async function hx(e,t,r,n,a,i){return new Promise((o,l)=>{e(r,$ae(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Dae(c,l,n))})}async function sg(e,t,r,n){return hx(e,"GET",t,r,n)}async function Pi(e,t,r,n,a){return hx(e,"POST",t,n,a,r)}async function tC(e,t,r,n,a){return hx(e,"PUT",t,n,a,r)}async function Lae(e,t,r,n){return hx(e,"HEAD",t,lt(lt({},r),{},{noResolveJson:!0}),n)}async function Kk(e,t,r,n,a){return hx(e,"DELETE",t,n,a,r)}var Fae=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Fr(t))return{data:null,error:t};throw t}}};let dB;dB=Symbol.toStringTag;var Bae=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[dB]="BlobDownloadBuilder",this.promise=null}asStream(){return new Fae(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Fr(t))return{data:null,error:t};throw t}}};const zae={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},UM={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Uae=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=Gk(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,n){var a=this;try{let i;const o=lt(lt({},UM),n);let l=lt(lt({},a.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",a.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",a.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=a.toBase64(a.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(l=lt(lt({},l),n.headers));const d=a._removeEmptyFolders(t),h=a._getFinalPath(d),f=await(e=="PUT"?tC:Pi)(a.fetch,`${a.url}/object/${h}`,i,lt({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Fr(i))return{data:null,error:i};throw i}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var a=this;const i=a._removeEmptyFolders(e),o=a._getFinalPath(i),l=new URL(a.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let c;const d=lt({upsert:UM.upsert},n),h=lt(lt({},a.headers),{"x-upsert":String(d.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",d.cacheControl)):(c=r,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType),{data:{path:i,fullPath:(await tC(a.fetch,l.toString(),c,{headers:h})).Key},error:null}}catch(c){if(a.shouldThrowOnError)throw c;if(Fr(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(e,t){var r=this;try{let n=r._getFinalPath(e);const a=lt({},r.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const i=await Pi(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(r.url+i.url),l=o.searchParams.get("token");if(!l)throw new Ew("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;try{return{data:await Pi(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Fr(a))return{data:null,error:a};throw a}}async copy(e,t,r){var n=this;try{return{data:{path:(await Pi(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key},error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Fr(a))return{data:null,error:a};throw a}}async createSignedUrl(e,t,r){var n=this;try{let a=n._getFinalPath(e),i=await Pi(n.fetch,`${n.url}/object/sign/${a}`,lt({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${n.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Fr(a))return{data:null,error:a};throw a}}async createSignedUrls(e,t,r){var n=this;try{const a=await Pi(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>lt(lt({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Fr(a))return{data:null,error:a};throw a}}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=n?`?${n}`:"",i=this._getFinalPath(e),o=()=>sg(this.fetch,`${this.url}/${r}/${i}${a}`,{headers:this.headers,noResolveJson:!0});return new Bae(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);try{return{data:eC(await sg(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await Lae(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Fr(n)&&n instanceof QS){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&n.push(a);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&n.push(o);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(e){var t=this;try{return{data:await Kk(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Fr(r))return{data:null,error:r};throw r}}async list(e,t,r){var n=this;try{const a=lt(lt(lt({},zae),t),{},{prefix:e||""});return{data:await Pi(n.fetch,`${n.url}/object/list/${n.bucketId}`,a,{headers:n.headers},r),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Fr(a))return{data:null,error:a};throw a}}async listV2(e,t){var r=this;try{const n=lt({},e);return{data:await Pi(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const uB="2.90.1",hB={"X-Client-Info":`storage-js/${uB}`};var Wae=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1;const a=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=lt(lt({},hB),t),this.fetch=Gk(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const r=t.listBucketOptionsToQueryString(e);return{data:await sg(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Fr(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await sg(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Fr(r))return{data:null,error:r};throw r}}async createBucket(e,t={public:!1}){var r=this;try{return{data:await Pi(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}}async updateBucket(e,t){var r=this;try{return{data:await tC(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Fr(n))return{data:null,error:n};throw n}}async emptyBucket(e){var t=this;try{return{data:await Pi(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Fr(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Kk(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Fr(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},Hae=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=lt(lt({},hB),t),this.fetch=Gk(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Pi(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Fr(r))return{data:null,error:r};throw r}}async listBuckets(e){var t=this;try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),a=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return{data:await sg(t.fetch,a,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Fr(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Kk(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Fr(r))return{data:null,error:r};throw r}}from(e){var t=this;if(!Oae(e))throw new Ew("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new kae({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(a,i){const o=a[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(a,l),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}}}})}};const Yk={"X-Client-Info":`storage-js/${uB}`,"Content-Type":"application/json"};var fB=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Na(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var j_=class extends fB{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Vae=class extends fB{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const Zk=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),qae=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},WM=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Gae=async(e,t,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const n=e.status||500,a=e;if(typeof a.json=="function")a.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||n+"";t(new j_(WM(i),n,o))}).catch(()=>{const i=n+"";t(new j_(a.statusText||`HTTP ${n} error`,n,i))});else{const i=n+"";t(new j_(a.statusText||`HTTP ${n} error`,n,i))}}else t(new Vae(WM(e),e))},Kae=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(qae(n)?(a.headers=lt({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,lt(lt({},a),r)):a};async function Yae(e,t,r,n,a,i){return new Promise((o,l)=>{e(r,Kae(t,n,a,i)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const d=c.headers.get("content-type");return!d||!d.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>Gae(c,l,n))})}async function _a(e,t,r,n,a){return Yae(e,"POST",t,n,a,r)}var Zae=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=lt(lt({},Yk),t),this.fetch=Zk(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await _a(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Na(r))return{data:null,error:r};throw r}}async getIndex(e,t){var r=this;try{return{data:await _a(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Na(n))return{data:null,error:n};throw n}}async listIndexes(e){var t=this;try{return{data:await _a(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Na(r))return{data:null,error:r};throw r}}async deleteIndex(e,t){var r=this;try{return{data:await _a(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Na(n))return{data:null,error:n};throw n}}},Xae=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=lt(lt({},Yk),t),this.fetch=Zk(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await _a(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Na(r))return{data:null,error:r};throw r}}async getVectors(e){var t=this;try{return{data:await _a(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Na(r))return{data:null,error:r};throw r}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await _a(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Na(r))return{data:null,error:r};throw r}}async queryVectors(e){var t=this;try{return{data:await _a(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Na(r))return{data:null,error:r};throw r}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await _a(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Na(r))return{data:null,error:r};throw r}}},Jae=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=lt(lt({},Yk),t),this.fetch=Zk(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await _a(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Na(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await _a(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Na(r))return{data:null,error:r};throw r}}async listBuckets(e={}){var t=this;try{return{data:await _a(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Na(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await _a(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Na(r))return{data:null,error:r};throw r}}},Qae=class extends Jae{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new eie(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},eie=class extends Zae{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,lt(lt({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,lt(lt({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new tie(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},tie=class extends Xae{constructor(e,t,r,n,a){super(e,t,a),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,lt(lt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,lt(lt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,lt(lt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,lt(lt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,lt(lt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},rie=class extends Wae{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new Uae(this.url,this.headers,e,this.fetch)}get vectors(){return new Qae(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Hae(this.url+"/iceberg",this.headers,this.fetch)}};const mB="2.90.1",Fu=30*1e3,rC=3,N_=rC*Fu,nie="http://localhost:9999",sie="supabase.auth.token",aie={"X-Client-Info":`gotrue-js/${mB}`},nC="X-Supabase-Api-Version",pB={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},iie=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,oie=10*60*1e3;class ag extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Je(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class lie extends ag{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function cie(e){return Je(e)&&e.name==="AuthApiError"}class od extends ag{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class wl extends ag{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class ca extends wl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function die(e){return Je(e)&&e.name==="AuthSessionMissingError"}class Cu extends wl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class kv extends wl{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ev extends wl{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function uie(e){return Je(e)&&e.name==="AuthImplicitGrantRedirectError"}class HM extends wl{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class hie extends wl{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class sC extends wl{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function __(e){return Je(e)&&e.name==="AuthRetryableFetchError"}class VM extends wl{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class aC extends wl{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const j0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),qM=` 	
\r=`.split(""),fie=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<qM.length;t+=1)e[qM[t].charCodeAt(0)]=-2;for(let t=0;t<j0.length;t+=1)e[j0[t].charCodeAt(0)]=t;return e})();function GM(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(j0[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(j0[n]),t.queuedBits-=6}}function gB(e,t,r){const n=fie[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function KM(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{gie(o,n,r)};for(let o=0;o<e.length;o+=1)gB(e.charCodeAt(o),a,i);return t.join("")}function mie(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function pie(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}mie(n,t)}}function gie(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function yh(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)gB(e.charCodeAt(a),r,n);return new Uint8Array(t)}function xie(e){const t=[];return pie(e,r=>t.push(r)),new Uint8Array(t)}function pd(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>GM(a,r,n)),GM(null,r,n),t.join("")}function vie(e){return Math.round(Date.now()/1e3)+e}function yie(){return Symbol("auth-callback")}const Vn=()=>typeof window<"u"&&typeof document<"u",qc={tested:!1,writable:!1},xB=()=>{if(!Vn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(qc.tested)return qc.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),qc.tested=!0,qc.writable=!0}catch{qc.tested=!0,qc.writable=!1}return qc.writable};function bie(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const vB=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),wie=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Bu=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Gc=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Hn=async(e,t)=>{await e.removeItem(t)};class Tw{constructor(){this.promise=new Tw.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Tw.promiseConstructor=Promise;function S_(e){const t=e.split(".");if(t.length!==3)throw new aC("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!iie.test(t[n]))throw new aC("JWT not in base64url format");return{header:JSON.parse(KM(t[0])),payload:JSON.parse(KM(t[1])),signature:yh(t[2]),raw:{header:t[0],payload:t[1]}}}async function jie(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Nie(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function _ie(e){return("0"+e.toString(16)).substr(-2)}function Sie(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,_ie).join("")}async function Cie(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function Pie(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Cie(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Pu(e,t,r=!1){const n=Sie();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await Bu(e,`${t}-code-verifier`,a);const i=await Pie(n);return[i,n===i?"plain":"s256"]}const kie=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Eie(e){const t=e.headers.get(nC);if(!t||!t.match(kie))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Tie(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Aie(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Oie=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ku(e){if(!Oie.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function C_(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Mie(e,t){return new Proxy(e,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,a)}})}function YM(e){return JSON.parse(JSON.stringify(e))}const ed=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Iie=[502,503,504];async function ZM(e){var t;if(!wie(e))throw new sC(ed(e),0);if(Iie.includes(e.status))throw new sC(ed(e),e.status);let r;try{r=await e.json()}catch(i){throw new od(ed(i),i)}let n;const a=Eie(e);if(a&&a.getTime()>=pB["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new VM(ed(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new ca}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new VM(ed(r),e.status,r.weak_password.reasons);throw new lie(ed(r),e.status||500,n)}const Rie=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function ot(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[nC]||(i[nC]=pB["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Die(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Die(e,t,r,n,a,i){const o=Rie(t,n,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new sC(ed(c),0)}if(l.ok||await ZM(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await ZM(c)}}function Ni(e){var t;let r=null;Fie(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=vie(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function XM(e){const t=Ni(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function ql(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function $ie(e){return{data:e,error:null}}function Lie(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,o=Hf(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function JM(e){return e}function Fie(e){return e.access_token&&e.refresh_token&&e.expires_in}const P_=["global","local","others"];class Bie{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=vB(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=P_[0]){if(P_.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${P_.join(", ")}`);try{return await ot(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Je(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await ot(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ql})}catch(n){if(Je(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Hf(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await ot(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Lie,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Je(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await ot(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ql})}catch(r){if(Je(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},h=await ot(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:JM});if(h.error)throw h.error;const f=await h.json(),m=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);d[`${b}Page`]=v}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(Je(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){ku(t);try{return await ot(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ql})}catch(r){if(Je(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){ku(t);try{return await ot(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:ql})}catch(n){if(Je(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){ku(t);try{return await ot(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:ql})}catch(n){if(Je(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){ku(t.userId);try{const{data:r,error:n}=await ot(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(Je(r))return{data:null,error:r};throw r}}async _deleteFactor(t){ku(t.userId),ku(t.id);try{return{data:await ot(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Je(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},h=await ot(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:JM});if(h.error)throw h.error;const f=await h.json(),m=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);d[`${b}Page`]=v}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(Je(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await ot(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Je(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await ot(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Je(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await ot(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Je(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await ot(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Je(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await ot(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Je(r))return{data:null,error:r};throw r}}}function QM(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Eu={debug:!!(globalThis&&xB()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class yB extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class zie extends yB{}async function Uie(e,t,r){Eu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Eu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Eu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Eu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Eu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new zie(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Eu.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Wie(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function bB(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Hie(e){return parseInt(e,16)}function Vie(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function qie(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:d,scheme:h,uri:f,version:m}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=bB(e.address),y=h?`${h}://${n}`:n,v=e.statement?`${e.statement}
`:"",b=`${y} wants you to sign in with your Ethereum account:
${p}

${v}`;let N=`URI: ${f}
Version: ${m}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(a&&(N+=`
Expiration Time: ${a.toISOString()}`),l&&(N+=`
Not Before: ${l.toISOString()}`),c&&(N+=`
Request ID: ${c}`),d){let j=`
Resources:`;for(const w of d){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);j+=`
- ${w}`}N+=j}return`${b}
${N}`}class cn extends Error{constructor({message:t,code:r,cause:n,name:a}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class N0 extends cn{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function Gie({error:e,options:t}){var r,n,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new cn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new cn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new cn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new cn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new cn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new cn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new cn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new cn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(wB(o)){if(i.rp.id!==o)return new cn({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new cn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new cn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new cn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new cn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Kie({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new cn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new cn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(wB(n)){if(r.rpId!==n)return new cn({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new cn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new cn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new cn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class Yie{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Zie=new Yie;function Xie(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=Hf(e,["challenge","user","excludeCredentials"]),i=yh(t).buffer,o=Object.assign(Object.assign({},r),{id:yh(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const d=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},d),{id:yh(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function Jie(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Hf(e,["challenge","allowCredentials"]),a=yh(t).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:yh(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function Qie(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:pd(new Uint8Array(e.response.attestationObject)),clientDataJSON:pd(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function eoe(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:pd(new Uint8Array(a.authenticatorData)),clientDataJSON:pd(new Uint8Array(a.clientDataJSON)),signature:pd(new Uint8Array(a.signature)),userHandle:a.userHandle?pd(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function wB(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function e3(){var e,t;return!!(Vn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function toe(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new N0("Browser returned unexpected credential type",t)}:{data:null,error:new N0("Empty credential response",t)}}catch(t){return{data:null,error:Gie({error:t,options:e})}}}async function roe(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new N0("Browser returned unexpected credential type",t)}:{data:null,error:new N0("Empty credential response",t)}}catch(t){return{data:null,error:Kie({error:t,options:e})}}}const noe={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},soe={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function _0(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const l=n[i];t(l)?n[i]=_0(l,o):n[i]=_0(o)}else n[i]=o}return n}function aoe(e,t){return _0(noe,e,t||{})}function ioe(e,t){return _0(soe,e,t||{})}class ooe{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const c=a??Zie.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:d}=o.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${n}`),d.displayName||(d.displayName=d.name)}switch(o.webauthn.type){case"create":{const d=aoe(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:h,error:f}=await toe({publicKey:d,signal:c});return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}case"request":{const d=ioe(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:h,error:f}=await roe(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:d,signal:c}));return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}}}catch(o){return Je(o)?{data:null,error:o}:{data:null,error:new od("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new ag("rpId is required for WebAuthn authentication")};try{if(!e3())return{data:null,error:new od("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return Je(o)?{data:null,error:o}:{data:null,error:new od("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new ag("rpId is required for WebAuthn registration")};try{if(!e3())return{data:null,error:new od("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(h=>{var f;return(f=h.data)===null||f===void 0?void 0:f.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===t&&m.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:l};const{data:c,error:d}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:d}}catch(o){return Je(o)?{data:null,error:o}:{data:null,error:new od("Unexpected error in register",o)}}}}Wie();const loe={url:nie,storageKey:sie,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:aie,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function t3(e,t,r){return await r()}const Tu={};class ig{get jwks(){var t,r;return(r=(t=Tu[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Tu[this.storageKey]=Object.assign(Object.assign({},Tu[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Tu[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Tu[this.storageKey]=Object.assign(Object.assign({},Tu[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},loe),t);if(this.storageKey=i.storageKey,this.instanceID=(r=ig.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,ig.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Vn()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Bie({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=vB(i.fetch),this.lock=i.lock||t3,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&Vn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Uie:this.lock=t3,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new ooe(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:xB()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=QM(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=QM(this.memoryStorage)),Vn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${mB}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Vn()&&(r=bie(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Vn()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),uie(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Je(r)?this._returnResult({error:r}):this._returnResult({error:new od("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Ni}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(i){if(Je(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:h,password:f,options:m}=t;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await Pu(this.storage,this.storageKey)),i=await ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:h,password:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:y},xform:Ni})}else if("phone"in t){const{phone:h,password:f,options:m}=t;i=await ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:f,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(a=m==null?void 0:m.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Ni})}else throw new kv("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await Hn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(i){if(await Hn(this.storage,`${this.storageKey}-code-verifier`),Je(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await ot(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:XM})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await ot(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:XM})}else throw new kv("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const i=new Cu;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(Je(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,i,o,l,c,d,h,f,m;let p,y;if("message"in t)p=t.message,y=t.signature;else{const{chain:v,wallet:b,statement:N,options:j}=t;let w;if(Vn())if(typeof b=="object")w=b;else{const E=window;if("ethereum"in E&&typeof E.ethereum=="object"&&"request"in E.ethereum&&typeof E.ethereum.request=="function")w=E.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=b}const S=new URL((r=j==null?void 0:j.url)!==null&&r!==void 0?r:window.location.href),C=await w.request({method:"eth_requestAccounts"}).then(E=>E).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!C||C.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=bB(C[0]);let T=(n=j==null?void 0:j.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!T){const E=await w.request({method:"eth_chainId"});T=Hie(E)}const O={domain:S.host,address:P,statement:N,uri:S.href,version:"1",chainId:T,nonce:(a=j==null?void 0:j.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=j==null?void 0:j.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=j==null?void 0:j.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=j==null?void 0:j.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=j==null?void 0:j.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(h=j==null?void 0:j.signInWithEthereum)===null||h===void 0?void 0:h.resources};p=qie(O),y=await w.request({method:"personal_sign",params:[Vie(p),P]})}try{const{data:v,error:b}=await ot(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:y},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Ni});if(b)throw b;if(!v||!v.session||!v.user){const N=new Cu;return this._returnResult({data:{user:null,session:null},error:N})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:b})}catch(v){if(Je(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(t){var r,n,a,i,o,l,c,d,h,f,m,p;let y,v;if("message"in t)y=t.message,v=t.signature;else{const{chain:b,wallet:N,statement:j,options:w}=t;let S;if(Vn())if(typeof N=="object")S=N;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))S=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=N}const C=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in S&&S.signIn){const P=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),j?{statement:j}:null));let T;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")T=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)T=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)y=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),v=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${C.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...j?["",j,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(a=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((d=w==null?void 0:w.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((f=(h=w==null?void 0:w.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||f===void 0)&&f.length?["Resources",...w.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const P=await S.signMessage(new TextEncoder().encode(y),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=P}}try{const{data:b,error:N}=await ot(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:pd(v)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Ni});if(N)throw N;if(!b||!b.session||!b.user){const j=new Cu;return this._returnResult({data:{user:null,session:null},error:j})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:N})}catch(b){if(Je(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(t){const r=await Gc(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new hie;const{data:i,error:o}=await ot(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Ni});if(await Hn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new Cu;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(await Hn(this.storage,`${this.storageKey}-code-verifier`),Je(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=t,l=await ot(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ni}),{data:c,error:d}=l;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c||!c.session||!c.user){const h=new Cu;return this._returnResult({data:{user:null,session:null},error:h})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:d})}catch(r){if(Je(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await Pu(this.storage,this.storageKey));const{error:f}=await ot(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:h}=await ot(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h})}throw new kv("You must provide either an email or phone number.")}catch(l){if(await Hn(this.storage,`${this.storageKey}-code-verifier`),Je(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await ot(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Ni});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(a){if(Je(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,n,a,i,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Pu(this.storage,this.storageKey));const d=await ot(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:$ie});return!((i=d.data)===null||i===void 0)&&i.url&&Vn()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(l){if(await Hn(this.storage,`${this.storageKey}-code-verifier`),Je(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new ca;const{error:a}=await ot(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(Je(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:o}=await ot(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:o,error:l}=await ot(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new kv("You must provide either an email or phone number and a type")}catch(r){if(Je(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Gc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<N_:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await Gc(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=C_()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=Mie(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await ot(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:ql}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ca}:await ot(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:ql})})}catch(r){if(Je(r))return die(r)&&(await this._removeSession(),await Hn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new ca;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Pu(this.storage,this.storageKey));const{data:d,error:h}=await ot(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:ql});if(h)throw h;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await Hn(this.storage,`${this.storageKey}-code-verifier`),Je(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ca;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=S_(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(Je(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new ca;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Je(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Vn())throw new Ev("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ev(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new HM("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ev("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new HM("No code detected.");const{data:j,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:j.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=t;if(!i||!l||!o||!d)throw new Ev("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(l);let m=h+f;c&&(m=parseInt(c));const p=m-h;p*1e3<=Fu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const y=m-f;h-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,m,h):h-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,m,h);const{data:v,error:b}=await this._getUser(i);if(b)throw b;const N={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:m,refresh_token:o,token_type:d,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:N,redirectType:t.type},error:null})}catch(n){if(Je(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Gc(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({error:i});const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(cie(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Hn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=yie(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Pu(this.storage,this.storageKey,!0));try{return await ot(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await Hn(this.storage,`${this.storageKey}-code-verifier`),Je(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(Je(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,c,d,h;const{data:f,error:m}=i;if(m)throw m;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ot(this.fetch,"GET",p,{headers:this.headers,jwt:(h=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(a)throw a;return Vn()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(Je(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:o,provider:l,token:c,access_token:d,nonce:h}=t,f=await ot(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:d,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Ni}),{data:m,error:p}=f;return p?this._returnResult({data:{user:null,session:null},error:p}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new Cu}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:p}))}catch(a){if(await Hn(this.storage,`${this.storageKey}-code-verifier`),Je(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await ot(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Je(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Nie(async a=>(a>0&&await jie(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await ot(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ni})),(a,i)=>{const o=200*Math.pow(2,a);return i&&__(i)&&Date.now()+o-n<Fu})}catch(n){if(this._debug(r,"error",n),Je(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Vn()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await Gc(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Gc(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await Bu(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:C_()}else if(a&&!a.user&&!a.user){const o=await Gc(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Hn(this.storage,this.storageKey+"-user"),await Bu(this.storage,this.storageKey,a)):a.user=C_()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<N_;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${N_}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),__(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new ca;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Tw;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new ca;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),Je(i)){const o={data:null,error:i};return __(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Hn(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Bu(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=YM(a);await Bu(this.storage,this.storageKey,i)}else{const a=YM(r);await Bu(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Hn(this.storage,this.storageKey),await Hn(this.storage,this.storageKey+"-code-verifier"),await Hn(this.storage,this.storageKey+"-user"),this.userStorage&&await Hn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Vn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Fu);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Fu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Fu}ms, refresh threshold is ${rC} ticks`),a<=rC&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof yB)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Vn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Pu(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await ot(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Je(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:d}=await ot(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?this._returnResult({data:null,error:d}):(t.factorType==="totp"&&c.type==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(Je(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Qie(t.webauthn.credential_response):eoe(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await ot(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(Je(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await ot(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Xie(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Jie(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Je(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=S_(n.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await ot(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new ca})})}catch(r){if(Je(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new ca});const o=await ot(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Vn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(Je(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new ca});const o=await ot(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Vn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(Je(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await ot(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new ca})})}catch(t){if(Je(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?(await ot(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ca})})}catch(r){if(Je(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+oie>a)return n;const{data:i,error:o}=await ot(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:y}=await this.getSession();if(y||!p.session)return this._returnResult({data:null,error:y});n=p.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=S_(n);r!=null&&r.allowExpired||Tie(i.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:a,signature:o},error:null}}const h=Aie(a.alg),f=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,f,o,xie(`${l}.${c}`)))throw new aC("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(Je(n))return this._returnResult({data:null,error:n});throw n}}}ig.nextInstanceID={};const coe=ig,doe="2.90.1";let ep="";typeof Deno<"u"?ep="deno":typeof document<"u"?ep="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ep="react-native":ep="node";const uoe={"X-Client-Info":`supabase-js-${ep}/${doe}`},hoe={headers:uoe},foe={schema:"public"},moe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},poe={};function og(e){"@babel/helpers - typeof";return og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},og(e)}function goe(e,t){if(og(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(og(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xoe(e){var t=goe(e,"string");return og(t)=="symbol"?t:t+""}function voe(e,t,r){return(t=xoe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Gr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r3(Object(r),!0).forEach(function(n){voe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const yoe=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),boe=()=>Headers,woe=(e,t,r)=>{const n=yoe(r),a=boe();return async(i,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let d=new a(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,Gr(Gr({},o),{},{headers:d}))}};function joe(e){return e.endsWith("/")?e:e+"/"}function Noe(e,t){var r,n;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:d,realtime:h,global:f}=t,m={db:Gr(Gr({},c),a),auth:Gr(Gr({},d),i),realtime:Gr(Gr({},h),o),storage:{},global:Gr(Gr(Gr({},f),l),{},{headers:Gr(Gr({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function _oe(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(joe(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Soe=class extends coe{constructor(e){super(e)}},Coe=class{constructor(e,t,r){var n,a;this.supabaseUrl=e,this.supabaseKey=t;const i=_oe(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:foe,realtime:poe,auth:Gr(Gr({},moe),{},{storageKey:o}),global:hoe},c=Noe(r??{},l);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=c.global.headers)!==null&&a!==void 0?a:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var d;this.auth=this._initSupabaseAuthClient((d=c.auth)!==null&&d!==void 0?d:{},this.headers,c.global.fetch)}this.fetch=woe(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Gr({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new aae(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new rie(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new eae(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:a,storageKey:i,flowType:o,lock:l,debug:c,throwOnError:d},h,f){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Soe({url:this.authUrl.href,headers:Gr(Gr({},m),h),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:a,flowType:o,lock:l,debug:c,throwOnError:d,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new jae(this.realtimeUrl.href,Gr(Gr({},e),{},{params:Gr(Gr({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Poe=(e,t,r)=>new Coe(e,t,r);function koe(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}koe()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Eoe="https://pavibobervhqkfzwkotw.supabase.co",Toe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZl9pZCI6InBhdmlib2JlcnZocWtmendlb3R3Iiwicm9sZSI6ImFub24iLCJleHAiOjE3Njg0MTI4OTgzInV4cCI6MjA4Mzk4ODg5OH0.As1JiRkr9Pptpbrwg21sTPMX0VrENv47HPgHkv5_tNQ",de=Poe(Eoe,Toe,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),Vf=Object.freeze(Object.defineProperty({__proto__:null,supabase:de},Symbol.toStringTag,{value:"Module"})),Aoe="pswdirect_audit_log",jB="pswdirect_last_activity",Ooe=()=>{const e=localStorage.getItem(Aoe);if(e)try{return JSON.parse(e)}catch{return[]}return[]},Moe=(e=50)=>Ooe().slice(-e).reverse(),Im=()=>{localStorage.setItem(jB,Date.now().toString())},Ioe=()=>{localStorage.removeItem(jB)},NB=x.createContext(void 0),Roe="tiffarshi@gmail.com";function Doe({children:e}){const[t,r]=x.useState(null),[n,a]=x.useState(!0);x.useEffect(()=>{let c=!0;const d=async()=>{try{const{data:{session:f}}=await de.auth.getSession();f!=null&&f.user&&c&&await i(f.user.id,f.user.email||"")}catch(f){console.error("Error initializing auth:",f)}finally{c&&a(!1)}},{data:{subscription:h}}=de.auth.onAuthStateChange(async(f,m)=>{if(c){if(f==="PASSWORD_RECOVERY"){console.log("[Auth] PASSWORD_RECOVERY event  skipping auto-login");return}if(f==="SIGNED_IN"&&window.location.hash.includes("type=recovery")){console.log("[Auth] SIGNED_IN during recovery  skipping auto-login");return}f==="SIGNED_IN"&&(m!=null&&m.user)?await i(m.user.id,m.user.email||""):f==="SIGNED_OUT"&&r(null)}});return d(),()=>{c=!1,h.unsubscribe()}},[]);const i=async(c,d)=>{try{const h=d.toLowerCase();if(h===Roe.toLowerCase()){console.log("[Auth] Master admin bypass for:",h),r({id:c,name:"Admin",firstName:"Admin",email:d,role:"admin"}),Im();return}const{data:f,error:m}=await de.from("user_roles").select("role").eq("user_id",c).eq("role","admin").maybeSingle();if(!m&&f){r({id:c,name:"Admin",firstName:"Admin",email:d,role:"admin"}),Im();return}const{data:p,error:y}=await de.from("psw_profiles").select("id, first_name, last_name, vetting_status").eq("email",d).single();if(!y&&p){const j={approved:"active",pending:"pending",flagged:"flagged",rejected:"pending",rejected_needs_update:"pending",rejected_final:"removed",deactivated:"removed"}[p.vetting_status||"pending"]||"pending";r({id:p.id,name:`${p.first_name} ${p.last_name}`,firstName:p.first_name,email:d,role:"psw",status:j}),Im();return}const{data:v,error:b}=await de.from("client_profiles").select("id, first_name, full_name").eq("user_id",c).single();if(!b&&v){r({id:v.id,name:v.full_name||v.first_name||d.split("@")[0],firstName:v.first_name||d.split("@")[0],email:d,role:"client"}),Im();return}console.log("No role found for user:",d)}catch(h){console.error("Error handling Supabase user:",h)}},o=(c,d,h)=>{Im(),r(c==="psw"&&h?{id:h.id,name:`${h.firstName} ${h.lastName}`,firstName:h.firstName,email:d,role:"psw",status:"active"}:c==="admin"?{id:"admin-session",name:"Admin User",firstName:"Admin",email:d,role:"admin"}:{id:"client-session",name:d.split("@")[0],firstName:d.split("@")[0],email:d,role:"client"})},l=async()=>{Ioe(),r(null),await de.auth.signOut()};return s.jsx(NB.Provider,{value:{user:t,isAuthenticated:!!t,isLoading:n,login:o,logout:l},children:e})}function na(){const e=x.useContext(NB);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const lg=$f("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm hover:shadow-md",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",brand:"gradient-brand text-white shadow-sm hover:shadow-md hover:opacity-95",accent:"gradient-primary text-white shadow-sm hover:shadow-md hover:opacity-95"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-12 rounded-lg px-8 text-base",xl:"h-14 rounded-xl px-10 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),K=x.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},i)=>{const o=n?iQ:"button";return s.jsx(o,{className:Re(lg({variant:t,size:r,className:e})),ref:i,...a})});K.displayName="Button";const J=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Re("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));J.displayName="Card";const ke=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Re("flex flex-col space-y-1.5 p-6",e),...t}));ke.displayName="CardHeader";const Ee=x.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:Re("text-2xl font-semibold leading-none tracking-tight",e),...t}));Ee.displayName="CardTitle";const Ge=x.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:Re("text-sm text-muted-foreground",e),...t}));Ge.displayName="CardDescription";const Q=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Re("p-6 pt-0",e),...t}));Q.displayName="CardContent";const $oe=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Re("flex items-center p-6 pt-0",e),...t}));$oe.displayName="CardFooter";const Loe=$f("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ne({className:e,variant:t,...r}){return s.jsx("div",{className:Re(Loe({variant:t}),e),...r})}function cg(e,[t,r]){return Math.min(r,Math.max(t,e))}var Foe=x.createContext(void 0);function Tc(e){const t=x.useContext(Foe);return e||t||"ltr"}var k_=0;function Aw(){x.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??n3()),document.body.insertAdjacentElement("beforeend",e[1]??n3()),k_++,()=>{k_===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),k_--}},[])}function n3(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var E_="focusScope.autoFocusOnMount",T_="focusScope.autoFocusOnUnmount",s3={bubbles:!1,cancelable:!0},Boe="FocusScope",fx=x.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=x.useState(null),d=Zr(a),h=Zr(i),f=x.useRef(null),m=nt(t,v=>c(v)),p=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(n){let v=function(w){if(p.paused||!l)return;const S=w.target;l.contains(S)?f.current=S:Rl(f.current,{select:!0})},b=function(w){if(p.paused||!l)return;const S=w.relatedTarget;S!==null&&(l.contains(S)||Rl(f.current,{select:!0}))},N=function(w){if(document.activeElement===document.body)for(const C of w)C.removedNodes.length>0&&Rl(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",b);const j=new MutationObserver(N);return l&&j.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",b),j.disconnect()}}},[n,l,p.paused]),x.useEffect(()=>{if(l){i3.add(p);const v=document.activeElement;if(!l.contains(v)){const N=new CustomEvent(E_,s3);l.addEventListener(E_,d),l.dispatchEvent(N),N.defaultPrevented||(zoe(qoe(_B(l)),{select:!0}),document.activeElement===v&&Rl(l))}return()=>{l.removeEventListener(E_,d),setTimeout(()=>{const N=new CustomEvent(T_,s3);l.addEventListener(T_,h),l.dispatchEvent(N),N.defaultPrevented||Rl(v??document.body,{select:!0}),l.removeEventListener(T_,h),i3.remove(p)},0)}}},[l,d,h,p]);const y=x.useCallback(v=>{if(!r&&!n||p.paused)return;const b=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,N=document.activeElement;if(b&&N){const j=v.currentTarget,[w,S]=Uoe(j);w&&S?!v.shiftKey&&N===S?(v.preventDefault(),r&&Rl(w,{select:!0})):v.shiftKey&&N===w&&(v.preventDefault(),r&&Rl(S,{select:!0})):N===j&&v.preventDefault()}},[r,n,p.paused]);return s.jsx(ze.div,{tabIndex:-1,...o,ref:m,onKeyDown:y})});fx.displayName=Boe;function zoe(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Rl(n,{select:t}),document.activeElement!==r)return}function Uoe(e){const t=_B(e),r=a3(t,e),n=a3(t.reverse(),e);return[r,n]}function _B(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function a3(e,t){for(const r of e)if(!Woe(r,{upTo:t}))return r}function Woe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Hoe(e){return e instanceof HTMLInputElement&&"select"in e}function Rl(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Hoe(e)&&t&&e.select()}}var i3=Voe();function Voe(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=o3(e,t),e.unshift(t)},remove(t){var r;e=o3(e,t),(r=e[0])==null||r.resume()}}}function o3(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function qoe(e){return e.filter(t=>t.tagName!=="A")}function Ow(e){const t=x.useRef({value:e,previous:e});return x.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Goe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Au=new WeakMap,Tv=new WeakMap,Av={},A_=0,SB=function(e){return e&&(e.host||SB(e.parentNode))},Koe=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=SB(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},Yoe=function(e,t,r,n){var a=Koe(t,Array.isArray(e)?e:[e]);Av[r]||(Av[r]=new WeakMap);var i=Av[r],o=[],l=new Set,c=new Set(a),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};a.forEach(d);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))h(m);else try{var p=m.getAttribute(n),y=p!==null&&p!=="false",v=(Au.get(m)||0)+1,b=(i.get(m)||0)+1;Au.set(m,v),i.set(m,b),o.push(m),v===1&&y&&Tv.set(m,!0),b===1&&m.setAttribute(r,"true"),y||m.setAttribute(n,"true")}catch(N){console.error("aria-hidden: cannot operate on ",m,N)}})};return h(t),l.clear(),A_++,function(){o.forEach(function(f){var m=Au.get(f)-1,p=i.get(f)-1;Au.set(f,m),i.set(f,p),m||(Tv.has(f)||f.removeAttribute(n),Tv.delete(f)),p||f.removeAttribute(r)}),A_--,A_||(Au=new WeakMap,Au=new WeakMap,Tv=new WeakMap,Av={})}},Mw=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=Goe(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live]"))),Yoe(n,a,r,"aria-hidden")):function(){return null}},Ny="right-scroll-bar-position",_y="width-before-scroll-bar",Zoe="with-scroll-bars-hidden",Xoe="--removed-body-scroll-bar-size";function O_(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Joe(e,t){var r=x.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var Qoe=typeof window<"u"?x.useLayoutEffect:x.useEffect,l3=new WeakMap;function ele(e,t){var r=Joe(null,function(n){return e.forEach(function(a){return O_(a,n)})});return Qoe(function(){var n=l3.get(r);if(n){var a=new Set(n),i=new Set(e),o=r.current;a.forEach(function(l){i.has(l)||O_(l,null)}),i.forEach(function(l){a.has(l)||O_(l,o)})}l3.set(r,e)},[e]),r}function tle(e){return e}function rle(e,t){t===void 0&&(t=tle);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var h=o;o=[],h.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(h){o.push(h),d()},filter:function(h){return o=o.filter(h),r}}}};return a}function nle(e){e===void 0&&(e={});var t=rle(null);return t.options=uo({async:!0,ssr:!1},e),t}var CB=function(e){var t=e.sideCar,r=Hf(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return x.createElement(n,uo({},r))};CB.isSideCarExport=!0;function sle(e,t){return e.useMedium(t),CB}var PB=nle(),M_=function(){},Iw=x.forwardRef(function(e,t){var r=x.useRef(null),n=x.useState({onScrollCapture:M_,onWheelCapture:M_,onTouchMoveCapture:M_}),a=n[0],i=n[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,h=e.enabled,f=e.shards,m=e.sideCar,p=e.noRelative,y=e.noIsolation,v=e.inert,b=e.allowPinchZoom,N=e.as,j=N===void 0?"div":N,w=e.gapMode,S=Hf(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=m,P=ele([r,t]),T=uo(uo({},S),a);return x.createElement(x.Fragment,null,h&&x.createElement(C,{sideCar:PB,removeScrollBar:d,shards:f,noRelative:p,noIsolation:y,inert:v,setCallbacks:i,allowPinchZoom:!!b,lockRef:r,gapMode:w}),o?x.cloneElement(x.Children.only(l),uo(uo({},T),{ref:P})):x.createElement(j,uo({},T,{className:c,ref:P}),l))});Iw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Iw.classNames={fullWidth:_y,zeroRight:Ny};var ale=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function ile(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=ale();return t&&e.setAttribute("nonce",t),e}function ole(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function lle(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var cle=function(){var e=0,t=null;return{add:function(r){e==0&&(t=ile())&&(ole(t,r),lle(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},dle=function(){var e=cle();return function(t,r){x.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},kB=function(){var e=dle(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},ule={left:0,top:0,right:0,gap:0},I_=function(e){return parseInt(e||"",10)||0},hle=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[I_(r),I_(n),I_(a)]},fle=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return ule;var t=hle(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},mle=kB(),bh="data-scroll-locked",ple=function(e,t,r,n){var a=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(Zoe,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(bh,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ny,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(_y,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Ny," .").concat(Ny,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(_y," .").concat(_y,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(bh,`] {
    `).concat(Xoe,": ").concat(l,`px;
  }
`)},c3=function(){var e=parseInt(document.body.getAttribute(bh)||"0",10);return isFinite(e)?e:0},gle=function(){x.useEffect(function(){return document.body.setAttribute(bh,(c3()+1).toString()),function(){var e=c3()-1;e<=0?document.body.removeAttribute(bh):document.body.setAttribute(bh,e.toString())}},[])},xle=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;gle();var i=x.useMemo(function(){return fle(a)},[a]);return x.createElement(mle,{styles:ple(i,!t,a,r?"":"!important")})},iC=!1;if(typeof window<"u")try{var Ov=Object.defineProperty({},"passive",{get:function(){return iC=!0,!0}});window.addEventListener("test",Ov,Ov),window.removeEventListener("test",Ov,Ov)}catch{iC=!1}var Ou=iC?{passive:!1}:!1,vle=function(e){return e.tagName==="TEXTAREA"},EB=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!vle(e)&&r[t]==="visible")},yle=function(e){return EB(e,"overflowY")},ble=function(e){return EB(e,"overflowX")},d3=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=TB(e,n);if(a){var i=AB(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},wle=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},jle=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},TB=function(e,t){return e==="v"?yle(t):ble(t)},AB=function(e,t){return e==="v"?wle(t):jle(t)},Nle=function(e,t){return e==="h"&&t==="rtl"?-1:1},_le=function(e,t,r,n,a){var i=Nle(e,window.getComputedStyle(t).direction),o=i*n,l=r.target,c=t.contains(l),d=!1,h=o>0,f=0,m=0;do{if(!l)break;var p=AB(e,l),y=p[0],v=p[1],b=p[2],N=v-b-i*y;(y||N)&&TB(e,l)&&(f+=N,m+=y);var j=l.parentNode;l=j&&j.nodeType===Node.DOCUMENT_FRAGMENT_NODE?j.host:j}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(h&&(Math.abs(f)<1||!a)||!h&&(Math.abs(m)<1||!a))&&(d=!0),d},Mv=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},u3=function(e){return[e.deltaX,e.deltaY]},h3=function(e){return e&&"current"in e?e.current:e},Sle=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Cle=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Ple=0,Mu=[];function kle(e){var t=x.useRef([]),r=x.useRef([0,0]),n=x.useRef(),a=x.useState(Ple++)[0],i=x.useState(kB)[0],o=x.useRef(e);x.useEffect(function(){o.current=e},[e]),x.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var v=Xse([e.lockRef.current],(e.shards||[]).map(h3),!0).filter(Boolean);return v.forEach(function(b){return b.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),v.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=x.useCallback(function(v,b){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var N=Mv(v),j=r.current,w="deltaX"in v?v.deltaX:j[0]-N[0],S="deltaY"in v?v.deltaY:j[1]-N[1],C,P=v.target,T=Math.abs(w)>Math.abs(S)?"h":"v";if("touches"in v&&T==="h"&&P.type==="range")return!1;var O=d3(T,P);if(!O)return!0;if(O?C=T:(C=T==="v"?"h":"v",O=d3(T,P)),!O)return!1;if(!n.current&&"changedTouches"in v&&(w||S)&&(n.current=C),!C)return!0;var E=n.current||C;return _le(E,b,v,E==="h"?w:S,!0)},[]),c=x.useCallback(function(v){var b=v;if(!(!Mu.length||Mu[Mu.length-1]!==i)){var N="deltaY"in b?u3(b):Mv(b),j=t.current.filter(function(C){return C.name===b.type&&(C.target===b.target||b.target===C.shadowParent)&&Sle(C.delta,N)})[0];if(j&&j.should){b.cancelable&&b.preventDefault();return}if(!j){var w=(o.current.shards||[]).map(h3).filter(Boolean).filter(function(C){return C.contains(b.target)}),S=w.length>0?l(b,w[0]):!o.current.noIsolation;S&&b.cancelable&&b.preventDefault()}}},[]),d=x.useCallback(function(v,b,N,j){var w={name:v,delta:b,target:N,should:j,shadowParent:Ele(N)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(S){return S!==w})},1)},[]),h=x.useCallback(function(v){r.current=Mv(v),n.current=void 0},[]),f=x.useCallback(function(v){d(v.type,u3(v),v.target,l(v,e.lockRef.current))},[]),m=x.useCallback(function(v){d(v.type,Mv(v),v.target,l(v,e.lockRef.current))},[]);x.useEffect(function(){return Mu.push(i),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Ou),document.addEventListener("touchmove",c,Ou),document.addEventListener("touchstart",h,Ou),function(){Mu=Mu.filter(function(v){return v!==i}),document.removeEventListener("wheel",c,Ou),document.removeEventListener("touchmove",c,Ou),document.removeEventListener("touchstart",h,Ou)}},[]);var p=e.removeScrollBar,y=e.inert;return x.createElement(x.Fragment,null,y?x.createElement(i,{styles:Cle(a)}):null,p?x.createElement(xle,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Ele(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Tle=sle(PB,kle);var mx=x.forwardRef(function(e,t){return x.createElement(Iw,uo({},e,{ref:t,sideCar:Tle}))});mx.classNames=Iw.classNames;var Ale=[" ","Enter","ArrowUp","ArrowDown"],Ole=[" ","Enter"],Bd="Select",[Rw,Dw,Mle]=Rf(Bd),[qf,pze]=sn(Bd,[Mle,kc]),$w=kc(),[Ile,Ac]=qf(Bd),[Rle,Dle]=qf(Bd),OB=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:h,autoComplete:f,disabled:m,required:p,form:y}=e,v=$w(t),[b,N]=x.useState(null),[j,w]=x.useState(null),[S,C]=x.useState(!1),P=Tc(d),[T,O]=Ln({prop:n,defaultProp:a??!1,onChange:i,caller:Bd}),[E,D]=Ln({prop:o,defaultProp:l,onChange:c,caller:Bd}),I=x.useRef(null),A=b?y||!!b.closest("form"):!0,[V,U]=x.useState(new Set),$=Array.from(V).map(H=>H.props.value).join(";");return s.jsx(bw,{...v,children:s.jsxs(Ile,{required:p,scope:t,trigger:b,onTriggerChange:N,valueNode:j,onValueNodeChange:w,valueNodeHasChildren:S,onValueNodeHasChildrenChange:C,contentId:Qs(),value:E,onValueChange:D,open:T,onOpenChange:O,dir:P,triggerPointerDownPosRef:I,disabled:m,children:[s.jsx(Rw.Provider,{scope:t,children:s.jsx(Rle,{scope:e.__scopeSelect,onNativeOptionAdd:x.useCallback(H=>{U(F=>new Set(F).add(H))},[]),onNativeOptionRemove:x.useCallback(H=>{U(F=>{const R=new Set(F);return R.delete(H),R})},[]),children:r})}),A?s.jsxs(r7,{"aria-hidden":!0,required:p,tabIndex:-1,name:h,autoComplete:f,value:E,onChange:H=>D(H.target.value),disabled:m,form:y,children:[E===void 0?s.jsx("option",{value:""}):null,Array.from(V)]},$):null]})})};OB.displayName=Bd;var MB="SelectTrigger",IB=x.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,i=$w(r),o=Ac(MB,r),l=o.disabled||n,c=nt(t,o.onTriggerChange),d=Dw(r),h=x.useRef("touch"),[f,m,p]=s7(v=>{const b=d().filter(w=>!w.disabled),N=b.find(w=>w.value===o.value),j=a7(b,v,N);j!==void 0&&o.onValueChange(j.value)}),y=v=>{l||(o.onOpenChange(!0),p()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return s.jsx(ux,{asChild:!0,...i,children:s.jsx(ze.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":n7(o.value)?"":void 0,...a,ref:c,onClick:Ie(a.onClick,v=>{v.currentTarget.focus(),h.current!=="mouse"&&y(v)}),onPointerDown:Ie(a.onPointerDown,v=>{h.current=v.pointerType;const b=v.target;b.hasPointerCapture(v.pointerId)&&b.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(y(v),v.preventDefault())}),onKeyDown:Ie(a.onKeyDown,v=>{const b=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(b&&v.key===" ")&&Ale.includes(v.key)&&(y(),v.preventDefault())})})})});IB.displayName=MB;var RB="SelectValue",DB=x.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:o="",...l}=e,c=Ac(RB,r),{onValueNodeHasChildrenChange:d}=c,h=i!==void 0,f=nt(t,c.onValueNodeChange);return Xr(()=>{d(h)},[d,h]),s.jsx(ze.span,{...l,ref:f,style:{pointerEvents:"none"},children:n7(c.value)?s.jsx(s.Fragment,{children:o}):i})});DB.displayName=RB;var $le="SelectIcon",$B=x.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return s.jsx(ze.span,{"aria-hidden":!0,...a,ref:t,children:n||""})});$B.displayName=$le;var Lle="SelectPortal",LB=e=>s.jsx(Df,{asChild:!0,...e});LB.displayName=Lle;var zd="SelectContent",FB=x.forwardRef((e,t)=>{const r=Ac(zd,e.__scopeSelect),[n,a]=x.useState();if(Xr(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?Cc.createPortal(s.jsx(BB,{scope:e.__scopeSelect,children:s.jsx(Rw.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx(zB,{...e,ref:t})});FB.displayName=zd;var _i=10,[BB,Oc]=qf(zd),Fle="SelectContentImpl",Ble=vc("SelectContent.RemoveScroll"),zB=x.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:y,hideWhenDetached:v,avoidCollisions:b,...N}=e,j=Ac(zd,r),[w,S]=x.useState(null),[C,P]=x.useState(null),T=nt(t,ee=>S(ee)),[O,E]=x.useState(null),[D,I]=x.useState(null),A=Dw(r),[V,U]=x.useState(!1),$=x.useRef(!1);x.useEffect(()=>{if(w)return Mw(w)},[w]),Aw();const H=x.useCallback(ee=>{const[re,...ue]=A().map(Y=>Y.ref.current),[Ne]=ue.slice(-1),je=document.activeElement;for(const Y of ee)if(Y===je||(Y==null||Y.scrollIntoView({block:"nearest"}),Y===re&&C&&(C.scrollTop=0),Y===Ne&&C&&(C.scrollTop=C.scrollHeight),Y==null||Y.focus(),document.activeElement!==je))return},[A,C]),F=x.useCallback(()=>H([O,w]),[H,O,w]);x.useEffect(()=>{V&&F()},[V,F]);const{onOpenChange:R,triggerPointerDownPosRef:z}=j;x.useEffect(()=>{if(w){let ee={x:0,y:0};const re=Ne=>{var je,Y;ee={x:Math.abs(Math.round(Ne.pageX)-(((je=z.current)==null?void 0:je.x)??0)),y:Math.abs(Math.round(Ne.pageY)-(((Y=z.current)==null?void 0:Y.y)??0))}},ue=Ne=>{ee.x<=10&&ee.y<=10?Ne.preventDefault():w.contains(Ne.target)||R(!1),document.removeEventListener("pointermove",re),z.current=null};return z.current!==null&&(document.addEventListener("pointermove",re),document.addEventListener("pointerup",ue,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",re),document.removeEventListener("pointerup",ue,{capture:!0})}}},[w,R,z]),x.useEffect(()=>{const ee=()=>R(!1);return window.addEventListener("blur",ee),window.addEventListener("resize",ee),()=>{window.removeEventListener("blur",ee),window.removeEventListener("resize",ee)}},[R]);const[G,ie]=s7(ee=>{const re=A().filter(je=>!je.disabled),ue=re.find(je=>je.ref.current===document.activeElement),Ne=a7(re,ee,ue);Ne&&setTimeout(()=>Ne.ref.current.focus())}),ae=x.useCallback((ee,re,ue)=>{const Ne=!$.current&&!ue;(j.value!==void 0&&j.value===re||Ne)&&(E(ee),Ne&&($.current=!0))},[j.value]),X=x.useCallback(()=>w==null?void 0:w.focus(),[w]),le=x.useCallback((ee,re,ue)=>{const Ne=!$.current&&!ue;(j.value!==void 0&&j.value===re||Ne)&&I(ee)},[j.value]),fe=n==="popper"?oC:UB,ge=fe===oC?{side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:y,hideWhenDetached:v,avoidCollisions:b}:{};return s.jsx(BB,{scope:r,content:w,viewport:C,onViewportChange:P,itemRefCallback:ae,selectedItem:O,onItemLeave:X,itemTextRefCallback:le,focusSelectedItem:F,selectedItemText:D,position:n,isPositioned:V,searchRef:G,children:s.jsx(mx,{as:Ble,allowPinchZoom:!0,children:s.jsx(fx,{asChild:!0,trapped:j.open,onMountAutoFocus:ee=>{ee.preventDefault()},onUnmountAutoFocus:Ie(a,ee=>{var re;(re=j.trigger)==null||re.focus({preventScroll:!0}),ee.preventDefault()}),children:s.jsx(ru,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:ee=>ee.preventDefault(),onDismiss:()=>j.onOpenChange(!1),children:s.jsx(fe,{role:"listbox",id:j.contentId,"data-state":j.open?"open":"closed",dir:j.dir,onContextMenu:ee=>ee.preventDefault(),...N,...ge,onPlaced:()=>U(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...N.style},onKeyDown:Ie(N.onKeyDown,ee=>{const re=ee.ctrlKey||ee.altKey||ee.metaKey;if(ee.key==="Tab"&&ee.preventDefault(),!re&&ee.key.length===1&&ie(ee.key),["ArrowUp","ArrowDown","Home","End"].includes(ee.key)){let Ne=A().filter(je=>!je.disabled).map(je=>je.ref.current);if(["ArrowUp","End"].includes(ee.key)&&(Ne=Ne.slice().reverse()),["ArrowUp","ArrowDown"].includes(ee.key)){const je=ee.target,Y=Ne.indexOf(je);Ne=Ne.slice(Y+1)}setTimeout(()=>H(Ne)),ee.preventDefault()}})})})})})})});zB.displayName=Fle;var zle="SelectItemAlignedPosition",UB=x.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,i=Ac(zd,r),o=Oc(zd,r),[l,c]=x.useState(null),[d,h]=x.useState(null),f=nt(t,T=>h(T)),m=Dw(r),p=x.useRef(!1),y=x.useRef(!0),{viewport:v,selectedItem:b,selectedItemText:N,focusSelectedItem:j}=o,w=x.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&v&&b&&N){const T=i.trigger.getBoundingClientRect(),O=d.getBoundingClientRect(),E=i.valueNode.getBoundingClientRect(),D=N.getBoundingClientRect();if(i.dir!=="rtl"){const je=D.left-O.left,Y=E.left-je,xe=T.left-Y,Me=T.width+xe,$e=Math.max(Me,O.width),ce=window.innerWidth-_i,Le=cg(Y,[_i,Math.max(_i,ce-$e)]);l.style.minWidth=Me+"px",l.style.left=Le+"px"}else{const je=O.right-D.right,Y=window.innerWidth-E.right-je,xe=window.innerWidth-T.right-Y,Me=T.width+xe,$e=Math.max(Me,O.width),ce=window.innerWidth-_i,Le=cg(Y,[_i,Math.max(_i,ce-$e)]);l.style.minWidth=Me+"px",l.style.right=Le+"px"}const I=m(),A=window.innerHeight-_i*2,V=v.scrollHeight,U=window.getComputedStyle(d),$=parseInt(U.borderTopWidth,10),H=parseInt(U.paddingTop,10),F=parseInt(U.borderBottomWidth,10),R=parseInt(U.paddingBottom,10),z=$+H+V+R+F,G=Math.min(b.offsetHeight*5,z),ie=window.getComputedStyle(v),ae=parseInt(ie.paddingTop,10),X=parseInt(ie.paddingBottom,10),le=T.top+T.height/2-_i,fe=A-le,ge=b.offsetHeight/2,ee=b.offsetTop+ge,re=$+H+ee,ue=z-re;if(re<=le){const je=I.length>0&&b===I[I.length-1].ref.current;l.style.bottom="0px";const Y=d.clientHeight-v.offsetTop-v.offsetHeight,xe=Math.max(fe,ge+(je?X:0)+Y+F),Me=re+xe;l.style.height=Me+"px"}else{const je=I.length>0&&b===I[0].ref.current;l.style.top="0px";const xe=Math.max(le,$+v.offsetTop+(je?ae:0)+ge)+ue;l.style.height=xe+"px",v.scrollTop=re-le+v.offsetTop}l.style.margin=`${_i}px 0`,l.style.minHeight=G+"px",l.style.maxHeight=A+"px",n==null||n(),requestAnimationFrame(()=>p.current=!0)}},[m,i.trigger,i.valueNode,l,d,v,b,N,i.dir,n]);Xr(()=>w(),[w]);const[S,C]=x.useState();Xr(()=>{d&&C(window.getComputedStyle(d).zIndex)},[d]);const P=x.useCallback(T=>{T&&y.current===!0&&(w(),j==null||j(),y.current=!1)},[w,j]);return s.jsx(Wle,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:P,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:s.jsx(ze.div,{...a,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});UB.displayName=zle;var Ule="SelectPopperPosition",oC=x.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=_i,...i}=e,o=$w(r);return s.jsx(ww,{...o,...i,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});oC.displayName=Ule;var[Wle,Xk]=qf(zd,{}),lC="SelectViewport",WB=x.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,i=Oc(lC,r),o=Xk(lC,r),l=nt(t,i.onViewportChange),c=x.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(Rw.Slot,{scope:r,children:s.jsx(ze.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Ie(a.onScroll,d=>{const h=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&f){const p=Math.abs(c.current-h.scrollTop);if(p>0){const y=window.innerHeight-_i*2,v=parseFloat(f.style.minHeight),b=parseFloat(f.style.height),N=Math.max(v,b);if(N<y){const j=N+p,w=Math.min(y,j),S=j-w;f.style.height=w+"px",f.style.bottom==="0px"&&(h.scrollTop=S>0?S:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});WB.displayName=lC;var HB="SelectGroup",[Hle,Vle]=qf(HB),qle=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Qs();return s.jsx(Hle,{scope:r,id:a,children:s.jsx(ze.div,{role:"group","aria-labelledby":a,...n,ref:t})})});qle.displayName=HB;var VB="SelectLabel",qB=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Vle(VB,r);return s.jsx(ze.div,{id:a.id,...n,ref:t})});qB.displayName=VB;var S0="SelectItem",[Gle,GB]=qf(S0),KB=x.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...o}=e,l=Ac(S0,r),c=Oc(S0,r),d=l.value===n,[h,f]=x.useState(i??""),[m,p]=x.useState(!1),y=nt(t,j=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,j,n,a)}),v=Qs(),b=x.useRef("touch"),N=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(Gle,{scope:r,value:n,disabled:a,textId:v,isSelected:d,onItemTextChange:x.useCallback(j=>{f(w=>w||((j==null?void 0:j.textContent)??"").trim())},[]),children:s.jsx(Rw.ItemSlot,{scope:r,value:n,disabled:a,textValue:h,children:s.jsx(ze.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:y,onFocus:Ie(o.onFocus,()=>p(!0)),onBlur:Ie(o.onBlur,()=>p(!1)),onClick:Ie(o.onClick,()=>{b.current!=="mouse"&&N()}),onPointerUp:Ie(o.onPointerUp,()=>{b.current==="mouse"&&N()}),onPointerDown:Ie(o.onPointerDown,j=>{b.current=j.pointerType}),onPointerMove:Ie(o.onPointerMove,j=>{var w;b.current=j.pointerType,a?(w=c.onItemLeave)==null||w.call(c):b.current==="mouse"&&j.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ie(o.onPointerLeave,j=>{var w;j.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:Ie(o.onKeyDown,j=>{var S;((S=c.searchRef)==null?void 0:S.current)!==""&&j.key===" "||(Ole.includes(j.key)&&N(),j.key===" "&&j.preventDefault())})})})})});KB.displayName=S0;var tp="SelectItemText",YB=x.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...i}=e,o=Ac(tp,r),l=Oc(tp,r),c=GB(tp,r),d=Dle(tp,r),[h,f]=x.useState(null),m=nt(t,N=>f(N),c.onItemTextChange,N=>{var j;return(j=l.itemTextRefCallback)==null?void 0:j.call(l,N,c.value,c.disabled)}),p=h==null?void 0:h.textContent,y=x.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:v,onNativeOptionRemove:b}=d;return Xr(()=>(v(y),()=>b(y)),[v,b,y]),s.jsxs(s.Fragment,{children:[s.jsx(ze.span,{id:c.textId,...i,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Cc.createPortal(i.children,o.valueNode):null]})});YB.displayName=tp;var ZB="SelectItemIndicator",XB=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return GB(ZB,r).isSelected?s.jsx(ze.span,{"aria-hidden":!0,...n,ref:t}):null});XB.displayName=ZB;var cC="SelectScrollUpButton",JB=x.forwardRef((e,t)=>{const r=Oc(cC,e.__scopeSelect),n=Xk(cC,e.__scopeSelect),[a,i]=x.useState(!1),o=nt(t,n.onScrollButtonChange);return Xr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(e7,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});JB.displayName=cC;var dC="SelectScrollDownButton",QB=x.forwardRef((e,t)=>{const r=Oc(dC,e.__scopeSelect),n=Xk(dC,e.__scopeSelect),[a,i]=x.useState(!1),o=nt(t,n.onScrollButtonChange);return Xr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<d;i(h)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(e7,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});QB.displayName=dC;var e7=x.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,i=Oc("SelectScrollButton",r),o=x.useRef(null),l=Dw(r),c=x.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return x.useEffect(()=>()=>c(),[c]),Xr(()=>{var h;const d=l().find(f=>f.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),s.jsx(ze.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Ie(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:Ie(a.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:Ie(a.onPointerLeave,()=>{c()})})}),Kle="SelectSeparator",t7=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return s.jsx(ze.div,{"aria-hidden":!0,...n,ref:t})});t7.displayName=Kle;var uC="SelectArrow",Yle=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=$w(r),i=Ac(uC,r),o=Oc(uC,r);return i.open&&o.position==="popper"?s.jsx(jw,{...a,...n,ref:t}):null});Yle.displayName=uC;var Zle="SelectBubbleInput",r7=x.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const a=x.useRef(null),i=nt(n,a),o=Ow(t);return x.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&h){const f=new Event("change",{bubbles:!0});h.call(l,t),l.dispatchEvent(f)}},[o,t]),s.jsx(ze.select,{...r,style:{...TF,...r.style},ref:i,defaultValue:t})});r7.displayName=Zle;function n7(e){return e===""||e===void 0}function s7(e){const t=Zr(e),r=x.useRef(""),n=x.useRef(0),a=x.useCallback(o=>{const l=r.current+o;t(l),function c(d){r.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=x.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function a7(e,t,r){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=Xle(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function Xle(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var Jle=OB,i7=IB,Qle=DB,ece=$B,tce=LB,o7=FB,rce=WB,l7=qB,c7=KB,nce=YB,sce=XB,d7=JB,u7=QB,h7=t7;const Xt=Jle,Jt=Qle,qt=x.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(i7,{ref:n,className:Re("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(ece,{asChild:!0,children:s.jsx(Lf,{className:"h-4 w-4 opacity-50"})})]}));qt.displayName=i7.displayName;const f7=x.forwardRef(({className:e,...t},r)=>s.jsx(d7,{ref:r,className:Re("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(jk,{className:"h-4 w-4"})}));f7.displayName=d7.displayName;const m7=x.forwardRef(({className:e,...t},r)=>s.jsx(u7,{ref:r,className:Re("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Lf,{className:"h-4 w-4"})}));m7.displayName=u7.displayName;const Gt=x.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>s.jsx(tce,{children:s.jsxs(o7,{ref:a,className:Re("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[s.jsx(f7,{}),s.jsx(rce,{className:Re("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(m7,{})]})}));Gt.displayName=o7.displayName;const ace=x.forwardRef(({className:e,...t},r)=>s.jsx(l7,{ref:r,className:Re("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));ace.displayName=l7.displayName;const _e=x.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(c7,{ref:n,className:Re("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(sce,{children:s.jsx(tn,{className:"h-4 w-4"})})}),s.jsx(nce,{children:t})]}));_e.displayName=c7.displayName;const ice=x.forwardRef(({className:e,...t},r)=>s.jsx(h7,{ref:r,className:Re("-mx-1 my-1 h-px bg-muted",e),...t}));ice.displayName=h7.displayName;const f3="psadirect.ca",m3={liveAuthEnabled:!1,devRole:null},So=()=>{if(typeof window>"u")return!1;const e=window.location.hostname.toLowerCase();return e===f3||e===`www.${f3}`},oce=()=>{So()&&(["pswdirect_dev_config","stripe_dry_run","devMode","showDebugMenu","isDebug","dev_mode"].forEach(t=>localStorage.removeItem(t)),console.log(" Production mode: Dev keys cleared"))},jc=()=>{if(So())return{liveAuthEnabled:!0,devRole:null};const e=localStorage.getItem("pswdirect_dev_config");if(e)try{return JSON.parse(e)}catch{return m3}return m3},p7=e=>{if(So())return console.warn(" Dev config changes blocked on production"),jc();const r={...jc(),...e};return localStorage.setItem("pswdirect_dev_config",JSON.stringify(r)),r},lce=e=>So()?{liveAuthEnabled:!0,devRole:null}:p7({liveAuthEnabled:e}),R_=e=>So()?{liveAuthEnabled:!0,devRole:null}:p7({devRole:e}),cce=e=>{const t=["psw-1"],r=["sarah.johnson@pswdirect.ca"],n=e.filter(a=>!t.includes(a.id)&&!r.includes(a.email));return n.length!==e.length&&localStorage.setItem("pswdirect_psw_profiles",JSON.stringify(n)),n},Gf=()=>{const e=localStorage.getItem("pswdirect_psw_profiles");if(e)try{const t=JSON.parse(e);return cce(t)}catch{return[]}return v7()},g7=e=>{localStorage.setItem("pswdirect_psw_profiles",JSON.stringify(e))},Ma=e=>Gf().find(r=>r.id===e)||null,hi=e=>{const t=Gf(),r=t.findIndex(n=>n.id===e.id);r>=0?t[r]=e:t.push(e),g7(t)},Jk=(e,t,r)=>{const n=Ma(e);if(!n)return null;const a={...n,vettingStatus:t,vettingUpdatedAt:new Date().toISOString(),vettingNotes:r,approvedAt:t==="approved"?new Date().toISOString():n.approvedAt};return hi(a),a},dce=(e,t,r)=>{const n=Ma(e);if(!n)return null;const a={...n,homePostalCode:t,homeCity:r};return hi(a),a},uce=(e,t)=>{const r=Ma(e);if(!r)return null;const n={...r,gender:t};return hi(n),n},hce=()=>Gf().filter(t=>t.vettingStatus==="approved"),fce=()=>Gf().filter(t=>t.vettingStatus==="pending"),x7=e=>{if(!e.policeCheckDate)return!1;const t=new Date;return t.setFullYear(t.getFullYear()-1),new Date(e.policeCheckDate)<t},mce=e=>{if(!e.policeCheckDate)return null;const t=new Date(e.policeCheckDate);t.setFullYear(t.getFullYear()+1);const r=new Date,n=t.getTime()-r.getTime();return Math.ceil(n/(1e3*60*60*24))},pce=()=>{Gf().forEach(t=>{if(t.vettingStatus==="approved"&&x7(t)){const r=t.policeCheckDate?new Date(t.policeCheckDate).toLocaleDateString():"unknown";Jk(t.id,"pending",`Police check expired (issued ${r}). PSW must upload a new police clearance check to continue working.`);const n=Ma(t.id);n&&hi({...n,expiredDueToPoliceCheck:!0})}})},gce=(e,t,r,n)=>{const a=Ma(e);if(!a)return null;const i=new Date(n).toLocaleDateString(),o={...a,policeCheckUrl:t,policeCheckName:r,policeCheckDate:n,vettingStatus:"pending",vettingUpdatedAt:new Date().toISOString(),vettingNotes:`Police check updated by PSW on ${new Date().toLocaleDateString()} (Check dated: ${i}). Requires admin review and approval.`,approvedAt:void 0,expiredDueToPoliceCheck:!1};return hi(o),o},xce=(e,t,r)=>{const n=Ma(e);if(!n)return null;const a={...n,homePostalCode:t,homeCity:r,vettingStatus:"pending",vettingUpdatedAt:new Date().toISOString(),vettingNotes:`Address updated by PSW on ${new Date().toLocaleDateString()}. Requires re-verification of service area.`,approvedAt:void 0};return hi(a),a},p3=(e,t,r,n,a,i)=>{const o=Ma(e);if(!o)return null;const l={...o,hasOwnTransport:t,licensePlate:t==="yes-car"?r:void 0,vehicleDisclaimer:n||o.vehicleDisclaimer,vehiclePhotoUrl:t==="yes-car"?a:void 0,vehiclePhotoName:t==="yes-car"?i:void 0};return hi(l),l},vce=(e,t,r)=>{const n=Ma(e);if(!n)return null;const a={...n,phone:t,email:r};return hi(a),a},yce=(e,t)=>{const r=Ma(e);if(!r)return null;const n={...r,languages:t};return hi(n),n},bce=(e,t)=>{const r=Ma(e);if(!r)return null;const n={...r,certifications:t};return hi(n),n},wce=(e,t,r)=>{const n=Ma(e);if(!n)return null;const a={...n,profilePhotoUrl:t,profilePhotoName:r};return hi(a),a},D_=e=>new Promise((t,r)=>{const n=new FileReader;n.onloadend=()=>t(n.result),n.onerror=r,n.readAsDataURL(e)}),v7=()=>{const e=[{id:"psw-test-001",firstName:"Test",lastName:"PSW",email:"test.psw@pswdirect.ca",phone:"(416) 555-9999",hscpoaNumber:"HSCPOA-2024-TEST1",homePostalCode:"M5V 1J9",homeCity:"Toronto",gender:"female",languages:["en"],vettingStatus:"approved",appliedAt:"2024-01-01T10:00:00Z",approvedAt:"2024-01-15T09:00:00Z",yearsExperience:"3-5",certifications:"PSW Certificate, First Aid, CPR",hasOwnTransport:"yes-car",availableShifts:"flexible"},{id:"PSW001",firstName:"Jennifer",lastName:"Morrison",email:"jennifer.m@pswstaff.com",phone:"(416) 555-1001",hscpoaNumber:"HSCPOA-2024-78234",homePostalCode:"M4S 2B8",homeCity:"Toronto",gender:"female",languages:["en","fr"],vettingStatus:"approved",appliedAt:"2024-06-01T10:00:00Z",approvedAt:"2024-06-15T14:30:00Z",yearsExperience:"3-5",certifications:"PSW Certificate, First Aid, CPR",hasOwnTransport:"yes-car",availableShifts:"flexible"},{id:"PSW002",firstName:"Amanda",lastName:"Liu",email:"amanda.l@pswstaff.com",phone:"(416) 555-1002",hscpoaNumber:"HSCPOA-2024-91456",homePostalCode:"M2N 5Y7",homeCity:"North York",gender:"female",languages:["en","zh","zh-yue"],vettingStatus:"approved",appliedAt:"2024-07-20T09:00:00Z",approvedAt:"2024-08-01T11:00:00Z",yearsExperience:"1-3",certifications:"PSW Certificate, Dementia Care Training",hasOwnTransport:"yes-transit",availableShifts:"weekdays"},{id:"PSW003",firstName:"Patricia",lastName:"Kim",email:"patricia.k@pswstaff.com",phone:"(416) 555-1003",hscpoaNumber:"HSCPOA-2024-65789",homePostalCode:"M1P 4N5",homeCity:"Scarborough",gender:"female",languages:["en","ko"],vettingStatus:"approved",appliedAt:"2024-09-01T08:00:00Z",approvedAt:"2024-09-20T16:00:00Z",yearsExperience:"1-3",certifications:"PSW Certificate",hasOwnTransport:"no",availableShifts:"weekends"},{id:"PSW004",firstName:"Maria",lastName:"Santos",email:"maria.s@pswstaff.com",phone:"(416) 555-1004",hscpoaNumber:"HSCPOA-2024-32145",homePostalCode:"L4C 3G5",homeCity:"Richmond Hill",gender:"female",languages:["en","pt","es"],vettingStatus:"rejected",vettingNotes:"Failed background check",appliedAt:"2024-09-25T07:00:00Z",yearsExperience:"0-1",hasOwnTransport:"no"},{id:"PSW005",firstName:"David",lastName:"Thompson",email:"david.t@pswstaff.com",phone:"(416) 555-1005",hscpoaNumber:"HSCPOA-2024-11234",homePostalCode:"K8N 4Z5",homeCity:"Belleville",gender:"male",languages:["en"],vettingStatus:"approved",appliedAt:"2024-02-10T10:00:00Z",approvedAt:"2024-03-10T09:00:00Z",yearsExperience:"5+",certifications:"PSW Certificate, First Aid, CPR, Palliative Care",hasOwnTransport:"yes-car",availableShifts:"flexible"},{id:"PSW-PENDING-001",firstName:"James",lastName:"Wilson",email:"james.w@email.com",phone:"(416) 555-1006",homePostalCode:"M6H 2N9",homeCity:"Toronto",gender:"male",languages:["en","pa"],vettingStatus:"pending",appliedAt:new Date().toISOString(),yearsExperience:"1-3",certifications:"PSW Certificate",hasOwnTransport:"yes-car"}];return g7(e),e},Qk=()=>{localStorage.getItem("pswdirect_psw_profiles")||v7()},g3=[{id:"admin",label:"Admin",icon:mr,path:"/admin",color:"bg-purple-500 hover:bg-purple-600"},{id:"psw",label:"Vetted PSW",icon:_k,path:"/psw",color:"bg-emerald-500 hover:bg-emerald-600"},{id:"client",label:"Guest Client",icon:$t,path:"/",color:"bg-blue-500 hover:bg-blue-600"}],jce=()=>{var N;const[e,t]=x.useState(!1),[r,n]=x.useState(!1),[a,i]=x.useState(null),[o,l]=x.useState([]),[c,d]=x.useState([]),{login:h,logout:f,user:m}=na(),p=ps();x.useEffect(()=>{const j=window.location.hostname.toLowerCase();if(j==="psadirect.ca"||j==="www.psadirect.ca"){n(!1);return}const S=jc();n(!S.liveAuthEnabled),i(S.devRole),l(hce()),d(fce())},[]),x.useEffect(()=>{const j=window.location.hostname.toLowerCase();if(j==="psadirect.ca"||j==="www.psadirect.ca")return;const C=setInterval(()=>{const P=jc();n(!P.liveAuthEnabled),i(P.devRole)},1e3);return()=>clearInterval(C)},[]);const y=j=>{R_(j.id),i(j.id);const w={admin:"admin@pswdirect.ca",psw:"test.psw@pswdirect.ca",client:"guest@example.com"};h(j.id,w[j.id]),p(j.path),t(!1)},v=(j,w)=>{const S=w?c.find(C=>C.id===j):o.find(C=>C.id===j);S&&(R_("psw"),i("psw"),h("psw",S.email),p(w?"/psw-pending":"/psw"),t(!1))},b=()=>{R_(null),i(null),f(),p("/")};return r?s.jsx("div",{className:"fixed bottom-20 right-4 z-[100] lg:bottom-4",children:e?s.jsxs(J,{className:"w-64 shadow-elevated border-amber-200 bg-background/95 backdrop-blur-sm",children:[s.jsxs(ke,{className:"pb-2 flex flex-row items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(h0,{className:"w-4 h-4 text-amber-500"}),s.jsx(Ee,{className:"text-sm font-semibold",children:"Dev Menu"})]}),s.jsx("div",{className:"flex items-center gap-1",children:s.jsx(K,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>t(!1),children:s.jsx(Lf,{className:"w-4 h-4"})})})]}),s.jsxs(Q,{className:"space-y-3 pt-0",children:[a&&s.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded-lg",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"Active:"}),s.jsx(ne,{variant:"secondary",className:"text-xs",children:(N=g3.find(j=>j.id===a))==null?void 0:N.label})]}),s.jsx("div",{className:"space-y-2",children:g3.filter(j=>j.id!=="psw").map(j=>{const w=j.icon,S=a===j.id;return s.jsxs(K,{onClick:()=>y(j),className:Re("w-full justify-start gap-2 text-white",j.color,S&&"ring-2 ring-offset-2 ring-offset-background ring-white/50"),size:"sm",children:[s.jsx(w,{className:"w-4 h-4"}),j.label,S&&s.jsx("span",{className:"ml-auto text-xs opacity-80",children:""})]},j.id)})}),s.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Login as PSW:"}),o.length>0&&s.jsxs(Xt,{onValueChange:j=>v(j,!1),children:[s.jsx(qt,{className:"w-full h-8 text-xs bg-emerald-50 border-emerald-200",children:s.jsx(Jt,{placeholder:"Approved PSW..."})}),s.jsx(Gt,{children:o.map(j=>s.jsxs(_e,{value:j.id,className:"text-xs",children:[j.firstName," ",j.lastName]},j.id))})]}),c.length>0&&s.jsxs(Xt,{onValueChange:j=>v(j,!0),children:[s.jsx(qt,{className:"w-full h-8 text-xs bg-amber-50 border-amber-200",children:s.jsx(Jt,{placeholder:"Pending PSW..."})}),s.jsx(Gt,{children:c.map(j=>s.jsxs(_e,{value:j.id,className:"text-xs",children:[j.firstName," ",j.lastName," (pending)"]},j.id))})]})]}),a&&s.jsxs(K,{variant:"outline",size:"sm",className:"w-full text-muted-foreground",onClick:b,children:[s.jsx(Hr,{className:"w-3 h-3 mr-1"}),"Clear & Return Home"]}),s.jsx("p",{className:"text-[10px] text-muted-foreground text-center pt-2 border-t",children:"Live Auth is OFF. Enable in Admin Panel."})]})]}):s.jsx(K,{onClick:()=>t(!0),className:"rounded-full w-12 h-12 shadow-lg bg-amber-500 hover:bg-amber-600 text-white",size:"icon",children:s.jsx(h0,{className:"w-5 h-5"})})}):null};var Lw="Dialog",[y7,b7]=sn(Lw),[Nce,Ki]=y7(Lw),w7=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=x.useRef(null),c=x.useRef(null),[d,h]=Ln({prop:n,defaultProp:a??!1,onChange:i,caller:Lw});return s.jsx(Nce,{scope:t,triggerRef:l,contentRef:c,contentId:Qs(),titleId:Qs(),descriptionId:Qs(),open:d,onOpenChange:h,onOpenToggle:x.useCallback(()=>h(f=>!f),[h]),modal:o,children:r})};w7.displayName=Lw;var j7="DialogTrigger",N7=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Ki(j7,r),i=nt(t,a.triggerRef);return s.jsx(ze.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":rE(a.open),...n,ref:i,onClick:Ie(e.onClick,a.onOpenToggle)})});N7.displayName=j7;var eE="DialogPortal",[_ce,_7]=y7(eE,{forceMount:void 0}),S7=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,i=Ki(eE,t);return s.jsx(_ce,{scope:t,forceMount:r,children:x.Children.map(n,o=>s.jsx(kn,{present:r||i.open,children:s.jsx(Df,{asChild:!0,container:a,children:o})}))})};S7.displayName=eE;var C0="DialogOverlay",C7=x.forwardRef((e,t)=>{const r=_7(C0,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=Ki(C0,e.__scopeDialog);return i.modal?s.jsx(kn,{present:n||i.open,children:s.jsx(Cce,{...a,ref:t})}):null});C7.displayName=C0;var Sce=vc("DialogOverlay.RemoveScroll"),Cce=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Ki(C0,r);return s.jsx(mx,{as:Sce,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(ze.div,{"data-state":rE(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Ud="DialogContent",P7=x.forwardRef((e,t)=>{const r=_7(Ud,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=Ki(Ud,e.__scopeDialog);return s.jsx(kn,{present:n||i.open,children:i.modal?s.jsx(Pce,{...a,ref:t}):s.jsx(kce,{...a,ref:t})})});P7.displayName=Ud;var Pce=x.forwardRef((e,t)=>{const r=Ki(Ud,e.__scopeDialog),n=x.useRef(null),a=nt(t,r.contentRef,n);return x.useEffect(()=>{const i=n.current;if(i)return Mw(i)},[]),s.jsx(k7,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ie(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ie(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:Ie(e.onFocusOutside,i=>i.preventDefault())})}),kce=x.forwardRef((e,t)=>{const r=Ki(Ud,e.__scopeDialog),n=x.useRef(!1),a=x.useRef(!1);return s.jsx(k7,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),k7=x.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=Ki(Ud,r),c=x.useRef(null),d=nt(t,c);return Aw(),s.jsxs(s.Fragment,{children:[s.jsx(fx,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(ru,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":rE(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(Tce,{titleId:l.titleId}),s.jsx(Oce,{contentRef:c,descriptionId:l.descriptionId})]})]})}),tE="DialogTitle",E7=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Ki(tE,r);return s.jsx(ze.h2,{id:a.titleId,...n,ref:t})});E7.displayName=tE;var T7="DialogDescription",A7=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Ki(T7,r);return s.jsx(ze.p,{id:a.descriptionId,...n,ref:t})});A7.displayName=T7;var O7="DialogClose",M7=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Ki(O7,r);return s.jsx(ze.button,{type:"button",...n,ref:t,onClick:Ie(e.onClick,()=>a.onOpenChange(!1))})});M7.displayName=O7;function rE(e){return e?"open":"closed"}var I7="DialogTitleWarning",[Ece,R7]=sQ(I7,{contentName:Ud,titleName:tE,docsSlug:"dialog"}),Tce=({titleId:e})=>{const t=R7(I7),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return x.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},Ace="DialogDescriptionWarning",Oce=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${R7(Ace).contentName}}.`;return x.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},D7=w7,$7=N7,L7=S7,nE=C7,sE=P7,aE=E7,iE=A7,Fw=M7;const hr=D7,oE=$7,Mce=L7,Ice=Fw,F7=x.forwardRef(({className:e,...t},r)=>s.jsx(nE,{ref:r,className:Re("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));F7.displayName=nE.displayName;const or=x.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(Mce,{children:[s.jsx(F7,{}),s.jsxs(sE,{ref:n,className:Re("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,s.jsxs(Fw,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[s.jsx(Hr,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));or.displayName=sE.displayName;const lr=({className:e,...t})=>s.jsx("div",{className:Re("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});lr.displayName="DialogHeader";const yo=({className:e,...t})=>s.jsx("div",{className:Re("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});yo.displayName="DialogFooter";const cr=x.forwardRef(({className:e,...t},r)=>s.jsx(aE,{ref:r,className:Re("text-lg font-semibold leading-none tracking-tight",e),...t}));cr.displayName=aE.displayName;const bo=x.forwardRef(({className:e,...t},r)=>s.jsx(iE,{ref:r,className:Re("text-sm text-muted-foreground",e),...t}));bo.displayName=iE.displayName;function Rce(e,t){return x.useReducer((r,n)=>t[r][n]??r,e)}var lE="ScrollArea",[B7,gze]=sn(lE),[Dce,fi]=B7(lE),z7=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:a,scrollHideDelay:i=600,...o}=e,[l,c]=x.useState(null),[d,h]=x.useState(null),[f,m]=x.useState(null),[p,y]=x.useState(null),[v,b]=x.useState(null),[N,j]=x.useState(0),[w,S]=x.useState(0),[C,P]=x.useState(!1),[T,O]=x.useState(!1),E=nt(t,I=>c(I)),D=Tc(a);return s.jsx(Dce,{scope:r,type:n,dir:D,scrollHideDelay:i,scrollArea:l,viewport:d,onViewportChange:h,content:f,onContentChange:m,scrollbarX:p,onScrollbarXChange:y,scrollbarXEnabled:C,onScrollbarXEnabledChange:P,scrollbarY:v,onScrollbarYChange:b,scrollbarYEnabled:T,onScrollbarYEnabledChange:O,onCornerWidthChange:j,onCornerHeightChange:S,children:s.jsx(ze.div,{dir:D,...o,ref:E,style:{position:"relative","--radix-scroll-area-corner-width":N+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});z7.displayName=lE;var U7="ScrollAreaViewport",W7=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:a,...i}=e,o=fi(U7,r),l=x.useRef(null),c=nt(t,l,o.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),s.jsx(ze.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:s.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});W7.displayName=U7;var To="ScrollAreaScrollbar",cE=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=fi(To,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,l=e.orientation==="horizontal";return x.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),a.type==="hover"?s.jsx($ce,{...n,ref:t,forceMount:r}):a.type==="scroll"?s.jsx(Lce,{...n,ref:t,forceMount:r}):a.type==="auto"?s.jsx(H7,{...n,ref:t,forceMount:r}):a.type==="always"?s.jsx(dE,{...n,ref:t}):null});cE.displayName=To;var $ce=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=fi(To,e.__scopeScrollArea),[i,o]=x.useState(!1);return x.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),o(!0)},h=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",h)}}},[a.scrollArea,a.scrollHideDelay]),s.jsx(kn,{present:r||i,children:s.jsx(H7,{"data-state":i?"visible":"hidden",...n,ref:t})})}),Lce=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=fi(To,e.__scopeScrollArea),i=e.orientation==="horizontal",o=zw(()=>c("SCROLL_END"),100),[l,c]=Rce("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return x.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,a.scrollHideDelay,c]),x.useEffect(()=>{const d=a.viewport,h=i?"scrollLeft":"scrollTop";if(d){let f=d[h];const m=()=>{const p=d[h];f!==p&&(c("SCROLL"),o()),f=p};return d.addEventListener("scroll",m),()=>d.removeEventListener("scroll",m)}},[a.viewport,i,c,o]),s.jsx(kn,{present:r||l!=="hidden",children:s.jsx(dE,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:Ie(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Ie(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),H7=x.forwardRef((e,t)=>{const r=fi(To,e.__scopeScrollArea),{forceMount:n,...a}=e,[i,o]=x.useState(!1),l=e.orientation==="horizontal",c=zw(()=>{if(r.viewport){const d=r.viewport.offsetWidth<r.viewport.scrollWidth,h=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?d:h)}},10);return Zh(r.viewport,c),Zh(r.content,c),s.jsx(kn,{present:n||i,children:s.jsx(dE,{"data-state":i?"visible":"hidden",...a,ref:t})})}),dE=x.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,a=fi(To,e.__scopeScrollArea),i=x.useRef(null),o=x.useRef(0),[l,c]=x.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=Y7(l.viewport,l.content),h={...n,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function f(m,p){return Hce(m,o.current,l,p)}return r==="horizontal"?s.jsx(Fce,{...h,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollLeft,p=x3(m,l,a.dir);i.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=f(m,a.dir))}}):r==="vertical"?s.jsx(Bce,{...h,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollTop,p=x3(m,l);i.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=f(m))}}):null}),Fce=x.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,i=fi(To,e.__scopeScrollArea),[o,l]=x.useState(),c=x.useRef(null),d=nt(t,c,i.onScrollbarXChange);return x.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(q7,{"data-orientation":"horizontal",...a,ref:d,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Bw(r)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.x),onDragScroll:h=>e.onDragScroll(h.x),onWheelScroll:(h,f)=>{if(i.viewport){const m=i.viewport.scrollLeft+h.deltaX;e.onWheelScroll(m),X7(m,f)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:k0(o.paddingLeft),paddingEnd:k0(o.paddingRight)}})}})}),Bce=x.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,i=fi(To,e.__scopeScrollArea),[o,l]=x.useState(),c=x.useRef(null),d=nt(t,c,i.onScrollbarYChange);return x.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(q7,{"data-orientation":"vertical",...a,ref:d,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Bw(r)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.y),onDragScroll:h=>e.onDragScroll(h.y),onWheelScroll:(h,f)=>{if(i.viewport){const m=i.viewport.scrollTop+h.deltaY;e.onWheelScroll(m),X7(m,f)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:k0(o.paddingTop),paddingEnd:k0(o.paddingBottom)}})}})}),[zce,V7]=B7(To),q7=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:h,onResize:f,...m}=e,p=fi(To,r),[y,v]=x.useState(null),b=nt(t,E=>v(E)),N=x.useRef(null),j=x.useRef(""),w=p.viewport,S=n.content-n.viewport,C=Zr(h),P=Zr(c),T=zw(f,10);function O(E){if(N.current){const D=E.clientX-N.current.left,I=E.clientY-N.current.top;d({x:D,y:I})}}return x.useEffect(()=>{const E=D=>{const I=D.target;(y==null?void 0:y.contains(I))&&C(D,S)};return document.addEventListener("wheel",E,{passive:!1}),()=>document.removeEventListener("wheel",E,{passive:!1})},[w,y,S,C]),x.useEffect(P,[n,P]),Zh(y,T),Zh(p.content,T),s.jsx(zce,{scope:r,scrollbar:y,hasThumb:a,onThumbChange:Zr(i),onThumbPointerUp:Zr(o),onThumbPositionChange:P,onThumbPointerDown:Zr(l),children:s.jsx(ze.div,{...m,ref:b,style:{position:"absolute",...m.style},onPointerDown:Ie(e.onPointerDown,E=>{E.button===0&&(E.target.setPointerCapture(E.pointerId),N.current=y.getBoundingClientRect(),j.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),O(E))}),onPointerMove:Ie(e.onPointerMove,O),onPointerUp:Ie(e.onPointerUp,E=>{const D=E.target;D.hasPointerCapture(E.pointerId)&&D.releasePointerCapture(E.pointerId),document.body.style.webkitUserSelect=j.current,p.viewport&&(p.viewport.style.scrollBehavior=""),N.current=null})})})}),P0="ScrollAreaThumb",G7=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=V7(P0,e.__scopeScrollArea);return s.jsx(kn,{present:r||a.hasThumb,children:s.jsx(Uce,{ref:t,...n})})}),Uce=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...a}=e,i=fi(P0,r),o=V7(P0,r),{onThumbPositionChange:l}=o,c=nt(t,f=>o.onThumbChange(f)),d=x.useRef(void 0),h=zw(()=>{d.current&&(d.current(),d.current=void 0)},100);return x.useEffect(()=>{const f=i.viewport;if(f){const m=()=>{if(h(),!d.current){const p=Vce(f,l);d.current=p,l()}};return l(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[i.viewport,h,l]),s.jsx(ze.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:Ie(e.onPointerDownCapture,f=>{const p=f.target.getBoundingClientRect(),y=f.clientX-p.left,v=f.clientY-p.top;o.onThumbPointerDown({x:y,y:v})}),onPointerUp:Ie(e.onPointerUp,o.onThumbPointerUp)})});G7.displayName=P0;var uE="ScrollAreaCorner",K7=x.forwardRef((e,t)=>{const r=fi(uE,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?s.jsx(Wce,{...e,ref:t}):null});K7.displayName=uE;var Wce=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,a=fi(uE,r),[i,o]=x.useState(0),[l,c]=x.useState(0),d=!!(i&&l);return Zh(a.scrollbarX,()=>{var f;const h=((f=a.scrollbarX)==null?void 0:f.offsetHeight)||0;a.onCornerHeightChange(h),c(h)}),Zh(a.scrollbarY,()=>{var f;const h=((f=a.scrollbarY)==null?void 0:f.offsetWidth)||0;a.onCornerWidthChange(h),o(h)}),d?s.jsx(ze.div,{...n,ref:t,style:{width:i,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function k0(e){return e?parseInt(e,10):0}function Y7(e,t){const r=e/t;return isNaN(r)?0:r}function Bw(e){const t=Y7(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function Hce(e,t,r,n="ltr"){const a=Bw(r),i=a/2,o=t||i,l=a-o,c=r.scrollbar.paddingStart+o,d=r.scrollbar.size-r.scrollbar.paddingEnd-l,h=r.content-r.viewport,f=n==="ltr"?[0,h]:[h*-1,0];return Z7([c,d],f)(e)}function x3(e,t,r="ltr"){const n=Bw(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,l=i-n,c=r==="ltr"?[0,o]:[o*-1,0],d=cg(e,c);return Z7([0,o],[0,l])(d)}function Z7(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function X7(e,t){return e>0&&e<t}var Vce=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=r.left!==i.left,l=r.top!==i.top;(o||l)&&t(),r=i,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function zw(e,t){const r=Zr(e),n=x.useRef(0);return x.useEffect(()=>()=>window.clearTimeout(n.current),[]),x.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function Zh(e,t){const r=Zr(t);Xr(()=>{let n=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(n),a.unobserve(e)}}},[e,r])}var J7=z7,qce=W7,Gce=K7;const Ps=x.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(J7,{ref:n,className:Re("relative overflow-hidden",e),...r,children:[s.jsx(qce,{className:"h-full w-full rounded-[inherit]",children:t}),s.jsx(Q7,{}),s.jsx(Gce,{})]}));Ps.displayName=J7.displayName;const Q7=x.forwardRef(({className:e,orientation:t="vertical",...r},n)=>s.jsx(cE,{ref:n,orientation:t,className:Re("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:s.jsx(G7,{className:"relative flex-1 rounded-full bg-border"})}));Q7.displayName=cE.displayName;const Kce=`
END-USER TERMS OF SERVICE AGREEMENT
PSW DIRECT INC.
Ontario, Canada

IMPORTANT  PLEASE READ CAREFULLY BEFORE USING OUR SERVICES

This End-User Terms of Service Agreement ("Agreement") is a legally binding contract between you ("User," "you," or "your") and PSW Direct Inc. ("PSW Direct," "Company," "we," "us," or "our"). By accessing or using our platform, applications, or services (collectively, the "Platform"), you confirm that you have read, understood, and agree to comply with the terms and conditions set forth in this Agreement.

If you do not agree with any part of this Agreement, you must not access or use the Platform.

1. ROLE AND NATURE OF PSW DIRECT INC.

1.1 PSW Direct is a technology-based platform that facilitates connections between independent Personal Support Workers ("PSWs") and Users (individuals or their legal representatives) who are seeking in-home assistance or related services.

1.2 PSW Direct is NOT a licensed healthcare provider, staffing agency, or home care agency. It does not employ, supervise, direct, or control any PSW. All PSWs who utilize the Platform are independent contractors and are solely responsible for the services they provide.

1.3 PSW Direct does NOT provide medical, nursing, or therapeutic services. It does NOT diagnose, treat, or manage any medical condition.

2. NO HEALTHCARE, MEDICAL, OR PROFESSIONAL SERVICES

2.1 PSW Direct does NOT provide or arrange for any form of healthcare, medical services, nursing care, or professional therapeutic interventions.

2.2 Any care coordinated through the Platform is strictly limited to non-clinical, personal support tasks, such as assistance with activities of daily living, companionship, light housekeeping, or meal preparation.

2.3 Users acknowledge that PSW Direct and the PSWs accessible through the Platform are NOT qualified to:
 Diagnose or treat illnesses or medical conditions
 Provide medical advice, recommendations, or opinions
 Administer medications
 Monitor or interpret clinical data
 Perform any clinical, regulated, or invasive health procedures
 Provide nursing, physiotherapy, occupational therapy, or other health services

2.4 For any medical, nursing, or clinical care needs, Users must consult qualified, licensed healthcare professionals directly. PSW Direct disclaims any responsibility for health-related decisions made by Users.

3. USER ELIGIBILITY AND ACCOUNT RESPONSIBILITY

3.1 Users must be at least eighteen (18) years of age and have the legal capacity to enter into this Agreement.

3.2 If the User is acting as a substitute decision-maker (e.g., Power of Attorney for Personal Care) on behalf of another individual, the User represents and warrants that they have the legal authority to do so.

3.3 Users are solely responsible for maintaining the confidentiality of their account credentials and for all activities conducted under their account.

4. USER RESPONSIBILITIES AND REQUIRED DISCLOSURES

4.1 Users must disclose, at the time of booking, any known information that is relevant to ensuring the PSW's safety and the appropriateness of the match, including but not limited to:
 Mobility limitations or physical disabilities
 Cognitive impairments (e.g., dementia, Alzheimer's disease)
 Behavioural challenges or tendencies (e.g., aggression, wandering)
 Infectious diseases or communicable conditions
 Environmental hazards in the home (e.g., pests, pets, structural risks)
 Requirements for lifting, transferring, or physical support

4.2 Failure to disclose material information may result in immediate termination of the service, suspension from the Platform, and potential liability for any injuries or damages incurred.

4.3 Users agree to treat all PSWs with respect and dignity. Any form of harassment, abuse, discrimination, or inappropriate conduct toward PSWs is strictly prohibited and may result in account suspension or termination.

5. ONTARIO-SPECIFIC REGULATORY DISCLOSURES

5.1 PSW Direct Inc. is registered and operates exclusively in Ontario, Canada. Users and PSWs accessing the Platform agree that services are provided and received within Ontario and are subject to Ontario law.

5.2 PSW Direct is NOT a licensed home care agency under the Home Care and Community Services Act, 1994 (Ontario), nor is it regulated under the Fixing Long-Term Care Act, 2021, or any successor legislation. It is a technology platform only.

5.3 Personal Support Workers who use the Platform are NOT employees of PSW Direct. Each PSW is an independent contractor who is responsible for:
 Their own qualifications, credentials, and certifications
 Maintaining appropriate personal liability insurance
 Paying their own taxes
 Complying with applicable laws and professional standards

5.4 PSW Direct does NOT guarantee that PSWs have any specific training, certification, or qualifications, including but not limited to:
 Ontario PSW certification from an accredited educational institution
 Standard First Aid and CPR certification
 Police Vulnerable Sector Check clearance
 Training for specialized care (e.g., dementia care, palliative care)

5.5 Users are solely responsible for independently verifying any PSW's qualifications, credentials, insurance coverage, and suitability before accepting their services. PSW Direct is not liable for any misrepresentations or omissions by a PSW regarding their qualifications.

6. RELATIONSHIP BETWEEN USER AND PERSONAL SUPPORT WORKER

6.1 PSW Direct functions solely as an intermediary. It facilitates the connection between Users and PSWs but is NOT a party to any agreement, arrangement, or contract for services that may arise between a User and a PSW.

6.2 All service agreements, schedules, rates, and terms are negotiated directly between Users and PSWs through the Platform. PSW Direct does NOT dictate, supervise, or control the terms of those arrangements.

6.3 All responsibility for the quality, adequacy, safety, and legality of services rests solely with the PSW who provides them.

7. FEES, PAYMENTS, AND PLATFORM CHARGES

7.1 Users agree to pay all applicable fees as disclosed at the time of booking. Fees may include:
 Service fees charged by PSWs
 Platform facilitation or booking fees
 Cancellation or late-change fees
 Any applicable taxes (e.g., HST)

7.2 All payments are processed securely through third-party payment providers (e.g., Stripe). PSW Direct is not responsible for payment processing errors caused by third-party services.

7.3 Refunds, if any, are subject to PSW Direct's Refund and Cancellation Policy, which may be updated from time to time at the Company's sole discretion.

8. USER CONDUCT

8.1 Users agree to use the Platform only for lawful purposes and in accordance with this Agreement.

8.2 Users shall NOT:
 Provide false, misleading, or incomplete information to PSW Direct or any PSW
 Harass, threaten, or discriminate against any PSW based on race, gender, age, religion, disability, sexual orientation, or any other protected ground
 Attempt to circumvent the Platform's payment system
 Use the Platform to solicit or recruit PSWs for purposes outside of the Platform

8.3 PSW Direct reserves the right, in its sole discretion, to suspend or terminate any User's account for violations of this Agreement or any other conduct deemed detrimental to the Platform, its community, or third parties.

9. ASSUMPTION OF RISK

9.1 Users acknowledge and accept that there are inherent risks associated with receiving in-home personal support services, including but not limited to:
 Injury or harm resulting from negligence, error, or omission by a PSW
 Theft, property damage, or breach of privacy by a PSW
 Transmission of illness or communicable disease
 Emotional or psychological distress

9.2 By using the Platform, Users voluntarily assume these risks and agree that PSW Direct shall not be held liable for any injuries, losses, damages, or harm arising out of or in connection with the services provided by a PSW.

10. DISCLAIMER OF WARRANTIES

10.1 The Platform and all services are provided "AS IS" and "AS AVAILABLE," without warranties of any kind, express or implied, including but not limited to:
 Implied warranties of merchantability
 Fitness for a particular purpose
 Non-infringement
 Accuracy, reliability, or completeness of information provided

10.2 PSW Direct does NOT warrant or guarantee:
 That the Platform will be uninterrupted, secure, or error-free
 That the services arranged through the Platform will meet the User's expectations
 That any information, content, or services obtained through the Platform will be accurate or reliable

11. LIMITATION OF LIABILITY

11.1 To the fullest extent permitted by law, PSW Direct Inc., its officers, directors, employees, agents, and affiliates shall NOT be liable for any:
 Direct, indirect, incidental, special, consequential, or punitive damages
 Loss of profits, goodwill, data, or other intangible losses
 Personal injury, death, or property damage
arising out of or in connection with your use of the Platform or any services facilitated through it.

11.2 If, notwithstanding the foregoing, PSW Direct is found liable for any damages, your total remedy shall not exceed the amount you have paid to PSW Direct in the twelve (12) months preceding the claim.

12. INDEMNIFICATION

12.1 You agree to indemnify, defend, and hold harmless PSW Direct Inc., its officers, directors, employees, contractors, agents, licensors, and affiliates from and against any and all claims, liabilities, damages, losses, costs, and expenses (including reasonable legal fees) arising out of or related to:
 Your use of the Platform
 Your violation of this Agreement
 Your violation of any rights of a third party
 Any dispute or issue between you and a PSW

13. GOVERNING LAW AND JURISDICTION

13.1 This Agreement shall be governed by and construed in accordance with the laws of the Province of Ontario and the federal laws of Canada applicable therein, without regard to conflict of law principles.

13.2 Any disputes arising out of or related to this Agreement or the Platform shall be resolved exclusively in the courts of competent jurisdiction located in the Province of Ontario.

14. ELECTRONIC RECORDS AND ACCEPTANCE

14.1 By using the Platform, you consent to receive all communications, agreements, disclosures, and notices electronically.

14.2 Your electronic acceptance of this Agreement (e.g., by clicking "I Agree," creating an account, or using the Platform) is legally binding and has the same force and effect as a physical signature.

15. ENTIRE AGREEMENT

15.1 This Agreement, together with PSW Direct's Privacy Policy, Refund Policy, and any other policies referenced herein, constitutes the entire agreement between you and PSW Direct and supersedes any prior understandings, representations, or agreements.

15.2 PSW Direct reserves the right to modify or update this Agreement at any time. Continued use of the Platform after any such changes constitutes your acceptance of the revised terms.

ACKNOWLEDGEMENT

By using the PSW Direct platform, you acknowledge that you have read this Agreement, understand it, and agree to be bound by its terms. You further acknowledge that you are not receiving medical care and that PSW Direct is not a healthcare provider or home care agency.

If you have any questions about this Agreement, please contact us at: support@pswdirect.com
`.trim();function e9(){return s.jsxs(hr,{children:[s.jsx(oE,{asChild:!0,children:s.jsx("button",{type:"button",className:"text-sm font-medium text-foreground underline underline-offset-4 hover:text-primary transition-colors ml-6",children:"View Full Terms of Service"})}),s.jsxs(or,{className:"max-w-2xl max-h-[80vh]",children:[s.jsx(lr,{children:s.jsx(cr,{className:"text-xl",children:"Terms of Service"})}),s.jsx(Ps,{className:"h-[60vh] pr-4",children:s.jsx("div",{className:"space-y-4 text-sm text-muted-foreground whitespace-pre-wrap leading-relaxed",children:Kce})})]})]})}const pe=x.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:Re("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));pe.displayName="Input";var Yce="Label",t9=x.forwardRef((e,t)=>s.jsx(ze.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));t9.displayName=Yce;var r9=t9;const Zce=$f("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),oe=x.forwardRef(({className:e,...t},r)=>s.jsx(r9,{ref:r,className:Re(Zce(),e),...t}));oe.displayName=r9.displayName;const _n=x.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:Re("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));_n.displayName="Textarea";var Uw="Checkbox",[Xce,xze]=sn(Uw),[Jce,hE]=Xce(Uw);function Qce(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:d,value:h="on",internal_do_not_use_render:f}=e,[m,p]=Ln({prop:r,defaultProp:a??!1,onChange:c,caller:Uw}),[y,v]=x.useState(null),[b,N]=x.useState(null),j=x.useRef(!1),w=y?!!o||!!y.closest("form"):!0,S={checked:m,disabled:i,setChecked:p,control:y,setControl:v,name:l,form:o,value:h,hasConsumerStoppedPropagationRef:j,required:d,defaultChecked:fc(a)?!1:a,isFormControl:w,bubbleInput:b,setBubbleInput:N};return s.jsx(Jce,{scope:t,...S,children:ede(f)?f(S):n})}var n9="CheckboxTrigger",s9=x.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},a)=>{const{control:i,value:o,disabled:l,checked:c,required:d,setControl:h,setChecked:f,hasConsumerStoppedPropagationRef:m,isFormControl:p,bubbleInput:y}=hE(n9,e),v=nt(a,h),b=x.useRef(c);return x.useEffect(()=>{const N=i==null?void 0:i.form;if(N){const j=()=>f(b.current);return N.addEventListener("reset",j),()=>N.removeEventListener("reset",j)}},[i,f]),s.jsx(ze.button,{type:"button",role:"checkbox","aria-checked":fc(c)?"mixed":c,"aria-required":d,"data-state":c9(c),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:v,onKeyDown:Ie(t,N=>{N.key==="Enter"&&N.preventDefault()}),onClick:Ie(r,N=>{f(j=>fc(j)?!0:!j),y&&p&&(m.current=N.isPropagationStopped(),m.current||N.stopPropagation())})})});s9.displayName=n9;var fE=x.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:d,form:h,...f}=e;return s.jsx(Qce,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:d,name:n,form:h,value:c,internal_do_not_use_render:({isFormControl:m})=>s.jsxs(s.Fragment,{children:[s.jsx(s9,{...f,ref:t,__scopeCheckbox:r}),m&&s.jsx(l9,{__scopeCheckbox:r})]})})});fE.displayName=Uw;var a9="CheckboxIndicator",i9=x.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...a}=e,i=hE(a9,r);return s.jsx(kn,{present:n||fc(i.checked)||i.checked===!0,children:s.jsx(ze.span,{"data-state":c9(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});i9.displayName=a9;var o9="CheckboxBubbleInput",l9=x.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:d,value:h,form:f,bubbleInput:m,setBubbleInput:p}=hE(o9,e),y=nt(r,p),v=Ow(i),b=yw(n);x.useEffect(()=>{const j=m;if(!j)return;const w=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(w,"checked").set,P=!a.current;if(v!==i&&C){const T=new Event("click",{bubbles:P});j.indeterminate=fc(i),C.call(j,fc(i)?!1:i),j.dispatchEvent(T)}},[m,v,i,a]);const N=x.useRef(fc(i)?!1:i);return s.jsx(ze.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??N.current,required:l,disabled:c,name:d,value:h,form:f,...t,tabIndex:-1,ref:y,style:{...t.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});l9.displayName=o9;function ede(e){return typeof e=="function"}function fc(e){return e==="indeterminate"}function c9(e){return fc(e)?"indeterminate":e?"checked":"unchecked"}const Co=x.forwardRef(({className:e,...t},r)=>s.jsx(fE,{ref:r,className:Re("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(i9,{className:Re("flex items-center justify-center text-current"),children:s.jsx(tn,{className:"h-4 w-4"})})}));Co.displayName=fE.displayName;const tde="modulepreload",rde=function(e){return"/"+e},v3={},Po=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=rde(c),c in v3)return;v3[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":tde,d||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((m,p)=>{f.addEventListener("load",m),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},y3=[{id:"personal-care",name:"Personal Care",includedMinutes:45,baseCost:35,isHospitalDoctor:!1,serviceCategory:"standard",requiresDischargeUpload:!1,applyHST:!1},{id:"companionship",name:"Companionship Visit",includedMinutes:60,baseCost:32,isHospitalDoctor:!1,serviceCategory:"standard",requiresDischargeUpload:!1,applyHST:!1},{id:"meal-prep",name:"Meal Preparation",includedMinutes:30,baseCost:30,isHospitalDoctor:!1,serviceCategory:"standard",requiresDischargeUpload:!1,applyHST:!1},{id:"medication",name:"Medication Reminders",includedMinutes:15,baseCost:35,isHospitalDoctor:!1,serviceCategory:"standard",requiresDischargeUpload:!1,applyHST:!1},{id:"light-housekeeping",name:"Light Housekeeping",includedMinutes:30,baseCost:28,isHospitalDoctor:!1,serviceCategory:"standard",requiresDischargeUpload:!1,applyHST:!0},{id:"transportation",name:"Transportation Assistance",includedMinutes:45,baseCost:38,isHospitalDoctor:!1,serviceCategory:"standard",requiresDischargeUpload:!1,applyHST:!0},{id:"respite",name:"Respite Care",includedMinutes:60,baseCost:40,isHospitalDoctor:!1,serviceCategory:"standard",requiresDischargeUpload:!1,applyHST:!1},{id:"doctor-escort",name:"Doctor Appointment Escort",includedMinutes:60,baseCost:38,isHospitalDoctor:!0,serviceCategory:"doctor-appointment",requiresDischargeUpload:!1,applyHST:!0},{id:"hospital-visit",name:"Hospital Pick-up/Drop-off (Discharge)",includedMinutes:90,baseCost:50,isHospitalDoctor:!0,serviceCategory:"hospital-discharge",requiresDischargeUpload:!0,applyHST:!0}],au=()=>{const e=localStorage.getItem("adminTasks");if(e)try{return JSON.parse(e).map(r=>({...r,serviceCategory:r.serviceCategory||(r.isHospitalDoctor?"doctor-appointment":"standard"),requiresDischargeUpload:r.requiresDischargeUpload||!1,applyHST:r.applyHST??(r.id==="light-housekeeping"||r.id==="transportation"||r.isHospitalDoctor)}))}catch{return y3}return Po(async()=>{const{fetchServiceTasksAsync:t}=await Promise.resolve().then(()=>Pfe);return{fetchServiceTasksAsync:t}},void 0).then(({fetchServiceTasksAsync:t})=>{t()}),y3},nde=()=>{const e=localStorage.getItem("surge_schedule_rules");if(e)try{return JSON.parse(e)}catch{return[]}return[]},sde=(e,t)=>{if(!e.enabled)return!1;const r=new Date,n=r.toISOString().split("T")[0],a=r.toTimeString().slice(0,5),i=r.getDay();return!(e.startDate&&n<e.startDate||e.endDate&&n>e.endDate||e.startTime&&e.endTime&&(a<e.startTime||a>e.endTime)||e.daysOfWeek&&e.daysOfWeek.length>0&&!e.daysOfWeek.includes(i))},ade=(e,t,r)=>{if(!e.enabled)return!1;const a=new Date(`${t}T${r}`).getDay();return!(e.startDate&&t<e.startDate||e.endDate&&t>e.endDate||e.startTime&&e.endTime&&(r<e.startTime||r>e.endTime)||e.daysOfWeek&&e.daysOfWeek.length>0&&!e.daysOfWeek.includes(a))},ide=(e,t)=>{const r=nde();let n=[];if(e&&t?n=r.filter(c=>ade(c,e,t)):n=r.filter(c=>sde(c)),n.length===0)return{multiplier:1,activeRules:[],surgeAmount:0};const a=n.filter(c=>c.stackable),i=n.filter(c=>!c.stackable);let o=1;if(a.forEach(c=>{o*=c.multiplier}),i.length>0){const c=Math.max(...i.map(d=>d.multiplier));o=Math.max(o,c)}const l=(o-1)*100;return{multiplier:o,activeRules:n,surgeAmount:l}},ode=75,lde=4,cde=()=>{const e=au(),t={};return e.forEach(r=>{t[r.id]=r.includedMinutes}),t},dde=()=>{const e=au(),t={};return e.forEach(r=>{t[r.id]=r.baseCost}),t},zu=[{id:"toronto-gta",name:"Toronto / GTA",enabled:!1,clientSurcharge:10,pswBonus:5,pswFlatBonus:15,postalCodePrefixes:["M1","M2","M3","M4","M5","M6","M7","M8","M9"],cities:["Toronto","North York","Scarborough","Etobicoke","East York","York"]}],d9=()=>{const e=au(),t=e.find(n=>n.serviceCategory==="hospital-discharge"),r=e.find(n=>n.serviceCategory==="doctor-appointment");return{baseHourlyRates:dde(),hospitalRate:(t==null?void 0:t.baseCost)||45,hospitalDischargeRate:(t==null?void 0:t.baseCost)||55,doctorAppointmentRate:(r==null?void 0:r.baseCost)||40,minimumBookingFee:25,taskDurations:cde(),surgeMultiplier:1,minimumHours:1,doctorEscortMinimumHours:1,overtimeRatePercentage:50,overtimeGraceMinutes:14,overtimeBlockMinutes:15,regionalSurgeEnabled:!1,surgeZones:zu,asapPricingEnabled:!0,asapMultiplier:1.25}},ude=d9(),hde=60,ba=()=>{const e=d9(),t=localStorage.getItem("adminPricing");if(t)try{const r=JSON.parse(t);return{...e,surgeMultiplier:r.surgeMultiplier??e.surgeMultiplier,overtimeRatePercentage:r.overtimeRatePercentage??e.overtimeRatePercentage,overtimeGraceMinutes:r.overtimeGraceMinutes??e.overtimeGraceMinutes,overtimeBlockMinutes:r.overtimeBlockMinutes??e.overtimeBlockMinutes,regionalSurgeEnabled:r.regionalSurgeEnabled??e.regionalSurgeEnabled,surgeZones:r.surgeZones??e.surgeZones,minimumBookingFee:r.minimumBookingFee??e.minimumBookingFee,asapPricingEnabled:r.asapPricingEnabled??e.asapPricingEnabled,asapMultiplier:r.asapMultiplier??e.asapMultiplier}}catch{return e}return e},fde=e=>{localStorage.setItem("adminPricing",JSON.stringify(e))},b3=e=>{const t=Math.floor(e/60),r=e%60;return t===0?`${r} min`:r===0?`${t} hr`:`${t} hr ${r} min`},w3=30,mde=e=>{const t=ba(),r=au(),n=e.reduce((d,h)=>{if(t.taskDurations[h])return d+t.taskDurations[h];const f=r.find(m=>m.id===h);return f?d+f.includedMinutes:d+30},0);let a=0;e.forEach(d=>{if(t.baseHourlyRates[d]){a+=t.baseHourlyRates[d];return}const h=r.find(f=>f.id===d);if(h){a+=h.baseCost;return}a+=w3});const i=e.length>0?a/e.length:w3,o=i*t.minimumHours,l=n>hde;return{baseHourTotal:o,hourlyRate:i,taskMinutes:n,exceedsBaseHour:l,warningMessage:l?"This amount of care may require additional time. Overtime will be billed in 30-minute blocks if the visit extends beyond the base hour.":null}},u9=(e,t=!1,r,n,a,i)=>{const o=ba(),{baseHourTotal:l,hourlyRate:c,taskMinutes:d,exceedsBaseHour:h,warningMessage:f}=mde(e),m=Math.max(d,o.minimumHours*60),p=o.minimumHours;let y=l;const v=au(),b=e.some(U=>{if(U==="doctor-escort")return!0;const $=v.find(H=>H.id===U);return($==null?void 0:$.serviceCategory)==="doctor-appointment"||($==null?void 0:$.name.toLowerCase().includes("doctor"))});e.some(U=>{if(U==="hospital-visit")return!0;const $=v.find(H=>H.id===U);return($==null?void 0:$.serviceCategory)==="hospital-discharge"||($==null?void 0:$.name.toLowerCase().includes("hospital"))})?y=Math.max(y,o.hospitalDischargeRate||55):b&&(y=Math.max(y,o.doctorAppointmentRate||40));let j=1,w=0,S=[];if(a&&i){const U=ide(a,i);j=U.multiplier,w=U.surgeAmount,S=U.activeRules.map($=>$.name)}const C=t&&o.asapPricingEnabled?o.asapMultiplier:1,P=Math.max(C,j),T=y*(P-1),O=mE(r,n),E=O?O.clientSurcharge:0,D=O?O.pswBonus:0,I=O&&O.pswFlatBonus||0;let A=y+T+E;const V=A<(o.minimumBookingFee||25);return V&&(A=o.minimumBookingFee||25),{subtotal:y,surgeAmount:T,total:A,totalMinutes:m,totalHours:p,exceedsBaseHour:h,warningMessage:f,minimumFeeApplied:V,regionalSurcharge:E,pswBonus:D,pswFlatBonus:I,scheduledSurgePercentage:w,scheduledSurgeRules:S}},pde=(e,t,r=!1)=>{if(r)return{eligible:!1,message:"Immediate service requests are non-refundable. Please call the office for special circumstances."};const n=new Date(`${e}T${t}:00`),a=new Date;return(n.getTime()-a.getTime())/(1e3*60*60)>=lde?{eligible:!0,message:"Cancellation confirmed. Your refund is being processed."}:{eligible:!1,message:"Cancellations within 4 hours are non-refundable. Please call the office for special circumstances."}},Xh=e=>e.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),mE=(e,t)=>{const r=ba();if(!r.regionalSurgeEnabled)return null;for(const n of r.surgeZones)if(n.enabled){if(e&&n.cities.some(a=>a.toLowerCase()===e.toLowerCase()))return n;if(t){const a=t.toUpperCase().replace(/\s/g,"").substring(0,2);if(n.postalCodePrefixes.includes(a))return n}}return null},gde=/^[ABCEGHJ-NPRSTVXY]\d[ABCEGHJ-NPRSTV-Z]\d[ABCEGHJ-NPRSTV-Z]\d$/,xde=/^[A-Za-z]\d[A-Za-z]\s?\d[A-Za-z]\d$/,px=e=>{const t=e.trim().toUpperCase().replace(/[\s-]/g,"");return t.length===0?{formatted:null,error:"Postal code is required"}:t.length!==6?{formatted:null,error:"Enter a valid Canadian postal code like L4M 2R1"}:gde.test(t)?{formatted:`${t.slice(0,3)} ${t.slice(3)}`,error:null}:{formatted:null,error:"Enter a valid Canadian postal code like L4M 2R1"}},Wd=e=>{const t=px(e);if(t.formatted)return t.formatted;const r=e.replace(/\s/g,"").toUpperCase();return r.length===6?`${r.slice(0,3)} ${r.slice(3)}`:e.toUpperCase().slice(0,7)},Ri=e=>{const t=e.trim();return xde.test(t)},vde=e=>{let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t=t&t;return Math.abs(t)},j3={M1B:{lat:43.806,lng:-79.1945,city:"Scarborough"},M1C:{lat:43.7845,lng:-79.1605,city:"Scarborough"},M1E:{lat:43.7636,lng:-79.1887,city:"Scarborough"},M1G:{lat:43.7709,lng:-79.2169,city:"Scarborough"},M1H:{lat:43.7635,lng:-79.2395,city:"Scarborough"},M1J:{lat:43.7448,lng:-79.2394,city:"Scarborough"},M1K:{lat:43.7279,lng:-79.262,city:"Scarborough"},M1L:{lat:43.7111,lng:-79.2845,city:"Scarborough"},M1M:{lat:43.7163,lng:-79.2395,city:"Scarborough"},M1N:{lat:43.6927,lng:-79.2648,city:"Scarborough"},M1P:{lat:43.7574,lng:-79.273,city:"Scarborough"},M1R:{lat:43.75,lng:-79.2956,city:"Scarborough"},M1S:{lat:43.7942,lng:-79.262,city:"Scarborough"},M1T:{lat:43.7816,lng:-79.3045,city:"Scarborough"},M1V:{lat:43.8152,lng:-79.2845,city:"Scarborough"},M1W:{lat:43.7995,lng:-79.3183,city:"Scarborough"},M1X:{lat:43.8361,lng:-79.2057,city:"Scarborough"},M2H:{lat:43.8037,lng:-79.3593,city:"North York"},M2J:{lat:43.7785,lng:-79.3465,city:"North York"},M2K:{lat:43.7869,lng:-79.3858,city:"North York"},M2L:{lat:43.7574,lng:-79.3747,city:"North York"},M2M:{lat:43.789,lng:-79.4085,city:"North York"},M2N:{lat:43.77,lng:-79.4085,city:"North York"},M2P:{lat:43.7527,lng:-79.4085,city:"North York"},M2R:{lat:43.7785,lng:-79.4423,city:"North York"},M3A:{lat:43.7532,lng:-79.3296,city:"North York"},M3B:{lat:43.7458,lng:-79.3522,city:"North York"},M3C:{lat:43.7258,lng:-79.3409,city:"East York"},M3H:{lat:43.7532,lng:-79.4423,city:"North York"},M3J:{lat:43.7679,lng:-79.4873,city:"North York"},M3K:{lat:43.7374,lng:-79.4647,city:"North York"},M3L:{lat:43.7395,lng:-79.5099,city:"North York"},M3M:{lat:43.7279,lng:-79.4873,city:"North York"},M3N:{lat:43.7616,lng:-79.5212,city:"North York"},M4A:{lat:43.7258,lng:-79.3127,city:"East York"},M4B:{lat:43.7069,lng:-79.3127,city:"East York"},M4C:{lat:43.6943,lng:-79.3183,city:"East York"},M4E:{lat:43.6775,lng:-79.2958,city:"The Beaches"},M4G:{lat:43.709,lng:-79.3635,city:"Leaside"},M4H:{lat:43.7048,lng:-79.3522,city:"East York"},M4J:{lat:43.6859,lng:-79.3352,city:"East York"},M4K:{lat:43.6796,lng:-79.3522,city:"Riverdale"},M4L:{lat:43.6691,lng:-79.3183,city:"The Beaches"},M4M:{lat:43.6607,lng:-79.3409,city:"Leslieville"},M4N:{lat:43.7279,lng:-79.386,city:"Lawrence Park"},M4P:{lat:43.7111,lng:-79.386,city:"Davisville"},M4R:{lat:43.7153,lng:-79.4085,city:"North Toronto"},M4S:{lat:43.7027,lng:-79.386,city:"Davisville"},M4T:{lat:43.6901,lng:-79.386,city:"Moore Park"},M4V:{lat:43.6859,lng:-79.3973,city:"Summerhill"},M4W:{lat:43.6796,lng:-79.3747,city:"Rosedale"},M4X:{lat:43.667,lng:-79.3635,city:"Cabbagetown"},M4Y:{lat:43.6649,lng:-79.3835,city:"Church-Yonge"},M5A:{lat:43.6544,lng:-79.3606,city:"Corktown"},M5B:{lat:43.6565,lng:-79.3776,city:"Downtown"},M5C:{lat:43.6502,lng:-79.3776,city:"St. Lawrence"},M5E:{lat:43.6439,lng:-79.372,city:"Harbourfront"},M5G:{lat:43.6565,lng:-79.3889,city:"Downtown"},M5H:{lat:43.6502,lng:-79.3889,city:"Financial District"},M5J:{lat:43.6397,lng:-79.3833,city:"Harbourfront"},M5K:{lat:43.6481,lng:-79.3833,city:"Financial District"},M5L:{lat:43.646,lng:-79.3776,city:"Financial District"},M5M:{lat:43.7332,lng:-79.4198,city:"Bedford Park"},M5N:{lat:43.7111,lng:-79.4198,city:"Roselawn"},M5P:{lat:43.6943,lng:-79.4085,city:"Forest Hill"},M5R:{lat:43.6775,lng:-79.4085,city:"The Annex"},M5S:{lat:43.6607,lng:-79.3973,city:"U of T"},M5T:{lat:43.6523,lng:-79.3973,city:"Chinatown"},M5V:{lat:43.6418,lng:-79.3973,city:"Entertainment District"},M5W:{lat:43.646,lng:-79.3889,city:"Downtown"},M5X:{lat:43.6481,lng:-79.3833,city:"Underground City"},M6A:{lat:43.7174,lng:-79.4536,city:"North York"},M6B:{lat:43.709,lng:-79.4423,city:"Glencairn"},M6C:{lat:43.6922,lng:-79.431,city:"Oakwood Village"},M6E:{lat:43.688,lng:-79.4536,city:"Caledonia"},M6G:{lat:43.6691,lng:-79.4198,city:"Christie Pits"},M6H:{lat:43.667,lng:-79.4423,city:"Dovercourt"},M6J:{lat:43.6481,lng:-79.4198,city:"Trinity Bellwoods"},M6K:{lat:43.6376,lng:-79.431,city:"Parkdale"},M6L:{lat:43.7132,lng:-79.4873,city:"Keelesdale"},M6M:{lat:43.6943,lng:-79.476,city:"Silverthorn"},M6N:{lat:43.6754,lng:-79.4647,city:"Runnymede"},M6P:{lat:43.6628,lng:-79.4647,city:"High Park North"},M6R:{lat:43.6502,lng:-79.4536,city:"Parkdale"},M6S:{lat:43.6502,lng:-79.476,city:"Runnymede"},M7A:{lat:43.6628,lng:-79.3889,city:"Queen's Park"},M7R:{lat:43.6364,lng:-79.6155,city:"Mississauga"},M7Y:{lat:43.6628,lng:-79.321,city:"Business Reply"},M8V:{lat:43.604,lng:-79.5016,city:"Mimico"},M8W:{lat:43.6019,lng:-79.5353,city:"Long Branch"},M8X:{lat:43.6535,lng:-79.5099,city:"Islington"},M8Y:{lat:43.6368,lng:-79.4986,city:"Mimico"},M8Z:{lat:43.6238,lng:-79.5212,city:"Mimico"},M9A:{lat:43.667,lng:-79.5325,city:"Etobicoke"},M9B:{lat:43.6502,lng:-79.5551,city:"West Deane Park"},M9C:{lat:43.6334,lng:-79.5777,city:"Markland Wood"},M9L:{lat:43.7553,lng:-79.5438,city:"Humber Summit"},M9M:{lat:43.7237,lng:-79.5438,city:"Emery"},M9N:{lat:43.7069,lng:-79.5212,city:"Weston"},M9P:{lat:43.6964,lng:-79.5325,city:"Westmount"},M9R:{lat:43.688,lng:-79.5551,city:"Martin Grove"},M9V:{lat:43.7395,lng:-79.5777,city:"Rexdale"},M9W:{lat:43.7069,lng:-79.589,city:"Rexdale"},L1A:{lat:44.0431,lng:-78.7151,city:"Lindsay"},L1B:{lat:44.04,lng:-78.715,city:"Lindsay"},L1C:{lat:44.0378,lng:-78.734,city:"Lindsay"},L1E:{lat:43.8971,lng:-78.8658,city:"Oshawa"},L1G:{lat:43.8971,lng:-78.8433,city:"Oshawa"},L1H:{lat:43.9033,lng:-78.8545,city:"Oshawa"},L1J:{lat:43.8846,lng:-78.8545,city:"Oshawa"},L1K:{lat:43.8659,lng:-78.832,city:"Oshawa"},L1L:{lat:43.9283,lng:-78.832,city:"Oshawa"},L1M:{lat:43.9345,lng:-78.8771,city:"Courtice"},L1N:{lat:43.8596,lng:-78.9447,city:"Whitby"},L1P:{lat:43.8721,lng:-78.9222,city:"Whitby"},L1R:{lat:43.8908,lng:-78.9334,city:"Whitby"},L1S:{lat:43.8408,lng:-79.0236,city:"Ajax"},L1T:{lat:43.847,lng:-79.0461,city:"Ajax"},L1V:{lat:43.8221,lng:-79.0912,city:"Pickering"},L1W:{lat:43.8345,lng:-79.0687,city:"Pickering"},L1X:{lat:43.8158,lng:-79.0461,city:"Pickering"},L1Y:{lat:43.8283,lng:-79.1138,city:"Pickering"},L1Z:{lat:43.8159,lng:-79.125,city:"Pickering"},L2A:{lat:42.8792,lng:-79.0516,city:"Fort Erie"},L2E:{lat:43.0896,lng:-79.0791,city:"Niagara Falls"},L2G:{lat:43.0958,lng:-79.0791,city:"Niagara Falls"},L2H:{lat:43.102,lng:-79.0791,city:"Niagara Falls"},L2J:{lat:43.1145,lng:-79.0791,city:"Niagara Falls"},L2M:{lat:43.1666,lng:-79.2469,city:"St. Catharines"},L2N:{lat:43.1853,lng:-79.2694,city:"St. Catharines"},L2P:{lat:43.1853,lng:-79.2244,city:"St. Catharines"},L2R:{lat:43.1728,lng:-79.2469,city:"St. Catharines"},L2S:{lat:43.1291,lng:-79.2469,city:"St. Catharines"},L2T:{lat:43.1478,lng:-79.2694,city:"St. Catharines"},L2V:{lat:43.1603,lng:-79.2019,city:"St. Catharines"},L2W:{lat:43.1853,lng:-79.2919,city:"St. Catharines"},L3B:{lat:42.9855,lng:-79.2355,city:"Welland"},L3C:{lat:42.9918,lng:-79.213,city:"Welland"},L3K:{lat:42.8667,lng:-79.258,city:"Port Colborne"},L3M:{lat:43.2478,lng:-79.213,city:"Grimsby"},L3P:{lat:43.8642,lng:-79.3296,city:"Markham"},L3R:{lat:43.8517,lng:-79.3747,city:"Markham"},L3S:{lat:43.883,lng:-79.3971,city:"Markham"},L3T:{lat:43.8579,lng:-79.431,city:"Thornhill"},L4A:{lat:44.0431,lng:-79.4847,city:"Sharon"},L4B:{lat:43.8517,lng:-79.3971,city:"Richmond Hill"},L4C:{lat:43.8704,lng:-79.4423,city:"Richmond Hill"},L4E:{lat:43.908,lng:-79.4423,city:"Richmond Hill"},L4G:{lat:44.0493,lng:-79.4847,city:"Aurora"},L4H:{lat:43.8267,lng:-79.5438,city:"Vaughan"},L4J:{lat:43.8142,lng:-79.4536,city:"Vaughan"},L4K:{lat:43.8267,lng:-79.4873,city:"Vaughan"},L4L:{lat:43.7928,lng:-79.5551,city:"Vaughan"},L4M:{lat:44.3894,lng:-79.6903,city:"Barrie"},L4N:{lat:44.3718,lng:-79.6678,city:"Barrie"},L9S:{lat:44.3312,lng:-79.679,city:"Innisfil"},L9X:{lat:44.2875,lng:-79.7241,city:"Alliston"},L9Y:{lat:44.5062,lng:-79.8819,city:"Collingwood"},L9Z:{lat:44.4312,lng:-79.927,city:"Wasaga Beach"},L0L:{lat:44.4,lng:-79.7,city:"Simcoe County"},L0K:{lat:44.55,lng:-79.55,city:"Orillia Area"},L0M:{lat:44.6,lng:-80,city:"Grey County"},L4S:{lat:43.8954,lng:-79.4647,city:"Richmond Hill"},L4T:{lat:43.7179,lng:-79.6115,city:"Mississauga"},L4V:{lat:43.6954,lng:-79.6003,city:"Mississauga"},L4W:{lat:43.6579,lng:-79.6115,city:"Mississauga"},L4X:{lat:43.6329,lng:-79.589,city:"Mississauga"},L4Y:{lat:43.6204,lng:-79.5777,city:"Mississauga"},L4Z:{lat:43.6079,lng:-79.6003,city:"Mississauga"},L5A:{lat:43.5829,lng:-79.6228,city:"Mississauga"},L5B:{lat:43.5954,lng:-79.634,city:"Mississauga"},L5C:{lat:43.5704,lng:-79.6453,city:"Mississauga"},L5E:{lat:43.5579,lng:-79.589,city:"Mississauga"},L5G:{lat:43.5454,lng:-79.589,city:"Mississauga"},L5H:{lat:43.5329,lng:-79.589,city:"Mississauga"},L5J:{lat:43.4954,lng:-79.6228,city:"Oakville"},L5K:{lat:43.5329,lng:-79.6453,city:"Mississauga"},L5L:{lat:43.5329,lng:-79.6678,city:"Mississauga"},L5M:{lat:43.5579,lng:-79.6903,city:"Mississauga"},L5N:{lat:43.5829,lng:-79.7016,city:"Mississauga"},L5P:{lat:43.5954,lng:-79.679,city:"Mississauga"},L5R:{lat:43.6079,lng:-79.6565,city:"Mississauga"},L5S:{lat:43.6892,lng:-79.634,city:"Malton"},L5T:{lat:43.6767,lng:-79.6678,city:"Mississauga"},L5V:{lat:43.6454,lng:-79.6903,city:"Mississauga"},L5W:{lat:43.6579,lng:-79.7016,city:"Mississauga"},L6A:{lat:43.833,lng:-79.5664,city:"Maple"},L6B:{lat:43.8705,lng:-79.2507,city:"Markham"},L6C:{lat:43.8892,lng:-79.3183,city:"Markham"},L6E:{lat:43.9017,lng:-79.2733,city:"Markham"},L6G:{lat:43.9267,lng:-79.3409,city:"Markham"},L6H:{lat:43.4766,lng:-79.6903,city:"Oakville"},L6J:{lat:43.4516,lng:-79.679,city:"Oakville"},L6K:{lat:43.4266,lng:-79.7016,city:"Oakville"},L6L:{lat:43.4141,lng:-79.7241,city:"Oakville"},L6M:{lat:43.4391,lng:-79.7579,city:"Oakville"},L6P:{lat:43.7991,lng:-79.6115,city:"Brampton"},L6R:{lat:43.7554,lng:-79.7016,city:"Brampton"},L6S:{lat:43.7366,lng:-79.7354,city:"Brampton"},L6T:{lat:43.7116,lng:-79.7354,city:"Brampton"},L6V:{lat:43.6891,lng:-79.7354,city:"Brampton"},L6W:{lat:43.6891,lng:-79.7579,city:"Brampton"},L6X:{lat:43.7054,lng:-79.7804,city:"Brampton"},L6Y:{lat:43.7241,lng:-79.7804,city:"Brampton"},L6Z:{lat:43.7616,lng:-79.7692,city:"Brampton"},L7A:{lat:43.7179,lng:-79.803,city:"Brampton"},L7B:{lat:44.0181,lng:-79.4622,city:"King City"},L7C:{lat:43.7679,lng:-79.7917,city:"Brampton"},L7E:{lat:43.9017,lng:-79.4986,city:"Bolton"},L7G:{lat:43.7179,lng:-80.0396,city:"Georgetown"},L7J:{lat:43.6329,lng:-79.9833,city:"Acton"},L7K:{lat:43.9393,lng:-79.9608,city:"Orangeville"},L7L:{lat:43.3141,lng:-79.8593,city:"Burlington"},L7M:{lat:43.3391,lng:-79.8031,city:"Burlington"},L7N:{lat:43.3266,lng:-79.7918,city:"Burlington"},L7P:{lat:43.3516,lng:-79.8143,city:"Burlington"},L7R:{lat:43.3266,lng:-79.7918,city:"Burlington"},L7S:{lat:43.3516,lng:-79.7693,city:"Burlington"},L7T:{lat:43.3266,lng:-79.7693,city:"Burlington"},L8E:{lat:43.2183,lng:-79.7806,city:"Hamilton"},L8G:{lat:43.2308,lng:-79.7693,city:"Hamilton"},L8H:{lat:43.2433,lng:-79.8031,city:"Hamilton"},L8J:{lat:43.2058,lng:-79.7693,city:"Hamilton"},L8K:{lat:43.2558,lng:-79.8368,city:"Hamilton"},L8L:{lat:43.2495,lng:-79.8481,city:"Hamilton"},L8M:{lat:43.237,lng:-79.8481,city:"Hamilton"},L8N:{lat:43.2558,lng:-79.8593,city:"Hamilton"},L8P:{lat:43.2495,lng:-79.8706,city:"Hamilton"},L8R:{lat:43.262,lng:-79.8706,city:"Hamilton"},L8S:{lat:43.2683,lng:-79.8818,city:"Hamilton"},L8T:{lat:43.2495,lng:-79.8931,city:"Hamilton"},L8V:{lat:43.237,lng:-79.8818,city:"Hamilton"},L8W:{lat:43.212,lng:-79.8593,city:"Hamilton"},L9A:{lat:43.2558,lng:-79.9043,city:"Hamilton"},L9B:{lat:43.2245,lng:-79.9268,city:"Hamilton"},L9C:{lat:43.237,lng:-79.9156,city:"Hamilton"},L9G:{lat:43.3455,lng:-80.0284,city:"Flamborough"},L9H:{lat:43.2745,lng:-79.9493,city:"Dundas"},L9K:{lat:43.212,lng:-79.9719,city:"Hamilton"},L9T:{lat:43.5079,lng:-79.8818,city:"Milton"},L9W:{lat:43.8393,lng:-79.9383,city:"Orangeville"},K1A:{lat:45.4215,lng:-75.6993,city:"Ottawa Downtown"},K1B:{lat:45.434,lng:-75.6543,city:"Ottawa East"},K1C:{lat:45.4777,lng:-75.5755,city:"Orleans"},K1E:{lat:45.4902,lng:-75.5305,city:"Orleans"},K1G:{lat:45.409,lng:-75.6318,city:"Alta Vista"},K1H:{lat:45.3965,lng:-75.6543,city:"Alta Vista"},K1J:{lat:45.4402,lng:-75.6206,city:"Beacon Hill"},K1K:{lat:45.4527,lng:-75.6543,city:"Vanier"},K1L:{lat:45.434,lng:-75.6656,city:"Lowertown"},K1M:{lat:45.4527,lng:-75.6881,city:"Rockcliffe"},K1N:{lat:45.4277,lng:-75.6881,city:"Sandy Hill"},K1P:{lat:45.4215,lng:-75.6993,city:"Downtown"},K1R:{lat:45.409,lng:-75.7106,city:"Centretown"},K1S:{lat:45.3965,lng:-75.7106,city:"Old Ottawa South"},K1T:{lat:45.359,lng:-75.6318,city:"Gloucester"},K1V:{lat:45.359,lng:-75.6769,city:"South Keys"},K1W:{lat:45.4152,lng:-75.553,city:"Orleans"},K1X:{lat:45.334,lng:-75.6318,city:"Gloucester"},K1Y:{lat:45.409,lng:-75.7331,city:"Hintonburg"},K1Z:{lat:45.4152,lng:-75.7556,city:"Westboro"},K2A:{lat:45.3903,lng:-75.7556,city:"Hampton Park"},K2B:{lat:45.384,lng:-75.7781,city:"Bells Corners"},K2C:{lat:45.359,lng:-75.7331,city:"Baseline"},K2E:{lat:45.3465,lng:-75.7106,city:"Merivale"},K2G:{lat:45.334,lng:-75.7556,city:"Nepean"},K2H:{lat:45.3403,lng:-75.8006,city:"Nepean"},K2J:{lat:45.284,lng:-75.7331,city:"Barrhaven"},K2K:{lat:45.3465,lng:-75.9082,city:"Kanata"},K2L:{lat:45.3215,lng:-75.8682,city:"Kanata"},K2M:{lat:45.3028,lng:-75.8907,city:"Kanata"},K2P:{lat:45.4152,lng:-75.6881,city:"Golden Triangle"},K2R:{lat:45.2715,lng:-75.8231,city:"Manotick"},K2S:{lat:45.3903,lng:-75.8907,city:"Stittsville"},K2T:{lat:45.3653,lng:-75.9082,city:"Kanata"},K2V:{lat:45.3153,lng:-75.9282,city:"Kanata"},K2W:{lat:45.359,lng:-75.9507,city:"Kanata West"},K4A:{lat:45.4902,lng:-75.4855,city:"Orleans"},K4B:{lat:45.5152,lng:-75.463,city:"Cumberland"},K4C:{lat:45.5277,lng:-75.418,city:"Navan"},K4K:{lat:45.4652,lng:-75.2829,city:"Rockland"},K4M:{lat:45.384,lng:-75.328,city:"Vars"},K4P:{lat:45.234,lng:-75.6431,city:"Greely"},K4R:{lat:45.1777,lng:-75.6656,city:"Osgoode"},K6A:{lat:45.5089,lng:-74.131,city:"Hawkesbury"},K6H:{lat:45.0633,lng:-74.7295,city:"Cornwall"},K6J:{lat:45.0258,lng:-74.7295,city:"Cornwall"},K6K:{lat:45.0133,lng:-74.7295,city:"Cornwall"},K6T:{lat:44.5945,lng:-75.6768,city:"Brockville"},K6V:{lat:44.582,lng:-75.6768,city:"Brockville"},K7A:{lat:44.9003,lng:-76.2617,city:"Smiths Falls"},K7C:{lat:44.9128,lng:-76.0179,city:"Carleton Place"},K7G:{lat:44.35,lng:-76.5485,city:"Gananoque"},K7H:{lat:44.767,lng:-76.6273,city:"Perth"},K7K:{lat:44.2312,lng:-76.481,city:"Kingston"},K7L:{lat:44.2437,lng:-76.5035,city:"Kingston"},K7M:{lat:44.2562,lng:-76.526,city:"Kingston"},K7N:{lat:44.2437,lng:-76.4585,city:"Kingston"},K7P:{lat:44.2312,lng:-76.5485,city:"Kingston"},K8A:{lat:45.4283,lng:-75.7106,city:"Ottawa"},K8H:{lat:45.4939,lng:-76.3517,city:"Renfrew"},K8N:{lat:44.1628,lng:-77.3832,city:"Belleville"},K8P:{lat:44.1378,lng:-77.4057,city:"Belleville"},K8R:{lat:44.1878,lng:-77.3382,city:"Belleville"},K8V:{lat:44.2545,lng:-77.0268,city:"Napanee"},K9A:{lat:43.8704,lng:-78.2677,city:"Port Hope"},K9H:{lat:44.3008,lng:-78.324,city:"Peterborough"},K9J:{lat:44.3258,lng:-78.3015,city:"Peterborough"},K9K:{lat:44.3008,lng:-78.279,city:"Peterborough"},K9L:{lat:44.3383,lng:-78.324,city:"Peterborough"},K9V:{lat:44.0931,lng:-78.7101,city:"Lindsay"},N0A:{lat:42.9897,lng:-81.2522,city:"Western Ontario Rural"},N0B:{lat:43.47,lng:-80.4833,city:"Wellington County"},N0C:{lat:43.8833,lng:-80.3667,city:"Grey County"},N0E:{lat:43.0167,lng:-80.75,city:"Oxford County"},N0G:{lat:43.5333,lng:-81.5833,city:"Huron County"},N0H:{lat:44.2667,lng:-81.0333,city:"Bruce County"},N0J:{lat:42.9,lng:-81.5,city:"Elgin County"},N0K:{lat:43.6333,lng:-80.8667,city:"Perth County"},N0L:{lat:42.75,lng:-81.7667,city:"Elgin County"},N0M:{lat:43.2167,lng:-81.85,city:"Middlesex County"},N0N:{lat:43.0667,lng:-82.0833,city:"Lambton County"},N0P:{lat:42.3167,lng:-82,city:"Chatham-Kent"},N0R:{lat:42.0833,lng:-82.55,city:"Essex County"},N1A:{lat:43.837,lng:-80.2645,city:"Mount Forest"},N1C:{lat:43.9495,lng:-80.7645,city:"Owen Sound"},N1E:{lat:43.532,lng:-80.242,city:"Guelph"},N1G:{lat:43.5445,lng:-80.2195,city:"Guelph"},N1H:{lat:43.5445,lng:-80.2645,city:"Guelph"},N1K:{lat:43.507,lng:-80.2307,city:"Guelph"},N1L:{lat:43.4633,lng:-80.2307,city:"Guelph"},N1M:{lat:43.5695,lng:-80.2645,city:"Guelph"},N1P:{lat:43.4883,lng:-80.1745,city:"Guelph"},N1R:{lat:43.4508,lng:-80.477,city:"Cambridge"},N1S:{lat:43.4195,lng:-80.4545,city:"Cambridge"},N1T:{lat:43.3945,lng:-80.432,city:"Cambridge"},N2A:{lat:43.3695,lng:-80.4658,city:"Kitchener"},N2B:{lat:43.4383,lng:-80.4432,city:"Kitchener"},N2C:{lat:43.407,lng:-80.4432,city:"Kitchener"},N2E:{lat:43.407,lng:-80.4658,city:"Kitchener"},N2G:{lat:43.4508,lng:-80.4883,city:"Kitchener"},N2H:{lat:43.4633,lng:-80.5108,city:"Kitchener"},N2J:{lat:43.4758,lng:-80.5108,city:"Waterloo"},N2K:{lat:43.4758,lng:-80.5446,city:"Waterloo"},N2L:{lat:43.4758,lng:-80.5559,city:"Waterloo"},N2M:{lat:43.432,lng:-80.5221,city:"Kitchener"},N2N:{lat:43.432,lng:-80.4995,city:"Kitchener"},N2P:{lat:43.4008,lng:-80.5108,city:"Kitchener"},N2R:{lat:43.4633,lng:-80.5671,city:"Waterloo"},N2T:{lat:43.4883,lng:-80.5896,city:"Waterloo"},N2V:{lat:43.507,lng:-80.5671,city:"Waterloo"},N3A:{lat:43.3758,lng:-80.3207,city:"Ayr"},N3B:{lat:43.5258,lng:-80.5446,city:"Elmira"},N3C:{lat:43.3445,lng:-80.3545,city:"Paris"},N3H:{lat:43.1883,lng:-80.3207,city:"Woodstock"},N3L:{lat:42.982,lng:-80.7595,city:"Tillsonburg"},N3P:{lat:43.0695,lng:-80.3432,city:"Norwich"},N3R:{lat:43.1383,lng:-80.2645,city:"Brantford"},N3S:{lat:43.1383,lng:-80.2195,city:"Brantford"},N3T:{lat:43.1508,lng:-80.2645,city:"Brantford"},N3V:{lat:43.1133,lng:-80.287,city:"Brantford"},N3W:{lat:43.1758,lng:-80.2532,city:"Brantford"},N4B:{lat:43.0695,lng:-80.7482,city:"Ingersoll"},N4G:{lat:43.3383,lng:-80.9045,city:"Stratford"},N4K:{lat:44.0633,lng:-80.9383,city:"Hanover"},N4L:{lat:43.732,lng:-81.337,city:"Wingham"},N4N:{lat:44.1883,lng:-81.072,city:"Walkerton"},N4S:{lat:43.132,lng:-80.7482,city:"Woodstock"},N4T:{lat:43.1133,lng:-80.7707,city:"Woodstock"},N4V:{lat:43.1195,lng:-80.8045,city:"Woodstock"},N4W:{lat:43.882,lng:-80.6582,city:"Arthur"},N4X:{lat:43.0195,lng:-80.7707,city:"Woodstock"},N4Z:{lat:43.0258,lng:-80.692,city:"Woodstock"},N5A:{lat:43.0633,lng:-81.027,city:"St. Marys"},N5C:{lat:43.032,lng:-81.1845,city:"Exeter"},N5H:{lat:42.982,lng:-80.4207,city:"Simcoe"},N5L:{lat:42.8695,lng:-80.4432,city:"Port Dover"},N5P:{lat:43.007,lng:-80.5108,city:"Delhi"},N5R:{lat:42.8508,lng:-80.2645,city:"Jarvis"},N5V:{lat:43.0133,lng:-81.207,city:"London"},N5W:{lat:43.0008,lng:-81.1845,city:"London"},N5X:{lat:43.0633,lng:-81.2408,city:"London"},N5Y:{lat:43.032,lng:-81.2408,city:"London"},N5Z:{lat:43.007,lng:-81.252,city:"London"},N6A:{lat:42.982,lng:-81.252,city:"London"},N6B:{lat:42.982,lng:-81.2295,city:"London"},N6C:{lat:42.9633,lng:-81.2295,city:"London"},N6E:{lat:42.9445,lng:-81.207,city:"London"},N6G:{lat:43.0195,lng:-81.2745,city:"London"},N6H:{lat:43.0008,lng:-81.3195,city:"London"},N6J:{lat:42.9695,lng:-81.297,city:"London"},N6K:{lat:42.9383,lng:-81.297,city:"London"},N6L:{lat:42.9133,lng:-81.2633,city:"London"},N6M:{lat:43.082,lng:-81.3083,city:"London"},N6N:{lat:42.9133,lng:-81.1845,city:"London"},N6P:{lat:42.932,lng:-81.3308,city:"London"},N7A:{lat:42.9508,lng:-81.6383,city:"Strathroy"},N7G:{lat:42.9633,lng:-82.0158,city:"Sarnia"},N7L:{lat:42.3383,lng:-81.8308,city:"Chatham"},N7M:{lat:42.4008,lng:-81.8645,city:"Chatham"},N7S:{lat:42.9758,lng:-82.3833,city:"Sarnia"},N7T:{lat:42.9883,lng:-82.372,city:"Sarnia"},N7V:{lat:43.0008,lng:-82.3833,city:"Point Edward"},N7W:{lat:42.9445,lng:-82.3383,city:"Sarnia"},N7X:{lat:42.9508,lng:-82.3608,city:"Sarnia"},N8A:{lat:42.2958,lng:-82.1095,city:"Wallaceburg"},N8H:{lat:42.057,lng:-82.587,city:"Leamington"},N8M:{lat:42.1633,lng:-82.7783,city:"Kingsville"},N8N:{lat:42.2945,lng:-82.9433,city:"Amherstburg"},N8P:{lat:42.332,lng:-82.9433,city:"Amherstburg"},N8R:{lat:42.2633,lng:-82.9095,city:"Essex"},N8S:{lat:42.2758,lng:-82.8308,city:"Kingsville"},N8T:{lat:42.2695,lng:-82.7108,city:"Wheatley"},N8V:{lat:42.3445,lng:-83.022,city:"Windsor"},N8W:{lat:42.2945,lng:-83.0108,city:"Windsor"},N8X:{lat:42.2945,lng:-83.0333,city:"Windsor"},N8Y:{lat:42.3258,lng:-83.0108,city:"Windsor"},N9A:{lat:42.3195,lng:-83.0445,city:"Windsor"},N9B:{lat:42.3008,lng:-83.067,city:"Windsor"},N9C:{lat:42.2883,lng:-83.067,city:"Windsor"},N9E:{lat:42.2633,lng:-83.0558,city:"Windsor"},N9G:{lat:42.282,lng:-83.0895,city:"Windsor"},N9H:{lat:42.2695,lng:-83.022,city:"Tecumseh"},N9J:{lat:42.2508,lng:-82.977,city:"Tecumseh"},N9K:{lat:42.2258,lng:-82.9658,city:"Tecumseh"},N9V:{lat:42.3133,lng:-83.0783,city:"Windsor"},N9Y:{lat:42.332,lng:-83.0558,city:"Windsor"},P0A:{lat:46.3167,lng:-79.9333,city:"Parry Sound District"},P0B:{lat:46.4833,lng:-80,city:"Sudbury District"},P0C:{lat:44.75,lng:-79.9167,city:"Muskoka"},P0E:{lat:46.5,lng:-81,city:"Sudbury District"},P0G:{lat:46,lng:-81.5,city:"Manitoulin"},P0H:{lat:45.35,lng:-79.2167,city:"Muskoka"},P0J:{lat:47.0833,lng:-79.35,city:"Temiskaming"},P0K:{lat:47.5333,lng:-79.6667,city:"Temiskaming"},P0L:{lat:48,lng:-79.75,city:"Cochrane District"},P0M:{lat:46,lng:-80.5,city:"Sudbury District"},P0N:{lat:48,lng:-82,city:"Algoma District"},P0P:{lat:47,lng:-84.5,city:"Algoma District"},P0R:{lat:46.5,lng:-84.5,city:"Algoma District"},P0S:{lat:46.5,lng:-83,city:"Algoma District"},P0T:{lat:49.7667,lng:-86.95,city:"Thunder Bay District"},P0V:{lat:50,lng:-88,city:"Thunder Bay District"},P0W:{lat:52,lng:-90,city:"Kenora District"},P0X:{lat:51,lng:-93.5,city:"Kenora District"},P1A:{lat:46.3167,lng:-79.4667,city:"North Bay"},P1B:{lat:46.3042,lng:-79.4617,city:"North Bay"},P1C:{lat:46.2792,lng:-79.4392,city:"North Bay"},P1H:{lat:45.3833,lng:-79.2167,city:"Huntsville"},P1L:{lat:45.0333,lng:-79.3,city:"Bracebridge"},P1P:{lat:45.0208,lng:-79.3025,city:"Bracebridge"},P2A:{lat:46.0167,lng:-79.65,city:"Powassan"},P2B:{lat:46.15,lng:-79.3833,city:"Mattawa"},P2N:{lat:48.4833,lng:-81.3333,city:"Timmins"},P3A:{lat:46.4917,lng:-80.9592,city:"Sudbury"},P3B:{lat:46.5042,lng:-80.9817,city:"Sudbury"},P3C:{lat:46.4792,lng:-81.0042,city:"Sudbury"},P3E:{lat:46.4917,lng:-81.0267,city:"Sudbury"},P3G:{lat:46.4667,lng:-81.0492,city:"Sudbury"},P3L:{lat:46.5792,lng:-80.7992,city:"Hanmer"},P3N:{lat:46.5167,lng:-80.8217,city:"Val Caron"},P3P:{lat:46.5292,lng:-80.8667,city:"Chelmsford"},P3Y:{lat:46.3167,lng:-79.9333,city:"Parry Sound"},P4N:{lat:48.4583,lng:-81.3283,city:"Timmins"},P4P:{lat:48.4458,lng:-81.3508,city:"Timmins"},P4R:{lat:48.4333,lng:-81.3733,city:"Timmins"},P5A:{lat:46.5167,lng:-82.7333,city:"Elliot Lake"},P5E:{lat:46.2833,lng:-82.8333,city:"Blind River"},P5N:{lat:48.75,lng:-80.75,city:"Kapuskasing"},P6A:{lat:46.5292,lng:-84.3467,city:"Sault Ste. Marie"},P6B:{lat:46.5042,lng:-84.3467,city:"Sault Ste. Marie"},P6C:{lat:46.5167,lng:-84.3692,city:"Sault Ste. Marie"},P7A:{lat:48.4,lng:-89.25,city:"Thunder Bay"},P7B:{lat:48.3833,lng:-89.2667,city:"Thunder Bay"},P7C:{lat:48.4167,lng:-89.2833,city:"Thunder Bay"},P7E:{lat:48.4333,lng:-89.3,city:"Thunder Bay"},P7G:{lat:48.45,lng:-89.3167,city:"Thunder Bay"},P7J:{lat:48.4667,lng:-89.3333,city:"Thunder Bay"},P7K:{lat:48.4833,lng:-89.35,city:"Thunder Bay"},P8N:{lat:49.7667,lng:-94.4833,city:"Kenora"},P8T:{lat:50.1167,lng:-91.9167,city:"Sioux Lookout"},P9A:{lat:49.0667,lng:-88.15,city:"Marathon"},P9N:{lat:48.85,lng:-88.3333,city:"Nipigon"}},yde={M:{lat:43.6532,lng:-79.3832,city:"Toronto"},L:{lat:43.589,lng:-79.6441,city:"GTA/Peel"},K:{lat:45.4215,lng:-75.6972,city:"Ottawa/Eastern Ontario"},N:{lat:43.0096,lng:-81.2737,city:"Southwestern Ontario"},P:{lat:46.4917,lng:-80.993,city:"Northern Ontario"},H:{lat:45.5017,lng:-73.5673,city:"Montreal"},G:{lat:46.8139,lng:-71.208,city:"Quebec City"},J:{lat:45.5,lng:-73,city:"Quebec Rural"},V:{lat:49.2827,lng:-123.1207,city:"Vancouver/BC"},T:{lat:51.0447,lng:-114.0719,city:"Calgary/Alberta"},R:{lat:49.8951,lng:-97.1384,city:"Winnipeg/Manitoba"},S:{lat:52.1332,lng:-106.67,city:"Saskatchewan"},B:{lat:44.6488,lng:-63.5752,city:"Nova Scotia"},E:{lat:45.9636,lng:-66.6431,city:"New Brunswick"},A:{lat:47.5615,lng:-52.7126,city:"Newfoundland"},C:{lat:46.2382,lng:-63.1311,city:"PEI"}},E0=e=>{if(!Ri(e))return null;const t=e.replace(/\s/g,"").toUpperCase(),r=t.substring(0,3),n=t.charAt(0),a=vde(t),i=(a%1e3/1e3-.5)*.01,o=((a>>10)%1e3/1e3-.5)*.01;if(j3[r]){const c=j3[r];return{lat:c.lat+i,lng:c.lng+o}}const l=yde[n];if(l){const c=parseInt(t.charAt(1))*.015;return{lat:l.lat+i+c,lng:l.lng+o-c}}return null},hC=()=>({lat:44.1628,lng:-77.3832}),pE=(e,t)=>{const r=E0(e),n=E0(t);if(!r||!n)return null;const a=6371,i=(n.lat-r.lat)*Math.PI/180,o=(n.lng-r.lng)*Math.PI/180,l=Math.sin(i/2)*Math.sin(i/2)+Math.cos(r.lat*Math.PI/180)*Math.cos(n.lat*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2),c=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l));return a*c},N3=200,bde=(e,t,r,n)=>{const i=(r-e)*Math.PI/180,o=(n-t)*Math.PI/180,l=Math.sin(i/2)*Math.sin(i/2)+Math.cos(e*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2);return 6371e3*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))},h9=async e=>{const{fetchActiveServiceRadius:t}=await Po(async()=>{const{fetchActiveServiceRadius:d}=await Promise.resolve().then(()=>Yxe);return{fetchActiveServiceRadius:d}},void 0),r=await t(),n=localStorage.getItem("pswdirect_psw_profiles");if(!n)return{withinCoverage:!1,closestDistance:null,nearestPSWCity:null,activeRadiusKm:r,message:"We are currently expanding! We haven't reached your area yet, but check back soon."};let a;try{a=JSON.parse(n)}catch{return{withinCoverage:!1,closestDistance:null,nearestPSWCity:null,activeRadiusKm:r,message:"Error checking coverage. Please try again."}}const i=a.filter(d=>d.vettingStatus==="approved"&&d.homePostalCode&&Ri(d.homePostalCode));if(i.length===0)return{withinCoverage:!1,closestDistance:null,nearestPSWCity:null,activeRadiusKm:r,message:"We are currently expanding! We haven't reached your area yet, but check back soon."};let o=null,l=null,c=!1;for(const d of i){const h=pE(e,d.homePostalCode);h!==null&&((o===null||h<o)&&(o=h,l=d.homeCity||null),h<=r&&(c=!0))}return c?{withinCoverage:!0,closestDistance:o!==null?Math.round(o):null,nearestPSWCity:l,activeRadiusKm:r,message:"Great news! We have PSWs available in your area."}:{withinCoverage:!1,closestDistance:o!==null?Math.round(o):null,nearestPSWCity:l,activeRadiusKm:r,message:"We are currently expanding! We haven't reached your area yet, but check back soon."}},wde=[{tag:"{{client_name}}",description:"Client's full name"},{tag:"{{psa_first_name}}",description:"PSA's first name only"},{tag:"{{psa_photo_url}}",description:"PSA's profile photo URL"},{tag:"{{psw_number}}",description:"PSW identifier (e.g. PSW-1001)"},{tag:"{{booking_code}}",description:"Booking code (e.g. CDT-000001)"},{tag:"{{job_time}}",description:"Scheduled job time"},{tag:"{{job_date}}",description:"Scheduled job date"},{tag:"{{office_number}}",description:"Office phone number"},{tag:"{{booking_id}}",description:"Booking reference (legacy)"},{tag:"{{services}}",description:"List of booked services"},{tag:"{{tasks_completed}}",description:"List of completed tasks"},{tag:"{{observations}}",description:"Care notes/observations"},{tag:"{{address}}",description:"Service address"}],Ea="(249) 288-4787",gE=`
---
For your privacy, please use our office number for all follow-up communication. Do not contact the PSA directly.
Office: {{office_number}}`,T0=[{id:"psa-signup",name:"New PSA Sign-up",description:"Welcome message sent when a PSA submits their application",type:"email",emailSubject:"Welcome to PSA Direct! ",emailBody:`Hi {{psa_first_name}},

Welcome to PSA Direct! Your application has been received and is under review.

Once approved, you'll be able to:
- View and claim available shifts in your area
- Track your earnings and hours
- Connect with clients who need your care

Our team will review your credentials within 2-3 business days.

Questions? Call us at {{office_number}}

Best regards,
The PSA Direct Team`,smsText:""},{id:"psa-approved",name:"PSA Approved",description:"Welcome to the team message with shift warning",type:"email",emailSubject:"You're Approved! Welcome to the PSA Direct Team ",emailBody:`Hi {{psa_first_name}},

Congratulations! Your application has been approved and you're now part of the PSA Direct team.

You can now:
 View and claim available shifts in your area
 Track your earnings and completed visits
 Build your reputation with client reviews

 IMPORTANT PROFESSIONAL STANDARDS:
By accepting shifts, you agree to arrive on time and complete all scheduled visits. Any missed or late shifts will result in immediate removal from the platform.

Open the app to view available shifts near you!

Questions? Call us at {{office_number}}

Welcome aboard!
The PSA Direct Team`,smsText:""},{id:"new-job-alert",name:"New Job Alert",description:"Sent to all vetted PSAs when a new booking is available",type:"email",emailSubject:"New Shift Available! ",emailBody:`New shift available!

Date: {{job_date}}
Time: {{job_time}}
Location: {{address}}

Open the app to claim it before someone else does!`,smsText:""},{id:"booking-confirmation",name:"Booking Confirmation",description:"Sent to client immediately after placing a booking",type:"email",emailSubject:"Booking Received - {{booking_code}}",emailBody:`Hi {{client_name}},

Thank you for your booking! We have received your care request.

 Booking Code: {{booking_code}}
 Date: {{job_date}}
 Time: {{job_time}}
 Services: {{services}}

We are now matching you with a qualified caregiver. You will receive another email once a PSA accepts your booking.

Questions? Call our office at {{office_number}}

Thank you for choosing PSA Direct!`,smsText:""},{id:"job-claimed",name:"Job Claimed",description:"Sent to the client when a PSW claims their booking",type:"email",emailSubject:"Your PSW is Confirmed!",emailBody:`Hi {{client_name}},

Great news! A qualified PSW has claimed your booking.

{{#psw_photo_url}}
<div style="text-align: center; margin: 20px 0;">
  <img src="{{psw_photo_url}}" alt="Your PSW" style="width: 100px; height: 100px; border-radius: 50%; object-fit: cover; border: 3px solid #0077B5;" />
  <p style="margin-top: 10px; font-weight: bold; color: #333;">{{psw_first_name}}</p>
</div>
{{/psw_photo_url}}

Booking Details:
 Booking Code: {{booking_code}}
 Date: {{job_date}}
 Time: {{job_time}}
 Your PSW: {{psw_first_name}}

Your PSW will arrive at your location at the scheduled time.

IMPORTANT: Cancellations within 4 hours are non-refundable.

Questions or need to reschedule? Call our office at {{office_number}}

Thank you for choosing PSA Direct!`,smsText:""},{id:"psw-arrived",name:"PSW Arrived",description:"Sent to client when PSW checks in at location",type:"email",emailSubject:"Your PSW Has Arrived",emailBody:`Hi {{client_name}},

Your caregiver {{psw_first_name}} has just checked in and is now with your loved one.

{{#psw_photo_url}}
<div style="text-align: center; margin: 20px 0;">
  <img src="{{psw_photo_url}}" alt="Your PSW" style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; border: 2px solid #28a745;" />
</div>
{{/psw_photo_url}}

 Booking Code: {{booking_code}}
 Date: {{job_date}}
 Check-in Time: {{job_time}}
 PSW: {{psw_first_name}}

You will receive a care summary report when the visit is complete.

If you have any concerns during the visit, please contact our office at {{office_number}}

Thank you for choosing PSA Direct!`,smsText:""},{id:"care-sheet-delivery",name:"Care Sheet Delivery",description:"Post-visit summary sent to the client after PSW signs out",type:"email",emailSubject:"Care Visit Summary - {{job_date}}",emailBody:`Hi {{client_name}},

Here's a summary of today's care visit:

 Date: {{job_date}}
 PSW: {{psw_first_name}}

Tasks Completed:
{{tasks_completed}}

Observations:
{{observations}}`,smsText:""},{id:"hospital-discharge-delivery",name:"Hospital Discharge Delivery",description:"Sent to client when patient is discharged from hospital with PSW care",type:"email",emailSubject:"Hospital Discharge Summary - {{job_date}}",emailBody:`Hi {{client_name}},

Your loved one has been safely discharged from the hospital and is now home with the care of {{psw_first_name}}.

{{#psw_photo_url}}
<div style="text-align: center; margin: 20px 0;">
  <img src="{{psw_photo_url}}" alt="Your PSW" style="width: 100px; height: 100px; border-radius: 50%; object-fit: cover; border: 3px solid #0077B5;" />
  <p style="margin-top: 10px; font-weight: bold; color: #333;">{{psw_first_name}}</p>
</div>
{{/psw_photo_url}}

 Date: {{job_date}}
 Discharge From: Hospital
 Caregiver: {{psw_first_name}}

<div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 16px; margin: 20px 0;">
  <strong> Discharge Papers Attached</strong>
  <p style="margin: 8px 0 0 0; font-size: 14px;">The official hospital discharge documents are attached to this email for your records.</p>
</div>

Tasks Completed:
{{tasks_completed}}

Observations:
{{observations}}

If you have any questions about the discharge instructions or ongoing care, please contact our office at {{office_number}}.

Thank you for choosing PSA Direct!`,smsText:""}],Jh=()=>{const e=localStorage.getItem("pswdirect_message_templates");if(e)try{return JSON.parse(e)}catch{return T0}return T0},gx=e=>{localStorage.setItem("pswdirect_message_templates",JSON.stringify(e))},jde=e=>{const t=Jh(),r={...e,id:`custom-${Date.now()}`,isCustom:!0};return t.push(r),gx(t),t},Nde=e=>{const t=Jh(),r=t.find(n=>n.id===e);if(r!=null&&r.isCustom){const n=t.filter(a=>a.id!==e);return gx(n),n}return t},_de=e=>{const t=Jh(),r=t.find(n=>n.id===e);if(r){const n={...r,id:`custom-${Date.now()}`,name:`${r.name} (Copy)`,isCustom:!0};t.push(n),gx(t)}return t},Sde=()=>(gx(T0),T0),wh=(e,t)=>{let r=e;t.office_number||(t.office_number=Vi());const n=/\{\{#(\w+)\}\}([\s\S]*?)\{\{\/\1\}\}/g;return r=r.replace(n,(a,i,o)=>t[i]&&t[i].trim()?o:""),Object.entries(t).forEach(([a,i])=>{const o=`{{${a}}}`;r=r.replace(new RegExp(o.replace(/[{}]/g,"\\$&"),"g"),i)}),r},f9=e=>Jh().find(t=>t.id===e);let xE=null;const Vi=()=>xE||Ea,Kf=async()=>{try{const{supabase:e}=await Po(async()=>{const{supabase:a}=await Promise.resolve().then(()=>Vf);return{supabase:a}},void 0),{data:t,error:r}=await e.from("app_settings").select("setting_value").eq("setting_key","office_number").maybeSingle();if(r)return console.error("Error fetching office number:",r),Ea;const n=(t==null?void 0:t.setting_value)||Ea;return xE=n,n}catch(e){return console.error("Error fetching office number:",e),Ea}},Cde=async e=>{try{const{supabase:t}=await Po(async()=>{const{supabase:n}=await Promise.resolve().then(()=>Vf);return{supabase:n}},void 0),{error:r}=await t.from("app_settings").update({setting_value:e}).eq("setting_key","office_number");return r?(console.error("Error saving office number:",r),!1):(xE=e,!0)}catch(t){return console.error("Error saving office number:",t),!1}},Pde=async()=>({emailApiKey:"",emailProvider:"resend",officeNumber:await Kf()}),kde=async e=>(e.officeNumber&&await Cde(e.officeNumber),{emailApiKey:"",emailProvider:"resend",officeNumber:e.officeNumber||Vi()}),$_={adminCc:[],alertRecipients:["admin@psadirect.ca"]},Ede=()=>{const e=localStorage.getItem("pswdirect_notification_recipients");if(e)try{return{...$_,...JSON.parse(e)}}catch{return $_}return $_},_3=e=>{localStorage.setItem("pswdirect_notification_recipients",JSON.stringify(e))};var Yf={};/**
 * @license React
 * react-dom-server-legacy.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m9=x;function wt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ws=Object.prototype.hasOwnProperty,Tde=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S3={},C3={};function p9(e){return Ws.call(C3,e)?!0:Ws.call(S3,e)?!1:Tde.test(e)?C3[e]=!0:(S3[e]=!0,!1)}function Ds(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var ts={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ts[e]=new Ds(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ts[t]=new Ds(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ts[e]=new Ds(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ts[e]=new Ds(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ts[e]=new Ds(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ts[e]=new Ds(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ts[e]=new Ds(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ts[e]=new Ds(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ts[e]=new Ds(e,5,!1,e.toLowerCase(),null,!1,!1)});var vE=/[\-:]([a-z])/g;function yE(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(vE,yE);ts[t]=new Ds(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(vE,yE);ts[t]=new Ds(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(vE,yE);ts[t]=new Ds(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ts[e]=new Ds(e,1,!1,e.toLowerCase(),null,!1,!1)});ts.xlinkHref=new Ds("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ts[e]=new Ds(e,1,!1,e.toLowerCase(),null,!0,!0)});var Sy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ade=["Webkit","ms","Moz","O"];Object.keys(Sy).forEach(function(e){Ade.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Sy[t]=Sy[e]})});var Ode=/["'&<>]/;function js(e){if(typeof e=="boolean"||typeof e=="number")return""+e;e=""+e;var t=Ode.exec(e);if(t){var r="",n,a=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}a!==n&&(r+=e.substring(a,n)),a=n+1,r+=t}e=a!==n?r+e.substring(a,n):r}return e}var Mde=/([A-Z])/g,Ide=/^ms-/,fC=Array.isArray;function Lo(e,t){return{insertionMode:e,selectedValue:t}}function Rde(e,t,r){switch(t){case"select":return Lo(1,r.value!=null?r.value:r.defaultValue);case"svg":return Lo(2,null);case"math":return Lo(3,null);case"foreignObject":return Lo(1,null);case"table":return Lo(4,null);case"thead":case"tbody":case"tfoot":return Lo(5,null);case"colgroup":return Lo(7,null);case"tr":return Lo(6,null)}return 4<=e.insertionMode||e.insertionMode===0?Lo(1,null):e}var P3=new Map;function g9(e,t,r){if(typeof r!="object")throw Error(wt(62));t=!0;for(var n in r)if(Ws.call(r,n)){var a=r[n];if(a!=null&&typeof a!="boolean"&&a!==""){if(n.indexOf("--")===0){var i=js(n);a=js((""+a).trim())}else{i=n;var o=P3.get(i);o!==void 0||(o=js(i.replace(Mde,"-$1").toLowerCase().replace(Ide,"-ms-")),P3.set(i,o)),i=o,a=typeof a=="number"?a===0||Ws.call(Sy,n)?""+a:a+"px":js((""+a).trim())}t?(t=!1,e.push(' style="',i,":",a)):e.push(";",i,":",a)}}t||e.push('"')}function da(e,t,r,n){switch(r){case"style":g9(e,t,n);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N"){if(t=ts.hasOwnProperty(r)?ts[r]:null,t!==null){switch(typeof n){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(r=t.attributeName,t.type){case 3:n&&e.push(" ",r,'=""');break;case 4:n===!0?e.push(" ",r,'=""'):n!==!1&&e.push(" ",r,'="',js(n),'"');break;case 5:isNaN(n)||e.push(" ",r,'="',js(n),'"');break;case 6:!isNaN(n)&&1<=n&&e.push(" ",r,'="',js(n),'"');break;default:t.sanitizeURL&&(n=""+n),e.push(" ",r,'="',js(n),'"')}}else if(p9(r)){switch(typeof n){case"function":case"symbol":return;case"boolean":if(t=r.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-")return}e.push(" ",r,'="',js(n),'"')}}}function Cy(e,t,r){if(t!=null){if(r!=null)throw Error(wt(60));if(typeof t!="object"||!("__html"in t))throw Error(wt(61));t=t.__html,t!=null&&e.push(""+t)}}function Dde(e){var t="";return m9.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}function L_(e,t,r,n){e.push(ro(r));var a=r=null,i;for(i in t)if(Ws.call(t,i)){var o=t[i];if(o!=null)switch(i){case"children":r=o;break;case"dangerouslySetInnerHTML":a=o;break;default:da(e,n,i,o)}}return e.push(">"),Cy(e,a,r),typeof r=="string"?(e.push(js(r)),null):r}var $de=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,k3=new Map;function ro(e){var t=k3.get(e);if(t===void 0){if(!$de.test(e))throw Error(wt(65,e));t="<"+e,k3.set(e,t)}return t}function Lde(e,t,r,n,a){switch(t){case"select":e.push(ro("select"));var i=null,o=null;for(h in r)if(Ws.call(r,h)){var l=r[h];if(l!=null)switch(h){case"children":i=l;break;case"dangerouslySetInnerHTML":o=l;break;case"defaultValue":case"value":break;default:da(e,n,h,l)}}return e.push(">"),Cy(e,o,i),i;case"option":o=a.selectedValue,e.push(ro("option"));var c=l=null,d=null,h=null;for(i in r)if(Ws.call(r,i)){var f=r[i];if(f!=null)switch(i){case"children":l=f;break;case"selected":d=f;break;case"dangerouslySetInnerHTML":h=f;break;case"value":c=f;default:da(e,n,i,f)}}if(o!=null)if(r=c!==null?""+c:Dde(l),fC(o)){for(n=0;n<o.length;n++)if(""+o[n]===r){e.push(' selected=""');break}}else""+o===r&&e.push(' selected=""');else d&&e.push(' selected=""');return e.push(">"),Cy(e,h,l),l;case"textarea":e.push(ro("textarea")),h=o=i=null;for(l in r)if(Ws.call(r,l)&&(c=r[l],c!=null))switch(l){case"children":h=c;break;case"value":i=c;break;case"defaultValue":o=c;break;case"dangerouslySetInnerHTML":throw Error(wt(91));default:da(e,n,l,c)}if(i===null&&o!==null&&(i=o),e.push(">"),h!=null){if(i!=null)throw Error(wt(92));if(fC(h)&&1<h.length)throw Error(wt(93));i=""+h}return typeof i=="string"&&i[0]===`
`&&e.push(`
`),i!==null&&e.push(js(""+i)),null;case"input":e.push(ro("input")),c=h=l=i=null;for(o in r)if(Ws.call(r,o)&&(d=r[o],d!=null))switch(o){case"children":case"dangerouslySetInnerHTML":throw Error(wt(399,"input"));case"defaultChecked":c=d;break;case"defaultValue":l=d;break;case"checked":h=d;break;case"value":i=d;break;default:da(e,n,o,d)}return h!==null?da(e,n,"checked",h):c!==null&&da(e,n,"checked",c),i!==null?da(e,n,"value",i):l!==null&&da(e,n,"value",l),e.push("/>"),null;case"menuitem":e.push(ro("menuitem"));for(var m in r)if(Ws.call(r,m)&&(i=r[m],i!=null))switch(m){case"children":case"dangerouslySetInnerHTML":throw Error(wt(400));default:da(e,n,m,i)}return e.push(">"),null;case"title":e.push(ro("title")),i=null;for(f in r)if(Ws.call(r,f)&&(o=r[f],o!=null))switch(f){case"children":i=o;break;case"dangerouslySetInnerHTML":throw Error(wt(434));default:da(e,n,f,o)}return e.push(">"),i;case"listing":case"pre":e.push(ro(t)),o=i=null;for(c in r)if(Ws.call(r,c)&&(l=r[c],l!=null))switch(c){case"children":i=l;break;case"dangerouslySetInnerHTML":o=l;break;default:da(e,n,c,l)}if(e.push(">"),o!=null){if(i!=null)throw Error(wt(60));if(typeof o!="object"||!("__html"in o))throw Error(wt(61));r=o.__html,r!=null&&(typeof r=="string"&&0<r.length&&r[0]===`
`?e.push(`
`,r):e.push(""+r))}return typeof i=="string"&&i[0]===`
`&&e.push(`
`),i;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":e.push(ro(t));for(var p in r)if(Ws.call(r,p)&&(i=r[p],i!=null))switch(p){case"children":case"dangerouslySetInnerHTML":throw Error(wt(399,t));default:da(e,n,p,i)}return e.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return L_(e,r,t,n);case"html":return a.insertionMode===0&&e.push("<!DOCTYPE html>"),L_(e,r,t,n);default:if(t.indexOf("-")===-1&&typeof r.is!="string")return L_(e,r,t,n);e.push(ro(t)),o=i=null;for(d in r)if(Ws.call(r,d)&&(l=r[d],l!=null))switch(d){case"children":i=l;break;case"dangerouslySetInnerHTML":o=l;break;case"style":g9(e,n,l);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:p9(d)&&typeof l!="function"&&typeof l!="symbol"&&e.push(" ",d,'="',js(l),'"')}return e.push(">"),Cy(e,o,i),i}}function E3(e,t,r){if(e.push('<!--$?--><template id="'),r===null)throw Error(wt(395));return e.push(r),e.push('"></template>')}function Fde(e,t,r,n){switch(r.insertionMode){case 0:case 1:return e.push('<div hidden id="'),e.push(t.segmentPrefix),t=n.toString(16),e.push(t),e.push('">');case 2:return e.push('<svg aria-hidden="true" style="display:none" id="'),e.push(t.segmentPrefix),t=n.toString(16),e.push(t),e.push('">');case 3:return e.push('<math aria-hidden="true" style="display:none" id="'),e.push(t.segmentPrefix),t=n.toString(16),e.push(t),e.push('">');case 4:return e.push('<table hidden id="'),e.push(t.segmentPrefix),t=n.toString(16),e.push(t),e.push('">');case 5:return e.push('<table hidden><tbody id="'),e.push(t.segmentPrefix),t=n.toString(16),e.push(t),e.push('">');case 6:return e.push('<table hidden><tr id="'),e.push(t.segmentPrefix),t=n.toString(16),e.push(t),e.push('">');case 7:return e.push('<table hidden><colgroup id="'),e.push(t.segmentPrefix),t=n.toString(16),e.push(t),e.push('">');default:throw Error(wt(397))}}function Bde(e,t){switch(t.insertionMode){case 0:case 1:return e.push("</div>");case 2:return e.push("</svg>");case 3:return e.push("</math>");case 4:return e.push("</table>");case 5:return e.push("</tbody></table>");case 6:return e.push("</tr></table>");case 7:return e.push("</colgroup></table>");default:throw Error(wt(397))}}var zde=/[<\u2028\u2029]/g;function F_(e){return JSON.stringify(e).replace(zde,function(t){switch(t){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function Ude(e,t){return t=t===void 0?"":t,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:t+"P:",segmentPrefix:t+"S:",boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:e}}function T3(e,t,r,n){return r.generateStaticMarkup?(e.push(js(t)),!1):(t===""?e=n:(n&&e.push("<!-- -->"),e.push(js(t)),e=!0),e)}var wp=Object.assign,Wde=Symbol.for("react.element"),x9=Symbol.for("react.portal"),v9=Symbol.for("react.fragment"),y9=Symbol.for("react.strict_mode"),b9=Symbol.for("react.profiler"),w9=Symbol.for("react.provider"),j9=Symbol.for("react.context"),N9=Symbol.for("react.forward_ref"),_9=Symbol.for("react.suspense"),S9=Symbol.for("react.suspense_list"),C9=Symbol.for("react.memo"),bE=Symbol.for("react.lazy"),Hde=Symbol.for("react.scope"),Vde=Symbol.for("react.debug_trace_mode"),qde=Symbol.for("react.legacy_hidden"),Gde=Symbol.for("react.default_value"),A3=Symbol.iterator;function mC(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case v9:return"Fragment";case x9:return"Portal";case b9:return"Profiler";case y9:return"StrictMode";case _9:return"Suspense";case S9:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case j9:return(e.displayName||"Context")+".Consumer";case w9:return(e._context.displayName||"Context")+".Provider";case N9:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case C9:return t=e.displayName||null,t!==null?t:mC(e.type)||"Memo";case bE:t=e._payload,e=e._init;try{return mC(e(t))}catch{}}return null}var P9={};function O3(e,t){if(e=e.contextTypes,!e)return P9;var r={},n;for(n in e)r[n]=t[n];return r}var gd=null;function Ww(e,t){if(e!==t){e.context._currentValue2=e.parentValue,e=e.parent;var r=t.parent;if(e===null){if(r!==null)throw Error(wt(401))}else{if(r===null)throw Error(wt(401));Ww(e,r)}t.context._currentValue2=t.value}}function k9(e){e.context._currentValue2=e.parentValue,e=e.parent,e!==null&&k9(e)}function E9(e){var t=e.parent;t!==null&&E9(t),e.context._currentValue2=e.value}function T9(e,t){if(e.context._currentValue2=e.parentValue,e=e.parent,e===null)throw Error(wt(402));e.depth===t.depth?Ww(e,t):T9(e,t)}function A9(e,t){var r=t.parent;if(r===null)throw Error(wt(402));e.depth===r.depth?Ww(e,r):A9(e,r),t.context._currentValue2=t.value}function A0(e){var t=gd;t!==e&&(t===null?E9(e):e===null?k9(t):t.depth===e.depth?Ww(t,e):t.depth>e.depth?T9(t,e):A9(t,e),gd=e)}var M3={isMounted:function(){return!1},enqueueSetState:function(e,t){e=e._reactInternals,e.queue!==null&&e.queue.push(t)},enqueueReplaceState:function(e,t){e=e._reactInternals,e.replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function I3(e,t,r,n){var a=e.state!==void 0?e.state:null;e.updater=M3,e.props=r,e.state=a;var i={queue:[],replace:!1};e._reactInternals=i;var o=t.contextType;if(e.context=typeof o=="object"&&o!==null?o._currentValue2:n,o=t.getDerivedStateFromProps,typeof o=="function"&&(o=o(r,a),a=o==null?a:wp({},a,o),e.state=a),typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function"&&(typeof e.UNSAFE_componentWillMount=="function"||typeof e.componentWillMount=="function"))if(t=e.state,typeof e.componentWillMount=="function"&&e.componentWillMount(),typeof e.UNSAFE_componentWillMount=="function"&&e.UNSAFE_componentWillMount(),t!==e.state&&M3.enqueueReplaceState(e,e.state,null),i.queue!==null&&0<i.queue.length)if(t=i.queue,o=i.replace,i.queue=null,i.replace=!1,o&&t.length===1)e.state=t[0];else{for(i=o?t[0]:e.state,a=!0,o=o?1:0;o<t.length;o++){var l=t[o];l=typeof l=="function"?l.call(e,i,r,n):l,l!=null&&(a?(a=!1,i=wp({},i,l)):wp(i,l))}e.state=i}else i.queue=null}var Kde={id:1,overflow:""};function pC(e,t,r){var n=e.id;e=e.overflow;var a=32-Py(n)-1;n&=~(1<<a),r+=1;var i=32-Py(t)+a;if(30<i){var o=a-a%5;return i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,{id:1<<32-Py(t)+a|r<<a|n,overflow:i+e}}return{id:1<<i|r<<a|n,overflow:e}}var Py=Math.clz32?Math.clz32:Xde,Yde=Math.log,Zde=Math.LN2;function Xde(e){return e>>>=0,e===0?32:31-(Yde(e)/Zde|0)|0}function Jde(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qde=typeof Object.is=="function"?Object.is:Jde,hl=null,wE=null,ky=null,br=null,rp=!1,O0=!1,dg=0,tc=null,Hw=0;function ld(){if(hl===null)throw Error(wt(321));return hl}function R3(){if(0<Hw)throw Error(wt(312));return{memoizedState:null,queue:null,next:null}}function jE(){return br===null?ky===null?(rp=!1,ky=br=R3()):(rp=!0,br=ky):br.next===null?(rp=!1,br=br.next=R3()):(rp=!0,br=br.next),br}function NE(){wE=hl=null,O0=!1,ky=null,Hw=0,br=tc=null}function O9(e,t){return typeof t=="function"?t(e):t}function D3(e,t,r){if(hl=ld(),br=jE(),rp){var n=br.queue;if(t=n.dispatch,tc!==null&&(r=tc.get(n),r!==void 0)){tc.delete(n),n=br.memoizedState;do n=e(n,r.action),r=r.next;while(r!==null);return br.memoizedState=n,[n,t]}return[br.memoizedState,t]}return e=e===O9?typeof t=="function"?t():t:r!==void 0?r(t):t,br.memoizedState=e,e=br.queue={last:null,dispatch:null},e=e.dispatch=eue.bind(null,hl,e),[br.memoizedState,e]}function $3(e,t){if(hl=ld(),br=jE(),t=t===void 0?null:t,br!==null){var r=br.memoizedState;if(r!==null&&t!==null){var n=r[1];e:if(n===null)n=!1;else{for(var a=0;a<n.length&&a<t.length;a++)if(!Qde(t[a],n[a])){n=!1;break e}n=!0}if(n)return r[0]}}return e=e(),br.memoizedState=[e,t],e}function eue(e,t,r){if(25<=Hw)throw Error(wt(301));if(e===hl)if(O0=!0,e={action:r,next:null},tc===null&&(tc=new Map),r=tc.get(t),r===void 0)tc.set(t,e);else{for(t=r;t.next!==null;)t=t.next;t.next=e}}function tue(){throw Error(wt(394))}function Iv(){}var L3={readContext:function(e){return e._currentValue2},useContext:function(e){return ld(),e._currentValue2},useMemo:$3,useReducer:D3,useRef:function(e){hl=ld(),br=jE();var t=br.memoizedState;return t===null?(e={current:e},br.memoizedState=e):t},useState:function(e){return D3(O9,e)},useInsertionEffect:Iv,useLayoutEffect:function(){},useCallback:function(e,t){return $3(function(){return e},t)},useImperativeHandle:Iv,useEffect:Iv,useDebugValue:Iv,useDeferredValue:function(e){return ld(),e},useTransition:function(){return ld(),[!1,tue]},useId:function(){var e=wE.treeContext,t=e.overflow;e=e.id,e=(e&~(1<<32-Py(e)-1)).toString(32)+t;var r=Ey;if(r===null)throw Error(wt(404));return t=dg++,e=":"+r.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return ld(),t(e._source)},useSyncExternalStore:function(e,t,r){if(r===void 0)throw Error(wt(407));return r()}},Ey=null,B_=m9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function rue(e){return console.error(e),null}function np(){}function nue(e,t,r,n,a,i,o,l,c){var d=[],h=new Set;return t={destination:null,responseState:t,progressiveChunkSize:n===void 0?12800:n,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:h,pingedTasks:d,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:a===void 0?rue:a,onAllReady:np,onShellReady:o===void 0?np:o,onShellError:np,onFatalError:np},r=M0(t,0,null,r,!1,!1),r.parentFlushed=!0,e=_E(t,e,null,r,h,P9,null,Kde),d.push(e),t}function _E(e,t,r,n,a,i,o,l){e.allPendingTasks++,r===null?e.pendingRootTasks++:r.pendingTasks++;var c={node:t,ping:function(){var d=e.pingedTasks;d.push(c),d.length===1&&R9(e)},blockedBoundary:r,blockedSegment:n,abortSet:a,legacyContext:i,context:o,treeContext:l};return a.add(c),c}function M0(e,t,r,n,a,i){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:n,boundary:r,lastPushedText:a,textEmbedded:i}}function ug(e,t){if(e=e.onError(t),e!=null&&typeof e!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function I0(e,t){var r=e.onShellError;r(t),r=e.onFatalError,r(t),e.destination!==null?(e.status=2,e.destination.destroy(t)):(e.status=1,e.fatalError=t)}function F3(e,t,r,n,a){for(hl={},wE=t,dg=0,e=r(n,a);O0;)O0=!1,dg=0,Hw+=1,br=null,e=r(n,a);return NE(),e}function B3(e,t,r,n){var a=r.render(),i=n.childContextTypes;if(i!=null){var o=t.legacyContext;if(typeof r.getChildContext!="function")n=o;else{r=r.getChildContext();for(var l in r)if(!(l in i))throw Error(wt(108,mC(n)||"Unknown",l));n=wp({},o,r)}t.legacyContext=n,ma(e,t,a),t.legacyContext=o}else ma(e,t,a)}function z3(e,t){if(e&&e.defaultProps){t=wp({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function gC(e,t,r,n,a){if(typeof r=="function")if(r.prototype&&r.prototype.isReactComponent){a=O3(r,t.legacyContext);var i=r.contextType;i=new r(n,typeof i=="object"&&i!==null?i._currentValue2:a),I3(i,r,n,a),B3(e,t,i,r)}else{i=O3(r,t.legacyContext),a=F3(e,t,r,n,i);var o=dg!==0;if(typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0)I3(a,r,n,i),B3(e,t,a,r);else if(o){n=t.treeContext,t.treeContext=pC(n,1,0);try{ma(e,t,a)}finally{t.treeContext=n}}else ma(e,t,a)}else if(typeof r=="string"){switch(a=t.blockedSegment,i=Lde(a.chunks,r,n,e.responseState,a.formatContext),a.lastPushedText=!1,o=a.formatContext,a.formatContext=Rde(o,r,n),xC(e,t,i),a.formatContext=o,r){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:a.chunks.push("</",r,">")}a.lastPushedText=!1}else{switch(r){case qde:case Vde:case y9:case b9:case v9:ma(e,t,n.children);return;case S9:ma(e,t,n.children);return;case Hde:throw Error(wt(343));case _9:e:{r=t.blockedBoundary,a=t.blockedSegment,i=n.fallback,n=n.children,o=new Set;var l={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:o,errorDigest:null},c=M0(e,a.chunks.length,l,a.formatContext,!1,!1);a.children.push(c),a.lastPushedText=!1;var d=M0(e,0,null,a.formatContext,!1,!1);d.parentFlushed=!0,t.blockedBoundary=l,t.blockedSegment=d;try{if(xC(e,t,n),e.responseState.generateStaticMarkup||d.lastPushedText&&d.textEmbedded&&d.chunks.push("<!-- -->"),d.status=1,R0(l,d),l.pendingTasks===0)break e}catch(h){d.status=4,l.forceClientRender=!0,l.errorDigest=ug(e,h)}finally{t.blockedBoundary=r,t.blockedSegment=a}t=_E(e,i,r,c,o,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if(typeof r=="object"&&r!==null)switch(r.$$typeof){case N9:if(n=F3(e,t,r.render,n,a),dg!==0){r=t.treeContext,t.treeContext=pC(r,1,0);try{ma(e,t,n)}finally{t.treeContext=r}}else ma(e,t,n);return;case C9:r=r.type,n=z3(r,n),gC(e,t,r,n,a);return;case w9:if(a=n.children,r=r._context,n=n.value,i=r._currentValue2,r._currentValue2=n,o=gd,gd=n={parent:o,depth:o===null?0:o.depth+1,context:r,parentValue:i,value:n},t.context=n,ma(e,t,a),e=gd,e===null)throw Error(wt(403));n=e.parentValue,e.context._currentValue2=n===Gde?e.context._defaultValue:n,e=gd=e.parent,t.context=e;return;case j9:n=n.children,n=n(r._currentValue2),ma(e,t,n);return;case bE:a=r._init,r=a(r._payload),n=z3(r,n),gC(e,t,r,n,void 0);return}throw Error(wt(130,r==null?r:typeof r,""))}}function ma(e,t,r){if(t.node=r,typeof r=="object"&&r!==null){switch(r.$$typeof){case Wde:gC(e,t,r.type,r.props,r.ref);return;case x9:throw Error(wt(257));case bE:var n=r._init;r=n(r._payload),ma(e,t,r);return}if(fC(r)){U3(e,t,r);return}if(r===null||typeof r!="object"?n=null:(n=A3&&r[A3]||r["@@iterator"],n=typeof n=="function"?n:null),n&&(n=n.call(r))){if(r=n.next(),!r.done){var a=[];do a.push(r.value),r=n.next();while(!r.done);U3(e,t,a)}return}throw e=Object.prototype.toString.call(r),Error(wt(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}typeof r=="string"?(n=t.blockedSegment,n.lastPushedText=T3(t.blockedSegment.chunks,r,e.responseState,n.lastPushedText)):typeof r=="number"&&(n=t.blockedSegment,n.lastPushedText=T3(t.blockedSegment.chunks,""+r,e.responseState,n.lastPushedText))}function U3(e,t,r){for(var n=r.length,a=0;a<n;a++){var i=t.treeContext;t.treeContext=pC(i,n,a);try{xC(e,t,r[a])}finally{t.treeContext=i}}}function xC(e,t,r){var n=t.blockedSegment.formatContext,a=t.legacyContext,i=t.context;try{return ma(e,t,r)}catch(c){if(NE(),typeof c=="object"&&c!==null&&typeof c.then=="function"){r=c;var o=t.blockedSegment,l=M0(e,o.chunks.length,null,o.formatContext,o.lastPushedText,!0);o.children.push(l),o.lastPushedText=!1,e=_E(e,t.node,t.blockedBoundary,l,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,r.then(e,e),t.blockedSegment.formatContext=n,t.legacyContext=a,t.context=i,A0(i)}else throw t.blockedSegment.formatContext=n,t.legacyContext=a,t.context=i,A0(i),c}}function sue(e){var t=e.blockedBoundary;e=e.blockedSegment,e.status=3,I9(this,t,e)}function M9(e,t,r){var n=e.blockedBoundary;e.blockedSegment.status=3,n===null?(t.allPendingTasks--,t.status!==2&&(t.status=2,t.destination!==null&&t.destination.push(null))):(n.pendingTasks--,n.forceClientRender||(n.forceClientRender=!0,e=r===void 0?Error(wt(432)):r,n.errorDigest=t.onError(e),n.parentFlushed&&t.clientRenderedBoundaries.push(n)),n.fallbackAbortableTasks.forEach(function(a){return M9(a,t,r)}),n.fallbackAbortableTasks.clear(),t.allPendingTasks--,t.allPendingTasks===0&&(n=t.onAllReady,n()))}function R0(e,t){if(t.chunks.length===0&&t.children.length===1&&t.children[0].boundary===null){var r=t.children[0];r.id=t.id,r.parentFlushed=!0,r.status===1&&R0(e,r)}else e.completedSegments.push(t)}function I9(e,t,r){if(t===null){if(r.parentFlushed){if(e.completedRootSegment!==null)throw Error(wt(389));e.completedRootSegment=r}e.pendingRootTasks--,e.pendingRootTasks===0&&(e.onShellError=np,t=e.onShellReady,t())}else t.pendingTasks--,t.forceClientRender||(t.pendingTasks===0?(r.parentFlushed&&r.status===1&&R0(t,r),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(sue,e),t.fallbackAbortableTasks.clear()):r.parentFlushed&&r.status===1&&(R0(t,r),t.completedSegments.length===1&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,e.allPendingTasks===0&&(e=e.onAllReady,e())}function R9(e){if(e.status!==2){var t=gd,r=B_.current;B_.current=L3;var n=Ey;Ey=e.responseState;try{var a=e.pingedTasks,i;for(i=0;i<a.length;i++){var o=a[i],l=e,c=o.blockedSegment;if(c.status===0){A0(o.context);try{ma(l,o,o.node),l.responseState.generateStaticMarkup||c.lastPushedText&&c.textEmbedded&&c.chunks.push("<!-- -->"),o.abortSet.delete(o),c.status=1,I9(l,o.blockedBoundary,c)}catch(y){if(NE(),typeof y=="object"&&y!==null&&typeof y.then=="function"){var d=o.ping;y.then(d,d)}else{o.abortSet.delete(o),c.status=4;var h=o.blockedBoundary,f=y,m=ug(l,f);if(h===null?I0(l,f):(h.pendingTasks--,h.forceClientRender||(h.forceClientRender=!0,h.errorDigest=m,h.parentFlushed&&l.clientRenderedBoundaries.push(h))),l.allPendingTasks--,l.allPendingTasks===0){var p=l.onAllReady;p()}}}finally{}}}a.splice(0,i),e.destination!==null&&SE(e,e.destination)}catch(y){ug(e,y),I0(e,y)}finally{Ey=n,B_.current=r,r===L3&&A0(t)}}}function Rv(e,t,r){switch(r.parentFlushed=!0,r.status){case 0:var n=r.id=e.nextSegmentId++;return r.lastPushedText=!1,r.textEmbedded=!1,e=e.responseState,t.push('<template id="'),t.push(e.placeholderPrefix),e=n.toString(16),t.push(e),t.push('"></template>');case 1:r.status=2;var a=!0;n=r.chunks;var i=0;r=r.children;for(var o=0;o<r.length;o++){for(a=r[o];i<a.index;i++)t.push(n[i]);a=Vw(e,t,a)}for(;i<n.length-1;i++)t.push(n[i]);return i<n.length&&(a=t.push(n[i])),a;default:throw Error(wt(390))}}function Vw(e,t,r){var n=r.boundary;if(n===null)return Rv(e,t,r);if(n.parentFlushed=!0,n.forceClientRender)return e.responseState.generateStaticMarkup||(n=n.errorDigest,t.push("<!--$!-->"),t.push("<template"),n&&(t.push(' data-dgst="'),n=js(n),t.push(n),t.push('"')),t.push("></template>")),Rv(e,t,r),e=e.responseState.generateStaticMarkup?!0:t.push("<!--/$-->"),e;if(0<n.pendingTasks){n.rootSegmentID=e.nextSegmentId++,0<n.completedSegments.length&&e.partialBoundaries.push(n);var a=e.responseState,i=a.nextSuspenseID++;return a=a.boundaryPrefix+i.toString(16),n=n.id=a,E3(t,e.responseState,n),Rv(e,t,r),t.push("<!--/$-->")}if(n.byteSize>e.progressiveChunkSize)return n.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(n),E3(t,e.responseState,n.id),Rv(e,t,r),t.push("<!--/$-->");if(e.responseState.generateStaticMarkup||t.push("<!--$-->"),r=n.completedSegments,r.length!==1)throw Error(wt(391));return Vw(e,t,r[0]),e=e.responseState.generateStaticMarkup?!0:t.push("<!--/$-->"),e}function W3(e,t,r){return Fde(t,e.responseState,r.formatContext,r.id),Vw(e,t,r),Bde(t,r.formatContext)}function H3(e,t,r){for(var n=r.completedSegments,a=0;a<n.length;a++)D9(e,t,r,n[a]);if(n.length=0,e=e.responseState,n=r.id,r=r.rootSegmentID,t.push(e.startInlineScript),e.sentCompleteBoundaryFunction?t.push('$RC("'):(e.sentCompleteBoundaryFunction=!0,t.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),n===null)throw Error(wt(395));return r=r.toString(16),t.push(n),t.push('","'),t.push(e.segmentPrefix),t.push(r),t.push('")<\/script>')}function D9(e,t,r,n){if(n.status===2)return!0;var a=n.id;if(a===-1){if((n.id=r.rootSegmentID)===-1)throw Error(wt(392));return W3(e,t,n)}return W3(e,t,n),e=e.responseState,t.push(e.startInlineScript),e.sentCompleteSegmentFunction?t.push('$RS("'):(e.sentCompleteSegmentFunction=!0,t.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),t.push(e.segmentPrefix),a=a.toString(16),t.push(a),t.push('","'),t.push(e.placeholderPrefix),t.push(a),t.push('")<\/script>')}function SE(e,t){try{var r=e.completedRootSegment;if(r!==null&&e.pendingRootTasks===0){Vw(e,t,r),e.completedRootSegment=null;var n=e.responseState.bootstrapChunks;for(r=0;r<n.length-1;r++)t.push(n[r]);r<n.length&&t.push(n[r])}var a=e.clientRenderedBoundaries,i;for(i=0;i<a.length;i++){var o=a[i];n=t;var l=e.responseState,c=o.id,d=o.errorDigest,h=o.errorMessage,f=o.errorComponentStack;if(n.push(l.startInlineScript),l.sentClientRenderFunction?n.push('$RX("'):(l.sentClientRenderFunction=!0,n.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),c===null)throw Error(wt(395));if(n.push(c),n.push('"'),d||h||f){n.push(",");var m=F_(d||"");n.push(m)}if(h||f){n.push(",");var p=F_(h||"");n.push(p)}if(f){n.push(",");var y=F_(f);n.push(y)}if(!n.push(")<\/script>")){e.destination=null,i++,a.splice(0,i);return}}a.splice(0,i);var v=e.completedBoundaries;for(i=0;i<v.length;i++)if(!H3(e,t,v[i])){e.destination=null,i++,v.splice(0,i);return}v.splice(0,i);var b=e.partialBoundaries;for(i=0;i<b.length;i++){var N=b[i];e:{a=e,o=t;var j=N.completedSegments;for(l=0;l<j.length;l++)if(!D9(a,o,N,j[l])){l++,j.splice(0,l);var w=!1;break e}j.splice(0,l),w=!0}if(!w){e.destination=null,i++,b.splice(0,i);return}}b.splice(0,i);var S=e.completedBoundaries;for(i=0;i<S.length;i++)if(!H3(e,t,S[i])){e.destination=null,i++,S.splice(0,i);return}S.splice(0,i)}finally{e.allPendingTasks===0&&e.pingedTasks.length===0&&e.clientRenderedBoundaries.length===0&&e.completedBoundaries.length===0&&t.push(null)}}function aue(e,t){try{var r=e.abortableTasks;r.forEach(function(n){return M9(n,e,t)}),r.clear(),e.destination!==null&&SE(e,e.destination)}catch(n){ug(e,n),I0(e,n)}}function iue(){}function $9(e,t,r,n){var a=!1,i=null,o="",l={push:function(d){return d!==null&&(o+=d),!0},destroy:function(d){a=!0,i=d}},c=!1;if(e=nue(e,Ude(r,t?t.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,iue,void 0,function(){c=!0}),R9(e),aue(e,n),e.status===1)e.status=2,l.destroy(e.fatalError);else if(e.status!==2&&e.destination===null){e.destination=l;try{SE(e,l)}catch(d){ug(e,d),I0(e,d)}}if(a)throw i;if(!c)throw Error(wt(426));return o}Yf.renderToNodeStream=function(){throw Error(wt(207))};Yf.renderToStaticMarkup=function(e,t){return $9(e,t,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};Yf.renderToStaticNodeStream=function(){throw Error(wt(208))};Yf.renderToString=function(e,t){return $9(e,t,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};Yf.version="18.3.1";var CE={};/**
 * @license React
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L9=x;function kt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pa=null,ga=0;function Ye(e,t){if(t.length!==0)if(512<t.length)0<ga&&(e.enqueue(new Uint8Array(pa.buffer,0,ga)),pa=new Uint8Array(512),ga=0),e.enqueue(t);else{var r=pa.length-ga;r<t.length&&(r===0?e.enqueue(pa):(pa.set(t.subarray(0,r),ga),e.enqueue(pa),t=t.subarray(r)),pa=new Uint8Array(512),ga=0),pa.set(t,ga),ga+=t.length}}function Ar(e,t){return Ye(e,t),!0}function V3(e){pa&&0<ga&&(e.enqueue(new Uint8Array(pa.buffer,0,ga)),pa=null,ga=0)}var F9=new TextEncoder;function Ot(e){return F9.encode(e)}function Ue(e){return F9.encode(e)}function B9(e,t){typeof e.error=="function"?e.error(t):e.close()}var Hs=Object.prototype.hasOwnProperty,oue=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,q3={},G3={};function z9(e){return Hs.call(G3,e)?!0:Hs.call(q3,e)?!1:oue.test(e)?G3[e]=!0:(q3[e]=!0,!1)}function $s(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var rs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){rs[e]=new $s(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];rs[t]=new $s(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){rs[e]=new $s(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){rs[e]=new $s(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){rs[e]=new $s(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){rs[e]=new $s(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){rs[e]=new $s(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){rs[e]=new $s(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){rs[e]=new $s(e,5,!1,e.toLowerCase(),null,!1,!1)});var PE=/[\-:]([a-z])/g;function kE(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(PE,kE);rs[t]=new $s(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(PE,kE);rs[t]=new $s(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(PE,kE);rs[t]=new $s(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){rs[e]=new $s(e,1,!1,e.toLowerCase(),null,!1,!1)});rs.xlinkHref=new $s("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){rs[e]=new $s(e,1,!1,e.toLowerCase(),null,!0,!0)});var Ty={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lue=["Webkit","ms","Moz","O"];Object.keys(Ty).forEach(function(e){lue.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ty[t]=Ty[e]})});var cue=/["'&<>]/;function Kn(e){if(typeof e=="boolean"||typeof e=="number")return""+e;e=""+e;var t=cue.exec(e);if(t){var r="",n,a=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}a!==n&&(r+=e.substring(a,n)),a=n+1,r+=t}e=a!==n?r+e.substring(a,n):r}return e}var due=/([A-Z])/g,uue=/^ms-/,vC=Array.isArray,hue=Ue("<script>"),fue=Ue("<\/script>"),mue=Ue('<script src="'),pue=Ue('<script type="module" src="'),K3=Ue('" async=""><\/script>'),gue=/(<\/|<)(s)(cript)/gi;function xue(e,t,r,n){return""+t+(r==="s"?"\\u0073":"\\u0053")+n}function vue(e,t,r,n,a){e=e===void 0?"":e,t=t===void 0?hue:Ue('<script nonce="'+Kn(t)+'">');var i=[];if(r!==void 0&&i.push(t,Ot((""+r).replace(gue,xue)),fue),n!==void 0)for(r=0;r<n.length;r++)i.push(mue,Ot(Kn(n[r])),K3);if(a!==void 0)for(n=0;n<a.length;n++)i.push(pue,Ot(Kn(a[n])),K3);return{bootstrapChunks:i,startInlineScript:t,placeholderPrefix:Ue(e+"P:"),segmentPrefix:Ue(e+"S:"),boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function no(e,t){return{insertionMode:e,selectedValue:t}}function yue(e){return no(e==="http://www.w3.org/2000/svg"?2:e==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function bue(e,t,r){switch(t){case"select":return no(1,r.value!=null?r.value:r.defaultValue);case"svg":return no(2,null);case"math":return no(3,null);case"foreignObject":return no(1,null);case"table":return no(4,null);case"thead":case"tbody":case"tfoot":return no(5,null);case"colgroup":return no(7,null);case"tr":return no(6,null)}return 4<=e.insertionMode||e.insertionMode===0?no(1,null):e}var EE=Ue("<!-- -->");function Y3(e,t,r,n){return t===""?n:(n&&e.push(EE),e.push(Ot(Kn(t))),!0)}var Z3=new Map,wue=Ue(' style="'),X3=Ue(":"),jue=Ue(";");function U9(e,t,r){if(typeof r!="object")throw Error(kt(62));t=!0;for(var n in r)if(Hs.call(r,n)){var a=r[n];if(a!=null&&typeof a!="boolean"&&a!==""){if(n.indexOf("--")===0){var i=Ot(Kn(n));a=Ot(Kn((""+a).trim()))}else{i=n;var o=Z3.get(i);o!==void 0||(o=Ue(Kn(i.replace(due,"-$1").toLowerCase().replace(uue,"-ms-"))),Z3.set(i,o)),i=o,a=typeof a=="number"?a===0||Hs.call(Ty,n)?Ot(""+a):Ot(a+"px"):Ot(Kn((""+a).trim()))}t?(t=!1,e.push(wue,i,X3,a)):e.push(jue,i,X3,a)}}t||e.push(cd)}var Dl=Ue(" "),Uu=Ue('="'),cd=Ue('"'),J3=Ue('=""');function ua(e,t,r,n){switch(r){case"style":U9(e,t,n);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N"){if(t=rs.hasOwnProperty(r)?rs[r]:null,t!==null){switch(typeof n){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(r=Ot(t.attributeName),t.type){case 3:n&&e.push(Dl,r,J3);break;case 4:n===!0?e.push(Dl,r,J3):n!==!1&&e.push(Dl,r,Uu,Ot(Kn(n)),cd);break;case 5:isNaN(n)||e.push(Dl,r,Uu,Ot(Kn(n)),cd);break;case 6:!isNaN(n)&&1<=n&&e.push(Dl,r,Uu,Ot(Kn(n)),cd);break;default:t.sanitizeURL&&(n=""+n),e.push(Dl,r,Uu,Ot(Kn(n)),cd)}}else if(z9(r)){switch(typeof n){case"function":case"symbol":return;case"boolean":if(t=r.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-")return}e.push(Dl,Ot(r),Uu,Ot(Kn(n)),cd)}}}var $l=Ue(">"),Q3=Ue("/>");function Ay(e,t,r){if(t!=null){if(r!=null)throw Error(kt(60));if(typeof t!="object"||!("__html"in t))throw Error(kt(61));t=t.__html,t!=null&&e.push(Ot(""+t))}}function Nue(e){var t="";return L9.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}var z_=Ue(' selected=""');function U_(e,t,r,n){e.push(so(r));var a=r=null,i;for(i in t)if(Hs.call(t,i)){var o=t[i];if(o!=null)switch(i){case"children":r=o;break;case"dangerouslySetInnerHTML":a=o;break;default:ua(e,n,i,o)}}return e.push($l),Ay(e,a,r),typeof r=="string"?(e.push(Ot(Kn(r))),null):r}var W_=Ue(`
`),_ue=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,eI=new Map;function so(e){var t=eI.get(e);if(t===void 0){if(!_ue.test(e))throw Error(kt(65,e));t=Ue("<"+e),eI.set(e,t)}return t}var Sue=Ue("<!DOCTYPE html>");function Cue(e,t,r,n,a){switch(t){case"select":e.push(so("select"));var i=null,o=null;for(h in r)if(Hs.call(r,h)){var l=r[h];if(l!=null)switch(h){case"children":i=l;break;case"dangerouslySetInnerHTML":o=l;break;case"defaultValue":case"value":break;default:ua(e,n,h,l)}}return e.push($l),Ay(e,o,i),i;case"option":o=a.selectedValue,e.push(so("option"));var c=l=null,d=null,h=null;for(i in r)if(Hs.call(r,i)){var f=r[i];if(f!=null)switch(i){case"children":l=f;break;case"selected":d=f;break;case"dangerouslySetInnerHTML":h=f;break;case"value":c=f;default:ua(e,n,i,f)}}if(o!=null)if(r=c!==null?""+c:Nue(l),vC(o)){for(n=0;n<o.length;n++)if(""+o[n]===r){e.push(z_);break}}else""+o===r&&e.push(z_);else d&&e.push(z_);return e.push($l),Ay(e,h,l),l;case"textarea":e.push(so("textarea")),h=o=i=null;for(l in r)if(Hs.call(r,l)&&(c=r[l],c!=null))switch(l){case"children":h=c;break;case"value":i=c;break;case"defaultValue":o=c;break;case"dangerouslySetInnerHTML":throw Error(kt(91));default:ua(e,n,l,c)}if(i===null&&o!==null&&(i=o),e.push($l),h!=null){if(i!=null)throw Error(kt(92));if(vC(h)&&1<h.length)throw Error(kt(93));i=""+h}return typeof i=="string"&&i[0]===`
`&&e.push(W_),i!==null&&e.push(Ot(Kn(""+i))),null;case"input":e.push(so("input")),c=h=l=i=null;for(o in r)if(Hs.call(r,o)&&(d=r[o],d!=null))switch(o){case"children":case"dangerouslySetInnerHTML":throw Error(kt(399,"input"));case"defaultChecked":c=d;break;case"defaultValue":l=d;break;case"checked":h=d;break;case"value":i=d;break;default:ua(e,n,o,d)}return h!==null?ua(e,n,"checked",h):c!==null&&ua(e,n,"checked",c),i!==null?ua(e,n,"value",i):l!==null&&ua(e,n,"value",l),e.push(Q3),null;case"menuitem":e.push(so("menuitem"));for(var m in r)if(Hs.call(r,m)&&(i=r[m],i!=null))switch(m){case"children":case"dangerouslySetInnerHTML":throw Error(kt(400));default:ua(e,n,m,i)}return e.push($l),null;case"title":e.push(so("title")),i=null;for(f in r)if(Hs.call(r,f)&&(o=r[f],o!=null))switch(f){case"children":i=o;break;case"dangerouslySetInnerHTML":throw Error(kt(434));default:ua(e,n,f,o)}return e.push($l),i;case"listing":case"pre":e.push(so(t)),o=i=null;for(c in r)if(Hs.call(r,c)&&(l=r[c],l!=null))switch(c){case"children":i=l;break;case"dangerouslySetInnerHTML":o=l;break;default:ua(e,n,c,l)}if(e.push($l),o!=null){if(i!=null)throw Error(kt(60));if(typeof o!="object"||!("__html"in o))throw Error(kt(61));r=o.__html,r!=null&&(typeof r=="string"&&0<r.length&&r[0]===`
`?e.push(W_,Ot(r)):e.push(Ot(""+r)))}return typeof i=="string"&&i[0]===`
`&&e.push(W_),i;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":e.push(so(t));for(var p in r)if(Hs.call(r,p)&&(i=r[p],i!=null))switch(p){case"children":case"dangerouslySetInnerHTML":throw Error(kt(399,t));default:ua(e,n,p,i)}return e.push(Q3),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return U_(e,r,t,n);case"html":return a.insertionMode===0&&e.push(Sue),U_(e,r,t,n);default:if(t.indexOf("-")===-1&&typeof r.is!="string")return U_(e,r,t,n);e.push(so(t)),o=i=null;for(d in r)if(Hs.call(r,d)&&(l=r[d],l!=null))switch(d){case"children":i=l;break;case"dangerouslySetInnerHTML":o=l;break;case"style":U9(e,n,l);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:z9(d)&&typeof l!="function"&&typeof l!="symbol"&&e.push(Dl,Ot(d),Uu,Ot(Kn(l)),cd)}return e.push($l),Ay(e,o,i),i}}var Pue=Ue("</"),kue=Ue(">"),Eue=Ue('<template id="'),Tue=Ue('"></template>'),Aue=Ue("<!--$-->"),Oue=Ue('<!--$?--><template id="'),Mue=Ue('"></template>'),Iue=Ue("<!--$!-->"),Rue=Ue("<!--/$-->"),Due=Ue("<template"),$ue=Ue('"'),Lue=Ue(' data-dgst="');Ue(' data-msg="');Ue(' data-stck="');var Fue=Ue("></template>");function tI(e,t,r){if(Ye(e,Oue),r===null)throw Error(kt(395));return Ye(e,r),Ar(e,Mue)}var Bue=Ue('<div hidden id="'),zue=Ue('">'),Uue=Ue("</div>"),Wue=Ue('<svg aria-hidden="true" style="display:none" id="'),Hue=Ue('">'),Vue=Ue("</svg>"),que=Ue('<math aria-hidden="true" style="display:none" id="'),Gue=Ue('">'),Kue=Ue("</math>"),Yue=Ue('<table hidden id="'),Zue=Ue('">'),Xue=Ue("</table>"),Jue=Ue('<table hidden><tbody id="'),Que=Ue('">'),ehe=Ue("</tbody></table>"),the=Ue('<table hidden><tr id="'),rhe=Ue('">'),nhe=Ue("</tr></table>"),she=Ue('<table hidden><colgroup id="'),ahe=Ue('">'),ihe=Ue("</colgroup></table>");function ohe(e,t,r,n){switch(r.insertionMode){case 0:case 1:return Ye(e,Bue),Ye(e,t.segmentPrefix),Ye(e,Ot(n.toString(16))),Ar(e,zue);case 2:return Ye(e,Wue),Ye(e,t.segmentPrefix),Ye(e,Ot(n.toString(16))),Ar(e,Hue);case 3:return Ye(e,que),Ye(e,t.segmentPrefix),Ye(e,Ot(n.toString(16))),Ar(e,Gue);case 4:return Ye(e,Yue),Ye(e,t.segmentPrefix),Ye(e,Ot(n.toString(16))),Ar(e,Zue);case 5:return Ye(e,Jue),Ye(e,t.segmentPrefix),Ye(e,Ot(n.toString(16))),Ar(e,Que);case 6:return Ye(e,the),Ye(e,t.segmentPrefix),Ye(e,Ot(n.toString(16))),Ar(e,rhe);case 7:return Ye(e,she),Ye(e,t.segmentPrefix),Ye(e,Ot(n.toString(16))),Ar(e,ahe);default:throw Error(kt(397))}}function lhe(e,t){switch(t.insertionMode){case 0:case 1:return Ar(e,Uue);case 2:return Ar(e,Vue);case 3:return Ar(e,Kue);case 4:return Ar(e,Xue);case 5:return Ar(e,ehe);case 6:return Ar(e,nhe);case 7:return Ar(e,ihe);default:throw Error(kt(397))}}var che=Ue('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),dhe=Ue('$RS("'),uhe=Ue('","'),hhe=Ue('")<\/script>'),fhe=Ue('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),mhe=Ue('$RC("'),phe=Ue('","'),ghe=Ue('")<\/script>'),xhe=Ue('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),vhe=Ue('$RX("'),yhe=Ue('"'),bhe=Ue(")<\/script>"),H_=Ue(","),whe=/[<\u2028\u2029]/g;function V_(e){return JSON.stringify(e).replace(whe,function(t){switch(t){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var jp=Object.assign,jhe=Symbol.for("react.element"),W9=Symbol.for("react.portal"),H9=Symbol.for("react.fragment"),V9=Symbol.for("react.strict_mode"),q9=Symbol.for("react.profiler"),G9=Symbol.for("react.provider"),K9=Symbol.for("react.context"),Y9=Symbol.for("react.forward_ref"),Z9=Symbol.for("react.suspense"),X9=Symbol.for("react.suspense_list"),J9=Symbol.for("react.memo"),TE=Symbol.for("react.lazy"),Nhe=Symbol.for("react.scope"),_he=Symbol.for("react.debug_trace_mode"),She=Symbol.for("react.legacy_hidden"),Che=Symbol.for("react.default_value"),rI=Symbol.iterator;function yC(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case H9:return"Fragment";case W9:return"Portal";case q9:return"Profiler";case V9:return"StrictMode";case Z9:return"Suspense";case X9:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case K9:return(e.displayName||"Context")+".Consumer";case G9:return(e._context.displayName||"Context")+".Provider";case Y9:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case J9:return t=e.displayName||null,t!==null?t:yC(e.type)||"Memo";case TE:t=e._payload,e=e._init;try{return yC(e(t))}catch{}}return null}var Q9={};function nI(e,t){if(e=e.contextTypes,!e)return Q9;var r={},n;for(n in e)r[n]=t[n];return r}var xd=null;function qw(e,t){if(e!==t){e.context._currentValue=e.parentValue,e=e.parent;var r=t.parent;if(e===null){if(r!==null)throw Error(kt(401))}else{if(r===null)throw Error(kt(401));qw(e,r)}t.context._currentValue=t.value}}function ez(e){e.context._currentValue=e.parentValue,e=e.parent,e!==null&&ez(e)}function tz(e){var t=e.parent;t!==null&&tz(t),e.context._currentValue=e.value}function rz(e,t){if(e.context._currentValue=e.parentValue,e=e.parent,e===null)throw Error(kt(402));e.depth===t.depth?qw(e,t):rz(e,t)}function nz(e,t){var r=t.parent;if(r===null)throw Error(kt(402));e.depth===r.depth?qw(e,r):nz(e,r),t.context._currentValue=t.value}function D0(e){var t=xd;t!==e&&(t===null?tz(e):e===null?ez(t):t.depth===e.depth?qw(t,e):t.depth>e.depth?rz(t,e):nz(t,e),xd=e)}var sI={isMounted:function(){return!1},enqueueSetState:function(e,t){e=e._reactInternals,e.queue!==null&&e.queue.push(t)},enqueueReplaceState:function(e,t){e=e._reactInternals,e.replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function aI(e,t,r,n){var a=e.state!==void 0?e.state:null;e.updater=sI,e.props=r,e.state=a;var i={queue:[],replace:!1};e._reactInternals=i;var o=t.contextType;if(e.context=typeof o=="object"&&o!==null?o._currentValue:n,o=t.getDerivedStateFromProps,typeof o=="function"&&(o=o(r,a),a=o==null?a:jp({},a,o),e.state=a),typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function"&&(typeof e.UNSAFE_componentWillMount=="function"||typeof e.componentWillMount=="function"))if(t=e.state,typeof e.componentWillMount=="function"&&e.componentWillMount(),typeof e.UNSAFE_componentWillMount=="function"&&e.UNSAFE_componentWillMount(),t!==e.state&&sI.enqueueReplaceState(e,e.state,null),i.queue!==null&&0<i.queue.length)if(t=i.queue,o=i.replace,i.queue=null,i.replace=!1,o&&t.length===1)e.state=t[0];else{for(i=o?t[0]:e.state,a=!0,o=o?1:0;o<t.length;o++){var l=t[o];l=typeof l=="function"?l.call(e,i,r,n):l,l!=null&&(a?(a=!1,i=jp({},i,l)):jp(i,l))}e.state=i}else i.queue=null}var Phe={id:1,overflow:""};function bC(e,t,r){var n=e.id;e=e.overflow;var a=32-Oy(n)-1;n&=~(1<<a),r+=1;var i=32-Oy(t)+a;if(30<i){var o=a-a%5;return i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,{id:1<<32-Oy(t)+a|r<<a|n,overflow:i+e}}return{id:1<<i|r<<a|n,overflow:e}}var Oy=Math.clz32?Math.clz32:The,khe=Math.log,Ehe=Math.LN2;function The(e){return e>>>=0,e===0?32:31-(khe(e)/Ehe|0)|0}function Ahe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ohe=typeof Object.is=="function"?Object.is:Ahe,fl=null,AE=null,My=null,wr=null,sp=!1,$0=!1,hg=0,rc=null,Gw=0;function dd(){if(fl===null)throw Error(kt(321));return fl}function iI(){if(0<Gw)throw Error(kt(312));return{memoizedState:null,queue:null,next:null}}function OE(){return wr===null?My===null?(sp=!1,My=wr=iI()):(sp=!0,wr=My):wr.next===null?(sp=!1,wr=wr.next=iI()):(sp=!0,wr=wr.next),wr}function ME(){AE=fl=null,$0=!1,My=null,Gw=0,wr=rc=null}function sz(e,t){return typeof t=="function"?t(e):t}function oI(e,t,r){if(fl=dd(),wr=OE(),sp){var n=wr.queue;if(t=n.dispatch,rc!==null&&(r=rc.get(n),r!==void 0)){rc.delete(n),n=wr.memoizedState;do n=e(n,r.action),r=r.next;while(r!==null);return wr.memoizedState=n,[n,t]}return[wr.memoizedState,t]}return e=e===sz?typeof t=="function"?t():t:r!==void 0?r(t):t,wr.memoizedState=e,e=wr.queue={last:null,dispatch:null},e=e.dispatch=Mhe.bind(null,fl,e),[wr.memoizedState,e]}function lI(e,t){if(fl=dd(),wr=OE(),t=t===void 0?null:t,wr!==null){var r=wr.memoizedState;if(r!==null&&t!==null){var n=r[1];e:if(n===null)n=!1;else{for(var a=0;a<n.length&&a<t.length;a++)if(!Ohe(t[a],n[a])){n=!1;break e}n=!0}if(n)return r[0]}}return e=e(),wr.memoizedState=[e,t],e}function Mhe(e,t,r){if(25<=Gw)throw Error(kt(301));if(e===fl)if($0=!0,e={action:r,next:null},rc===null&&(rc=new Map),r=rc.get(t),r===void 0)rc.set(t,e);else{for(t=r;t.next!==null;)t=t.next;t.next=e}}function Ihe(){throw Error(kt(394))}function Dv(){}var cI={readContext:function(e){return e._currentValue},useContext:function(e){return dd(),e._currentValue},useMemo:lI,useReducer:oI,useRef:function(e){fl=dd(),wr=OE();var t=wr.memoizedState;return t===null?(e={current:e},wr.memoizedState=e):t},useState:function(e){return oI(sz,e)},useInsertionEffect:Dv,useLayoutEffect:function(){},useCallback:function(e,t){return lI(function(){return e},t)},useImperativeHandle:Dv,useEffect:Dv,useDebugValue:Dv,useDeferredValue:function(e){return dd(),e},useTransition:function(){return dd(),[!1,Ihe]},useId:function(){var e=AE.treeContext,t=e.overflow;e=e.id,e=(e&~(1<<32-Oy(e)-1)).toString(32)+t;var r=Iy;if(r===null)throw Error(kt(404));return t=hg++,e=":"+r.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return dd(),t(e._source)},useSyncExternalStore:function(e,t,r){if(r===void 0)throw Error(kt(407));return r()}},Iy=null,q_=L9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function Rhe(e){return console.error(e),null}function ap(){}function Dhe(e,t,r,n,a,i,o,l,c){var d=[],h=new Set;return t={destination:null,responseState:t,progressiveChunkSize:n===void 0?12800:n,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:h,pingedTasks:d,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:a===void 0?Rhe:a,onAllReady:i===void 0?ap:i,onShellReady:o===void 0?ap:o,onShellError:l===void 0?ap:l,onFatalError:c===void 0?ap:c},r=L0(t,0,null,r,!1,!1),r.parentFlushed=!0,e=IE(t,e,null,r,h,Q9,null,Phe),d.push(e),t}function IE(e,t,r,n,a,i,o,l){e.allPendingTasks++,r===null?e.pendingRootTasks++:r.pendingTasks++;var c={node:t,ping:function(){var d=e.pingedTasks;d.push(c),d.length===1&&oz(e)},blockedBoundary:r,blockedSegment:n,abortSet:a,legacyContext:i,context:o,treeContext:l};return a.add(c),c}function L0(e,t,r,n,a,i){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:n,boundary:r,lastPushedText:a,textEmbedded:i}}function fg(e,t){if(e=e.onError(t),e!=null&&typeof e!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function F0(e,t){var r=e.onShellError;r(t),r=e.onFatalError,r(t),e.destination!==null?(e.status=2,B9(e.destination,t)):(e.status=1,e.fatalError=t)}function dI(e,t,r,n,a){for(fl={},AE=t,hg=0,e=r(n,a);$0;)$0=!1,hg=0,Gw+=1,wr=null,e=r(n,a);return ME(),e}function uI(e,t,r,n){var a=r.render(),i=n.childContextTypes;if(i!=null){var o=t.legacyContext;if(typeof r.getChildContext!="function")n=o;else{r=r.getChildContext();for(var l in r)if(!(l in i))throw Error(kt(108,yC(n)||"Unknown",l));n=jp({},o,r)}t.legacyContext=n,xa(e,t,a),t.legacyContext=o}else xa(e,t,a)}function hI(e,t){if(e&&e.defaultProps){t=jp({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function wC(e,t,r,n,a){if(typeof r=="function")if(r.prototype&&r.prototype.isReactComponent){a=nI(r,t.legacyContext);var i=r.contextType;i=new r(n,typeof i=="object"&&i!==null?i._currentValue:a),aI(i,r,n,a),uI(e,t,i,r)}else{i=nI(r,t.legacyContext),a=dI(e,t,r,n,i);var o=hg!==0;if(typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0)aI(a,r,n,i),uI(e,t,a,r);else if(o){n=t.treeContext,t.treeContext=bC(n,1,0);try{xa(e,t,a)}finally{t.treeContext=n}}else xa(e,t,a)}else if(typeof r=="string"){switch(a=t.blockedSegment,i=Cue(a.chunks,r,n,e.responseState,a.formatContext),a.lastPushedText=!1,o=a.formatContext,a.formatContext=bue(o,r,n),jC(e,t,i),a.formatContext=o,r){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:a.chunks.push(Pue,Ot(r),kue)}a.lastPushedText=!1}else{switch(r){case She:case _he:case V9:case q9:case H9:xa(e,t,n.children);return;case X9:xa(e,t,n.children);return;case Nhe:throw Error(kt(343));case Z9:e:{r=t.blockedBoundary,a=t.blockedSegment,i=n.fallback,n=n.children,o=new Set;var l={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:o,errorDigest:null},c=L0(e,a.chunks.length,l,a.formatContext,!1,!1);a.children.push(c),a.lastPushedText=!1;var d=L0(e,0,null,a.formatContext,!1,!1);d.parentFlushed=!0,t.blockedBoundary=l,t.blockedSegment=d;try{if(jC(e,t,n),d.lastPushedText&&d.textEmbedded&&d.chunks.push(EE),d.status=1,B0(l,d),l.pendingTasks===0)break e}catch(h){d.status=4,l.forceClientRender=!0,l.errorDigest=fg(e,h)}finally{t.blockedBoundary=r,t.blockedSegment=a}t=IE(e,i,r,c,o,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if(typeof r=="object"&&r!==null)switch(r.$$typeof){case Y9:if(n=dI(e,t,r.render,n,a),hg!==0){r=t.treeContext,t.treeContext=bC(r,1,0);try{xa(e,t,n)}finally{t.treeContext=r}}else xa(e,t,n);return;case J9:r=r.type,n=hI(r,n),wC(e,t,r,n,a);return;case G9:if(a=n.children,r=r._context,n=n.value,i=r._currentValue,r._currentValue=n,o=xd,xd=n={parent:o,depth:o===null?0:o.depth+1,context:r,parentValue:i,value:n},t.context=n,xa(e,t,a),e=xd,e===null)throw Error(kt(403));n=e.parentValue,e.context._currentValue=n===Che?e.context._defaultValue:n,e=xd=e.parent,t.context=e;return;case K9:n=n.children,n=n(r._currentValue),xa(e,t,n);return;case TE:a=r._init,r=a(r._payload),n=hI(r,n),wC(e,t,r,n,void 0);return}throw Error(kt(130,r==null?r:typeof r,""))}}function xa(e,t,r){if(t.node=r,typeof r=="object"&&r!==null){switch(r.$$typeof){case jhe:wC(e,t,r.type,r.props,r.ref);return;case W9:throw Error(kt(257));case TE:var n=r._init;r=n(r._payload),xa(e,t,r);return}if(vC(r)){fI(e,t,r);return}if(r===null||typeof r!="object"?n=null:(n=rI&&r[rI]||r["@@iterator"],n=typeof n=="function"?n:null),n&&(n=n.call(r))){if(r=n.next(),!r.done){var a=[];do a.push(r.value),r=n.next();while(!r.done);fI(e,t,a)}return}throw e=Object.prototype.toString.call(r),Error(kt(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}typeof r=="string"?(n=t.blockedSegment,n.lastPushedText=Y3(t.blockedSegment.chunks,r,e.responseState,n.lastPushedText)):typeof r=="number"&&(n=t.blockedSegment,n.lastPushedText=Y3(t.blockedSegment.chunks,""+r,e.responseState,n.lastPushedText))}function fI(e,t,r){for(var n=r.length,a=0;a<n;a++){var i=t.treeContext;t.treeContext=bC(i,n,a);try{jC(e,t,r[a])}finally{t.treeContext=i}}}function jC(e,t,r){var n=t.blockedSegment.formatContext,a=t.legacyContext,i=t.context;try{return xa(e,t,r)}catch(c){if(ME(),typeof c=="object"&&c!==null&&typeof c.then=="function"){r=c;var o=t.blockedSegment,l=L0(e,o.chunks.length,null,o.formatContext,o.lastPushedText,!0);o.children.push(l),o.lastPushedText=!1,e=IE(e,t.node,t.blockedBoundary,l,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,r.then(e,e),t.blockedSegment.formatContext=n,t.legacyContext=a,t.context=i,D0(i)}else throw t.blockedSegment.formatContext=n,t.legacyContext=a,t.context=i,D0(i),c}}function $he(e){var t=e.blockedBoundary;e=e.blockedSegment,e.status=3,iz(this,t,e)}function az(e,t,r){var n=e.blockedBoundary;e.blockedSegment.status=3,n===null?(t.allPendingTasks--,t.status!==2&&(t.status=2,t.destination!==null&&t.destination.close())):(n.pendingTasks--,n.forceClientRender||(n.forceClientRender=!0,e=r===void 0?Error(kt(432)):r,n.errorDigest=t.onError(e),n.parentFlushed&&t.clientRenderedBoundaries.push(n)),n.fallbackAbortableTasks.forEach(function(a){return az(a,t,r)}),n.fallbackAbortableTasks.clear(),t.allPendingTasks--,t.allPendingTasks===0&&(n=t.onAllReady,n()))}function B0(e,t){if(t.chunks.length===0&&t.children.length===1&&t.children[0].boundary===null){var r=t.children[0];r.id=t.id,r.parentFlushed=!0,r.status===1&&B0(e,r)}else e.completedSegments.push(t)}function iz(e,t,r){if(t===null){if(r.parentFlushed){if(e.completedRootSegment!==null)throw Error(kt(389));e.completedRootSegment=r}e.pendingRootTasks--,e.pendingRootTasks===0&&(e.onShellError=ap,t=e.onShellReady,t())}else t.pendingTasks--,t.forceClientRender||(t.pendingTasks===0?(r.parentFlushed&&r.status===1&&B0(t,r),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach($he,e),t.fallbackAbortableTasks.clear()):r.parentFlushed&&r.status===1&&(B0(t,r),t.completedSegments.length===1&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,e.allPendingTasks===0&&(e=e.onAllReady,e())}function oz(e){if(e.status!==2){var t=xd,r=q_.current;q_.current=cI;var n=Iy;Iy=e.responseState;try{var a=e.pingedTasks,i;for(i=0;i<a.length;i++){var o=a[i],l=e,c=o.blockedSegment;if(c.status===0){D0(o.context);try{xa(l,o,o.node),c.lastPushedText&&c.textEmbedded&&c.chunks.push(EE),o.abortSet.delete(o),c.status=1,iz(l,o.blockedBoundary,c)}catch(y){if(ME(),typeof y=="object"&&y!==null&&typeof y.then=="function"){var d=o.ping;y.then(d,d)}else{o.abortSet.delete(o),c.status=4;var h=o.blockedBoundary,f=y,m=fg(l,f);if(h===null?F0(l,f):(h.pendingTasks--,h.forceClientRender||(h.forceClientRender=!0,h.errorDigest=m,h.parentFlushed&&l.clientRenderedBoundaries.push(h))),l.allPendingTasks--,l.allPendingTasks===0){var p=l.onAllReady;p()}}}finally{}}}a.splice(0,i),e.destination!==null&&RE(e,e.destination)}catch(y){fg(e,y),F0(e,y)}finally{Iy=n,q_.current=r,r===cI&&D0(t)}}}function $v(e,t,r){switch(r.parentFlushed=!0,r.status){case 0:var n=r.id=e.nextSegmentId++;return r.lastPushedText=!1,r.textEmbedded=!1,e=e.responseState,Ye(t,Eue),Ye(t,e.placeholderPrefix),e=Ot(n.toString(16)),Ye(t,e),Ar(t,Tue);case 1:r.status=2;var a=!0;n=r.chunks;var i=0;r=r.children;for(var o=0;o<r.length;o++){for(a=r[o];i<a.index;i++)Ye(t,n[i]);a=Kw(e,t,a)}for(;i<n.length-1;i++)Ye(t,n[i]);return i<n.length&&(a=Ar(t,n[i])),a;default:throw Error(kt(390))}}function Kw(e,t,r){var n=r.boundary;if(n===null)return $v(e,t,r);if(n.parentFlushed=!0,n.forceClientRender)n=n.errorDigest,Ar(t,Iue),Ye(t,Due),n&&(Ye(t,Lue),Ye(t,Ot(Kn(n))),Ye(t,$ue)),Ar(t,Fue),$v(e,t,r);else if(0<n.pendingTasks){n.rootSegmentID=e.nextSegmentId++,0<n.completedSegments.length&&e.partialBoundaries.push(n);var a=e.responseState,i=a.nextSuspenseID++;a=Ue(a.boundaryPrefix+i.toString(16)),n=n.id=a,tI(t,e.responseState,n),$v(e,t,r)}else if(n.byteSize>e.progressiveChunkSize)n.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(n),tI(t,e.responseState,n.id),$v(e,t,r);else{if(Ar(t,Aue),r=n.completedSegments,r.length!==1)throw Error(kt(391));Kw(e,t,r[0])}return Ar(t,Rue)}function mI(e,t,r){return ohe(t,e.responseState,r.formatContext,r.id),Kw(e,t,r),lhe(t,r.formatContext)}function pI(e,t,r){for(var n=r.completedSegments,a=0;a<n.length;a++)lz(e,t,r,n[a]);if(n.length=0,e=e.responseState,n=r.id,r=r.rootSegmentID,Ye(t,e.startInlineScript),e.sentCompleteBoundaryFunction?Ye(t,mhe):(e.sentCompleteBoundaryFunction=!0,Ye(t,fhe)),n===null)throw Error(kt(395));return r=Ot(r.toString(16)),Ye(t,n),Ye(t,phe),Ye(t,e.segmentPrefix),Ye(t,r),Ar(t,ghe)}function lz(e,t,r,n){if(n.status===2)return!0;var a=n.id;if(a===-1){if((n.id=r.rootSegmentID)===-1)throw Error(kt(392));return mI(e,t,n)}return mI(e,t,n),e=e.responseState,Ye(t,e.startInlineScript),e.sentCompleteSegmentFunction?Ye(t,dhe):(e.sentCompleteSegmentFunction=!0,Ye(t,che)),Ye(t,e.segmentPrefix),a=Ot(a.toString(16)),Ye(t,a),Ye(t,uhe),Ye(t,e.placeholderPrefix),Ye(t,a),Ar(t,hhe)}function RE(e,t){pa=new Uint8Array(512),ga=0;try{var r=e.completedRootSegment;if(r!==null&&e.pendingRootTasks===0){Kw(e,t,r),e.completedRootSegment=null;var n=e.responseState.bootstrapChunks;for(r=0;r<n.length-1;r++)Ye(t,n[r]);r<n.length&&Ar(t,n[r])}var a=e.clientRenderedBoundaries,i;for(i=0;i<a.length;i++){var o=a[i];n=t;var l=e.responseState,c=o.id,d=o.errorDigest,h=o.errorMessage,f=o.errorComponentStack;if(Ye(n,l.startInlineScript),l.sentClientRenderFunction?Ye(n,vhe):(l.sentClientRenderFunction=!0,Ye(n,xhe)),c===null)throw Error(kt(395));Ye(n,c),Ye(n,yhe),(d||h||f)&&(Ye(n,H_),Ye(n,Ot(V_(d||"")))),(h||f)&&(Ye(n,H_),Ye(n,Ot(V_(h||"")))),f&&(Ye(n,H_),Ye(n,Ot(V_(f)))),Ar(n,bhe)}a.splice(0,i);var m=e.completedBoundaries;for(i=0;i<m.length;i++)pI(e,t,m[i]);m.splice(0,i),V3(t),pa=new Uint8Array(512),ga=0;var p=e.partialBoundaries;for(i=0;i<p.length;i++){var y=p[i];e:{a=e,o=t;var v=y.completedSegments;for(l=0;l<v.length;l++)if(!lz(a,o,y,v[l])){l++,v.splice(0,l);var b=!1;break e}v.splice(0,l),b=!0}if(!b){e.destination=null,i++,p.splice(0,i);return}}p.splice(0,i);var N=e.completedBoundaries;for(i=0;i<N.length;i++)pI(e,t,N[i]);N.splice(0,i)}finally{V3(t),e.allPendingTasks===0&&e.pingedTasks.length===0&&e.clientRenderedBoundaries.length===0&&e.completedBoundaries.length===0&&t.close()}}function gI(e,t){try{var r=e.abortableTasks;r.forEach(function(n){return az(n,e,t)}),r.clear(),e.destination!==null&&RE(e,e.destination)}catch(n){fg(e,n),F0(e,n)}}CE.renderToReadableStream=function(e,t){return new Promise(function(r,n){var a,i,o=new Promise(function(h,f){i=h,a=f}),l=Dhe(e,vue(t?t.identifierPrefix:void 0,t?t.nonce:void 0,t?t.bootstrapScriptContent:void 0,t?t.bootstrapScripts:void 0,t?t.bootstrapModules:void 0),yue(t?t.namespaceURI:void 0),t?t.progressiveChunkSize:void 0,t?t.onError:void 0,i,function(){var h=new ReadableStream({type:"bytes",pull:function(f){if(l.status===1)l.status=2,B9(f,l.fatalError);else if(l.status!==2&&l.destination===null){l.destination=f;try{RE(l,f)}catch(m){fg(l,m),F0(l,m)}}},cancel:function(){gI(l)}},{highWaterMark:0});h.allReady=o,r(h)},function(h){o.catch(function(){}),n(h)},a);if(t&&t.signal){var c=t.signal,d=function(){gI(l,c.reason),c.removeEventListener("abort",d)};c.addEventListener("abort",d)}oz(l)})};CE.version="18.3.1";var Zf,cz;Zf=Yf,cz=CE;Zf.version;Zf.renderToString;Zf.renderToStaticMarkup;Zf.renderToNodeStream;Zf.renderToStaticNodeStream;cz.renderToReadableStream;var Lhe=Object.defineProperty,z0=Object.getOwnPropertySymbols,dz=Object.prototype.hasOwnProperty,uz=Object.prototype.propertyIsEnumerable,xI=(e,t,r)=>t in e?Lhe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,NC=(e,t)=>{for(var r in t||(t={}))dz.call(t,r)&&xI(e,r,t[r]);if(z0)for(var r of z0(t))uz.call(t,r)&&xI(e,r,t[r]);return e},_C=(e,t)=>{var r={};for(var n in e)dz.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&z0)for(var n of z0(e))t.indexOf(n)<0&&uz.call(e,n)&&(r[n]=e[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Hd;(e=>{const t=class Rt{constructor(c,d,h,f){if(this.version=c,this.errorCorrectionLevel=d,this.modules=[],this.isFunction=[],c<Rt.MIN_VERSION||c>Rt.MAX_VERSION)throw new RangeError("Version value out of range");if(f<-1||f>7)throw new RangeError("Mask value out of range");this.size=c*4+17;let m=[];for(let y=0;y<this.size;y++)m.push(!1);for(let y=0;y<this.size;y++)this.modules.push(m.slice()),this.isFunction.push(m.slice());this.drawFunctionPatterns();const p=this.addEccAndInterleave(h);if(this.drawCodewords(p),f==-1){let y=1e9;for(let v=0;v<8;v++){this.applyMask(v),this.drawFormatBits(v);const b=this.getPenaltyScore();b<y&&(f=v,y=b),this.applyMask(v)}}a(0<=f&&f<=7),this.mask=f,this.applyMask(f),this.drawFormatBits(f),this.isFunction=[]}static encodeText(c,d){const h=e.QrSegment.makeSegments(c);return Rt.encodeSegments(h,d)}static encodeBinary(c,d){const h=e.QrSegment.makeBytes(c);return Rt.encodeSegments([h],d)}static encodeSegments(c,d,h=1,f=40,m=-1,p=!0){if(!(Rt.MIN_VERSION<=h&&h<=f&&f<=Rt.MAX_VERSION)||m<-1||m>7)throw new RangeError("Invalid value");let y,v;for(y=h;;y++){const w=Rt.getNumDataCodewords(y,d)*8,S=o.getTotalBits(c,y);if(S<=w){v=S;break}if(y>=f)throw new RangeError("Data too long")}for(const w of[Rt.Ecc.MEDIUM,Rt.Ecc.QUARTILE,Rt.Ecc.HIGH])p&&v<=Rt.getNumDataCodewords(y,w)*8&&(d=w);let b=[];for(const w of c){r(w.mode.modeBits,4,b),r(w.numChars,w.mode.numCharCountBits(y),b);for(const S of w.getData())b.push(S)}a(b.length==v);const N=Rt.getNumDataCodewords(y,d)*8;a(b.length<=N),r(0,Math.min(4,N-b.length),b),r(0,(8-b.length%8)%8,b),a(b.length%8==0);for(let w=236;b.length<N;w^=253)r(w,8,b);let j=[];for(;j.length*8<b.length;)j.push(0);return b.forEach((w,S)=>j[S>>>3]|=w<<7-(S&7)),new Rt(y,d,j,m)}getModule(c,d){return 0<=c&&c<this.size&&0<=d&&d<this.size&&this.modules[d][c]}getModules(){return this.modules}drawFunctionPatterns(){for(let h=0;h<this.size;h++)this.setFunctionModule(6,h,h%2==0),this.setFunctionModule(h,6,h%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const c=this.getAlignmentPatternPositions(),d=c.length;for(let h=0;h<d;h++)for(let f=0;f<d;f++)h==0&&f==0||h==0&&f==d-1||h==d-1&&f==0||this.drawAlignmentPattern(c[h],c[f]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(c){const d=this.errorCorrectionLevel.formatBits<<3|c;let h=d;for(let m=0;m<10;m++)h=h<<1^(h>>>9)*1335;const f=(d<<10|h)^21522;a(f>>>15==0);for(let m=0;m<=5;m++)this.setFunctionModule(8,m,n(f,m));this.setFunctionModule(8,7,n(f,6)),this.setFunctionModule(8,8,n(f,7)),this.setFunctionModule(7,8,n(f,8));for(let m=9;m<15;m++)this.setFunctionModule(14-m,8,n(f,m));for(let m=0;m<8;m++)this.setFunctionModule(this.size-1-m,8,n(f,m));for(let m=8;m<15;m++)this.setFunctionModule(8,this.size-15+m,n(f,m));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let c=this.version;for(let h=0;h<12;h++)c=c<<1^(c>>>11)*7973;const d=this.version<<12|c;a(d>>>18==0);for(let h=0;h<18;h++){const f=n(d,h),m=this.size-11+h%3,p=Math.floor(h/3);this.setFunctionModule(m,p,f),this.setFunctionModule(p,m,f)}}drawFinderPattern(c,d){for(let h=-4;h<=4;h++)for(let f=-4;f<=4;f++){const m=Math.max(Math.abs(f),Math.abs(h)),p=c+f,y=d+h;0<=p&&p<this.size&&0<=y&&y<this.size&&this.setFunctionModule(p,y,m!=2&&m!=4)}}drawAlignmentPattern(c,d){for(let h=-2;h<=2;h++)for(let f=-2;f<=2;f++)this.setFunctionModule(c+f,d+h,Math.max(Math.abs(f),Math.abs(h))!=1)}setFunctionModule(c,d,h){this.modules[d][c]=h,this.isFunction[d][c]=!0}addEccAndInterleave(c){const d=this.version,h=this.errorCorrectionLevel;if(c.length!=Rt.getNumDataCodewords(d,h))throw new RangeError("Invalid argument");const f=Rt.NUM_ERROR_CORRECTION_BLOCKS[h.ordinal][d],m=Rt.ECC_CODEWORDS_PER_BLOCK[h.ordinal][d],p=Math.floor(Rt.getNumRawDataModules(d)/8),y=f-p%f,v=Math.floor(p/f);let b=[];const N=Rt.reedSolomonComputeDivisor(m);for(let w=0,S=0;w<f;w++){let C=c.slice(S,S+v-m+(w<y?0:1));S+=C.length;const P=Rt.reedSolomonComputeRemainder(C,N);w<y&&C.push(0),b.push(C.concat(P))}let j=[];for(let w=0;w<b[0].length;w++)b.forEach((S,C)=>{(w!=v-m||C>=y)&&j.push(S[w])});return a(j.length==p),j}drawCodewords(c){if(c.length!=Math.floor(Rt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let d=0;for(let h=this.size-1;h>=1;h-=2){h==6&&(h=5);for(let f=0;f<this.size;f++)for(let m=0;m<2;m++){const p=h-m,v=(h+1&2)==0?this.size-1-f:f;!this.isFunction[v][p]&&d<c.length*8&&(this.modules[v][p]=n(c[d>>>3],7-(d&7)),d++)}}a(d==c.length*8)}applyMask(c){if(c<0||c>7)throw new RangeError("Mask value out of range");for(let d=0;d<this.size;d++)for(let h=0;h<this.size;h++){let f;switch(c){case 0:f=(h+d)%2==0;break;case 1:f=d%2==0;break;case 2:f=h%3==0;break;case 3:f=(h+d)%3==0;break;case 4:f=(Math.floor(h/3)+Math.floor(d/2))%2==0;break;case 5:f=h*d%2+h*d%3==0;break;case 6:f=(h*d%2+h*d%3)%2==0;break;case 7:f=((h+d)%2+h*d%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[d][h]&&f&&(this.modules[d][h]=!this.modules[d][h])}}getPenaltyScore(){let c=0;for(let m=0;m<this.size;m++){let p=!1,y=0,v=[0,0,0,0,0,0,0];for(let b=0;b<this.size;b++)this.modules[m][b]==p?(y++,y==5?c+=Rt.PENALTY_N1:y>5&&c++):(this.finderPenaltyAddHistory(y,v),p||(c+=this.finderPenaltyCountPatterns(v)*Rt.PENALTY_N3),p=this.modules[m][b],y=1);c+=this.finderPenaltyTerminateAndCount(p,y,v)*Rt.PENALTY_N3}for(let m=0;m<this.size;m++){let p=!1,y=0,v=[0,0,0,0,0,0,0];for(let b=0;b<this.size;b++)this.modules[b][m]==p?(y++,y==5?c+=Rt.PENALTY_N1:y>5&&c++):(this.finderPenaltyAddHistory(y,v),p||(c+=this.finderPenaltyCountPatterns(v)*Rt.PENALTY_N3),p=this.modules[b][m],y=1);c+=this.finderPenaltyTerminateAndCount(p,y,v)*Rt.PENALTY_N3}for(let m=0;m<this.size-1;m++)for(let p=0;p<this.size-1;p++){const y=this.modules[m][p];y==this.modules[m][p+1]&&y==this.modules[m+1][p]&&y==this.modules[m+1][p+1]&&(c+=Rt.PENALTY_N2)}let d=0;for(const m of this.modules)d=m.reduce((p,y)=>p+(y?1:0),d);const h=this.size*this.size,f=Math.ceil(Math.abs(d*20-h*10)/h)-1;return a(0<=f&&f<=9),c+=f*Rt.PENALTY_N4,a(0<=c&&c<=2568888),c}getAlignmentPatternPositions(){if(this.version==1)return[];{const c=Math.floor(this.version/7)+2,d=this.version==32?26:Math.ceil((this.version*4+4)/(c*2-2))*2;let h=[6];for(let f=this.size-7;h.length<c;f-=d)h.splice(1,0,f);return h}}static getNumRawDataModules(c){if(c<Rt.MIN_VERSION||c>Rt.MAX_VERSION)throw new RangeError("Version number out of range");let d=(16*c+128)*c+64;if(c>=2){const h=Math.floor(c/7)+2;d-=(25*h-10)*h-55,c>=7&&(d-=36)}return a(208<=d&&d<=29648),d}static getNumDataCodewords(c,d){return Math.floor(Rt.getNumRawDataModules(c)/8)-Rt.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c]*Rt.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c]}static reedSolomonComputeDivisor(c){if(c<1||c>255)throw new RangeError("Degree out of range");let d=[];for(let f=0;f<c-1;f++)d.push(0);d.push(1);let h=1;for(let f=0;f<c;f++){for(let m=0;m<d.length;m++)d[m]=Rt.reedSolomonMultiply(d[m],h),m+1<d.length&&(d[m]^=d[m+1]);h=Rt.reedSolomonMultiply(h,2)}return d}static reedSolomonComputeRemainder(c,d){let h=d.map(f=>0);for(const f of c){const m=f^h.shift();h.push(0),d.forEach((p,y)=>h[y]^=Rt.reedSolomonMultiply(p,m))}return h}static reedSolomonMultiply(c,d){if(c>>>8||d>>>8)throw new RangeError("Byte out of range");let h=0;for(let f=7;f>=0;f--)h=h<<1^(h>>>7)*285,h^=(d>>>f&1)*c;return a(h>>>8==0),h}finderPenaltyCountPatterns(c){const d=c[1];a(d<=this.size*3);const h=d>0&&c[2]==d&&c[3]==d*3&&c[4]==d&&c[5]==d;return(h&&c[0]>=d*4&&c[6]>=d?1:0)+(h&&c[6]>=d*4&&c[0]>=d?1:0)}finderPenaltyTerminateAndCount(c,d,h){return c&&(this.finderPenaltyAddHistory(d,h),d=0),d+=this.size,this.finderPenaltyAddHistory(d,h),this.finderPenaltyCountPatterns(h)}finderPenaltyAddHistory(c,d){d[0]==0&&(c+=this.size),d.pop(),d.unshift(c)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function r(l,c,d){if(c<0||c>31||l>>>c)throw new RangeError("Value out of range");for(let h=c-1;h>=0;h--)d.push(l>>>h&1)}function n(l,c){return(l>>>c&1)!=0}function a(l){if(!l)throw new Error("Assertion error")}const i=class Vr{constructor(c,d,h){if(this.mode=c,this.numChars=d,this.bitData=h,d<0)throw new RangeError("Invalid argument");this.bitData=h.slice()}static makeBytes(c){let d=[];for(const h of c)r(h,8,d);return new Vr(Vr.Mode.BYTE,c.length,d)}static makeNumeric(c){if(!Vr.isNumeric(c))throw new RangeError("String contains non-numeric characters");let d=[];for(let h=0;h<c.length;){const f=Math.min(c.length-h,3);r(parseInt(c.substring(h,h+f),10),f*3+1,d),h+=f}return new Vr(Vr.Mode.NUMERIC,c.length,d)}static makeAlphanumeric(c){if(!Vr.isAlphanumeric(c))throw new RangeError("String contains unencodable characters in alphanumeric mode");let d=[],h;for(h=0;h+2<=c.length;h+=2){let f=Vr.ALPHANUMERIC_CHARSET.indexOf(c.charAt(h))*45;f+=Vr.ALPHANUMERIC_CHARSET.indexOf(c.charAt(h+1)),r(f,11,d)}return h<c.length&&r(Vr.ALPHANUMERIC_CHARSET.indexOf(c.charAt(h)),6,d),new Vr(Vr.Mode.ALPHANUMERIC,c.length,d)}static makeSegments(c){return c==""?[]:Vr.isNumeric(c)?[Vr.makeNumeric(c)]:Vr.isAlphanumeric(c)?[Vr.makeAlphanumeric(c)]:[Vr.makeBytes(Vr.toUtf8ByteArray(c))]}static makeEci(c){let d=[];if(c<0)throw new RangeError("ECI assignment value out of range");if(c<128)r(c,8,d);else if(c<16384)r(2,2,d),r(c,14,d);else if(c<1e6)r(6,3,d),r(c,21,d);else throw new RangeError("ECI assignment value out of range");return new Vr(Vr.Mode.ECI,0,d)}static isNumeric(c){return Vr.NUMERIC_REGEX.test(c)}static isAlphanumeric(c){return Vr.ALPHANUMERIC_REGEX.test(c)}getData(){return this.bitData.slice()}static getTotalBits(c,d){let h=0;for(const f of c){const m=f.mode.numCharCountBits(d);if(f.numChars>=1<<m)return 1/0;h+=4+m+f.bitData.length}return h}static toUtf8ByteArray(c){c=encodeURI(c);let d=[];for(let h=0;h<c.length;h++)c.charAt(h)!="%"?d.push(c.charCodeAt(h)):(d.push(parseInt(c.substring(h+1,h+3),16)),h+=2);return d}};i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=i;e.QrSegment=i})(Hd||(Hd={}));(e=>{(t=>{const r=class{constructor(a,i){this.ordinal=a,this.formatBits=i}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),t.Ecc=r})(e.QrCode||(e.QrCode={}))})(Hd||(Hd={}));(e=>{(t=>{const r=class{constructor(a,i){this.modeBits=a,this.numBitsCharCount=i}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),t.Mode=r})(e.QrSegment||(e.QrSegment={}))})(Hd||(Hd={}));var sh=Hd;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var Fhe={L:sh.QrCode.Ecc.LOW,M:sh.QrCode.Ecc.MEDIUM,Q:sh.QrCode.Ecc.QUARTILE,H:sh.QrCode.Ecc.HIGH},hz=128,fz="L",mz="#FFFFFF",pz="#000000",gz=!1,xz=1,Bhe=4,zhe=0,Uhe=.1;function vz(e,t=0){const r=[];return e.forEach(function(n,a){let i=null;n.forEach(function(o,l){if(!o&&i!==null){r.push(`M${i+t} ${a+t}h${l-i}v1H${i+t}z`),i=null;return}if(l===n.length-1){if(!o)return;i===null?r.push(`M${l+t},${a+t} h1v1H${l+t}z`):r.push(`M${i+t},${a+t} h${l+1-i}v1H${i+t}z`);return}o&&i===null&&(i=l)})}),r.join("")}function yz(e,t){return e.slice().map((r,n)=>n<t.y||n>=t.y+t.h?r:r.map((a,i)=>i<t.x||i>=t.x+t.w?a:!1))}function Whe(e,t,r,n){if(n==null)return null;const a=e.length+r*2,i=Math.floor(t*Uhe),o=a/t,l=(n.width||i)*o,c=(n.height||i)*o,d=n.x==null?e.length/2-l/2:n.x*o,h=n.y==null?e.length/2-c/2:n.y*o,f=n.opacity==null?1:n.opacity;let m=null;if(n.excavate){let y=Math.floor(d),v=Math.floor(h),b=Math.ceil(l+d-y),N=Math.ceil(c+h-v);m={x:y,y:v,w:b,h:N}}const p=n.crossOrigin;return{x:d,y:h,h:c,w:l,excavation:m,opacity:f,crossOrigin:p}}function Hhe(e,t){return t!=null?Math.max(Math.floor(t),0):e?Bhe:zhe}function bz({value:e,level:t,minVersion:r,includeMargin:n,marginSize:a,imageSettings:i,size:o,boostLevel:l}){let c=q.useMemo(()=>{const y=(Array.isArray(e)?e:[e]).reduce((v,b)=>(v.push(...sh.QrSegment.makeSegments(b)),v),[]);return sh.QrCode.encodeSegments(y,Fhe[t],r,void 0,void 0,l)},[e,t,r,l]);const{cells:d,margin:h,numCells:f,calculatedImageSettings:m}=q.useMemo(()=>{let p=c.getModules();const y=Hhe(n,a),v=p.length+y*2,b=Whe(p,o,y,i);return{cells:p,margin:y,numCells:v,calculatedImageSettings:b}},[c,o,i,n,a]);return{qrcode:c,margin:h,cells:d,numCells:f,calculatedImageSettings:m}}var Vhe=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),qhe=q.forwardRef(function(t,r){const n=t,{value:a,size:i=hz,level:o=fz,bgColor:l=mz,fgColor:c=pz,includeMargin:d=gz,minVersion:h=xz,boostLevel:f,marginSize:m,imageSettings:p}=n,v=_C(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:b}=v,N=_C(v,["style"]),j=p==null?void 0:p.src,w=q.useRef(null),S=q.useRef(null),C=q.useCallback(U=>{w.current=U,typeof r=="function"?r(U):r&&(r.current=U)},[r]),[P,T]=q.useState(!1),{margin:O,cells:E,numCells:D,calculatedImageSettings:I}=bz({value:a,level:o,minVersion:h,boostLevel:f,includeMargin:d,marginSize:m,imageSettings:p,size:i});q.useEffect(()=>{if(w.current!=null){const U=w.current,$=U.getContext("2d");if(!$)return;let H=E;const F=S.current,R=I!=null&&F!==null&&F.complete&&F.naturalHeight!==0&&F.naturalWidth!==0;R&&I.excavation!=null&&(H=yz(E,I.excavation));const z=window.devicePixelRatio||1;U.height=U.width=i*z;const G=i/D*z;$.scale(G,G),$.fillStyle=l,$.fillRect(0,0,D,D),$.fillStyle=c,Vhe?$.fill(new Path2D(vz(H,O))):E.forEach(function(ie,ae){ie.forEach(function(X,le){X&&$.fillRect(le+O,ae+O,1,1)})}),I&&($.globalAlpha=I.opacity),R&&$.drawImage(F,I.x+O,I.y+O,I.w,I.h)}}),q.useEffect(()=>{T(!1)},[j]);const A=NC({height:i,width:i},b);let V=null;return j!=null&&(V=q.createElement("img",{src:j,key:j,style:{display:"none"},onLoad:()=>{T(!0)},ref:S,crossOrigin:I==null?void 0:I.crossOrigin})),q.createElement(q.Fragment,null,q.createElement("canvas",NC({style:A,height:i,width:i,ref:C,role:"img"},N)),V)});qhe.displayName="QRCodeCanvas";var DE=q.forwardRef(function(t,r){const n=t,{value:a,size:i=hz,level:o=fz,bgColor:l=mz,fgColor:c=pz,includeMargin:d=gz,minVersion:h=xz,boostLevel:f,title:m,marginSize:p,imageSettings:y}=n,v=_C(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:b,cells:N,numCells:j,calculatedImageSettings:w}=bz({value:a,level:o,minVersion:h,boostLevel:f,includeMargin:d,marginSize:p,imageSettings:y,size:i});let S=N,C=null;y!=null&&w!=null&&(w.excavation!=null&&(S=yz(N,w.excavation)),C=q.createElement("image",{href:y.src,height:w.h,width:w.w,x:w.x+b,y:w.y+b,preserveAspectRatio:"none",opacity:w.opacity,crossOrigin:w.crossOrigin}));const P=vz(S,b);return q.createElement("svg",NC({height:i,width:i,viewBox:`0 0 ${j} ${j}`,ref:r,role:"img"},v),!!m&&q.createElement("title",null,m),q.createElement("path",{fill:l,d:`M0,0 h${j}v${j}H0z`,shapeRendering:"crispEdges"}),q.createElement("path",{fill:c,d:P,shapeRendering:"crispEdges"}),C)});DE.displayName="QRCodeSVG";const $E="pswdirect_domain_config",vI={baseUrl:"https://psadirect.ca",displayName:"psadirect.ca"},Yn=()=>{if(typeof window>"u")return vI;const e=localStorage.getItem($E);if(e)try{const t=JSON.parse(e);if(t.baseUrl&&t.displayName)return t}catch{}return vI},Ghe=e=>{const t={baseUrl:e.baseUrl.replace(/\/$/,""),displayName:e.displayName};localStorage.setItem($E,JSON.stringify(t))},Khe=()=>{localStorage.removeItem($E)},Yhe=()=>{const{baseUrl:e}=Yn();return`${e}/install`},Zhe=()=>{const{baseUrl:e}=Yn();return e},Xhe="/progressier-qr.png",wz=()=>{const{baseUrl:e}=Yn();return`${e}${Xhe}`},jz=e=>{const{baseUrl:t}=Yn(),r=`${t}/client-portal`;return e?`${r}?order=${e}`:r},Jhe=()=>{const{baseUrl:e}=Yn();return`${e}/install?type=client`},LE=()=>{const{baseUrl:e}=Yn();return`${e}/psw-login`},Qhe=(e,t,r,n,a,i)=>{const o=jz(t),l=Jhe(),c=wz(),d=`Booking Confirmed - ${t}`,h=`Hi ${e},

Your care booking has been confirmed!

 Booking Code: ${t}
 Date: ${r}
 Time: ${n}
 Services: ${a.join(", ")}



 TRACK YOUR CARE

Scan the QR code below to access your Client Portal:
${o}

 Track your care status
 View your caregiver's first name
 Re-book services instantly
 Access your service history

For the best experience, tap "Add to Home Screen" when the app opens.



Questions? Call our office at ${i}

Thank you for choosing PSA Direct!

---
PSA Direct | Professional Care Services
Office: ${i}
Web: ${Yn().displayName}`,f="",m=`<div style="margin: 24px 0; padding-top: 20px; border-top: 1px solid #e5e7eb;">
        <h3 style="color: #166534; margin: 0 0 12px 0; font-size: 16px;"> Install the App</h3>
        <p style="font-size: 14px; color: #666; margin: 0 0 12px 0;">For the best experience, add our app to your phone:</p>
        <img src="${c}" alt="QR Code to install app" width="120" height="120" style="display: block; margin: 0 auto;">
        <p style="font-size: 12px; color: #666; margin: 8px 0 0 0;">
          <strong>iOS:</strong> Share  Add to Home Screen<br>
          <strong>Android:</strong> Menu  Install App
        </p>
        <p style="font-size: 12px; margin: 12px 0 0 0;">
          <a href="${l}" style="color: #16a34a; text-decoration: underline;">${l}</a>
        </p>
      </div>`,p=`
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Booking Confirmed</title>
</head>
<body style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px;">
  
  <div style="text-align: center; padding: 20px 0;">
    <img src="${Yn().baseUrl}/logo-192.png" alt="PSA Direct" width="60" height="60" style="margin-bottom: 12px;">
    <h1 style="color: #16a34a; margin: 0;"> Booking Confirmed!</h1>
  </div>
  
  <p>Hi <strong>${e}</strong>,</p>
  
  <p>Your care booking has been confirmed.</p>
  
  <div style="background: #f8fafc; border-radius: 12px; padding: 20px; margin: 20px 0;">
    <h3 style="margin: 0 0 12px 0; color: #16a34a;">Booking Details</h3>
    <p style="margin: 4px 0;"><strong> Booking Code:</strong> ${t}</p>
    <p style="margin: 4px 0;"><strong> Date:</strong> ${r}</p>
    <p style="margin: 4px 0;"><strong> Time:</strong> ${n}</p>
    <p style="margin: 4px 0;"><strong> Services:</strong> ${a.join(", ")}</p>
  </div>
  
  <div style="background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%); border-radius: 12px; padding: 24px; margin: 24px 0; text-align: center;">
    <h2 style="color: #166534; margin: 0 0 16px 0;"> Track Your Care</h2>
    <p style="margin: 0 0 16px 0;">Scan this code to access your order:</p>
    
    ${f}
    
    <div style="margin: 16px 0;">
      <a href="${o}" style="display: inline-block; background: #16a34a; color: white; padding: 12px 24px; border-radius: 8px; text-decoration: none; font-weight: bold;">
        Open Client Portal 
      </a>
    </div>
    
    ${m}
  </div>
  
  <div style="background: #f8fafc; border-radius: 8px; padding: 16px; margin: 24px 0;">
    <p style="margin: 0; font-size: 14px;">
      <strong>In your portal you can:</strong>
    </p>
    <ul style="margin: 8px 0 0 0; padding-left: 20px; font-size: 14px; color: #666;">
      <li>Track your care status in real-time</li>
      <li>View your caregiver's first name & photo</li>
      <li>See care sheet reports after visits</li>
      <li>Re-book services instantly</li>
    </ul>
  </div>
  
  <!-- Google Review CTA -->
  <div style="background: linear-gradient(135deg, #e8f4fc 0%, #d0ebff 100%); border-radius: 12px; padding: 24px; margin: 24px 0; text-align: center;">
    <p style="margin: 0 0 12px 0; font-size: 16px; font-weight: 600; color: #1a365d;">
       Enjoying our service?
    </p>
    <p style="margin: 0 0 16px 0; font-size: 14px; color: #4a5568;">
      We'd love to hear about your experience!
    </p>
    <a href="https://g.page/r/CfuKfStrS_hoEAI/review" style="display: inline-block; background: #3b9dd9; color: white; padding: 14px 28px; border-radius: 8px; text-decoration: none; font-weight: bold; font-size: 15px;">
      Rate your experience on Google
    </a>
  </div>
  
  <p style="color: #666; font-size: 14px;">
    Questions? Call our office at <strong>${i}</strong>
  </p>
  
  <p style="color: #666;">
    Thank you for choosing PSA Direct!<br>
    <strong>The PSA Direct Team</strong>
  </p>
  
  <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 24px 0;">
  
  <p style="font-size: 12px; color: #9ca3af; text-align: center;">
    PSA Direct | Professional Care Services<br>
    Office: ${i} | <a href="${Yn().baseUrl}" style="color: #9ca3af;">${Yn().displayName}</a>
  </p>
  
</body>
</html>
`;return{subject:d,body:h,htmlBody:p}},efe=(e,t,r,n)=>{const a=LE(),i=wz(),o=n?`${e} ${n}`:e;return`
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Welcome to PSA Direct</title>
</head>
<body style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px;">
  
  <div style="text-align: center; padding: 20px 0;">
    <img src="${Yn().baseUrl}/logo-192.png" alt="PSA Direct" width="60" height="60" style="margin-bottom: 12px;">
    <h1 style="color: #16a34a; margin: 0;"> Welcome to the Team!</h1>
  </div>
  
  <p>Hi <strong>${e}</strong>,</p>
  
  <p>Welcome to the team! <strong>You are now approved to accept jobs in the Toronto/GTA area.</strong></p>
  
  ${r?`
  <div style="background: #f0fdf4; border: 2px solid #16a34a; border-radius: 12px; padding: 20px; margin: 20px 0;">
    <h3 style="margin: 0 0 12px 0; color: #166534;">Your PSA Direct Details</h3>
    <p style="margin: 4px 0; font-size: 16px;"><strong>PSW Number:</strong> <span style="color: #16a34a; font-size: 18px; font-weight: bold;">${r}</span></p>
    <p style="margin: 4px 0;"><strong>Name:</strong> ${o}</p>
    <p style="margin: 4px 0;"><strong>Status:</strong>  Approved / Activated</p>
  </div>
  `:""}
  
  <div style="background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%); border-radius: 12px; padding: 24px; margin: 24px 0; text-align: center;">
    <h2 style="color: #166534; margin: 0 0 16px 0;"> Install the App & Login</h2>
    <p style="margin: 0 0 16px 0;">Scan the QR code below to install our app on your phone:</p>
    
    <img src="${i}" alt="QR Code to install PSA Direct app" width="180" height="180" style="display: block; margin: 0 auto;">
    
    <p style="font-size: 14px; color: #666; margin: 16px 0 0 0;">
      <strong>iOS:</strong> Share  Add to Home Screen<br>
      <strong>Android:</strong> Menu  Install App
    </p>
    
    <p style="font-size: 12px; margin: 12px 0 0 0;">
      Or click here: <a href="${a}" style="color: #16a34a; text-decoration: underline;">${a}</a>
    </p>
    
    <p style="margin: 16px 0 0 0;">
      <a href="${a}" style="display: inline-block; background: #16a34a; color: white; padding: 12px 24px; border-radius: 8px; text-decoration: none; font-weight: bold;">
        Login to Start 
      </a>
    </p>
  </div>
  
  <div style="background: #fef3c7; border-left: 4px solid #f59e0b; padding: 16px; margin: 24px 0; border-radius: 0 8px 8px 0;">
    <h3 style="color: #b45309; margin: 0 0 8px 0;"> Professional Standards</h3>
    <p style="margin: 0;">By accepting shifts, you agree to arrive on time and complete all scheduled visits.</p>
    <p style="margin: 8px 0 0 0; font-weight: bold; color: #b45309;"> Any missed or late shifts will result in immediate removal from the platform.</p>
  </div>
  
  <div style="background: #f8fafc; border-radius: 8px; padding: 16px; margin: 24px 0;">
    <h3 style="margin: 0 0 8px 0;"> Office Contact</h3>
    <p style="margin: 0;">Use the office number for ALL follow-ups:</p>
    <p style="font-size: 18px; font-weight: bold; color: #16a34a; margin: 8px 0 0 0;">${t}</p>
  </div>
  
  <p>Welcome aboard! We're excited to have you on the team.</p>
  
  <p style="color: #666;">
    Best regards,<br>
    <strong>The PSA Direct Team</strong>
  </p>
  
  <hr style="border: none; border-top: 1px solid #e5e7eb; margin: 24px 0;">
  
  <p style="font-size: 12px; color: #9ca3af; text-align: center;">
    PSA Direct | Professional Care Services<br>
    Office: ${t} | <a href="${Yn().baseUrl}" style="color: #9ca3af;">${Yn().displayName}</a>
  </p>
  
</body>
</html>
`},Yw=e=>!e||!e.trim()?"Your Caregiver":e.trim().split(/\s+/)[0]||"Your Caregiver",SC=async(e,t,r)=>{try{await de.from("email_logs").insert({template_id:e.templateId||null,template_name:e.templateName||null,recipient_email:e.to,subject:e.subject,body:e.htmlBody||e.body,status:t,error_message:r||null,metadata:{}})}catch(n){console.error("Failed to log email:",n)}},tfe=async e=>{const{to:t,subject:r,body:n,htmlBody:a}=e,{data:i,error:o}=await de.functions.invoke("send-email",{body:{to:t,subject:r,body:n,htmlBody:a}});if(o)throw console.error("Email send error:",o),new Error(o.message||"Failed to send email");return console.log("Email sent successfully:",i),!0},iu=async(e,t=2)=>{const{to:r,subject:n,body:a}=e;console.log(" EMAIL NOTIFICATION:",{to:r,subject:n,body:a.substring(0,100)+"...",timestamp:new Date().toISOString()});for(let i=1;i<=t;i++)try{if(await tfe(e))return Z.success(` Email sent to ${r}`,{description:`Subject: ${n}`,duration:3e3}),await SC(e,"sent"),!0}catch(o){if(console.warn(`Email attempt ${i}/${t} failed:`,o.message),i===t)return console.error("Email send failed after all retries:",o),Z.error(`Failed to send email to ${r}`,{description:o.message||"Unknown error",duration:5e3}),await SC(e,"failed",o.message||"Unknown error"),!1;await new Promise(l=>setTimeout(l,1e3*i))}return!1},xx=async(e,t,r)=>{const n=f9(e);if(!n||n.type==="sms")return console.error(`Template ${e} not found or is SMS-only`),!1;const a=wh(n.emailSubject,r);let i=wh(n.emailBody,r);return e==="care-sheet-delivery"&&(i+=wh(gE,r)),iu({to:t,subject:a,body:i,templateId:e,templateName:n.name})},Nz=async(e,t)=>xx("psa-signup",e,{psa_first_name:t,office_number:Vi()}),_z=async(e,t,r,n="",a)=>{const i=Vi(),o=LE(),l=a?`PSW-${a}`:"",c=efe(r,i,l,n),d=" Welcome to PSA Direct - You're Approved!";return console.log(" APPROVAL EMAIL WITH HOSTED QR CODE:",{to:e,subject:d,pswNumber:l,loginUrl:o,officeNumber:i,timestamp:new Date().toISOString()}),await iu({to:e,subject:d,body:`Welcome ${r}! You are now approved.${l?` Your PSW Number: ${l}.`:""} Login to start: ${o}`,htmlBody:c,templateId:"psw-approved-with-qr",templateName:"PSW Approved (with QR)"}),!0},Sz=async(e,t,r,n,a,i)=>{const o=Vi(),l=jz(r);console.log(" BOOKING CONFIRMATION EMAIL:",{to:e,bookingCode:r,portalUrl:l,timestamp:new Date().toISOString()});const{subject:c,body:d,htmlBody:h}=Qhe(t,r,n,a,i,o);return iu({to:e,subject:c,body:d,htmlBody:h,templateId:"booking-confirmation",templateName:"Booking Confirmation"})},rfe=async(e,t,r,n,a,i,o,l,c)=>{const d={client_name:r,booking_code:n,booking_id:n,job_date:a,job_time:i,psw_first_name:Yw(o),office_number:Vi()};return c&&(d.psw_number=`PSW-${c}`),l&&(d.psw_photo_url=l),await xx("job-claimed",e,d),!0},Cz=async(e,t,r,n,a,i)=>xx("care-sheet-delivery",e,{client_name:t,psw_first_name:Yw(r),job_date:n,tasks_completed:a.map(o=>` ${o}`).join(`
`),observations:i,office_number:Vi()}),Pz=async(e,t,r,n,a,i,o)=>iu({to:"admin@psadirect.ca",subject:a?" Shift Completed with Overtime":" Shift Completed",body:`
Shift completed.

Booking Code: ${e}
PSW: ${t}
Client: ${r}
Completed At: ${n}
${a?" FLAGGED FOR OVERTIME BILLING":""}

View details in the Admin Panel.
    `.trim(),templateId:"job-completed-admin",templateName:"Job Completed (Admin)"}),kz=async(e,t,r,n,a,i,o)=>{const l={client_name:t,booking_code:r,booking_id:r,job_date:n,job_time:a,psw_first_name:Yw(i),office_number:Vi()};return xx("psw-arrived",e,l)},nfe=async(e,t,r,n,a,i,o)=>{const l=o?`PSW-${o}`:"",c="Care Extended - Adjustment Applied",d=`
    <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
      <h2 style="color: #1a365d;">Care Extension Notice</h2>
      <p>Dear ${t},</p>
      <p>To ensure the completion of quality care, your service was extended by <strong>${n} minutes</strong> today.</p>
      <div style="background: #f7fafc; border-left: 4px solid #3182ce; padding: 16px; margin: 20px 0;">
        <p style="margin: 0; color: #2d3748;">
          <strong>Booking Code:</strong> ${r}<br>
          <strong>Overtime Duration:</strong> ${n} minutes<br>
          <strong>Adjustment Amount:</strong> $${a.toFixed(2)} CAD<br>
          <strong>Caregiver:</strong> ${i}${l?` (${l})`:""}
        </p>
      </div>
      <p>This adjustment has been automatically applied to your payment method on file. Your updated receipt will be available in your Client Portal.</p>
      <p>If you have any questions about this adjustment, please contact our office at ${Vi()}.</p>
      <p style="margin-top: 24px;">Thank you for trusting PSA Direct with your care needs.</p>
      <hr style="border: none; border-top: 1px solid #e2e8f0; margin: 24px 0;">
      <p style="color: #718096; font-size: 12px;">PSA Direct - Professional Home Care Services</p>
    </div>
  `;return iu({to:e,subject:c,body:`Dear ${t}, Booking ${r}: your care was extended by ${n} minutes. An adjustment of $${a.toFixed(2)} has been applied. Contact us at ${Vi()} with questions.`,htmlBody:d,templateId:"overtime-adjustment",templateName:"Overtime Adjustment"})},FE=async(e,t,r,n,a,i,o,l,c)=>{const d={client_name:t,psw_first_name:Yw(r),job_date:a,tasks_completed:i.map(b=>` ${b}`).join(`
`),observations:o,office_number:Vi()};n&&(d.psw_photo_url=n);const h=f9("hospital-discharge-delivery");if(!h)return console.error("Hospital discharge template not found"),!1;const f=wh(h.emailSubject,d);let m=wh(h.emailBody,d);m+=wh(gE,d);let p="application/pdf";l.startsWith("data:image/jpeg")?p="image/jpeg":l.startsWith("data:image/png")&&(p="image/png");const y=l.includes(",")?l.split(",")[1]:l;console.log(" HOSPITAL DISCHARGE EMAIL WITH ATTACHMENT:",{to:e,subject:f,hasAttachment:!0,attachmentFilename:c||"discharge-papers",attachmentType:p});const{error:v}=await de.functions.invoke("send-email",{body:{to:e,subject:f,body:`Hospital discharge summary for ${t}`,htmlBody:m,attachment:{filename:c||"discharge-papers.pdf",content:y,contentType:p}}});return v?(console.error("Hospital discharge email error:",v),!1):(await SC({to:e,subject:f,body:m,templateId:"hospital-discharge-delivery",templateName:"Hospital Discharge Delivery"},"sent"),!0)},Ez=Object.freeze(Object.defineProperty({__proto__:null,sendBookingConfirmationEmail:Sz,sendCareSheetReportEmail:Cz,sendEmail:iu,sendHospitalDischargeEmail:FE,sendJobClaimedNotification:rfe,sendJobCompletedAdminNotification:Pz,sendOvertimeAdjustmentNotification:nfe,sendPSWApprovedNotification:_z,sendPSWArrivedNotification:kz,sendTemplatedEmail:xx,sendWelcomePSWEmail:Nz},Symbol.toStringTag,{value:"Module"})),CC=[{code:"en",name:"English",nativeName:"English"},{code:"fr",name:"French",nativeName:"Franais"},{code:"pa",name:"Punjabi",nativeName:""},{code:"hi",name:"Hindi",nativeName:""},{code:"ur",name:"Urdu",nativeName:""},{code:"ta",name:"Tamil",nativeName:""},{code:"gu",name:"Gujarati",nativeName:""},{code:"zh",name:"Mandarin Chinese",nativeName:""},{code:"zh-yue",name:"Cantonese",nativeName:""},{code:"tl",name:"Tagalog/Filipino",nativeName:"Tagalog"},{code:"es",name:"Spanish",nativeName:"Espaol"},{code:"pt",name:"Portuguese",nativeName:"Portugus"},{code:"it",name:"Italian",nativeName:"Italiano"},{code:"de",name:"German",nativeName:"Deutsch"},{code:"pl",name:"Polish",nativeName:"Polski"},{code:"uk",name:"Ukrainian",nativeName:""},{code:"ru",name:"Russian",nativeName:""},{code:"ar",name:"Arabic",nativeName:""},{code:"fa",name:"Persian/Farsi",nativeName:""},{code:"ko",name:"Korean",nativeName:""},{code:"ja",name:"Japanese",nativeName:""},{code:"vi",name:"Vietnamese",nativeName:"Ting Vit"},{code:"bn",name:"Bengali",nativeName:""},{code:"te",name:"Telugu",nativeName:""},{code:"mr",name:"Marathi",nativeName:""},{code:"so",name:"Somali",nativeName:"Soomaali"},{code:"am",name:"Amharic",nativeName:""},{code:"sw",name:"Swahili",nativeName:"Kiswahili"},{code:"el",name:"Greek",nativeName:""},{code:"nl",name:"Dutch",nativeName:"Nederlands"},{code:"ro",name:"Romanian",nativeName:"Romn"},{code:"hu",name:"Hungarian",nativeName:"Magyar"},{code:"cs",name:"Czech",nativeName:"etina"},{code:"he",name:"Hebrew",nativeName:""},{code:"th",name:"Thai",nativeName:""},{code:"ms",name:"Malay",nativeName:"Bahasa Melayu"},{code:"id",name:"Indonesian",nativeName:"Bahasa Indonesia"},{code:"tr",name:"Turkish",nativeName:"Trke"},{code:"sr",name:"Serbian",nativeName:""},{code:"hr",name:"Croatian",nativeName:"Hrvatski"}],sfe=e=>CC.find(t=>t.code===e),Vd=e=>{const t=sfe(e);return t?t.name:e},afe=e=>{if(!e.trim())return CC;const t=e.toLowerCase();return CC.filter(r=>r.name.toLowerCase().includes(t)||r.nativeName.toLowerCase().includes(t)||r.code.toLowerCase().includes(t))},ife=()=>{const e=localStorage.getItem("pswdirect_psw_languages");if(e)try{return JSON.parse(e)}catch{return[]}return[]},Tz=e=>{const r=ife().find(n=>n.pswId===e);return(r==null?void 0:r.languages)||["en"]},ofe=(e,t)=>{const r=Tz(e);return t.some(n=>r.includes(n))},Az=()=>{const e=localStorage.getItem("pswdirect_job_language_tracking");if(e)try{return JSON.parse(e)}catch{return[]}return[]},lfe=e=>{localStorage.setItem("pswdirect_job_language_tracking",JSON.stringify(e))},cfe=(e,t)=>{const r=Az(),n={bookingId:e,preferredLanguages:t,postedAt:new Date().toISOString(),languageMatchNotifiedAt:new Date().toISOString()},a=r.filter(i=>i.bookingId!==e);return a.push(n),lfe(a),n},dfe=e=>{const r=Az().find(o=>o.bookingId===e);if(!r||r.preferredLanguages.length===0)return!0;const n=new Date(r.postedAt);return(new Date().getTime()-n.getTime())/(1e3*60*60)>=2},ufe=()=>{const e=Date.now().toString(36).toUpperCase(),t=Math.random().toString(36).substring(2,4).toUpperCase();return`SH-${e}-${t}`},gs=()=>{const e=localStorage.getItem("pswdirect_shifts");if(e)try{return JSON.parse(e)}catch{return[]}return[]},Oz=e=>{localStorage.setItem("pswdirect_shifts",JSON.stringify(e))},Zw=e=>{const t=gs(),r={...e,id:ufe()};return t.push(r),Oz(t),r},ou=(e,t)=>{const r=gs(),n=r.findIndex(a=>a.id===e);return n===-1?null:(r[n]={...r[n],...t},Oz(r),r[n])},qd=e=>gs().find(r=>r.id===e)||null,hfe=()=>gs().filter(t=>t.status==="available"),ffe=e=>gs().filter(r=>r.pswId===e&&r.status!=="available"),BE=e=>gs().filter(r=>r.pswId===e&&r.status==="checked-in"),mfe=e=>BE(e).length>0,Mz=(e,t,r,n,a,i)=>{if(!qd(e))return null;const l=ou(e,{pswId:t,pswName:r,pswPhotoUrl:n,pswVehiclePhotoUrl:a,pswLicensePlate:i,claimedAt:new Date().toISOString(),agreementAccepted:!0,status:"claimed"});return l&&l.bookingId&&Po(async()=>{const{supabase:c}=await Promise.resolve().then(()=>Vf);return{supabase:c}},void 0).then(({supabase:c})=>{c.from("bookings").update({psw_photo_url:n||null,psw_first_name:r.split(" ")[0],psw_vehicle_photo_url:a||null,psw_license_plate:i||null}).eq("booking_code",l.bookingId).then(({error:d})=>{d?console.warn("Failed to update booking with PSW details:",d):console.log(" Booking updated with PSW photo and vehicle details")})}),l&&l.clientEmail&&(Po(async()=>{const{sendJobClaimedNotification:c}=await Promise.resolve().then(()=>Ez);return{sendJobClaimedNotification:c}},void 0).then(({sendJobClaimedNotification:c})=>{c(l.clientEmail,l.clientPhone,l.clientName,l.bookingId,l.scheduledDate,`${l.scheduledStart} - ${l.scheduledEnd}`,r,n)}),console.log(" JOB CLAIMED EMAIL TRIGGERED:",{to:l.clientEmail,clientName:l.clientName,bookingId:l.bookingId,pswName:r,pswPhotoUrl:n?"included":"not available"})),l},PC=(e,t)=>ou(e,{checkedInAt:new Date().toISOString(),checkInLocation:t,status:"checked-in"}),Iz=(e,t,r)=>{const n=qd(e);if(!n||!n.checkedInAt)return null;const a=new Date,i=new Date(`${n.scheduledDate} ${n.scheduledEnd}`),o=Math.max(0,Math.floor((a.getTime()-i.getTime())/6e4)),l=o>=15,c=ou(e,{signedOutAt:a.toISOString(),careSheet:t,careSheetSentAt:a.toISOString(),careSheetEmailTo:r,overtimeMinutes:o,flaggedForOvertime:l,status:"completed"});return console.log(" CARE SHEET EMAIL SENT:",{to:r,shiftId:e,pswFirstName:t.pswFirstName,tasksCompleted:t.tasksCompleted,observations:t.observations,officeNumber:t.officeNumber,sentAt:a.toISOString()}),l&&console.log(" OVERTIME FLAGGED:",{shiftId:e,overtimeMinutes:o,scheduledEnd:n.scheduledEnd,actualSignOut:a.toISOString(),flaggedForBilling:!0}),c&&Po(()=>Promise.resolve().then(()=>Vf),void 0).then(async({supabase:d})=>{const h=o>0?(new Date(c.signedOutAt).getTime()-new Date(c.checkedInAt).getTime())/36e5:(i.getTime()-new Date(c.checkedInAt).getTime())/36e5,f=c.services.some(w=>w.toLowerCase().includes("hospital")),m=c.services.some(w=>w.toLowerCase().includes("doctor")),p=f?28:m?25:22,y=f?35:30,v=f?"Hospital Visit":m?"Doctor Visit":"Standard Home Care",b=Math.max(h,1)*p,{error:N}=await d.from("payroll_entries").insert({shift_id:c.id,psw_id:c.pswId,psw_name:c.pswName,task_name:l?`${v} (Overtime Adjusted): ${c.services.join(", ")}`:`${v}: ${c.services.join(", ")}`,scheduled_date:c.scheduledDate,hours_worked:Number(Math.max(h,1).toFixed(2)),hourly_rate:p,total_owed:Number(b.toFixed(2)),status:l?"overtime_adjusted":"pending"});N?console.error("Auto-payroll error:",N):console.log(" Auto-created payroll entry for shift",c.id);const{error:j}=await d.from("bookings").update({status:"completed",care_sheet:JSON.parse(JSON.stringify(t)),care_sheet_submitted_at:a.toISOString(),care_sheet_psw_name:t.pswFirstName,psw_assigned:c.pswId,psw_first_name:t.pswFirstName}).eq("booking_code",c.bookingId);if(j?console.error(" Booking update error:",j):console.log(" Booking marked as completed in database:",c.bookingId),l&&o>=15){console.log(" Triggering automatic overtime charge...",{overtimeMinutes:o,clientHourlyRate:y});try{const{data:w,error:S}=await d.functions.invoke("charge-overtime",{body:{bookingId:c.bookingId,shiftId:c.id,customerEmail:r,overtimeMinutes:o,hourlyRate:y,pswId:c.pswId,pswName:c.pswName,clientName:c.clientName,isDryRun:!1}});S?console.error("Overtime charge error:",S):w!=null&&w.charged?(console.log(" Overtime charge successful:",w),Po(async()=>{const{sendOvertimeAdjustmentNotification:C}=await Promise.resolve().then(()=>Ez);return{sendOvertimeAdjustmentNotification:C}},void 0).then(({sendOvertimeAdjustmentNotification:C})=>{C(r,c.clientName,c.bookingId,o,w.chargeAmount,t.pswFirstName)})):console.log(" No overtime charge applied (within grace period)")}catch(w){console.error("Failed to process overtime:",w)}}}),c},pfe=(e,t,r)=>{const n=qd(e);if(!n||n.status!=="claimed")return null;const a=new Date,i=ou(e,{checkedInAt:a.toISOString(),checkInLocation:{lat:0,lng:0},status:"checked-in"});return i&&Po(async()=>{const{supabase:o}=await Promise.resolve().then(()=>Vf);return{supabase:o}},void 0).then(({supabase:o})=>{o.from("bookings").update({status:"in-progress",manual_check_in:!0,manual_override_at:a.toISOString(),manual_override_by:t,manual_override_reason:r||"Admin manual check-in (geofence bypass)"}).eq("booking_code",i.bookingId).then(({error:l})=>{l?console.warn("Failed to update booking with manual check-in flag:",l):console.log(" Booking updated with manual check-in override")})}),console.log(" ADMIN MANUAL CHECK-IN:",{shiftId:e,pswName:n.pswName,clientName:n.clientName,adminEmail:t,reason:r,checkedInAt:a.toISOString(),manualOverride:!0}),i},gfe=(e,t,r)=>{const n=qd(e);if(!n||n.status!=="checked-in")return null;const a=new Date,i=new Date(`${n.scheduledDate} ${n.scheduledEnd}`),o=Math.max(0,Math.floor((a.getTime()-i.getTime())/6e4)),l=o>=15,c=ou(e,{signedOutAt:a.toISOString(),careSheet:{moodOnArrival:"unknown",moodOnDeparture:"unknown",tasksCompleted:n.services,observations:`[Admin manual sign-out]${r?` Reason: ${r}`:""} - Care sheet not completed by PSW.`,pswFirstName:n.pswName.split(" ")[0]||"Unknown",officeNumber:Ea},overtimeMinutes:o,flaggedForOvertime:l,status:"completed"});return c&&Po(()=>Promise.resolve().then(()=>Vf),void 0).then(async({supabase:d})=>{await d.from("bookings").update({status:"completed",manual_check_out:!0,manual_override_at:a.toISOString(),manual_override_by:t,manual_override_reason:r||"Admin manual sign-out (geofence bypass)",care_sheet:JSON.parse(JSON.stringify(c.careSheet)),care_sheet_submitted_at:a.toISOString(),care_sheet_psw_name:c.pswName.split(" ")[0]}).eq("booking_code",c.bookingId)}),console.log(" ADMIN MANUAL SIGN-OUT:",{shiftId:e,pswName:n.pswName,clientName:n.clientName,adminEmail:t,reason:r,signedOutAt:a.toISOString(),overtimeMinutes:o,manualOverride:!0}),c},xfe=(e,t)=>{const r=qd(e);if(!r||r.status!=="checked-in")return null;const n=new Date,a=new Date(`${r.scheduledDate} ${r.scheduledEnd}`),i=Math.max(0,Math.floor((n.getTime()-a.getTime())/6e4)),o=i>=15,l=ou(e,{signedOutAt:n.toISOString(),careSheet:{moodOnArrival:"unknown",moodOnDeparture:"unknown",tasksCompleted:r.services,observations:`[Admin stopped shift]${t?` Reason: ${t}`:""}`,pswFirstName:r.pswName.split(" ")[0]||"Unknown",officeNumber:Ea},overtimeMinutes:i,flaggedForOvertime:o,status:"completed"});return console.log(" ADMIN STOPPED SHIFT:",{shiftId:e,pswName:r.pswName,clientName:r.clientName,adminNotes:t,stoppedAt:n.toISOString()}),l},yI=e=>{const t=gs();e.forEach(r=>{r.status==="cancelled"||r.status==="completed"||t.find(a=>a.bookingId===r.id)||Zw({bookingId:r.id,pswId:r.pswAssigned||"",pswName:r.pswAssigned||"",pswLanguages:r.pswLanguages,clientName:r.orderingClient.name,clientFirstName:r.orderingClient.name.split(" ")[0],clientPhone:r.orderingClient.phone,clientEmail:r.orderingClient.email,patientAddress:r.patient.address,postalCode:r.patient.postalCode,scheduledStart:r.startTime,scheduledEnd:r.endTime,scheduledDate:r.date,services:r.serviceType,preferredLanguages:r.patient.preferredLanguages,preferredGender:r.patient.preferredGender,agreementAccepted:!1,overtimeMinutes:0,flaggedForOvertime:!1,postedAt:new Date().toISOString(),status:r.pswAssigned?"claimed":"available"})})},vfe=()=>{if(gs().length>0)return;[{bookingId:"BK001",pswId:"",pswName:"",clientName:"Margaret Thompson",clientFirstName:"Margaret",clientPhone:"(416) 555-0101",patientAddress:"456 Oak Avenue, Belleville, ON",postalCode:"K8N 2B3",scheduledStart:"09:00",scheduledEnd:"13:00",scheduledDate:"2025-01-14",services:["Personal Care","Meal Prep"],agreementAccepted:!1,overtimeMinutes:0,flaggedForOvertime:!1,status:"available"},{bookingId:"BK002",pswId:"",pswName:"",clientName:"Michael Chen",clientFirstName:"Michael",clientPhone:"(416) 555-0102",patientAddress:"789 Maple Street, Trenton, ON",postalCode:"K8V 3M2",scheduledStart:"14:00",scheduledEnd:"17:00",scheduledDate:"2025-01-14",services:["Companionship","Light Housekeeping"],agreementAccepted:!1,overtimeMinutes:0,flaggedForOvertime:!1,status:"available"},{bookingId:"BK003",pswId:"",pswName:"",clientName:"Dorothy Williams",clientFirstName:"Dorothy",clientPhone:"(416) 555-0103",patientAddress:"123 Pine Road, Napanee, ON",postalCode:"K7R 1H5",scheduledStart:"10:00",scheduledEnd:"14:00",scheduledDate:"2025-01-15",services:["Respite Care","Medication Reminders"],agreementAccepted:!1,overtimeMinutes:0,flaggedForOvertime:!1,status:"available"},{bookingId:"BK004",pswId:"",pswName:"",clientName:"Susan Park",clientFirstName:"Susan",clientPhone:"(416) 555-0104",patientAddress:"200 Bay Street, Toronto, ON",postalCode:"M5J 2J2",scheduledStart:"08:00",scheduledEnd:"12:00",scheduledDate:"2025-01-15",services:["Personal Care","Companionship"],preferredLanguages:["en","ko"],agreementAccepted:!1,overtimeMinutes:0,flaggedForOvertime:!1,status:"available"},{bookingId:"BK005",pswId:"",pswName:"",clientName:"James Liu",clientFirstName:"James",clientPhone:"(416) 555-0105",patientAddress:"5000 Yonge Street, North York, ON",postalCode:"M2N 5Y7",scheduledStart:"13:00",scheduledEnd:"17:00",scheduledDate:"2025-01-16",services:["Meal Prep","Light Housekeeping","Medication Reminders"],preferredLanguages:["zh","en"],agreementAccepted:!1,overtimeMinutes:0,flaggedForOvertime:!1,status:"available"}].forEach(r=>Zw(r))},yfe=()=>{const e=Date.now().toString(36).toUpperCase(),t=Math.random().toString(36).substring(2,6).toUpperCase();return`PSW-${e}-${t}`},bI=async()=>{const{data:e,error:t}=await de.from("bookings").select("*").order("scheduled_date",{ascending:!1});return t?(console.error("Error fetching bookings:",t),zE()):e.map(Rz)},zE=()=>{const e=localStorage.getItem("pswdirect_bookings");if(e)try{return JSON.parse(e)}catch{return[]}return[]},bfe=e=>{localStorage.setItem("pswdirect_bookings",JSON.stringify(e))},Rz=e=>({id:e.booking_code||e.id,bookingUuid:e.id,createdAt:e.created_at,paymentStatus:e.payment_status,stripePaymentIntentId:e.stripe_payment_intent_id||void 0,serviceType:e.service_type||[],date:e.scheduled_date,startTime:e.start_time,endTime:e.end_time,status:e.status,hours:Number(e.hours),hourlyRate:Number(e.hourly_rate),subtotal:Number(e.subtotal),surgeAmount:Number(e.surge_amount)||0,total:Number(e.total),isAsap:e.is_asap||!1,wasRefunded:e.was_refunded||!1,orderingClient:{name:e.client_name,address:e.client_address,postalCode:e.client_postal_code||"",phone:e.client_phone||"",email:e.client_email,isNewAccount:!1},patient:{name:e.patient_name,address:e.patient_address,postalCode:e.patient_postal_code||"",relationship:e.patient_relationship||"Self",preferredLanguages:e.preferred_languages||void 0,preferredGender:e.preferred_gender||void 0},pickupAddress:e.pickup_address||void 0,pickupPostalCode:void 0,dropoffAddress:e.dropoff_address||void 0,dropoffPostalCode:void 0,isTransportBooking:e.is_transport_booking||!1,pswAssigned:e.psw_assigned||null,pswFirstName:e.psw_first_name||void 0,specialNotes:e.special_notes||"",doctorOfficeName:void 0,doctorSuiteNumber:void 0,entryPhoto:void 0,buzzerCode:void 0,entryPoint:void 0,emailNotifications:{confirmationSent:!0,confirmationSentAt:e.created_at,reminderSent:!1},adminNotifications:{notified:!0,notifiedAt:e.created_at}}),UE=async e=>{const t=new Date().toISOString(),{data:{user:r}}=await de.auth.getUser(),{data:n,error:a}=await de.functions.invoke("create-booking",{body:{user_id:(r==null?void 0:r.id)||null,client_name:e.orderingClient.name,client_email:e.orderingClient.email,client_phone:e.orderingClient.phone||null,client_address:e.orderingClient.address,client_postal_code:e.orderingClient.postalCode||null,patient_name:e.patient.name,patient_address:e.patient.address,patient_postal_code:e.patient.postalCode||null,patient_relationship:e.patient.relationship||null,preferred_gender:e.patient.preferredGender||null,preferred_languages:e.patient.preferredLanguages||null,scheduled_date:e.date,start_time:e.startTime,end_time:e.endTime,hours:e.hours,hourly_rate:e.hourlyRate,subtotal:e.subtotal,surge_amount:e.surgeAmount||0,total:e.total,service_type:e.serviceType,payment_status:e.paymentStatus||"invoice-pending",stripe_payment_intent_id:e.stripePaymentIntentId||null,is_asap:e.isAsap||!1,is_transport_booking:e.isTransportBooking||!1,pickup_address:e.pickupAddress||null,pickup_postal_code:e.pickupPostalCode||null,special_notes:e.specialNotes||null}});if(a||n!=null&&n.error){const c=(a==null?void 0:a.message)||(n==null?void 0:n.error)||"Unknown error";console.error("Error creating booking via edge function:",c);const d=yfe(),h=zE(),f={...e,id:d,createdAt:t};return h.push(f),bfe(h),f}const i=n.booking_code,o=n.booking_id,l={...e,id:i,createdAt:n.created_at||t,bookingUuid:o};return console.log(" ADMIN NOTIFICATION: New booking received!",{bookingId:i,bookingUuid:o,client:e.orderingClient.name,email:e.orderingClient.email,date:e.date,time:e.startTime,services:e.serviceType,total:e.total,paymentStatus:e.paymentStatus}),e.patient.preferredLanguages&&e.patient.preferredLanguages.length>0&&cfe(i,e.patient.preferredLanguages),e.orderingClient.email&&e.orderingClient.email.trim()!==""&&e.orderingClient.email.includes("@")?await Sz(e.orderingClient.email.trim(),e.orderingClient.name.split(" ")[0],i,e.date,`${e.startTime} - ${e.endTime}`,e.serviceType):console.warn("Cannot send booking confirmation - no valid email provided:",e.orderingClient.email),Zw({bookingId:i,pswId:"",pswName:"",clientName:e.orderingClient.name,clientFirstName:e.orderingClient.name.split(" ")[0],clientPhone:e.orderingClient.phone,clientEmail:e.orderingClient.email,patientAddress:e.patient.address,postalCode:e.patient.postalCode,scheduledStart:e.startTime,scheduledEnd:e.endTime,scheduledDate:e.date,services:e.serviceType,preferredLanguages:e.patient.preferredLanguages,preferredGender:e.patient.preferredGender,pickupAddress:e.pickupAddress,pickupPostalCode:e.pickupPostalCode,dropoffAddress:e.dropoffAddress,dropoffPostalCode:e.dropoffPostalCode,isTransportShift:e.isTransportBooking,agreementAccepted:!1,overtimeMinutes:0,flaggedForOvertime:!1,postedAt:t,status:"available"}),l},WE=async(e,t)=>{const r={};t.status&&(r.status=t.status),t.paymentStatus&&(r.payment_status=t.paymentStatus),t.pswAssigned!==void 0&&(r.psw_assigned=t.pswAssigned),t.pswFirstName!==void 0&&(r.psw_first_name=t.pswFirstName),t.wasRefunded!==void 0&&(r.was_refunded=t.wasRefunded);const{data:n,error:a}=await de.from("bookings").update(r).eq("booking_code",e).select().single();return a?(console.error("Error updating booking:",a),null):Rz(n)},wfe=async(e,t=!1)=>WE(e,{status:"cancelled",wasRefunded:t,paymentStatus:t?"refunded":"invoice-pending"}),jfe=async e=>WE(e,{status:"archived"}),Nfe=async e=>{const{error:t}=await de.from("bookings").update({archived_to_accounting_at:new Date().toISOString()}).eq("booking_code",e);return t?(console.error("Error archiving to accounting:",t),!1):!0},_fe=async e=>WE(e,{status:"pending"}),Sfe=async()=>{const e=new Date().toISOString().split("T")[0],{data:t,error:r}=await de.from("bookings").select("id, booking_code").lt("scheduled_date",e).not("status","in",'("completed","in-progress","archived")');if(r)return console.error("Error fetching past-due bookings:",r),{archived:0,error:r.message};if(!t||t.length===0)return{archived:0};const{error:n}=await de.from("bookings").update({status:"archived"}).lt("scheduled_date",e).not("status","in",'("completed","in-progress","archived")');return n?(console.error("Error archiving bookings:",n),{archived:0,error:n.message}):{archived:t.length}},Dz=e=>({id:e.id,name:e.task_name,includedMinutes:e.included_minutes,baseCost:e.base_cost,isHospitalDoctor:e.is_hospital_doctor,serviceCategory:e.service_category,requiresDischargeUpload:e.requires_discharge_upload,applyHST:e.apply_hst}),vx=()=>{const[e,t]=x.useState([]),[r,n]=x.useState(!0),[a,i]=x.useState(null),o=x.useCallback(async()=>{n(!0),i(null);const{data:l,error:c}=await de.from("service_tasks").select("*").eq("is_active",!0).order("task_name");if(c)console.error("Error fetching service tasks:",c),i(c.message),t([]);else{const d=(l||[]).map(Dz);t(d),localStorage.setItem("adminTasks",JSON.stringify(d))}n(!1)},[]);return x.useEffect(()=>{o()},[o]),{tasks:e,loading:r,error:a,refetch:o}},Cfe=async()=>{const{data:e,error:t}=await de.from("service_tasks").select("*").eq("is_active",!0).order("task_name");if(t){console.error("Error fetching service tasks:",t);const n=localStorage.getItem("adminTasks");if(n)try{return JSON.parse(n)}catch{return[]}return[]}const r=(e||[]).map(Dz);return localStorage.setItem("adminTasks",JSON.stringify(r)),r},Pfe=Object.freeze(Object.defineProperty({__proto__:null,fetchServiceTasksAsync:Cfe,useServiceTasks:vx},Symbol.toStringTag,{value:"Module"}));var HE="Progress",VE=100,[kfe,bze]=sn(HE),[Efe,Tfe]=kfe(HE),$z=x.forwardRef((e,t)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:i=Afe,...o}=e;(a||a===0)&&!wI(a)&&console.error(Ofe(`${a}`,"Progress"));const l=wI(a)?a:VE;n!==null&&!jI(n,l)&&console.error(Mfe(`${n}`,"Progress"));const c=jI(n,l)?n:null,d=U0(c)?i(c,l):void 0;return s.jsx(Efe,{scope:r,value:c,max:l,children:s.jsx(ze.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":U0(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":Bz(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});$z.displayName=HE;var Lz="ProgressIndicator",Fz=x.forwardRef((e,t)=>{const{__scopeProgress:r,...n}=e,a=Tfe(Lz,r);return s.jsx(ze.div,{"data-state":Bz(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:t})});Fz.displayName=Lz;function Afe(e,t){return`${Math.round(e/t*100)}%`}function Bz(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function U0(e){return typeof e=="number"}function wI(e){return U0(e)&&!isNaN(e)&&e>0}function jI(e,t){return U0(e)&&!isNaN(e)&&e<=t&&e>=0}function Ofe(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${VE}\`.`}function Mfe(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${VE} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var zz=$z,Ife=Fz;const qE=x.forwardRef(({className:e,value:t,...r},n)=>s.jsx(zz,{ref:n,className:Re("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:s.jsx(Ife,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));qE.displayName=zz.displayName;const Rfe=({selectedTaskIds:e,selectedDuration:t=1})=>{if(e.length===0)return null;const r=t*60,n=au();let a=0;e.forEach(c=>{const d=n.find(h=>h.id===c);d&&(a+=d.includedMinutes)});const i=Math.min(100,a/r*100),o=a>r,l=Math.max(0,r-a);return s.jsxs("div",{className:"p-4 bg-muted rounded-lg space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qe,{className:"w-4 h-4 text-primary"}),s.jsxs("span",{className:"font-medium text-foreground text-sm",children:[t,"-Hour Booking Meter"]})]}),s.jsxs("span",{className:`text-sm font-medium ${o?"text-amber-600":"text-green-600"}`,children:[a," / ",r," min"]})]}),s.jsx(qE,{value:i,className:`h-3 ${o?"[&>div]:bg-amber-500":"[&>div]:bg-green-500"}`}),o?s.jsxs("div",{className:"flex items-start gap-2 text-sm text-amber-700 dark:text-amber-400",children:[s.jsx(At,{className:"w-4 h-4 shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsxs("p",{children:["Tasks exceed your ",t,"-hour booking by ",s.jsxs("strong",{children:[a-r," minutes"]})]}),s.jsx("p",{className:"text-xs mt-1",children:"Consider selecting a longer duration or fewer tasks"})]})]}):s.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-700 dark:text-green-400",children:[s.jsx(tn,{className:"w-4 h-4"}),s.jsxs("span",{children:["You have ",s.jsxs("strong",{children:[l," minutes"]})," remaining in your ",t,"-hour booking"]})]})]})},Dfe=[/\d{3}[-.\s]?\d{3}[-.\s]?\d{4}/,/\(\d{3}\)\s?\d{3}[-.\s]?\d{4}/,/\d{10,}/,/\+\d{1,3}[-.\s]?\d{3,}/,/1[-.\s]?\d{3}[-.\s]?\d{3}[-.\s]?\d{4}/],$fe=/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/i,Lfe=e=>{if(!e)return!1;for(const t of Dfe)if(t.test(e))return!0;return!1},Ffe=e=>e?$fe.test(e):!1,Bfe=()=>{const e=jc();return!e.liveAuthEnabled&&e.devRole?e.devRole==="psw"?"psa":e.devRole:null},ip=(e,t,r)=>{const n=r||Bfe(),a={hasViolation:!1,containsPhone:!1,containsEmail:!1,shouldBlock:!1,message:null};if(!e||!e.trim())return a;const i=Lfe(e),o=Ffe(e),l=i||o;return l?n==="admin"?{...a,containsPhone:i,containsEmail:o,hasViolation:!1,shouldBlock:!1,message:null}:t==="doctor-office"?{...a,containsPhone:i,containsEmail:o,hasViolation:!1,shouldBlock:!1,message:null}:n==="psa"&&(t==="care-notes"||t==="care-sheet")?{hasViolation:!0,containsPhone:i,containsEmail:o,shouldBlock:!0,message:"For your privacy, please do not include personal contact information in the notes. Use the office number for all follow-ups."}:(n==="client"||!n)&&(t==="special-instructions"||t==="patient-info")?{hasViolation:!0,containsPhone:i,containsEmail:o,shouldBlock:!0,message:"For your privacy, please do not include personal contact information in the notes. Use the office number for all follow-ups."}:t==="general"&&l?{hasViolation:!0,containsPhone:i,containsEmail:o,shouldBlock:!0,message:"For privacy protection, please avoid including personal contact information."}:a:a},zfe=e=>ip(e,"care-notes","psa");var Xw="Popover",[Uz,wze]=sn(Xw,[kc]),yx=kc(),[Ufe,Mc]=Uz(Xw),Wz=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,l=yx(t),c=x.useRef(null),[d,h]=x.useState(!1),[f,m]=Ln({prop:n,defaultProp:a??!1,onChange:i,caller:Xw});return s.jsx(bw,{...l,children:s.jsx(Ufe,{scope:t,contentId:Qs(),triggerRef:c,open:f,onOpenChange:m,onOpenToggle:x.useCallback(()=>m(p=>!p),[m]),hasCustomAnchor:d,onCustomAnchorAdd:x.useCallback(()=>h(!0),[]),onCustomAnchorRemove:x.useCallback(()=>h(!1),[]),modal:o,children:r})})};Wz.displayName=Xw;var Hz="PopoverAnchor",Wfe=x.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Mc(Hz,r),i=yx(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return x.useEffect(()=>(o(),()=>l()),[o,l]),s.jsx(ux,{...i,...n,ref:t})});Wfe.displayName=Hz;var Vz="PopoverTrigger",qz=x.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Mc(Vz,r),i=yx(r),o=nt(t,a.triggerRef),l=s.jsx(ze.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Xz(a.open),...n,ref:o,onClick:Ie(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:s.jsx(ux,{asChild:!0,...i,children:l})});qz.displayName=Vz;var GE="PopoverPortal",[Hfe,Vfe]=Uz(GE,{forceMount:void 0}),Gz=e=>{const{__scopePopover:t,forceMount:r,children:n,container:a}=e,i=Mc(GE,t);return s.jsx(Hfe,{scope:t,forceMount:r,children:s.jsx(kn,{present:r||i.open,children:s.jsx(Df,{asChild:!0,container:a,children:n})})})};Gz.displayName=GE;var Qh="PopoverContent",Kz=x.forwardRef((e,t)=>{const r=Vfe(Qh,e.__scopePopover),{forceMount:n=r.forceMount,...a}=e,i=Mc(Qh,e.__scopePopover);return s.jsx(kn,{present:n||i.open,children:i.modal?s.jsx(Gfe,{...a,ref:t}):s.jsx(Kfe,{...a,ref:t})})});Kz.displayName=Qh;var qfe=vc("PopoverContent.RemoveScroll"),Gfe=x.forwardRef((e,t)=>{const r=Mc(Qh,e.__scopePopover),n=x.useRef(null),a=nt(t,n),i=x.useRef(!1);return x.useEffect(()=>{const o=n.current;if(o)return Mw(o)},[]),s.jsx(mx,{as:qfe,allowPinchZoom:!0,children:s.jsx(Yz,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ie(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Ie(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:Ie(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Kfe=x.forwardRef((e,t)=>{const r=Mc(Qh,e.__scopePopover),n=x.useRef(!1),a=x.useRef(!1);return s.jsx(Yz,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),Yz=x.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:h,...f}=e,m=Mc(Qh,r),p=yx(r);return Aw(),s.jsx(fx,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(ru,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:h,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1),children:s.jsx(ww,{"data-state":Xz(m.open),role:"dialog",id:m.contentId,...p,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Zz="PopoverClose",Yfe=x.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Mc(Zz,r);return s.jsx(ze.button,{type:"button",...n,ref:t,onClick:Ie(e.onClick,()=>a.onOpenChange(!1))})});Yfe.displayName=Zz;var Zfe="PopoverArrow",Xfe=x.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=yx(r);return s.jsx(jw,{...a,...n,ref:t})});Xfe.displayName=Zfe;function Xz(e){return e?"open":"closed"}var Jfe=Wz,Qfe=qz,eme=Gz,Jz=Kz;const KE=Jfe,YE=Qfe,Jw=x.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},a)=>s.jsx(eme,{children:s.jsx(Jz,{ref:a,align:t,sideOffset:r,className:Re("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Jw.displayName=Jz.displayName;const bx=x.forwardRef(function({selectedLanguages:t,onLanguagesChange:r,maxLanguages:n=5,label:a="Languages Spoken",placeholder:i="Search languages...",description:o,excludeEnglish:l=!1},c){const[d,h]=x.useState(!1),[f,m]=x.useState(""),p=x.useMemo(()=>{let b=afe(f);return l&&(b=b.filter(N=>N.code!=="en")),b},[f,l]),y=b=>{t.includes(b)?r(t.filter(N=>N!==b)):t.length<n&&r([...t,b])},v=b=>{r(t.filter(N=>N!==b))};return s.jsxs("div",{ref:c,className:"space-y-2",children:[s.jsxs(oe,{className:"flex items-center gap-2",children:[s.jsx(Oa,{className:"w-4 h-4 text-primary"}),a]}),o&&s.jsx("p",{className:"text-xs text-muted-foreground",children:o}),t.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:t.map(b=>s.jsxs(ne,{variant:"secondary",className:"flex items-center gap-1 pr-1",children:[Vd(b),s.jsx(K,{variant:"ghost",size:"icon",className:"h-4 w-4 p-0 hover:bg-transparent",onClick:()=>v(b),children:s.jsx(Hr,{className:"w-3 h-3"})})]},b))}),s.jsxs(KE,{open:d,onOpenChange:h,children:[s.jsx(YE,{asChild:!0,children:s.jsxs(K,{variant:"outline",className:"w-full justify-start text-muted-foreground",disabled:t.length>=n,children:[s.jsx(Js,{className:"w-4 h-4 mr-2"}),t.length>=n?`Maximum ${n} languages selected`:i]})}),s.jsxs(Jw,{className:"w-80 p-0",align:"start",children:[s.jsx("div",{className:"p-3 border-b border-border",children:s.jsx(pe,{placeholder:"Search languages...",value:f,onChange:b=>m(b.target.value),className:"h-9",autoFocus:!0})}),s.jsx(Ps,{className:"h-60",children:s.jsxs("div",{className:"p-2 space-y-1",children:[p.map(b=>{const N=t.includes(b.code);return s.jsxs("button",{type:"button",onClick:()=>y(b.code),disabled:!N&&t.length>=n,className:`w-full flex items-center justify-between p-2 rounded-md text-sm transition-colors ${N?"bg-primary/10 text-primary":"hover:bg-muted disabled:opacity-50"}`,children:[s.jsxs("div",{className:"flex flex-col items-start",children:[s.jsx("span",{className:"font-medium",children:b.name}),s.jsx("span",{className:"text-xs text-muted-foreground",children:b.nativeName})]}),N&&s.jsx(tn,{className:"w-4 h-4"})]},b.code)}),p.length===0&&s.jsx("p",{className:"text-center text-sm text-muted-foreground py-4",children:"No languages found"})]})}),s.jsx("div",{className:"p-2 border-t border-border bg-muted/50",children:s.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:[t.length,"/",n," languages selected"]})})]})]})]})});bx.displayName="LanguageSelector";const Lv=20,NI=["4242424242424242","4000056655665556","5555555555554444","5200828282828210","378282246310005","371449635398431","6011111111111117","3056930009020004","3566002020360505","6200000000000005"],Qz=({amount:e,customerEmail:t,customerName:r,bookingDetails:n,onPaymentSuccess:a,onPaymentError:i,onCancel:o})=>{const[l,c]=x.useState(!1),[d,h]=x.useState(""),[f,m]=x.useState(""),[p,y]=x.useState(""),[v,b]=x.useState(r),[N,j]=x.useState(null),[w,S]=x.useState(!1);x.useEffect(()=>{if(So())S(!0);else{const V=localStorage.getItem("stripe_dry_run");S(V!=="true")}},[]);const C=V=>{const U=V.replace(/\D/g,"").slice(0,16),$=U.match(/.{1,4}/g);return $?$.join(" "):U},P=V=>{const U=V.replace(/\D/g,"").slice(0,4);return U.length>=2?U.slice(0,2)+"/"+U.slice(2):U},T=V=>{h(C(V.target.value)),j(null)},O=V=>{m(P(V.target.value)),j(null)},E=V=>{y(V.target.value.replace(/\D/g,"").slice(0,4)),j(null)},D=()=>{const V=d.replace(/\s/g,"");if(V.length<13||V.length>19)return j("Please enter a valid card number"),!1;const[U,$]=f.split("/");if(!U||!$||parseInt(U)<1||parseInt(U)>12)return j("Please enter a valid expiry date (MM/YY)"),!1;const H=new Date().getFullYear()%100,F=new Date().getMonth()+1;return parseInt($)<H||parseInt($)===H&&parseInt(U)<F?(j("Card has expired"),!1):p.length<3?(j("Please enter a valid CVC"),!1):v.trim()?!0:(j("Please enter the cardholder name"),!1)},I=async V=>{if(V.preventDefault(),j(null),e<Lv){j(`Minimum payment amount is $${Lv.toFixed(2)}`);return}if(!D())return;const U=d.replace(/\s/g,"");if(w&&NI.includes(U)){j("Test cards are not accepted in live mode. Please use a real card."),Z.error("Test card rejected",{description:"The payment system is in live mode. Test cards cannot be used."});return}c(!0);try{const{data:$,error:H}=await de.functions.invoke("create-payment-intent",{body:{amount:Math.round(e*100),customerEmail:t,bookingDetails:{...n,clientName:r,bookingUuid:(n==null?void 0:n.bookingUuid)||"",bookingCode:(n==null?void 0:n.bookingId)||"",bookingId:(n==null?void 0:n.bookingId)||""},isLiveMode:w,cardNumber:U}});if(H)throw new Error(H.message||"Failed to create payment");if($.error){if($.error.includes("Configuration Error")||$.error.includes("not configured")){j("System Configuration Error: Payment processing is not available. Please contact support."),Z.error("System Configuration Error",{description:"Payment system keys are not properly configured.",duration:8e3}),i($.error);return}throw new Error($.error)}const F=NI.includes(U);if(!w&&F){console.log(" Test payment simulation successful:",$.paymentIntentId),Z.success("Test payment successful!"),a($.paymentIntentId);return}console.log("Payment intent created:",$.paymentIntentId),Z.success("Payment processed successfully!"),a($.paymentIntentId)}catch($){console.error("Payment error:",$);const H=$.message||"Payment failed. Please try again.";j(H),i(H),Z.error(H)}finally{c(!1)}},A=e>=Lv;return s.jsxs(J,{className:"shadow-card border-primary/20",children:[s.jsxs(ke,{className:"pb-4",children:[s.jsxs(Ee,{className:"flex items-center gap-2 text-lg",children:[s.jsx(ms,{className:"w-5 h-5 text-primary"}),"Payment Details",!w&&s.jsx(ne,{variant:"outline",className:"bg-purple-100 text-purple-700 border-purple-300 ml-2",children:"TEST MODE"}),w&&s.jsx(ne,{variant:"outline",className:"bg-green-100 text-green-700 border-green-300 ml-2",children:"LIVE"})]}),s.jsx(Ge,{children:"Secure payment powered by Stripe"})]}),s.jsx(Q,{children:s.jsxs("form",{onSubmit:I,className:"space-y-4",children:[s.jsxs("div",{className:"p-4 bg-primary/5 border border-primary/20 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Amount to pay"}),s.jsxs("span",{className:"text-2xl font-bold text-primary",children:["$",e.toFixed(2)," CAD"]})]}),!A&&s.jsxs("p",{className:"text-xs text-destructive mt-2 flex items-center gap-1",children:[s.jsx(At,{className:"w-3 h-3"}),"Minimum payment is $",Lv.toFixed(2)]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"cardNumber",children:"Card Number"}),s.jsxs("div",{className:"relative",children:[s.jsx(pe,{id:"cardNumber",placeholder:"4242 4242 4242 4242",value:d,onChange:T,className:"pl-10",disabled:l}),s.jsx(ms,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"expiry",children:"Expiry Date"}),s.jsx(pe,{id:"expiry",placeholder:"MM/YY",value:f,onChange:O,disabled:l})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"cvc",children:"CVC"}),s.jsx(pe,{id:"cvc",placeholder:"123",value:p,onChange:E,type:"password",disabled:l})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"cardholderName",children:"Cardholder Name"}),s.jsx(pe,{id:"cardholderName",placeholder:"Name on card",value:v,onChange:V=>{b(V.target.value),j(null)},disabled:l})]}),N&&s.jsxs("div",{className:"p-3 bg-destructive/10 border border-destructive/30 rounded-lg flex items-start gap-2",children:[s.jsx(At,{className:"w-4 h-4 text-destructive mt-0.5 flex-shrink-0"}),s.jsx("p",{className:"text-sm text-destructive",children:N})]}),!w&&s.jsxs("div",{className:"p-3 bg-purple-50 dark:bg-purple-950/20 border border-purple-200 dark:border-purple-800 rounded-lg text-sm",children:[s.jsx("p",{className:"font-medium text-purple-700 dark:text-purple-300",children:"Test Mode Active"}),s.jsxs("p",{className:"text-purple-600 dark:text-purple-400 text-xs mt-1",children:["Use test card: ",s.jsx("code",{className:"bg-purple-100 dark:bg-purple-900 px-1 rounded",children:"4242 4242 4242 4242"})]})]}),w&&s.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg text-sm",children:[s.jsx("p",{className:"font-medium text-green-700 dark:text-green-300",children:"Live Payment Mode"}),s.jsxs("p",{className:"text-green-600 dark:text-green-400 text-xs mt-1",children:["Your card will be charged $",e.toFixed(2)," CAD. Test cards are not accepted."]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[s.jsx(Jn,{className:"w-3 h-3"}),s.jsx("span",{children:"Your payment information is encrypted and secure"})]}),s.jsxs("div",{className:"flex gap-3 pt-2",children:[o&&s.jsx(K,{type:"button",variant:"outline",className:"flex-1",onClick:o,disabled:l,children:"Back"}),s.jsx(K,{type:"submit",variant:"brand",className:"flex-1",disabled:l||!A,children:l?s.jsxs(s.Fragment,{children:[s.jsx(Ut,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(tn,{className:"w-4 h-4 mr-2"}),"Pay $",e.toFixed(2)]})})]})]})})]})},Td={appId:"xXf0UWVAPdw78va7cNFf",dashboardUrl:"https://progressier.com/dashboard",manifestUrl:"https://progressier.app/xXf0UWVAPdw78va7cNFf/progressier.json",qrCodePath:"/progressier-qr.png"},Kc={email:{provider:"Resend",status:"connected",description:"Backend secret configured"},payments:{provider:"Stripe",status:"connected",description:"Backend secret configured"},pwa:{provider:"Progressier",status:"active",appId:Td.appId,dashboardUrl:Td.dashboardUrl,qrCodePath:Td.qrCodePath}},tme={sm:"w-24 h-24",md:"w-36 h-36",lg:"w-48 h-48"},rme=({size:e="md",className:t="",showLabel:r=!0,label:n="Scan to install app"})=>s.jsxs("div",{className:`flex flex-col items-center gap-2 ${t}`,children:[s.jsx("img",{src:Td.qrCodePath,alt:"Scan to install PSA Direct app",className:`${tme[e]} object-contain`}),r&&s.jsx("p",{className:"text-xs text-muted-foreground text-center",children:n})]}),eU=({onDismiss:e,clientName:t})=>{const r=ps(),[n,a]=x.useState("desktop"),[i,o]=x.useState(!1),[l,c]=x.useState(!1);if(x.useEffect(()=>{const f=navigator.userAgent.toLowerCase();/iphone|ipad|ipod/.test(f)?a("ios"):/android/.test(f)?a("android"):a("desktop");const m=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;o(m)},[]),i||n==="desktop")return null;const d=()=>{c(!0)},h=()=>{r("/install?type=client")};return s.jsx(J,{className:"border-primary/30 bg-gradient-to-br from-primary/5 to-background",children:s.jsx(Q,{className:"pt-6 pb-6",children:l?s.jsxs("div",{className:"space-y-4",children:[n==="ios"&&s.jsxs(s.Fragment,{children:[s.jsxs("h3",{className:"font-semibold text-foreground text-lg flex items-center gap-2",children:[s.jsx("span",{className:"bg-blue-100 text-blue-700 px-2 py-0.5 rounded text-xs font-medium",children:"iOS"}),"Quick Install"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"bg-primary text-primary-foreground w-7 h-7 rounded-full flex items-center justify-center font-bold text-sm shrink-0",children:"1"}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-foreground",children:["Tap the ",s.jsx(Pk,{className:"inline w-4 h-4 text-blue-500"})," Share button"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"At the bottom of Safari"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"bg-primary text-primary-foreground w-7 h-7 rounded-full flex items-center justify-center font-bold text-sm shrink-0",children:"2"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-foreground",children:'Select "Add to Home Screen"'}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Scroll down in the share menu"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"bg-green-600 text-white w-7 h-7 rounded-full flex items-center justify-center shrink-0",children:s.jsx(Kt,{className:"w-4 h-4"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-foreground",children:"Done!"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"PSA DIRECT will appear on your home screen"})]})]})]})]}),n==="android"&&s.jsxs(s.Fragment,{children:[s.jsxs("h3",{className:"font-semibold text-foreground text-lg flex items-center gap-2",children:[s.jsx("span",{className:"bg-green-100 text-green-700 px-2 py-0.5 rounded text-xs font-medium",children:"Android"}),"Quick Install"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"bg-primary text-primary-foreground w-7 h-7 rounded-full flex items-center justify-center font-bold text-sm shrink-0",children:"1"}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-foreground",children:["Tap the ",s.jsx(Nk,{className:"inline w-4 h-4"})," Menu (3 dots)"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Top-right of Chrome"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"bg-primary text-primary-foreground w-7 h-7 rounded-full flex items-center justify-center font-bold text-sm shrink-0",children:"2"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-foreground",children:'Select "Install App"'}),s.jsx("p",{className:"text-xs text-muted-foreground",children:'Or "Add to Home Screen"'})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"bg-green-600 text-white w-7 h-7 rounded-full flex items-center justify-center shrink-0",children:s.jsx(Kt,{className:"w-4 h-4"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-foreground",children:"Done!"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"PSA DIRECT will install automatically"})]})]})]})]}),s.jsxs("div",{className:"flex flex-col gap-2 pt-2 border-t border-border",children:[s.jsx(K,{variant:"outline",onClick:h,className:"w-full text-sm",children:"View Full Instructions"}),s.jsx(K,{variant:"ghost",onClick:e,className:"w-full text-muted-foreground text-sm",children:"Got it"})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center shrink-0",children:s.jsx(Hh,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-foreground text-lg",children:"Stay Connected"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Install our app to receive real-time updates on your care"})]})]})}),s.jsx(rme,{size:"sm",showLabel:!1,className:"shrink-0"})]}),s.jsxs("div",{className:"space-y-2 pl-1",children:[s.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[s.jsx(yk,{className:"w-4 h-4 text-primary shrink-0"}),s.jsx("span",{className:"text-foreground",children:"Ping when caregiver accepts your booking"})]}),s.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[s.jsx(St,{className:"w-4 h-4 text-primary shrink-0"}),s.jsx("span",{className:"text-foreground",children:"Ping when they arrive at your location"})]}),s.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[s.jsx(Qe,{className:"w-4 h-4 text-primary shrink-0"}),s.jsx("span",{className:"text-foreground",children:"Ping when care is complete"})]})]}),s.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[s.jsxs(K,{onClick:d,className:"w-full",children:[s.jsx(Hh,{className:"w-4 h-4 mr-2"}),"Install App"]}),s.jsx(K,{variant:"ghost",onClick:e,className:"w-full text-muted-foreground",children:"Maybe Later"})]})]})})})},_I=[{id:1,title:"Who Is This For?",icon:pn},{id:2,title:"Your Details",icon:$t},{id:3,title:"Address",icon:St},{id:4,title:"Service",icon:Lt},{id:5,title:"Confirm",icon:tn},{id:6,title:"Payment",icon:ms}],nme=e=>{const t=e.toLowerCase();return t.includes("doctor")||t.includes("appointment")?Vh:t.includes("hospital")||t.includes("discharge")?Ld:t.includes("companion")?pn:t.includes("meal")||t.includes("prep")?Lt:t.includes("medication")||t.includes("reminder")?Qe:t.includes("housekeeping")||t.includes("cleaning")?QF:t.includes("mobility")||t.includes("assist")?St:t.includes("respite")?mr:(t.includes("bath")||t.includes("hygiene")||t.includes("personal"),$t)},sme=e=>e.map(t=>({value:t.id,label:t.name,icon:nme(t.name),baseCost:t.baseCost,includedMinutes:t.includedMinutes,isHospitalDoctor:t.isHospitalDoctor})),ame=({onBack:e,existingClient:t})=>{var Tn,we,Te,Ke,xt,pr,dr,Jr,Ae,at,ur,Mr;const r=ps(),n=!!t,{tasks:a,loading:i}=vx(),[o,l]=x.useState(1),[c,d]=x.useState(null),[h,f]=x.useState(null),[m,p]=x.useState(!1),[y,v]=x.useState(null),[b,N]=x.useState(!1),[j,w]=x.useState(!1),[S,C]=x.useState([]),[P,T]=x.useState(!1),[O,E]=x.useState(!1),[D,I]=x.useState(!1),[A,V]=x.useState(null),[U,$]=x.useState([]),[H,F]=x.useState([]),[R,z]=x.useState("no-preference"),[G,ie]=x.useState(1),[ae,X]=x.useState(null),[le,fe]=x.useState(!1),ge=x.useRef(null),ee=x.useMemo(()=>sme(a),[a]),[re,ue]=x.useState({clientFirstName:(t==null?void 0:t.name.split(" ")[0])||"",clientLastName:(t==null?void 0:t.name.split(" ").slice(1).join(" "))||"",clientEmail:(t==null?void 0:t.email)||"",clientPhone:(t==null?void 0:t.phone)||"",createPassword:"",confirmPassword:"",patientName:"",patientRelationship:"",streetAddress:"",unitNumber:"",city:"",province:"ON",postalCode:"",buzzerCode:"",entryPoint:"",pickupAddress:"",pickupPostalCode:"",serviceDate:"",startTime:"",specialNotes:"",doctorOfficeName:"",doctorSuiteNumber:""}),[Ne,je]=x.useState(null),[Y,xe]=x.useState(null),[Me,$e]=x.useState(null),[ce,Le]=x.useState(null),qe=x.useMemo(()=>S.some(se=>{const tt=ee.find(ut=>ut.value===se);return(tt==null?void 0:tt.isHospitalDoctor)||(tt==null?void 0:tt.label.toLowerCase().includes("doctor"))||(tt==null?void 0:tt.label.toLowerCase().includes("hospital"))}),[S,ee]),Xe=x.useMemo(()=>ip(re.specialNotes,"special-instructions","client"),[re.specialNotes]),Et=x.useMemo(()=>ip(re.patientName,"patient-info","client"),[re.patientName]),B=(se,tt)=>{ue(ut=>({...ut,[se]:tt})),(se==="streetAddress"||se==="city"||se==="postalCode")&&(v(null),xe(null)),se==="specialNotes"&&$e(null),se==="patientName"&&Le(null)},ve=se=>{B("specialNotes",se);const tt=ip(se,"special-instructions","client");tt.shouldBlock?$e(tt.message):$e(null)},Fe=se=>{B("patientName",se);const tt=ip(se,"patient-info","client");tt.shouldBlock?Le(tt.message):Le(null)},st=se=>{const tt=Wd(se);B("postalCode",tt),xe(null)},pt=se=>{const tt=Wd(se);B("pickupPostalCode",tt),tt.length===7&&!Ri(tt)?je("Please enter a valid Canadian postal code"):je(null)},et=se=>{var ut;const tt=(ut=se.target.files)==null?void 0:ut[0];tt&&f(tt)},Zt=()=>{const se=[re.streetAddress];return re.unitNumber&&se.push(`Unit ${re.unitNumber}`),re.city&&se.push(re.city),re.province&&se.push(re.province),re.postalCode&&se.push(re.postalCode),se.join(", ")},mt=()=>`${re.clientFirstName} ${re.clientLastName}`.trim(),zn=async()=>{if(!re.streetAddress.trim()||!re.city.trim())return!0;if(!re.postalCode.trim())return xe("Postal code is required"),!1;if(!Ri(re.postalCode))return xe("Please enter a valid Canadian postal code (e.g., K8N 1A1)"),!1;N(!0),v(null),xe(null),Qk();try{const se=await h9(re.postalCode);return se.withinCoverage?(N(!1),!0):(v(se.message),N(!1),!1)}catch{return v("Error validating address. Please try again."),N(!1),!1}},Qt=se=>{switch(se){case 2:return n?!0:c==="someone-else"&&Et.shouldBlock?!1:!!(re.clientFirstName&&re.clientEmail&&re.clientPhone);case 3:return!!(re.streetAddress&&re.city&&re.postalCode&&Ri(re.postalCode));case 4:return Xe.shouldBlock||qe&&(!re.pickupAddress||!re.pickupPostalCode||!Ri(re.pickupPostalCode))?!1:S.length>0&&!!re.serviceDate&&!!re.startTime;default:return!0}},aa=async()=>{o===3&&!await zn()||o<5&&l(se=>se+1)},$r=()=>{o>1&&l(se=>se-1)},xn=se=>{d(se),se==="myself"&&t&&B("patientName",t.name),l(2)},Cr=se=>{C(tt=>tt.includes(se)?tt.filter(ut=>ut!==se):[...tt,se])},gt=()=>{if(S.length===0)return null;const se=u9(S,j,re.city,re.postalCode,re.serviceDate,re.startTime);return{...se,subtotal:se.subtotal*G,total:se.total*G,surgeAmount:se.surgeAmount*G,totalHours:G,totalMinutes:G*60}},Un=()=>{if(!re.startTime)return"";const[se,tt]=re.startTime.split(":").map(Number),ut=se*60+tt+G*60,la=Math.floor(ut/60)%24,Oo=ut%60;return`${la.toString().padStart(2,"0")}:${Oo.toString().padStart(2,"0")}`},ns=()=>{const se=[];return Xe.shouldBlock&&se.push("Please remove contact information from special instructions"),Et.shouldBlock&&se.push("Please remove contact information from patient name field"),n||(re.createPassword?re.createPassword.length<6?se.push("Password must be at least 6 characters"):re.createPassword!==re.confirmPassword&&se.push("Passwords do not match"):se.push("Please create a password to save your information")),m||se.push("Please agree to the cancellation policy"),se.length>0?($(se),se.forEach(tt=>Z.error(tt)),!1):($([]),!0)},Fs=()=>{var se,tt,ut,la;if(ns()){const Oo=n?(se=t==null?void 0:t.email)==null?void 0:se.trim():(tt=re.clientEmail)==null?void 0:tt.trim(),Bc=n?(ut=t==null?void 0:t.name)==null?void 0:ut.trim():(la=mt())==null?void 0:la.trim();if(console.log(" Client email before payment:",Oo),console.log(" Client name before payment:",Bc),console.log(" Is returning client:",n),!Oo){Z.error("Missing email address",{description:"Please go back and enter your email address."}),l(2);return}if(!Bc){Z.error("Missing name",{description:"Please go back and enter your name."}),l(2);return}fe(!0),l(6)}},ia=async se=>{X(se),await oa(se)},La=se=>{Z.error(se)},gi=()=>{fe(!1),l(5)},oa=async se=>{E(!0);let tt=null;if(!n&&re.createPassword)try{const{data:Fa,error:xi}=await de.auth.signUp({email:re.clientEmail,password:re.createPassword,options:{emailRedirectTo:`${window.location.origin}/client`,data:{first_name:re.clientFirstName,last_name:re.clientLastName,full_name:mt(),phone:re.clientPhone}}});if(xi)if(console.error("Account creation error:",xi),xi.message.includes("already registered")){console.log("User already exists, attempting password update via edge function...");try{const{error:Xi}=await de.functions.invoke("update-user-password",{body:{email:re.clientEmail,newPassword:re.createPassword}});Xi?console.error("Password update failed:",Xi):(Z.success("Your password has been updated!"),console.log(" Password updated for existing user:",re.clientEmail))}catch(Xi){console.error("Password update exception:",Xi)}}else Z.error("Account creation failed",{description:xi.message});else if(Fa.user){tt=Fa.user.id,console.log(" Client account created:",Fa.user.email);const{error:Xi}=await de.from("client_profiles").insert({user_id:Fa.user.id,email:re.clientEmail,first_name:re.clientFirstName,full_name:mt(),phone:re.clientPhone,default_address:Zt(),default_postal_code:re.postalCode});Xi&&console.error("Profile creation error:",Xi)}}catch(Fa){console.error("Auth signup exception:",Fa)}const ut=gt(),la=qe,Oo={paymentStatus:se?"paid":"invoice-pending",serviceType:S,date:re.serviceDate,startTime:re.startTime,endTime:Un(),status:"pending",hours:(ut==null?void 0:ut.totalHours)||1,hourlyRate:ut?ut.subtotal/(ut.totalHours||1):35,subtotal:(ut==null?void 0:ut.subtotal)||0,surgeAmount:(ut==null?void 0:ut.surgeAmount)||0,total:(ut==null?void 0:ut.total)||0,isAsap:j,wasRefunded:!1,orderingClient:{name:n?(t==null?void 0:t.name)||"":mt(),address:Zt(),postalCode:re.postalCode,phone:n?(t==null?void 0:t.phone)||"":re.clientPhone,email:n?(t==null?void 0:t.email)||"":re.clientEmail,isNewAccount:!n},patient:c==="myself"?{name:mt(),address:Zt(),postalCode:re.postalCode,relationship:"Self",preferredLanguages:H.length>0?H:void 0,preferredGender:R}:{name:re.patientName,address:Zt(),postalCode:re.postalCode,relationship:re.patientRelationship,preferredLanguages:H.length>0?H:void 0,preferredGender:R},pickupAddress:la?re.pickupAddress:void 0,pickupPostalCode:la?re.pickupPostalCode:void 0,isTransportBooking:la,pswAssigned:null,specialNotes:re.specialNotes,doctorOfficeName:re.doctorOfficeName||void 0,doctorSuiteNumber:re.doctorSuiteNumber||void 0,entryPhoto:h==null?void 0:h.name,buzzerCode:re.buzzerCode||void 0,entryPoint:re.entryPoint||void 0,emailNotifications:{confirmationSent:!0,confirmationSentAt:new Date().toISOString(),reminderSent:!1},adminNotifications:{notified:!0,notifiedAt:new Date().toISOString()}};(async()=>{const Fa=await UE(Oo);console.log(" BOOKING CONFIRMED:",Fa),V(Fa),E(!1),I(!0),Z.success("Booking confirmed! Check your email for details.")})()};return D&&A?s.jsx(J,{className:"shadow-card text-center",children:s.jsxs(Q,{className:"pt-8 pb-8 space-y-6",children:[s.jsx("div",{className:"w-20 h-20 mx-auto rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:s.jsx(tn,{className:"w-10 h-10 text-green-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Booking Confirmed!"}),s.jsxs("p",{className:"text-muted-foreground",children:["Thank you, ",re.clientFirstName,"!"]})]}),s.jsxs("div",{className:"p-4 bg-primary/10 border border-primary/30 rounded-lg",children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Your Booking Code"}),s.jsx("p",{className:"text-2xl font-mono font-bold text-primary",children:A.id}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Save this ID for your records"})]}),s.jsxs("div",{className:"p-4 bg-muted rounded-lg text-left space-y-2",children:[s.jsx("h3",{className:"font-medium text-foreground mb-3",children:"Booking Summary"}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Date"}),s.jsx("span",{className:"font-medium text-foreground",children:A.date})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Time"}),s.jsxs("span",{className:"font-medium text-foreground",children:[A.startTime," - ",A.endTime]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Services"}),s.jsxs("span",{className:"font-medium text-foreground text-right",children:[A.serviceType.length," service(s)"]})]}),s.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-border",children:[s.jsx("span",{className:"text-muted-foreground",children:"Total"}),s.jsxs("span",{className:"font-bold text-primary",children:["$",A.total.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Payment Status"}),s.jsx(ne,{variant:"outline",className:"text-amber-600 border-amber-300 bg-amber-50",children:"Invoice Pending"})]})]}),s.jsxs("div",{className:"p-4 bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-lg text-left",children:[s.jsxs("h4",{className:"font-medium text-amber-800 dark:text-amber-200 mb-2 flex items-center gap-2",children:[s.jsx(Qe,{className:"w-4 h-4"}),"Cancellation Policy"]}),s.jsxs("ul",{className:"text-sm text-amber-700 dark:text-amber-300 space-y-1",children:[s.jsxs("li",{children:[" ",s.jsx("strong",{children:"4+ hours notice:"})," Full refund available"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Less than 4 hours:"})," No refund (non-refundable)"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"ASAP bookings:"})," Always non-refundable"]})]}),s.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-2",children:"To cancel, call our office or contact us through your account."})]}),s.jsxs("div",{className:"p-4 bg-muted rounded-lg text-left",children:[s.jsx("p",{className:"text-foreground font-medium mb-2",children:"What's next?"}),s.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[s.jsxs("li",{children:[" Confirmation email sent to ",re.clientEmail]}),s.jsx("li",{children:" A PSW will be assigned to your booking"}),s.jsx("li",{children:" You'll receive a reminder before your appointment"}),s.jsx("li",{children:" Invoice will be sent after service completion"})]})]}),!n&&s.jsx("div",{className:"p-4 bg-primary/5 border border-primary/20 rounded-lg",children:s.jsxs("p",{className:"text-sm text-foreground",children:[s.jsx("strong",{children:"Account Created!"})," You can now sign in with your email and password for future bookings."]})}),s.jsx(eU,{clientName:re.clientFirstName}),s.jsx(K,{variant:"brand",onClick:()=>{window.history.replaceState(null,"","/client"),r("/client",{replace:!0})},className:"w-full",children:"Go to Dashboard"})]})}):s.jsxs("div",{className:"min-h-full pb-24",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-xl font-semibold text-foreground",children:"Request New Service"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:n?`Welcome back, ${t==null?void 0:t.name.split(" ")[0]}!`:"Book care for yourself or a loved one"})]}),c&&s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between relative",children:[s.jsx("div",{className:"absolute top-5 left-0 right-0 h-0.5 bg-border"}),s.jsx("div",{className:"absolute top-5 left-0 h-0.5 bg-primary transition-all duration-300",style:{width:`${(o-1)/(_I.length-1)*100}%`}}),_I.map(se=>{const tt=se.icon,ut=o>se.id,la=o===se.id;return s.jsx("div",{className:"flex flex-col items-center relative z-10",children:s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 ${ut?"bg-primary text-primary-foreground":la?"bg-primary text-primary-foreground ring-4 ring-primary/20":"bg-card border-2 border-border text-muted-foreground"}`,children:ut?s.jsx(tn,{className:"w-4 h-4"}):s.jsx(tt,{className:"w-3 h-3"})})},se.id)})]})}),o===1&&!c&&s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{className:"pb-4",children:s.jsxs(Ee,{className:"text-lg flex items-center gap-2",children:[s.jsx(pn,{className:"w-5 h-5 text-primary"}),"Who is this service for?"]})}),s.jsxs(Q,{className:"space-y-4",children:[s.jsxs(K,{variant:"outline",className:"w-full h-20 flex flex-col items-center justify-center gap-2 hover:border-primary hover:bg-primary/5",onClick:()=>xn("myself"),children:[s.jsx($t,{className:"w-6 h-6 text-primary"}),s.jsx("span",{className:"font-medium",children:"Myself"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"I need care services"})]}),s.jsxs(K,{variant:"outline",className:"w-full h-20 flex flex-col items-center justify-center gap-2 hover:border-primary hover:bg-primary/5",onClick:()=>xn("someone-else"),children:[s.jsx(pn,{className:"w-6 h-6 text-primary"}),s.jsx("span",{className:"font-medium",children:"Someone Else"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Booking for a family member or friend"})]})]})]}),o===2&&s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{className:"pb-4",children:s.jsxs(Ee,{className:"text-lg flex items-center gap-2",children:[s.jsx($t,{className:"w-5 h-5 text-primary"}),n?"Confirm Your Details":"Your Contact Information"]})}),s.jsxs(Q,{className:"space-y-4",children:[n?s.jsxs("div",{className:"p-4 bg-muted rounded-lg space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Name"}),s.jsx("span",{className:"font-medium text-foreground",children:t==null?void 0:t.name})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Email"}),s.jsx("span",{className:"font-medium text-foreground",children:t==null?void 0:t.email})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Phone"}),s.jsx("span",{className:"font-medium text-foreground",children:t==null?void 0:t.phone})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"clientFirstName",children:"First Name *"}),s.jsx(pe,{id:"clientFirstName",placeholder:"Margaret",value:re.clientFirstName,onChange:se=>B("clientFirstName",se.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"clientLastName",children:"Last Name"}),s.jsx(pe,{id:"clientLastName",placeholder:"Thompson",value:re.clientLastName,onChange:se=>B("clientLastName",se.target.value)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"clientEmail",children:"Email Address *"}),s.jsx(pe,{id:"clientEmail",type:"email",placeholder:"margaret@email.com",value:re.clientEmail,onChange:se=>B("clientEmail",se.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"clientPhone",children:"Phone Number *"}),s.jsx(pe,{id:"clientPhone",type:"tel",placeholder:"(416) 555-1234",value:re.clientPhone,onChange:se=>B("clientPhone",se.target.value)})]})]}),c==="someone-else"&&s.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[s.jsx("h3",{className:"font-medium text-foreground",children:"Patient Information"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"patientName",children:"Patient's Full Name"}),s.jsx(pe,{id:"patientName",placeholder:"Enter patient's full name",value:re.patientName,onChange:se=>Fe(se.target.value),className:ce?"border-destructive":""}),ce&&s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-destructive/10 rounded-lg",children:[s.jsx(At,{className:"w-4 h-4 text-destructive shrink-0"}),s.jsx("span",{className:"text-xs text-destructive",children:ce})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"patientRelationship",children:"Your Relationship to Patient"}),s.jsxs(Xt,{value:re.patientRelationship,onValueChange:se=>B("patientRelationship",se),children:[s.jsx(qt,{children:s.jsx(Jt,{placeholder:"Select relationship"})}),s.jsxs(Gt,{children:[s.jsx(_e,{value:"parent",children:"Parent"}),s.jsx(_e,{value:"spouse",children:"Spouse"}),s.jsx(_e,{value:"child",children:"Son/Daughter"}),s.jsx(_e,{value:"sibling",children:"Sibling"}),s.jsx(_e,{value:"guardian",children:"Legal Guardian"}),s.jsx(_e,{value:"friend",children:"Friend"}),s.jsx(_e,{value:"other",children:"Other"})]})]})]})]}),s.jsxs("div",{className:"pt-4 border-t border-border space-y-4",children:[s.jsxs("h3",{className:"font-medium text-foreground flex items-center gap-2",children:[s.jsx(pn,{className:"w-4 h-4 text-primary"}),"Caregiver Preferences"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"preferredGender",children:"Preferred Gender of Caregiver"}),s.jsxs(Xt,{value:R,onValueChange:se=>z(se),children:[s.jsx(qt,{children:s.jsx(Jt,{placeholder:"Select preference"})}),s.jsxs(Gt,{children:[s.jsx(_e,{value:"no-preference",children:"No Preference"}),s.jsx(_e,{value:"female",children:"Female"}),s.jsx(_e,{value:"male",children:"Male"})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"We'll try to match you with a caregiver of your preferred gender when possible"})]}),s.jsx(bx,{selectedLanguages:H,onLanguagesChange:F,maxLanguages:2,label:"Preferred Language(s)",description:"English is the default. Select up to 2 additional languages if the patient prefers care in another language.",placeholder:"Add preferred language (optional)...",excludeEnglish:!0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"We'll try to match you with a PSW who speaks your preferred language."})]})]})]}),o===3&&s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{className:"pb-4",children:s.jsxs(Ee,{className:"text-lg flex items-center gap-2",children:[s.jsx(St,{className:"w-5 h-5 text-primary"}),"Service Address"]})}),s.jsxs(Q,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"streetAddress",children:"Street Address *"}),s.jsx(pe,{id:"streetAddress",placeholder:"123 Main Street",value:re.streetAddress,onChange:se=>B("streetAddress",se.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"postalCode",children:"Postal Code (e.g., K8N 1A1) *"}),s.jsx(pe,{id:"postalCode",placeholder:"K8N 1A1 or K8N1A1",value:re.postalCode,onChange:se=>st(se.target.value),maxLength:7,className:Y?"border-destructive":""}),Y&&s.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[s.jsx(At,{className:"w-3 h-3"}),Y]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Accepts both formats: A1B 2C3 or A1B2C3"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"unitNumber",children:"Unit / Suite / Apt #"}),s.jsx(pe,{id:"unitNumber",placeholder:"Unit 4B",value:re.unitNumber,onChange:se=>B("unitNumber",se.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"city",children:"City *"}),s.jsx(pe,{id:"city",placeholder:"Belleville",value:re.city,onChange:se=>B("city",se.target.value)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"province",children:"Province"}),s.jsxs(Xt,{value:re.province,onValueChange:se=>B("province",se),children:[s.jsx(qt,{children:s.jsx(Jt,{placeholder:"Select province"})}),s.jsxs(Gt,{children:[s.jsx(_e,{value:"ON",children:"Ontario"}),s.jsx(_e,{value:"QC",children:"Quebec"}),s.jsx(_e,{value:"BC",children:"British Columbia"}),s.jsx(_e,{value:"AB",children:"Alberta"}),s.jsx(_e,{value:"MB",children:"Manitoba"}),s.jsx(_e,{value:"SK",children:"Saskatchewan"}),s.jsx(_e,{value:"NS",children:"Nova Scotia"}),s.jsx(_e,{value:"NB",children:"New Brunswick"}),s.jsx(_e,{value:"NL",children:"Newfoundland"}),s.jsx(_e,{value:"PE",children:"PEI"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"buzzerCode",children:"Buzzer Code"}),s.jsx(pe,{id:"buzzerCode",placeholder:"e.g., #1234",value:re.buzzerCode,onChange:se=>B("buzzerCode",se.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"entryPoint",children:"Entry Point"}),s.jsxs(Xt,{value:re.entryPoint,onValueChange:se=>B("entryPoint",se),children:[s.jsx(qt,{children:s.jsx(Jt,{placeholder:"Select entry"})}),s.jsxs(Gt,{children:[s.jsx(_e,{value:"front-door",children:"Front Door"}),s.jsx(_e,{value:"side-door",children:"Side Door"}),s.jsx(_e,{value:"back-door",children:"Back Door"}),s.jsx(_e,{value:"concierge",children:"Concierge / Lobby"})]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{ref:ge,type:"file",accept:"image/*",onChange:et,className:"hidden"}),s.jsxs(K,{variant:"outline",className:"flex-1",onClick:()=>{var se;return(se=ge.current)==null?void 0:se.click()},children:[s.jsx(qs,{className:"w-4 h-4 mr-2"}),h?h.name:"Upload Entry Photo"]}),h&&s.jsx(K,{variant:"ghost",size:"sm",onClick:()=>f(null),className:"text-destructive",children:"Remove"})]}),y&&s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-destructive/10 border border-destructive/30 rounded-lg",children:[s.jsx(At,{className:"w-4 h-4 text-destructive shrink-0"}),s.jsx("span",{className:"text-sm text-destructive",children:y})]})]})]}),o===4&&s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{className:"pb-4",children:s.jsxs(Ee,{className:"text-lg flex items-center gap-2",children:[s.jsx(Lt,{className:"w-5 h-5 text-primary"}),"Service Details"]})}),s.jsxs(Q,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{children:"Duration (Hours) *"}),s.jsx("div",{className:"grid grid-cols-4 gap-2",children:[1,2,3,4,5,6,7,8].map(se=>s.jsxs("button",{type:"button",onClick:()=>ie(se),className:`p-3 rounded-lg border text-center transition-all ${G===se?"border-primary bg-primary text-primary-foreground font-bold":"border-border hover:border-primary/50"}`,children:[se,"h"]},se))}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Select how many hours of care you need (1-8 hours)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{children:"Select Services"}),i?s.jsxs("div",{className:"flex items-center justify-center p-8",children:[s.jsx(Ut,{className:"w-6 h-6 animate-spin text-muted-foreground"}),s.jsx("span",{className:"ml-2 text-muted-foreground",children:"Loading services..."})]}):s.jsx("div",{className:"grid grid-cols-1 gap-2",children:ee.map(se=>{const tt=se.icon,ut=S.includes(se.value);return s.jsxs("button",{type:"button",onClick:()=>Cr(se.value),className:`flex items-center gap-3 p-3 rounded-lg border transition-all ${ut?"border-primary bg-primary/5 text-primary":"border-border hover:border-primary/50"}`,children:[s.jsx(tt,{className:`w-5 h-5 ${ut?"text-primary":"text-muted-foreground"}`}),s.jsx("span",{className:`flex-1 text-left text-sm ${ut?"font-medium":""}`,children:se.label}),ut&&s.jsx(tn,{className:"w-4 h-4"})]},se.value)})})]}),s.jsx(Rfe,{selectedTaskIds:S,selectedDuration:G}),qe&&s.jsxs("div",{className:"space-y-4 p-4 bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 text-amber-800 dark:text-amber-200",children:[s.jsx(St,{className:"w-5 h-5"}),s.jsx(oe,{className:"font-medium",children:"Pick-up Location (Required for Transport)"})]}),s.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300",children:"Where should the PSW pick up the patient? This is required for security verification."}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"pickupAddress",children:"Pick-up Address *"}),s.jsx(pe,{id:"pickupAddress",placeholder:"Hospital or doctor's office address",value:re.pickupAddress,onChange:se=>B("pickupAddress",se.target.value),className:"bg-white dark:bg-background"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"pickupPostalCode",children:"Pick-up Postal Code *"}),s.jsx(pe,{id:"pickupPostalCode",placeholder:"K8N 1A1",value:re.pickupPostalCode,onChange:se=>pt(se.target.value),maxLength:7,className:`bg-white dark:bg-background ${Ne?"border-destructive":""}`}),Ne&&s.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[s.jsx(At,{className:"w-3 h-3"}),Ne]}),s.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400",children:"PSW must be within 500m of this location to start the shift"})]}),s.jsxs("div",{className:"space-y-3 pt-3 border-t border-amber-200 dark:border-amber-700",children:[s.jsx(oe,{className:"text-amber-800 dark:text-amber-200 font-medium",children:"Doctor's Office Details"}),s.jsx(pe,{placeholder:"Doctor's Office Name",value:re.doctorOfficeName,onChange:se=>B("doctorOfficeName",se.target.value),className:"bg-white dark:bg-background"}),s.jsx(pe,{placeholder:"Suite Number (optional)",value:re.doctorSuiteNumber,onChange:se=>B("doctorSuiteNumber",se.target.value),className:"bg-white dark:bg-background"})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Drop-off address will be the service address entered earlier."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"serviceDate",children:"Date *"}),s.jsx(pe,{id:"serviceDate",type:"date",value:re.serviceDate,onChange:se=>B("serviceDate",se.target.value),min:new Date().toISOString().split("T")[0]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"startTime",children:"Start Time *"}),s.jsx(pe,{id:"startTime",type:"time",value:re.startTime,onChange:se=>B("startTime",se.target.value)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"specialNotes",children:"Special Instructions (Optional)"}),s.jsx(_n,{id:"specialNotes",placeholder:"Any specific needs or preferences...",value:re.specialNotes,onChange:se=>ve(se.target.value),rows:3,className:Me?"border-destructive":""}),Me&&s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-destructive/10 rounded-lg",children:[s.jsx(At,{className:"w-4 h-4 text-destructive shrink-0"}),s.jsx("span",{className:"text-xs text-destructive",children:Me})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"For privacy, use our office line for communication with staff."})]}),gt()&&s.jsxs("div",{className:"p-4 bg-primary/5 rounded-lg space-y-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Duration"}),s.jsxs("span",{className:"font-medium text-foreground",children:[G," hour",G>1?"s":""]})]}),s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsxs("span",{className:"text-muted-foreground",children:["Rate  ",G,"h"]}),s.jsxs("span",{className:"font-medium text-foreground",children:["$",(Tn=gt())==null?void 0:Tn.subtotal.toFixed(2)]})]}),((we=gt())==null?void 0:we.surgeAmount)&&gt().surgeAmount>0&&s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Surge Pricing"}),s.jsxs("span",{className:"font-medium text-amber-600",children:["+$",(Te=gt())==null?void 0:Te.surgeAmount.toFixed(2)]})]})]}),s.jsxs("div",{className:"pt-2 border-t border-border",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-medium text-foreground",children:"Total Estimate"}),s.jsxs("span",{className:"text-xl font-bold text-primary",children:["$",(Ke=gt())==null?void 0:Ke.total.toFixed(2)]})]}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[G," hour",G>1?"s":""," of care"]})]})]})]})]}),o===5&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{className:"pb-4",children:s.jsxs(Ee,{className:"text-lg flex items-center gap-2",children:[s.jsx(tn,{className:"w-5 h-5 text-primary"}),"Confirm Your Booking"]})}),s.jsxs(Q,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-3 p-4 bg-muted rounded-lg",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Patient"}),s.jsx("span",{className:"font-medium text-foreground",children:c==="myself"?mt():re.patientName})]}),s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("span",{className:"text-muted-foreground",children:"Services"}),s.jsx("div",{className:"text-right",children:S.map(se=>{const tt=ee.find(ut=>ut.value===se);return s.jsx("span",{className:"block font-medium text-foreground text-sm",children:tt==null?void 0:tt.label},se)})})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Date"}),s.jsx("span",{className:"font-medium text-foreground",children:re.serviceDate})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Time"}),s.jsxs("span",{className:"font-medium text-foreground",children:[re.startTime," - ",Un()]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Address"}),s.jsx("span",{className:"font-medium text-foreground text-right text-sm max-w-[60%]",children:Zt()})]})]}),gt()&&s.jsxs("div",{className:"p-4 bg-primary/5 border border-primary/20 rounded-lg space-y-3",children:[s.jsxs("h4",{className:"font-medium text-foreground flex items-center gap-2",children:[s.jsx(hs,{className:"w-4 h-4 text-primary"}),"Price Summary"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsxs("span",{className:"text-muted-foreground",children:["Base Rate (",ba().minimumHours," Hour)"]}),s.jsxs("span",{className:"font-medium text-foreground",children:["$",(xt=gt())==null?void 0:xt.subtotal.toFixed(2)]})]}),((pr=gt())==null?void 0:pr.exceedsBaseHour)&&s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Additional Time (if needed)"}),s.jsx("span",{className:"font-medium text-amber-600",children:"Billed at sign-out"})]}),((dr=gt())==null?void 0:dr.surgeAmount)>0&&s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsxs("span",{className:"text-muted-foreground",children:["Surge Pricing (",((ba().surgeMultiplier-1)*100).toFixed(0),"%)"]}),s.jsxs("span",{className:"font-medium text-amber-600",children:["+$",(Jr=gt())==null?void 0:Jr.surgeAmount.toFixed(2)]})]})]}),s.jsxs("div",{className:"pt-3 border-t border-border",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"font-semibold text-foreground",children:["Total",((Ae=gt())==null?void 0:Ae.surgeAmount)>0?" (incl. Surge)":""]}),s.jsxs("span",{className:"text-2xl font-bold text-primary",children:["$",(at=gt())==null?void 0:at.total.toFixed(2)]})]}),((ur=gt())==null?void 0:ur.surgeAmount)>0&&s.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"High demand pricing is currently active"})]})]}),s.jsxs("div",{className:"p-3 bg-primary/5 rounded-lg text-sm",children:[s.jsx("p",{className:"font-medium text-foreground mb-1",children:"Billing & Reports sent to:"}),s.jsx("p",{className:"text-muted-foreground",children:mt()}),s.jsx("p",{className:"text-muted-foreground",children:re.clientEmail})]}),s.jsxs("div",{className:"p-3 bg-muted rounded-lg text-xs text-muted-foreground",children:[s.jsx("p",{className:"font-medium text-foreground mb-1",children:"Billing Policy:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsxs("li",{children:["Bookings are charged based on selected duration (",G," hour",G>1?"s":"",")"]}),s.jsx("li",{children:"Up to 14 minutes over: No extra charge"}),s.jsx("li",{children:"15+ minutes over: Billed in 30-minute blocks"})]})]}),s.jsxs("div",{className:`flex items-start space-x-3 p-3 rounded-lg border ${!m&&U.length>0?"border-destructive bg-destructive/5":"border-transparent"}`,children:[s.jsx(Co,{id:"agreePolicy",checked:m,onCheckedChange:se=>{p(se),se&&$(tt=>tt.filter(ut=>!ut.includes("cancellation policy")))}}),s.jsx(oe,{htmlFor:"agreePolicy",className:`text-sm cursor-pointer ${!m&&U.length>0?"text-destructive":"text-muted-foreground"}`,children:"I agree to the cancellation policy. Cancellations within 4 hours and ASAP bookings are non-refundable."})]}),s.jsx(e9,{}),!m&&U.includes("Please agree to the cancellation policy")&&s.jsxs("p",{className:"text-xs text-destructive flex items-center gap-1",children:[s.jsx(At,{className:"w-3 h-3"}),"You must agree to the cancellation policy to continue"]}),U.length>0&&s.jsxs("div",{className:"p-3 bg-destructive/10 border border-destructive/30 rounded-lg",children:[s.jsxs("p",{className:"text-sm font-medium text-destructive mb-2 flex items-center gap-2",children:[s.jsx(At,{className:"w-4 h-4"}),"Please fix the following:"]}),s.jsx("ul",{className:"text-sm text-destructive space-y-1",children:U.map((se,tt)=>s.jsxs("li",{children:[" ",se]},tt))})]})]})]}),!n&&s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{className:"pb-4",children:s.jsxs(Ee,{className:"text-lg flex items-center gap-2",children:[s.jsx(Jn,{className:"w-5 h-5 text-primary"}),"Create Your Account"]})}),s.jsxs(Q,{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Save your information for easy repeat bookings and access to invoices."}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"createPassword",children:"Create Password *"}),s.jsxs("div",{className:"relative",children:[s.jsx(pe,{id:"createPassword",type:P?"text":"password",placeholder:"At least 6 characters",value:re.createPassword,onChange:se=>B("createPassword",se.target.value),className:"pr-10"}),s.jsx("button",{type:"button",onClick:()=>T(!P),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:P?s.jsx(ai,{className:"w-4 h-4"}):s.jsx(Ms,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"confirmPassword",children:"Confirm Password *"}),s.jsx(pe,{id:"confirmPassword",type:"password",placeholder:"Re-enter your password",value:re.confirmPassword,onChange:se=>B("confirmPassword",se.target.value)})]})]})]})]}),o===6&&le&&s.jsx(Qz,{amount:Math.max(20,((Mr=gt())==null?void 0:Mr.total)||20),customerEmail:n?(t==null?void 0:t.email)||"":re.clientEmail,customerName:n?(t==null?void 0:t.name)||"":mt(),bookingDetails:{serviceDate:re.serviceDate,services:S.join(", ")},onPaymentSuccess:ia,onPaymentError:La,onCancel:gi}),c&&s.jsxs("div",{className:"flex gap-3 mt-6",children:[o>1&&s.jsxs(K,{variant:"outline",className:"flex-1",onClick:$r,children:[s.jsx($n,{className:"w-4 h-4 mr-2"}),"Back"]}),o<5?s.jsxs("div",{className:"flex-1 flex flex-col gap-1",children:[s.jsxs(K,{variant:"brand",className:"w-full",onClick:aa,disabled:b||!Qt(o),children:[b?"Checking...":"Continue",s.jsx(vk,{className:"w-4 h-4 ml-2"})]}),!Qt(o)&&o===3&&s.jsx("p",{className:"text-xs text-destructive text-center",children:re.streetAddress?re.city?re.postalCode?Ri(re.postalCode)?"":"Please enter a valid postal code (e.g., K8N 1A1)":"Please enter a postal code":"Please enter a city":"Please enter a street address"}),!Qt(o)&&o===2&&!n&&s.jsx("p",{className:"text-xs text-destructive text-center",children:re.clientFirstName?re.clientEmail?re.clientPhone?"":"Please enter your phone number":"Please enter your email":"Please enter your first name"}),!Qt(o)&&o===4&&s.jsx("p",{className:"text-xs text-destructive text-center",children:S.length===0?"Please select at least one service":re.serviceDate?re.startTime?"":"Please select a start time":"Please select a date"})]}):o===5?s.jsxs(K,{variant:"brand",className:"flex-1",onClick:Fs,disabled:!m||O,children:[s.jsx(ms,{className:"w-4 h-4 mr-2"}),"Proceed to Payment"]}):null]})]})},wx=()=>{const[e,t]=x.useState(null),[r,n]=x.useState(null),[a,i]=x.useState(null),[o,l]=x.useState(!0);x.useEffect(()=>{const{data:{subscription:f}}=de.auth.onAuthStateChange((m,p)=>{n(p),t((p==null?void 0:p.user)??null),p!=null&&p.user?setTimeout(()=>{c(p.user.id,p.user.email||"")},0):i(null)});return de.auth.getSession().then(({data:{session:m}})=>{n(m),t((m==null?void 0:m.user)??null),m!=null&&m.user&&c(m.user.id,m.user.email||""),l(!1)}),()=>f.unsubscribe()},[]);const c=async(f,m)=>{try{const{data:p,error:y}=await de.from("client_profiles").select("*").eq("user_id",f).single();if(y&&y.code==="PGRST116"){const{data:v,error:b}=await de.from("client_profiles").insert({user_id:f,email:m,first_name:m.split("@")[0]}).select().single();!b&&v&&i(v)}else!y&&p&&i(p)}catch(p){console.error("Error fetching client profile:",p)}};return{user:e,session:r,clientProfile:a,isLoading:o,isAuthenticated:!!r,signOut:async()=>{await de.auth.signOut(),t(null),n(null),i(null)},updateClientProfile:async f=>{if(!e)return null;const{data:m,error:p}=await de.from("client_profiles").update(f).eq("user_id",e.id).select().single();return!p&&m?(i(m),m):null}}},Rr="/assets/logo-BHSjH0Yf.png",ime=()=>{var m;const{isAuthenticated:e,user:t}=wx(),r=ps(),[n,a]=x.useState(!1),[i,o]=x.useState(Ea);x.useEffect(()=>{Kf().then(o)},[]);const l=e&&t?{name:((m=t.email)==null?void 0:m.split("@")[0])||"",email:t.email||"",phone:""}:null,c=()=>{e&&r("/client")},d=()=>{r(e?"/client":"/client-login")},h=()=>{const p=document.getElementById("about-us");p&&p.scrollIntoView({behavior:"smooth"}),a(!1)},f=()=>{window.scrollTo({top:0,behavior:"smooth"}),a(!1)};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-background/95 backdrop-blur-sm border-b border-border",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"flex items-center justify-between h-32",children:[s.jsx(dn,{to:"/",className:"flex-shrink-0",children:s.jsx("img",{src:Rr,alt:"PSA Direct Logo",className:"h-28 w-auto"})}),s.jsxs("nav",{className:"hidden md:flex items-center justify-center flex-1 gap-16 px-8",children:[s.jsx("button",{onClick:f,className:"text-lg text-foreground font-medium hover:text-primary transition-colors whitespace-nowrap",children:"Book Now"}),s.jsx("button",{onClick:h,className:"text-lg text-muted-foreground hover:text-foreground transition-colors whitespace-nowrap",children:"About Us"}),s.jsx(dn,{to:"/join-team",className:"text-lg text-muted-foreground hover:text-foreground transition-colors whitespace-nowrap",children:"Join Our Team"}),e&&(t==null?void 0:t.email)==="tiffarshi@gmail.com"&&s.jsx(dn,{to:"/admin",className:"text-lg text-muted-foreground hover:text-foreground transition-colors whitespace-nowrap",children:"Dashboard"}),s.jsx(dn,{to:"/psw-login",className:"text-lg text-muted-foreground hover:text-foreground transition-colors whitespace-nowrap",children:"PSA Login"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(K,{variant:"outline",size:"lg",onClick:d,className:"gap-3 hidden sm:flex text-lg px-6 py-6 flex-col h-auto bg-[hsl(220,30%,95%)] text-[hsl(220,60%,25%)] border-[hsl(220,40%,85%)] hover:bg-[hsl(220,30%,90%)]",children:[s.jsx("img",{src:Rr,alt:"PSA Direct",className:"h-10 w-auto"}),s.jsx("div",{className:"flex items-center gap-2 font-semibold",children:e?"My Care":"Client Portal"}),s.jsx("span",{className:"text-sm text-[hsl(220,40%,40%)]",children:"Client Login"})]}),s.jsx(K,{variant:"ghost",size:"icon",className:"md:hidden h-14 w-14",onClick:()=>a(!n),children:n?s.jsx(Hr,{className:"w-8 h-8"}):s.jsx(xee,{className:"w-8 h-8"})})]})]}),n&&s.jsx("div",{className:"md:hidden py-4 border-t border-border animate-fade-in",children:s.jsxs("nav",{className:"flex flex-col gap-4",children:[s.jsx("button",{onClick:f,className:"text-left text-foreground font-medium py-2",children:"Book Now"}),s.jsx("button",{onClick:h,className:"text-left text-muted-foreground py-2",children:"About Us"}),s.jsx(dn,{to:"/join-team",className:"text-muted-foreground py-2",onClick:()=>a(!1),children:"Join Our Team"}),e&&(t==null?void 0:t.email)==="tiffarshi@gmail.com"&&s.jsx(dn,{to:"/admin",className:"text-muted-foreground py-2",onClick:()=>a(!1),children:"Dashboard"}),s.jsx(dn,{to:"/psw-login",className:"text-muted-foreground py-2",onClick:()=>a(!1),children:"PSA Login"}),s.jsxs(K,{variant:"outline",onClick:()=>{d(),a(!1)},className:"gap-2 w-full justify-center",children:[s.jsx(tee,{className:"w-4 h-4"}),e?"My Care":"Client Portal"]})]})})]})}),s.jsxs("main",{className:"px-4 py-8 pb-4 max-w-lg mx-auto",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Book Quality Care Today"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Trusted Personal Support Assistants ready to help"})]}),s.jsx(ame,{onBack:c,existingClient:l})]}),s.jsx("div",{className:"flex justify-center -mt-2 pb-12 bg-background",children:s.jsx("div",{className:"p-8 rounded-2xl bg-[hsl(220,30%,95%)] border border-[hsl(220,40%,85%)]",children:s.jsx("img",{src:Rr,alt:"PSA Direct Logo",className:"h-56 w-auto"})})}),s.jsx("section",{id:"about-us",className:"bg-muted/50 py-16 px-4",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"About PSA Direct"}),s.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"We began with a simple mission: to provide premium, safe, and compassionate care that keeps our loved ones where they belongat home."})]}),s.jsxs("div",{className:"bg-card rounded-2xl p-8 shadow-card mb-8",children:[s.jsxs("h3",{className:"text-xl font-semibold text-foreground mb-4 flex items-center gap-2",children:[s.jsx(_k,{className:"w-6 h-6 text-primary"}),"Our Mission"]}),s.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Based in Toronto, we are redefining home care by combining top-tier professional vetting with easy-to-use technology. As we expand across Ontario, our commitment remains the same: high-quality care, total transparency, and peace of mind for every family. Whether you need companionship, personal care, or assistance with medical appointments, we're here to help."})]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-card rounded-xl p-6 shadow-card",children:[s.jsx("div",{className:"w-12 h-12 rounded-lg bg-primary/10 flex items-center justify-center mb-4",children:s.jsx(mr,{className:"w-6 h-6 text-primary"})}),s.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Verified & Certified"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"All our PSAs undergo thorough background checks, credential verification, and are registered with HSCPOA."})]}),s.jsxs("div",{className:"bg-card rounded-xl p-6 shadow-card",children:[s.jsx("div",{className:"w-12 h-12 rounded-lg bg-primary/10 flex items-center justify-center mb-4",children:s.jsx(Qe,{className:"w-6 h-6 text-primary"})}),s.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"24/7 Care Coordination"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Our team is available around the clock to match you with the right caregiver and handle any scheduling needs."})]}),s.jsxs("div",{className:"bg-card rounded-xl p-6 shadow-card",children:[s.jsx("div",{className:"w-12 h-12 rounded-lg bg-primary/10 flex items-center justify-center mb-4",children:s.jsx(pn,{className:"w-6 h-6 text-primary"})}),s.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Personalized Matching"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"We match caregivers based on language preferences, experience, and specific care requirements."})]})]}),s.jsx("div",{className:"mt-8 p-6 bg-card rounded-xl shadow-card text-center",children:s.jsxs("p",{className:"text-muted-foreground",children:[s.jsx("strong",{className:"text-foreground",children:"Proudly serving Toronto & the GTA,"})," ","with expansion underway across Ontario."]})})]})}),s.jsx("footer",{className:"bg-secondary text-secondary-foreground py-8 px-4",children:s.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[s.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[s.jsx("img",{src:Rr,alt:"PSA Direct Logo",className:"h-8 w-auto"}),s.jsx("span",{className:"font-semibold",children:"PSA Direct"})]}),s.jsx("p",{className:"text-sm opacity-80 mb-2",children:"Proudly serving Toronto & the GTA, with expansion underway across Ontario."}),s.jsx("p",{className:"text-sm opacity-80 mb-4",children:"Quality personal support care for Ontario families"}),s.jsx("p",{className:"text-xs opacity-60 mb-4",children:" 2026 PSA Direct. All Rights Reserved. | PHIPA Compliant"}),s.jsx("p",{className:"text-xs opacity-50",children:s.jsx(dn,{to:"/psw-login",className:"hover:opacity-80 hover:underline",children:"Caregiver Login"})})]})})]})},ome=()=>{const e=ps(),{login:t}=na(),[r,n]=x.useState(""),[a,i]=x.useState(""),[o,l]=x.useState(""),[c,d]=x.useState(""),[h,f]=x.useState(!1),[m,p]=x.useState(!1),[y,v]=x.useState(!1),[b,N]=x.useState(null),[j,w]=x.useState("login"),[S,C]=x.useState(!1);x.useEffect(()=>{(async()=>{const I=window.location.hash;I&&I.includes("type=recovery")&&w("reset-password")})();const{data:{subscription:D}}=de.auth.onAuthStateChange(I=>{I==="PASSWORD_RECOVERY"&&w("reset-password")});return()=>{D.unsubscribe()}},[]);const P=async E=>{E.preventDefault(),N(null),v(!0);try{const D=r.toLowerCase().trim(),{data:I,error:A}=await de.auth.signInWithPassword({email:D,password:a});if(A){console.warn(" FAILED LOGIN ATTEMPT:",{email:D,timestamp:new Date().toISOString(),error:A.message}),N("Invalid credentials."),v(!1);return}if(!I.user){N("Authentication failed."),v(!1);return}if(D==="tiffarshi@gmail.com".toLowerCase())console.log(" MASTER ADMIN BYPASS ACTIVE:",{email:D,userId:I.user.id,timestamp:new Date().toISOString()});else{const{data:$,error:H}=await de.from("user_roles").select("role").eq("user_id",I.user.id).eq("role","admin").single();if(H||!$){await de.auth.signOut(),console.warn(" UNAUTHORIZED ADMIN ACCESS ATTEMPT:",{email:D,userId:I.user.id,timestamp:new Date().toISOString()}),N("Access denied. You do not have admin privileges."),v(!1);return}}console.log(" ADMIN LOGIN:",{email:D,userId:I.user.id,timestamp:new Date().toISOString()}),t("admin",D),Z.success("Welcome to the Admin Portal"),e("/admin")}catch(D){console.error("Login error:",D),N("An unexpected error occurred.")}finally{v(!1)}},T=async E=>{E.preventDefault(),N(null),v(!0);try{const D=r.toLowerCase().trim();if(!D){N("Please enter your email address."),v(!1);return}const{data:I,error:A}=await de.functions.invoke("reset-password",{body:{email:D,redirectTo:`${window.location.origin}/office-login`}});if(A){console.error("Password reset error:",A),N("Failed to send reset email. Please try again."),v(!1);return}C(!0),Z.success("Password reset email sent!")}catch(D){console.error("Forgot password error:",D),N("An unexpected error occurred.")}finally{v(!1)}},O=async E=>{if(E.preventDefault(),N(null),o.length<8){N("Password must be at least 8 characters.");return}if(o!==c){N("Passwords do not match.");return}v(!0);try{const{error:D}=await de.auth.updateUser({password:o});if(D){console.error("Password update error:",D),N("Failed to update password. Please try again."),v(!1);return}await de.auth.signOut(),Z.success("Password updated successfully! Please log in."),w("login"),l(""),d(""),window.history.replaceState(null,"",window.location.pathname)}catch(D){console.error("Reset password error:",D),N("An unexpected error occurred.")}finally{v(!1)}};return j==="forgot-password"?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md space-y-6",children:[s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[s.jsx("img",{src:Rr,alt:"PSW Direct Logo",className:"h-12 w-auto"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-foreground",children:"PSW DIRECT"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Office Portal"})]})]})}),s.jsxs(J,{className:"shadow-card",children:[s.jsxs(ke,{className:"text-center pb-4",children:[s.jsx("div",{className:"w-14 h-14 mx-auto rounded-full bg-primary/10 flex items-center justify-center mb-4",children:s.jsx(f0,{className:"w-7 h-7 text-primary"})}),s.jsx(Ee,{className:"text-xl",children:"Reset Password"}),s.jsx(Ge,{children:"Enter your email to receive a password reset link"})]}),s.jsx(Q,{children:S?s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"w-14 h-14 mx-auto rounded-full bg-green-100 flex items-center justify-center",children:s.jsx(mr,{className:"w-7 h-7 text-green-600"})}),s.jsx("p",{className:"text-muted-foreground",children:"Check your email for a password reset link."}),s.jsxs(K,{variant:"outline",onClick:()=>{w("login"),C(!1)},children:[s.jsx($n,{className:"w-4 h-4 mr-2"}),"Back to Login"]})]}):s.jsxs("form",{onSubmit:T,className:"space-y-4",children:[b&&s.jsxs("div",{className:"flex items-start gap-2 p-3 bg-destructive/10 border border-destructive/20 rounded-lg",children:[s.jsx(At,{className:"w-5 h-5 text-destructive shrink-0 mt-0.5"}),s.jsx("p",{className:"text-sm text-destructive",children:b})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"reset-email",children:"Email Address"}),s.jsx(pe,{id:"reset-email",type:"email",value:r,onChange:E=>n(E.target.value),placeholder:"admin@pswdirect.ca",required:!0,autoComplete:"email"})]}),s.jsx(K,{type:"submit",variant:"brand",className:"w-full",disabled:y,children:y?s.jsx(Ut,{className:"w-5 h-5 animate-spin"}):"Send Reset Link"}),s.jsxs(K,{type:"button",variant:"ghost",className:"w-full",onClick:()=>w("login"),children:[s.jsx($n,{className:"w-4 h-4 mr-2"}),"Back to Login"]})]})})]})]})}):j==="reset-password"?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md space-y-6",children:[s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[s.jsx("img",{src:Rr,alt:"PSW Direct Logo",className:"h-12 w-auto"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-foreground",children:"PSW DIRECT"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Office Portal"})]})]})}),s.jsxs(J,{className:"shadow-card",children:[s.jsxs(ke,{className:"text-center pb-4",children:[s.jsx("div",{className:"w-14 h-14 mx-auto rounded-full bg-primary/10 flex items-center justify-center mb-4",children:s.jsx(Jn,{className:"w-7 h-7 text-primary"})}),s.jsx(Ee,{className:"text-xl",children:"Set New Password"}),s.jsx(Ge,{children:"Enter your new password below"})]}),s.jsx(Q,{children:s.jsxs("form",{onSubmit:O,className:"space-y-4",children:[b&&s.jsxs("div",{className:"flex items-start gap-2 p-3 bg-destructive/10 border border-destructive/20 rounded-lg",children:[s.jsx(At,{className:"w-5 h-5 text-destructive shrink-0 mt-0.5"}),s.jsx("p",{className:"text-sm text-destructive",children:b})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"new-password",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(pe,{id:"new-password",type:m?"text":"password",value:o,onChange:E=>l(E.target.value),placeholder:"At least 8 characters",required:!0,minLength:8,autoComplete:"new-password",className:"pr-10"}),s.jsx("button",{type:"button",onClick:()=>p(!m),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:m?s.jsx(ai,{className:"w-4 h-4"}):s.jsx(Ms,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"confirm-new-password",children:"Confirm Password"}),s.jsx(pe,{id:"confirm-new-password",type:"password",value:c,onChange:E=>d(E.target.value),placeholder:"Confirm your password",required:!0,minLength:8,autoComplete:"new-password"})]}),s.jsx(K,{type:"submit",variant:"brand",className:"w-full",disabled:y,children:y?s.jsx(Ut,{className:"w-5 h-5 animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(Jn,{className:"w-4 h-4 mr-2"}),"Update Password"]})})]})})]})]})}):s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md space-y-6",children:[s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[s.jsx("img",{src:Rr,alt:"PSW Direct Logo",className:"h-12 w-auto"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-foreground",children:"PSW DIRECT"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Office Portal"})]})]})}),s.jsxs(J,{className:"shadow-card",children:[s.jsxs(ke,{className:"text-center pb-4",children:[s.jsx("div",{className:"w-14 h-14 mx-auto rounded-full bg-primary/10 flex items-center justify-center mb-4",children:s.jsx(mr,{className:"w-7 h-7 text-primary"})}),s.jsx(Ee,{className:"text-xl",children:"Admin Access"}),s.jsx(Ge,{children:"This portal is restricted to authorized personnel only"})]}),s.jsxs(Q,{children:[s.jsxs("form",{onSubmit:P,className:"space-y-4",children:[b&&s.jsxs("div",{className:"flex items-start gap-2 p-3 bg-destructive/10 border border-destructive/20 rounded-lg",children:[s.jsx(At,{className:"w-5 h-5 text-destructive shrink-0 mt-0.5"}),s.jsx("p",{className:"text-sm text-destructive",children:b})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"email",children:"Email Address"}),s.jsx(pe,{id:"email",type:"email",value:r,onChange:E=>n(E.target.value),placeholder:"admin@pswdirect.ca",required:!0,autoComplete:"email"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"password",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(pe,{id:"password",type:h?"text":"password",value:a,onChange:E=>i(E.target.value),placeholder:"Enter your password",required:!0,autoComplete:"current-password",className:"pr-10"}),s.jsx("button",{type:"button",onClick:()=>f(!h),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:h?s.jsx(ai,{className:"w-4 h-4"}):s.jsx(Ms,{className:"w-4 h-4"})})]})]}),s.jsx(K,{type:"submit",variant:"brand",className:"w-full",disabled:y,children:y?s.jsx(Ut,{className:"w-5 h-5 animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(Jn,{className:"w-4 h-4 mr-2"}),"Secure Login"]})}),s.jsx("div",{className:"text-center",children:s.jsx("button",{type:"button",onClick:()=>w("forgot-password"),className:"text-sm text-muted-foreground hover:text-primary transition-colors",children:"Forgot your password?"})})]}),s.jsx("div",{className:"mt-6 p-3 bg-muted rounded-lg",children:s.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"All access attempts are logged and monitored. Unauthorized access is prohibited and may be prosecuted."})})]})]}),s.jsx("div",{className:"text-center",children:s.jsx(K,{variant:"ghost",size:"sm",onClick:()=>e("/"),children:" Return to main site"})})]})})};var G_="rovingFocusGroup.onEntryFocus",lme={bubbles:!1,cancelable:!0},jx="RovingFocusGroup",[kC,tU,cme]=Rf(jx),[dme,Xf]=sn(jx,[cme]),[ume,hme]=dme(jx),rU=x.forwardRef((e,t)=>s.jsx(kC.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(kC.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(fme,{...e,ref:t})})}));rU.displayName=jx;var fme=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...f}=e,m=x.useRef(null),p=nt(t,m),y=Tc(i),[v,b]=Ln({prop:o,defaultProp:l??null,onChange:c,caller:jx}),[N,j]=x.useState(!1),w=Zr(d),S=tU(r),C=x.useRef(!1),[P,T]=x.useState(0);return x.useEffect(()=>{const O=m.current;if(O)return O.addEventListener(G_,w),()=>O.removeEventListener(G_,w)},[w]),s.jsx(ume,{scope:r,orientation:n,dir:y,loop:a,currentTabStopId:v,onItemFocus:x.useCallback(O=>b(O),[b]),onItemShiftTab:x.useCallback(()=>j(!0),[]),onFocusableItemAdd:x.useCallback(()=>T(O=>O+1),[]),onFocusableItemRemove:x.useCallback(()=>T(O=>O-1),[]),children:s.jsx(ze.div,{tabIndex:N||P===0?-1:0,"data-orientation":n,...f,ref:p,style:{outline:"none",...e.style},onMouseDown:Ie(e.onMouseDown,()=>{C.current=!0}),onFocus:Ie(e.onFocus,O=>{const E=!C.current;if(O.target===O.currentTarget&&E&&!N){const D=new CustomEvent(G_,lme);if(O.currentTarget.dispatchEvent(D),!D.defaultPrevented){const I=S().filter(H=>H.focusable),A=I.find(H=>H.active),V=I.find(H=>H.id===v),$=[A,V,...I].filter(Boolean).map(H=>H.ref.current);aU($,h)}}C.current=!1}),onBlur:Ie(e.onBlur,()=>j(!1))})})}),nU="RovingFocusGroupItem",sU=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=Qs(),d=i||c,h=hme(nU,r),f=h.currentTabStopId===d,m=tU(r),{onFocusableItemAdd:p,onFocusableItemRemove:y,currentTabStopId:v}=h;return x.useEffect(()=>{if(n)return p(),()=>y()},[n,p,y]),s.jsx(kC.ItemSlot,{scope:r,id:d,focusable:n,active:a,children:s.jsx(ze.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...l,ref:t,onMouseDown:Ie(e.onMouseDown,b=>{n?h.onItemFocus(d):b.preventDefault()}),onFocus:Ie(e.onFocus,()=>h.onItemFocus(d)),onKeyDown:Ie(e.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){h.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const N=gme(b,h.orientation,h.dir);if(N!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let w=m().filter(S=>S.focusable).map(S=>S.ref.current);if(N==="last")w.reverse();else if(N==="prev"||N==="next"){N==="prev"&&w.reverse();const S=w.indexOf(b.currentTarget);w=h.loop?xme(w,S+1):w.slice(S+1)}setTimeout(()=>aU(w))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:v!=null}):o})})});sU.displayName=nU;var mme={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function pme(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function gme(e,t,r){const n=pme(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return mme[n]}function aU(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function xme(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var ZE=rU,XE=sU,Qw="Tabs",[vme,jze]=sn(Qw,[Xf]),iU=Xf(),[yme,JE]=vme(Qw),oU=x.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,h=Tc(l),[f,m]=Ln({prop:n,onChange:a,defaultProp:i??"",caller:Qw});return s.jsx(yme,{scope:r,baseId:Qs(),value:f,onValueChange:m,orientation:o,dir:h,activationMode:c,children:s.jsx(ze.div,{dir:h,"data-orientation":o,...d,ref:t})})});oU.displayName=Qw;var lU="TabsList",cU=x.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,i=JE(lU,r),o=iU(r);return s.jsx(ZE,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:s.jsx(ze.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});cU.displayName=lU;var dU="TabsTrigger",uU=x.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=e,o=JE(dU,r),l=iU(r),c=mU(o.baseId,n),d=pU(o.baseId,n),h=n===o.value;return s.jsx(XE,{asChild:!0,...l,focusable:!a,active:h,children:s.jsx(ze.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:Ie(e.onMouseDown,f=>{!a&&f.button===0&&f.ctrlKey===!1?o.onValueChange(n):f.preventDefault()}),onKeyDown:Ie(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(n)}),onFocus:Ie(e.onFocus,()=>{const f=o.activationMode!=="manual";!h&&!a&&f&&o.onValueChange(n)})})})});uU.displayName=dU;var hU="TabsContent",fU=x.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...o}=e,l=JE(hU,r),c=mU(l.baseId,n),d=pU(l.baseId,n),h=n===l.value,f=x.useRef(h);return x.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),s.jsx(kn,{present:a||h,children:({present:m})=>s.jsx(ze.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:m&&i})})});fU.displayName=hU;function mU(e,t){return`${e}-trigger-${t}`}function pU(e,t){return`${e}-content-${t}`}var bme=oU,gU=cU,xU=uU,vU=fU;const qi=bme,ii=x.forwardRef(({className:e,...t},r)=>s.jsx(gU,{ref:r,className:Re("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));ii.displayName=gU.displayName;const ft=x.forwardRef(({className:e,...t},r)=>s.jsx(xU,{ref:r,className:Re("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));ft.displayName=xU.displayName;const Ct=x.forwardRef(({className:e,...t},r)=>s.jsx(vU,{ref:r,className:Re("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Ct.displayName=vU.displayName;var EC=["Enter"," "],wme=["ArrowDown","PageUp","Home"],yU=["ArrowUp","PageDown","End"],jme=[...wme,...yU],Nme={ltr:[...EC,"ArrowRight"],rtl:[...EC,"ArrowLeft"]},_me={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Nx="Menu",[mg,Sme,Cme]=Rf(Nx),[lu,bU]=sn(Nx,[Cme,kc,Xf]),ej=kc(),wU=Xf(),[Pme,cu]=lu(Nx),[kme,_x]=lu(Nx),jU=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:a,onOpenChange:i,modal:o=!0}=e,l=ej(t),[c,d]=x.useState(null),h=x.useRef(!1),f=Zr(i),m=Tc(a);return x.useEffect(()=>{const p=()=>{h.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>h.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),s.jsx(bw,{...l,children:s.jsx(Pme,{scope:t,open:r,onOpenChange:f,content:c,onContentChange:d,children:s.jsx(kme,{scope:t,onClose:x.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:h,dir:m,modal:o,children:n})})})};jU.displayName=Nx;var Eme="MenuAnchor",QE=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=ej(r);return s.jsx(ux,{...a,...n,ref:t})});QE.displayName=Eme;var eT="MenuPortal",[Tme,NU]=lu(eT,{forceMount:void 0}),_U=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:a}=e,i=cu(eT,t);return s.jsx(Tme,{scope:t,forceMount:r,children:s.jsx(kn,{present:r||i.open,children:s.jsx(Df,{asChild:!0,container:a,children:n})})})};_U.displayName=eT;var ei="MenuContent",[Ame,tT]=lu(ei),SU=x.forwardRef((e,t)=>{const r=NU(ei,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=cu(ei,e.__scopeMenu),o=_x(ei,e.__scopeMenu);return s.jsx(mg.Provider,{scope:e.__scopeMenu,children:s.jsx(kn,{present:n||i.open,children:s.jsx(mg.Slot,{scope:e.__scopeMenu,children:o.modal?s.jsx(Ome,{...a,ref:t}):s.jsx(Mme,{...a,ref:t})})})})}),Ome=x.forwardRef((e,t)=>{const r=cu(ei,e.__scopeMenu),n=x.useRef(null),a=nt(t,n);return x.useEffect(()=>{const i=n.current;if(i)return Mw(i)},[]),s.jsx(rT,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Ie(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),Mme=x.forwardRef((e,t)=>{const r=cu(ei,e.__scopeMenu);return s.jsx(rT,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),Ime=vc("MenuContent.ScrollLock"),rT=x.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:m,onDismiss:p,disableOutsideScroll:y,...v}=e,b=cu(ei,r),N=_x(ei,r),j=ej(r),w=wU(r),S=Sme(r),[C,P]=x.useState(null),T=x.useRef(null),O=nt(t,T,b.onContentChange),E=x.useRef(0),D=x.useRef(""),I=x.useRef(0),A=x.useRef(null),V=x.useRef("right"),U=x.useRef(0),$=y?mx:x.Fragment,H=y?{as:Ime,allowPinchZoom:!0}:void 0,F=z=>{var ee,re;const G=D.current+z,ie=S().filter(ue=>!ue.disabled),ae=document.activeElement,X=(ee=ie.find(ue=>ue.ref.current===ae))==null?void 0:ee.textValue,le=ie.map(ue=>ue.textValue),fe=qme(le,G,X),ge=(re=ie.find(ue=>ue.textValue===fe))==null?void 0:re.ref.current;(function ue(Ne){D.current=Ne,window.clearTimeout(E.current),Ne!==""&&(E.current=window.setTimeout(()=>ue(""),1e3))})(G),ge&&setTimeout(()=>ge.focus())};x.useEffect(()=>()=>window.clearTimeout(E.current),[]),Aw();const R=x.useCallback(z=>{var ie,ae;return V.current===((ie=A.current)==null?void 0:ie.side)&&Kme(z,(ae=A.current)==null?void 0:ae.area)},[]);return s.jsx(Ame,{scope:r,searchRef:D,onItemEnter:x.useCallback(z=>{R(z)&&z.preventDefault()},[R]),onItemLeave:x.useCallback(z=>{var G;R(z)||((G=T.current)==null||G.focus(),P(null))},[R]),onTriggerLeave:x.useCallback(z=>{R(z)&&z.preventDefault()},[R]),pointerGraceTimerRef:I,onPointerGraceIntentChange:x.useCallback(z=>{A.current=z},[]),children:s.jsx($,{...H,children:s.jsx(fx,{asChild:!0,trapped:a,onMountAutoFocus:Ie(i,z=>{var G;z.preventDefault(),(G=T.current)==null||G.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(ru,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:m,onDismiss:p,children:s.jsx(ZE,{asChild:!0,...w,dir:N.dir,orientation:"vertical",loop:n,currentTabStopId:C,onCurrentTabStopIdChange:P,onEntryFocus:Ie(c,z=>{N.isUsingKeyboardRef.current||z.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(ww,{role:"menu","aria-orientation":"vertical","data-state":zU(b.open),"data-radix-menu-content":"",dir:N.dir,...j,...v,ref:O,style:{outline:"none",...v.style},onKeyDown:Ie(v.onKeyDown,z=>{const ie=z.target.closest("[data-radix-menu-content]")===z.currentTarget,ae=z.ctrlKey||z.altKey||z.metaKey,X=z.key.length===1;ie&&(z.key==="Tab"&&z.preventDefault(),!ae&&X&&F(z.key));const le=T.current;if(z.target!==le||!jme.includes(z.key))return;z.preventDefault();const ge=S().filter(ee=>!ee.disabled).map(ee=>ee.ref.current);yU.includes(z.key)&&ge.reverse(),Hme(ge)}),onBlur:Ie(e.onBlur,z=>{z.currentTarget.contains(z.target)||(window.clearTimeout(E.current),D.current="")}),onPointerMove:Ie(e.onPointerMove,pg(z=>{const G=z.target,ie=U.current!==z.clientX;if(z.currentTarget.contains(G)&&ie){const ae=z.clientX>U.current?"right":"left";V.current=ae,U.current=z.clientX}}))})})})})})})});SU.displayName=ei;var Rme="MenuGroup",nT=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(ze.div,{role:"group",...n,ref:t})});nT.displayName=Rme;var Dme="MenuLabel",CU=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(ze.div,{...n,ref:t})});CU.displayName=Dme;var W0="MenuItem",SI="menu.itemSelect",tj=x.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...a}=e,i=x.useRef(null),o=_x(W0,e.__scopeMenu),l=tT(W0,e.__scopeMenu),c=nt(t,i),d=x.useRef(!1),h=()=>{const f=i.current;if(!r&&f){const m=new CustomEvent(SI,{bubbles:!0,cancelable:!0});f.addEventListener(SI,p=>n==null?void 0:n(p),{once:!0}),mk(f,m),m.defaultPrevented?d.current=!1:o.onClose()}};return s.jsx(PU,{...a,ref:c,disabled:r,onClick:Ie(e.onClick,h),onPointerDown:f=>{var m;(m=e.onPointerDown)==null||m.call(e,f),d.current=!0},onPointerUp:Ie(e.onPointerUp,f=>{var m;d.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:Ie(e.onKeyDown,f=>{const m=l.searchRef.current!=="";r||m&&f.key===" "||EC.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});tj.displayName=W0;var PU=x.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:a,...i}=e,o=tT(W0,r),l=wU(r),c=x.useRef(null),d=nt(t,c),[h,f]=x.useState(!1),[m,p]=x.useState("");return x.useEffect(()=>{const y=c.current;y&&p((y.textContent??"").trim())},[i.children]),s.jsx(mg.ItemSlot,{scope:r,disabled:n,textValue:a??m,children:s.jsx(XE,{asChild:!0,...l,focusable:!n,children:s.jsx(ze.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:d,onPointerMove:Ie(e.onPointerMove,pg(y=>{n?o.onItemLeave(y):(o.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ie(e.onPointerLeave,pg(y=>o.onItemLeave(y))),onFocus:Ie(e.onFocus,()=>f(!0)),onBlur:Ie(e.onBlur,()=>f(!1))})})})}),$me="MenuCheckboxItem",kU=x.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...a}=e;return s.jsx(MU,{scope:e.__scopeMenu,checked:r,children:s.jsx(tj,{role:"menuitemcheckbox","aria-checked":H0(r)?"mixed":r,...a,ref:t,"data-state":aT(r),onSelect:Ie(a.onSelect,()=>n==null?void 0:n(H0(r)?!0:!r),{checkForDefaultPrevented:!1})})})});kU.displayName=$me;var EU="MenuRadioGroup",[Lme,Fme]=lu(EU,{value:void 0,onValueChange:()=>{}}),TU=x.forwardRef((e,t)=>{const{value:r,onValueChange:n,...a}=e,i=Zr(n);return s.jsx(Lme,{scope:e.__scopeMenu,value:r,onValueChange:i,children:s.jsx(nT,{...a,ref:t})})});TU.displayName=EU;var AU="MenuRadioItem",OU=x.forwardRef((e,t)=>{const{value:r,...n}=e,a=Fme(AU,e.__scopeMenu),i=r===a.value;return s.jsx(MU,{scope:e.__scopeMenu,checked:i,children:s.jsx(tj,{role:"menuitemradio","aria-checked":i,...n,ref:t,"data-state":aT(i),onSelect:Ie(n.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,r)},{checkForDefaultPrevented:!1})})})});OU.displayName=AU;var sT="MenuItemIndicator",[MU,Bme]=lu(sT,{checked:!1}),IU=x.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...a}=e,i=Bme(sT,r);return s.jsx(kn,{present:n||H0(i.checked)||i.checked===!0,children:s.jsx(ze.span,{...a,ref:t,"data-state":aT(i.checked)})})});IU.displayName=sT;var zme="MenuSeparator",RU=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(ze.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});RU.displayName=zme;var Ume="MenuArrow",DU=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=ej(r);return s.jsx(jw,{...a,...n,ref:t})});DU.displayName=Ume;var Wme="MenuSub",[Nze,$U]=lu(Wme),op="MenuSubTrigger",LU=x.forwardRef((e,t)=>{const r=cu(op,e.__scopeMenu),n=_x(op,e.__scopeMenu),a=$U(op,e.__scopeMenu),i=tT(op,e.__scopeMenu),o=x.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,d={__scopeMenu:e.__scopeMenu},h=x.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return x.useEffect(()=>h,[h]),x.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),s.jsx(QE,{asChild:!0,...d,children:s.jsx(PU,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":zU(r.open),...e,ref:uw(t,a.onTriggerChange),onClick:f=>{var m;(m=e.onClick)==null||m.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Ie(e.onPointerMove,pg(f=>{i.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!r.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),h()},100))})),onPointerLeave:Ie(e.onPointerLeave,pg(f=>{var p,y;h();const m=(p=r.content)==null?void 0:p.getBoundingClientRect();if(m){const v=(y=r.content)==null?void 0:y.dataset.side,b=v==="right",N=b?-5:5,j=m[b?"left":"right"],w=m[b?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+N,y:f.clientY},{x:j,y:m.top},{x:w,y:m.top},{x:w,y:m.bottom},{x:j,y:m.bottom}],side:v}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Ie(e.onKeyDown,f=>{var p;const m=i.searchRef.current!=="";e.disabled||m&&f.key===" "||Nme[n.dir].includes(f.key)&&(r.onOpenChange(!0),(p=r.content)==null||p.focus(),f.preventDefault())})})})});LU.displayName=op;var FU="MenuSubContent",BU=x.forwardRef((e,t)=>{const r=NU(ei,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=cu(ei,e.__scopeMenu),o=_x(ei,e.__scopeMenu),l=$U(FU,e.__scopeMenu),c=x.useRef(null),d=nt(t,c);return s.jsx(mg.Provider,{scope:e.__scopeMenu,children:s.jsx(kn,{present:n||i.open,children:s.jsx(mg.Slot,{scope:e.__scopeMenu,children:s.jsx(rT,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var f;o.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:Ie(e.onFocusOutside,h=>{h.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Ie(e.onEscapeKeyDown,h=>{o.onClose(),h.preventDefault()}),onKeyDown:Ie(e.onKeyDown,h=>{var p;const f=h.currentTarget.contains(h.target),m=_me[o.dir].includes(h.key);f&&m&&(i.onOpenChange(!1),(p=l.trigger)==null||p.focus(),h.preventDefault())})})})})})});BU.displayName=FU;function zU(e){return e?"open":"closed"}function H0(e){return e==="indeterminate"}function aT(e){return H0(e)?"indeterminate":e?"checked":"unchecked"}function Hme(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function Vme(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function qme(e,t,r){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=Vme(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function Gme(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],d=l.x,h=l.y,f=c.x,m=c.y;h>n!=m>n&&r<(f-d)*(n-h)/(m-h)+d&&(a=!a)}return a}function Kme(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return Gme(r,t)}function pg(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Yme=jU,Zme=QE,Xme=_U,Jme=SU,Qme=nT,epe=CU,tpe=tj,rpe=kU,npe=TU,spe=OU,ape=IU,ipe=RU,ope=DU,lpe=LU,cpe=BU,rj="DropdownMenu",[dpe,_ze]=sn(rj,[bU]),Ls=bU(),[upe,UU]=dpe(rj),WU=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=Ls(t),d=x.useRef(null),[h,f]=Ln({prop:a,defaultProp:i??!1,onChange:o,caller:rj});return s.jsx(upe,{scope:t,triggerId:Qs(),triggerRef:d,contentId:Qs(),open:h,onOpenChange:f,onOpenToggle:x.useCallback(()=>f(m=>!m),[f]),modal:l,children:s.jsx(Yme,{...c,open:h,onOpenChange:f,dir:n,modal:l,children:r})})};WU.displayName=rj;var HU="DropdownMenuTrigger",VU=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...a}=e,i=UU(HU,r),o=Ls(r);return s.jsx(Zme,{asChild:!0,...o,children:s.jsx(ze.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:uw(t,i.triggerRef),onPointerDown:Ie(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:Ie(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});VU.displayName=HU;var hpe="DropdownMenuPortal",qU=e=>{const{__scopeDropdownMenu:t,...r}=e,n=Ls(t);return s.jsx(Xme,{...n,...r})};qU.displayName=hpe;var GU="DropdownMenuContent",KU=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=UU(GU,r),i=Ls(r),o=x.useRef(!1);return s.jsx(Jme,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...n,ref:t,onCloseAutoFocus:Ie(e.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Ie(e.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,h=c.button===2||d;(!a.modal||h)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});KU.displayName=GU;var fpe="DropdownMenuGroup",mpe=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ls(r);return s.jsx(Qme,{...a,...n,ref:t})});mpe.displayName=fpe;var ppe="DropdownMenuLabel",YU=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ls(r);return s.jsx(epe,{...a,...n,ref:t})});YU.displayName=ppe;var gpe="DropdownMenuItem",ZU=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ls(r);return s.jsx(tpe,{...a,...n,ref:t})});ZU.displayName=gpe;var xpe="DropdownMenuCheckboxItem",XU=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ls(r);return s.jsx(rpe,{...a,...n,ref:t})});XU.displayName=xpe;var vpe="DropdownMenuRadioGroup",ype=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ls(r);return s.jsx(npe,{...a,...n,ref:t})});ype.displayName=vpe;var bpe="DropdownMenuRadioItem",JU=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ls(r);return s.jsx(spe,{...a,...n,ref:t})});JU.displayName=bpe;var wpe="DropdownMenuItemIndicator",QU=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ls(r);return s.jsx(ape,{...a,...n,ref:t})});QU.displayName=wpe;var jpe="DropdownMenuSeparator",eW=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ls(r);return s.jsx(ipe,{...a,...n,ref:t})});eW.displayName=jpe;var Npe="DropdownMenuArrow",_pe=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ls(r);return s.jsx(ope,{...a,...n,ref:t})});_pe.displayName=Npe;var Spe="DropdownMenuSubTrigger",tW=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ls(r);return s.jsx(lpe,{...a,...n,ref:t})});tW.displayName=Spe;var Cpe="DropdownMenuSubContent",rW=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ls(r);return s.jsx(cpe,{...a,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});rW.displayName=Cpe;var Ppe=WU,kpe=VU,Epe=qU,nW=KU,sW=YU,aW=ZU,iW=XU,oW=JU,lW=QU,cW=eW,dW=tW,uW=rW;const Tpe=Ppe,Ape=kpe,Ope=x.forwardRef(({className:e,inset:t,children:r,...n},a)=>s.jsxs(dW,{ref:a,className:Re("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...n,children:[r,s.jsx(Pc,{className:"ml-auto h-4 w-4"})]}));Ope.displayName=dW.displayName;const Mpe=x.forwardRef(({className:e,...t},r)=>s.jsx(uW,{ref:r,className:Re("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));Mpe.displayName=uW.displayName;const hW=x.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(Epe,{children:s.jsx(nW,{ref:n,sideOffset:t,className:Re("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));hW.displayName=nW.displayName;const Ll=x.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(aW,{ref:n,className:Re("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...r}));Ll.displayName=aW.displayName;const Ipe=x.forwardRef(({className:e,children:t,checked:r,...n},a)=>s.jsxs(iW,{ref:a,className:Re("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:r,...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(lW,{children:s.jsx(tn,{className:"h-4 w-4"})})}),t]}));Ipe.displayName=iW.displayName;const Rpe=x.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(oW,{ref:n,className:Re("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(lW,{children:s.jsx(ree,{className:"h-2 w-2 fill-current"})})}),t]}));Rpe.displayName=oW.displayName;const fW=x.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(sW,{ref:n,className:Re("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));fW.displayName=sW.displayName;const Ry=x.forwardRef(({className:e,...t},r)=>s.jsx(cW,{ref:r,className:Re("-mx-1 my-1 h-px bg-muted",e),...t}));Ry.displayName=cW.displayName;var mW={exports:{}},pW={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ef=x;function Dpe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $pe=typeof Object.is=="function"?Object.is:Dpe,Lpe=ef.useState,Fpe=ef.useEffect,Bpe=ef.useLayoutEffect,zpe=ef.useDebugValue;function Upe(e,t){var r=t(),n=Lpe({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return Bpe(function(){a.value=r,a.getSnapshot=t,K_(a)&&i({inst:a})},[e,r,t]),Fpe(function(){return K_(a)&&i({inst:a}),e(function(){K_(a)&&i({inst:a})})},[e]),zpe(r),r}function K_(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!$pe(e,r)}catch{return!0}}function Wpe(e,t){return t()}var Hpe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Wpe:Upe;pW.useSyncExternalStore=ef.useSyncExternalStore!==void 0?ef.useSyncExternalStore:Hpe;mW.exports=pW;var Vpe=mW.exports;function qpe(){return Vpe.useSyncExternalStore(Gpe,()=>!0,()=>!1)}function Gpe(){return()=>{}}var iT="Avatar",[Kpe,Sze]=sn(iT),[Ype,gW]=Kpe(iT),xW=x.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[a,i]=x.useState("idle");return s.jsx(Ype,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:s.jsx(ze.span,{...n,ref:t})})});xW.displayName=iT;var vW="AvatarImage",yW=x.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:a=()=>{},...i}=e,o=gW(vW,r),l=Zpe(n,i),c=Zr(d=>{a(d),o.onImageLoadingStatusChange(d)});return Xr(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?s.jsx(ze.img,{...i,ref:t,src:n}):null});yW.displayName=vW;var bW="AvatarFallback",wW=x.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...a}=e,i=gW(bW,r),[o,l]=x.useState(n===void 0);return x.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&i.imageLoadingStatus!=="loaded"?s.jsx(ze.span,{...a,ref:t}):null});wW.displayName=bW;function CI(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Zpe(e,{referrerPolicy:t,crossOrigin:r}){const n=qpe(),a=x.useRef(null),i=n?(a.current||(a.current=new window.Image),a.current):null,[o,l]=x.useState(()=>CI(i,e));return Xr(()=>{l(CI(i,e))},[i,e]),Xr(()=>{const c=f=>()=>{l(f)};if(!i)return;const d=c("loaded"),h=c("error");return i.addEventListener("load",d),i.addEventListener("error",h),t&&(i.referrerPolicy=t),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",d),i.removeEventListener("error",h)}},[i,r,t]),o}var jW=xW,NW=yW,_W=wW;const oi=x.forwardRef(({className:e,...t},r)=>s.jsx(jW,{ref:r,className:Re("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));oi.displayName=jW.displayName;const li=x.forwardRef(({className:e,...t},r)=>s.jsx(NW,{ref:r,className:Re("aspect-square h-full w-full",e),...t}));li.displayName=NW.displayName;const ci=x.forwardRef(({className:e,...t},r)=>s.jsx(_W,{ref:r,className:Re("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));ci.displayName=_W.displayName;const Sn=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:Re("w-full caption-bottom text-sm",e),...t})}));Sn.displayName="Table";const Cn=x.forwardRef(({className:e,...t},r)=>s.jsx("thead",{ref:r,className:Re("[&_tr]:border-b",e),...t}));Cn.displayName="TableHeader";const Pn=x.forwardRef(({className:e,...t},r)=>s.jsx("tbody",{ref:r,className:Re("[&_tr:last-child]:border-0",e),...t}));Pn.displayName="TableBody";const Xpe=x.forwardRef(({className:e,...t},r)=>s.jsx("tfoot",{ref:r,className:Re("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));Xpe.displayName="TableFooter";const Mt=x.forwardRef(({className:e,...t},r)=>s.jsx("tr",{ref:r,className:Re("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...t}));Mt.displayName="TableRow";const Pe=x.forwardRef(({className:e,...t},r)=>s.jsx("th",{ref:r,className:Re("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Pe.displayName="TableHead";const be=x.forwardRef(({className:e,...t},r)=>s.jsx("td",{ref:r,className:Re("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));be.displayName="TableCell";const Jpe=x.forwardRef(({className:e,...t},r)=>s.jsx("caption",{ref:r,className:Re("mt-4 text-sm text-muted-foreground",e),...t}));Jpe.displayName="TableCaption";var Qpe="Separator",PI="horizontal",ege=["horizontal","vertical"],SW=x.forwardRef((e,t)=>{const{decorative:r,orientation:n=PI,...a}=e,i=tge(n)?n:PI,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return s.jsx(ze.div,{"data-orientation":i,...l,...a,ref:t})});SW.displayName=Qpe;function tge(e){return ege.includes(e)}var CW=SW;const ja=x.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},a)=>s.jsx(CW,{ref:a,decorative:r,orientation:t,className:Re("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));ja.displayName=CW.displayName;const rge=({profile:e,isOpen:t,onClose:r,onProfileUpdate:n})=>{const[a,i]=x.useState(e.vettingStatus),[o,l]=x.useState(e.vettingNotes||""),[c,d]=x.useState(!1),h=(y,v)=>`${y.charAt(0)}${v.charAt(0)}`.toUpperCase(),f=y=>{switch(y){case"approved":return s.jsxs(ne,{className:"bg-emerald-500/10 text-emerald-600 border-emerald-200",children:[s.jsx(Kt,{className:"w-3 h-3 mr-1"}),"Approved"]});case"pending":return s.jsxs(ne,{className:"bg-amber-500/10 text-amber-600 border-amber-200",children:[s.jsx(Qe,{className:"w-3 h-3 mr-1"}),"Pending Review"]});case"rejected":return s.jsxs(ne,{className:"bg-red-500/10 text-red-600 border-red-200",children:[s.jsx(Xn,{className:"w-3 h-3 mr-1"}),"Rejected"]})}},m=async()=>{d(!0);const y=Jk(e.id,a,o);y?(Z.success(`Vetting status updated to "${a}"`),n(y)):Z.error("Failed to update vetting status"),d(!1)},p=()=>{if(e.policeCheckUrl){const y=document.createElement("a");y.href=e.policeCheckUrl,y.download=e.policeCheckName||`police-check-${e.id}.pdf`,document.body.appendChild(y),y.click(),document.body.removeChild(y)}else Z.error("No police check file uploaded")};return s.jsx(hr,{open:t,onOpenChange:r,children:s.jsxs(or,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[s.jsx(lr,{children:s.jsx(cr,{className:"text-xl",children:"PSW Profile Card"})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsxs(oi,{className:"h-24 w-24 mb-4 ring-4 ring-primary/20",children:[e.profilePhotoUrl?s.jsx(li,{src:e.profilePhotoUrl,alt:`${e.firstName} ${e.lastName}`}):null,s.jsx(ci,{className:"text-2xl bg-primary/10 text-primary",children:h(e.firstName,e.lastName)})]}),s.jsxs("h2",{className:"text-xl font-bold text-foreground",children:[e.firstName," ",e.lastName]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["ID: ",e.id]}),s.jsx("div",{className:"mt-2",children:f(e.vettingStatus)}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Client sees: ",s.jsx("strong",{children:e.firstName})," + Photo"]})]}),s.jsx(ja,{}),s.jsxs("div",{className:"p-4 bg-primary/5 border border-primary/20 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(lx,{className:"w-5 h-5 text-primary"}),s.jsx("span",{className:"font-semibold text-foreground",children:"HSCPOA Registration"})]}),e.hscpoaNumber?s.jsx("p",{className:"text-lg font-mono text-primary",children:e.hscpoaNumber}):s.jsx("p",{className:"text-sm text-muted-foreground italic",children:"Not provided"})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-foreground mb-3 flex items-center gap-2",children:[s.jsx($t,{className:"w-4 h-4"}),"Contact Information"]}),s.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(Fn,{className:"w-4 h-4"}),s.jsx("span",{children:e.phone})]}),s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(hn,{className:"w-4 h-4"}),s.jsx("span",{children:e.email})]})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-foreground mb-3 flex items-center gap-2",children:[s.jsx(mr,{className:"w-4 h-4"}),"Vulnerable Sector Police Check"]}),e.policeCheckUrl?s.jsxs(K,{variant:"outline",className:"w-full",onClick:p,children:[s.jsx(nu,{className:"w-4 h-4 mr-2"}),"View/Download: ",e.policeCheckName||"Police Check"]}):s.jsx("div",{className:"p-3 bg-muted rounded-lg text-sm text-muted-foreground text-center",children:"No police check file uploaded"})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-foreground mb-3 flex items-center gap-2",children:[s.jsx(Oa,{className:"w-4 h-4"}),"Language Skills"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:e.languages.length>0?e.languages.map(y=>s.jsx(ne,{variant:"secondary",children:Vd(y)},y)):s.jsx("span",{className:"text-sm text-muted-foreground",children:"No languages specified"})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Experience"}),s.jsx("p",{className:"text-foreground",children:e.yearsExperience||"Not specified"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Transport"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(si,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{className:"text-foreground",children:[e.hasOwnTransport==="yes-car"&&"Own car",e.hasOwnTransport==="yes-transit"&&"Public transit",e.hasOwnTransport==="no"&&"No transport",!e.hasOwnTransport&&"Not specified"]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Availability"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Lt,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{className:"text-foreground capitalize",children:e.availableShifts||"Not specified"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Applied"}),s.jsx("p",{className:"text-foreground",children:new Date(e.appliedAt).toLocaleDateString()})]})]}),e.certifications&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Certifications"}),s.jsx("p",{className:"text-sm text-foreground",children:e.certifications})]}),s.jsx(ja,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"font-semibold text-foreground flex items-center gap-2",children:[s.jsx(zt,{className:"w-4 h-4"}),"Vetting Controls"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{children:"Vetting Status"}),s.jsxs(Xt,{value:a,onValueChange:y=>i(y),children:[s.jsx(qt,{children:s.jsx(Jt,{})}),s.jsxs(Gt,{children:[s.jsx(_e,{value:"pending",children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(Qe,{className:"w-3 h-3 text-amber-500"}),"Pending Review"]})}),s.jsx(_e,{value:"approved",children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(Kt,{className:"w-3 h-3 text-emerald-500"}),"Approved"]})}),s.jsx(_e,{value:"rejected",children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(Xn,{className:"w-3 h-3 text-red-500"}),"Rejected"]})})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{children:"Vetting Notes (optional)"}),s.jsx(_n,{value:o,onChange:y=>l(y.target.value),placeholder:"Add notes about this PSW's vetting...",rows:2})]}),s.jsx(K,{onClick:m,disabled:c||a===e.vettingStatus,className:"w-full",children:c?"Updating...":"Update Vetting Status"}),e.vettingStatus==="approved"&&s.jsx("p",{className:"text-xs text-emerald-600 text-center",children:" This PSW can see and claim shifts on the Job Board"}),e.vettingStatus!=="approved"&&s.jsx("p",{className:"text-xs text-amber-600 text-center",children:" This PSW cannot access the Job Board until approved"})]})]})]})})},nge=({open:e,onOpenChange:t,action:r,pswId:n,pswName:a,pswEmail:i,onSuccess:o})=>{const[l,c]=x.useState(""),[d,h]=x.useState(!1),m=(()=>{switch(r){case"flag":return{title:"Flag PSW Account",description:`Are you sure you want to flag ${a}'s account? They will receive a warning but can still log in.`,icon:s.jsx(Wr,{className:"w-6 h-6 text-amber-500"}),buttonText:"Flag Account",buttonClass:"bg-amber-500 hover:bg-amber-600",newStatus:"flagged",auditAction:"flagged"};case"deactivate":return{title:"Deactivate PSW Account",description:`Are you sure you want to deactivate ${a}'s account? They will be blocked from logging in or re-registering.`,icon:s.jsx(Xn,{className:"w-6 h-6 text-red-500"}),buttonText:"Deactivate Account",buttonClass:"bg-red-500 hover:bg-red-600",newStatus:"deactivated",auditAction:"deactivated"};case"reinstate":return{title:"Reinstate PSW Account",description:`Are you sure you want to reinstate ${a}'s account? They will be able to log in and accept shifts again.`,icon:s.jsx(Qa,{className:"w-6 h-6 text-blue-500"}),buttonText:"Reinstate Account",buttonClass:"bg-blue-500 hover:bg-blue-600",newStatus:"approved",auditAction:"reinstated"}}})(),p=async()=>{if(r!=="reinstate"&&!l.trim()){Z.error("Please provide a reason for this action");return}h(!0);try{const{error:y}=await de.from("psw_profiles").update({vetting_status:m.newStatus,vetting_notes:l||void 0,vetting_updated_at:new Date().toISOString()}).eq("id",n);if(y)throw y;const{error:v}=await de.from("psw_status_audit").insert({psw_id:n,psw_name:a,psw_email:i,action:m.auditAction,reason:l||null,performed_by:"admin"});v&&console.error("Failed to log audit entry:",v),Z.success(r==="reinstate"?`${a} has been reinstated`:r==="flag"?`${a} has been flagged`:`${a} has been deactivated`),o(),t(!1),c("")}catch(y){console.error("Status change error:",y),Z.error("Failed to update status",{description:y.message})}finally{h(!1)}};return s.jsx(hr,{open:e,onOpenChange:t,children:s.jsxs(or,{className:"sm:max-w-md",children:[s.jsxs(lr,{children:[s.jsxs("div",{className:"flex items-center gap-3",children:[m.icon,s.jsx(cr,{children:m.title})]}),s.jsx(bo,{className:"pt-2",children:m.description})]}),s.jsx("div",{className:"space-y-4 py-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs(oe,{htmlFor:"reason",children:["Reason for ",r==="reinstate"?"Reinstatement":r==="flag"?"Flagging":"Removal",r!=="reinstate"&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsx(_n,{id:"reason",placeholder:r==="reinstate"?"Optional: Add a note about the reinstatement...":"Required: Explain why this action is being taken...",value:l,onChange:y=>c(y.target.value),rows:3})]})}),s.jsxs(yo,{className:"gap-2 sm:gap-0",children:[s.jsx(K,{variant:"outline",onClick:()=>t(!1),disabled:d,children:"Cancel"}),s.jsx(K,{onClick:p,disabled:d||r!=="reinstate"&&!l.trim(),className:m.buttonClass,children:d?s.jsxs(s.Fragment,{children:[s.jsx(Ut,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):m.buttonText})]})]})})};function rt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function ea(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function bs(e,t){const r=rt(e);return isNaN(t)?ea(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function ta(e,t){const r=rt(e);if(isNaN(t))return ea(e,NaN);if(!t)return r;const n=r.getDate(),a=ea(e,r.getTime());a.setMonth(r.getMonth()+t+1,0);const i=a.getDate();return n>=i?a:(r.setFullYear(a.getFullYear(),a.getMonth(),n),r)}const oT=6048e5,sge=864e5,PW=6e4,lT=36e5,Fv=43200,kI=1440;let age={};function Jf(){return age}function ra(e,t){var l,c,d,h;const r=Jf(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,a=rt(e),i=a.getDay(),o=(i<n?7:0)+i-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Gd(e){return ra(e,{weekStartsOn:1})}function kW(e){const t=rt(e),r=t.getFullYear(),n=ea(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=Gd(n),i=ea(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=Gd(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function ml(e){const t=rt(e);return t.setHours(0,0,0,0),t}function tf(e){const t=rt(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function $i(e,t){const r=ml(e),n=ml(t),a=+r-tf(r),i=+n-tf(n);return Math.round((a-i)/sge)}function ige(e){const t=kW(e),r=ea(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Gd(r)}function gg(e,t){const r=t*7;return bs(e,r)}function cT(e,t){return ta(e,t*12)}function oge(e){let t;return e.forEach(function(r){const n=rt(r);(t===void 0||t<n||isNaN(Number(n)))&&(t=n)}),t||new Date(NaN)}function lge(e){let t;return e.forEach(r=>{const n=rt(r);(!t||t>n||isNaN(+n))&&(t=n)}),t||new Date(NaN)}function Dy(e,t){const r=rt(e),n=rt(t),a=r.getTime()-n.getTime();return a<0?-1:a>0?1:a}function EW(e){return ea(e,Date.now())}function us(e,t){const r=ml(e),n=ml(t);return+r==+n}function dT(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function cge(e){if(!dT(e)&&typeof e!="number")return!1;const t=rt(e);return!isNaN(Number(t))}function rf(e,t){const r=rt(e),n=rt(t),a=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return a*12+i}function dge(e,t,r){const n=ra(e,r),a=ra(t,r),i=+n-tf(n),o=+a-tf(a);return Math.round((i-o)/oT)}function uge(e,t){const r=rt(e),n=rt(t),a=EI(r,n),i=Math.abs($i(r,n));r.setDate(r.getDate()-a*i);const o=+(EI(r,n)===-a),l=a*(i-o);return l===0?0:l}function EI(e,t){const r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function TW(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function AW(e,t){return+rt(e)-+rt(t)}function OW(e,t,r){const n=AW(e,t)/lT;return TW(r==null?void 0:r.roundingMethod)(n)}function nj(e){const t=rt(e);return t.setHours(23,59,59,999),t}function Bi(e){const t=rt(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function hge(e){const t=rt(e);return+nj(t)==+Bi(t)}function fge(e,t){const r=rt(e),n=rt(t),a=Dy(r,n),i=Math.abs(rf(r,n));let o;if(i<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*i);let l=Dy(r,n)===-a;hge(rt(e))&&i===1&&Dy(e,n)===1&&(l=!1),o=a*(i-Number(l))}return o===0?0:o}function mge(e,t,r){const n=AW(e,t)/1e3;return TW(r==null?void 0:r.roundingMethod)(n)}function nn(e){const t=rt(e);return t.setDate(1),t.setHours(0,0,0,0),t}function xg(e){const t=rt(e),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(23,59,59,999),t}function nf(e){const t=rt(e),r=ea(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function Kd(e,t){var l,c,d,h;const r=Jf(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,a=rt(e),i=a.getDay(),o=(i<n?-7:0)+6-(i-n);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}function MW(e){return Kd(e,{weekStartsOn:1})}const pge={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},gge=(e,t,r)=>{let n;const a=pge[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Y_(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const xge={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},vge={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},yge={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},bge={date:Y_({formats:xge,defaultWidth:"full"}),time:Y_({formats:vge,defaultWidth:"full"}),dateTime:Y_({formats:yge,defaultWidth:"full"})},wge={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},jge=(e,t,r,n)=>wge[e];function Rm(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const Nge={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},_ge={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Sge={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Cge={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Pge={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},kge={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ege=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Tge={ordinalNumber:Ege,era:Rm({values:Nge,defaultWidth:"wide"}),quarter:Rm({values:_ge,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Rm({values:Sge,defaultWidth:"wide"}),day:Rm({values:Cge,defaultWidth:"wide"}),dayPeriod:Rm({values:Pge,defaultWidth:"wide",formattingValues:kge,defaultFormattingWidth:"wide"})};function Dm(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?Oge(l,f=>f.test(o)):Age(l,f=>f.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const h=t.slice(o.length);return{value:d,rest:h}}}function Age(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function Oge(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function Mge(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const Ige=/^(\d+)(th|st|nd|rd)?/i,Rge=/\d+/i,Dge={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},$ge={any:[/^b/i,/^(a|c)/i]},Lge={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Fge={any:[/1/i,/2/i,/3/i,/4/i]},Bge={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},zge={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Uge={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Wge={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Hge={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Vge={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},qge={ordinalNumber:Mge({matchPattern:Ige,parsePattern:Rge,valueCallback:e=>parseInt(e,10)}),era:Dm({matchPatterns:Dge,defaultMatchWidth:"wide",parsePatterns:$ge,defaultParseWidth:"any"}),quarter:Dm({matchPatterns:Lge,defaultMatchWidth:"wide",parsePatterns:Fge,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Dm({matchPatterns:Bge,defaultMatchWidth:"wide",parsePatterns:zge,defaultParseWidth:"any"}),day:Dm({matchPatterns:Uge,defaultMatchWidth:"wide",parsePatterns:Wge,defaultParseWidth:"any"}),dayPeriod:Dm({matchPatterns:Hge,defaultMatchWidth:"any",parsePatterns:Vge,defaultParseWidth:"any"})},uT={code:"en-US",formatDistance:gge,formatLong:bge,formatRelative:jge,localize:Tge,match:qge,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Gge(e){const t=rt(e);return $i(t,nf(t))+1}function IW(e){const t=rt(e),r=+Gd(t)-+ige(t);return Math.round(r/oT)+1}function RW(e,t){var h,f,m,p;const r=rt(e),n=r.getFullYear(),a=Jf(),i=(t==null?void 0:t.firstWeekContainsDate)??((f=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((p=(m=a.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,o=ea(e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=ra(o,t),c=ea(e,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const d=ra(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=d.getTime()?n:n-1}function Kge(e,t){var l,c,d,h;const r=Jf(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,a=RW(e,t),i=ea(e,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),ra(i,t)}function DW(e,t){const r=rt(e),n=+ra(r,t)-+Kge(r,t);return Math.round(n/oT)+1}function rr(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Ol={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return rr(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):rr(r+1,2)},d(e,t){return rr(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return rr(e.getHours()%12||12,t.length)},H(e,t){return rr(e.getHours(),t.length)},m(e,t){return rr(e.getMinutes(),t.length)},s(e,t){return rr(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return rr(a,t.length)}},Iu={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},TI={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return Ol.y(e,t)},Y:function(e,t,r,n){const a=RW(e,n),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return rr(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):rr(i,t.length)},R:function(e,t){const r=kW(e);return rr(r,t.length)},u:function(e,t){const r=e.getFullYear();return rr(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return rr(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return rr(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Ol.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return rr(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=DW(e,n);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):rr(a,t.length)},I:function(e,t,r){const n=IW(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):rr(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Ol.d(e,t)},D:function(e,t,r){const n=Gge(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):rr(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return rr(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return rr(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return rr(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(n===12?a=Iu.noon:n===0?a=Iu.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(n>=17?a=Iu.evening:n>=12?a=Iu.afternoon:n>=4?a=Iu.morning:a=Iu.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Ol.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Ol.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):rr(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):rr(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Ol.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Ol.s(e,t)},S:function(e,t){return Ol.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return OI(n);case"XXXX":case"XX":return td(n);case"XXXXX":case"XXX":default:return td(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return OI(n);case"xxxx":case"xx":return td(n);case"xxxxx":case"xxx":default:return td(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+AI(n,":");case"OOOO":default:return"GMT"+td(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+AI(n,":");case"zzzz":default:return"GMT"+td(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return rr(n,t.length)},T:function(e,t,r){const n=e.getTime();return rr(n,t.length)}};function AI(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),i=n%60;return i===0?r+String(a):r+String(a)+t+rr(i,2)}function OI(e,t){return e%60===0?(e>0?"-":"+")+rr(Math.abs(e)/60,2):td(e,t)}function td(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=rr(Math.trunc(n/60),2),i=rr(n%60,2);return r+a+t+i}const MI=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},$W=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Yge=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return MI(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",MI(n,t)).replace("{{time}}",$W(a,t))},Zge={p:$W,P:Yge},Xge=/^D+$/,Jge=/^Y+$/,Qge=["D","DD","YY","YYYY"];function exe(e){return Xge.test(e)}function txe(e){return Jge.test(e)}function rxe(e,t,r){const n=nxe(e,t,r);if(console.warn(n),Qge.includes(e))throw new RangeError(n)}function nxe(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const sxe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,axe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ixe=/^'([^]*?)'?$/,oxe=/''/g,lxe=/[a-zA-Z]/;function Ze(e,t,r){var h,f,m,p,y,v,b,N;const n=Jf(),a=(r==null?void 0:r.locale)??n.locale??uT,i=(r==null?void 0:r.firstWeekContainsDate)??((f=(h=r==null?void 0:r.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(m=n.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((v=(y=r==null?void 0:r.locale)==null?void 0:y.options)==null?void 0:v.weekStartsOn)??n.weekStartsOn??((N=(b=n.locale)==null?void 0:b.options)==null?void 0:N.weekStartsOn)??0,l=rt(e);if(!cge(l))throw new RangeError("Invalid time value");let c=t.match(axe).map(j=>{const w=j[0];if(w==="p"||w==="P"){const S=Zge[w];return S(j,a.formatLong)}return j}).join("").match(sxe).map(j=>{if(j==="''")return{isToken:!1,value:"'"};const w=j[0];if(w==="'")return{isToken:!1,value:cxe(j)};if(TI[w])return{isToken:!0,value:j};if(w.match(lxe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:j}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(j=>{if(!j.isToken)return j.value;const w=j.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&txe(w)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&exe(w))&&rxe(w,t,String(e));const S=TI[w[0]];return S(l,w,a.localize,d)}).join("")}function cxe(e){const t=e.match(ixe);return t?t[1].replace(oxe,"'"):e}function dxe(e,t,r){const n=Jf(),a=(r==null?void 0:r.locale)??n.locale??uT,i=2520,o=Dy(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let c,d;o>0?(c=rt(t),d=rt(e)):(c=rt(e),d=rt(t));const h=mge(d,c),f=(tf(d)-tf(c))/1e3,m=Math.round((h-f)/60);let p;if(m<2)return r!=null&&r.includeSeconds?h<5?a.formatDistance("lessThanXSeconds",5,l):h<10?a.formatDistance("lessThanXSeconds",10,l):h<20?a.formatDistance("lessThanXSeconds",20,l):h<40?a.formatDistance("halfAMinute",0,l):h<60?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",1,l):m===0?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",m,l);if(m<45)return a.formatDistance("xMinutes",m,l);if(m<90)return a.formatDistance("aboutXHours",1,l);if(m<kI){const y=Math.round(m/60);return a.formatDistance("aboutXHours",y,l)}else{if(m<i)return a.formatDistance("xDays",1,l);if(m<Fv){const y=Math.round(m/kI);return a.formatDistance("xDays",y,l)}else if(m<Fv*2)return p=Math.round(m/Fv),a.formatDistance("aboutXMonths",p,l)}if(p=fge(d,c),p<12){const y=Math.round(m/Fv);return a.formatDistance("xMonths",y,l)}else{const y=p%12,v=Math.trunc(p/12);return y<3?a.formatDistance("aboutXYears",v,l):y<9?a.formatDistance("overXYears",v,l):a.formatDistance("almostXYears",v+1,l)}}function TC(e,t){return dxe(e,EW(e),t)}function uxe(e){const t=rt(e),r=t.getFullYear(),n=t.getMonth(),a=ea(e,0);return a.setFullYear(r,n+1,0),a.setHours(0,0,0,0),a.getDate()}function hxe(e){return rt(e).getMonth()}function fxe(e){return Math.trunc(+rt(e)/1e3)}function mxe(e){const t=rt(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}function pxe(e,t){return dge(mxe(e),nn(e),t)+1}function gxe(e){return rt(e).getFullYear()}function AC(e,t){const r=rt(e),n=rt(t);return r.getTime()>n.getTime()}function LW(e,t){const r=rt(e),n=rt(t);return+r<+n}function hT(e,t){const r=rt(e),n=rt(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function xxe(e,t){const r=rt(e),n=rt(t);return r.getFullYear()===n.getFullYear()}function vxe(e){return us(e,EW(e))}function II(e,t){const r=+rt(e),[n,a]=[+rt(t.start),+rt(t.end)].sort((i,o)=>i-o);return r>=n&&r<=a}function $y(e,t){return bs(e,-t)}function un(e,t){const n=jxe(e);let a;if(n.date){const c=Nxe(n.date,2);a=_xe(c.restDateString,c.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);const i=a.getTime();let o=0,l;if(n.time&&(o=Sxe(n.time),isNaN(o)))return new Date(NaN);if(n.timezone){if(l=Cxe(n.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(i+o),d=new Date(0);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return new Date(i+o+l)}const Bv={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},yxe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,bxe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,wxe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function jxe(e){const t={},r=e.split(Bv.dateTimeDelimiter);let n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],Bv.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Bv.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){const a=Bv.timezone.exec(n);a?(t.time=n.replace(a[1],""),t.timezone=a[1]):t.time=n}return t}function Nxe(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};const a=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?a:i*100,restDateString:e.slice((n[1]||n[2]).length)}}function _xe(e,t){if(t===null)return new Date(NaN);const r=e.match(yxe);if(!r)return new Date(NaN);const n=!!r[4],a=$m(r[1]),i=$m(r[2])-1,o=$m(r[3]),l=$m(r[4]),c=$m(r[5])-1;if(n)return Axe(t,l,c)?Pxe(t,l,c):new Date(NaN);{const d=new Date(0);return!Exe(t,i,o)||!Txe(t,a)?new Date(NaN):(d.setUTCFullYear(t,i,Math.max(a,o)),d)}}function $m(e){return e?parseInt(e):1}function Sxe(e){const t=e.match(bxe);if(!t)return NaN;const r=Z_(t[1]),n=Z_(t[2]),a=Z_(t[3]);return Oxe(r,n,a)?r*lT+n*PW+a*1e3:NaN}function Z_(e){return e&&parseFloat(e.replace(",","."))||0}function Cxe(e){if(e==="Z")return 0;const t=e.match(wxe);if(!t)return 0;const r=t[1]==="+"?-1:1,n=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return Mxe(n,a)?r*(n*lT+a*PW):NaN}function Pxe(e,t,r){const n=new Date(0);n.setUTCFullYear(e,0,4);const a=n.getUTCDay()||7,i=(t-1)*7+r+1-a;return n.setUTCDate(n.getUTCDate()+i),n}const kxe=[31,null,31,30,31,30,31,31,30,31,30,31];function FW(e){return e%400===0||e%4===0&&e%100!==0}function Exe(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(kxe[t]||(FW(e)?29:28))}function Txe(e,t){return t>=1&&t<=(FW(e)?366:365)}function Axe(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function Oxe(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function Mxe(e,t){return t>=0&&t<=59}function X_(e,t){const r=rt(e),n=r.getFullYear(),a=r.getDate(),i=ea(e,0);i.setFullYear(n,t,15),i.setHours(0,0,0,0);const o=uxe(i);return r.setMonth(t,Math.min(a,o)),r}function RI(e,t){const r=rt(e);return isNaN(+r)?ea(e,NaN):(r.setFullYear(t),r)}function V0(e,t){return ta(e,-t)}function OC(e,t){return gg(e,-t)}function MC(e,t){return cT(e,-t)}const Ixe=()=>{const[e,t]=x.useState([]),[r,n]=x.useState(!0),[a,i]=x.useState(""),o=async()=>{n(!0);const{data:d,error:h}=await de.from("psw_status_audit").select("*").order("created_at",{ascending:!1}).limit(100);h?console.error("Error fetching audit logs:",h):t(d||[]),n(!1)};x.useEffect(()=>{o()},[]);const l=e.filter(d=>d.psw_name.toLowerCase().includes(a.toLowerCase())||d.psw_email.toLowerCase().includes(a.toLowerCase())||d.action.toLowerCase().includes(a.toLowerCase())),c=d=>{switch(d){case"activated":return s.jsxs(ne,{className:"bg-emerald-500/10 text-emerald-600 border-emerald-200",children:[s.jsx(Kt,{className:"w-3 h-3 mr-1"}),"Activated"]});case"flagged":return s.jsxs(ne,{className:"bg-amber-500/10 text-amber-600 border-amber-200",children:[s.jsx(Wr,{className:"w-3 h-3 mr-1"}),"Flagged"]});case"deactivated":return s.jsxs(ne,{className:"bg-red-500/10 text-red-600 border-red-200",children:[s.jsx(Xn,{className:"w-3 h-3 mr-1"}),"Deactivated"]});case"reinstated":return s.jsxs(ne,{className:"bg-blue-500/10 text-blue-600 border-blue-200",children:[s.jsx(Qa,{className:"w-3 h-3 mr-1"}),"Reinstated"]});default:return s.jsx(ne,{variant:"secondary",children:d})}};return s.jsxs(J,{className:"shadow-card",children:[s.jsxs(ke,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(Sk,{className:"w-5 h-5 text-primary"}),"Status Audit Trail"]}),s.jsx(Ge,{children:"Permanent log of all PSW status changes (cannot be modified or deleted)"})]}),s.jsxs(Q,{children:[s.jsxs("div",{className:"relative mb-4",children:[s.jsx(Js,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(pe,{placeholder:"Search by name, email, or action...",value:a,onChange:d=>i(d.target.value),className:"pl-10"})]}),r?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading audit logs..."}):l.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:a?"No matching audit logs found":"No status changes recorded yet"}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Sn,{children:[s.jsx(Cn,{children:s.jsxs(Mt,{children:[s.jsx(Pe,{children:"Date"}),s.jsx(Pe,{children:"PSW Name"}),s.jsx(Pe,{children:"Action"}),s.jsx(Pe,{children:"Reason"}),s.jsx(Pe,{children:"Performed By"})]})}),s.jsx(Pn,{children:l.map(d=>s.jsxs(Mt,{children:[s.jsx(be,{className:"whitespace-nowrap text-sm",children:Ze(new Date(d.created_at),"MMM d, yyyy h:mm a")}),s.jsx(be,{children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:d.psw_name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:d.psw_email})]})}),s.jsx(be,{children:c(d.action)}),s.jsx(be,{className:"max-w-[200px] truncate text-sm text-muted-foreground",children:d.reason||"-"}),s.jsx(be,{className:"text-sm",children:d.performed_by})]},d.id))})]})})]})]})},Rxe=()=>{const[e,t]=x.useState([]),[r,n]=x.useState(null),[a,i]=x.useState(!1),[o,l]=x.useState(""),[c,d]=x.useState(!1),[h,f]=x.useState("flag"),m=async()=>{const{data:O,error:E}=await de.from("psw_profiles").select("*, psw_number").in("vetting_status",["approved","flagged","deactivated"]).order("first_name");if(E){console.error("Error fetching PSW profiles:",E),Qk();const D=Gf();t(D.filter(I=>["approved","flagged","deactivated"].includes(I.vettingStatus)))}else{const D=(O||[]).map(I=>({id:I.id,firstName:I.first_name,lastName:I.last_name,email:I.email,phone:I.phone||"",gender:I.gender,homePostalCode:I.home_postal_code||void 0,homeCity:I.home_city||void 0,profilePhotoUrl:I.profile_photo_url||void 0,profilePhotoName:I.profile_photo_name||void 0,hscpoaNumber:I.hscpoa_number||void 0,policeCheckUrl:I.police_check_url||void 0,policeCheckName:I.police_check_name||void 0,policeCheckDate:I.police_check_date||void 0,languages:I.languages||["en"],vettingStatus:I.vetting_status,vettingNotes:I.vetting_notes||void 0,appliedAt:I.applied_at||void 0,approvedAt:I.approved_at||void 0,yearsExperience:I.years_experience||void 0,certifications:I.certifications||void 0,hasOwnTransport:I.has_own_transport||void 0,licensePlate:I.license_plate||void 0,availableShifts:I.available_shifts||void 0,vehicleDisclaimer:I.vehicle_disclaimer,vehiclePhotoUrl:I.vehicle_photo_url||void 0,vehiclePhotoName:I.vehicle_photo_name||void 0,pswNumber:I.psw_number||void 0}));t(D)}};x.useEffect(()=>{m();const O=()=>{document.visibilityState==="visible"&&m()};return document.addEventListener("visibilitychange",O),window.addEventListener("focus",m),()=>{document.removeEventListener("visibilitychange",O),window.removeEventListener("focus",m)}},[]);const p=x.useMemo(()=>{if(!o.trim())return e;const O=o.toLowerCase();return e.filter(E=>{var $,H;const D=`${E.firstName} ${E.lastName}`.toLowerCase(),I=(($=E.homeCity)==null?void 0:$.toLowerCase())||"",A=((H=E.homePostalCode)==null?void 0:H.toLowerCase())||"",V=E.languages.map(F=>Vd(F).toLowerCase()).join(" "),U=E.pswNumber?`PSW-${E.pswNumber}`:"";return D.includes(O)||I.includes(O)||A.includes(O)||V.includes(O)||E.phone.includes(O)||E.email.toLowerCase().includes(O)||E.vettingStatus.includes(O)||U.toLowerCase().includes(O)})},[e,o]),y=O=>{n(O),i(!0)},v=O=>{t(E=>E.map(D=>D.id===O.id?O:D)),n(O)},b=(O,E)=>{n(O),f(E),d(!0)},N=()=>{m()},j=O=>{const E=encodeURIComponent(`${O.homeCity||"Toronto"}, ON ${O.homePostalCode||""}`);window.open(`https://www.google.com/maps/search/?api=1&query=${E}`,"_blank")},w=O=>{switch(O){case"approved":return s.jsxs(ne,{className:"bg-emerald-500/10 text-emerald-600 border-emerald-200",children:[s.jsx(Kt,{className:"w-3 h-3 mr-1"}),"Active"]});case"flagged":return s.jsxs(ne,{className:"bg-amber-500/10 text-amber-600 border-amber-200",children:[s.jsx(Wr,{className:"w-3 h-3 mr-1"}),"Flagged"]});case"deactivated":return s.jsxs(ne,{className:"bg-red-500/10 text-red-600 border-red-200",children:[s.jsx(Xn,{className:"w-3 h-3 mr-1"}),"Deactivated"]});default:return s.jsx(ne,{variant:"secondary",children:O})}},S=(O,E)=>`${O.charAt(0)}${E.charAt(0)}`.toUpperCase(),C=p.filter(O=>O.vettingStatus==="approved").length,P=p.filter(O=>O.vettingStatus==="flagged").length,T=p.filter(O=>O.vettingStatus==="deactivated").length;return s.jsxs("div",{className:"space-y-6",children:[s.jsx(J,{className:"shadow-card border-primary/20 bg-primary/5",children:s.jsx(Q,{className:"p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(mr,{className:"w-5 h-5 text-primary mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-foreground",children:"PHIPA Privacy Protocol"}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Clients only see PSW ",s.jsx("strong",{children:"First Name + Photo"}),". Full addresses, last names, and phone numbers are ",s.jsx("strong",{children:"never visible to clients"}),"."]})]})]})})}),s.jsxs("div",{className:"relative",children:[s.jsx(Js,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(pe,{placeholder:"Search by name, city, PSW number (e.g. PSW-1001), or language...",value:o,onChange:O=>l(O.target.value),className:"pl-10"})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[s.jsx(J,{className:"shadow-card border-l-4 border-l-emerald-500",children:s.jsxs(Q,{className:"p-4 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-foreground",children:C}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Active"})]})}),s.jsx(J,{className:"shadow-card border-l-4 border-l-amber-500",children:s.jsxs(Q,{className:"p-4 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-foreground",children:P}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Flagged"})]})}),s.jsx(J,{className:"shadow-card border-l-4 border-l-red-500",children:s.jsxs(Q,{className:"p-4 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-foreground",children:T}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Deactivated"})]})}),s.jsx(J,{className:"shadow-card border-l-4 border-l-primary",children:s.jsxs(Q,{className:"p-4 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-foreground",children:p.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Total"})]})})]}),s.jsxs(J,{className:"shadow-card",children:[s.jsxs(ke,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(pn,{className:"w-5 h-5 text-primary"}),"Active Team"]}),s.jsx(Ge,{children:"Approved PSWs ready for shift assignments"})]}),s.jsx(Q,{children:p.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:o?"No PSWs match your search":"No approved PSWs yet"}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Sn,{children:[s.jsx(Cn,{children:s.jsxs(Mt,{children:[s.jsx(Pe,{className:"w-[60px]",children:"Photo"}),s.jsx(Pe,{children:"PSW #"}),s.jsx(Pe,{children:"First Name"}),s.jsx(Pe,{children:"Last Name"}),s.jsx(Pe,{children:"Gender"}),s.jsx(Pe,{children:"Transport"}),s.jsx(Pe,{children:"Languages"}),s.jsx(Pe,{children:"City"}),s.jsx(Pe,{children:"Postal Code"}),s.jsx(Pe,{children:"Phone"}),s.jsx(Pe,{children:"Status"}),s.jsx(Pe,{className:"text-right",children:"Actions"})]})}),s.jsx(Pn,{children:p.map(O=>{var D;const E=O.vettingStatus;return s.jsxs(Mt,{className:E==="deactivated"?"opacity-50":"",children:[s.jsx(be,{children:s.jsxs(oi,{className:"h-10 w-10 ring-2 ring-offset-2 ring-primary/20",children:[O.profilePhotoUrl?s.jsx(li,{src:O.profilePhotoUrl,alt:O.firstName}):null,s.jsx(ci,{className:"bg-primary/10 text-primary font-semibold text-sm",children:S(O.firstName,O.lastName)})]})}),s.jsx(be,{children:s.jsx("span",{className:"font-mono text-sm font-semibold text-primary",children:O.pswNumber?`PSW-${O.pswNumber}`:""})}),s.jsx(be,{children:s.jsx("button",{onClick:()=>y(O),className:"font-semibold text-foreground hover:text-primary hover:underline text-left",children:O.firstName})}),s.jsx(be,{children:s.jsx("span",{className:"text-sm text-foreground",children:O.lastName})}),s.jsx(be,{children:s.jsx("span",{className:"text-sm capitalize",children:O.gender||"-"})}),s.jsx(be,{children:O.hasOwnTransport==="yes-car"?s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsxs(ne,{className:"bg-blue-100 text-blue-700 border-blue-200 text-xs",children:[s.jsx(si,{className:"w-3 h-3 mr-1"}),"Vehicle"]}),(D=O.vehicleDisclaimer)!=null&&D.accepted?s.jsxs(ne,{className:"bg-emerald-100 text-emerald-700 border-emerald-200 text-xs",children:[s.jsx(mr,{className:"w-3 h-3 mr-1"}),"Insured "]}):s.jsx(ne,{variant:"outline",className:"text-amber-600 border-amber-300 text-xs",children:"No Disclaimer"})]}):O.hasOwnTransport==="yes-transit"?s.jsx(ne,{variant:"outline",className:"text-xs",children:"Transit"}):s.jsx("span",{className:"text-muted-foreground text-sm",children:"-"})}),s.jsx(be,{children:s.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[O.languages.length>0?O.languages.slice(0,3).map(I=>s.jsx(ne,{variant:"secondary",className:"text-xs",children:Vd(I)},I)):s.jsx("span",{className:"text-muted-foreground text-sm",children:"-"}),O.languages.length>3&&s.jsxs(ne,{variant:"outline",className:"text-xs",children:["+",O.languages.length-3]})]})}),s.jsx(be,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(St,{className:"w-3 h-3 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:O.homeCity||"-"})]})}),s.jsx(be,{children:s.jsxs("button",{onClick:()=>j(O),className:"flex items-center gap-1 text-sm text-primary hover:underline font-mono",title:"View on map",children:[O.homePostalCode||"-",s.jsx(go,{className:"w-3 h-3"})]})}),s.jsx(be,{children:s.jsxs("a",{href:`tel:${O.phone.replace(/[^\d+]/g,"")}`,className:"flex items-center gap-1 text-primary hover:underline font-medium text-sm",children:[s.jsx(Fn,{className:"w-3 h-3"}),O.phone]})}),s.jsx(be,{children:w(E)}),s.jsx(be,{className:"text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-1",children:[s.jsx(K,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>y(O),title:"View Profile",children:s.jsx(Ms,{className:"w-4 h-4"})}),E==="approved"&&s.jsxs(s.Fragment,{children:[s.jsx(K,{variant:"ghost",size:"icon",className:"h-8 w-8 text-amber-600 hover:text-amber-700 hover:bg-amber-50",onClick:()=>b(O,"flag"),title:"Flag",children:s.jsx(oee,{className:"w-4 h-4"})}),s.jsx(K,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>b(O,"deactivate"),title:"Deactivate",children:s.jsx(Xn,{className:"w-4 h-4"})})]}),E==="flagged"&&s.jsxs(s.Fragment,{children:[s.jsx(K,{variant:"ghost",size:"icon",className:"h-8 w-8 text-emerald-600 hover:text-emerald-700 hover:bg-emerald-50",onClick:()=>b(O,"reinstate"),title:"Reinstate",children:s.jsx(Qa,{className:"w-4 h-4"})}),s.jsx(K,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>b(O,"deactivate"),title:"Deactivate",children:s.jsx(Xn,{className:"w-4 h-4"})})]}),E==="deactivated"&&s.jsx(K,{variant:"ghost",size:"icon",className:"h-8 w-8 text-blue-600 hover:text-blue-700 hover:bg-blue-50",onClick:()=>b(O,"reinstate"),title:"Reinstate",children:s.jsx(Qa,{className:"w-4 h-4"})})]})})]},O.id)})})]})})})]}),s.jsx(Ixe,{}),r&&a&&s.jsx(rge,{profile:r,isOpen:a,onClose:()=>i(!1),onProfileUpdate:v}),r&&s.jsx(nge,{open:c,onOpenChange:d,action:h,pswId:r.id,pswName:`${r.firstName} ${r.lastName}`,pswEmail:r.email,onSuccess:N})]})};var BW="AlertDialog",[Dxe,Cze]=sn(BW,[b7]),jl=b7(),zW=e=>{const{__scopeAlertDialog:t,...r}=e,n=jl(t);return s.jsx(D7,{...n,...r,modal:!0})};zW.displayName=BW;var $xe="AlertDialogTrigger",UW=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=jl(r);return s.jsx($7,{...a,...n,ref:t})});UW.displayName=$xe;var Lxe="AlertDialogPortal",WW=e=>{const{__scopeAlertDialog:t,...r}=e,n=jl(t);return s.jsx(L7,{...n,...r})};WW.displayName=Lxe;var Fxe="AlertDialogOverlay",HW=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=jl(r);return s.jsx(nE,{...a,...n,ref:t})});HW.displayName=Fxe;var jh="AlertDialogContent",[Bxe,zxe]=Dxe(jh),Uxe=CF("AlertDialogContent"),VW=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...a}=e,i=jl(r),o=x.useRef(null),l=nt(t,o),c=x.useRef(null);return s.jsx(Ece,{contentName:jh,titleName:qW,docsSlug:"alert-dialog",children:s.jsx(Bxe,{scope:r,cancelRef:c,children:s.jsxs(sE,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:Ie(a.onOpenAutoFocus,d=>{var h;d.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[s.jsx(Uxe,{children:n}),s.jsx(Hxe,{contentRef:o})]})})})});VW.displayName=jh;var qW="AlertDialogTitle",GW=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=jl(r);return s.jsx(aE,{...a,...n,ref:t})});GW.displayName=qW;var KW="AlertDialogDescription",YW=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=jl(r);return s.jsx(iE,{...a,...n,ref:t})});YW.displayName=KW;var Wxe="AlertDialogAction",ZW=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=jl(r);return s.jsx(Fw,{...a,...n,ref:t})});ZW.displayName=Wxe;var XW="AlertDialogCancel",JW=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:a}=zxe(XW,r),i=jl(r),o=nt(t,a);return s.jsx(Fw,{...i,...n,ref:o})});JW.displayName=XW;var Hxe=({contentRef:e})=>{const t=`\`${jh}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${jh}\` by passing a \`${KW}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${jh}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return x.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},Vxe=zW,qxe=UW,Gxe=WW,QW=HW,eH=VW,tH=ZW,rH=JW,nH=GW,sH=YW;const di=Vxe,DI=qxe,Kxe=Gxe,aH=x.forwardRef(({className:e,...t},r)=>s.jsx(QW,{className:Re("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));aH.displayName=QW.displayName;const Ia=x.forwardRef(({className:e,...t},r)=>s.jsxs(Kxe,{children:[s.jsx(aH,{}),s.jsx(eH,{ref:r,className:Re("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Ia.displayName=eH.displayName;const ks=({className:e,...t})=>s.jsx("div",{className:Re("flex flex-col space-y-2 text-center sm:text-left",e),...t});ks.displayName="AlertDialogHeader";const Es=({className:e,...t})=>s.jsx("div",{className:Re("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Es.displayName="AlertDialogFooter";const Ts=x.forwardRef(({className:e,...t},r)=>s.jsx(nH,{ref:r,className:Re("text-lg font-semibold",e),...t}));Ts.displayName=nH.displayName;const As=x.forwardRef(({className:e,...t},r)=>s.jsx(sH,{ref:r,className:Re("text-sm text-muted-foreground",e),...t}));As.displayName=sH.displayName;const Os=x.forwardRef(({className:e,...t},r)=>s.jsx(tH,{ref:r,className:Re(lg(),e),...t}));Os.displayName=tH.displayName;const Ra=x.forwardRef(({className:e,...t},r)=>s.jsx(rH,{ref:r,className:Re(lg({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Ra.displayName=rH.displayName;const Np=75,vg=5,Nh=75,q0=5;let Ly=null;const iH=async()=>{try{const{data:e,error:t}=await de.from("app_settings").select("setting_value").eq("setting_key","active_service_radius").maybeSingle();if(t)return console.error("Error fetching active_service_radius:",t),Ly??Np;if(e!=null&&e.setting_value){const r=parseInt(e.setting_value,10);if(!isNaN(r)&&r>=vg&&r<=Nh)return Ly=r,r}return Np}catch(e){return console.error("Error fetching active_service_radius:",e),Ly??Np}},oH=async e=>{try{if(e<vg||e>Nh)return console.error("Invalid radius value:",e),!1;const t=Math.round(e/q0)*q0;console.log("Updating active_service_radius to:",t);const{data:r,error:n}=await de.from("app_settings").upsert({setting_key:"active_service_radius",setting_value:t.toString(),updated_at:new Date().toISOString()},{onConflict:"setting_key"}).select();return n?(console.error("Error updating active_service_radius:",n.message,n.details,n.hint),!1):(console.log("Successfully updated active_service_radius:",r),Ly=t,!0)}catch(t){return console.error("Error updating active_service_radius:",t),!1}},fT=(e,t,r,n)=>{const i=(r-e)*Math.PI/180,o=(n-t)*Math.PI/180,l=Math.sin(i/2)*Math.sin(i/2)+Math.cos(e*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2);return 6371*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))},Yxe=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_SERVICE_RADIUS_KM:Np,MAX_SERVICE_RADIUS_KM:Nh,MIN_SERVICE_RADIUS_KM:vg,RADIUS_INCREMENT_KM:q0,calculateHaversineDistance:fT,fetchActiveServiceRadius:iH,updateActiveServiceRadius:oH},Symbol.toStringTag,{value:"Module"})),mT=()=>{const[e,t]=x.useState(Np),[r,n]=x.useState(!0),[a,i]=x.useState(!1),o=x.useCallback(async()=>{n(!0);const c=await iH();t(c),n(!1)},[]);x.useEffect(()=>{o()},[o]),x.useEffect(()=>{const c=de.channel("active_service_radius_changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"app_settings",filter:"setting_key=eq.active_service_radius"},d=>{const h=parseInt(d.new.setting_value,10);isNaN(h)||t(h)}).subscribe();return()=>{de.removeChannel(c)}},[]);const l=x.useCallback(async c=>{i(!0);const d=await oH(c);return d&&t(c),i(!1),d},[]);return{radius:e,isLoading:r,isSaving:a,setActiveRadius:l,refreshRadius:o}},Zxe=({firstName:e,lastName:t,pswNumber:r})=>{const n=LE(),[a,i]=x.useState(Ea);return x.useEffect(()=>{Kf().then(i)},[]),s.jsxs(J,{className:"border-2 border-dashed border-green-300 bg-green-50/50",children:[s.jsx(ke,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Ee,{className:"text-base flex items-center gap-2",children:" Email Preview"}),s.jsx(ne,{variant:"secondary",className:"text-xs",children:"Will be sent on approval"})]})}),s.jsxs(Q,{className:"space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Subject:"}),s.jsx("p",{className:"font-medium",children:" Welcome to PSA Direct - You're Approved!"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm space-y-4",children:[s.jsxs("p",{children:["Hi ",s.jsx("strong",{children:e}),","]}),s.jsxs("p",{children:["Welcome to the team! ",s.jsx("strong",{children:"You are now approved to accept jobs in the Toronto/GTA area."})]}),r&&s.jsxs("div",{className:"bg-green-50 border-2 border-green-500 rounded-xl p-4",children:[s.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"Your PSA Direct Details"}),s.jsxs("p",{className:"text-sm",children:[s.jsx("strong",{children:"PSW Number:"})," ",s.jsxs("span",{className:"text-green-600 font-bold text-lg",children:["PSW-",r]})]}),s.jsxs("p",{className:"text-sm",children:[s.jsx("strong",{children:"Name:"})," ",e," ",t]}),s.jsxs("p",{className:"text-sm",children:[s.jsx("strong",{children:"Status:"}),"  Approved / Activated"]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6 text-center",children:[s.jsx("h3",{className:"font-semibold text-green-800 mb-3",children:" Login to Start"}),s.jsx("p",{className:"text-sm text-green-700 mb-4",children:"Scan to go directly to login:"}),s.jsx("div",{className:"inline-block bg-white p-4 rounded-lg shadow-md",children:s.jsx(DE,{value:n,size:140,level:"H",includeMargin:!1,bgColor:"#ffffff",fgColor:"#16a34a",imageSettings:{src:"/logo-192.png",height:32,width:32,excavate:!0}})}),s.jsxs("p",{className:"text-xs text-green-600 mt-3",children:[s.jsx("strong",{children:"Tip:"}),' After logging in, tap "Add to Home Screen" to install the app!']})]}),s.jsxs("div",{className:"bg-amber-50 border-l-4 border-amber-500 p-3 rounded-r-lg",children:[s.jsx("p",{className:"text-sm font-medium text-amber-800",children:" Professional Standards"}),s.jsx("p",{className:"text-xs text-amber-700 mt-1",children:"Any missed or late shifts will result in immediate removal from the platform."})]}),s.jsxs("div",{className:"bg-slate-50 rounded-lg p-3",children:[s.jsxs("p",{className:"text-sm",children:[" Office: ",s.jsx("strong",{className:"text-green-600",children:a})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Use for all follow-ups"})]})]}),s.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"This email will be sent automatically when you approve this PSW"})]})]})},Xxe=["Missing/Invalid ID","Missing PSW Certificate / Diploma","Missing Vulnerable Sector Police Check","Police Check expired / unclear","Missing HSCPOA Registration","Missing CPR/First Aid (if required)","Incomplete profile information","Missing availability / schedule","Missing work experience details","Incomplete references","Photo missing / unclear","Duplicate account","Other (see notes)"],Jxe=({open:e,onOpenChange:t,rejectionType:r,pswName:n,onConfirm:a,isLoading:i=!1})=>{const[o,l]=x.useState([]),[c,d]=x.useState(""),h=b=>{l(N=>N.includes(b)?N.filter(j=>j!==b):[...N,b])},f=()=>{a(o,c),l([]),d("")},m=b=>{b||(l([]),d("")),t(b)},p=r==="needs_update",y=o.includes("Other (see notes)"),v=o.length>0&&(!y||c.trim().length>0);return s.jsx(hr,{open:e,onOpenChange:m,children:s.jsxs(or,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[s.jsxs(lr,{children:[s.jsxs(cr,{className:"flex items-center gap-2",children:[p?s.jsx(At,{className:"w-5 h-5 text-amber-500"}):s.jsx(Xn,{className:"w-5 h-5 text-destructive"}),p?"Request Update":"Final Rejection","  ",n]}),s.jsx(bo,{children:p?"Select the items that need to be updated. The PSW will receive an email with these items and can resubmit.":"Select reasons for final rejection. This cannot be undone without admin reinstatement."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(ne,{className:p?"bg-amber-100 text-amber-700 border-amber-200":"bg-red-100 text-red-700 border-red-200",children:p?"Reject  Needs Update":"Reject  Final"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{className:"font-semibold",children:"Select missing / incomplete items:"}),s.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto border rounded-lg p-3",children:Xxe.map(b=>s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Co,{id:`reason-${b}`,checked:o.includes(b),onCheckedChange:()=>h(b)}),s.jsx(oe,{htmlFor:`reason-${b}`,className:"text-sm cursor-pointer leading-tight",children:b})]},b))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(oe,{children:["Additional Notes ",y?"(required)":"(optional)"]}),s.jsx(_n,{value:c,onChange:b=>d(b.target.value),placeholder:"Add specific details about what needs to be updated...",rows:3})]})]}),s.jsxs(yo,{className:"gap-2 sm:gap-0",children:[s.jsx(K,{variant:"outline",onClick:()=>m(!1),disabled:i,children:"Cancel"}),s.jsx(K,{onClick:f,disabled:!v||i,className:p?"bg-amber-600 hover:bg-amber-700":"bg-destructive hover:bg-destructive/90",children:i?"Processing...":s.jsxs(s.Fragment,{children:[s.jsx(pw,{className:"w-4 h-4 mr-1"}),p?"Send Update Request":"Reject  Final"]})})]})]})})},Qxe=()=>{const[e,t]=x.useState([]),[r,n]=x.useState([]),[a,i]=x.useState(null),[o,l]=x.useState(!1),[c,d]=x.useState(!1),[h,f]=x.useState("needs_update"),[m,p]=x.useState(null),[y,v]=x.useState(null),[b,N]=x.useState(""),[j,w]=x.useState(""),[S,C]=x.useState(null),[P,T]=x.useState("awaiting-review"),[O,E]=x.useState(!1),[D,I]=x.useState(!1),[A,V]=x.useState(!1),[U,$]=x.useState(!1),{radius:H}=mT();x.useEffect(()=>{R()},[]),x.useEffect(()=>{P==="archived"&&z()},[P]);const F=B=>({id:B.id,firstName:B.first_name,lastName:B.last_name,email:B.email,phone:B.phone||"",gender:B.gender||void 0,languages:B.languages||["en"],homePostalCode:B.home_postal_code||"",homeCity:B.home_city||"",profilePhotoUrl:B.profile_photo_url||void 0,profilePhotoName:B.profile_photo_name||void 0,hscpoaNumber:B.hscpoa_number||void 0,policeCheckUrl:B.police_check_url||void 0,policeCheckName:B.police_check_name||void 0,policeCheckDate:B.police_check_date||void 0,vehiclePhotoUrl:B.vehicle_photo_url||void 0,vehiclePhotoName:B.vehicle_photo_name||void 0,yearsExperience:B.years_experience||void 0,certifications:B.certifications||void 0,hasOwnTransport:B.has_own_transport||void 0,licensePlate:B.license_plate||void 0,availableShifts:B.available_shifts||void 0,vehicleDisclaimer:B.vehicle_disclaimer||void 0,vettingStatus:B.vetting_status,vettingNotes:B.vetting_notes||void 0,vettingUpdatedAt:B.vetting_updated_at||void 0,appliedAt:B.applied_at||new Date().toISOString(),approvedAt:B.approved_at||void 0,expiredDueToPoliceCheck:B.expired_due_to_police_check||!1,govIdType:B.gov_id_type||"missing",govIdUrl:B.gov_id_url||void 0,govIdStatus:B.gov_id_status||"missing",govIdReviewedAt:B.gov_id_reviewed_at||void 0,govIdNotes:B.gov_id_notes||void 0,rejectionReasons:B.rejection_reasons||void 0,rejectionNotes:B.rejection_notes||void 0,rejectedAt:B.rejected_at||void 0,resubmittedAt:B.resubmitted_at||void 0,applicationVersion:B.application_version||1}),R=async()=>{try{const{data:B,error:ve}=await de.from("psw_profiles").select("*").in("vetting_status",["pending","rejected_needs_update"]).order("applied_at",{ascending:!1});if(ve)throw ve;t((B||[]).map(F))}catch(B){console.error("Error loading pending profiles:",B),Z.error("Failed to load pending profiles")}},z=async()=>{E(!0);try{const{data:B,error:ve}=await de.from("psw_profiles").select("*").in("vetting_status",["rejected","rejected_final","deactivated"]).order("vetting_updated_at",{ascending:!1});if(ve)throw ve;n((B||[]).map(F))}catch(B){console.error("Error loading archived profiles:",B),Z.error("Failed to load archived profiles")}finally{E(!1)}},G=e,ie=x.useMemo(()=>{let B=G;if(U&&(B=B.filter(Fe=>Fe.vettingStatus==="rejected_needs_update")),!b.trim())return B;const ve=b.toLowerCase();return B.filter(Fe=>{const st=`${Fe.firstName} ${Fe.lastName}`.toLowerCase(),pt=(Fe.homeCity||"").toLowerCase(),et=Fe.languages.map(Zt=>Vd(Zt).toLowerCase()).join(" ");return st.includes(ve)||pt.includes(ve)||et.includes(ve)||Fe.phone.includes(ve)})},[G,b,U]),ae=x.useMemo(()=>{if(!j.trim())return r;const B=j.toLowerCase();return r.filter(ve=>`${ve.firstName} ${ve.lastName}`.toLowerCase().includes(B)||ve.email.toLowerCase().includes(B)||ve.phone.includes(B))},[r,j]),X=r.filter(B=>B.vettingStatus==="rejected"||B.vettingStatus==="rejected_final").length,le=r.filter(B=>B.vettingStatus==="deactivated").length,fe=e.filter(B=>B.vettingStatus==="rejected_needs_update").length,ge=B=>{i(B),l(!0)},ee=B=>{i(B),f("needs_update"),d(!0)},re=B=>{i(B),f("final"),d(!0)},ue=async()=>{if(a){if(a.govIdStatus!=="verified"){Z.error("Government ID must be verified before approval",{description:"Please review and verify the PSW's government ID first."}),l(!1);return}try{let B=null;const{data:ve}=await de.from("psw_profiles").select("psw_number").eq("id",a.id).single();if(ve!=null&&ve.psw_number)B=ve.psw_number;else{const{data:pt}=await de.from("psw_profiles").select("psw_number").not("psw_number","is",null).order("psw_number",{ascending:!1}).limit(1).single();B=((pt==null?void 0:pt.psw_number)||1e3)+1}const{error:Fe}=await de.from("psw_profiles").update({vetting_status:"approved",vetting_notes:"Approved by admin",vetting_updated_at:new Date().toISOString(),approved_at:new Date().toISOString(),last_status_change_at:new Date().toISOString(),rejection_reasons:null,rejection_notes:null,rejected_at:null,...B&&!(ve!=null&&ve.psw_number)?{psw_number:B}:{}}).eq("id",a.id);if(Fe)throw Fe;const st=B?`PSW-${B}`:"";await de.from("psw_status_audit").insert({psw_id:a.id,psw_name:`${a.firstName} ${a.lastName}`,psw_email:a.email,action:"activated",reason:`Approved by admin${st?`  assigned ${st}`:""}`,performed_by:"admin"}),Jk(a.id,"approved","Approved by admin");try{await _z(a.email,a.phone,a.firstName,a.lastName,B)}catch(pt){console.warn("Approval email failed (non-blocking):",pt)}Z.success(`${a.firstName} ${a.lastName} has been approved!${st?` (${st})`:""}`,{description:"Welcome email with QR code has been sent."})}catch(B){console.error("Approval error:",B),Z.error("Failed to approve application",{description:B.message})}finally{l(!1),i(null),R()}}},Ne=async(B,ve)=>{if(!a)return;V(!0);const Fe=h==="needs_update"?"rejected_needs_update":"rejected_final",st=B.join("; ")+(ve?`  ${ve}`:"");try{const{error:pt}=await de.from("psw_profiles").update({vetting_status:Fe,vetting_notes:st,vetting_updated_at:new Date().toISOString(),rejection_reasons:B,rejection_notes:ve||null,rejected_at:new Date().toISOString(),last_status_change_at:new Date().toISOString()}).eq("id",a.id);if(pt)throw pt;if(await de.from("psw_status_audit").insert({psw_id:a.id,psw_name:`${a.firstName} ${a.lastName}`,psw_email:a.email,action:h==="needs_update"?"rejected_needs_update":"rejected_final",reason:st,performed_by:"admin"}),h==="needs_update")try{await de.functions.invoke("send-email",{body:{to:a.email,subject:"Your PSA Direct Application Needs Updates",html:`<p>Hi ${a.firstName},</p>
<p>Your application to join PSA Direct needs some updates before we can proceed:</p>
<ul>${B.map(et=>`<li>${et}</li>`).join("")}</ul>
${ve?`<p><strong>Additional notes:</strong> ${ve}</p>`:""}
<p>Please log in and update your application:</p>
<p><a href="https://psadirect.ca/psw-login" style="display:inline-block;padding:12px 24px;background:#2563eb;color:#fff;border-radius:8px;text-decoration:none;font-weight:600;">Update Your Application</a></p>
<p>Once updated, click "Resubmit Application" and our team will review it again.</p>
<p>Questions? Call us at (249) 288-4787</p>`}})}catch(et){console.warn("Update-required email failed:",et)}Z.success(h==="needs_update"?`Update request sent to ${a.firstName}`:`Application from ${a.firstName} rejected (final).`)}catch(pt){console.error("Rejection error:",pt),Z.error("Failed to process rejection")}finally{V(!1),d(!1),i(null),R(),h==="final"&&z()}},je=async B=>{I(!0);try{const{error:ve}=await de.from("psw_profiles").update({vetting_status:"pending",vetting_notes:`Reinstated from ${B.vettingStatus} for re-review`,vetting_updated_at:new Date().toISOString(),last_status_change_at:new Date().toISOString(),rejection_reasons:null,rejection_notes:null,rejected_at:null}).eq("id",B.id);if(ve)throw ve;await de.from("psw_status_audit").insert({psw_id:B.id,psw_name:`${B.firstName} ${B.lastName}`,psw_email:B.email,action:"reinstated_to_pending",reason:`Reinstated from ${B.vettingStatus}`,performed_by:"admin"}),Z.success(`${B.firstName} ${B.lastName} moved back to Pending Review`),R(),z()}catch(ve){console.error("Reinstatement error:",ve),Z.error("Failed to reinstate PSW")}finally{I(!1),p(null)}},Y=B=>new Date(B).toLocaleDateString("en-CA",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),xe=B=>B?new Date(B).toLocaleDateString("en-CA",{month:"short",day:"numeric",year:"numeric"}):"",Me=B=>{switch(B){case"0-1":return"< 1 year";case"1-3":return"1-3 years";case"3-5":return"3-5 years";case"5+":return"5+ years";default:return B||"Not specified"}},$e=B=>{switch(B){case"yes-car":return"Has car";case"yes-transit":return"Public transit";case"no":return"No transportation";default:return B||"Not specified"}},ce=B=>{const ve=e.find(Fe=>Fe.id===B);return{street:"",city:(ve==null?void 0:ve.homeCity)||"Unknown",postalCode:(ve==null?void 0:ve.homePostalCode)||""}},Le=B=>{if(!B)return{withinRadius:!1,message:"No postal code provided"};const ve=e.filter(pt=>pt.vettingStatus==="approved"&&pt.homePostalCode);if(ve.length===0)return{withinRadius:!0,message:"First PSW applicant in this area"};let Fe=null,st=null;for(const pt of ve){const et=pE(B,pt.homePostalCode||"");et!==null&&(Fe===null||et<Fe)&&(Fe=et,st=pt.homeCity||null)}return Fe!==null&&Fe<=H?{withinRadius:!0,message:`Within ${Math.round(Fe)}km of ${st||"approved PSW"}`}:Fe!==null?{withinRadius:!1,message:`${Math.round(Fe)}km from nearest PSW coverage`}:{withinRadius:!1,message:"Unable to verify location"}},qe=B=>{const ve=ce(B),Fe=encodeURIComponent(`${ve.street}, ${ve.city}, ON ${ve.postalCode}`);window.open(`https://www.google.com/maps/search/?api=1&query=${Fe}`,"_blank")},Xe=(B,ve)=>`${B.charAt(0)}${ve.charAt(0)}`.toUpperCase(),Et=B=>B.vettingStatus==="rejected_needs_update"?s.jsxs(ne,{className:"bg-amber-100 text-amber-700 border-amber-200",children:[s.jsx(Nr,{className:"w-3 h-3 mr-1"}),"Needs Update ",B.applicationVersion&&B.applicationVersion>1?`(v${B.applicationVersion})`:""]}):s.jsx(ne,{variant:"outline",className:"bg-amber-50 text-amber-700 border-amber-200",children:"Pending Review"});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Pending Review"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Review applications and view archived records"})]}),s.jsxs(qi,{value:P,onValueChange:T,children:[s.jsxs(ii,{className:"grid w-full grid-cols-2",children:[s.jsxs(ft,{value:"awaiting-review",className:"gap-2",children:[s.jsx(Qe,{className:"w-4 h-4"}),"Awaiting Review",G.length>0&&s.jsx(ne,{variant:"secondary",className:"ml-1 h-5 px-1.5 text-xs",children:G.length})]}),s.jsxs(ft,{value:"archived",className:"gap-2",children:[s.jsx(ya,{className:"w-4 h-4"}),"Archived",r.length>0&&s.jsx(ne,{variant:"secondary",className:"ml-1 h-5 px-1.5 text-xs",children:r.length})]})]}),s.jsx(Ct,{value:"awaiting-review",className:"mt-6 space-y-6",children:G.length===0&&!b?s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"py-12 text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto rounded-full bg-muted flex items-center justify-center mb-4",children:s.jsx(Qe,{className:"w-8 h-8 text-muted-foreground"})}),s.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No Pending Applications"}),s.jsx("p",{className:"text-muted-foreground",children:"All PSW applications have been reviewed."})]})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Js,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(pe,{placeholder:"Search by name, city, or language...",value:b,onChange:B=>N(B.target.value),className:"pl-10"})]}),fe>0&&s.jsxs(K,{variant:U?"default":"outline",size:"sm",onClick:()=>$(!U),className:"gap-1 whitespace-nowrap",children:[s.jsx(mw,{className:"w-4 h-4"}),"Needs Update (",fe,")"]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(J,{className:"shadow-card",children:s.jsx(Q,{className:"py-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center",children:s.jsx(Qe,{className:"w-5 h-5 text-amber-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-foreground",children:e.filter(B=>B.vettingStatus==="pending").length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"New Applications"})]})]})})}),s.jsx(J,{className:"shadow-card",children:s.jsx(Q,{className:"py-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center",children:s.jsx(Nr,{className:"w-5 h-5 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-foreground",children:fe}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Needs Update"})]})]})})})]}),s.jsx("div",{className:"space-y-4",children:ie.length===0?s.jsx(J,{className:"shadow-card",children:s.jsx(Q,{className:"py-8 text-center text-muted-foreground",children:"No applicants match your search"})}):ie.map(B=>{const ve=y===B.id,Fe=ce(B.id),st=Le(Fe.postalCode),pt=B.vettingStatus==="rejected_needs_update";return s.jsxs(J,{className:`shadow-card overflow-hidden ${pt?"border-amber-300 bg-amber-50/30 dark:bg-amber-950/10":""}`,children:[s.jsx(ke,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(oi,{className:"h-14 w-14 ring-2 ring-offset-2 ring-amber-200",children:[B.profilePhotoUrl?s.jsx(li,{src:B.profilePhotoUrl,alt:B.firstName}):null,s.jsx(ci,{className:"bg-amber-100 text-amber-700 font-semibold",children:Xe(B.firstName,B.lastName)})]}),s.jsxs("div",{children:[s.jsxs(Ee,{className:"text-lg",children:[B.firstName," ",B.lastName]}),s.jsxs(Ge,{className:"flex items-center gap-1",children:[s.jsx(Qe,{className:"w-3 h-3"}),"Applied ",Y(B.appliedAt),B.applicationVersion&&B.applicationVersion>1&&s.jsxs("span",{className:"ml-2 text-xs font-medium text-amber-600",children:["v",B.applicationVersion]})]})]})]}),Et(B)]})}),s.jsxs(Q,{className:"space-y-4",children:[pt&&B.rejectionReasons&&B.rejectionReasons.length>0&&s.jsx(J,{className:"border-amber-200 bg-amber-50 dark:bg-amber-950/20",children:s.jsxs(Q,{className:"p-3 space-y-2",children:[s.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Items needing update:"}),s.jsx("ul",{className:"list-disc list-inside text-sm text-amber-700 dark:text-amber-300 space-y-0.5",children:B.rejectionReasons.map((et,Zt)=>s.jsx("li",{children:et},Zt))}),B.rejectionNotes&&s.jsxs("p",{className:"text-sm text-amber-600 dark:text-amber-400 italic",children:["Notes: ",B.rejectionNotes]}),B.resubmittedAt&&s.jsxs("p",{className:"text-xs text-emerald-600 font-medium mt-1",children:[" Resubmitted ",xe(B.resubmittedAt)]})]})}),s.jsx(J,{className:"border-2 border-primary/20 bg-primary/5",children:s.jsxs(Q,{className:"p-4 space-y-3",children:[s.jsxs("h4",{className:"font-semibold text-foreground flex items-center gap-2",children:[s.jsx(mr,{className:"w-4 h-4 text-primary"}),"Vetting Checklist"]}),s.jsxs("div",{className:"flex items-center justify-between p-2 bg-background rounded",children:[s.jsx("span",{className:"text-sm font-medium",children:"HSCPOA Registration"}),B.hscpoaNumber?s.jsx(ne,{variant:"outline",className:"font-mono text-emerald-600 bg-emerald-50 border-emerald-200",children:B.hscpoaNumber}):s.jsx(ne,{variant:"outline",className:"text-amber-600 bg-amber-50 border-amber-200",children:"Not provided"})]}),s.jsxs("div",{className:"flex items-center justify-between p-2 bg-background rounded",children:[s.jsx("span",{className:"text-sm font-medium",children:"Police Check (VSS)"}),B.policeCheckUrl?s.jsxs(K,{variant:"outline",size:"sm",onClick:()=>window.open(B.policeCheckUrl,"_blank"),className:"gap-1 text-emerald-600 border-emerald-300",children:[s.jsx(zt,{className:"w-3 h-3"}),"View PDF"]}):s.jsx(ne,{variant:"outline",className:"text-amber-600 bg-amber-50 border-amber-200",children:"Not uploaded"})]}),B.hasOwnTransport==="yes-car"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between p-2 bg-background rounded",children:[s.jsx("span",{className:"text-sm font-medium",children:"Vehicle Photo"}),B.vehiclePhotoUrl?s.jsxs(K,{variant:"outline",size:"sm",onClick:()=>C(B),className:"gap-1 text-emerald-600 border-emerald-300",children:[s.jsx(qs,{className:"w-3 h-3"}),"View Photo"]}):s.jsx(ne,{variant:"outline",className:"text-red-600 bg-red-50 border-red-200",children:"Not uploaded"})]}),s.jsxs("div",{className:"flex items-center justify-between p-2 bg-background rounded",children:[s.jsx("span",{className:"text-sm font-medium",children:"License Plate"}),B.licensePlate?s.jsx(ne,{variant:"outline",className:"font-mono text-emerald-600 bg-emerald-50 border-emerald-200",children:B.licensePlate}):s.jsx(ne,{variant:"outline",className:"text-red-600 bg-red-50 border-red-200",children:"Not provided"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-2 bg-background rounded",children:[s.jsx("span",{className:"text-sm font-medium",children:"Government ID"}),B.govIdStatus==="verified"?s.jsxs(ne,{variant:"outline",className:"text-emerald-600 bg-emerald-50 border-emerald-200 gap-1",children:[s.jsx(tn,{className:"w-3 h-3"}),"Verified"]}):B.govIdStatus==="uploaded"?s.jsx("div",{className:"flex items-center gap-1",children:s.jsx(ne,{variant:"outline",className:"text-blue-600 bg-blue-50 border-blue-200",children:"Uploaded  Needs Review"})}):B.govIdStatus==="rejected"?s.jsxs(ne,{variant:"outline",className:"text-red-600 bg-red-50 border-red-200 gap-1",children:[s.jsx(Hr,{className:"w-3 h-3"}),"Rejected"]}):s.jsx(ne,{variant:"outline",className:"text-red-600 bg-red-50 border-red-200",children:"Not uploaded"})]}),B.govIdType&&B.govIdType!=="missing"&&s.jsxs("div",{className:"flex items-center justify-between p-2 bg-background rounded",children:[s.jsx("span",{className:"text-sm font-medium",children:"ID Type"}),s.jsx("span",{className:"text-sm text-muted-foreground capitalize",children:B.govIdType.replace(/_/g," ")})]}),(B.govIdStatus==="uploaded"||B.govIdStatus==="verified"||B.govIdStatus==="rejected")&&B.govIdUrl&&s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-background rounded",children:[s.jsxs(K,{variant:"outline",size:"sm",onClick:async()=>{const{data:et}=await de.storage.from("psw-documents").createSignedUrl(B.govIdUrl,3600);et!=null&&et.signedUrl?window.open(et.signedUrl,"_blank"):Z.error("Could not generate viewing link")},className:"gap-1 text-blue-600 border-blue-300",children:[s.jsx(zt,{className:"w-3 h-3"}),"View ID"]}),B.govIdStatus!=="verified"&&s.jsxs(K,{variant:"outline",size:"sm",onClick:async()=>{await de.from("psw_profiles").update({gov_id_status:"verified",gov_id_reviewed_at:new Date().toISOString()}).eq("id",B.id),await de.from("psw_status_audit").insert({psw_id:B.id,psw_name:`${B.firstName} ${B.lastName}`,psw_email:B.email,action:"gov_id_verified",reason:"Government ID verified by admin",performed_by:"admin"}),Z.success("Government ID verified"),R()},className:"gap-1 text-emerald-600 border-emerald-300",children:[s.jsx(tn,{className:"w-3 h-3"}),"Verify ID"]}),B.govIdStatus!=="rejected"&&s.jsxs(K,{variant:"outline",size:"sm",onClick:async()=>{const et=prompt("Reason for rejecting ID:");et!==null&&(await de.from("psw_profiles").update({gov_id_status:"rejected",gov_id_reviewed_at:new Date().toISOString(),gov_id_notes:et||"Rejected by admin"}).eq("id",B.id),await de.from("psw_status_audit").insert({psw_id:B.id,psw_name:`${B.firstName} ${B.lastName}`,psw_email:B.email,action:"gov_id_rejected",reason:et||"Rejected by admin",performed_by:"admin"}),Z.success("Government ID rejected"),R())},className:"gap-1 text-red-600 border-red-300",children:[s.jsx(Hr,{className:"w-3 h-3"}),"Reject ID"]})]}),B.govIdNotes&&s.jsxs("p",{className:"text-xs text-muted-foreground px-2",children:["ID Note: ",B.govIdNotes]})]})}),s.jsx("div",{className:"p-3 bg-muted/50 rounded-lg",children:s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(St,{className:"w-4 h-4 text-muted-foreground mt-0.5 shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-foreground",children:Fe.street}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[Fe.city,", ON ",Fe.postalCode]}),s.jsx("div",{className:"mt-1",children:st.withinRadius?s.jsxs("span",{className:"text-xs text-emerald-600 flex items-center gap-1",children:[s.jsx(tn,{className:"w-3 h-3"}),"Within service area"]}):s.jsxs("span",{className:"text-xs text-amber-600 flex items-center gap-1",children:[s.jsx(At,{className:"w-3 h-3"}),st.message||"Outside service area"]})})]})]}),s.jsxs(K,{variant:"outline",size:"sm",onClick:()=>qe(B.id),className:"shrink-0 gap-1",children:[s.jsx(go,{className:"w-3 h-3"}),"Map"]})]})}),s.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[s.jsxs("a",{href:`tel:${B.phone.replace(/[^\d+]/g,"")}`,className:"flex items-center gap-2 text-primary hover:underline font-medium",children:[s.jsx(Fn,{className:"w-4 h-4"}),B.phone]}),s.jsxs("a",{href:`mailto:${B.email}`,className:"flex items-center gap-2 text-muted-foreground hover:text-foreground",children:[s.jsx(hn,{className:"w-4 h-4"}),B.email]})]}),B.languages.length>0&&s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx(Oa,{className:"w-4 h-4 text-muted-foreground"}),B.languages.map(et=>s.jsx(ne,{variant:"secondary",className:"text-xs",children:Vd(et)},et))]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs(ne,{variant:"secondary",className:"gap-1",children:[s.jsx(lx,{className:"w-3 h-3"}),Me(B.yearsExperience)]}),s.jsxs(ne,{variant:"secondary",className:"gap-1",children:[s.jsx(si,{className:"w-3 h-3"}),$e(B.hasOwnTransport)]})]}),ve&&s.jsx("div",{className:"pt-4 border-t border-border space-y-4",children:B.certifications&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-foreground mb-1",children:"Certifications"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:B.certifications})]})}),s.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-border flex-wrap",children:[s.jsx(K,{variant:"ghost",size:"sm",onClick:()=>v(ve?null:B.id),children:ve?"Show Less":"More Details"}),s.jsx("div",{className:"flex-1"}),s.jsxs(K,{variant:"outline",size:"sm",onClick:()=>re(B),className:"text-destructive hover:text-destructive",children:[s.jsx(Xn,{className:"w-4 h-4 mr-1"}),"Reject Final"]}),s.jsxs(K,{variant:"outline",size:"sm",onClick:()=>ee(B),className:"text-amber-600 hover:text-amber-700 border-amber-300",children:[s.jsx(Nr,{className:"w-4 h-4 mr-1"}),"Needs Update"]}),s.jsxs(K,{variant:"brand",size:"sm",onClick:()=>ge(B),disabled:B.govIdStatus!=="verified",title:B.govIdStatus!=="verified"?"Gov ID must be verified first":"",children:[s.jsx(tn,{className:"w-4 h-4 mr-1"}),"Approve"]}),B.govIdStatus!=="verified"&&s.jsx("p",{className:"text-xs text-amber-600 w-full mt-1",children:" Gov ID must be verified before approval"})]})]})]},B.id)})})]})}),s.jsxs(Ct,{value:"archived",className:"mt-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(J,{className:"shadow-card",children:s.jsx(Q,{className:"py-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:s.jsx(Xn,{className:"w-5 h-5 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-foreground",children:X}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Rejected (Final)"})]})]})})}),s.jsx(J,{className:"shadow-card",children:s.jsx(Q,{className:"py-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:s.jsx(eM,{className:"w-5 h-5 text-gray-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-foreground",children:le}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Deactivated"})]})]})})})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Js,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(pe,{placeholder:"Search archived PSWs by name, email, or phone...",value:j,onChange:B=>w(B.target.value),className:"pl-10"})]}),O?s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"py-12 text-center",children:[s.jsx(Ut,{className:"w-8 h-8 mx-auto animate-spin text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading archived records..."})]})}):ae.length===0?s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"py-12 text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto rounded-full bg-muted flex items-center justify-center mb-4",children:s.jsx(ya,{className:"w-8 h-8 text-muted-foreground"})}),s.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No Archived Records"}),s.jsx("p",{className:"text-muted-foreground",children:j?"No records match your search":"Final-rejected and deactivated PSWs will appear here."})]})}):s.jsx(J,{className:"shadow-card overflow-hidden",children:s.jsxs(Sn,{children:[s.jsx(Cn,{children:s.jsxs(Mt,{children:[s.jsx(Pe,{children:"PSW"}),s.jsx(Pe,{children:"Status"}),s.jsx(Pe,{children:"Contact"}),s.jsx(Pe,{children:"Date"}),s.jsx(Pe,{children:"Reason"}),s.jsx(Pe,{className:"text-right",children:"Actions"})]})}),s.jsx(Pn,{children:ae.map(B=>s.jsxs(Mt,{children:[s.jsx(be,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(oi,{className:"h-10 w-10",children:[B.profilePhotoUrl?s.jsx(li,{src:B.profilePhotoUrl,alt:B.firstName}):null,s.jsx(ci,{className:B.vettingStatus==="rejected"||B.vettingStatus==="rejected_final"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700",children:Xe(B.firstName,B.lastName)})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium",children:[B.firstName," ",B.lastName]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:B.homeCity||""})]})]})}),s.jsx(be,{children:B.vettingStatus==="rejected"||B.vettingStatus==="rejected_final"?s.jsxs(ne,{variant:"destructive",className:"gap-1",children:[s.jsx(Xn,{className:"w-3 h-3"}),"Rejected"]}):s.jsxs(ne,{variant:"secondary",className:"gap-1 bg-gray-100 text-gray-700",children:[s.jsx(eM,{className:"w-3 h-3"}),"Deactivated"]})}),s.jsx(be,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("a",{href:`mailto:${B.email}`,className:"text-sm text-primary hover:underline block truncate max-w-[180px]",children:B.email}),B.phone&&s.jsx("a",{href:`tel:${B.phone.replace(/[^\d+]/g,"")}`,className:"text-xs text-muted-foreground hover:text-foreground",children:B.phone})]})}),s.jsx(be,{children:s.jsx("span",{className:"text-sm text-muted-foreground",children:xe(B.vettingUpdatedAt)})}),s.jsx(be,{children:s.jsx("p",{className:"text-sm text-muted-foreground max-w-[200px] truncate",children:B.vettingNotes||""})}),s.jsx(be,{className:"text-right",children:s.jsxs(K,{variant:"outline",size:"sm",onClick:()=>p(B),className:"gap-1",children:[s.jsx(Qa,{className:"w-3 h-3"}),"Reinstate"]})})]},B.id))})]})})]})]}),s.jsx(di,{open:o,onOpenChange:l,children:s.jsxs(Ia,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(ks,{children:[s.jsx(Ts,{children:"Approve PSW Application"}),s.jsx(As,{asChild:!0,children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{children:["Approve ",s.jsxs("strong",{children:[a==null?void 0:a.firstName," ",a==null?void 0:a.lastName]})," as a PSW?"]}),s.jsxs("div",{className:"p-3 bg-muted rounded-lg text-sm",children:[s.jsx("p",{className:"font-medium text-foreground mb-1",children:"This will:"}),s.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1",children:[s.jsx("li",{children:"Grant full access to the PSW portal"}),s.jsx("li",{children:"Allow them to view and accept shifts"}),s.jsx("li",{children:"Send automated welcome email with QR code for app install"}),s.jsx("li",{children:"Include professional standards reminder"})]})]}),a&&s.jsx(Zxe,{firstName:a.firstName,lastName:a.lastName})]})})]}),s.jsxs(Es,{children:[s.jsx(Ra,{children:"Cancel"}),s.jsx(Os,{onClick:ue,className:"bg-primary",children:"Approve & Send Welcome Email"})]})]})}),s.jsx(Jxe,{open:c,onOpenChange:d,rejectionType:h,pswName:a?`${a.firstName} ${a.lastName}`:"",onConfirm:Ne,isLoading:A}),s.jsx(hr,{open:!!m,onOpenChange:()=>p(null),children:s.jsxs(or,{children:[s.jsxs(lr,{children:[s.jsxs(cr,{className:"flex items-center gap-2",children:[s.jsx(Qa,{className:"w-5 h-5 text-blue-500"}),"Reinstate PSW"]}),s.jsxs(bo,{children:["Move ",s.jsxs("strong",{children:[m==null?void 0:m.firstName," ",m==null?void 0:m.lastName]})," back to",s.jsx("strong",{children:" Pending Review"})," for re-evaluation?"]})]}),s.jsxs(yo,{className:"gap-2 sm:gap-0",children:[s.jsx(K,{variant:"outline",onClick:()=>p(null),disabled:D,children:"Cancel"}),s.jsx(K,{onClick:()=>m&&je(m),disabled:D,className:"bg-blue-500 hover:bg-blue-600",children:D?s.jsxs(s.Fragment,{children:[s.jsx(Ut,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Qa,{className:"w-4 h-4 mr-2"}),"Move to Pending"]})})]})]})}),s.jsx(hr,{open:!!S,onOpenChange:()=>C(null),children:s.jsxs(or,{className:"max-w-lg",children:[s.jsx(lr,{children:s.jsxs(cr,{className:"flex items-center gap-2",children:[s.jsx(si,{className:"w-5 h-5"}),"Vehicle Photo - ",S==null?void 0:S.firstName," ",S==null?void 0:S.lastName]})}),(S==null?void 0:S.vehiclePhotoUrl)&&s.jsx("img",{src:S.vehiclePhotoUrl,alt:"Vehicle",className:"w-full rounded-lg"}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"License Plate:"}),s.jsx("span",{className:"font-mono font-semibold",children:(S==null?void 0:S.licensePlate)||"Not provided"})]})]})})]})};var dt=function(){return dt=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},dt.apply(this,arguments)};function eve(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function lH(e,t,r){for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function Sx(e){return e.mode==="multiple"}function Cx(e){return e.mode==="range"}function sj(e){return e.mode==="single"}var tve={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function rve(e,t){return Ze(e,"LLLL y",t)}function nve(e,t){return Ze(e,"d",t)}function sve(e,t){return Ze(e,"LLLL",t)}function ave(e){return"".concat(e)}function ive(e,t){return Ze(e,"cccccc",t)}function ove(e,t){return Ze(e,"yyyy",t)}var lve=Object.freeze({__proto__:null,formatCaption:rve,formatDay:nve,formatMonthCaption:sve,formatWeekNumber:ave,formatWeekdayName:ive,formatYearCaption:ove}),cve=function(e,t,r){return Ze(e,"do MMMM (EEEE)",r)},dve=function(){return"Month: "},uve=function(){return"Go to next month"},hve=function(){return"Go to previous month"},fve=function(e,t){return Ze(e,"cccc",t)},mve=function(e){return"Week n. ".concat(e)},pve=function(){return"Year: "},gve=Object.freeze({__proto__:null,labelDay:cve,labelMonthDropdown:dve,labelNext:uve,labelPrevious:hve,labelWeekNumber:mve,labelWeekday:fve,labelYearDropdown:pve});function xve(){var e="buttons",t=tve,r=uT,n={},a={},i=1,o={},l=new Date;return{captionLayout:e,classNames:t,formatters:lve,labels:gve,locale:r,modifiersClassNames:n,modifiers:a,numberOfMonths:i,styles:o,today:l,mode:"default"}}function vve(e){var t=e.fromYear,r=e.toYear,n=e.fromMonth,a=e.toMonth,i=e.fromDate,o=e.toDate;return n?i=nn(n):t&&(i=new Date(t,0,1)),a?o=Bi(a):r&&(o=new Date(r,11,31)),{fromDate:i?ml(i):void 0,toDate:o?ml(o):void 0}}var cH=x.createContext(void 0);function yve(e){var t,r=e.initialProps,n=xve(),a=vve(r),i=a.fromDate,o=a.toDate,l=(t=r.captionLayout)!==null&&t!==void 0?t:n.captionLayout;l!=="buttons"&&(!i||!o)&&(l="buttons");var c;(sj(r)||Sx(r)||Cx(r))&&(c=r.onSelect);var d=dt(dt(dt({},n),r),{captionLayout:l,classNames:dt(dt({},n.classNames),r.classNames),components:dt({},r.components),formatters:dt(dt({},n.formatters),r.formatters),fromDate:i,labels:dt(dt({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:dt(dt({},n.modifiers),r.modifiers),modifiersClassNames:dt(dt({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:dt(dt({},n.styles),r.styles),toDate:o});return s.jsx(cH.Provider,{value:d,children:e.children})}function Sr(){var e=x.useContext(cH);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function dH(e){var t=Sr(),r=t.locale,n=t.classNames,a=t.styles,i=t.formatters.formatCaption;return s.jsx("div",{className:n.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:i(e.displayMonth,{locale:r})})}function bve(e){return s.jsx("svg",dt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:s.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function uH(e){var t,r,n=e.onChange,a=e.value,i=e.children,o=e.caption,l=e.className,c=e.style,d=Sr(),h=(r=(t=d.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&r!==void 0?r:bve;return s.jsxs("div",{className:l,style:c,children:[s.jsx("span",{className:d.classNames.vhidden,children:e["aria-label"]}),s.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:a,onChange:n,children:i}),s.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[o,s.jsx(h,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function wve(e){var t,r=Sr(),n=r.fromDate,a=r.toDate,i=r.styles,o=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,d=r.components,h=r.labels.labelMonthDropdown;if(!n)return s.jsx(s.Fragment,{});if(!a)return s.jsx(s.Fragment,{});var f=[];if(xxe(n,a))for(var m=nn(n),p=n.getMonth();p<=a.getMonth();p++)f.push(X_(m,p));else for(var m=nn(new Date),p=0;p<=11;p++)f.push(X_(m,p));var y=function(b){var N=Number(b.target.value),j=X_(nn(e.displayMonth),N);e.onChange(j)},v=(t=d==null?void 0:d.Dropdown)!==null&&t!==void 0?t:uH;return s.jsx(v,{name:"months","aria-label":h(),className:c.dropdown_month,style:i.dropdown_month,onChange:y,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:o}),children:f.map(function(b){return s.jsx("option",{value:b.getMonth(),children:l(b,{locale:o})},b.getMonth())})})}function jve(e){var t,r=e.displayMonth,n=Sr(),a=n.fromDate,i=n.toDate,o=n.locale,l=n.styles,c=n.classNames,d=n.components,h=n.formatters.formatYearCaption,f=n.labels.labelYearDropdown,m=[];if(!a)return s.jsx(s.Fragment,{});if(!i)return s.jsx(s.Fragment,{});for(var p=a.getFullYear(),y=i.getFullYear(),v=p;v<=y;v++)m.push(RI(nf(new Date),v));var b=function(j){var w=RI(nn(r),Number(j.target.value));e.onChange(w)},N=(t=d==null?void 0:d.Dropdown)!==null&&t!==void 0?t:uH;return s.jsx(N,{name:"years","aria-label":f(),className:c.dropdown_year,style:l.dropdown_year,onChange:b,value:r.getFullYear(),caption:h(r,{locale:o}),children:m.map(function(j){return s.jsx("option",{value:j.getFullYear(),children:h(j,{locale:o})},j.getFullYear())})})}function Nve(e,t){var r=x.useState(e),n=r[0],a=r[1],i=t===void 0?n:t;return[i,a]}function _ve(e){var t=e.month,r=e.defaultMonth,n=e.today,a=t||r||n||new Date,i=e.toDate,o=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(i&&rf(i,a)<0){var d=-1*(c-1);a=ta(i,d)}return o&&rf(a,o)<0&&(a=o),nn(a)}function Sve(){var e=Sr(),t=_ve(e),r=Nve(t,e.month),n=r[0],a=r[1],i=function(o){var l;if(!e.disableNavigation){var c=nn(o);a(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[n,i]}function Cve(e,t){for(var r=t.reverseMonths,n=t.numberOfMonths,a=nn(e),i=nn(ta(a,n)),o=rf(i,a),l=[],c=0;c<o;c++){var d=ta(a,c);l.push(d)}return r&&(l=l.reverse()),l}function Pve(e,t){if(!t.disableNavigation){var r=t.toDate,n=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,o=n?i:1,l=nn(e);if(!r)return ta(l,o);var c=rf(r,e);if(!(c<i))return ta(l,o)}}function kve(e,t){if(!t.disableNavigation){var r=t.fromDate,n=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,o=n?i:1,l=nn(e);if(!r)return ta(l,-o);var c=rf(l,r);if(!(c<=0))return ta(l,-o)}}var hH=x.createContext(void 0);function Eve(e){var t=Sr(),r=Sve(),n=r[0],a=r[1],i=Cve(n,t),o=Pve(n,t),l=kve(n,t),c=function(f){return i.some(function(m){return hT(f,m)})},d=function(f,m){c(f)||(m&&LW(f,m)?a(ta(f,1+t.numberOfMonths*-1)):a(f))},h={currentMonth:n,displayMonths:i,goToMonth:a,goToDate:d,previousMonth:l,nextMonth:o,isDateDisplayed:c};return s.jsx(hH.Provider,{value:h,children:e.children})}function Px(){var e=x.useContext(hH);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function $I(e){var t,r=Sr(),n=r.classNames,a=r.styles,i=r.components,o=Px().goToMonth,l=function(h){o(ta(h,e.displayIndex?-e.displayIndex:0))},c=(t=i==null?void 0:i.CaptionLabel)!==null&&t!==void 0?t:dH,d=s.jsx(c,{id:e.id,displayMonth:e.displayMonth});return s.jsxs("div",{className:n.caption_dropdowns,style:a.caption_dropdowns,children:[s.jsx("div",{className:n.vhidden,children:d}),s.jsx(wve,{onChange:l,displayMonth:e.displayMonth}),s.jsx(jve,{onChange:l,displayMonth:e.displayMonth})]})}function Tve(e){return s.jsx("svg",dt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Ave(e){return s.jsx("svg",dt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var G0=x.forwardRef(function(e,t){var r=Sr(),n=r.classNames,a=r.styles,i=[n.button_reset,n.button];e.className&&i.push(e.className);var o=i.join(" "),l=dt(dt({},a.button_reset),a.button);return e.style&&Object.assign(l,e.style),s.jsx("button",dt({},e,{ref:t,type:"button",className:o,style:l}))});function Ove(e){var t,r,n=Sr(),a=n.dir,i=n.locale,o=n.classNames,l=n.styles,c=n.labels,d=c.labelPrevious,h=c.labelNext,f=n.components;if(!e.nextMonth&&!e.previousMonth)return s.jsx(s.Fragment,{});var m=d(e.previousMonth,{locale:i}),p=[o.nav_button,o.nav_button_previous].join(" "),y=h(e.nextMonth,{locale:i}),v=[o.nav_button,o.nav_button_next].join(" "),b=(t=f==null?void 0:f.IconRight)!==null&&t!==void 0?t:Ave,N=(r=f==null?void 0:f.IconLeft)!==null&&r!==void 0?r:Tve;return s.jsxs("div",{className:o.nav,style:l.nav,children:[!e.hidePrevious&&s.jsx(G0,{name:"previous-month","aria-label":m,className:p,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?s.jsx(b,{className:o.nav_icon,style:l.nav_icon}):s.jsx(N,{className:o.nav_icon,style:l.nav_icon})}),!e.hideNext&&s.jsx(G0,{name:"next-month","aria-label":y,className:v,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?s.jsx(N,{className:o.nav_icon,style:l.nav_icon}):s.jsx(b,{className:o.nav_icon,style:l.nav_icon})})]})}function LI(e){var t=Sr().numberOfMonths,r=Px(),n=r.previousMonth,a=r.nextMonth,i=r.goToMonth,o=r.displayMonths,l=o.findIndex(function(y){return hT(e.displayMonth,y)}),c=l===0,d=l===o.length-1,h=t>1&&(c||!d),f=t>1&&(d||!c),m=function(){n&&i(n)},p=function(){a&&i(a)};return s.jsx(Ove,{displayMonth:e.displayMonth,hideNext:h,hidePrevious:f,nextMonth:a,previousMonth:n,onPreviousClick:m,onNextClick:p})}function Mve(e){var t,r=Sr(),n=r.classNames,a=r.disableNavigation,i=r.styles,o=r.captionLayout,l=r.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:dH,d;return a?d=s.jsx(c,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?d=s.jsx($I,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?d=s.jsxs(s.Fragment,{children:[s.jsx($I,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),s.jsx(LI,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):d=s.jsxs(s.Fragment,{children:[s.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(LI,{displayMonth:e.displayMonth,id:e.id})]}),s.jsx("div",{className:n.caption,style:i.caption,children:d})}function Ive(e){var t=Sr(),r=t.footer,n=t.styles,a=t.classNames.tfoot;return r?s.jsx("tfoot",{className:a,style:n.tfoot,children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:r})})}):s.jsx(s.Fragment,{})}function Rve(e,t,r){for(var n=r?Gd(new Date):ra(new Date,{locale:e,weekStartsOn:t}),a=[],i=0;i<7;i++){var o=bs(n,i);a.push(o)}return a}function Dve(){var e=Sr(),t=e.classNames,r=e.styles,n=e.showWeekNumber,a=e.locale,i=e.weekStartsOn,o=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,d=Rve(a,i,o);return s.jsxs("tr",{style:r.head_row,className:t.head_row,children:[n&&s.jsx("td",{style:r.head_cell,className:t.head_cell}),d.map(function(h,f){return s.jsx("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":c(h,{locale:a}),children:l(h,{locale:a})},f)})]})}function $ve(){var e,t=Sr(),r=t.classNames,n=t.styles,a=t.components,i=(e=a==null?void 0:a.HeadRow)!==null&&e!==void 0?e:Dve;return s.jsx("thead",{style:n.head,className:r.head,children:s.jsx(i,{})})}function Lve(e){var t=Sr(),r=t.locale,n=t.formatters.formatDay;return s.jsx(s.Fragment,{children:n(e.date,{locale:r})})}var pT=x.createContext(void 0);function Fve(e){if(!Sx(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return s.jsx(pT.Provider,{value:t,children:e.children})}return s.jsx(Bve,{initialProps:e.initialProps,children:e.children})}function Bve(e){var t=e.initialProps,r=e.children,n=t.selected,a=t.min,i=t.max,o=function(d,h,f){var m,p;(m=t.onDayClick)===null||m===void 0||m.call(t,d,h,f);var y=!!(h.selected&&a&&(n==null?void 0:n.length)===a);if(!y){var v=!!(!h.selected&&i&&(n==null?void 0:n.length)===i);if(!v){var b=n?lH([],n):[];if(h.selected){var N=b.findIndex(function(j){return us(d,j)});b.splice(N,1)}else b.push(d);(p=t.onSelect)===null||p===void 0||p.call(t,b,d,h,f)}}},l={disabled:[]};n&&l.disabled.push(function(d){var h=i&&n.length>i-1,f=n.some(function(m){return us(m,d)});return!!(h&&!f)});var c={selected:n,onDayClick:o,modifiers:l};return s.jsx(pT.Provider,{value:c,children:r})}function gT(){var e=x.useContext(pT);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function zve(e,t){var r=t||{},n=r.from,a=r.to;return n&&a?us(a,e)&&us(n,e)?void 0:us(a,e)?{from:a,to:void 0}:us(n,e)?void 0:AC(n,e)?{from:e,to:a}:{from:n,to:e}:a?AC(e,a)?{from:a,to:e}:{from:e,to:a}:n?LW(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}var xT=x.createContext(void 0);function Uve(e){if(!Cx(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return s.jsx(xT.Provider,{value:t,children:e.children})}return s.jsx(Wve,{initialProps:e.initialProps,children:e.children})}function Wve(e){var t=e.initialProps,r=e.children,n=t.selected,a=n||{},i=a.from,o=a.to,l=t.min,c=t.max,d=function(p,y,v){var b,N;(b=t.onDayClick)===null||b===void 0||b.call(t,p,y,v);var j=zve(p,n);(N=t.onSelect)===null||N===void 0||N.call(t,j,p,y,v)},h={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(h.range_start=[i],o?(h.range_end=[o],us(i,o)||(h.range_middle=[{after:i,before:o}])):h.range_end=[i]):o&&(h.range_start=[o],h.range_end=[o]),l&&(i&&!o&&h.disabled.push({after:$y(i,l-1),before:bs(i,l-1)}),i&&o&&h.disabled.push({after:i,before:bs(i,l-1)}),!i&&o&&h.disabled.push({after:$y(o,l-1),before:bs(o,l-1)})),c){if(i&&!o&&(h.disabled.push({before:bs(i,-c+1)}),h.disabled.push({after:bs(i,c-1)})),i&&o){var f=$i(o,i)+1,m=c-f;h.disabled.push({before:$y(i,m)}),h.disabled.push({after:bs(o,m)})}!i&&o&&(h.disabled.push({before:bs(o,-c+1)}),h.disabled.push({after:bs(o,c-1)}))}return s.jsx(xT.Provider,{value:{selected:n,onDayClick:d,modifiers:h},children:r})}function vT(){var e=x.useContext(xT);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function Fy(e){return Array.isArray(e)?lH([],e):e!==void 0?[e]:[]}function Hve(e){var t={};return Object.entries(e).forEach(function(r){var n=r[0],a=r[1];t[n]=Fy(a)}),t}var Gi;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Gi||(Gi={}));var Vve=Gi.Selected,Fo=Gi.Disabled,qve=Gi.Hidden,Gve=Gi.Today,J_=Gi.RangeEnd,Q_=Gi.RangeMiddle,e1=Gi.RangeStart,Kve=Gi.Outside;function Yve(e,t,r){var n,a=(n={},n[Vve]=Fy(e.selected),n[Fo]=Fy(e.disabled),n[qve]=Fy(e.hidden),n[Gve]=[e.today],n[J_]=[],n[Q_]=[],n[e1]=[],n[Kve]=[],n);return e.fromDate&&a[Fo].push({before:e.fromDate}),e.toDate&&a[Fo].push({after:e.toDate}),Sx(e)?a[Fo]=a[Fo].concat(t.modifiers[Fo]):Cx(e)&&(a[Fo]=a[Fo].concat(r.modifiers[Fo]),a[e1]=r.modifiers[e1],a[Q_]=r.modifiers[Q_],a[J_]=r.modifiers[J_]),a}var fH=x.createContext(void 0);function Zve(e){var t=Sr(),r=gT(),n=vT(),a=Yve(t,r,n),i=Hve(t.modifiers),o=dt(dt({},a),i);return s.jsx(fH.Provider,{value:o,children:e.children})}function mH(){var e=x.useContext(fH);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function Xve(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function Jve(e){return!!(e&&typeof e=="object"&&"from"in e)}function Qve(e){return!!(e&&typeof e=="object"&&"after"in e)}function eye(e){return!!(e&&typeof e=="object"&&"before"in e)}function tye(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function rye(e,t){var r,n=t.from,a=t.to;if(n&&a){var i=$i(a,n)<0;i&&(r=[a,n],n=r[0],a=r[1]);var o=$i(e,n)>=0&&$i(a,e)>=0;return o}return a?us(a,e):n?us(n,e):!1}function nye(e){return dT(e)}function sye(e){return Array.isArray(e)&&e.every(dT)}function aye(e,t){return t.some(function(r){if(typeof r=="boolean")return r;if(nye(r))return us(e,r);if(sye(r))return r.includes(e);if(Jve(r))return rye(e,r);if(tye(r))return r.dayOfWeek.includes(e.getDay());if(Xve(r)){var n=$i(r.before,e),a=$i(r.after,e),i=n>0,o=a<0,l=AC(r.before,r.after);return l?o&&i:i||o}return Qve(r)?$i(e,r.after)>0:eye(r)?$i(r.before,e)>0:typeof r=="function"?r(e):!1})}function yT(e,t,r){var n=Object.keys(t).reduce(function(i,o){var l=t[o];return aye(e,l)&&i.push(o),i},[]),a={};return n.forEach(function(i){return a[i]=!0}),r&&!hT(e,r)&&(a.outside=!0),a}function iye(e,t){for(var r=nn(e[0]),n=Bi(e[e.length-1]),a,i,o=r;o<=n;){var l=yT(o,t),c=!l.disabled&&!l.hidden;if(!c){o=bs(o,1);continue}if(l.selected)return o;l.today&&!i&&(i=o),a||(a=o),o=bs(o,1)}return i||a}var oye=365;function pH(e,t){var r=t.moveBy,n=t.direction,a=t.context,i=t.modifiers,o=t.retry,l=o===void 0?{count:0,lastFocused:e}:o,c=a.weekStartsOn,d=a.fromDate,h=a.toDate,f=a.locale,m={day:bs,week:gg,month:ta,year:cT,startOfWeek:function(b){return a.ISOWeek?Gd(b):ra(b,{locale:f,weekStartsOn:c})},endOfWeek:function(b){return a.ISOWeek?MW(b):Kd(b,{locale:f,weekStartsOn:c})}},p=m[r](e,n==="after"?1:-1);n==="before"&&d?p=oge([d,p]):n==="after"&&h&&(p=lge([h,p]));var y=!0;if(i){var v=yT(p,i);y=!v.disabled&&!v.hidden}return y?p:l.count>oye?l.lastFocused:pH(p,{moveBy:r,direction:n,context:a,modifiers:i,retry:dt(dt({},l),{count:l.count+1})})}var gH=x.createContext(void 0);function lye(e){var t=Px(),r=mH(),n=x.useState(),a=n[0],i=n[1],o=x.useState(),l=o[0],c=o[1],d=iye(t.displayMonths,r),h=a??(l&&t.isDateDisplayed(l))?l:d,f=function(){c(a),i(void 0)},m=function(b){i(b)},p=Sr(),y=function(b,N){if(a){var j=pH(a,{moveBy:b,direction:N,context:p,modifiers:r});us(a,j)||(t.goToDate(j,a),m(j))}},v={focusedDay:a,focusTarget:h,blur:f,focus:m,focusDayAfter:function(){return y("day","after")},focusDayBefore:function(){return y("day","before")},focusWeekAfter:function(){return y("week","after")},focusWeekBefore:function(){return y("week","before")},focusMonthBefore:function(){return y("month","before")},focusMonthAfter:function(){return y("month","after")},focusYearBefore:function(){return y("year","before")},focusYearAfter:function(){return y("year","after")},focusStartOfWeek:function(){return y("startOfWeek","before")},focusEndOfWeek:function(){return y("endOfWeek","after")}};return s.jsx(gH.Provider,{value:v,children:e.children})}function bT(){var e=x.useContext(gH);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function cye(e,t){var r=mH(),n=yT(e,r,t);return n}var wT=x.createContext(void 0);function dye(e){if(!sj(e.initialProps)){var t={selected:void 0};return s.jsx(wT.Provider,{value:t,children:e.children})}return s.jsx(uye,{initialProps:e.initialProps,children:e.children})}function uye(e){var t=e.initialProps,r=e.children,n=function(i,o,l){var c,d,h;if((c=t.onDayClick)===null||c===void 0||c.call(t,i,o,l),o.selected&&!t.required){(d=t.onSelect)===null||d===void 0||d.call(t,void 0,i,o,l);return}(h=t.onSelect)===null||h===void 0||h.call(t,i,i,o,l)},a={selected:t.selected,onDayClick:n};return s.jsx(wT.Provider,{value:a,children:r})}function xH(){var e=x.useContext(wT);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function hye(e,t){var r=Sr(),n=xH(),a=gT(),i=vT(),o=bT(),l=o.focusDayAfter,c=o.focusDayBefore,d=o.focusWeekAfter,h=o.focusWeekBefore,f=o.blur,m=o.focus,p=o.focusMonthBefore,y=o.focusMonthAfter,v=o.focusYearBefore,b=o.focusYearAfter,N=o.focusStartOfWeek,j=o.focusEndOfWeek,w=function(F){var R,z,G,ie;sj(r)?(R=n.onDayClick)===null||R===void 0||R.call(n,e,t,F):Sx(r)?(z=a.onDayClick)===null||z===void 0||z.call(a,e,t,F):Cx(r)?(G=i.onDayClick)===null||G===void 0||G.call(i,e,t,F):(ie=r.onDayClick)===null||ie===void 0||ie.call(r,e,t,F)},S=function(F){var R;m(e),(R=r.onDayFocus)===null||R===void 0||R.call(r,e,t,F)},C=function(F){var R;f(),(R=r.onDayBlur)===null||R===void 0||R.call(r,e,t,F)},P=function(F){var R;(R=r.onDayMouseEnter)===null||R===void 0||R.call(r,e,t,F)},T=function(F){var R;(R=r.onDayMouseLeave)===null||R===void 0||R.call(r,e,t,F)},O=function(F){var R;(R=r.onDayPointerEnter)===null||R===void 0||R.call(r,e,t,F)},E=function(F){var R;(R=r.onDayPointerLeave)===null||R===void 0||R.call(r,e,t,F)},D=function(F){var R;(R=r.onDayTouchCancel)===null||R===void 0||R.call(r,e,t,F)},I=function(F){var R;(R=r.onDayTouchEnd)===null||R===void 0||R.call(r,e,t,F)},A=function(F){var R;(R=r.onDayTouchMove)===null||R===void 0||R.call(r,e,t,F)},V=function(F){var R;(R=r.onDayTouchStart)===null||R===void 0||R.call(r,e,t,F)},U=function(F){var R;(R=r.onDayKeyUp)===null||R===void 0||R.call(r,e,t,F)},$=function(F){var R;switch(F.key){case"ArrowLeft":F.preventDefault(),F.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowRight":F.preventDefault(),F.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowDown":F.preventDefault(),F.stopPropagation(),d();break;case"ArrowUp":F.preventDefault(),F.stopPropagation(),h();break;case"PageUp":F.preventDefault(),F.stopPropagation(),F.shiftKey?v():p();break;case"PageDown":F.preventDefault(),F.stopPropagation(),F.shiftKey?b():y();break;case"Home":F.preventDefault(),F.stopPropagation(),N();break;case"End":F.preventDefault(),F.stopPropagation(),j();break}(R=r.onDayKeyDown)===null||R===void 0||R.call(r,e,t,F)},H={onClick:w,onFocus:S,onBlur:C,onKeyDown:$,onKeyUp:U,onMouseEnter:P,onMouseLeave:T,onPointerEnter:O,onPointerLeave:E,onTouchCancel:D,onTouchEnd:I,onTouchMove:A,onTouchStart:V};return H}function fye(){var e=Sr(),t=xH(),r=gT(),n=vT(),a=sj(e)?t.selected:Sx(e)?r.selected:Cx(e)?n.selected:void 0;return a}function mye(e){return Object.values(Gi).includes(e)}function pye(e,t){var r=[e.classNames.day];return Object.keys(t).forEach(function(n){var a=e.modifiersClassNames[n];if(a)r.push(a);else if(mye(n)){var i=e.classNames["day_".concat(n)];i&&r.push(i)}}),r}function gye(e,t){var r=dt({},e.styles.day);return Object.keys(t).forEach(function(n){var a;r=dt(dt({},r),(a=e.modifiersStyles)===null||a===void 0?void 0:a[n])}),r}function xye(e,t,r){var n,a,i,o=Sr(),l=bT(),c=cye(e,t),d=hye(e,c),h=fye(),f=!!(o.onDayClick||o.mode!=="default");x.useEffect(function(){var P;c.outside||l.focusedDay&&f&&us(l.focusedDay,e)&&((P=r.current)===null||P===void 0||P.focus())},[l.focusedDay,e,r,f,c.outside]);var m=pye(o,c).join(" "),p=gye(o,c),y=!!(c.outside&&!o.showOutsideDays||c.hidden),v=(i=(a=o.components)===null||a===void 0?void 0:a.DayContent)!==null&&i!==void 0?i:Lve,b=s.jsx(v,{date:e,displayMonth:t,activeModifiers:c}),N={style:p,className:m,children:b,role:"gridcell"},j=l.focusTarget&&us(l.focusTarget,e)&&!c.outside,w=l.focusedDay&&us(l.focusedDay,e),S=dt(dt(dt({},N),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=w||j?0:-1,n)),d),C={isButton:f,isHidden:y,activeModifiers:c,selectedDays:h,buttonProps:S,divProps:N};return C}function vye(e){var t=x.useRef(null),r=xye(e.date,e.displayMonth,t);return r.isHidden?s.jsx("div",{role:"gridcell"}):r.isButton?s.jsx(G0,dt({name:"day",ref:t},r.buttonProps)):s.jsx("div",dt({},r.divProps))}function yye(e){var t=e.number,r=e.dates,n=Sr(),a=n.onWeekNumberClick,i=n.styles,o=n.classNames,l=n.locale,c=n.labels.labelWeekNumber,d=n.formatters.formatWeekNumber,h=d(Number(t),{locale:l});if(!a)return s.jsx("span",{className:o.weeknumber,style:i.weeknumber,children:h});var f=c(Number(t),{locale:l}),m=function(p){a(t,r,p)};return s.jsx(G0,{name:"week-number","aria-label":f,className:o.weeknumber,style:i.weeknumber,onClick:m,children:h})}function bye(e){var t,r,n=Sr(),a=n.styles,i=n.classNames,o=n.showWeekNumber,l=n.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:vye,d=(r=l==null?void 0:l.WeekNumber)!==null&&r!==void 0?r:yye,h;return o&&(h=s.jsx("td",{className:i.cell,style:a.cell,children:s.jsx(d,{number:e.weekNumber,dates:e.dates})})),s.jsxs("tr",{className:i.row,style:a.row,children:[h,e.dates.map(function(f){return s.jsx("td",{className:i.cell,style:a.cell,role:"presentation",children:s.jsx(c,{displayMonth:e.displayMonth,date:f})},fxe(f))})]})}function FI(e,t,r){for(var n=r!=null&&r.ISOWeek?MW(t):Kd(t,r),a=r!=null&&r.ISOWeek?Gd(e):ra(e,r),i=$i(n,a),o=[],l=0;l<=i;l++)o.push(bs(a,l));var c=o.reduce(function(d,h){var f=r!=null&&r.ISOWeek?IW(h):DW(h,r),m=d.find(function(p){return p.weekNumber===f});return m?(m.dates.push(h),d):(d.push({weekNumber:f,dates:[h]}),d)},[]);return c}function wye(e,t){var r=FI(nn(e),Bi(e),t);if(t!=null&&t.useFixedWeeks){var n=pxe(e,t);if(n<6){var a=r[r.length-1],i=a.dates[a.dates.length-1],o=gg(i,6-n),l=FI(gg(i,1),o,t);r.push.apply(r,l)}}return r}function jye(e){var t,r,n,a=Sr(),i=a.locale,o=a.classNames,l=a.styles,c=a.hideHead,d=a.fixedWeeks,h=a.components,f=a.weekStartsOn,m=a.firstWeekContainsDate,p=a.ISOWeek,y=wye(e.displayMonth,{useFixedWeeks:!!d,ISOWeek:p,locale:i,weekStartsOn:f,firstWeekContainsDate:m}),v=(t=h==null?void 0:h.Head)!==null&&t!==void 0?t:$ve,b=(r=h==null?void 0:h.Row)!==null&&r!==void 0?r:bye,N=(n=h==null?void 0:h.Footer)!==null&&n!==void 0?n:Ive;return s.jsxs("table",{id:e.id,className:o.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&s.jsx(v,{}),s.jsx("tbody",{className:o.tbody,style:l.tbody,children:y.map(function(j){return s.jsx(b,{displayMonth:e.displayMonth,dates:j.dates,weekNumber:j.weekNumber},j.weekNumber)})}),s.jsx(N,{displayMonth:e.displayMonth})]})}function Nye(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var _ye=Nye()?x.useLayoutEffect:x.useEffect,t1=!1,Sye=0;function BI(){return"react-day-picker-".concat(++Sye)}function Cye(e){var t,r=e??(t1?BI():null),n=x.useState(r),a=n[0],i=n[1];return _ye(function(){a===null&&i(BI())},[]),x.useEffect(function(){t1===!1&&(t1=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function Pye(e){var t,r,n=Sr(),a=n.dir,i=n.classNames,o=n.styles,l=n.components,c=Px().displayMonths,d=Cye(n.id?"".concat(n.id,"-").concat(e.displayIndex):void 0),h=n.id?"".concat(n.id,"-grid-").concat(e.displayIndex):void 0,f=[i.month],m=o.month,p=e.displayIndex===0,y=e.displayIndex===c.length-1,v=!p&&!y;a==="rtl"&&(t=[p,y],y=t[0],p=t[1]),p&&(f.push(i.caption_start),m=dt(dt({},m),o.caption_start)),y&&(f.push(i.caption_end),m=dt(dt({},m),o.caption_end)),v&&(f.push(i.caption_between),m=dt(dt({},m),o.caption_between));var b=(r=l==null?void 0:l.Caption)!==null&&r!==void 0?r:Mve;return s.jsxs("div",{className:f.join(" "),style:m,children:[s.jsx(b,{id:d,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(jye,{id:h,"aria-labelledby":d,displayMonth:e.displayMonth})]},e.displayIndex)}function kye(e){var t=Sr(),r=t.classNames,n=t.styles;return s.jsx("div",{className:r.months,style:n.months,children:e.children})}function Eye(e){var t,r,n=e.initialProps,a=Sr(),i=bT(),o=Px(),l=x.useState(!1),c=l[0],d=l[1];x.useEffect(function(){a.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),d(!0)))},[a.initialFocus,c,i.focus,i.focusTarget,i]);var h=[a.classNames.root,a.className];a.numberOfMonths>1&&h.push(a.classNames.multiple_months),a.showWeekNumber&&h.push(a.classNames.with_weeknumber);var f=dt(dt({},a.styles.root),a.style),m=Object.keys(n).filter(function(y){return y.startsWith("data-")}).reduce(function(y,v){var b;return dt(dt({},y),(b={},b[v]=n[v],b))},{}),p=(r=(t=n.components)===null||t===void 0?void 0:t.Months)!==null&&r!==void 0?r:kye;return s.jsx("div",dt({className:h.join(" "),style:f,dir:a.dir,id:a.id,nonce:n.nonce,title:n.title,lang:n.lang},m,{children:s.jsx(p,{children:o.displayMonths.map(function(y,v){return s.jsx(Pye,{displayIndex:v,displayMonth:y},v)})})}))}function Tye(e){var t=e.children,r=eve(e,["children"]);return s.jsx(yve,{initialProps:r,children:s.jsx(Eve,{children:s.jsx(dye,{initialProps:r,children:s.jsx(Fve,{initialProps:r,children:s.jsx(Uve,{initialProps:r,children:s.jsx(Zve,{children:s.jsx(lye,{children:t})})})})})})})}function Aye(e){return s.jsx(Tye,dt({},e,{children:s.jsx(Eye,{initialProps:e})}))}function K0({className:e,classNames:t,showOutsideDays:r=!0,...n}){return s.jsx(Aye,{showOutsideDays:r,className:Re("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Re(lg({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Re(lg({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...a})=>s.jsx(wk,{className:"h-4 w-4"}),IconRight:({...a})=>s.jsx(Pc,{className:"h-4 w-4"})},...n})}K0.displayName="Calendar";var vH="Toggle",jT=x.forwardRef((e,t)=>{const{pressed:r,defaultPressed:n,onPressedChange:a,...i}=e,[o,l]=Ln({prop:r,onChange:a,defaultProp:n??!1,caller:vH});return s.jsx(ze.button,{type:"button","aria-pressed":o,"data-state":o?"on":"off","data-disabled":e.disabled?"":void 0,...i,ref:t,onClick:Ie(e.onClick,()=>{e.disabled||l(!o)})})});jT.displayName=vH;var yH=jT,Ic="ToggleGroup",[bH,Pze]=sn(Ic,[Xf]),wH=Xf(),NT=q.forwardRef((e,t)=>{const{type:r,...n}=e;if(r==="single"){const a=n;return s.jsx(Oye,{...a,ref:t})}if(r==="multiple"){const a=n;return s.jsx(Mye,{...a,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${Ic}\``)});NT.displayName=Ic;var[jH,NH]=bH(Ic),Oye=q.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:a=()=>{},...i}=e,[o,l]=Ln({prop:r,defaultProp:n??"",onChange:a,caller:Ic});return s.jsx(jH,{scope:e.__scopeToggleGroup,type:"single",value:q.useMemo(()=>o?[o]:[],[o]),onItemActivate:l,onItemDeactivate:q.useCallback(()=>l(""),[l]),children:s.jsx(_H,{...i,ref:t})})}),Mye=q.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:a=()=>{},...i}=e,[o,l]=Ln({prop:r,defaultProp:n??[],onChange:a,caller:Ic}),c=q.useCallback(h=>l((f=[])=>[...f,h]),[l]),d=q.useCallback(h=>l((f=[])=>f.filter(m=>m!==h)),[l]);return s.jsx(jH,{scope:e.__scopeToggleGroup,type:"multiple",value:o,onItemActivate:c,onItemDeactivate:d,children:s.jsx(_H,{...i,ref:t})})});NT.displayName=Ic;var[Iye,Rye]=bH(Ic),_H=q.forwardRef((e,t)=>{const{__scopeToggleGroup:r,disabled:n=!1,rovingFocus:a=!0,orientation:i,dir:o,loop:l=!0,...c}=e,d=wH(r),h=Tc(o),f={role:"group",dir:h,...c};return s.jsx(Iye,{scope:r,rovingFocus:a,disabled:n,children:a?s.jsx(ZE,{asChild:!0,...d,orientation:i,dir:h,loop:l,children:s.jsx(ze.div,{...f,ref:t})}):s.jsx(ze.div,{...f,ref:t})})}),Y0="ToggleGroupItem",SH=q.forwardRef((e,t)=>{const r=NH(Y0,e.__scopeToggleGroup),n=Rye(Y0,e.__scopeToggleGroup),a=wH(e.__scopeToggleGroup),i=r.value.includes(e.value),o=n.disabled||e.disabled,l={...e,pressed:i,disabled:o},c=q.useRef(null);return n.rovingFocus?s.jsx(XE,{asChild:!0,...a,focusable:!o,active:i,ref:c,children:s.jsx(zI,{...l,ref:t})}):s.jsx(zI,{...l,ref:t})});SH.displayName=Y0;var zI=q.forwardRef((e,t)=>{const{__scopeToggleGroup:r,value:n,...a}=e,i=NH(Y0,r),o={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},l=i.type==="single"?o:void 0;return s.jsx(jT,{...l,...a,ref:t,onPressedChange:c=>{c?i.onItemActivate(n):i.onItemDeactivate(n)}})}),CH=NT,PH=SH;const kH=$f("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),Dye=x.forwardRef(({className:e,variant:t,size:r,...n},a)=>s.jsx(yH,{ref:a,className:Re(kH({variant:t,size:r,className:e})),...n}));Dye.displayName=yH.displayName;const EH=x.createContext({size:"default",variant:"default"}),TH=x.forwardRef(({className:e,variant:t,size:r,children:n,...a},i)=>s.jsx(CH,{ref:i,className:Re("flex items-center justify-center gap-1",e),...a,children:s.jsx(EH.Provider,{value:{variant:t,size:r},children:n})}));TH.displayName=CH.displayName;const By=x.forwardRef(({className:e,children:t,variant:r,size:n,...a},i)=>{const o=x.useContext(EH);return s.jsx(PH,{ref:i,className:Re(kH({variant:o.variant||r,size:o.size||n}),e),...a,children:t})});By.displayName=PH.displayName;const $ye=()=>{const[e,t]=x.useState(new Date),[r,n]=x.useState(null),[a,i]=x.useState(!0),[o,l]=x.useState([]),[c,d]=x.useState([]),[h,f]=x.useState(null),[m,p]=x.useState("ON"),[y,v]=x.useState("all"),[b,N]=x.useState("all"),[j,w]=x.useState(new Date),[S,C]=x.useState(null),[P,T]=x.useState(""),[O,E]=x.useState(""),[D,I]=x.useState(""),A=async()=>{i(!0);try{const{data:Y,error:xe}=await de.from("bookings").select("*").order("scheduled_date",{ascending:!1});if(xe){console.error("Error fetching bookings:",xe),Z.error("Failed to load orders");return}const Me=(Y||[]).map($e=>{var Le,qe;const ce=$e.care_sheet;return{id:$e.id,bookingCode:$e.booking_code,type:"booking",date:$e.scheduled_date,startTime:((Le=$e.start_time)==null?void 0:Le.slice(0,5))||"",endTime:((qe=$e.end_time)==null?void 0:qe.slice(0,5))||"",clientName:$e.patient_name,patientAddress:$e.patient_address,postalCode:$e.patient_postal_code||$e.client_postal_code||"",status:U($e.status),services:$e.service_type||[],pswAssigned:$e.psw_first_name||$e.psw_assigned||null,orderingClientPhone:$e.client_phone,orderingClientEmail:$e.client_email,careSheet:ce,isHospitalDischarge:ce==null?void 0:ce.isHospitalDischarge,dischargeDocuments:ce==null?void 0:ce.dischargeDocuments,total:Number($e.total)||0,hours:Number($e.hours)||0}});l(Me)}catch(Y){console.error("Error fetching orders:",Y)}finally{i(!1)}},V=async()=>{try{const{data:Y,error:xe}=await de.from("payroll_entries").select("*").order("scheduled_date",{ascending:!1});if(xe){console.error("Error fetching payroll entries:",xe);return}d(Y||[])}catch(Y){console.error("Error fetching payroll:",Y)}},U=Y=>{switch(Y){case"pending":return"pending";case"active":return"claimed";case"in-progress":return"in-progress";case"completed":return"completed";case"cancelled":return"cancelled";default:return"pending"}};x.useEffect(()=>{A(),V();const Y=de.channel("bookings-calendar").on("postgres_changes",{event:"*",schema:"public",table:"bookings"},()=>{A()}).subscribe(),xe=de.channel("payroll-calendar").on("postgres_changes",{event:"*",schema:"public",table:"payroll_entries"},()=>{V()}).subscribe();return()=>{de.removeChannel(Y),de.removeChannel(xe)}},[]);const $=x.useMemo(()=>{const Y=new Map,xe=S?ml(S):nn(j),Me=S?nj(S):Bi(j),$e=o.filter(ce=>{try{const Le=un(ce.date);return Le>=xe&&Le<=Me&&ce.status==="completed"}catch{return!1}});return c.forEach(ce=>{try{const Le=un(ce.scheduled_date);if(Le<xe||Le>Me)return;const qe=Y.get(ce.psw_id)||{pswName:ce.psw_name,city:le(ce.psw_id),ordersCompleted:0,totalHours:0,totalPay:0,careSheetsFilled:0,careSheetsTotal:0,status:ce.status==="cleared"?"cleared":"pending"};qe.ordersCompleted+=1,qe.totalHours+=Number(ce.hours_worked)||0,qe.totalPay+=Number(ce.total_owed)||0,Y.set(ce.psw_id,qe)}catch{}}),$e.forEach(ce=>{if(ce.pswAssigned){for(const[Le,qe]of Y.entries())if(qe.pswName===ce.pswAssigned){qe.careSheetsTotal+=1,ce.careSheet&&(qe.careSheetsFilled+=1),ce.postalCode&&(qe.city=le(ce.postalCode));break}}}),Array.from(Y.values()).sort((ce,Le)=>Le.totalPay-ce.totalPay)},[c,o,j,S]),H=x.useMemo(()=>{const Y=new Set;return $.forEach(xe=>{xe.city&&xe.city!=="Unknown"&&xe.city!=="Ontario"&&Y.add(xe.city)}),Array.from(Y).sort()},[$]),F=x.useMemo(()=>{let Y=$;return P&&(Y=Y.filter(xe=>xe.pswName.toLowerCase().includes(P.toLowerCase()))),y!=="all"&&(Y=Y.filter(xe=>xe.city===y)),b!=="all"&&(Y=Y.filter(xe=>xe.status===b)),Y},[$,P,y,b]),R=()=>{w(Y=>V0(Y,1)),C(null)},z=()=>{w(Y=>ta(Y,1)),C(null)},G=()=>{p("ON"),v("all"),N("all"),w(new Date),C(null),T("")},ie=()=>{E(""),I("")},ae=y!=="all"||b!=="all"||S!==null||P!=="",X=O!==""||D!=="",le=Y=>{if(!Y)return"Unknown";const xe=Y.substring(0,3).toUpperCase(),Me={M5V:"Toronto",M4Y:"Toronto",M6K:"Toronto",M5J:"Toronto",M5G:"Toronto",L8P:"Hamilton",L8S:"Hamilton",L8E:"Hamilton",L8L:"Hamilton",N3T:"Brantford",N3R:"Brantford",N3S:"Brantford",N3P:"Brantford",K9H:"Peterborough",K9J:"Peterborough",K9K:"Peterborough",N6A:"London",N6B:"London",N6C:"London",N6E:"London",N6G:"London",N6H:"London",K1A:"Ottawa",K1P:"Ottawa",K1N:"Ottawa",K1S:"Ottawa",K2P:"Ottawa",L4M:"Barrie",L4N:"Barrie",L6X:"Brampton",L6Y:"Brampton",L6V:"Brampton",L6W:"Brampton",L5A:"Mississauga",L5B:"Mississauga",L5C:"Mississauga",L5M:"Mississauga",N2A:"Kitchener",N2B:"Kitchener",N2C:"Kitchener",N2E:"Kitchener",N2L:"Waterloo",N2J:"Waterloo",N2K:"Waterloo",N8W:"Windsor",N8X:"Windsor",N8Y:"Windsor",N9A:"Windsor",P3A:"Sudbury",P3B:"Sudbury",P3C:"Sudbury",K7K:"Kingston",K7L:"Kingston",K7M:"Kingston",N1E:"Guelph",N1G:"Guelph",N1H:"Guelph",N1R:"Cambridge",N1S:"Cambridge",N1T:"Cambridge"};return Me[xe]?Me[xe]:{M:"Toronto",L:"GTA",N:"SW Ontario",K:"Eastern Ontario",P:"Northern Ontario"}[xe[0]]||"Ontario"},fe=x.useMemo(()=>e?o.filter(Y=>{try{const xe=un(Y.date);return!(!us(xe,e)||O&&!Y.clientName.toLowerCase().includes(O.toLowerCase())||D&&(!Y.pswAssigned||!Y.pswAssigned.toLowerCase().includes(D.toLowerCase())))}catch{return!1}}).sort((Y,xe)=>Y.startTime.localeCompare(xe.startTime)):[],[o,e,O,D]),ge=x.useMemo(()=>{const Y=new Map;return o.forEach(xe=>{const Me=xe.date,$e=Y.get(Me)||{pending:!1,active:!1,completed:!1};xe.status==="pending"?$e.pending=!0:xe.status==="claimed"||xe.status==="in-progress"?$e.active=!0:xe.status==="completed"&&($e.completed=!0),Y.set(Me,$e)}),Y},[o]),ee=Y=>{if(Y.status!=="pending")return!1;try{const xe=un(`${Y.date}T${Y.startTime}`),Me=OW(xe,new Date);return Me<=4&&Me>=0}catch{return!1}},re=async Y=>{n(Y.id);try{await iu({to:"psw-alerts@pswdirect.ca",subject:`New Shift Available - ${Y.date}`,body:`New shift available!

Date: ${Y.date}
Time: ${Y.startTime}
Area: ${Y.postalCode}

Open the app to claim it!`}),Z.success(" Manual ping sent!",{description:`Email alerts sent to PSWs within ${ode}km of ${Y.postalCode}`})}catch{Z.error("Failed to send ping")}n(null)},ue=Y=>{switch(Y){case"pending":return s.jsx(ne,{className:"bg-amber-500/10 text-amber-600 border-amber-200",children:"Pending"});case"claimed":return s.jsx(ne,{className:"bg-blue-500/10 text-blue-600 border-blue-200",children:"Claimed"});case"in-progress":return s.jsx(ne,{className:"bg-emerald-500/10 text-emerald-600 border-emerald-200",children:"In-Progress"});case"completed":return s.jsx(ne,{className:"bg-primary/10 text-primary border-primary/30",children:"Completed"});case"cancelled":return s.jsx(ne,{className:"bg-red-500/10 text-red-600 border-red-200",children:"Cancelled"});default:return null}},Ne=Y=>{switch(Y){case"pending":return s.jsx(Yo,{className:"w-4 h-4 text-amber-600"});case"claimed":return s.jsx($t,{className:"w-4 h-4 text-blue-600"});case"in-progress":return s.jsx(cl,{className:"w-4 h-4 text-emerald-600"});case"completed":return s.jsx(Kt,{className:"w-4 h-4 text-primary"});case"cancelled":return s.jsx(Xn,{className:"w-4 h-4 text-red-600"});default:return null}},je=Y=>{Y.careSheet&&f({order:Y,careSheet:Y.careSheet})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(J,{className:"shadow-card",children:[s.jsxs(ke,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(Lt,{className:"w-5 h-5 text-primary"}),"Daily Operations Calendar"]}),s.jsx(Ge,{children:"Click a date to view all orders. Pending orders within 4 hours show a Manual Ping option."})]}),s.jsx(Q,{children:a?s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx(Ut,{className:"w-8 h-8 animate-spin text-primary"}),s.jsx("span",{className:"ml-2 text-muted-foreground",children:"Loading orders..."})]}):s.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx(K0,{mode:"single",selected:e,onSelect:t,className:"rounded-md border w-full",modifiers:{hasPending:Y=>{var Me;const xe=Ze(Y,"yyyy-MM-dd");return((Me=ge.get(xe))==null?void 0:Me.pending)||!1},hasActive:Y=>{var Me;const xe=Ze(Y,"yyyy-MM-dd");return((Me=ge.get(xe))==null?void 0:Me.active)||!1},hasCompleted:Y=>{var Me;const xe=Ze(Y,"yyyy-MM-dd");return((Me=ge.get(xe))==null?void 0:Me.completed)||!1}},modifiersStyles:{hasPending:{backgroundColor:"hsl(var(--amber-500) / 0.2)",color:"hsl(var(--amber-600))",fontWeight:"bold"},hasActive:{backgroundColor:"hsl(var(--primary) / 0.2)",color:"hsl(var(--primary))",fontWeight:"bold"},hasCompleted:{backgroundColor:"hsl(142 76% 36% / 0.2)",color:"hsl(142 76% 36%)",fontWeight:"bold"}}}),s.jsxs("div",{className:"flex gap-4 mt-4 text-sm flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-500/30"}),s.jsx("span",{className:"text-muted-foreground",children:"Pending"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-primary/30"}),s.jsx("span",{className:"text-muted-foreground",children:"Active"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500/30"}),s.jsx("span",{className:"text-muted-foreground",children:"Completed"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold text-foreground",children:e?Ze(e,"EEEE, MMMM d, yyyy"):"Select a date"}),s.jsxs(ne,{variant:"outline",children:[fe.length," order",fe.length!==1?"s":""]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs("div",{className:"flex-1 min-w-[140px] relative",children:[s.jsx(Js,{className:"w-4 h-4 absolute left-2.5 top-1/2 -translate-y-1/2 text-muted-foreground"}),s.jsx(pe,{placeholder:"Search client name...",value:O,onChange:Y=>E(Y.target.value),className:"h-8 text-sm pl-8"})]}),s.jsxs("div",{className:"flex-1 min-w-[140px] relative",children:[s.jsx(Js,{className:"w-4 h-4 absolute left-2.5 top-1/2 -translate-y-1/2 text-muted-foreground"}),s.jsx(pe,{placeholder:"Search PSW name...",value:D,onChange:Y=>I(Y.target.value),className:"h-8 text-sm pl-8"})]}),X&&s.jsx(K,{variant:"ghost",size:"sm",onClick:ie,className:"h-8 px-2",children:s.jsx(Hr,{className:"w-4 h-4"})})]}),fe.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:X?"No orders match your search":"No orders scheduled for this date"}):s.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-2",children:fe.map(Y=>s.jsx(J,{className:`shadow-sm ${ee(Y)?"border-amber-500 border-2 bg-amber-50/50 dark:bg-amber-950/20":""} ${Y.isHospitalDischarge?"border-red-500 border-2":""}`,children:s.jsxs(Q,{className:"p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[Ne(Y.status),s.jsx("span",{className:"font-mono font-bold text-sm",children:Y.bookingCode}),ee(Y)&&s.jsx(ne,{variant:"destructive",className:"text-xs animate-pulse",children:"URGENT"}),Y.isHospitalDischarge&&s.jsxs(ne,{className:"bg-red-500/10 text-red-600 border-red-200 text-xs",children:[s.jsx(zt,{className:"w-3 h-3 mr-1"}),"Hospital Discharge"]})]}),ue(Y.status)]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Qe,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{className:"font-medium",children:[Y.startTime," - ",Y.endTime]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx($t,{className:"w-4 h-4"}),s.jsx("span",{children:Y.clientName})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(St,{className:"w-4 h-4"}),s.jsx("span",{className:"truncate",children:Y.patientAddress})]})]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:Y.services.map((xe,Me)=>s.jsx(ne,{variant:"outline",className:"text-xs",children:typeof xe=="string"&&xe.includes("-")?Xh(xe):xe},Me))}),s.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"PSW: "}),s.jsx("span",{className:Y.pswAssigned?"font-medium text-foreground":"text-amber-600",children:Y.pswAssigned||"Unassigned"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs(K,{variant:"ghost",size:"sm",onClick:()=>{navigator.clipboard.writeText(Y.id),Z.success("Copied booking ID")},title:"Copy booking UUID",className:"text-muted-foreground hover:text-foreground h-7 px-2",children:[s.jsx(Qo,{className:"w-3 h-3 mr-1"}),s.jsx("span",{className:"text-xs",children:"UUID"})]}),Y.status==="completed"&&Y.careSheet&&s.jsxs(K,{variant:"ghost",size:"sm",className:"text-primary",onClick:()=>je(Y),children:[s.jsx(zt,{className:"w-4 h-4 mr-1"}),"View Care Sheet"]}),ee(Y)&&s.jsx(K,{variant:"outline",size:"sm",onClick:()=>re(Y),disabled:r===Y.id,className:"text-amber-600 border-amber-300 hover:bg-amber-50",children:r===Y.id?s.jsx("div",{className:"w-4 h-4 border-2 border-amber-300 border-t-amber-600 rounded-full animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(pw,{className:"w-4 h-4 mr-1"}),"Manual Ping"]})})]})]}),Y.isHospitalDischarge&&s.jsxs("div",{className:"flex items-start gap-2 p-2 bg-red-500/10 rounded-lg",children:[s.jsx(Wr,{className:"w-4 h-4 text-red-600 shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-red-700 dark:text-red-400",children:[s.jsx("p",{className:"font-medium",children:"Hospital/Doctor Discharge"}),s.jsx("p",{className:"text-xs",children:"Review discharge documents immediately"}),Y.dischargeDocuments&&s.jsx(K,{variant:"link",size:"sm",className:"p-0 h-auto text-red-600 underline",onClick:()=>window.open(Y.dischargeDocuments,"_blank"),children:"View Discharge Papers"})]})]})]})},Y.id))})]})]})})]}),s.jsxs(J,{className:"shadow-card",children:[s.jsxs(ke,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(pn,{className:"w-5 h-5 text-primary"}),"PSW Order Completions"]}),s.jsx(Ge,{children:"Staff who completed orders with care sheet status"})]}),s.jsxs(Q,{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3 p-4 bg-muted/50 rounded-lg border border-border",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(K,{variant:"outline",size:"icon",onClick:R,className:"h-8 w-8",children:s.jsx(wk,{className:"w-4 h-4"})}),s.jsx("span",{className:"font-medium min-w-[120px] text-center text-sm",children:Ze(j,"MMMM yyyy")}),s.jsx(K,{variant:"outline",size:"icon",onClick:z,className:"h-8 w-8",children:s.jsx(Pc,{className:"w-4 h-4"})})]}),s.jsxs(KE,{children:[s.jsx(YE,{asChild:!0,children:s.jsxs(K,{variant:"outline",size:"sm",className:"gap-2 h-8",children:[s.jsx(Lt,{className:"w-4 h-4"}),S?Ze(S,"MMM d"):"All Days"]})}),s.jsxs(Jw,{className:"w-auto p-0",align:"start",children:[s.jsx(K0,{mode:"single",selected:S||void 0,onSelect:Y=>C(Y||null),month:j,onMonthChange:w}),S&&s.jsx("div",{className:"p-2 border-t border-border",children:s.jsx(K,{variant:"ghost",size:"sm",onClick:()=>C(null),className:"w-full text-xs",children:"Clear Day Filter"})})]})]}),s.jsx("div",{className:"h-6 w-px bg-border"}),s.jsxs(Xt,{value:m,onValueChange:Y=>{p(Y),v("all")},children:[s.jsx(qt,{className:"w-[120px] h-8 text-sm",children:s.jsx(Jt,{})}),s.jsx(Gt,{children:s.jsx(_e,{value:"ON",children:"Ontario"})})]}),s.jsxs(Xt,{value:y,onValueChange:v,children:[s.jsx(qt,{className:"w-[150px] h-8 text-sm",children:s.jsx(Jt,{placeholder:"All Cities"})}),s.jsxs(Gt,{children:[s.jsx(_e,{value:"all",children:"All Cities"}),H.map(Y=>s.jsx(_e,{value:Y,children:Y},Y))]})]}),s.jsx("div",{className:"h-6 w-px bg-border"}),s.jsxs(TH,{type:"single",value:b,onValueChange:Y=>Y&&N(Y),className:"gap-0",children:[s.jsx(By,{value:"all",className:"text-xs h-8 px-3 rounded-r-none",children:"All"}),s.jsx(By,{value:"pending",className:"text-xs h-8 px-3 rounded-none border-l-0",children:"Pending"}),s.jsx(By,{value:"cleared",className:"text-xs h-8 px-3 rounded-l-none border-l-0",children:"Cleared"})]}),s.jsx("div",{className:"h-6 w-px bg-border"}),s.jsxs("div",{className:"relative flex-1 min-w-[150px] max-w-[200px]",children:[s.jsx(Js,{className:"w-4 h-4 absolute left-2.5 top-1/2 -translate-y-1/2 text-muted-foreground"}),s.jsx(pe,{placeholder:"Search PSW...",value:P,onChange:Y=>T(Y.target.value),className:"h-8 text-sm pl-8"})]}),ae&&s.jsxs(K,{variant:"ghost",size:"sm",onClick:G,className:"gap-1 h-8 text-xs ml-auto",children:[s.jsx(Hr,{className:"w-3 h-3"}),"Reset"]})]}),F.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:$.length===0?`No completed orders for ${S?Ze(S,"MMMM d, yyyy"):Ze(j,"MMMM yyyy")}`:"No results match your filters"}):s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs(Sn,{children:[s.jsx(Cn,{children:s.jsxs(Mt,{children:[s.jsx(Pe,{children:"PSW Name"}),s.jsx(Pe,{children:"City"}),s.jsx(Pe,{className:"text-center",children:"Orders"}),s.jsx(Pe,{className:"text-right",children:"Hours"}),s.jsx(Pe,{className:"text-right",children:"Total Pay"}),s.jsx(Pe,{className:"text-center",children:"Care Sheets"}),s.jsx(Pe,{className:"text-center",children:"Status"})]})}),s.jsx(Pn,{children:F.map((Y,xe)=>s.jsxs(Mt,{children:[s.jsx(be,{className:"font-medium",children:Y.pswName}),s.jsx(be,{children:Y.city}),s.jsx(be,{className:"text-center",children:Y.ordersCompleted}),s.jsxs(be,{className:"text-right",children:[Y.totalHours.toFixed(1),"h"]}),s.jsxs(be,{className:"text-right font-medium",children:["$",Y.totalPay.toFixed(2)]}),s.jsx(be,{className:"text-center",children:s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx(nee,{className:`w-4 h-4 ${Y.careSheetsFilled===Y.careSheetsTotal&&Y.careSheetsTotal>0?"text-green-600":"text-amber-600"}`}),s.jsxs("span",{className:Y.careSheetsFilled===Y.careSheetsTotal&&Y.careSheetsTotal>0?"text-green-600":"text-amber-600",children:[Y.careSheetsFilled,"/",Y.careSheetsTotal]}),Y.careSheetsFilled===Y.careSheetsTotal&&Y.careSheetsTotal>0&&s.jsx(Kt,{className:"w-4 h-4 text-green-600"})]})}),s.jsx(be,{className:"text-center",children:s.jsx(ne,{className:Y.status==="cleared"?"bg-green-500/10 text-green-600 border-green-200":"bg-amber-500/10 text-amber-600 border-amber-200",children:Y.status==="cleared"?"Cleared":"Pending"})})]},xe))})]}),s.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-border",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("span",{className:"font-medium text-foreground",children:F.length}),F.length!==$.length&&s.jsxs("span",{className:"text-xs ml-1",children:["(of ",$.length,")"]})," ","PSWs"]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("span",{className:"font-medium text-foreground",children:F.reduce((Y,xe)=>Y+xe.ordersCompleted,0)})," orders"]}),ae&&s.jsxs(ne,{variant:"secondary",className:"text-xs",children:[s.jsx(mw,{className:"w-3 h-3 mr-1"}),"Filters Active"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hs,{className:"w-4 h-4 text-primary"}),s.jsxs("span",{className:"font-bold text-lg",children:["$",F.reduce((Y,xe)=>Y+xe.totalPay,0).toFixed(2)]}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"total owed"})]})]})]})]})]}),s.jsx(hr,{open:!!h,onOpenChange:Y=>!Y&&f(null),children:s.jsxs(or,{className:"max-w-md",children:[s.jsx(lr,{children:s.jsxs(cr,{className:"flex items-center gap-2",children:[s.jsx(zt,{className:"w-5 h-5 text-primary"}),"Care Sheet - ",h==null?void 0:h.order.bookingCode]})}),h&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed by"}),s.jsx("p",{className:"font-medium",children:h.careSheet.pswFirstName||h.order.pswAssigned||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Date"}),s.jsx("p",{className:"font-medium",children:h.order.date})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Mood on Arrival"}),s.jsx(ne,{variant:"outline",className:"mt-1",children:h.careSheet.moodOnArrival||"Not recorded"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Mood on Departure"}),s.jsx(ne,{variant:"outline",className:"mt-1",children:h.careSheet.moodOnDeparture||"Not recorded"})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Tasks Completed"}),h.careSheet.tasksCompleted&&h.careSheet.tasksCompleted.length>0?s.jsx("div",{className:"flex flex-wrap gap-1",children:h.careSheet.tasksCompleted.map((Y,xe)=>s.jsx(ne,{variant:"secondary",className:"text-xs",children:Y},xe))}):s.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No tasks recorded"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Observations / Notes"}),s.jsx("div",{className:"p-3 bg-muted rounded-lg",children:s.jsx("p",{className:"text-sm",children:h.careSheet.observations||"No observations recorded"})})]}),h.careSheet.isHospitalDischarge&&s.jsxs("div",{className:"p-3 bg-red-500/10 rounded-lg border border-red-200",children:[s.jsxs("p",{className:"text-sm font-medium text-red-700 flex items-center gap-2",children:[s.jsx(Wr,{className:"w-4 h-4"}),"Hospital Discharge Visit"]}),h.careSheet.dischargeDocuments&&s.jsx(K,{variant:"link",size:"sm",className:"p-0 h-auto text-red-600 underline mt-1",onClick:()=>window.open(h.careSheet.dischargeDocuments,"_blank"),children:"View Discharge Documents"})]})]})]})})]})},Lye=()=>{const[e,t]=x.useState(""),[r,n]=x.useState(null),[a,i]=x.useState(null),o=x.useMemo(()=>{const h=gs(),f=zE(),m=new Map;return f.forEach(p=>{const y=p.orderingClient.email.toLowerCase(),v=m.get(y),b={id:p.id,date:p.date,startTime:p.startTime,endTime:p.endTime,status:p.status,services:p.serviceType,pswAssigned:p.pswAssigned};v?(v.orders.push(b),p.status==="completed"&&v.completedOrders++,(p.status==="active"||p.status==="pending")&&v.activeOrders++):m.set(y,{id:y,name:p.orderingClient.name,email:p.orderingClient.email,phone:p.orderingClient.phone,address:p.orderingClient.address,postalCode:p.orderingClient.postalCode,completedOrders:p.status==="completed"?1:0,activeOrders:p.status==="active"||p.status==="pending"?1:0,orders:[b]})}),h.forEach(p=>{if(p.careSheetEmailTo){const y=p.careSheetEmailTo.toLowerCase(),v=m.get(y),b={id:p.id,date:p.scheduledDate,startTime:p.scheduledStart,endTime:p.scheduledEnd,status:p.status,services:p.services,pswAssigned:p.pswName,careSheet:p.careSheet};if(v){if(!v.orders.find(N=>N.id===p.id))v.orders.push(b),p.status==="completed"&&v.completedOrders++;else{const N=v.orders.find(j=>j.id===p.id);N&&(N.careSheet=p.careSheet)}(!v.lastServiceDate||p.scheduledDate>v.lastServiceDate)&&(v.lastServiceDate=p.scheduledDate)}else m.set(y,{id:y,name:p.clientName,email:p.careSheetEmailTo,phone:"",address:p.patientAddress,postalCode:p.postalCode,completedOrders:p.status==="completed"?1:0,activeOrders:0,lastServiceDate:p.scheduledDate,orders:[b]})}}),m.forEach(p=>{if(p.orders.sort((y,v)=>v.date.localeCompare(y.date)),p.orders.length>0&&!p.lastServiceDate){const y=p.orders.find(v=>v.status==="completed");y&&(p.lastServiceDate=y.date)}}),Array.from(m.values()).sort((p,y)=>(y.lastServiceDate||"").localeCompare(p.lastServiceDate||""))},[]),l=x.useMemo(()=>{if(!e.trim())return o;const h=e.toLowerCase();return o.filter(f=>f.name.toLowerCase().includes(h)||f.email.toLowerCase().includes(h)||f.phone.includes(h)||f.postalCode.toLowerCase().includes(h))},[o,e]),c=h=>{try{return Ze(un(h),"MMM d, yyyy")}catch{return h}},d=h=>{switch(h){case"completed":return s.jsx(ne,{className:"bg-primary/10 text-primary border-primary/30",children:"Completed"});case"active":case"in-progress":return s.jsx(ne,{className:"bg-emerald-500/10 text-emerald-600 border-emerald-200",children:"Active"});case"pending":return s.jsx(ne,{className:"bg-amber-500/10 text-amber-600 border-amber-200",children:"Pending"});case"cancelled":return s.jsx(ne,{className:"bg-red-500/10 text-red-600 border-red-200",children:"Cancelled"});default:return s.jsx(ne,{variant:"outline",children:h})}};return r?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(K,{variant:"ghost",size:"icon",onClick:()=>n(null),children:s.jsx($n,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-foreground",children:r.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:r.email})]})]}),s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"p-4 space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(hn,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{children:r.email})]}),r.phone&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Fn,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("a",{href:`tel:${r.phone}`,className:"text-primary hover:underline",children:r.phone})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm col-span-2",children:[s.jsx(St,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{children:r.address})]})]}),s.jsxs("div",{className:"flex gap-4 pt-3 border-t border-border",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-primary",children:r.completedOrders}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:r.activeOrders}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Active"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-foreground",children:r.orders.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Orders"})]})]})]})}),s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{children:s.jsx(Ee,{className:"text-base",children:"Order History"})}),s.jsx(Q,{className:"space-y-3",children:r.orders.map(h=>{var f,m;return s.jsxs("div",{className:`p-4 rounded-lg border ${(f=h.careSheet)!=null&&f.isHospitalDischarge?"border-red-500 bg-red-50/50 dark:bg-red-950/20":"border-border"}`,children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-mono font-bold text-sm",children:h.id}),((m=h.careSheet)==null?void 0:m.isHospitalDischarge)&&s.jsx(ne,{className:"bg-red-500/10 text-red-600 border-red-200 text-xs",children:"Hospital Discharge"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[s.jsx(Lt,{className:"w-3 h-3"}),s.jsx("span",{children:c(h.date)}),s.jsx(Qe,{className:"w-3 h-3 ml-2"}),s.jsxs("span",{children:[h.startTime," - ",h.endTime]})]})]}),d(h.status)]}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:h.services.map((p,y)=>s.jsx(ne,{variant:"outline",className:"text-xs",children:typeof p=="string"&&p.includes("-")?Xh(p):p},y))}),s.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-border",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"PSW: "}),s.jsx("span",{className:"font-medium",children:h.pswAssigned||"Unassigned"})]}),h.careSheet&&s.jsxs(K,{variant:"ghost",size:"sm",className:"text-primary",onClick:()=>i({careSheet:h.careSheet,orderId:h.id,date:h.date}),children:[s.jsx(zt,{className:"w-4 h-4 mr-1"}),"View Care Sheet"]})]})]},h.id)})})]}),s.jsx(hr,{open:!!a,onOpenChange:()=>i(null),children:s.jsxs(or,{className:"max-w-lg",children:[s.jsx(lr,{children:s.jsxs(cr,{className:"flex items-center gap-2",children:[s.jsx(zt,{className:"w-5 h-5 text-primary"}),"Care Sheet - ",a==null?void 0:a.orderId]})}),a&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:c(a.date)}),a.careSheet.isHospitalDischarge&&s.jsxs("div",{className:"p-3 bg-red-500/10 rounded-lg border border-red-200",children:[s.jsxs("div",{className:"flex items-center gap-2 text-red-700 dark:text-red-400 font-medium",children:[s.jsx(At,{className:"w-4 h-4"}),"Hospital/Doctor Discharge"]}),a.careSheet.dischargeDocuments&&s.jsx(K,{variant:"link",className:"p-0 h-auto text-red-600",onClick:()=>window.open(a.careSheet.dischargeDocuments,"_blank"),children:"View Discharge Documents"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Mood on Arrival"}),s.jsx("p",{className:"font-medium capitalize",children:a.careSheet.moodOnArrival})]}),s.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Mood on Departure"}),s.jsx("p",{className:"font-medium capitalize",children:a.careSheet.moodOnDeparture})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium mb-2",children:"Tasks Completed"}),s.jsx("div",{className:"space-y-1",children:a.careSheet.tasksCompleted.map((h,f)=>s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Kt,{className:"w-4 h-4 text-primary"}),s.jsx("span",{children:h})]},f))})]}),a.careSheet.observations&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium mb-2",children:"Observations"}),s.jsx("p",{className:"text-sm text-muted-foreground p-3 bg-muted rounded-lg",children:a.careSheet.observations})]}),s.jsxs("div",{className:"text-sm text-muted-foreground pt-3 border-t border-border",children:[s.jsxs("p",{children:["PSW: ",a.careSheet.pswFirstName]}),s.jsxs("p",{children:["Office: ",a.careSheet.officeNumber]})]})]})]})})]}):s.jsx("div",{className:"space-y-6",children:s.jsxs(J,{className:"shadow-card",children:[s.jsxs(ke,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(pn,{className:"w-5 h-5 text-primary"}),"Client Records"]}),s.jsx(Ge,{children:"Searchable database of all clients with order history and care sheet access."})]}),s.jsxs(Q,{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(pe,{placeholder:"Search by name, email, phone, or postal code...",value:e,onChange:h=>t(h.target.value),className:"pl-10"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[s.jsx("p",{className:"text-2xl font-bold text-primary",children:o.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Clients"})]}),s.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[s.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:o.filter(h=>h.activeOrders>0).length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"With Active Orders"})]}),s.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[s.jsx("p",{className:"text-2xl font-bold text-foreground",children:o.reduce((h,f)=>h+f.completedOrders,0)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed Orders"})]})]}),s.jsx("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:l.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e?"No clients match your search":"No clients found"}):l.map(h=>s.jsx("div",{onClick:()=>n(h),className:"p-4 rounded-lg border border-border hover:border-primary/50 hover:bg-muted/50 transition-colors cursor-pointer",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx($t,{className:"w-5 h-5 text-primary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-foreground",children:h.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:h.email})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"text-right text-sm",children:[s.jsxs("p",{className:"text-muted-foreground",children:[h.completedOrders," completed"]}),h.activeOrders>0&&s.jsxs(ne,{variant:"outline",className:"text-emerald-600 border-emerald-300",children:[h.activeOrders," active"]})]}),s.jsx(Pc,{className:"w-5 h-5 text-muted-foreground"})]})]})},h.id))})]})]})})},Fye=e=>{switch(e){case"banking":return s.jsx(ms,{className:"w-4 h-4"});case"health":return s.jsx(zt,{className:"w-4 h-4"});case"address":return s.jsx(St,{className:"w-4 h-4"});case"police_check":return s.jsx(mr,{className:"w-4 h-4"});case"payroll":return s.jsx(nu,{className:"w-4 h-4"});default:return s.jsx(Ms,{className:"w-4 h-4"})}},Bye=e=>{switch(e){case"view":return s.jsx(ne,{variant:"secondary",children:"View"});case"access":return s.jsx(ne,{variant:"outline",children:"Access"});case"update":return s.jsx(ne,{className:"bg-blue-100 text-blue-700 border-blue-200",children:"Update"});case"export":return s.jsx(ne,{className:"bg-purple-100 text-purple-700 border-purple-200",children:"Export"});case"decrypt":return s.jsx(ne,{className:"bg-amber-100 text-amber-700 border-amber-200",children:"Decrypt"});default:return s.jsx(ne,{variant:"outline",children:e})}},zye=e=>{switch(e){case"admin":return s.jsx(ne,{className:"bg-red-100 text-red-700 border-red-200",children:"Admin"});case"psw":return s.jsx(ne,{className:"bg-green-100 text-green-700 border-green-200",children:"PSW"});case"client":return s.jsx(ne,{className:"bg-blue-100 text-blue-700 border-blue-200",children:"Client"});default:return s.jsx(ne,{variant:"outline",children:e})}},Uye=()=>{const[e,t]=x.useState([]),[r,n]=x.useState(""),[a,i]=x.useState("all"),[o,l]=x.useState("all"),[c,d]=x.useState("all");x.useEffect(()=>{t(Moe(200))},[]);const h=x.useMemo(()=>e.filter(p=>{var y,v;if(r){const b=r.toLowerCase();if(!(p.userName.toLowerCase().includes(b)||((y=p.targetDescription)==null?void 0:y.toLowerCase().includes(b))||((v=p.targetId)==null?void 0:v.toLowerCase().includes(b))))return!1}return!(a!=="all"&&p.dataType!==a||o!=="all"&&p.action!==o||c!=="all"&&p.userRole!==c)}),[e,r,a,o,c]),f=x.useMemo(()=>{const p=$y(new Date,1),y=e.filter(v=>new Date(v.timestamp)>p);return{total:e.length,last24h:y.length,bankingAccess:e.filter(v=>v.dataType==="banking").length,healthAccess:e.filter(v=>v.dataType==="health").length,decryptions:e.filter(v=>v.action==="decrypt").length,exports:e.filter(v=>v.action==="export").length}},[e]),m=()=>{const p=["Timestamp","User","Role","Action","Data Type","Target","Description"],y=h.map(w=>[Ze(un(w.timestamp),"yyyy-MM-dd HH:mm:ss"),w.userName,w.userRole,w.action,w.dataType,w.targetId||"",w.targetDescription||""]),v=[p.join(","),...y.map(w=>w.map(S=>`"${S}"`).join(","))].join(`
`),b=new Blob([v],{type:"text/csv"}),N=URL.createObjectURL(b),j=document.createElement("a");j.href=N,j.download=`security_audit_${Ze(new Date,"yyyy-MM-dd")}.csv`,j.click(),URL.revokeObjectURL(N)};return s.jsxs("div",{className:"space-y-6",children:[s.jsx(J,{className:"border-amber-200 bg-amber-50 dark:bg-amber-950/20 dark:border-amber-800",children:s.jsx(Q,{className:"p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(mr,{className:"w-5 h-5 text-amber-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-amber-800 dark:text-amber-200",children:"PHIPA Security Audit Log"}),s.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:"This log records all access to sensitive health and banking information. Access to this page is restricted to authorized administrators only."})]})]})})}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3 sm:gap-4",children:[s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"p-4 text-center",children:[s.jsx("p",{className:"text-2xl font-bold",children:f.total}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Events"})]})}),s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"p-4 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-amber-600",children:f.last24h}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 24 Hours"})]})}),s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"p-4 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:f.bankingAccess}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Banking Access"})]})}),s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"p-4 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-green-600",children:f.healthAccess}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Health Access"})]})}),s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"p-4 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:f.decryptions}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Decryptions"})]})}),s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"p-4 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-red-600",children:f.exports}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Data Exports"})]})})]}),s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(Jn,{className:"w-5 h-5 text-primary"}),"Security Event Log"]}),s.jsx(Ge,{children:"All sensitive data access events are recorded here"})]}),s.jsxs(K,{variant:"outline",onClick:m,children:[s.jsx(nu,{className:"w-4 h-4 mr-2"}),"Export Log"]})]})}),s.jsxs(Q,{children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4 flex-wrap",children:[s.jsx("div",{className:"flex-1",children:s.jsx(pe,{placeholder:"Search by user name or description...",value:r,onChange:p=>n(p.target.value),className:"w-full"})}),s.jsxs(Xt,{value:a,onValueChange:i,children:[s.jsx(qt,{className:"w-[150px]",children:s.jsx(Jt,{placeholder:"Data Type"})}),s.jsxs(Gt,{children:[s.jsx(_e,{value:"all",children:"All Types"}),s.jsx(_e,{value:"banking",children:"Banking"}),s.jsx(_e,{value:"health",children:"Health"}),s.jsx(_e,{value:"address",children:"Address"}),s.jsx(_e,{value:"payroll",children:"Payroll"}),s.jsx(_e,{value:"police_check",children:"Police Check"})]})]}),s.jsxs(Xt,{value:o,onValueChange:l,children:[s.jsx(qt,{className:"w-[150px]",children:s.jsx(Jt,{placeholder:"Action"})}),s.jsxs(Gt,{children:[s.jsx(_e,{value:"all",children:"All Actions"}),s.jsx(_e,{value:"view",children:"View"}),s.jsx(_e,{value:"access",children:"Access"}),s.jsx(_e,{value:"update",children:"Update"}),s.jsx(_e,{value:"export",children:"Export"}),s.jsx(_e,{value:"decrypt",children:"Decrypt"})]})]}),s.jsxs(Xt,{value:c,onValueChange:d,children:[s.jsx(qt,{className:"w-[130px]",children:s.jsx(Jt,{placeholder:"Role"})}),s.jsxs(Gt,{children:[s.jsx(_e,{value:"all",children:"All Roles"}),s.jsx(_e,{value:"admin",children:"Admin"}),s.jsx(_e,{value:"psw",children:"PSW"}),s.jsx(_e,{value:"client",children:"Client"})]})]})]}),s.jsx(Ps,{className:"h-[500px]",children:h.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(mr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"No security events recorded"})]}):s.jsxs(Sn,{children:[s.jsx(Cn,{children:s.jsxs(Mt,{children:[s.jsx(Pe,{children:"Timestamp"}),s.jsx(Pe,{children:"User"}),s.jsx(Pe,{children:"Role"}),s.jsx(Pe,{children:"Action"}),s.jsx(Pe,{children:"Data Type"}),s.jsx(Pe,{children:"Description"})]})}),s.jsx(Pn,{children:h.map(p=>s.jsxs(Mt,{children:[s.jsx(be,{className:"text-xs whitespace-nowrap",children:Ze(un(p.timestamp),"MMM d, HH:mm:ss")}),s.jsx(be,{className:"font-medium",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($t,{className:"w-3 h-3 text-muted-foreground"}),p.userName]})}),s.jsx(be,{children:zye(p.userRole)}),s.jsx(be,{children:Bye(p.action)}),s.jsx(be,{children:s.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[Fye(p.dataType),s.jsx("span",{className:"text-xs capitalize",children:p.dataType.replace("_"," ")})]})}),s.jsx(be,{className:"max-w-[300px] truncate text-xs text-muted-foreground",children:p.targetDescription||p.targetId||"-"})]},p.id))})]})})]})]})]})};var aj="Switch",[Wye,kze]=sn(aj),[Hye,Vye]=Wye(aj),AH=x.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:d,form:h,...f}=e,[m,p]=x.useState(null),y=nt(t,w=>p(w)),v=x.useRef(!1),b=m?h||!!m.closest("form"):!0,[N,j]=Ln({prop:a,defaultProp:i??!1,onChange:d,caller:aj});return s.jsxs(Hye,{scope:r,checked:N,disabled:l,children:[s.jsx(ze.button,{type:"button",role:"switch","aria-checked":N,"aria-required":o,"data-state":RH(N),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:y,onClick:Ie(e.onClick,w=>{j(S=>!S),b&&(v.current=w.isPropagationStopped(),v.current||w.stopPropagation())})}),b&&s.jsx(IH,{control:m,bubbles:!v.current,name:n,value:c,checked:N,required:o,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});AH.displayName=aj;var OH="SwitchThumb",MH=x.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,a=Vye(OH,r);return s.jsx(ze.span,{"data-state":RH(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t})});MH.displayName=OH;var qye="SwitchBubbleInput",IH=x.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...a},i)=>{const o=x.useRef(null),l=nt(o,i),c=Ow(r),d=yw(t);return x.useEffect(()=>{const h=o.current;if(!h)return;const f=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==r&&p){const y=new Event("click",{bubbles:n});p.call(h,r),h.dispatchEvent(y)}},[c,r,n]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});IH.displayName=qye;function RH(e){return e?"checked":"unchecked"}var DH=AH,Gye=MH;const mn=x.forwardRef(({className:e,...t},r)=>s.jsx(DH,{className:Re("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...t,ref:r,children:s.jsx(Gye,{className:Re("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));mn.displayName=DH.displayName;const Kye=e=>({task_name:e.name,included_minutes:e.includedMinutes,base_cost:e.baseCost,is_hospital_doctor:e.isHospitalDoctor,service_category:e.serviceCategory,requires_discharge_upload:e.requiresDischargeUpload,apply_hst:e.applyHST,is_active:!0,legacy_extra_charge:0}),Yye=async e=>{const t=Kye(e),{data:r,error:n}=await de.from("service_tasks").insert([t]).select().single();if(n)throw console.error("Error creating service task:",n),n;return ST(),r?_T(r):null},Zye=async(e,t)=>{const r={};t.name!==void 0&&(r.task_name=t.name),t.includedMinutes!==void 0&&(r.included_minutes=t.includedMinutes),t.baseCost!==void 0&&(r.base_cost=t.baseCost),t.isHospitalDoctor!==void 0&&(r.is_hospital_doctor=t.isHospitalDoctor),t.serviceCategory!==void 0&&(r.service_category=t.serviceCategory),t.requiresDischargeUpload!==void 0&&(r.requires_discharge_upload=t.requiresDischargeUpload),t.applyHST!==void 0&&(r.apply_hst=t.applyHST);const{data:n,error:a}=await de.from("service_tasks").update(r).eq("id",e).select().single();if(a)throw console.error("Error updating service task:",a),a;return ST(),n?_T(n):null},Xye=async e=>{const{error:t}=await de.from("service_tasks").update({is_active:!1}).eq("id",e);if(t)throw console.error("Error deleting service task:",t),t;return ST(),!0},_T=e=>({id:e.id,name:e.task_name,includedMinutes:e.included_minutes,baseCost:e.base_cost,isHospitalDoctor:e.is_hospital_doctor,serviceCategory:e.service_category,requiresDischargeUpload:e.requires_discharge_upload,applyHST:e.apply_hst}),ST=async()=>{const{data:e}=await de.from("service_tasks").select("*").eq("is_active",!0).order("task_name");if(e){const t=e.map(r=>_T(r));localStorage.setItem("adminTasks",JSON.stringify(t))}},Jye=()=>{const{tasks:e,loading:t,error:r,refetch:n}=vx(),[a,i]=x.useState(null),[o,l]=x.useState(null),[c,d]=x.useState(!1),[h,f]=x.useState(!1),[m,p]=x.useState({id:"",name:"",includedMinutes:30,baseCost:35,isHospitalDoctor:!1,serviceCategory:"standard",requiresDischargeUpload:!1,applyHST:!1}),y=w=>{i(w.id),l({...w})},v=async()=>{if(o){f(!0);try{await Zye(o.id,o),await n(),i(null),l(null),Z.success("Task updated successfully!")}catch(w){Z.error("Failed to update task"),console.error(w)}finally{f(!1)}}},b=()=>{i(null),l(null)},N=async w=>{f(!0);try{await Xye(w),await n(),Z.success("Task deleted!")}catch(S){Z.error("Failed to delete task"),console.error(S)}finally{f(!1)}},j=async()=>{if(!m.name.trim()){Z.error("Task name is required");return}if(e.some(w=>w.name.toLowerCase()===m.name.toLowerCase())){Z.error("A task with this name already exists");return}f(!0);try{await Yye(m),await n(),d(!1),p({id:"",name:"",includedMinutes:30,baseCost:35,isHospitalDoctor:!1,serviceCategory:"standard",requiresDischargeUpload:!1,applyHST:!1}),Z.success("New task added!")}catch(w){Z.error("Failed to add task"),console.error(w)}finally{f(!1)}};return t?s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx(Ut,{className:"w-8 h-8 animate-spin text-primary"}),s.jsx("span",{className:"ml-2 text-muted-foreground",children:"Loading tasks..."})]}):r?s.jsx(J,{className:"shadow-card border-destructive/50 bg-destructive/5",children:s.jsxs(Q,{className:"p-6",children:[s.jsxs("p",{className:"text-destructive",children:["Error loading tasks: ",r]}),s.jsx(K,{variant:"outline",className:"mt-4",onClick:()=>n(),children:"Retry"})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx(J,{className:"shadow-card border-green-200 bg-green-50/50 dark:bg-green-950/20",children:s.jsx(Q,{className:"p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(JF,{className:"w-5 h-5 text-green-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-foreground",children:"Cloud-Synced Tasks"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Tasks are stored in the database and sync across all devices. Changes are saved automatically."})]})]})})}),s.jsx(J,{className:"shadow-card border-amber-200 bg-amber-50/50 dark:bg-amber-950/20",children:s.jsx(Q,{className:"p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(mr,{className:"w-5 h-5 text-amber-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-foreground",children:"Admin-Only Settings"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Only users with the Admin role can view and edit these pricing and task settings. Changes here affect all new bookings immediately after saving."})]})]})})}),s.jsx(J,{className:"shadow-card border-primary/20 bg-primary/5",children:s.jsx(Q,{className:"p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Qe,{className:"w-5 h-5 text-primary mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-foreground",children:"First Hour Rule"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"As long as total task minutes  60, price stays at base 1-hour rate. If tasks exceed 60 minutes, additional time is billed in 15-minute increments."})]})]})})}),s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(Qe,{className:"w-5 h-5 text-primary"}),"Task Management"]}),s.jsx(Ge,{children:"Define task names, included minutes, and base costs"})]}),s.jsxs(K,{variant:"brand",size:"sm",onClick:()=>d(!0),disabled:c,children:[s.jsx(xo,{className:"w-4 h-4 mr-2"}),"Add Task"]})]})}),s.jsx(Q,{children:s.jsxs(Sn,{children:[s.jsx(Cn,{children:s.jsxs(Mt,{children:[s.jsx(Pe,{children:"Task Name"}),s.jsx(Pe,{className:"text-center",children:"Minutes"}),s.jsx(Pe,{className:"text-center",children:"Add-on Price"}),s.jsx(Pe,{className:"text-center",children:"Category"}),s.jsx(Pe,{className:"text-center",children:"HST 13%"}),s.jsx(Pe,{className:"text-center",children:"Discharge Req."}),s.jsx(Pe,{className:"text-right",children:"Actions"})]})}),s.jsxs(Pn,{children:[c&&s.jsxs(Mt,{className:"bg-primary/5",children:[s.jsx(be,{children:s.jsx(pe,{placeholder:"Task name",value:m.name,onChange:w=>p(S=>({...S,name:w.target.value})),className:"h-9"})}),s.jsx(be,{children:s.jsx(pe,{type:"number",min:5,max:240,step:5,value:m.includedMinutes,onChange:w=>p(S=>({...S,includedMinutes:parseInt(w.target.value)||30})),className:"h-9 w-20 mx-auto text-center"})}),s.jsx(be,{children:s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx("span",{className:"text-muted-foreground",children:"$"}),s.jsx(pe,{type:"number",min:0,step:1,value:m.baseCost,onChange:w=>p(S=>({...S,baseCost:parseInt(w.target.value)||0})),className:"h-9 w-20 text-center"})]})}),s.jsx(be,{children:s.jsxs(Xt,{value:m.serviceCategory,onValueChange:w=>p(S=>({...S,serviceCategory:w,isHospitalDoctor:w!=="standard",requiresDischargeUpload:w==="hospital-discharge"})),children:[s.jsx(qt,{className:"h-9 w-32 mx-auto",children:s.jsx(Jt,{})}),s.jsxs(Gt,{children:[s.jsx(_e,{value:"standard",children:"Standard"}),s.jsx(_e,{value:"doctor-appointment",children:"Doctor Appt"}),s.jsx(_e,{value:"hospital-discharge",children:"Hospital Discharge"})]})]})}),s.jsx(be,{className:"text-center",children:s.jsx(mn,{checked:m.applyHST,onCheckedChange:w=>p(S=>({...S,applyHST:w}))})}),s.jsx(be,{className:"text-center",children:s.jsx(mn,{checked:m.requiresDischargeUpload,onCheckedChange:w=>p(S=>({...S,requiresDischargeUpload:w})),disabled:m.serviceCategory!=="hospital-discharge"})}),s.jsx(be,{className:"text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx(K,{variant:"brand",size:"sm",onClick:j,children:s.jsx(In,{className:"w-4 h-4"})}),s.jsx(K,{variant:"ghost",size:"sm",onClick:()=>d(!1),children:s.jsx(Hr,{className:"w-4 h-4"})})]})})]}),e.map(w=>s.jsx(Mt,{children:a===w.id&&o?s.jsxs(s.Fragment,{children:[s.jsx(be,{children:s.jsx(pe,{value:o.name,onChange:S=>l(C=>C?{...C,name:S.target.value}:null),className:"h-9"})}),s.jsx(be,{children:s.jsx(pe,{type:"number",min:5,max:240,step:5,value:o.includedMinutes,onChange:S=>l(C=>C?{...C,includedMinutes:parseInt(S.target.value)||30}:null),className:"h-9 w-20 mx-auto text-center"})}),s.jsx(be,{children:s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx("span",{className:"text-muted-foreground",children:"$"}),s.jsx(pe,{type:"number",min:0,step:1,value:o.baseCost,onChange:S=>l(C=>C?{...C,baseCost:parseInt(S.target.value)||0}:null),className:"h-9 w-20 text-center"})]})}),s.jsx(be,{children:s.jsxs(Xt,{value:o.serviceCategory||"standard",onValueChange:S=>l(C=>C?{...C,serviceCategory:S,isHospitalDoctor:S!=="standard",requiresDischargeUpload:S==="hospital-discharge"}:null),children:[s.jsx(qt,{className:"h-9 w-32 mx-auto",children:s.jsx(Jt,{})}),s.jsxs(Gt,{children:[s.jsx(_e,{value:"standard",children:"Standard"}),s.jsx(_e,{value:"doctor-appointment",children:"Doctor Appt"}),s.jsx(_e,{value:"hospital-discharge",children:"Hospital Discharge"})]})]})}),s.jsx(be,{className:"text-center",children:s.jsx(mn,{checked:o.applyHST||!1,onCheckedChange:S=>l(C=>C?{...C,applyHST:S}:null)})}),s.jsx(be,{className:"text-center",children:s.jsx(mn,{checked:o.requiresDischargeUpload||!1,onCheckedChange:S=>l(C=>C?{...C,requiresDischargeUpload:S}:null)})}),s.jsx(be,{className:"text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx(K,{variant:"brand",size:"sm",onClick:v,children:s.jsx(In,{className:"w-4 h-4"})}),s.jsx(K,{variant:"ghost",size:"sm",onClick:b,children:s.jsx(Hr,{className:"w-4 h-4"})})]})})]}):s.jsxs(s.Fragment,{children:[s.jsx(be,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:w.name}),w.isHospitalDoctor&&s.jsx(ne,{variant:"outline",className:"text-xs border-primary/30 text-primary",children:w.serviceCategory==="hospital-discharge"?s.jsxs(s.Fragment,{children:[s.jsx(Ld,{className:"w-3 h-3 mr-1"}),"Discharge"]}):s.jsxs(s.Fragment,{children:[s.jsx(Vh,{className:"w-3 h-3 mr-1"}),"Doctor"]})})]})}),s.jsx(be,{className:"text-center",children:s.jsxs(ne,{variant:"secondary",children:[w.includedMinutes," min"]})}),s.jsx(be,{className:"text-center",children:s.jsxs("span",{className:"font-medium text-primary",children:["$",w.baseCost]})}),s.jsx(be,{className:"text-center",children:s.jsx(ne,{variant:w.serviceCategory==="hospital-discharge"?"default":w.serviceCategory==="doctor-appointment"?"secondary":"outline",className:w.serviceCategory==="hospital-discharge"?"bg-amber-500":"",children:w.serviceCategory==="hospital-discharge"?"Hospital":w.serviceCategory==="doctor-appointment"?"Doctor":"Standard"})}),s.jsx(be,{className:"text-center",children:w.applyHST?s.jsxs(ne,{className:"bg-green-500/10 text-green-600 border-green-200 text-xs",children:[s.jsx(IS,{className:"w-3 h-3 mr-1"}),"+13%"]}):s.jsx(ne,{variant:"outline",className:"text-xs text-muted-foreground",children:"Exempt"})}),s.jsx(be,{className:"text-center",children:w.requiresDischargeUpload?s.jsxs(ne,{variant:"destructive",className:"text-xs",children:[s.jsx(iee,{className:"w-3 h-3 mr-1"}),"Required"]}):s.jsx("span",{className:"text-muted-foreground",children:""})}),s.jsx(be,{className:"text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx(K,{variant:"ghost",size:"sm",onClick:()=>y(w),children:s.jsx(Ck,{className:"w-4 h-4"})}),s.jsx(K,{variant:"ghost",size:"sm",onClick:()=>N(w.id),className:"text-destructive hover:text-destructive",children:s.jsx(yc,{className:"w-4 h-4"})})]})})]})},w.id))]})]})})]}),s.jsx(J,{className:"shadow-card",children:s.jsx(Q,{className:"p-4",children:s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-primary",children:e.length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Tasks"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-primary",children:e.filter(w=>w.isHospitalDoctor).length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Hospital/Doctor"})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-2xl font-bold text-primary",children:["$",Math.round(e.reduce((w,S)=>w+S.baseCost,0)/e.length||0)]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg. Base Cost"})]})]})})})]})},Qye=[{id:"holidays-2026",name:"Holiday Season 2026",enabled:!1,multiplier:1.5,startDate:"2026-12-20",endDate:"2026-01-03",stackable:!0},{id:"weekends",name:"Weekend Premium",enabled:!1,multiplier:1.15,daysOfWeek:[0,6],stackable:!0},{id:"evenings",name:"Evening Hours",enabled:!1,multiplier:1.1,startTime:"18:00",endTime:"22:00",stackable:!0}],UI=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],e0e=()=>{const[e,t]=x.useState(()=>{const b=localStorage.getItem("surge_schedule_rules");return b?JSON.parse(b):Qye}),[r,n]=x.useState(null),[a,i]=x.useState(null),o=b=>{t(b),localStorage.setItem("surge_schedule_rules",JSON.stringify(b))},l=(b,N)=>{const j=e.map(w=>w.id===b?{...w,enabled:N}:w);o(j),Z.success(N?"Surge rule enabled":"Surge rule disabled")},c=b=>{n(b.id),i({...b})},d=()=>{if(!a)return;const b=e.map(N=>N.id===a.id?a:N);o(b),n(null),i(null),Z.success("Surge rule updated")},h=()=>{n(null),i(null)},f=()=>{const b={id:`rule-${Date.now()}`,name:"New Surge Rule",enabled:!1,multiplier:1.2,stackable:!1};o([...e,b]),n(b.id),i(b)},m=b=>{const N=e.filter(j=>j.id!==b);o(N),Z.success("Surge rule deleted")},p=b=>{if(!a)return;const N=a.daysOfWeek||[],j=N.includes(b)?N.filter(w=>w!==b):[...N,b].sort();i({...a,daysOfWeek:j})},y=()=>e.filter(b=>b.enabled).length,v=()=>e.filter(b=>b.enabled&&b.stackable).reduce((b,N)=>b*N.multiplier,1);return s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(qh,{className:"w-5 h-5 text-amber-500"}),"Surge Scheduling (Time-Based)"]}),s.jsx(Ge,{children:"Configure automatic surge pricing based on date/time rules"})]}),s.jsxs(K,{variant:"outline",size:"sm",onClick:f,children:[s.jsx(xo,{className:"w-4 h-4 mr-2"}),"Add Rule"]})]})}),s.jsxs(Q,{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-4 p-4 bg-muted rounded-lg",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-primary",children:y()}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Active Rules"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"text-2xl font-bold text-amber-600",children:[((v()-1)*100).toFixed(0),"%"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Max Stacked Surge"})]})]}),s.jsx("div",{className:"space-y-3",children:e.map(b=>s.jsx("div",{className:`p-4 border rounded-lg transition-all ${b.enabled?"border-amber-300 bg-amber-50/50 dark:bg-amber-950/20":"border-border"}`,children:r===b.id&&a?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(oe,{className:"text-xs",children:"Rule Name"}),s.jsx(pe,{value:a.name,onChange:N=>i({...a,name:N.target.value}),className:"h-9"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(oe,{className:"text-xs",children:"Multiplier"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pe,{type:"number",min:1,max:3,step:.05,value:a.multiplier,onChange:N=>i({...a,multiplier:parseFloat(N.target.value)||1}),className:"h-9 w-24"}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:["= ",((a.multiplier-1)*100).toFixed(0),"% increase"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs(oe,{className:"text-xs flex items-center gap-1",children:[s.jsx(Lt,{className:"w-3 h-3"}),"Start Date (Optional)"]}),s.jsx(pe,{type:"date",value:a.startDate||"",onChange:N=>i({...a,startDate:N.target.value||void 0}),className:"h-9"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs(oe,{className:"text-xs flex items-center gap-1",children:[s.jsx(Lt,{className:"w-3 h-3"}),"End Date (Optional)"]}),s.jsx(pe,{type:"date",value:a.endDate||"",onChange:N=>i({...a,endDate:N.target.value||void 0}),className:"h-9"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs(oe,{className:"text-xs flex items-center gap-1",children:[s.jsx(Qe,{className:"w-3 h-3"}),"Start Time (Optional)"]}),s.jsx(pe,{type:"time",value:a.startTime||"",onChange:N=>i({...a,startTime:N.target.value||void 0}),className:"h-9"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs(oe,{className:"text-xs flex items-center gap-1",children:[s.jsx(Qe,{className:"w-3 h-3"}),"End Time (Optional)"]}),s.jsx(pe,{type:"time",value:a.endTime||"",onChange:N=>i({...a,endTime:N.target.value||void 0}),className:"h-9"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{className:"text-xs",children:"Days of Week (Optional)"}),s.jsx("div",{className:"flex gap-1",children:UI.map((N,j)=>s.jsx(K,{variant:(a.daysOfWeek||[]).includes(j)?"default":"outline",size:"sm",className:"w-10 h-8 text-xs",onClick:()=>p(j),children:N},N))})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"Stackable"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Can combine with other active surge rules"})]}),s.jsx(mn,{checked:a.stackable,onCheckedChange:N=>i({...a,stackable:N})})]}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsxs(K,{variant:"ghost",size:"sm",onClick:h,children:[s.jsx(Hr,{className:"w-4 h-4 mr-1"}),"Cancel"]}),s.jsxs(K,{variant:"brand",size:"sm",onClick:d,children:[s.jsx(In,{className:"w-4 h-4 mr-1"}),"Save"]})]})]}):s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(mn,{checked:b.enabled,onCheckedChange:N=>l(b.id,N)}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"font-medium text-foreground",children:b.name}),s.jsxs(ne,{variant:b.enabled?"default":"secondary",className:b.enabled?"bg-amber-500":"",children:["+",((b.multiplier-1)*100).toFixed(0),"%"]}),b.stackable&&s.jsx(ne,{variant:"outline",className:"text-xs",children:"Stackable"})]}),s.jsxs("div",{className:"flex gap-2 mt-1 text-xs text-muted-foreground",children:[b.startDate&&b.endDate&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Lt,{className:"w-3 h-3"}),b.startDate," to ",b.endDate]}),b.startTime&&b.endTime&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Qe,{className:"w-3 h-3"}),b.startTime," - ",b.endTime]}),b.daysOfWeek&&b.daysOfWeek.length>0&&s.jsx("span",{children:b.daysOfWeek.map(N=>UI[N]).join(", ")})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(K,{variant:"ghost",size:"sm",onClick:()=>c(b),children:s.jsx(Ck,{className:"w-4 h-4"})}),s.jsx(K,{variant:"ghost",size:"sm",onClick:()=>m(b.id),className:"text-destructive hover:text-destructive",children:s.jsx(yc,{className:"w-4 h-4"})})]})]})},b.id))}),e.length===0&&s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(qh,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No surge rules configured"}),s.jsx("p",{className:"text-xs",children:"Add rules to automatically adjust pricing"})]})]})]})},t0e=({enabled:e,multiplier:t,leadTimeMinutes:r,onToggle:n,onMultiplierChange:a,onLeadTimeChange:i,isSaving:o=!1})=>{const l=Math.round((t-1)*100),c=35,d=e?c*t:c,h=m=>{const p=parseInt(m,10);!isNaN(p)&&p>=0&&p<=100&&a(1+p/100)},f=m=>{const p=parseInt(m,10);!isNaN(p)&&p>=0&&p<=240&&(i==null||i(p))};return s.jsxs(J,{className:`shadow-card ${e?"border-amber-500 border-2":""}`,children:[s.jsx(ke,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(qh,{className:`w-5 h-5 ${e?"text-amber-500":"text-primary"}`}),"Rush/ASAP Pricing",o&&s.jsx(ne,{variant:"secondary",className:"ml-2 text-xs animate-pulse",children:"Saving..."})]}),s.jsx(Ge,{children:'Apply a surge fee when clients select "I need this ASAP"'})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:`text-sm font-medium ${e?"text-amber-600":"text-muted-foreground"}`,children:e?"ENABLED":"DISABLED"}),s.jsx(mn,{checked:e,onCheckedChange:n,disabled:o})]})]})}),s.jsxs(Q,{className:"space-y-4",children:[e&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"asapPercentage",children:"Rush Fee (%)"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pe,{id:"asapPercentage",type:"number",min:0,max:100,step:5,value:l,onChange:m=>h(m.target.value),className:"w-24",disabled:o}),s.jsx("span",{className:"text-muted-foreground",children:"%"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(oe,{htmlFor:"leadTime",className:"flex items-center gap-1",children:[s.jsx(Qe,{className:"w-3 h-3"}),"Lead Time (min)"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pe,{id:"leadTime",type:"number",min:0,max:240,step:15,value:r,onChange:m=>f(m.target.value),className:"w-24",disabled:o}),s.jsx("span",{className:"text-muted-foreground text-xs",children:"from Now"})]})]})]}),s.jsxs("div",{className:"p-4 bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium text-amber-800 dark:text-amber-200 mb-2",children:"Live Preview"}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-700 dark:text-amber-300",children:[s.jsxs("span",{children:["$",c.toFixed(2)," base"]}),s.jsx("span",{children:""}),s.jsxs("span",{className:"font-semibold",children:["$",d.toFixed(2)," with ASAP"]}),s.jsxs("span",{className:"text-amber-600 dark:text-amber-400",children:["(+",l,"%)"]})]}),s.jsxs("p",{className:"text-xs text-amber-600/80 dark:text-amber-400/80 mt-2",children:["ASAP applies to bookings within ",r," minutes of the current time"]})]}),s.jsx("div",{className:"p-3 bg-emerald-50 dark:bg-emerald-950/20 border border-emerald-200 dark:border-emerald-800 rounded-lg",children:s.jsxs("p",{className:"text-xs text-emerald-700 dark:text-emerald-300 flex items-center gap-1",children:[s.jsx("span",{className:"font-medium",children:" Synced to Cloud"}),"  Changes persist across all devices"]})})]}),!e&&s.jsx("div",{className:"p-4 bg-muted rounded-lg",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"When disabled, the ASAP checkbox will still appear for dispatching priority, but no surge fee will be applied at checkout."})})]})]})},r0e=({pricing:e,onSurgeChange:t,onMinHoursChange:r,onDoctorEscortMinChange:n,onTaskDurationChange:a,onOvertimeRateChange:i,onOvertimeGraceChange:o,onOvertimeBlockChange:l,onRegionalSurgeToggle:c,onSurgeZoneUpdate:d,onAsapToggle:h,onAsapMultiplierChange:f,onAsapLeadTimeChange:m,asapLeadTimeMinutes:p=30,asapIsSaving:y,onSave:v,hasChanges:b})=>{var $,H,F;const[N,j]=x.useState(null),[w,S]=x.useState(null),[C,P]=x.useState([]);x.useEffect(()=>{P(au())},[]);const T=35,O=T*(e.overtimeRatePercentage/100),E=(R,z)=>{const G=(e.surgeZones||zu).map(ie=>ie.id===R?{...ie,enabled:z}:ie);d==null||d(G)},D=R=>{j(R.id),S({...R})},I=()=>{if(!w)return;const R=(e.surgeZones||zu).map(z=>z.id===w.id?w:z);d==null||d(R),j(null),S(null)},A=()=>{const R={id:`zone-${Date.now()}`,name:"New Surge Zone",enabled:!1,clientSurcharge:5,pswBonus:3,pswFlatBonus:10,postalCodePrefixes:[],cities:[]},z=[...e.surgeZones||zu,R];d==null||d(z),j(R.id),S(R)},V=R=>{const z=(e.surgeZones||zu).filter(G=>G.id!==R);d==null||d(z)},U=e.surgeZones||zu;return s.jsxs("div",{className:"space-y-6",children:[s.jsx(J,{className:"shadow-card border-primary/20 bg-primary/5",children:s.jsx(Q,{className:"p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Qe,{className:"w-5 h-5 text-primary mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-foreground",children:"Base Hour + Overtime Model"}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Every booking starts with a ",s.jsxs("strong",{className:"text-foreground",children:[e.minimumHours,"-hour base charge"]}),". If the PSW signs out more than ",e.overtimeGraceMinutes," minutes late, overtime is billed in ",e.overtimeBlockMinutes,"-minute blocks at ",e.overtimeRatePercentage,"% of the hourly rate (~$",O.toFixed(2),"/hr)."]})]})]})})}),s.jsx(t0e,{enabled:e.asapPricingEnabled??!0,multiplier:e.asapMultiplier??1.25,leadTimeMinutes:p,onToggle:R=>h==null?void 0:h(R),onMultiplierChange:R=>f==null?void 0:f(R),onLeadTimeChange:R=>m==null?void 0:m(R),isSaving:y}),s.jsxs(J,{className:"shadow-card",children:[s.jsxs(ke,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(Yo,{className:"w-5 h-5 text-primary"}),"Overtime Billing Rules (15-min Logic)"]}),s.jsx(Ge,{children:"Configure the grace period and overtime billing increments ($/4 blocks)"})]}),s.jsxs(Q,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"overtimeRate",children:"Overtime Rate (%)"}),s.jsx(pe,{id:"overtimeRate",type:"number",min:10,max:100,step:5,value:e.overtimeRatePercentage,onChange:R=>i(R.target.value)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"% of hourly rate"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"graceMinutes",children:"Grace Period (min)"}),s.jsx(pe,{id:"graceMinutes",type:"number",min:0,max:30,step:1,value:e.overtimeGraceMinutes,onChange:R=>o(R.target.value)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"No charge if under"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"blockMinutes",children:"Billing Block (min)"}),s.jsx(pe,{id:"blockMinutes",type:"number",min:15,max:60,step:15,value:e.overtimeBlockMinutes,onChange:R=>l(R.target.value)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Billed in increments"})]})]}),s.jsxs("div",{className:"p-4 bg-muted rounded-lg space-y-2",children:[s.jsx("p",{className:"text-sm font-medium text-foreground",children:"How Overtime Works ($/4 Logic):"}),s.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 list-disc list-inside",children:[s.jsxs("li",{children:["0-",e.overtimeGraceMinutes," minutes late: ",s.jsx("strong",{className:"text-green-600",children:"No extra charge"})]}),s.jsxs("li",{children:[e.overtimeGraceMinutes+1,"-",e.overtimeBlockMinutes," minutes late: ",s.jsxs("strong",{className:"text-amber-600",children:["1 block = $",(T/4).toFixed(2)]})]}),s.jsxs("li",{children:[e.overtimeBlockMinutes+1,"-",e.overtimeBlockMinutes*2," minutes late: ",s.jsxs("strong",{className:"text-amber-600",children:["2 blocks = $",(T/2).toFixed(2)]})]})]}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Example: 1hr 15min visit = 1hr base + 1 overtime block = $",T.toFixed(2)," + $",(T/4).toFixed(2)," = $",(T*1.25).toFixed(2)]})]})]})]}),s.jsxs(J,{className:`shadow-card ${e.regionalSurgeEnabled?"border-amber-500 border-2":""}`,children:[s.jsx(ke,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(St,{className:`w-5 h-5 ${e.regionalSurgeEnabled?"text-amber-500":"text-primary"}`}),"Regional Surge Pricing"]}),s.jsx(Ge,{children:"Adjust pricing based on client location (Toronto/GTA)"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:`text-sm font-medium ${e.regionalSurgeEnabled?"text-amber-600":"text-muted-foreground"}`,children:e.regionalSurgeEnabled?"ENABLED":"DISABLED"}),s.jsx(mn,{checked:e.regionalSurgeEnabled||!1,onCheckedChange:R=>c==null?void 0:c(R)})]})]})}),s.jsxs(Q,{className:"space-y-4",children:[e.regionalSurgeEnabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(oe,{className:"text-base font-medium",children:"Surge Zones"}),s.jsxs(K,{variant:"outline",size:"sm",onClick:A,children:[s.jsx(xo,{className:"w-4 h-4 mr-2"}),"Add Zone"]})]}),s.jsx("div",{className:"space-y-3",children:U.map(R=>s.jsx("div",{className:`p-4 border rounded-lg ${R.enabled?"border-amber-300 bg-amber-50/50 dark:bg-amber-950/20":"border-border"}`,children:N===R.id&&w?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(oe,{className:"text-xs",children:"Zone Name"}),s.jsx(pe,{value:w.name,onChange:z=>S(G=>G?{...G,name:z.target.value}:null),className:"h-9"})]}),s.jsxs("div",{className:"flex items-end gap-2",children:[s.jsxs(K,{variant:"brand",size:"sm",onClick:I,children:[s.jsx(In,{className:"w-4 h-4 mr-1"}),"Save"]}),s.jsx(K,{variant:"ghost",size:"sm",onClick:()=>{j(null),S(null)},children:s.jsx(Hr,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(oe,{className:"text-xs",children:"Client Surcharge ($/hr)"}),s.jsx(pe,{type:"number",min:0,step:1,value:w.clientSurcharge,onChange:z=>S(G=>G?{...G,clientSurcharge:parseFloat(z.target.value)||0}:null),className:"h-9"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(oe,{className:"text-xs",children:"PSW Bonus ($/hr)"}),s.jsx(pe,{type:"number",min:0,step:1,value:w.pswBonus,onChange:z=>S(G=>G?{...G,pswBonus:parseFloat(z.target.value)||0}:null),className:"h-9"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs(oe,{className:"text-xs flex items-center gap-1",children:[s.jsx(si,{className:"w-3 h-3"}),"Travel/Parking Bonus ($)"]}),s.jsx(pe,{type:"number",min:0,step:5,value:w.pswFlatBonus||0,onChange:z=>S(G=>G?{...G,pswFlatBonus:parseFloat(z.target.value)||0}:null),className:"h-9"})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(oe,{className:"text-xs",children:"Cities (comma-separated)"}),s.jsx(pe,{value:w.cities.join(", "),onChange:z=>S(G=>G?{...G,cities:z.target.value.split(",").map(ie=>ie.trim()).filter(Boolean)}:null),className:"h-9",placeholder:"Toronto, North York, Scarborough"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(oe,{className:"text-xs",children:"Postal Code Prefixes (comma-separated)"}),s.jsx(pe,{value:w.postalCodePrefixes.join(", "),onChange:z=>S(G=>G?{...G,postalCodePrefixes:z.target.value.split(",").map(ie=>ie.trim().toUpperCase()).filter(Boolean)}:null),className:"h-9",placeholder:"M1, M2, M3, M4, M5"})]})]}):s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(mn,{checked:R.enabled,onCheckedChange:z=>E(R.id,z)}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-foreground",children:R.name}),s.jsxs("div",{className:"flex gap-3 text-sm text-muted-foreground",children:[s.jsxs("span",{children:["Client: +$",R.clientSurcharge,"/hr"]}),s.jsxs("span",{children:["PSW: +$",R.pswBonus,"/hr"]}),(R.pswFlatBonus||0)>0&&s.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[s.jsx(si,{className:"w-3 h-3"}),"+$",R.pswFlatBonus," flat"]})]}),s.jsxs("div",{className:"flex gap-2 mt-1",children:[R.cities.slice(0,3).map(z=>s.jsx(ne,{variant:"secondary",className:"text-xs",children:z},z)),R.cities.length>3&&s.jsxs(ne,{variant:"outline",className:"text-xs",children:["+",R.cities.length-3," more"]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(K,{variant:"ghost",size:"sm",onClick:()=>D(R),children:s.jsx(Ck,{className:"w-4 h-4"})}),U.length>1&&s.jsx(K,{variant:"ghost",size:"sm",onClick:()=>V(R.id),className:"text-destructive hover:text-destructive",children:s.jsx(yc,{className:"w-4 h-4"})})]})]})},R.id))}),s.jsxs("div",{className:"p-4 bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:[s.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:[s.jsx("strong",{children:"How it works:"})," When a client's address matches a surge zone (by city or postal code):"]}),s.jsxs("ul",{className:"text-sm text-amber-800 dark:text-amber-200 mt-2 space-y-1 list-disc list-inside",children:[s.jsxs("li",{children:["Client is charged an extra $",(($=U.find(R=>R.enabled))==null?void 0:$.clientSurcharge)||0,"/hr (e.g., $35  $45)"]}),s.jsxs("li",{children:["PSW receives +$",((H=U.find(R=>R.enabled))==null?void 0:H.pswBonus)||0,"/hr hourly bonus"]}),s.jsxs("li",{children:["PSW receives $",((F=U.find(R=>R.enabled))==null?void 0:F.pswFlatBonus)||0," flat Urban Travel/Parking Bonus per shift"]})]})]})]}),!e.regionalSurgeEnabled&&s.jsx("div",{className:"p-4 bg-muted rounded-lg",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable regional surge to add location-based pricing adjustments for high-demand areas like Toronto/GTA."})})]})]}),s.jsxs(J,{className:"shadow-card",children:[s.jsxs(ke,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(Qe,{className:"w-5 h-5 text-primary"}),"Base Hour Requirements"]}),s.jsx(Ge,{children:"Minimum booking charge (clients pay at least this amount)"})]}),s.jsx(Q,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"minHours",children:"Standard Base (Hours)"}),s.jsx(pe,{id:"minHours",type:"number",min:.5,max:8,step:.5,value:e.minimumHours,onChange:R=>r(R.target.value)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Default minimum for all bookings"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"doctorMin",children:"Doctor/Hospital Base (Hours)"}),s.jsx(pe,{id:"doctorMin",type:"number",min:1,max:8,step:.5,value:e.doctorEscortMinimumHours,onChange:R=>n(R.target.value)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Final price adjusted on sign-out"})]})]})})]}),s.jsx(ja,{className:"my-6"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h2",{className:"text-xl font-semibold text-foreground flex items-center gap-2",children:[s.jsx(Qe,{className:"w-5 h-5 text-primary"}),"Service Task Library"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage standard tasks with recommended times. When clients book, tasks are used to suggest total booking duration."})]}),s.jsx(Jye,{}),s.jsx(e0e,{}),s.jsxs("div",{className:"sticky bottom-0 bg-background/95 backdrop-blur-sm border-t pt-4 pb-2 -mx-1 px-1",children:[s.jsxs(K,{variant:"brand",size:"lg",className:"w-full",onClick:v,disabled:!b,children:[s.jsx(In,{className:"w-5 h-5 mr-2"}),b?"Save Settings":"All Changes Saved"]}),b&&s.jsx("p",{className:"text-xs text-center text-amber-600 mt-2",children:"You have unsaved changes. Click Save to apply them to all new bookings."})]})]})},WI={standardHomeCare:22,hospitalVisit:28,doctorVisit:26},sf=()=>{const e=localStorage.getItem("pswdirect_staff_pay_rates");if(e)try{return JSON.parse(e)}catch{return WI}return WI},n0e=e=>{localStorage.setItem("pswdirect_staff_pay_rates",JSON.stringify(e))},ij=e=>{const t=e.map(r=>r.toLowerCase()).join(" ");return t.includes("hospital")||t.includes("discharge")||t.includes("pick-up")||t.includes("pickup")?"hospital":t.includes("doctor")||t.includes("appointment")||t.includes("escort")?"doctor":"standard"},s0e=()=>{const[e,t]=x.useState(sf()),[r,n]=x.useState(!1);x.useEffect(()=>{t(sf())},[]);const a=(o,l)=>{const c=parseFloat(l)||0;t(d=>({...d,[o]:c})),n(!0)},i=()=>{n0e(e),n(!1),Z.success("Staff pay rates saved successfully!")};return s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(hs,{className:"w-5 h-5 text-primary"}),"Staff Pay Scale"]}),s.jsx(Ge,{children:"Set hourly pay rates for PSWs based on shift type"})]}),s.jsxs(K,{variant:"brand",size:"sm",onClick:i,disabled:!r,children:[s.jsx(In,{className:"w-4 h-4 mr-2"}),"Save Rates"]})]})}),s.jsxs(Q,{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:s.jsx(tM,{className:"w-5 h-5 text-primary"})}),s.jsxs("div",{children:[s.jsx(oe,{className:"text-base font-medium",children:"Standard Home Care"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Regular in-home visits (personal care, companionship, etc.)"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-muted-foreground",children:"$"}),s.jsx(pe,{type:"number",min:0,step:.5,value:e.standardHomeCare,onChange:o=>a("standardHomeCare",o.target.value),className:"w-24 text-right font-medium"}),s.jsx("span",{className:"text-muted-foreground",children:"/hour"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:s.jsx(tM,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),s.jsxs("div",{children:[s.jsx(oe,{className:"text-base font-medium",children:"Hospital Visit"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Hospital discharge, pick-up, and hospital-based care"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-muted-foreground",children:"$"}),s.jsx(pe,{type:"number",min:0,step:.5,value:e.hospitalVisit,onChange:o=>a("hospitalVisit",o.target.value),className:"w-24 text-right font-medium"}),s.jsx("span",{className:"text-muted-foreground",children:"/hour"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/30 rounded-lg",children:s.jsx(Vh,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),s.jsxs("div",{children:[s.jsx(oe,{className:"text-base font-medium",children:"Doctor Visit"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Doctor appointment escorts and medical visit accompaniment"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-muted-foreground",children:"$"}),s.jsx(pe,{type:"number",min:0,step:.5,value:e.doctorVisit,onChange:o=>a("doctorVisit",o.target.value),className:"w-24 text-right font-medium"}),s.jsx("span",{className:"text-muted-foreground",children:"/hour"})]})]}),s.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[s.jsx("strong",{children:"Auto-Calculation:"})," These rates are automatically applied in Payroll based on each shift's service type. Overtime is calculated at 1.5x the applicable rate."]})}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t border-border",children:[s.jsxs("div",{className:"text-center p-3 bg-card border border-border rounded-lg",children:[s.jsxs("p",{className:"text-2xl font-bold text-foreground",children:["$",e.standardHomeCare.toFixed(2)]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Home Care"})]}),s.jsxs("div",{className:"text-center p-3 bg-card border border-border rounded-lg",children:[s.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["$",e.hospitalVisit.toFixed(2)]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Hospital"})]}),s.jsxs("div",{className:"text-center p-3 bg-card border border-border rounded-lg",children:[s.jsxs("p",{className:"text-2xl font-bold text-amber-600",children:["$",e.doctorVisit.toFixed(2)]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Doctor"})]})]})]})]})};var oj="Collapsible",[a0e,$H]=sn(oj),[i0e,CT]=a0e(oj),LH=x.forwardRef((e,t)=>{const{__scopeCollapsible:r,open:n,defaultOpen:a,disabled:i,onOpenChange:o,...l}=e,[c,d]=Ln({prop:n,defaultProp:a??!1,onChange:o,caller:oj});return s.jsx(i0e,{scope:r,disabled:i,contentId:Qs(),open:c,onOpenToggle:x.useCallback(()=>d(h=>!h),[d]),children:s.jsx(ze.div,{"data-state":TT(c),"data-disabled":i?"":void 0,...l,ref:t})})});LH.displayName=oj;var FH="CollapsibleTrigger",PT=x.forwardRef((e,t)=>{const{__scopeCollapsible:r,...n}=e,a=CT(FH,r);return s.jsx(ze.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":TT(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...n,ref:t,onClick:Ie(e.onClick,a.onOpenToggle)})});PT.displayName=FH;var kT="CollapsibleContent",ET=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=CT(kT,e.__scopeCollapsible);return s.jsx(kn,{present:r||a.open,children:({present:i})=>s.jsx(o0e,{...n,ref:t,present:i})})});ET.displayName=kT;var o0e=x.forwardRef((e,t)=>{const{__scopeCollapsible:r,present:n,children:a,...i}=e,o=CT(kT,r),[l,c]=x.useState(n),d=x.useRef(null),h=nt(t,d),f=x.useRef(0),m=f.current,p=x.useRef(0),y=p.current,v=o.open||l,b=x.useRef(v),N=x.useRef(void 0);return x.useEffect(()=>{const j=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(j)},[]),Xr(()=>{const j=d.current;if(j){N.current=N.current||{transitionDuration:j.style.transitionDuration,animationName:j.style.animationName},j.style.transitionDuration="0s",j.style.animationName="none";const w=j.getBoundingClientRect();f.current=w.height,p.current=w.width,b.current||(j.style.transitionDuration=N.current.transitionDuration,j.style.animationName=N.current.animationName),c(n)}},[o.open,n]),s.jsx(ze.div,{"data-state":TT(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!v,...i,ref:h,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...e.style},children:v&&a})});function TT(e){return e?"open":"closed"}var BH=LH,l0e=PT,c0e=ET;const zH=BH,UH=PT,WH=ET,d0e=({payrollEntries:e})=>{const[t,r]=x.useState(!0),n=x.useMemo(()=>{const o=new Date,l=new Date;l.setDate(o.getDate()-7);const c=new Date(o.getFullYear(),o.getMonth(),1),d=new Date(o.getFullYear(),0,1),h=new Map;return e.forEach(f=>{const m=new Date(f.scheduled_date);h.has(f.psw_id)||h.set(f.psw_id,{pswId:f.psw_id,pswName:f.psw_name,weekly:{total:0,hours:0,count:0},monthly:{total:0,hours:0,count:0},yearly:{total:0,hours:0,count:0},allTime:{total:0,hours:0,count:0},yearlyEntries:[]});const p=h.get(f.psw_id);p.allTime.total+=f.total_owed,p.allTime.hours+=f.hours_worked,p.allTime.count++,m>=d&&(p.yearly.total+=f.total_owed,p.yearly.hours+=f.hours_worked,p.yearly.count++,p.yearlyEntries.push(f)),m>=c&&(p.monthly.total+=f.total_owed,p.monthly.hours+=f.hours_worked,p.monthly.count++),m>=l&&(p.weekly.total+=f.total_owed,p.weekly.hours+=f.hours_worked,p.weekly.count++)}),Array.from(h.values()).sort((f,m)=>m.yearly.total-f.yearly.total)},[e]),a=o=>{const l=n.find(N=>N.pswId===o);if(!l)return;const c=new Date().getFullYear(),d=Ze(new Date,"MMMM d, yyyy"),h={};l.yearlyEntries.forEach(N=>{const j=Ze(new Date(N.scheduled_date),"MMMM");h[j]||(h[j]={total:0,hours:0,count:0,basePay:0,surgePay:0}),h[j].total+=N.total_owed,h[j].hours+=N.hours_worked,h[j].count++;const w=N.surcharge_applied||0;h[j].basePay+=N.total_owed-w,h[j].surgePay+=w});const f={standard:{count:0,total:0,basePay:0,surgePay:0},hospital:{count:0,total:0,basePay:0,surgePay:0},doctor:{count:0,total:0,basePay:0,surgePay:0}};let m=0,p=0,y=0;l.yearlyEntries.forEach(N=>{const j=N.task_name.toLowerCase(),w=N.surcharge_applied||0,S=N.total_owed-w;m+=S,p+=w,w>0&&y++,j.includes("hospital")?(f.hospital.count++,f.hospital.total+=N.total_owed,f.hospital.basePay+=S,f.hospital.surgePay+=w):j.includes("doctor")?(f.doctor.count++,f.doctor.total+=N.total_owed,f.doctor.basePay+=S,f.doctor.surgePay+=w):(f.standard.count++,f.standard.total+=N.total_owed,f.standard.basePay+=S,f.standard.surgePay+=w)});const v=["January","February","March","April","May","June","July","August","September","October","November","December"],b=window.open("","_blank");if(!b){Z.error("Please allow pop-ups to print reports");return}b.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Yearly Earnings Report - ${l.pswName}</title>
          <style>
            * { box-sizing: border-box; margin: 0; padding: 0; }
            body { 
              font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
              padding: 40px; 
              max-width: 800px; 
              margin: 0 auto;
              color: #1a1a1a;
            }
            .header { 
              text-align: center; 
              border-bottom: 3px solid #7c3aed; 
              padding-bottom: 20px; 
              margin-bottom: 30px;
            }
            .header h1 { 
              font-size: 28px; 
              color: #7c3aed; 
              margin-bottom: 5px;
            }
            .header h2 { 
              font-size: 18px; 
              color: #6b7280;
              font-weight: normal;
            }
            .meta { 
              display: flex; 
              justify-content: space-between; 
              background: #f9fafb; 
              padding: 15px 20px; 
              border-radius: 8px;
              margin-bottom: 25px;
            }
            .meta-item { }
            .meta-label { font-size: 12px; color: #6b7280; text-transform: uppercase; }
            .meta-value { font-size: 14px; font-weight: 600; }
            .section { margin-bottom: 30px; }
            .section-title { 
              font-size: 16px; 
              font-weight: 600; 
              color: #374151; 
              border-bottom: 1px solid #e5e7eb; 
              padding-bottom: 8px;
              margin-bottom: 15px;
            }
            .summary-grid { 
              display: grid; 
              grid-template-columns: repeat(3, 1fr); 
              gap: 15px;
            }
            .summary-card { 
              background: linear-gradient(135deg, #f3e8ff 0%, #ede9fe 100%);
              padding: 20px; 
              border-radius: 8px;
              text-align: center;
            }
            .summary-card .value { 
              font-size: 28px; 
              font-weight: 700; 
              color: #7c3aed;
            }
            .summary-card .label { 
              font-size: 12px; 
              color: #6b7280;
              margin-top: 5px;
            }
            .breakdown-table { 
              width: 100%; 
              border-collapse: collapse;
            }
            .breakdown-table th, .breakdown-table td { 
              padding: 10px 15px; 
              text-align: left; 
              border-bottom: 1px solid #e5e7eb;
            }
            .breakdown-table th { 
              background: #f9fafb; 
              font-weight: 600;
              font-size: 12px;
              text-transform: uppercase;
              color: #6b7280;
            }
            .breakdown-table td:last-child { text-align: right; font-weight: 600; }
            .footer { 
              text-align: center; 
              margin-top: 40px; 
              padding-top: 20px;
              border-top: 1px solid #e5e7eb;
              color: #9ca3af;
              font-size: 12px;
            }
            @media print {
              body { padding: 20px; }
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>YEARLY EARNINGS REPORT</h1>
            <h2>${c}</h2>
          </div>

          <div class="meta">
            <div class="meta-item">
              <div class="meta-label">PSW Name</div>
              <div class="meta-value">${l.pswName}</div>
            </div>
            <div class="meta-item">
              <div class="meta-label">PSW ID</div>
              <div class="meta-value">${l.pswId.slice(0,8)}...</div>
            </div>
            <div class="meta-item">
              <div class="meta-label">Report Generated</div>
              <div class="meta-value">${d}</div>
            </div>
          </div>

          <div class="section">
            <div class="section-title">EARNINGS SUMMARY</div>
            <div class="summary-grid">
              <div class="summary-card">
                <div class="value">${l.yearly.hours.toFixed(1)}</div>
                <div class="label">Total Hours Worked</div>
              </div>
              <div class="summary-card">
                <div class="value">${l.yearly.count}</div>
                <div class="label">Total Shifts Completed</div>
              </div>
              <div class="summary-card">
                <div class="value">$${l.yearly.total.toFixed(2)}</div>
                <div class="label">Total Gross Earnings</div>
              </div>
            </div>
          </div>

          <div class="section">
            <div class="section-title">TAX-READY PAY BREAKDOWN</div>
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 20px;">
              <div style="background: #ecfdf5; padding: 15px; border-radius: 8px; text-align: center; border: 1px solid #a7f3d0;">
                <div style="font-size: 24px; font-weight: 700; color: #059669;">$${m.toFixed(2)}</div>
                <div style="font-size: 11px; color: #047857; text-transform: uppercase; margin-top: 5px;">Base Pay</div>
              </div>
              <div style="background: #fef2f2; padding: 15px; border-radius: 8px; text-align: center; border: 1px solid #fecaca;">
                <div style="font-size: 24px; font-weight: 700; color: #dc2626;">$${p.toFixed(2)}</div>
                <div style="font-size: 11px; color: #b91c1c; text-transform: uppercase; margin-top: 5px;">Surge/Rush Pay</div>
              </div>
              <div style="background: #f3e8ff; padding: 15px; border-radius: 8px; text-align: center; border: 1px solid #d8b4fe;">
                <div style="font-size: 24px; font-weight: 700; color: #7c3aed;">${y}</div>
                <div style="font-size: 11px; color: #6d28d9; text-transform: uppercase; margin-top: 5px;">Rush Shifts</div>
              </div>
            </div>
          </div>

          <div class="section">
            <div class="section-title">BREAKDOWN BY SHIFT TYPE</div>
            <table class="breakdown-table">
              <thead>
                <tr>
                  <th>Shift Type</th>
                  <th>Shifts</th>
                  <th>Base Pay</th>
                  <th>Surge/Rush</th>
                  <th>Total</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Standard Home Care</td>
                  <td>${f.standard.count}</td>
                  <td>$${f.standard.basePay.toFixed(2)}</td>
                  <td style="color: ${f.standard.surgePay>0?"#dc2626":"#9ca3af"};">$${f.standard.surgePay.toFixed(2)}</td>
                  <td>$${f.standard.total.toFixed(2)}</td>
                </tr>
                <tr>
                  <td>Hospital Visits</td>
                  <td>${f.hospital.count}</td>
                  <td>$${f.hospital.basePay.toFixed(2)}</td>
                  <td style="color: ${f.hospital.surgePay>0?"#dc2626":"#9ca3af"};">$${f.hospital.surgePay.toFixed(2)}</td>
                  <td>$${f.hospital.total.toFixed(2)}</td>
                </tr>
                <tr>
                  <td>Doctor Visits</td>
                  <td>${f.doctor.count}</td>
                  <td>$${f.doctor.basePay.toFixed(2)}</td>
                  <td style="color: ${f.doctor.surgePay>0?"#dc2626":"#9ca3af"};">$${f.doctor.surgePay.toFixed(2)}</td>
                  <td>$${f.doctor.total.toFixed(2)}</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="section">
            <div class="section-title">MONTHLY BREAKDOWN</div>
            <table class="breakdown-table">
              <thead>
                <tr>
                  <th>Month</th>
                  <th>Shifts</th>
                  <th>Hours</th>
                  <th>Earnings</th>
                </tr>
              </thead>
              <tbody>
                ${v.filter(N=>h[N]).map(N=>`
                    <tr>
                      <td>${N}</td>
                      <td>${h[N].count}</td>
                      <td>${h[N].hours.toFixed(1)}</td>
                      <td>$${h[N].total.toFixed(2)}</td>
                    </tr>
                  `).join("")}
              </tbody>
            </table>
          </div>

          <div class="footer">
            <p>This report is generated for tax and accounting purposes.</p>
            <p>PSW Direct  Generated on ${d}</p>
          </div>

          <script>
            window.onload = function() {
              window.print();
            };
          <\/script>
        </body>
      </html>
    `),b.document.close(),Z.success(`Printing yearly report for ${l.pswName}`)},i=()=>{if(n.length===0){Z.error("No PSW earnings data to print");return}const o=new Date().getFullYear(),l=Ze(new Date,"MMMM d, yyyy"),c=window.open("","_blank");if(!c){Z.error("Please allow pop-ups to print reports");return}const d={hours:n.reduce((f,m)=>f+m.yearly.hours,0),shifts:n.reduce((f,m)=>f+m.yearly.count,0),earnings:n.reduce((f,m)=>f+m.yearly.total,0)},h=f=>{const m={};f.yearlyEntries.forEach(y=>{const v=Ze(new Date(y.scheduled_date),"MMMM");m[v]||(m[v]={total:0,hours:0,count:0}),m[v].total+=y.total_owed,m[v].hours+=y.hours_worked,m[v].count++});const p=["January","February","March","April","May","June","July","August","September","October","November","December"];return`
        <div class="psw-page">
          <div class="psw-header">
            <h2>${f.pswName}</h2>
            <span class="psw-id">ID: ${f.pswId.slice(0,8)}...</span>
          </div>
          
          <div class="summary-row">
            <div class="summary-item">
              <span class="value">${f.yearly.hours.toFixed(1)} hrs</span>
              <span class="label">Hours</span>
            </div>
            <div class="summary-item">
              <span class="value">${f.yearly.count}</span>
              <span class="label">Shifts</span>
            </div>
            <div class="summary-item highlight">
              <span class="value">$${f.yearly.total.toFixed(2)}</span>
              <span class="label">Total Earnings</span>
            </div>
          </div>

          <table class="monthly-table">
            <thead>
              <tr>
                <th>Month</th>
                <th>Shifts</th>
                <th>Hours</th>
                <th>Earnings</th>
              </tr>
            </thead>
            <tbody>
              ${p.filter(y=>m[y]).map(y=>`
                  <tr>
                    <td>${y}</td>
                    <td>${m[y].count}</td>
                    <td>${m[y].hours.toFixed(1)}</td>
                    <td>$${m[y].total.toFixed(2)}</td>
                  </tr>
                `).join("")}
            </tbody>
          </table>
        </div>
      `};c.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>All PSW Yearly Reports - ${o}</title>
          <style>
            * { box-sizing: border-box; margin: 0; padding: 0; }
            body { 
              font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
              padding: 30px;
              color: #1a1a1a;
            }
            .cover-page {
              text-align: center;
              padding: 60px 20px;
              page-break-after: always;
            }
            .cover-page h1 { 
              font-size: 36px; 
              color: #7c3aed;
              margin-bottom: 10px;
            }
            .cover-page h2 { 
              font-size: 24px;
              color: #6b7280;
              font-weight: normal;
            }
            .cover-stats {
              display: flex;
              justify-content: center;
              gap: 40px;
              margin-top: 50px;
            }
            .cover-stat {
              text-align: center;
            }
            .cover-stat .value {
              font-size: 42px;
              font-weight: 700;
              color: #7c3aed;
            }
            .cover-stat .label {
              font-size: 14px;
              color: #6b7280;
            }
            .psw-page { 
              page-break-after: always; 
              margin-bottom: 30px;
              border: 1px solid #e5e7eb;
              border-radius: 8px;
              padding: 25px;
            }
            .psw-page:last-child { page-break-after: auto; }
            .psw-header {
              display: flex;
              justify-content: space-between;
              align-items: center;
              border-bottom: 2px solid #7c3aed;
              padding-bottom: 10px;
              margin-bottom: 20px;
            }
            .psw-header h2 { color: #7c3aed; font-size: 20px; }
            .psw-id { color: #9ca3af; font-size: 12px; }
            .summary-row {
              display: flex;
              gap: 15px;
              margin-bottom: 20px;
            }
            .summary-item {
              flex: 1;
              background: #f9fafb;
              padding: 15px;
              border-radius: 6px;
              text-align: center;
            }
            .summary-item.highlight {
              background: linear-gradient(135deg, #f3e8ff 0%, #ede9fe 100%);
            }
            .summary-item .value {
              display: block;
              font-size: 22px;
              font-weight: 700;
              color: #374151;
            }
            .summary-item.highlight .value { color: #7c3aed; }
            .summary-item .label {
              display: block;
              font-size: 11px;
              color: #9ca3af;
              text-transform: uppercase;
              margin-top: 3px;
            }
            .monthly-table {
              width: 100%;
              border-collapse: collapse;
              font-size: 13px;
            }
            .monthly-table th, .monthly-table td {
              padding: 8px 12px;
              text-align: left;
              border-bottom: 1px solid #e5e7eb;
            }
            .monthly-table th {
              background: #f9fafb;
              font-weight: 600;
              font-size: 11px;
              text-transform: uppercase;
              color: #6b7280;
            }
            .monthly-table td:last-child { 
              text-align: right; 
              font-weight: 600; 
            }
            .footer {
              text-align: center;
              color: #9ca3af;
              font-size: 11px;
              margin-top: 30px;
            }
            @media print {
              body { padding: 15px; }
              .psw-page { border: none; padding: 20px 0; }
            }
          </style>
        </head>
        <body>
          <div class="cover-page">
            <h1>PSW YEARLY EARNINGS REPORT</h1>
            <h2>${o} Summary - All Workers</h2>
            <p style="color: #9ca3af; margin-top: 20px;">Report Generated: ${l}</p>
            
            <div class="cover-stats">
              <div class="cover-stat">
                <div class="value">${n.length}</div>
                <div class="label">PSWs</div>
              </div>
              <div class="cover-stat">
                <div class="value">${d.shifts}</div>
                <div class="label">Total Shifts</div>
              </div>
              <div class="cover-stat">
                <div class="value">${d.hours.toFixed(0)}</div>
                <div class="label">Total Hours</div>
              </div>
              <div class="cover-stat">
                <div class="value">$${d.earnings.toFixed(2)}</div>
                <div class="label">Total Paid</div>
              </div>
            </div>
          </div>

          ${n.map(f=>h(f)).join("")}

          <div class="footer">
            <p>PSW Direct  All PSW Yearly Reports  ${o}</p>
          </div>

          <script>
            window.onload = function() {
              window.print();
            };
          <\/script>
        </body>
      </html>
    `),c.document.close(),Z.success(`Printing yearly reports for ${n.length} PSWs`)};return n.length===0?null:s.jsx(J,{children:s.jsxs(zH,{open:t,onOpenChange:r,children:[s.jsx(ke,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(UH,{asChild:!0,children:s.jsx(K,{variant:"ghost",size:"sm",className:"p-1 h-auto",children:t?s.jsx(jk,{className:"w-5 h-5"}):s.jsx(Lf,{className:"w-5 h-5"})})}),s.jsxs("div",{children:[s.jsxs(Ee,{className:"flex items-center gap-2 text-lg",children:[s.jsx(pn,{className:"w-5 h-5"}),"Per-PSW Earnings Summary"]}),s.jsxs(Ge,{children:["Individual earnings breakdown by time period (",n.length," workers)"]})]})]}),s.jsxs(K,{onClick:i,size:"sm",variant:"outline",children:[s.jsx(m0,{className:"w-4 h-4 mr-2"}),"Print All Yearly Reports"]})]})}),s.jsx(WH,{children:s.jsx(Q,{className:"space-y-4 pt-0",children:n.map(o=>s.jsxs(J,{className:"border-l-4 border-l-primary",children:[s.jsx(ke,{className:"pb-2 pt-4 px-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Ee,{className:"text-base flex items-center gap-2",children:[s.jsx($t,{className:"w-4 h-4"}),o.pswName]}),s.jsxs(K,{size:"sm",variant:"outline",onClick:()=>a(o.pswId),children:[s.jsx(m0,{className:"w-3 h-3 mr-1"}),"Print Yearly"]})]})}),s.jsx(Q,{className:"pb-4 px-4",children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsxs("div",{className:"p-3 rounded-lg bg-emerald-50 border border-emerald-200",children:[s.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[s.jsx(cx,{className:"w-3 h-3 text-emerald-600"}),s.jsx("p",{className:"text-xs font-medium text-emerald-600",children:"This Week"})]}),s.jsxs("p",{className:"text-lg font-bold text-emerald-700",children:["$",o.weekly.total.toFixed(2)]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[o.weekly.count," shifts  ",o.weekly.hours.toFixed(1)," hrs"]})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-blue-50 border border-blue-200",children:[s.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[s.jsx(Lt,{className:"w-3 h-3 text-blue-600"}),s.jsx("p",{className:"text-xs font-medium text-blue-600",children:"This Month"})]}),s.jsxs("p",{className:"text-lg font-bold text-blue-700",children:["$",o.monthly.total.toFixed(2)]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[o.monthly.count," shifts  ",o.monthly.hours.toFixed(1)," hrs"]})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-purple-50 border border-purple-200",children:[s.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[s.jsx(hs,{className:"w-3 h-3 text-purple-600"}),s.jsx("p",{className:"text-xs font-medium text-purple-600",children:"This Year"})]}),s.jsxs("p",{className:"text-lg font-bold text-purple-700",children:["$",o.yearly.total.toFixed(2)]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[o.yearly.count," shifts  ",o.yearly.hours.toFixed(1)," hrs"]})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-primary/5 border border-primary/20",children:[s.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[s.jsx(Qe,{className:"w-3 h-3 text-primary"}),s.jsx("p",{className:"text-xs font-medium text-primary",children:"All-Time"})]}),s.jsxs("p",{className:"text-lg font-bold text-primary",children:["$",o.allTime.total.toFixed(2)]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[o.allTime.count," shifts  ",o.allTime.hours.toFixed(1)," hrs"]})]})]})})]},o.pswId))})})]})})},u0e=3,h0e=({payrollEntries:e})=>{const[t,r]=x.useState(!0),n=x.useMemo(()=>{const o=new Date(new Date().getFullYear(),0,1),l=e.filter(d=>new Date(d.scheduled_date)>=o),c=new Map;return l.forEach(d=>{c.has(d.psw_id)||c.set(d.psw_id,{pswId:d.psw_id,pswName:d.psw_name,totalShifts:0,rushShifts:0,urbanBonusTotal:0,grossEarnings:0,totalHours:0,avgHourlyRate:0});const h=c.get(d.psw_id);h.totalShifts++,h.grossEarnings+=d.total_owed,h.totalHours+=d.hours_worked,d.surcharge_applied!==null&&d.surcharge_applied>0&&h.rushShifts++,d.hourly_rate>=25&&(h.urbanBonusTotal+=u0e*d.hours_worked)}),c.forEach(d=>{d.totalHours>0&&(d.avgHourlyRate=d.grossEarnings/d.totalHours)}),Array.from(c.values()).sort((d,h)=>h.grossEarnings-d.grossEarnings)},[e]),a=()=>{const o=new Date().getFullYear(),l=Ze(new Date,"MMMM d, yyyy"),c=window.open("","_blank");if(!c){Z.error("Please allow pop-ups to print reports");return}const d=n.reduce((h,f)=>({shifts:h.shifts+f.totalShifts,rush:h.rush+f.rushShifts,urban:h.urban+f.urbanBonusTotal,earnings:h.earnings+f.grossEarnings,hours:h.hours+f.totalHours}),{shifts:0,rush:0,urban:0,earnings:0,hours:0});c.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>PSW Performance Report - ${o}</title>
          <style>
            * { box-sizing: border-box; margin: 0; padding: 0; }
            body { 
              font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
              padding: 40px; 
              max-width: 900px; 
              margin: 0 auto;
              color: #1a1a1a;
            }
            .header { 
              text-align: center; 
              border-bottom: 3px solid #7c3aed; 
              padding-bottom: 20px; 
              margin-bottom: 30px;
            }
            .header h1 { font-size: 28px; color: #7c3aed; }
            .header h2 { font-size: 16px; color: #6b7280; font-weight: normal; }
            .summary-grid { 
              display: grid; 
              grid-template-columns: repeat(5, 1fr); 
              gap: 15px;
              margin-bottom: 30px;
            }
            .summary-card { 
              background: #f9fafb;
              padding: 15px; 
              border-radius: 8px;
              text-align: center;
            }
            .summary-card .value { 
              font-size: 24px; 
              font-weight: 700; 
              color: #7c3aed;
            }
            .summary-card .label { 
              font-size: 11px; 
              color: #6b7280;
              margin-top: 5px;
              text-transform: uppercase;
            }
            table { 
              width: 100%; 
              border-collapse: collapse;
              font-size: 13px;
            }
            th, td { 
              padding: 12px 10px; 
              text-align: left; 
              border-bottom: 1px solid #e5e7eb;
            }
            th { 
              background: #f9fafb; 
              font-weight: 600;
              font-size: 11px;
              text-transform: uppercase;
              color: #6b7280;
            }
            td.number { text-align: right; font-weight: 600; }
            tr:hover { background: #f9fafb; }
            .rush-badge { 
              background: #fef2f2; 
              color: #dc2626; 
              padding: 2px 8px; 
              border-radius: 12px;
              font-size: 11px;
              font-weight: 600;
            }
            .urban-badge { 
              background: #fefce8; 
              color: #ca8a04; 
              padding: 2px 8px; 
              border-radius: 12px;
              font-size: 11px;
              font-weight: 600;
            }
            .footer { 
              text-align: center; 
              margin-top: 40px; 
              padding-top: 20px;
              border-top: 1px solid #e5e7eb;
              color: #9ca3af;
              font-size: 12px;
            }
            @media print {
              body { padding: 20px; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>PSW PERFORMANCE REPORT</h1>
            <h2>${o} Year-to-Date | Generated: ${l}</h2>
          </div>

          <div class="summary-grid">
            <div class="summary-card">
              <div class="value">${n.length}</div>
              <div class="label">Active PSWs</div>
            </div>
            <div class="summary-card">
              <div class="value">${d.shifts}</div>
              <div class="label">Total Shifts</div>
            </div>
            <div class="summary-card">
              <div class="value">${d.rush}</div>
              <div class="label">Rush Shifts</div>
            </div>
            <div class="summary-card">
              <div class="value">$${d.urban.toFixed(2)}</div>
              <div class="label">Urban Bonuses</div>
            </div>
            <div class="summary-card">
              <div class="value">$${d.earnings.toFixed(2)}</div>
              <div class="label">Gross Earnings</div>
            </div>
          </div>

          <table>
            <thead>
              <tr>
                <th>PSW Name</th>
                <th class="number">Total Shifts</th>
                <th class="number">Rush Shifts</th>
                <th class="number">Urban Bonus</th>
                <th class="number">Total Hours</th>
                <th class="number">Avg Rate</th>
                <th class="number">Gross Earnings</th>
              </tr>
            </thead>
            <tbody>
              ${n.map(h=>`
                <tr>
                  <td><strong>${h.pswName}</strong></td>
                  <td class="number">${h.totalShifts}</td>
                  <td class="number">
                    ${h.rushShifts>0?`<span class="rush-badge">${h.rushShifts}</span>`:"0"}
                  </td>
                  <td class="number">
                    ${h.urbanBonusTotal>0?`<span class="urban-badge">$${h.urbanBonusTotal.toFixed(2)}</span>`:"$0.00"}
                  </td>
                  <td class="number">${h.totalHours.toFixed(1)} hrs</td>
                  <td class="number">$${h.avgHourlyRate.toFixed(2)}/hr</td>
                  <td class="number"><strong>$${h.grossEarnings.toFixed(2)}</strong></td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          <div class="footer">
            <p>PSW Direct  Performance Report  ${o}</p>
          </div>

          <script>
            window.onload = function() { window.print(); };
          <\/script>
        </body>
      </html>
    `),c.document.close(),Z.success("Printing performance report")};if(n.length===0)return null;const i=n.reduce((o,l)=>({shifts:o.shifts+l.totalShifts,rush:o.rush+l.rushShifts,urban:o.urban+l.urbanBonusTotal,earnings:o.earnings+l.grossEarnings}),{shifts:0,rush:0,urban:0,earnings:0});return s.jsx(J,{children:s.jsxs(zH,{open:t,onOpenChange:r,children:[s.jsx(ke,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(UH,{asChild:!0,children:s.jsx(K,{variant:"ghost",size:"sm",className:"p-1 h-auto",children:t?s.jsx(jk,{className:"w-5 h-5"}):s.jsx(Lf,{className:"w-5 h-5"})})}),s.jsxs("div",{children:[s.jsxs(Ee,{className:"flex items-center gap-2 text-lg",children:[s.jsx(pn,{className:"w-5 h-5"}),"PSW Performance Summary"]}),s.jsxs(Ge,{children:[new Date().getFullYear()," Year-to-Date  ",n.length," workers"]})]})]}),s.jsxs(K,{onClick:a,size:"sm",variant:"outline",children:[s.jsx(m0,{className:"w-4 h-4 mr-2"}),"Print Report"]})]})}),s.jsx(WH,{children:s.jsxs(Q,{className:"pt-0",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[s.jsxs("div",{className:"p-3 rounded-lg bg-muted/50 text-center",children:[s.jsx("p",{className:"text-2xl font-bold",children:i.shifts}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Shifts"})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-red-50 border border-red-200 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-red-600",children:i.rush}),s.jsx("p",{className:"text-xs text-red-600",children:"Rush Shifts"})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-yellow-50 border border-yellow-200 text-center",children:[s.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:["$",i.urban.toFixed(0)]}),s.jsx("p",{className:"text-xs text-yellow-600",children:"Urban Bonuses"})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-primary/5 border border-primary/20 text-center",children:[s.jsxs("p",{className:"text-2xl font-bold text-primary",children:["$",i.earnings.toFixed(0)]}),s.jsx("p",{className:"text-xs text-primary",children:"Gross Earnings"})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Sn,{children:[s.jsx(Cn,{children:s.jsxs(Mt,{children:[s.jsx(Pe,{children:"PSW Name"}),s.jsx(Pe,{className:"text-right",children:"Total Shifts"}),s.jsx(Pe,{className:"text-right",children:"Rush Shifts"}),s.jsx(Pe,{className:"text-right",children:"Urban Bonus"}),s.jsx(Pe,{className:"text-right",children:"Hours"}),s.jsx(Pe,{className:"text-right",children:"Gross Earnings"})]})}),s.jsx(Pn,{children:n.map(o=>s.jsxs(Mt,{children:[s.jsx(be,{className:"font-medium",children:o.pswName}),s.jsx(be,{className:"text-right",children:o.totalShifts}),s.jsx(be,{className:"text-right",children:o.rushShifts>0?s.jsxs(ne,{className:"bg-red-100 text-red-700 border-red-200",children:[s.jsx(qh,{className:"w-3 h-3 mr-1"}),o.rushShifts]}):s.jsx("span",{className:"text-muted-foreground",children:"0"})}),s.jsx(be,{className:"text-right",children:o.urbanBonusTotal>0?s.jsxs(ne,{className:"bg-yellow-100 text-yellow-700 border-yellow-200",children:[s.jsx(St,{className:"w-3 h-3 mr-1"}),"$",o.urbanBonusTotal.toFixed(2)]}):s.jsx("span",{className:"text-muted-foreground",children:"$0.00"})}),s.jsx(be,{className:"text-right",children:o.totalHours.toFixed(1)}),s.jsxs(be,{className:"text-right font-semibold",children:["$",o.grossEarnings.toFixed(2)]})]},o.pswId))})]})})]})})]})})},f0e=()=>{const[e,t]=x.useState([]),[r,n]=x.useState(!0),[a,i]=x.useState(!1),[o,l]=x.useState(new Set),[c,d]=x.useState(null),h=async()=>{n(!0);const{data:E,error:D}=await de.from("payroll_entries").select("*").order("scheduled_date",{ascending:!1});if(D){console.error("Error fetching payroll:",D),Z.error("Failed to load payroll data"),n(!1);return}const{data:I}=await de.from("psw_banking").select("psw_id, institution_number, transit_number, account_number"),A=new Map;I==null||I.forEach(U=>{A.set(U.psw_id,{institution_number:U.institution_number,transit_number:U.transit_number,account_number:U.account_number})});const V=(E||[]).map(U=>({...U,banking:A.get(U.psw_id)||null}));t(V),n(!1)};x.useEffect(()=>{h()},[]);const f=E=>{if(!E.checkedInAt||!E.signedOutAt)return 0;const D=new Date(E.checkedInAt),A=new Date(E.signedOutAt).getTime()-D.getTime();return Math.max(0,A/(1e3*60*60))},m=async()=>{i(!0);try{const D=gs().filter(U=>U.status==="completed"),I=new Set(e.map(U=>U.shift_id)),A=sf();let V=0;for(const U of D){if(I.has(U.id))continue;const $=f(U),H=ij(U.services);let F,R;switch(H){case"hospital":F=A.hospitalVisit,R="Hospital Visit";break;case"doctor":F=A.doctorVisit,R="Doctor Visit";break;default:F=A.standardHomeCare,R="Standard Home Care"}const z=$*F,{error:G}=await de.from("payroll_entries").insert({shift_id:U.id,psw_id:U.pswId,psw_name:U.pswName,task_name:U.services.length>0?`${R}: ${U.services.join(", ")}`:R,scheduled_date:U.scheduledDate,hours_worked:Number($.toFixed(2)),hourly_rate:F,surcharge_applied:null,total_owed:Number(z.toFixed(2)),status:"pending"});G?console.error("Error inserting payroll entry:",G):V++}return V>0?(Z.success(`Added ${V} new payroll entries`),await h()):Z.info("All completed shifts are already in payroll"),{success:!0,count:V}}catch(E){return console.error("Error syncing shifts:",E),Z.error("Failed to sync shifts"),{success:!1,count:0,error:E.message}}finally{i(!1)}},p=async E=>{d(E);const{error:D}=await de.from("payroll_entries").update({status:"cleared",cleared_at:new Date().toISOString()}).eq("id",E);D?(console.error("Error clearing entry:",D),Z.error("Failed to mark as paid")):(Z.success("Payment marked as cleared"),await h()),d(null)},y=async()=>{if(o.size===0)return;const{error:E}=await de.from("payroll_entries").update({status:"cleared",cleared_at:new Date().toISOString()}).in("id",Array.from(o));E?(console.error("Error clearing entries:",E),Z.error("Failed to mark as paid")):(Z.success(`${o.size} payments marked as cleared`),l(new Set),await h())},v=E=>{const D=new Set(o);D.has(E)?D.delete(E):D.add(E),l(D)},b=x.useMemo(()=>e.filter(E=>E.status==="pending"),[e]),N=x.useMemo(()=>e.filter(E=>E.status==="cleared"),[e]),j=x.useMemo(()=>{const E=Ze(new Date,"yyyy-MM-dd"),D=e.filter(I=>I.scheduled_date===E);return{total:D.reduce((I,A)=>I+A.total_owed,0),hours:D.reduce((I,A)=>I+A.hours_worked,0),count:D.length}},[e]),w=x.useMemo(()=>{const E=new Date;E.setDate(E.getDate()-7);const D=e.filter(I=>new Date(I.scheduled_date)>=E);return{total:D.reduce((I,A)=>I+A.total_owed,0),hours:D.reduce((I,A)=>I+A.hours_worked,0),count:D.length}},[e]),S=x.useMemo(()=>{const E=new Date,D=new Date(E.getFullYear(),E.getMonth(),1),I=e.filter(A=>new Date(A.scheduled_date)>=D);return{total:I.reduce((A,V)=>A+V.total_owed,0),hours:I.reduce((A,V)=>A+V.hours_worked,0),count:I.length}},[e]),C=x.useMemo(()=>{const E=new Date(new Date().getFullYear(),0,1),D=e.filter(I=>new Date(I.scheduled_date)>=E);return{total:D.reduce((I,A)=>I+A.total_owed,0),hours:D.reduce((I,A)=>I+A.hours_worked,0),count:D.length}},[e]),P=x.useMemo(()=>b.reduce((E,D)=>E+D.total_owed,0),[b]),T=x.useMemo(()=>N.reduce((E,D)=>E+D.total_owed,0),[N]),O=()=>{const E=["PSW Name","Task","Date","Hours","Hourly Rate","Surcharge","Total Owed","Status","Cleared At"],D=e.map($=>[$.psw_name,$.task_name,$.scheduled_date,$.hours_worked.toFixed(2),`$${$.hourly_rate.toFixed(2)}`,$.surcharge_applied?`$${$.surcharge_applied.toFixed(2)}`:"",`$${$.total_owed.toFixed(2)}`,$.status,$.cleared_at?Ze(new Date($.cleared_at),"yyyy-MM-dd HH:mm"):""]),I=[E.join(","),...D.map($=>$.join(","))].join(`
`),A=new Blob([I],{type:"text/csv"}),V=URL.createObjectURL(A),U=document.createElement("a");U.href=V,U.download=`payroll_export_${Ze(new Date,"yyyy-MM-dd")}.csv`,document.body.appendChild(U),U.click(),document.body.removeChild(U),URL.revokeObjectURL(V),Z.success("Payroll exported to CSV")};return r?s.jsx(J,{children:s.jsx(Q,{className:"p-8 flex items-center justify-center",children:s.jsx(Ut,{className:"w-6 h-6 animate-spin text-muted-foreground"})})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(J,{className:"border-rose-200 bg-rose-50/50",children:s.jsx(Q,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-full bg-rose-100",children:s.jsx(bk,{className:"w-5 h-5 text-rose-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Today"}),s.jsxs("p",{className:"text-xl font-bold text-rose-700",children:["$",j.total.toFixed(2)]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[j.count," entries  ",j.hours.toFixed(1)," hrs"]})]})]})})}),s.jsx(J,{className:"border-emerald-200 bg-emerald-50/50",children:s.jsx(Q,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-full bg-emerald-100",children:s.jsx(cx,{className:"w-5 h-5 text-emerald-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"This Week"}),s.jsxs("p",{className:"text-xl font-bold text-emerald-700",children:["$",w.total.toFixed(2)]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.count," entries  ",w.hours.toFixed(1)," hrs"]})]})]})})}),s.jsx(J,{className:"border-blue-200 bg-blue-50/50",children:s.jsx(Q,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-full bg-blue-100",children:s.jsx(Lt,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"This Month"}),s.jsxs("p",{className:"text-xl font-bold text-blue-700",children:["$",S.total.toFixed(2)]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[S.count," entries  ",S.hours.toFixed(1)," hrs"]})]})]})})}),s.jsx(J,{className:"border-purple-200 bg-purple-50/50",children:s.jsx(Q,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-full bg-purple-100",children:s.jsx(hs,{className:"w-5 h-5 text-purple-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs text-muted-foreground",children:["This Year (",new Date().getFullYear(),")"]}),s.jsxs("p",{className:"text-xl font-bold text-purple-700",children:["$",C.total.toFixed(2)]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[C.count," entries  ",C.hours.toFixed(1)," hrs"]})]})]})})})]}),s.jsx(h0e,{payrollEntries:e}),s.jsx(d0e,{payrollEntries:e}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(J,{children:s.jsx(Q,{className:"p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-3 rounded-full bg-amber-100",children:s.jsx(Qe,{className:"w-6 h-6 text-amber-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending Payments"}),s.jsx("p",{className:"text-2xl font-bold",children:b.length}),s.jsxs("p",{className:"text-sm font-medium text-amber-600",children:["$",P.toFixed(2)," owed"]})]})]})})}),s.jsx(J,{children:s.jsx(Q,{className:"p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-3 rounded-full bg-green-100",children:s.jsx(Kt,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Cleared Payments"}),s.jsx("p",{className:"text-2xl font-bold",children:N.length}),s.jsxs("p",{className:"text-sm font-medium text-green-600",children:["$",T.toFixed(2)," paid"]})]})]})})}),s.jsx(J,{children:s.jsx(Q,{className:"p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-3 rounded-full bg-blue-100",children:s.jsx(hs,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Processed"}),s.jsx("p",{className:"text-2xl font-bold",children:e.length}),s.jsxs("p",{className:"text-sm font-medium text-blue-600",children:["$",(P+T).toFixed(2)," all time"]})]})]})})})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs(K,{onClick:m,disabled:a,children:[a?s.jsx(Ut,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(Nr,{className:"w-4 h-4 mr-2"}),"Sync Completed Shifts"]}),s.jsxs(K,{variant:"outline",onClick:O,children:[s.jsx(aee,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),o.size>0&&s.jsxs(K,{variant:"default",onClick:y,children:[s.jsx(Kt,{className:"w-4 h-4 mr-2"}),"Clear Selected (",o.size,")"]})]}),s.jsxs(J,{children:[s.jsxs(ke,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(hs,{className:"w-5 h-5"}),"Payroll Entries"]}),s.jsx(Ge,{children:"Manage PSW payments from completed shifts"})]}),s.jsx(Q,{children:s.jsxs(qi,{defaultValue:"pending",children:[s.jsxs(ii,{className:"mb-4",children:[s.jsxs(ft,{value:"pending",children:["Pending (",b.length,")"]}),s.jsxs(ft,{value:"cleared",children:["Cleared (",N.length,")"]}),s.jsxs(ft,{value:"all",children:["All (",e.length,")"]})]}),s.jsx(Ct,{value:"pending",children:s.jsx(r1,{entries:b,showClear:!0,selectedEntries:o,toggleSelection:v,onClear:p,clearingEntry:c})}),s.jsx(Ct,{value:"cleared",children:s.jsx(r1,{entries:N,showClear:!1,selectedEntries:o,toggleSelection:v,onClear:p,clearingEntry:c})}),s.jsx(Ct,{value:"all",children:s.jsx(r1,{entries:e,showClear:!0,selectedEntries:o,toggleSelection:v,onClear:p,clearingEntry:c})})]})})]})]})},r1=({entries:e,showClear:t,selectedEntries:r,toggleSelection:n,onClear:a,clearingEntry:i})=>e.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(At,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No payroll entries found"}),s.jsx("p",{className:"text-sm",children:"Completed shifts will appear here after syncing"})]}):s.jsxs(Sn,{children:[s.jsx(Cn,{children:s.jsxs(Mt,{children:[t&&s.jsx(Pe,{className:"w-12"}),s.jsx(Pe,{children:"PSW Name"}),s.jsx(Pe,{children:"Banking"}),s.jsx(Pe,{children:"Task"}),s.jsx(Pe,{children:"Date"}),s.jsx(Pe,{className:"text-right",children:"Hours"}),s.jsx(Pe,{className:"text-right",children:"Rate"}),s.jsx(Pe,{className:"text-right",children:"Total"}),s.jsx(Pe,{children:"Status"}),t&&s.jsx(Pe,{})]})}),s.jsx(Pn,{children:e.map(o=>{var l;return s.jsxs(Mt,{children:[t&&s.jsx(be,{children:o.status==="pending"&&s.jsx("input",{type:"checkbox",checked:r.has(o.id),onChange:()=>n(o.id),className:"w-4 h-4 rounded border-gray-300"})}),s.jsx(be,{className:"font-medium",children:o.psw_name}),s.jsx(be,{children:(l=o.banking)!=null&&l.account_number?s.jsxs("div",{className:"text-xs font-mono space-y-0.5",children:[s.jsxs("div",{className:"text-muted-foreground",children:[o.banking.institution_number,"-",o.banking.transit_number]}),s.jsxs("div",{children:[" ",o.banking.account_number.slice(-4)]})]}):s.jsx("span",{className:"text-xs text-amber-600",children:"No banking"})}),s.jsx(be,{className:"max-w-[150px] truncate",children:o.task_name}),s.jsx(be,{children:Ze(new Date(o.scheduled_date),"MMM d, yyyy")}),s.jsx(be,{className:"text-right",children:o.hours_worked.toFixed(2)}),s.jsxs(be,{className:"text-right",children:["$",o.hourly_rate.toFixed(2),"/hr"]}),s.jsxs(be,{className:"text-right font-medium",children:["$",o.total_owed.toFixed(2)]}),s.jsx(be,{children:s.jsx(ne,{variant:o.status==="cleared"?"default":"secondary",children:o.status==="cleared"?"Paid":"Pending"})}),t&&s.jsxs(be,{children:[o.status==="pending"&&s.jsx(K,{size:"sm",variant:"outline",onClick:()=>a(o.id),disabled:i===o.id,children:i===o.id?s.jsx(Ut,{className:"w-4 h-4 animate-spin"}):s.jsx(Kt,{className:"w-4 h-4"})}),o.status==="cleared"&&o.cleared_at&&s.jsx("span",{className:"text-xs text-muted-foreground",children:Ze(new Date(o.cleared_at),"MMM d")})]})]},o.id)})})]}),m0e=async()=>{try{const t=gs().filter(o=>o.status==="completed"),r=sf(),{data:n}=await de.from("payroll_entries").select("shift_id"),a=new Set((n||[]).map(o=>o.shift_id));let i=0;for(const o of t){if(a.has(o.id))continue;let l=0;if(o.checkedInAt&&o.signedOutAt){const p=new Date(o.checkedInAt),y=new Date(o.signedOutAt);l=Math.max(0,(y.getTime()-p.getTime())/(1e3*60*60))}const c=ij(o.services);let d,h;switch(c){case"hospital":d=r.hospitalVisit,h="Hospital Visit";break;case"doctor":d=r.doctorVisit,h="Doctor Visit";break;default:d=r.standardHomeCare,h="Standard Home Care"}const f=l*d,{error:m}=await de.from("payroll_entries").insert({shift_id:o.id,psw_id:o.pswId,psw_name:o.pswName,task_name:o.services.length>0?`${h}: ${o.services.join(", ")}`:h,scheduled_date:o.scheduledDate,hours_worked:Number(l.toFixed(2)),hourly_rate:d,surcharge_applied:null,total_owed:Number(f.toFixed(2)),status:"pending"});m?console.error("Error inserting payroll entry:",m):i++}return{success:!0,count:i}}catch(e){return console.error("Error syncing shifts to payroll:",e),{success:!1,count:0,error:e.message}}},p0e=()=>{const[e,t]=x.useState({emailApiKey:"",emailProvider:"resend",officeNumber:""}),[r,n]=x.useState(!1),[a,i]=x.useState(!0),[o,l]=x.useState(!1);x.useEffect(()=>{(async()=>{const f=await Pde();t(f),i(!1)})()},[]);const c=(h,f)=>{t(m=>({...m,[h]:f})),n(!0)},d=async()=>{l(!0);const h=await kde(e);l(!1),n(!1),h?Z.success("Settings saved successfully!"):Z.error("Failed to save settings. Please try again.")};return a?s.jsx("div",{className:"space-y-6",children:s.jsx(J,{className:"shadow-card",children:s.jsx(Q,{className:"p-6",children:s.jsxs("div",{className:"animate-pulse space-y-4",children:[s.jsx("div",{className:"h-6 bg-muted rounded w-1/3"}),s.jsx("div",{className:"h-10 bg-muted rounded"})]})})})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(J,{className:"shadow-card",children:[s.jsxs(ke,{className:"pb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(yee,{className:"w-5 h-5 text-primary"}),s.jsx(Ee,{className:"text-lg",children:"Backend Integrations"})]}),s.jsx(Ge,{children:"Secure API connections managed via backend secrets"})]}),s.jsxs(Q,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(hn,{className:"w-5 h-5 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Email (Resend)"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"RESEND_API_KEY configured"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(es,{className:"w-4 h-4 text-emerald-500"}),s.jsx(ne,{className:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400",children:"Connected"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ms,{className:"w-5 h-5 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Payments (Stripe)"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"STRIPE_SECRET_KEY configured"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(es,{className:"w-4 h-4 text-emerald-500"}),s.jsx(ne,{className:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400",children:"Connected"})]})]})]})]}),s.jsxs(J,{className:"shadow-card",children:[s.jsxs(ke,{className:"pb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Fn,{className:"w-5 h-5 text-primary"}),s.jsx(Ee,{className:"text-lg",children:"Office Contact"})]}),s.jsx(Ge,{children:"This number appears in all templates as the contact point"})]}),s.jsx(Q,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"office-number",children:"Office Phone Number"}),s.jsx(pe,{id:"office-number",value:e.officeNumber,onChange:h=>c("officeNumber",h.target.value),placeholder:"(613) 555-0100"})]})})]}),r&&s.jsx("div",{className:"sticky bottom-0 pt-4 pb-2 bg-background/95 backdrop-blur-sm",children:s.jsxs(K,{variant:"brand",size:"lg",onClick:d,disabled:o,className:"shadow-elevated w-full",children:[s.jsx(In,{className:"w-4 h-4 mr-2"}),o?"Saving...":"Save Settings"]})}),s.jsxs("div",{className:"p-4 bg-emerald-50 dark:bg-emerald-950/20 border border-emerald-200 dark:border-emerald-800 rounded-lg",children:[s.jsx("p",{className:"text-sm text-emerald-800 dark:text-emerald-200 font-medium mb-2",children:" Secure Configuration"}),s.jsx("p",{className:"text-xs text-emerald-700 dark:text-emerald-300",children:"API keys are stored as secure backend secrets and never exposed in the frontend. View full infrastructure status in the Gear Box tab."})]})]})};var Yi="Accordion",g0e=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[AT,x0e,v0e]=Rf(Yi),[lj,Eze]=sn(Yi,[v0e,$H]),OT=$H(),HH=q.forwardRef((e,t)=>{const{type:r,...n}=e,a=n,i=n;return s.jsx(AT.Provider,{scope:e.__scopeAccordion,children:r==="multiple"?s.jsx(j0e,{...i,ref:t}):s.jsx(w0e,{...a,ref:t})})});HH.displayName=Yi;var[VH,y0e]=lj(Yi),[qH,b0e]=lj(Yi,{collapsible:!1}),w0e=q.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:a=()=>{},collapsible:i=!1,...o}=e,[l,c]=Ln({prop:r,defaultProp:n??"",onChange:a,caller:Yi});return s.jsx(VH,{scope:e.__scopeAccordion,value:q.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:q.useCallback(()=>i&&c(""),[i,c]),children:s.jsx(qH,{scope:e.__scopeAccordion,collapsible:i,children:s.jsx(GH,{...o,ref:t})})})}),j0e=q.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:a=()=>{},...i}=e,[o,l]=Ln({prop:r,defaultProp:n??[],onChange:a,caller:Yi}),c=q.useCallback(h=>l((f=[])=>[...f,h]),[l]),d=q.useCallback(h=>l((f=[])=>f.filter(m=>m!==h)),[l]);return s.jsx(VH,{scope:e.__scopeAccordion,value:o,onItemOpen:c,onItemClose:d,children:s.jsx(qH,{scope:e.__scopeAccordion,collapsible:!0,children:s.jsx(GH,{...i,ref:t})})})}),[N0e,cj]=lj(Yi),GH=q.forwardRef((e,t)=>{const{__scopeAccordion:r,disabled:n,dir:a,orientation:i="vertical",...o}=e,l=q.useRef(null),c=nt(l,t),d=x0e(r),f=Tc(a)==="ltr",m=Ie(e.onKeyDown,p=>{var O;if(!g0e.includes(p.key))return;const y=p.target,v=d().filter(E=>{var D;return!((D=E.ref.current)!=null&&D.disabled)}),b=v.findIndex(E=>E.ref.current===y),N=v.length;if(b===-1)return;p.preventDefault();let j=b;const w=0,S=N-1,C=()=>{j=b+1,j>S&&(j=w)},P=()=>{j=b-1,j<w&&(j=S)};switch(p.key){case"Home":j=w;break;case"End":j=S;break;case"ArrowRight":i==="horizontal"&&(f?C():P());break;case"ArrowDown":i==="vertical"&&C();break;case"ArrowLeft":i==="horizontal"&&(f?P():C());break;case"ArrowUp":i==="vertical"&&P();break}const T=j%N;(O=v[T].ref.current)==null||O.focus()});return s.jsx(N0e,{scope:r,disabled:n,direction:a,orientation:i,children:s.jsx(AT.Slot,{scope:r,children:s.jsx(ze.div,{...o,"data-orientation":i,ref:c,onKeyDown:n?void 0:m})})})}),Z0="AccordionItem",[_0e,MT]=lj(Z0),KH=q.forwardRef((e,t)=>{const{__scopeAccordion:r,value:n,...a}=e,i=cj(Z0,r),o=y0e(Z0,r),l=OT(r),c=Qs(),d=n&&o.value.includes(n)||!1,h=i.disabled||e.disabled;return s.jsx(_0e,{scope:r,open:d,disabled:h,triggerId:c,children:s.jsx(BH,{"data-orientation":i.orientation,"data-state":eV(d),...l,...a,ref:t,disabled:h,open:d,onOpenChange:f=>{f?o.onItemOpen(n):o.onItemClose(n)}})})});KH.displayName=Z0;var YH="AccordionHeader",ZH=q.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,a=cj(Yi,r),i=MT(YH,r);return s.jsx(ze.h3,{"data-orientation":a.orientation,"data-state":eV(i.open),"data-disabled":i.disabled?"":void 0,...n,ref:t})});ZH.displayName=YH;var IC="AccordionTrigger",XH=q.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,a=cj(Yi,r),i=MT(IC,r),o=b0e(IC,r),l=OT(r);return s.jsx(AT.ItemSlot,{scope:r,children:s.jsx(l0e,{"aria-disabled":i.open&&!o.collapsible||void 0,"data-orientation":a.orientation,id:i.triggerId,...l,...n,ref:t})})});XH.displayName=IC;var JH="AccordionContent",QH=q.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,a=cj(Yi,r),i=MT(JH,r),o=OT(r);return s.jsx(c0e,{role:"region","aria-labelledby":i.triggerId,"data-orientation":a.orientation,...o,...n,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});QH.displayName=JH;function eV(e){return e?"open":"closed"}var S0e=HH,C0e=KH,P0e=ZH,tV=XH,rV=QH;const k0e=S0e,nV=x.forwardRef(({className:e,...t},r)=>s.jsx(C0e,{ref:r,className:Re("border-b",e),...t}));nV.displayName="AccordionItem";const sV=x.forwardRef(({className:e,children:t,...r},n)=>s.jsx(P0e,{className:"flex",children:s.jsxs(tV,{ref:n,className:Re("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...r,children:[t,s.jsx(Lf,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));sV.displayName=tV.displayName;const aV=x.forwardRef(({className:e,children:t,...r},n)=>s.jsx(rV,{ref:n,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:s.jsx("div",{className:Re("pb-4 pt-0",e),children:t})}));aV.displayName=rV.displayName;const E0e=()=>{const[e,t]=x.useState([]),[r,n]=x.useState(!0),[a,i]=x.useState(""),[o,l]=x.useState("all"),[c,d]=x.useState(null),[h,f]=x.useState(!1),[m,p]=x.useState(!1),[y,v]=x.useState(""),[b,N]=x.useState(!1),j=async()=>{n(!0);try{const{data:E,error:D}=await de.from("email_logs").select("*").order("created_at",{ascending:!1}).limit(100);if(D)throw D;t(E||[])}catch(E){console.error("Failed to fetch email logs:",E)}finally{n(!1)}};x.useEffect(()=>{j()},[]);const w=e.filter(E=>{var A,V;const D=E.recipient_email.toLowerCase().includes(a.toLowerCase())||E.subject.toLowerCase().includes(a.toLowerCase())||(((A=E.template_name)==null?void 0:A.toLowerCase())||"").includes(a.toLowerCase()),I=o==="all"||o==="care-sheet"&&((V=E.template_name)==null?void 0:V.toLowerCase().includes("care"))||E.template_name===o;return D&&I}),S=E=>{if(E.is_recalled)return s.jsxs(ne,{variant:"outline",className:"border-amber-500 text-amber-600",children:[s.jsx(Qa,{className:"w-3 h-3 mr-1"}),"Recalled"]});switch(E.status){case"sent":return s.jsxs(ne,{variant:"default",className:"bg-emerald-500",children:[s.jsx(Kt,{className:"w-3 h-3 mr-1"}),"Sent"]});case"failed":return s.jsxs(ne,{variant:"destructive",children:[s.jsx(Xn,{className:"w-3 h-3 mr-1"}),"Failed"]});default:return s.jsxs(ne,{variant:"secondary",children:[s.jsx(Qe,{className:"w-3 h-3 mr-1"}),E.status]})}},C=E=>{d(E),f(!0)},P=E=>{d(E),v(""),p(!0)},T=async()=>{if(c){N(!0);try{const{error:E}=await de.from("email_logs").update({is_recalled:!0,recalled_at:new Date().toISOString(),recall_reason:y||"No reason provided"}).eq("id",c.id);if(E)throw E;Z.success("Email marked as recalled",{description:"A correction notice can be sent manually if needed."}),p(!1),j()}catch(E){console.error("Failed to recall email:",E),Z.error("Failed to recall email")}finally{N(!1)}}},O=[...new Set(e.map(E=>E.template_name).filter(Boolean))];return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-3",children:[s.jsxs("div",{className:"relative flex-1 w-full",children:[s.jsx(Js,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(pe,{placeholder:"Search emails by recipient, subject, or template...",value:a,onChange:E=>i(E.target.value),className:"pl-9"})]}),s.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[s.jsxs(Xt,{value:o,onValueChange:l,children:[s.jsxs(qt,{className:"w-[180px]",children:[s.jsx(mw,{className:"w-4 h-4 mr-2"}),s.jsx(Jt,{placeholder:"Filter by template"})]}),s.jsxs(Gt,{children:[s.jsx(_e,{value:"all",children:"All Templates"}),s.jsx(_e,{value:"care-sheet",children:"Care Sheet Reports"}),O.map(E=>s.jsx(_e,{value:E,children:E},E))]})]}),s.jsxs(K,{variant:"outline",size:"sm",onClick:j,disabled:r,children:[s.jsx(Nr,{className:`w-4 h-4 mr-2 ${r?"animate-spin":""}`}),"Refresh"]})]})]}),s.jsx(Ps,{className:"h-[400px]",children:r?s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx(Nr,{className:"w-6 h-6 animate-spin text-muted-foreground"})}):w.length===0?s.jsx(J,{children:s.jsxs(Q,{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx(hn,{className:"w-12 h-12 text-muted-foreground mb-4"}),s.jsx("h3",{className:"font-medium text-lg",children:"No emails found"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:a||o!=="all"?"Try adjusting your search or filter":"Sent emails will appear here"})]})}):s.jsx("div",{className:"space-y-2",children:w.map(E=>s.jsx(J,{className:`hover:bg-muted/50 transition-colors ${E.is_recalled?"opacity-75":""}`,children:s.jsx(Q,{className:"p-4",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"font-medium truncate",children:E.subject}),E.template_name&&s.jsx(ne,{variant:"outline",className:"shrink-0 text-xs",children:E.template_name})]}),s.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:["To: ",E.recipient_email]}),E.error_message&&s.jsxs("p",{className:"text-xs text-destructive mt-1 truncate",children:["Error: ",E.error_message]}),E.is_recalled&&E.recall_reason&&s.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:["Recall reason: ",E.recall_reason]})]}),s.jsxs("div",{className:"flex flex-col items-end gap-2 shrink-0",children:[S(E),s.jsx("span",{className:"text-xs text-muted-foreground",children:Ze(new Date(E.created_at),"MMM d, h:mm a")}),s.jsxs("div",{className:"flex gap-1",children:[s.jsxs(K,{variant:"ghost",size:"sm",className:"h-7 px-2",onClick:()=>C(E),children:[s.jsx(Ms,{className:"w-3 h-3 mr-1"}),"View"]}),E.status==="sent"&&!E.is_recalled&&s.jsxs(K,{variant:"ghost",size:"sm",className:"h-7 px-2 text-amber-600 hover:text-amber-700",onClick:()=>P(E),children:[s.jsx(Qa,{className:"w-3 h-3 mr-1"}),"Recall"]})]})]})]})})},E.id))})}),s.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Showing last 100 emails"}),s.jsx(hr,{open:h,onOpenChange:f,children:s.jsxs(or,{className:"max-w-2xl max-h-[80vh]",children:[s.jsx(lr,{children:s.jsx(cr,{children:c==null?void 0:c.subject})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"To:"})," ",s.jsx("span",{className:"font-medium",children:c==null?void 0:c.recipient_email})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Sent:"})," ",s.jsx("span",{className:"font-medium",children:(c==null?void 0:c.created_at)&&Ze(new Date(c.created_at),"PPpp")})]}),(c==null?void 0:c.template_name)&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Template:"})," ",s.jsx(ne,{variant:"outline",children:c.template_name})]})]}),s.jsx(Ps,{className:"h-[400px] border rounded-lg p-4",children:c!=null&&c.body?s.jsx("div",{className:"prose prose-sm max-w-none dark:prose-invert",dangerouslySetInnerHTML:{__html:c.body}}):s.jsx("p",{className:"text-muted-foreground italic",children:"Email body not available"})})]})]})}),s.jsx(hr,{open:m,onOpenChange:p,children:s.jsxs(or,{children:[s.jsx(lr,{children:s.jsxs(cr,{className:"flex items-center gap-2 text-amber-600",children:[s.jsx(Qa,{className:"w-5 h-5"}),"Recall Email"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Mark this email as recalled. This does not unsend the email but records it as needing correction."}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{children:"Reason for recall (optional)"}),s.jsx(_n,{placeholder:"e.g., Incorrect information, wrong recipient...",value:y,onChange:E=>v(E.target.value)})]}),s.jsxs("div",{className:"p-3 bg-muted rounded-lg text-sm",children:[s.jsx("p",{className:"font-medium",children:"Email to recall:"}),s.jsx("p",{className:"text-muted-foreground",children:c==null?void 0:c.subject}),s.jsxs("p",{className:"text-muted-foreground",children:["To: ",c==null?void 0:c.recipient_email]})]})]}),s.jsxs(yo,{children:[s.jsx(K,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),s.jsx(K,{variant:"default",className:"bg-amber-600 hover:bg-amber-700",onClick:T,disabled:b,children:b?"Recalling...":"Confirm Recall"})]})]})})]})},T0e=()=>{const[e,t]=x.useState(Jh()),[r,n]=x.useState(!1),[a,i]=x.useState(null),[o,l]=x.useState("templates"),[c,d]=x.useState(!1),[h,f]=x.useState(null),[m,p]=x.useState(Ede()),[y,v]=x.useState(""),[b,N]=x.useState("adminCc"),[j,w]=x.useState({name:"",description:"",emailSubject:"",emailBody:"",type:"email"});x.useEffect(()=>{t(Jh())},[]);const S=($,H,F)=>{t(R=>R.map(z=>z.id===$?{...z,[H]:F}:z)),n(!0)},C=()=>{gx(e),n(!1),Z.success("Templates saved successfully!")},P=()=>{const $=Sde();t($),n(!1),Z.info("Templates reset to defaults")},T=$=>{navigator.clipboard.writeText($),i($),setTimeout(()=>i(null),2e3)},O=()=>{if(!j.name.trim()){Z.error("Template name is required");return}const $=jde({...j,smsText:""});t($),d(!1),w({name:"",description:"",emailSubject:"",emailBody:"",type:"email"}),Z.success("Template created!")},E=$=>{const H=Nde($);t(H),f(null),Z.success("Template deleted")},D=$=>{const H=_de($);t(H),Z.success("Template duplicated")},I=()=>{const $=y.trim().toLowerCase();if(!$||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test($)){Z.error("Please enter a valid email address");return}if(m[b].includes($)){Z.error("Email already added");return}const H={...m,[b]:[...m[b],$]};p(H),_3(H),v(""),Z.success("Recipient added")},A=($,H)=>{const F={...m,[$]:m[$].filter(R=>R!==H)};p(F),_3(F)},V=$=>{switch($){case"email":return s.jsx(hn,{className:"w-4 h-4"});case"sms":return s.jsx(gh,{className:"w-4 h-4"});case"both":return s.jsxs("div",{className:"flex gap-1",children:[s.jsx(hn,{className:"w-4 h-4"}),s.jsx(gh,{className:"w-4 h-4"})]})}},U=$=>{switch($){case"email":return s.jsx(ne,{variant:"secondary",children:"Email Only"});case"sms":return s.jsx(ne,{variant:"outline",children:"SMS Only"});case"both":return s.jsx(ne,{children:"Email & SMS"})}};return s.jsxs("div",{className:"flex flex-col min-h-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4 shrink-0",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Message Templates"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Customize automated emails and manage recipients"})]}),s.jsx("div",{className:"flex gap-2",children:o==="templates"&&s.jsxs(s.Fragment,{children:[s.jsxs(K,{variant:"outline",size:"sm",onClick:()=>d(!0),children:[s.jsx(xo,{className:"w-4 h-4 mr-2"}),"New"]}),s.jsxs(K,{variant:"outline",size:"sm",onClick:P,children:[s.jsx(Qa,{className:"w-4 h-4 mr-2"}),"Reset"]}),s.jsxs(K,{variant:"brand",size:"sm",onClick:C,disabled:!r,children:[s.jsx(In,{className:"w-4 h-4 mr-2"}),"Save All"]})]})})]}),s.jsxs(qi,{value:o,onValueChange:$=>l($),className:"flex-1 flex flex-col min-h-0",children:[s.jsxs(ii,{className:"grid w-full grid-cols-3 shrink-0",children:[s.jsxs(ft,{value:"templates",children:[s.jsx(zt,{className:"w-4 h-4 mr-2"}),"Templates"]}),s.jsxs(ft,{value:"history",children:[s.jsx(Sk,{className:"w-4 h-4 mr-2"}),"Email History"]}),s.jsxs(ft,{value:"recipients",children:[s.jsx(pn,{className:"w-4 h-4 mr-2"}),"Recipients"]})]}),s.jsx(Ct,{value:"templates",className:"mt-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs(J,{className:"shadow-card",children:[s.jsxs(ke,{className:"pb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(wee,{className:"w-5 h-5 text-primary"}),s.jsx(Ee,{className:"text-base",children:"Dynamic Placeholders"})]}),s.jsx(Ge,{children:"Click to copy. These tags are automatically replaced with real data."})]}),s.jsx(Q,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:wde.map(({tag:$,description:H})=>s.jsxs("button",{onClick:()=>T($),className:"inline-flex items-center gap-1.5 px-2.5 py-1.5 bg-muted hover:bg-primary/10 rounded-md text-xs font-mono transition-colors group",title:H,children:[a===$?s.jsx(tn,{className:"w-3 h-3 text-emerald-500"}):s.jsx(Qo,{className:"w-3 h-3 text-muted-foreground group-hover:text-primary"}),$]},$))})})]}),s.jsx(k0e,{type:"single",collapsible:!0,className:"space-y-3",children:e.map($=>s.jsxs(nV,{value:$.id,className:"border rounded-lg shadow-card overflow-hidden",children:[s.jsx(sV,{className:"px-4 py-3 hover:no-underline hover:bg-muted/50",children:s.jsxs("div",{className:"flex items-center gap-3 text-left flex-1",children:[s.jsx("div",{className:"text-muted-foreground",children:V($.type)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"font-medium truncate",children:$.name}),$.isCustom&&s.jsx(ne,{variant:"outline",className:"text-xs shrink-0",children:"Custom"})]}),s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:$.description})]}),U($.type)]})}),s.jsxs(aV,{className:"px-4 pb-4",children:[s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsxs(K,{variant:"outline",size:"sm",onClick:H=>{H.stopPropagation(),D($.id)},children:[s.jsx(see,{className:"w-4 h-4 mr-2"}),"Duplicate"]}),$.isCustom&&s.jsxs(K,{variant:"outline",size:"sm",className:"text-destructive hover:bg-destructive hover:text-destructive-foreground",onClick:H=>{H.stopPropagation(),f($.id)},children:[s.jsx(yc,{className:"w-4 h-4 mr-2"}),"Delete"]})]}),s.jsxs(qi,{defaultValue:"email",className:"w-full",children:[s.jsxs(ii,{className:"grid w-full grid-cols-2 mb-4",children:[s.jsxs(ft,{value:"email",disabled:$.type==="sms",children:[s.jsx(hn,{className:"w-4 h-4 mr-2"}),"Email"]}),s.jsxs(ft,{value:"sms",disabled:$.type==="email",children:[s.jsx(gh,{className:"w-4 h-4 mr-2"}),"SMS"]})]}),s.jsx(Ct,{value:"email",className:"space-y-4",children:$.type!=="sms"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:`${$.id}-subject`,children:"Email Subject"}),s.jsx(pe,{id:`${$.id}-subject`,value:$.emailSubject,onChange:H=>S($.id,"emailSubject",H.target.value),placeholder:"Enter email subject..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:`${$.id}-body`,children:"Email Body"}),s.jsx(_n,{id:`${$.id}-body`,value:$.emailBody,onChange:H=>S($.id,"emailBody",H.target.value),placeholder:"Enter email body...",rows:10,className:"font-mono text-sm"})]}),$.id==="care-sheet-delivery"&&s.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Wr,{className:"w-4 h-4 text-amber-600 shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:"Privacy Footer (Auto-Added)"}),s.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300 mt-1 font-mono whitespace-pre-line",children:gE})]})]})})]})}),s.jsx(Ct,{value:"sms",className:"space-y-4",children:$.type!=="email"&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(oe,{htmlFor:`${$.id}-sms`,children:"SMS Text"}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[$.smsText.length," / 160 chars"]})]}),s.jsx(_n,{id:`${$.id}-sms`,value:$.smsText,onChange:H=>S($.id,"smsText",H.target.value),placeholder:"Enter SMS text...",rows:3,maxLength:320}),$.smsText.length>160&&s.jsx("p",{className:"text-xs text-amber-600",children:" Message exceeds 160 characters and may be split into multiple SMS"})]})})]})]})]},$.id))})]})}),s.jsx(Ct,{value:"history",className:"mt-4",children:s.jsx(E0e,{})}),s.jsx(Ct,{value:"recipients",className:"mt-4",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs(J,{children:[s.jsxs(ke,{children:[s.jsx(Ee,{className:"text-base",children:"Admin CC Recipients"}),s.jsx(Ge,{children:"These emails will be CC'd on all client-facing notifications"})]}),s.jsxs(Q,{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(pe,{placeholder:"Enter email address...",value:b==="adminCc"?y:"",onChange:$=>{N("adminCc"),v($.target.value)},onFocus:()=>N("adminCc")}),s.jsx(K,{onClick:I,disabled:b!=="adminCc",children:s.jsx(xo,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:m.adminCc.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"No CC recipients configured"}):m.adminCc.map($=>s.jsxs(ne,{variant:"secondary",className:"flex items-center gap-1 pr-1",children:[$,s.jsx("button",{onClick:()=>A("adminCc",$),className:"ml-1 p-0.5 hover:bg-muted rounded",children:s.jsx(Hr,{className:"w-3 h-3"})})]},$))})]})]}),s.jsxs(J,{children:[s.jsxs(ke,{children:[s.jsx(Ee,{className:"text-base",children:"Alert Recipients"}),s.jsx(Ge,{children:"These emails receive overtime alerts and administrative notifications"})]}),s.jsxs(Q,{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(pe,{placeholder:"Enter email address...",value:b==="alertRecipients"?y:"",onChange:$=>{N("alertRecipients"),v($.target.value)},onFocus:()=>N("alertRecipients")}),s.jsx(K,{onClick:I,disabled:b!=="alertRecipients",children:s.jsx(xo,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:m.alertRecipients.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"No alert recipients configured"}):m.alertRecipients.map($=>s.jsxs(ne,{variant:"secondary",className:"flex items-center gap-1 pr-1",children:[$,s.jsx("button",{onClick:()=>A("alertRecipients",$),className:"ml-1 p-0.5 hover:bg-muted rounded",children:s.jsx(Hr,{className:"w-3 h-3"})})]},$))})]})]})]})})]}),s.jsx(hr,{open:c,onOpenChange:d,children:s.jsxs(or,{className:"max-w-lg",children:[s.jsxs(lr,{children:[s.jsx(cr,{children:"Create New Template"}),s.jsx(bo,{children:"Create a custom email template for notifications"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"new-name",children:"Template Name"}),s.jsx(pe,{id:"new-name",value:j.name,onChange:$=>w(H=>({...H,name:$.target.value})),placeholder:"e.g., Follow-up Reminder"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"new-desc",children:"Description"}),s.jsx(pe,{id:"new-desc",value:j.description,onChange:$=>w(H=>({...H,description:$.target.value})),placeholder:"Brief description of when this template is used"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"new-subject",children:"Email Subject"}),s.jsx(pe,{id:"new-subject",value:j.emailSubject,onChange:$=>w(H=>({...H,emailSubject:$.target.value})),placeholder:"Enter subject line..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"new-body",children:"Email Body"}),s.jsx(_n,{id:"new-body",value:j.emailBody,onChange:$=>w(H=>({...H,emailBody:$.target.value})),placeholder:"Enter email content... Use {{placeholders}} for dynamic data",rows:6,className:"font-mono text-sm"})]})]}),s.jsxs(yo,{children:[s.jsx(K,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),s.jsx(K,{onClick:O,children:"Create Template"})]})]})}),s.jsx(di,{open:!!h,onOpenChange:()=>f(null),children:s.jsxs(Ia,{children:[s.jsxs(ks,{children:[s.jsx(Ts,{children:"Delete Template?"}),s.jsx(As,{children:"This action cannot be undone. The template will be permanently deleted."})]}),s.jsxs(Es,{children:[s.jsx(Ra,{children:"Cancel"}),s.jsx(Os,{onClick:()=>h&&E(h),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})},A0e=[{id:"RA001",clientName:"John Peterson",clientEmail:"j.peterson@email.com",attemptedAddress:"456 Cottage Road, Peterborough, ON K9H 2M1",distanceKm:112,timestamp:"2025-01-13T14:32:00",dismissed:!1},{id:"RA002",clientName:"Linda Hayes",clientEmail:"linda.h@email.com",attemptedAddress:"789 Lake Street, Barrie, ON L4N 3T5",distanceKm:89,timestamp:"2025-01-12T09:15:00",dismissed:!1},{id:"RA003",clientName:"Robert Clark",clientEmail:"r.clark@email.com",attemptedAddress:"123 River Road, Hamilton, ON L8P 4R2",distanceKm:78,timestamp:"2025-01-11T16:45:00",dismissed:!0},{id:"RA004",clientName:"Susan Miller",clientEmail:"susan.m@email.com",attemptedAddress:"567 Highway Ave, London, ON N6A 1B5",distanceKm:195,timestamp:"2025-01-10T11:20:00",dismissed:!1}],O0e=()=>{const[e,t]=x.useState(A0e),{radius:r,isLoading:n}=mT(),a=d=>{t(h=>h.map(f=>f.id===d?{...f,dismissed:!0}:f))},i=()=>{t(d=>d.filter(h=>!h.dismissed))},o=e.filter(d=>!d.dismissed),l=e.filter(d=>d.dismissed),c=d=>new Date(d).toLocaleDateString("en-CA",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return s.jsxs("div",{className:"space-y-6",children:[s.jsx(J,{className:"shadow-card",children:s.jsx(Q,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(St,{className:"w-5 h-5 text-primary"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-foreground",children:["Active Service Radius: ",n?"...":`${r} km`]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"PSW-based coverage zone"})]})]}),s.jsx(ne,{variant:"outline",className:"text-primary border-primary",children:"Active"})]})})}),s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(At,{className:"w-5 h-5 text-red-500"}),"Out-of-Radius Booking Attempts"]}),s.jsxs(Ge,{children:["Clients who tried to book from outside the ",r,"km service zone"]})]}),o.length>0&&s.jsxs(ne,{variant:"destructive",children:[o.length," New"]})]})}),s.jsx(Q,{className:"space-y-4",children:o.length>0?o.map(d=>s.jsxs("div",{className:"p-4 border border-red-200 bg-red-50 dark:bg-red-950/20 dark:border-red-900 rounded-lg space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($t,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium text-foreground",children:d.clientName}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",d.clientEmail,")"]})]}),s.jsxs(ne,{className:"bg-red-500/10 text-red-600 border-red-300",children:[d.distanceKm," km away"]})]}),s.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[s.jsx(St,{className:"w-4 h-4 text-red-500 mt-0.5 shrink-0"}),s.jsx("span",{className:"text-muted-foreground",children:d.attemptedAddress})]}),s.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-red-200 dark:border-red-800",children:[s.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[s.jsx(Qe,{className:"w-3 h-3"}),c(d.timestamp)]}),s.jsxs(K,{variant:"ghost",size:"sm",onClick:()=>a(d.id),className:"text-muted-foreground hover:text-foreground",children:[s.jsx(Xn,{className:"w-4 h-4 mr-1"}),"Dismiss"]})]})]},d.id)):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(St,{className:"w-12 h-12 text-muted-foreground/30 mx-auto mb-3"}),s.jsx("p",{className:"text-muted-foreground",children:"No new out-of-radius attempts"}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["All recent booking attempts are within the ",r,"km service area"]})]})})]}),l.length>0&&s.jsxs(J,{className:"shadow-card bg-muted/30",children:[s.jsx(ke,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Ee,{className:"text-base text-muted-foreground",children:["Dismissed Alerts (",l.length,")"]}),s.jsxs(K,{variant:"ghost",size:"sm",onClick:i,className:"text-muted-foreground hover:text-foreground",children:[s.jsx(yc,{className:"w-4 h-4 mr-1"}),"Clear All"]})]})}),s.jsx(Q,{className:"space-y-2",children:l.map(d=>s.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-muted-foreground",children:d.clientName}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[" ",d.distanceKm,"km"]})]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:c(d.timestamp)})]},d.id))})]}),s.jsx(J,{className:"shadow-card bg-muted/50",children:s.jsx(Q,{className:"p-4",children:s.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:[s.jsx("strong",{className:"text-foreground",children:"Blocked Message:"})," Clients outside the service area see:",s.jsx("em",{className:"block mt-1",children:`"We are currently expanding! We haven't reached your area yet, but check back soon."`})]})})})]})},M0e=()=>{const[e,t]=x.useState(jc());x.useEffect(()=>{const n=setInterval(()=>{t(jc())},1e3);return()=>clearInterval(n)},[]);const r=n=>{const a=lce(n);t(a),n?Z.success("Live Authentication ENABLED",{description:"App now requires full login and vetting. Dev Menu is hidden."}):Z.info("Live Authentication DISABLED",{description:"Dev Menu is now visible for role switching."})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(J,{className:"shadow-card border-amber-200 dark:border-amber-800/50",children:[s.jsxs(ke,{className:"pb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(mr,{className:"w-5 h-5 text-amber-600"}),s.jsx(Ee,{className:"text-lg",children:"Production Mode"})]}),s.jsx(Ge,{children:"Control authentication requirements for the entire application"})]}),s.jsxs(Q,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(oe,{htmlFor:"live-auth",className:"text-base font-medium",children:"Enable Live Authentication"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.liveAuthEnabled?"Full login and vetting required":"Dev bypass mode active - anyone can access any role"})]}),s.jsx(mn,{id:"live-auth",checked:e.liveAuthEnabled,onCheckedChange:r})]}),s.jsx("div",{className:`flex items-start gap-3 p-3 rounded-lg ${e.liveAuthEnabled?"bg-emerald-50 dark:bg-emerald-950/20 border border-emerald-200 dark:border-emerald-800":"bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800"}`,children:e.liveAuthEnabled?s.jsxs(s.Fragment,{children:[s.jsx(es,{className:"w-5 h-5 text-emerald-600 shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-emerald-800 dark:text-emerald-200",children:"Production Mode Active"}),s.jsx("p",{className:"text-sm text-emerald-700 dark:text-emerald-300",children:"Users must log in with valid credentials. PSWs require vetting approval."})]})]}):s.jsxs(s.Fragment,{children:[s.jsx(Wr,{className:"w-5 h-5 text-amber-600 shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-amber-800 dark:text-amber-200",children:"Development Mode Active"}),s.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:"The floating Dev Menu allows instant role switching without authentication."})]})]})}),!e.liveAuthEnabled&&e.devRole&&s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-lg",children:[s.jsx(h0,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Current Dev Role:"}),s.jsx(ne,{variant:"outline",children:e.devRole})]})]})]}),s.jsxs("div",{className:"p-4 bg-emerald-50 dark:bg-emerald-950/20 border border-emerald-200 dark:border-emerald-800 rounded-lg",children:[s.jsx("p",{className:"text-sm text-emerald-800 dark:text-emerald-200 font-medium mb-1",children:" Infrastructure Status"}),s.jsx("p",{className:"text-xs text-emerald-700 dark:text-emerald-300",children:"Email (Resend), Stripe, and Progressier are configured via secure backend secrets. View the full status in the Gear Box tab."})]})]})};function iV(e,t){const r=x.useRef(t);x.useEffect(function(){t!==r.current&&e.attributionControl!=null&&(r.current!=null&&e.attributionControl.removeAttribution(r.current),t!=null&&e.attributionControl.addAttribution(t)),r.current=t},[e,t])}function I0e(e,t,r){t.center!==r.center&&e.setLatLng(t.center),t.radius!=null&&t.radius!==r.radius&&e.setRadius(t.radius)}const R0e=1;function D0e(e){return Object.freeze({__version:R0e,map:e})}function IT(e,t){return Object.freeze({...e,...t})}const oV=x.createContext(null),lV=oV.Provider;function dj(){const e=x.useContext(oV);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function cV(e){function t(r,n){const{instance:a,context:i}=e(r).current;return x.useImperativeHandle(n,()=>a),r.children==null?null:q.createElement(lV,{value:i},r.children)}return x.forwardRef(t)}function $0e(e){function t(r,n){const[a,i]=x.useState(!1),{instance:o}=e(r,i).current;x.useImperativeHandle(n,()=>o),x.useEffect(function(){a&&o.update()},[o,a,r.children]);const l=o._contentNode;return l?Cc.createPortal(r.children,l):null}return x.forwardRef(t)}function L0e(e){function t(r,n){const{instance:a}=e(r).current;return x.useImperativeHandle(n,()=>a),null}return x.forwardRef(t)}function RT(e,t){const r=x.useRef();x.useEffect(function(){return t!=null&&e.instance.on(t),r.current=t,function(){r.current!=null&&e.instance.off(r.current),r.current=null}},[e,t])}function uj(e,t){const r=e.pane??t.pane;return r?{...e,pane:r}:e}function F0e(e,t){return function(n,a){const i=dj(),o=e(uj(n,i),i);return iV(i.map,n.attribution),RT(o.current,n.eventHandlers),t(o.current,i,n,a),o}}var RC={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(r,n){n(t)})(Km,function(r){var n="1.9.4";function a(u){var g,_,k,M;for(_=1,k=arguments.length;_<k;_++){M=arguments[_];for(g in M)u[g]=M[g]}return u}var i=Object.create||function(){function u(){}return function(g){return u.prototype=g,new u}}();function o(u,g){var _=Array.prototype.slice;if(u.bind)return u.bind.apply(u,_.call(arguments,1));var k=_.call(arguments,2);return function(){return u.apply(g,k.length?k.concat(_.call(arguments)):arguments)}}var l=0;function c(u){return"_leaflet_id"in u||(u._leaflet_id=++l),u._leaflet_id}function d(u,g,_){var k,M,W,te;return te=function(){k=!1,M&&(W.apply(_,M),M=!1)},W=function(){k?M=arguments:(u.apply(_,arguments),setTimeout(te,g),k=!0)},W}function h(u,g,_){var k=g[1],M=g[0],W=k-M;return u===k&&_?u:((u-M)%W+W)%W+M}function f(){return!1}function m(u,g){if(g===!1)return u;var _=Math.pow(10,g===void 0?6:g);return Math.round(u*_)/_}function p(u){return u.trim?u.trim():u.replace(/^\s+|\s+$/g,"")}function y(u){return p(u).split(/\s+/)}function v(u,g){Object.prototype.hasOwnProperty.call(u,"options")||(u.options=u.options?i(u.options):{});for(var _ in g)u.options[_]=g[_];return u.options}function b(u,g,_){var k=[];for(var M in u)k.push(encodeURIComponent(_?M.toUpperCase():M)+"="+encodeURIComponent(u[M]));return(!g||g.indexOf("?")===-1?"?":"&")+k.join("&")}var N=/\{ *([\w_ -]+) *\}/g;function j(u,g){return u.replace(N,function(_,k){var M=g[k];if(M===void 0)throw new Error("No value provided for variable "+_);return typeof M=="function"&&(M=M(g)),M})}var w=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function S(u,g){for(var _=0;_<u.length;_++)if(u[_]===g)return _;return-1}var C="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function P(u){return window["webkit"+u]||window["moz"+u]||window["ms"+u]}var T=0;function O(u){var g=+new Date,_=Math.max(0,16-(g-T));return T=g+_,window.setTimeout(u,_)}var E=window.requestAnimationFrame||P("RequestAnimationFrame")||O,D=window.cancelAnimationFrame||P("CancelAnimationFrame")||P("CancelRequestAnimationFrame")||function(u){window.clearTimeout(u)};function I(u,g,_){if(_&&E===O)u.call(g);else return E.call(window,o(u,g))}function A(u){u&&D.call(window,u)}var V={__proto__:null,extend:a,create:i,bind:o,get lastId(){return l},stamp:c,throttle:d,wrapNum:h,falseFn:f,formatNum:m,trim:p,splitWords:y,setOptions:v,getParamString:b,template:j,isArray:w,indexOf:S,emptyImageUrl:C,requestFn:E,cancelFn:D,requestAnimFrame:I,cancelAnimFrame:A};function U(){}U.extend=function(u){var g=function(){v(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},_=g.__super__=this.prototype,k=i(_);k.constructor=g,g.prototype=k;for(var M in this)Object.prototype.hasOwnProperty.call(this,M)&&M!=="prototype"&&M!=="__super__"&&(g[M]=this[M]);return u.statics&&a(g,u.statics),u.includes&&($(u.includes),a.apply(null,[k].concat(u.includes))),a(k,u),delete k.statics,delete k.includes,k.options&&(k.options=_.options?i(_.options):{},a(k.options,u.options)),k._initHooks=[],k.callInitHooks=function(){if(!this._initHooksCalled){_.callInitHooks&&_.callInitHooks.call(this),this._initHooksCalled=!0;for(var W=0,te=k._initHooks.length;W<te;W++)k._initHooks[W].call(this)}},g},U.include=function(u){var g=this.prototype.options;return a(this.prototype,u),u.options&&(this.prototype.options=g,this.mergeOptions(u.options)),this},U.mergeOptions=function(u){return a(this.prototype.options,u),this},U.addInitHook=function(u){var g=Array.prototype.slice.call(arguments,1),_=typeof u=="function"?u:function(){this[u].apply(this,g)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(_),this};function $(u){if(!(typeof L>"u"||!L||!L.Mixin)){u=w(u)?u:[u];for(var g=0;g<u.length;g++)u[g]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var H={on:function(u,g,_){if(typeof u=="object")for(var k in u)this._on(k,u[k],g);else{u=y(u);for(var M=0,W=u.length;M<W;M++)this._on(u[M],g,_)}return this},off:function(u,g,_){if(!arguments.length)delete this._events;else if(typeof u=="object")for(var k in u)this._off(k,u[k],g);else{u=y(u);for(var M=arguments.length===1,W=0,te=u.length;W<te;W++)M?this._off(u[W]):this._off(u[W],g,_)}return this},_on:function(u,g,_,k){if(typeof g!="function"){console.warn("wrong listener type: "+typeof g);return}if(this._listens(u,g,_)===!1){_===this&&(_=void 0);var M={fn:g,ctx:_};k&&(M.once=!0),this._events=this._events||{},this._events[u]=this._events[u]||[],this._events[u].push(M)}},_off:function(u,g,_){var k,M,W;if(this._events&&(k=this._events[u],!!k)){if(arguments.length===1){if(this._firingCount)for(M=0,W=k.length;M<W;M++)k[M].fn=f;delete this._events[u];return}if(typeof g!="function"){console.warn("wrong listener type: "+typeof g);return}var te=this._listens(u,g,_);if(te!==!1){var he=k[te];this._firingCount&&(he.fn=f,this._events[u]=k=k.slice()),k.splice(te,1)}}},fire:function(u,g,_){if(!this.listens(u,_))return this;var k=a({},g,{type:u,target:this,sourceTarget:g&&g.sourceTarget||this});if(this._events){var M=this._events[u];if(M){this._firingCount=this._firingCount+1||1;for(var W=0,te=M.length;W<te;W++){var he=M[W],me=he.fn;he.once&&this.off(u,me,he.ctx),me.call(he.ctx||this,k)}this._firingCount--}}return _&&this._propagateEvent(k),this},listens:function(u,g,_,k){typeof u!="string"&&console.warn('"string" type argument expected');var M=g;typeof g!="function"&&(k=!!g,M=void 0,_=void 0);var W=this._events&&this._events[u];if(W&&W.length&&this._listens(u,M,_)!==!1)return!0;if(k){for(var te in this._eventParents)if(this._eventParents[te].listens(u,g,_,k))return!0}return!1},_listens:function(u,g,_){if(!this._events)return!1;var k=this._events[u]||[];if(!g)return!!k.length;_===this&&(_=void 0);for(var M=0,W=k.length;M<W;M++)if(k[M].fn===g&&k[M].ctx===_)return M;return!1},once:function(u,g,_){if(typeof u=="object")for(var k in u)this._on(k,u[k],g,!0);else{u=y(u);for(var M=0,W=u.length;M<W;M++)this._on(u[M],g,_,!0)}return this},addEventParent:function(u){return this._eventParents=this._eventParents||{},this._eventParents[c(u)]=u,this},removeEventParent:function(u){return this._eventParents&&delete this._eventParents[c(u)],this},_propagateEvent:function(u){for(var g in this._eventParents)this._eventParents[g].fire(u.type,a({layer:u.target,propagatedFrom:u.target},u),!0)}};H.addEventListener=H.on,H.removeEventListener=H.clearAllEventListeners=H.off,H.addOneTimeEventListener=H.once,H.fireEvent=H.fire,H.hasEventListeners=H.listens;var F=U.extend(H);function R(u,g,_){this.x=_?Math.round(u):u,this.y=_?Math.round(g):g}var z=Math.trunc||function(u){return u>0?Math.floor(u):Math.ceil(u)};R.prototype={clone:function(){return new R(this.x,this.y)},add:function(u){return this.clone()._add(G(u))},_add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.clone()._subtract(G(u))},_subtract:function(u){return this.x-=u.x,this.y-=u.y,this},divideBy:function(u){return this.clone()._divideBy(u)},_divideBy:function(u){return this.x/=u,this.y/=u,this},multiplyBy:function(u){return this.clone()._multiplyBy(u)},_multiplyBy:function(u){return this.x*=u,this.y*=u,this},scaleBy:function(u){return new R(this.x*u.x,this.y*u.y)},unscaleBy:function(u){return new R(this.x/u.x,this.y/u.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=z(this.x),this.y=z(this.y),this},distanceTo:function(u){u=G(u);var g=u.x-this.x,_=u.y-this.y;return Math.sqrt(g*g+_*_)},equals:function(u){return u=G(u),u.x===this.x&&u.y===this.y},contains:function(u){return u=G(u),Math.abs(u.x)<=Math.abs(this.x)&&Math.abs(u.y)<=Math.abs(this.y)},toString:function(){return"Point("+m(this.x)+", "+m(this.y)+")"}};function G(u,g,_){return u instanceof R?u:w(u)?new R(u[0],u[1]):u==null?u:typeof u=="object"&&"x"in u&&"y"in u?new R(u.x,u.y):new R(u,g,_)}function ie(u,g){if(u)for(var _=g?[u,g]:u,k=0,M=_.length;k<M;k++)this.extend(_[k])}ie.prototype={extend:function(u){var g,_;if(!u)return this;if(u instanceof R||typeof u[0]=="number"||"x"in u)g=_=G(u);else if(u=ae(u),g=u.min,_=u.max,!g||!_)return this;return!this.min&&!this.max?(this.min=g.clone(),this.max=_.clone()):(this.min.x=Math.min(g.x,this.min.x),this.max.x=Math.max(_.x,this.max.x),this.min.y=Math.min(g.y,this.min.y),this.max.y=Math.max(_.y,this.max.y)),this},getCenter:function(u){return G((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,u)},getBottomLeft:function(){return G(this.min.x,this.max.y)},getTopRight:function(){return G(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(u){var g,_;return typeof u[0]=="number"||u instanceof R?u=G(u):u=ae(u),u instanceof ie?(g=u.min,_=u.max):g=_=u,g.x>=this.min.x&&_.x<=this.max.x&&g.y>=this.min.y&&_.y<=this.max.y},intersects:function(u){u=ae(u);var g=this.min,_=this.max,k=u.min,M=u.max,W=M.x>=g.x&&k.x<=_.x,te=M.y>=g.y&&k.y<=_.y;return W&&te},overlaps:function(u){u=ae(u);var g=this.min,_=this.max,k=u.min,M=u.max,W=M.x>g.x&&k.x<_.x,te=M.y>g.y&&k.y<_.y;return W&&te},isValid:function(){return!!(this.min&&this.max)},pad:function(u){var g=this.min,_=this.max,k=Math.abs(g.x-_.x)*u,M=Math.abs(g.y-_.y)*u;return ae(G(g.x-k,g.y-M),G(_.x+k,_.y+M))},equals:function(u){return u?(u=ae(u),this.min.equals(u.getTopLeft())&&this.max.equals(u.getBottomRight())):!1}};function ae(u,g){return!u||u instanceof ie?u:new ie(u,g)}function X(u,g){if(u)for(var _=g?[u,g]:u,k=0,M=_.length;k<M;k++)this.extend(_[k])}X.prototype={extend:function(u){var g=this._southWest,_=this._northEast,k,M;if(u instanceof fe)k=u,M=u;else if(u instanceof X){if(k=u._southWest,M=u._northEast,!k||!M)return this}else return u?this.extend(ge(u)||le(u)):this;return!g&&!_?(this._southWest=new fe(k.lat,k.lng),this._northEast=new fe(M.lat,M.lng)):(g.lat=Math.min(k.lat,g.lat),g.lng=Math.min(k.lng,g.lng),_.lat=Math.max(M.lat,_.lat),_.lng=Math.max(M.lng,_.lng)),this},pad:function(u){var g=this._southWest,_=this._northEast,k=Math.abs(g.lat-_.lat)*u,M=Math.abs(g.lng-_.lng)*u;return new X(new fe(g.lat-k,g.lng-M),new fe(_.lat+k,_.lng+M))},getCenter:function(){return new fe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new fe(this.getNorth(),this.getWest())},getSouthEast:function(){return new fe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(u){typeof u[0]=="number"||u instanceof fe||"lat"in u?u=ge(u):u=le(u);var g=this._southWest,_=this._northEast,k,M;return u instanceof X?(k=u.getSouthWest(),M=u.getNorthEast()):k=M=u,k.lat>=g.lat&&M.lat<=_.lat&&k.lng>=g.lng&&M.lng<=_.lng},intersects:function(u){u=le(u);var g=this._southWest,_=this._northEast,k=u.getSouthWest(),M=u.getNorthEast(),W=M.lat>=g.lat&&k.lat<=_.lat,te=M.lng>=g.lng&&k.lng<=_.lng;return W&&te},overlaps:function(u){u=le(u);var g=this._southWest,_=this._northEast,k=u.getSouthWest(),M=u.getNorthEast(),W=M.lat>g.lat&&k.lat<_.lat,te=M.lng>g.lng&&k.lng<_.lng;return W&&te},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(u,g){return u?(u=le(u),this._southWest.equals(u.getSouthWest(),g)&&this._northEast.equals(u.getNorthEast(),g)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function le(u,g){return u instanceof X?u:new X(u,g)}function fe(u,g,_){if(isNaN(u)||isNaN(g))throw new Error("Invalid LatLng object: ("+u+", "+g+")");this.lat=+u,this.lng=+g,_!==void 0&&(this.alt=+_)}fe.prototype={equals:function(u,g){if(!u)return!1;u=ge(u);var _=Math.max(Math.abs(this.lat-u.lat),Math.abs(this.lng-u.lng));return _<=(g===void 0?1e-9:g)},toString:function(u){return"LatLng("+m(this.lat,u)+", "+m(this.lng,u)+")"},distanceTo:function(u){return re.distance(this,ge(u))},wrap:function(){return re.wrapLatLng(this)},toBounds:function(u){var g=180*u/40075017,_=g/Math.cos(Math.PI/180*this.lat);return le([this.lat-g,this.lng-_],[this.lat+g,this.lng+_])},clone:function(){return new fe(this.lat,this.lng,this.alt)}};function ge(u,g,_){return u instanceof fe?u:w(u)&&typeof u[0]!="object"?u.length===3?new fe(u[0],u[1],u[2]):u.length===2?new fe(u[0],u[1]):null:u==null?u:typeof u=="object"&&"lat"in u?new fe(u.lat,"lng"in u?u.lng:u.lon,u.alt):g===void 0?null:new fe(u,g,_)}var ee={latLngToPoint:function(u,g){var _=this.projection.project(u),k=this.scale(g);return this.transformation._transform(_,k)},pointToLatLng:function(u,g){var _=this.scale(g),k=this.transformation.untransform(u,_);return this.projection.unproject(k)},project:function(u){return this.projection.project(u)},unproject:function(u){return this.projection.unproject(u)},scale:function(u){return 256*Math.pow(2,u)},zoom:function(u){return Math.log(u/256)/Math.LN2},getProjectedBounds:function(u){if(this.infinite)return null;var g=this.projection.bounds,_=this.scale(u),k=this.transformation.transform(g.min,_),M=this.transformation.transform(g.max,_);return new ie(k,M)},infinite:!1,wrapLatLng:function(u){var g=this.wrapLng?h(u.lng,this.wrapLng,!0):u.lng,_=this.wrapLat?h(u.lat,this.wrapLat,!0):u.lat,k=u.alt;return new fe(_,g,k)},wrapLatLngBounds:function(u){var g=u.getCenter(),_=this.wrapLatLng(g),k=g.lat-_.lat,M=g.lng-_.lng;if(k===0&&M===0)return u;var W=u.getSouthWest(),te=u.getNorthEast(),he=new fe(W.lat-k,W.lng-M),me=new fe(te.lat-k,te.lng-M);return new X(he,me)}},re=a({},ee,{wrapLng:[-180,180],R:6371e3,distance:function(u,g){var _=Math.PI/180,k=u.lat*_,M=g.lat*_,W=Math.sin((g.lat-u.lat)*_/2),te=Math.sin((g.lng-u.lng)*_/2),he=W*W+Math.cos(k)*Math.cos(M)*te*te,me=2*Math.atan2(Math.sqrt(he),Math.sqrt(1-he));return this.R*me}}),ue=6378137,Ne={R:ue,MAX_LATITUDE:85.0511287798,project:function(u){var g=Math.PI/180,_=this.MAX_LATITUDE,k=Math.max(Math.min(_,u.lat),-_),M=Math.sin(k*g);return new R(this.R*u.lng*g,this.R*Math.log((1+M)/(1-M))/2)},unproject:function(u){var g=180/Math.PI;return new fe((2*Math.atan(Math.exp(u.y/this.R))-Math.PI/2)*g,u.x*g/this.R)},bounds:function(){var u=ue*Math.PI;return new ie([-u,-u],[u,u])}()};function je(u,g,_,k){if(w(u)){this._a=u[0],this._b=u[1],this._c=u[2],this._d=u[3];return}this._a=u,this._b=g,this._c=_,this._d=k}je.prototype={transform:function(u,g){return this._transform(u.clone(),g)},_transform:function(u,g){return g=g||1,u.x=g*(this._a*u.x+this._b),u.y=g*(this._c*u.y+this._d),u},untransform:function(u,g){return g=g||1,new R((u.x/g-this._b)/this._a,(u.y/g-this._d)/this._c)}};function Y(u,g,_,k){return new je(u,g,_,k)}var xe=a({},re,{code:"EPSG:3857",projection:Ne,transformation:function(){var u=.5/(Math.PI*Ne.R);return Y(u,.5,-u,.5)}()}),Me=a({},xe,{code:"EPSG:900913"});function $e(u){return document.createElementNS("http://www.w3.org/2000/svg",u)}function ce(u,g){var _="",k,M,W,te,he,me;for(k=0,W=u.length;k<W;k++){for(he=u[k],M=0,te=he.length;M<te;M++)me=he[M],_+=(M?"L":"M")+me.x+" "+me.y;_+=g?se.svg?"z":"x":""}return _||"M0 0"}var Le=document.documentElement.style,qe="ActiveXObject"in window,Xe=qe&&!document.addEventListener,Et="msLaunchUri"in navigator&&!("documentMode"in document),B=Mr("webkit"),ve=Mr("android"),Fe=Mr("android 2")||Mr("android 3"),st=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),pt=ve&&Mr("Google")&&st<537&&!("AudioNode"in window),et=!!window.opera,Zt=!Et&&Mr("chrome"),mt=Mr("gecko")&&!B&&!et&&!qe,zn=!Zt&&Mr("safari"),Qt=Mr("phantom"),aa="OTransition"in Le,$r=navigator.platform.indexOf("Win")===0,xn=qe&&"transition"in Le,Cr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Fe,gt="MozPerspective"in Le,Un=!window.L_DISABLE_3D&&(xn||Cr||gt)&&!aa&&!Qt,ns=typeof orientation<"u"||Mr("mobile"),Fs=ns&&B,ia=ns&&Cr,La=!window.PointerEvent&&window.MSPointerEvent,gi=!!(window.PointerEvent||La),oa="ontouchstart"in window||!!window.TouchEvent,Tn=!window.L_NO_TOUCH&&(oa||gi),we=ns&&et,Te=ns&&mt,Ke=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,xt=function(){var u=!1;try{var g=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("testPassiveEventSupport",f,g),window.removeEventListener("testPassiveEventSupport",f,g)}catch{}return u}(),pr=function(){return!!document.createElement("canvas").getContext}(),dr=!!(document.createElementNS&&$e("svg").createSVGRect),Jr=!!dr&&function(){var u=document.createElement("div");return u.innerHTML="<svg/>",(u.firstChild&&u.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ae=!dr&&function(){try{var u=document.createElement("div");u.innerHTML='<v:shape adj="1"/>';var g=u.firstChild;return g.style.behavior="url(#default#VML)",g&&typeof g.adj=="object"}catch{return!1}}(),at=navigator.platform.indexOf("Mac")===0,ur=navigator.platform.indexOf("Linux")===0;function Mr(u){return navigator.userAgent.toLowerCase().indexOf(u)>=0}var se={ie:qe,ielt9:Xe,edge:Et,webkit:B,android:ve,android23:Fe,androidStock:pt,opera:et,chrome:Zt,gecko:mt,safari:zn,phantom:Qt,opera12:aa,win:$r,ie3d:xn,webkit3d:Cr,gecko3d:gt,any3d:Un,mobile:ns,mobileWebkit:Fs,mobileWebkit3d:ia,msPointer:La,pointer:gi,touch:Tn,touchNative:oa,mobileOpera:we,mobileGecko:Te,retina:Ke,passiveEvents:xt,canvas:pr,svg:dr,vml:Ae,inlineSvg:Jr,mac:at,linux:ur},tt=se.msPointer?"MSPointerDown":"pointerdown",ut=se.msPointer?"MSPointerMove":"pointermove",la=se.msPointer?"MSPointerUp":"pointerup",Oo=se.msPointer?"MSPointerCancel":"pointercancel",Bc={touchstart:tt,touchmove:ut,touchend:la,touchcancel:Oo},Fa={touchstart:SY,touchmove:Lx,touchend:Lx,touchcancel:Lx},xi={},Xi=!1;function bY(u,g,_){return g==="touchstart"&&_Y(),Fa[g]?(_=Fa[g].bind(this,_),u.addEventListener(Bc[g],_,!1),_):(console.warn("wrong event specified:",g),f)}function wY(u,g,_){if(!Bc[g]){console.warn("wrong event specified:",g);return}u.removeEventListener(Bc[g],_,!1)}function jY(u){xi[u.pointerId]=u}function NY(u){xi[u.pointerId]&&(xi[u.pointerId]=u)}function HA(u){delete xi[u.pointerId]}function _Y(){Xi||(document.addEventListener(tt,jY,!0),document.addEventListener(ut,NY,!0),document.addEventListener(la,HA,!0),document.addEventListener(Oo,HA,!0),Xi=!0)}function Lx(u,g){if(g.pointerType!==(g.MSPOINTER_TYPE_MOUSE||"mouse")){g.touches=[];for(var _ in xi)g.touches.push(xi[_]);g.changedTouches=[g],u(g)}}function SY(u,g){g.MSPOINTER_TYPE_TOUCH&&g.pointerType===g.MSPOINTER_TYPE_TOUCH&&Wn(g),Lx(u,g)}function CY(u){var g={},_,k;for(k in u)_=u[k],g[k]=_&&_.bind?_.bind(u):_;return u=g,g.type="dblclick",g.detail=2,g.isTrusted=!1,g._simulated=!0,g}var PY=200;function kY(u,g){u.addEventListener("dblclick",g);var _=0,k;function M(W){if(W.detail!==1){k=W.detail;return}if(!(W.pointerType==="mouse"||W.sourceCapabilities&&!W.sourceCapabilities.firesTouchEvents)){var te=YA(W);if(!(te.some(function(me){return me instanceof HTMLLabelElement&&me.attributes.for})&&!te.some(function(me){return me instanceof HTMLInputElement||me instanceof HTMLSelectElement}))){var he=Date.now();he-_<=PY?(k++,k===2&&g(CY(W))):k=1,_=he}}}return u.addEventListener("click",M),{dblclick:g,simDblclick:M}}function EY(u,g){u.removeEventListener("dblclick",g.dblclick),u.removeEventListener("click",g.simDblclick)}var uN=zx(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),hm=zx(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),VA=hm==="webkitTransition"||hm==="OTransition"?hm+"End":"transitionend";function qA(u){return typeof u=="string"?document.getElementById(u):u}function fm(u,g){var _=u.style[g]||u.currentStyle&&u.currentStyle[g];if((!_||_==="auto")&&document.defaultView){var k=document.defaultView.getComputedStyle(u,null);_=k?k[g]:null}return _==="auto"?null:_}function Ht(u,g,_){var k=document.createElement(u);return k.className=g||"",_&&_.appendChild(k),k}function Lr(u){var g=u.parentNode;g&&g.removeChild(u)}function Fx(u){for(;u.firstChild;)u.removeChild(u.firstChild)}function gu(u){var g=u.parentNode;g&&g.lastChild!==u&&g.appendChild(u)}function xu(u){var g=u.parentNode;g&&g.firstChild!==u&&g.insertBefore(u,g.firstChild)}function hN(u,g){if(u.classList!==void 0)return u.classList.contains(g);var _=Bx(u);return _.length>0&&new RegExp("(^|\\s)"+g+"(\\s|$)").test(_)}function _t(u,g){if(u.classList!==void 0)for(var _=y(g),k=0,M=_.length;k<M;k++)u.classList.add(_[k]);else if(!hN(u,g)){var W=Bx(u);fN(u,(W?W+" ":"")+g)}}function Qr(u,g){u.classList!==void 0?u.classList.remove(g):fN(u,p((" "+Bx(u)+" ").replace(" "+g+" "," ")))}function fN(u,g){u.className.baseVal===void 0?u.className=g:u.className.baseVal=g}function Bx(u){return u.correspondingElement&&(u=u.correspondingElement),u.className.baseVal===void 0?u.className:u.className.baseVal}function Ba(u,g){"opacity"in u.style?u.style.opacity=g:"filter"in u.style&&TY(u,g)}function TY(u,g){var _=!1,k="DXImageTransform.Microsoft.Alpha";try{_=u.filters.item(k)}catch{if(g===1)return}g=Math.round(g*100),_?(_.Enabled=g!==100,_.Opacity=g):u.style.filter+=" progid:"+k+"(opacity="+g+")"}function zx(u){for(var g=document.documentElement.style,_=0;_<u.length;_++)if(u[_]in g)return u[_];return!1}function zc(u,g,_){var k=g||new R(0,0);u.style[uN]=(se.ie3d?"translate("+k.x+"px,"+k.y+"px)":"translate3d("+k.x+"px,"+k.y+"px,0)")+(_?" scale("+_+")":"")}function an(u,g){u._leaflet_pos=g,se.any3d?zc(u,g):(u.style.left=g.x+"px",u.style.top=g.y+"px")}function Uc(u){return u._leaflet_pos||new R(0,0)}var mm,pm,mN;if("onselectstart"in document)mm=function(){bt(window,"selectstart",Wn)},pm=function(){gr(window,"selectstart",Wn)};else{var gm=zx(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);mm=function(){if(gm){var u=document.documentElement.style;mN=u[gm],u[gm]="none"}},pm=function(){gm&&(document.documentElement.style[gm]=mN,mN=void 0)}}function pN(){bt(window,"dragstart",Wn)}function gN(){gr(window,"dragstart",Wn)}var Ux,xN;function vN(u){for(;u.tabIndex===-1;)u=u.parentNode;u.style&&(Wx(),Ux=u,xN=u.style.outlineStyle,u.style.outlineStyle="none",bt(window,"keydown",Wx))}function Wx(){Ux&&(Ux.style.outlineStyle=xN,Ux=void 0,xN=void 0,gr(window,"keydown",Wx))}function GA(u){do u=u.parentNode;while((!u.offsetWidth||!u.offsetHeight)&&u!==document.body);return u}function yN(u){var g=u.getBoundingClientRect();return{x:g.width/u.offsetWidth||1,y:g.height/u.offsetHeight||1,boundingClientRect:g}}var AY={__proto__:null,TRANSFORM:uN,TRANSITION:hm,TRANSITION_END:VA,get:qA,getStyle:fm,create:Ht,remove:Lr,empty:Fx,toFront:gu,toBack:xu,hasClass:hN,addClass:_t,removeClass:Qr,setClass:fN,getClass:Bx,setOpacity:Ba,testProp:zx,setTransform:zc,setPosition:an,getPosition:Uc,get disableTextSelection(){return mm},get enableTextSelection(){return pm},disableImageDrag:pN,enableImageDrag:gN,preventOutline:vN,restoreOutline:Wx,getSizedParentNode:GA,getScale:yN};function bt(u,g,_,k){if(g&&typeof g=="object")for(var M in g)wN(u,M,g[M],_);else{g=y(g);for(var W=0,te=g.length;W<te;W++)wN(u,g[W],_,k)}return this}var Ji="_leaflet_events";function gr(u,g,_,k){if(arguments.length===1)KA(u),delete u[Ji];else if(g&&typeof g=="object")for(var M in g)jN(u,M,g[M],_);else if(g=y(g),arguments.length===2)KA(u,function(he){return S(g,he)!==-1});else for(var W=0,te=g.length;W<te;W++)jN(u,g[W],_,k);return this}function KA(u,g){for(var _ in u[Ji]){var k=_.split(/\d/)[0];(!g||g(k))&&jN(u,k,null,null,_)}}var bN={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function wN(u,g,_,k){var M=g+c(_)+(k?"_"+c(k):"");if(u[Ji]&&u[Ji][M])return this;var W=function(he){return _.call(k||u,he||window.event)},te=W;!se.touchNative&&se.pointer&&g.indexOf("touch")===0?W=bY(u,g,W):se.touch&&g==="dblclick"?W=kY(u,W):"addEventListener"in u?g==="touchstart"||g==="touchmove"||g==="wheel"||g==="mousewheel"?u.addEventListener(bN[g]||g,W,se.passiveEvents?{passive:!1}:!1):g==="mouseenter"||g==="mouseleave"?(W=function(he){he=he||window.event,_N(u,he)&&te(he)},u.addEventListener(bN[g],W,!1)):u.addEventListener(g,te,!1):u.attachEvent("on"+g,W),u[Ji]=u[Ji]||{},u[Ji][M]=W}function jN(u,g,_,k,M){M=M||g+c(_)+(k?"_"+c(k):"");var W=u[Ji]&&u[Ji][M];if(!W)return this;!se.touchNative&&se.pointer&&g.indexOf("touch")===0?wY(u,g,W):se.touch&&g==="dblclick"?EY(u,W):"removeEventListener"in u?u.removeEventListener(bN[g]||g,W,!1):u.detachEvent("on"+g,W),u[Ji][M]=null}function Wc(u){return u.stopPropagation?u.stopPropagation():u.originalEvent?u.originalEvent._stopped=!0:u.cancelBubble=!0,this}function NN(u){return wN(u,"wheel",Wc),this}function xm(u){return bt(u,"mousedown touchstart dblclick contextmenu",Wc),u._leaflet_disable_click=!0,this}function Wn(u){return u.preventDefault?u.preventDefault():u.returnValue=!1,this}function Hc(u){return Wn(u),Wc(u),this}function YA(u){if(u.composedPath)return u.composedPath();for(var g=[],_=u.target;_;)g.push(_),_=_.parentNode;return g}function ZA(u,g){if(!g)return new R(u.clientX,u.clientY);var _=yN(g),k=_.boundingClientRect;return new R((u.clientX-k.left)/_.x-g.clientLeft,(u.clientY-k.top)/_.y-g.clientTop)}var OY=se.linux&&se.chrome?window.devicePixelRatio:se.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function XA(u){return se.edge?u.wheelDeltaY/2:u.deltaY&&u.deltaMode===0?-u.deltaY/OY:u.deltaY&&u.deltaMode===1?-u.deltaY*20:u.deltaY&&u.deltaMode===2?-u.deltaY*60:u.deltaX||u.deltaZ?0:u.wheelDelta?(u.wheelDeltaY||u.wheelDelta)/2:u.detail&&Math.abs(u.detail)<32765?-u.detail*20:u.detail?u.detail/-32765*60:0}function _N(u,g){var _=g.relatedTarget;if(!_)return!0;try{for(;_&&_!==u;)_=_.parentNode}catch{return!1}return _!==u}var MY={__proto__:null,on:bt,off:gr,stopPropagation:Wc,disableScrollPropagation:NN,disableClickPropagation:xm,preventDefault:Wn,stop:Hc,getPropagationPath:YA,getMousePosition:ZA,getWheelDelta:XA,isExternalTarget:_N,addListener:bt,removeListener:gr},JA=F.extend({run:function(u,g,_,k){this.stop(),this._el=u,this._inProgress=!0,this._duration=_||.25,this._easeOutPower=1/Math.max(k||.5,.2),this._startPos=Uc(u),this._offset=g.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=I(this._animate,this),this._step()},_step:function(u){var g=+new Date-this._startTime,_=this._duration*1e3;g<_?this._runFrame(this._easeOut(g/_),u):(this._runFrame(1),this._complete())},_runFrame:function(u,g){var _=this._startPos.add(this._offset.multiplyBy(u));g&&_._round(),an(this._el,_),this.fire("step")},_complete:function(){A(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(u){return 1-Math.pow(1-u,this._easeOutPower)}}),Ft=F.extend({options:{crs:xe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(u,g){g=v(this,g),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(u),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),g.maxBounds&&this.setMaxBounds(g.maxBounds),g.zoom!==void 0&&(this._zoom=this._limitZoom(g.zoom)),g.center&&g.zoom!==void 0&&this.setView(ge(g.center),g.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=hm&&se.any3d&&!se.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),bt(this._proxy,VA,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(u,g,_){if(g=g===void 0?this._zoom:this._limitZoom(g),u=this._limitCenter(ge(u),g,this.options.maxBounds),_=_||{},this._stop(),this._loaded&&!_.reset&&_!==!0){_.animate!==void 0&&(_.zoom=a({animate:_.animate},_.zoom),_.pan=a({animate:_.animate,duration:_.duration},_.pan));var k=this._zoom!==g?this._tryAnimatedZoom&&this._tryAnimatedZoom(u,g,_.zoom):this._tryAnimatedPan(u,_.pan);if(k)return clearTimeout(this._sizeTimer),this}return this._resetView(u,g,_.pan&&_.pan.noMoveStart),this},setZoom:function(u,g){return this._loaded?this.setView(this.getCenter(),u,{zoom:g}):(this._zoom=u,this)},zoomIn:function(u,g){return u=u||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+u,g)},zoomOut:function(u,g){return u=u||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-u,g)},setZoomAround:function(u,g,_){var k=this.getZoomScale(g),M=this.getSize().divideBy(2),W=u instanceof R?u:this.latLngToContainerPoint(u),te=W.subtract(M).multiplyBy(1-1/k),he=this.containerPointToLatLng(M.add(te));return this.setView(he,g,{zoom:_})},_getBoundsCenterZoom:function(u,g){g=g||{},u=u.getBounds?u.getBounds():le(u);var _=G(g.paddingTopLeft||g.padding||[0,0]),k=G(g.paddingBottomRight||g.padding||[0,0]),M=this.getBoundsZoom(u,!1,_.add(k));if(M=typeof g.maxZoom=="number"?Math.min(g.maxZoom,M):M,M===1/0)return{center:u.getCenter(),zoom:M};var W=k.subtract(_).divideBy(2),te=this.project(u.getSouthWest(),M),he=this.project(u.getNorthEast(),M),me=this.unproject(te.add(he).divideBy(2).add(W),M);return{center:me,zoom:M}},fitBounds:function(u,g){if(u=le(u),!u.isValid())throw new Error("Bounds are not valid.");var _=this._getBoundsCenterZoom(u,g);return this.setView(_.center,_.zoom,g)},fitWorld:function(u){return this.fitBounds([[-90,-180],[90,180]],u)},panTo:function(u,g){return this.setView(u,this._zoom,{pan:g})},panBy:function(u,g){if(u=G(u).round(),g=g||{},!u.x&&!u.y)return this.fire("moveend");if(g.animate!==!0&&!this.getSize().contains(u))return this._resetView(this.unproject(this.project(this.getCenter()).add(u)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new JA,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),g.noMoveStart||this.fire("movestart"),g.animate!==!1){_t(this._mapPane,"leaflet-pan-anim");var _=this._getMapPanePos().subtract(u).round();this._panAnim.run(this._mapPane,_,g.duration||.25,g.easeLinearity)}else this._rawPanBy(u),this.fire("move").fire("moveend");return this},flyTo:function(u,g,_){if(_=_||{},_.animate===!1||!se.any3d)return this.setView(u,g,_);this._stop();var k=this.project(this.getCenter()),M=this.project(u),W=this.getSize(),te=this._zoom;u=ge(u),g=g===void 0?te:g;var he=Math.max(W.x,W.y),me=he*this.getZoomScale(te,g),Oe=M.distanceTo(k)||1,We=1.42,ct=We*We;function Tt(on){var tv=on?-1:1,wZ=on?me:he,jZ=me*me-he*he+tv*ct*ct*Oe*Oe,NZ=2*wZ*ct*Oe,RN=jZ/NZ,OO=Math.sqrt(RN*RN+1)-RN,_Z=OO<1e-9?-18:Math.log(OO);return _Z}function xs(on){return(Math.exp(on)-Math.exp(-on))/2}function An(on){return(Math.exp(on)+Math.exp(-on))/2}function Ua(on){return xs(on)/An(on)}var Bs=Tt(0);function Nu(on){return he*(An(Bs)/An(Bs+We*on))}function xZ(on){return he*(An(Bs)*Ua(Bs+We*on)-xs(Bs))/ct}function vZ(on){return 1-Math.pow(1-on,1.5)}var yZ=Date.now(),TO=(Tt(1)-Bs)/We,bZ=_.duration?1e3*_.duration:1e3*TO*.8;function AO(){var on=(Date.now()-yZ)/bZ,tv=vZ(on)*TO;on<=1?(this._flyToFrame=I(AO,this),this._move(this.unproject(k.add(M.subtract(k).multiplyBy(xZ(tv)/Oe)),te),this.getScaleZoom(he/Nu(tv),te),{flyTo:!0})):this._move(u,g)._moveEnd(!0)}return this._moveStart(!0,_.noMoveStart),AO.call(this),this},flyToBounds:function(u,g){var _=this._getBoundsCenterZoom(u,g);return this.flyTo(_.center,_.zoom,g)},setMaxBounds:function(u){return u=le(u),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),u.isValid()?(this.options.maxBounds=u,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(u){var g=this.options.minZoom;return this.options.minZoom=u,this._loaded&&g!==u&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(u):this},setMaxZoom:function(u){var g=this.options.maxZoom;return this.options.maxZoom=u,this._loaded&&g!==u&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(u):this},panInsideBounds:function(u,g){this._enforcingBounds=!0;var _=this.getCenter(),k=this._limitCenter(_,this._zoom,le(u));return _.equals(k)||this.panTo(k,g),this._enforcingBounds=!1,this},panInside:function(u,g){g=g||{};var _=G(g.paddingTopLeft||g.padding||[0,0]),k=G(g.paddingBottomRight||g.padding||[0,0]),M=this.project(this.getCenter()),W=this.project(u),te=this.getPixelBounds(),he=ae([te.min.add(_),te.max.subtract(k)]),me=he.getSize();if(!he.contains(W)){this._enforcingBounds=!0;var Oe=W.subtract(he.getCenter()),We=he.extend(W).getSize().subtract(me);M.x+=Oe.x<0?-We.x:We.x,M.y+=Oe.y<0?-We.y:We.y,this.panTo(this.unproject(M),g),this._enforcingBounds=!1}return this},invalidateSize:function(u){if(!this._loaded)return this;u=a({animate:!1,pan:!0},u===!0?{animate:!0}:u);var g=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var _=this.getSize(),k=g.divideBy(2).round(),M=_.divideBy(2).round(),W=k.subtract(M);return!W.x&&!W.y?this:(u.animate&&u.pan?this.panBy(W):(u.pan&&this._rawPanBy(W),this.fire("move"),u.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:g,newSize:_}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(u){if(u=this._locateOptions=a({timeout:1e4,watch:!1},u),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var g=o(this._handleGeolocationResponse,this),_=o(this._handleGeolocationError,this);return u.watch?this._locationWatchId=navigator.geolocation.watchPosition(g,_,u):navigator.geolocation.getCurrentPosition(g,_,u),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(u){if(this._container._leaflet_id){var g=u.code,_=u.message||(g===1?"permission denied":g===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:g,message:"Geolocation error: "+_+"."})}},_handleGeolocationResponse:function(u){if(this._container._leaflet_id){var g=u.coords.latitude,_=u.coords.longitude,k=new fe(g,_),M=k.toBounds(u.coords.accuracy*2),W=this._locateOptions;if(W.setView){var te=this.getBoundsZoom(M);this.setView(k,W.maxZoom?Math.min(te,W.maxZoom):te)}var he={latlng:k,bounds:M,timestamp:u.timestamp};for(var me in u.coords)typeof u.coords[me]=="number"&&(he[me]=u.coords[me]);this.fire("locationfound",he)}},addHandler:function(u,g){if(!g)return this;var _=this[u]=new g(this);return this._handlers.push(_),this.options[u]&&_.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Lr(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(A(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var u;for(u in this._layers)this._layers[u].remove();for(u in this._panes)Lr(this._panes[u]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(u,g){var _="leaflet-pane"+(u?" leaflet-"+u.replace("Pane","")+"-pane":""),k=Ht("div",_,g||this._mapPane);return u&&(this._panes[u]=k),k},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var u=this.getPixelBounds(),g=this.unproject(u.getBottomLeft()),_=this.unproject(u.getTopRight());return new X(g,_)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(u,g,_){u=le(u),_=G(_||[0,0]);var k=this.getZoom()||0,M=this.getMinZoom(),W=this.getMaxZoom(),te=u.getNorthWest(),he=u.getSouthEast(),me=this.getSize().subtract(_),Oe=ae(this.project(he,k),this.project(te,k)).getSize(),We=se.any3d?this.options.zoomSnap:1,ct=me.x/Oe.x,Tt=me.y/Oe.y,xs=g?Math.max(ct,Tt):Math.min(ct,Tt);return k=this.getScaleZoom(xs,k),We&&(k=Math.round(k/(We/100))*(We/100),k=g?Math.ceil(k/We)*We:Math.floor(k/We)*We),Math.max(M,Math.min(W,k))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new R(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(u,g){var _=this._getTopLeftPoint(u,g);return new ie(_,_.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(u){return this.options.crs.getProjectedBounds(u===void 0?this.getZoom():u)},getPane:function(u){return typeof u=="string"?this._panes[u]:u},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(u,g){var _=this.options.crs;return g=g===void 0?this._zoom:g,_.scale(u)/_.scale(g)},getScaleZoom:function(u,g){var _=this.options.crs;g=g===void 0?this._zoom:g;var k=_.zoom(u*_.scale(g));return isNaN(k)?1/0:k},project:function(u,g){return g=g===void 0?this._zoom:g,this.options.crs.latLngToPoint(ge(u),g)},unproject:function(u,g){return g=g===void 0?this._zoom:g,this.options.crs.pointToLatLng(G(u),g)},layerPointToLatLng:function(u){var g=G(u).add(this.getPixelOrigin());return this.unproject(g)},latLngToLayerPoint:function(u){var g=this.project(ge(u))._round();return g._subtract(this.getPixelOrigin())},wrapLatLng:function(u){return this.options.crs.wrapLatLng(ge(u))},wrapLatLngBounds:function(u){return this.options.crs.wrapLatLngBounds(le(u))},distance:function(u,g){return this.options.crs.distance(ge(u),ge(g))},containerPointToLayerPoint:function(u){return G(u).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(u){return G(u).add(this._getMapPanePos())},containerPointToLatLng:function(u){var g=this.containerPointToLayerPoint(G(u));return this.layerPointToLatLng(g)},latLngToContainerPoint:function(u){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ge(u)))},mouseEventToContainerPoint:function(u){return ZA(u,this._container)},mouseEventToLayerPoint:function(u){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(u))},mouseEventToLatLng:function(u){return this.layerPointToLatLng(this.mouseEventToLayerPoint(u))},_initContainer:function(u){var g=this._container=qA(u);if(g){if(g._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");bt(g,"scroll",this._onScroll,this),this._containerId=c(g)},_initLayout:function(){var u=this._container;this._fadeAnimated=this.options.fadeAnimation&&se.any3d,_t(u,"leaflet-container"+(se.touch?" leaflet-touch":"")+(se.retina?" leaflet-retina":"")+(se.ielt9?" leaflet-oldie":"")+(se.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var g=fm(u,"position");g!=="absolute"&&g!=="relative"&&g!=="fixed"&&g!=="sticky"&&(u.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var u=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),an(this._mapPane,new R(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(_t(u.markerPane,"leaflet-zoom-hide"),_t(u.shadowPane,"leaflet-zoom-hide"))},_resetView:function(u,g,_){an(this._mapPane,new R(0,0));var k=!this._loaded;this._loaded=!0,g=this._limitZoom(g),this.fire("viewprereset");var M=this._zoom!==g;this._moveStart(M,_)._move(u,g)._moveEnd(M),this.fire("viewreset"),k&&this.fire("load")},_moveStart:function(u,g){return u&&this.fire("zoomstart"),g||this.fire("movestart"),this},_move:function(u,g,_,k){g===void 0&&(g=this._zoom);var M=this._zoom!==g;return this._zoom=g,this._lastCenter=u,this._pixelOrigin=this._getNewPixelOrigin(u),k?_&&_.pinch&&this.fire("zoom",_):((M||_&&_.pinch)&&this.fire("zoom",_),this.fire("move",_)),this},_moveEnd:function(u){return u&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return A(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(u){an(this._mapPane,this._getMapPanePos().subtract(u))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(u){this._targets={},this._targets[c(this._container)]=this;var g=u?gr:bt;g(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&g(window,"resize",this._onResize,this),se.any3d&&this.options.transform3DLimit&&(u?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){A(this._resizeRequest),this._resizeRequest=I(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var u=this._getMapPanePos();Math.max(Math.abs(u.x),Math.abs(u.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(u,g){for(var _=[],k,M=g==="mouseout"||g==="mouseover",W=u.target||u.srcElement,te=!1;W;){if(k=this._targets[c(W)],k&&(g==="click"||g==="preclick")&&this._draggableMoved(k)){te=!0;break}if(k&&k.listens(g,!0)&&(M&&!_N(W,u)||(_.push(k),M))||W===this._container)break;W=W.parentNode}return!_.length&&!te&&!M&&this.listens(g,!0)&&(_=[this]),_},_isClickDisabled:function(u){for(;u&&u!==this._container;){if(u._leaflet_disable_click)return!0;u=u.parentNode}},_handleDOMEvent:function(u){var g=u.target||u.srcElement;if(!(!this._loaded||g._leaflet_disable_events||u.type==="click"&&this._isClickDisabled(g))){var _=u.type;_==="mousedown"&&vN(g),this._fireDOMEvent(u,_)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(u,g,_){if(u.type==="click"){var k=a({},u);k.type="preclick",this._fireDOMEvent(k,k.type,_)}var M=this._findEventTargets(u,g);if(_){for(var W=[],te=0;te<_.length;te++)_[te].listens(g,!0)&&W.push(_[te]);M=W.concat(M)}if(M.length){g==="contextmenu"&&Wn(u);var he=M[0],me={originalEvent:u};if(u.type!=="keypress"&&u.type!=="keydown"&&u.type!=="keyup"){var Oe=he.getLatLng&&(!he._radius||he._radius<=10);me.containerPoint=Oe?this.latLngToContainerPoint(he.getLatLng()):this.mouseEventToContainerPoint(u),me.layerPoint=this.containerPointToLayerPoint(me.containerPoint),me.latlng=Oe?he.getLatLng():this.layerPointToLatLng(me.layerPoint)}for(te=0;te<M.length;te++)if(M[te].fire(g,me,!0),me.originalEvent._stopped||M[te].options.bubblingMouseEvents===!1&&S(this._mouseEvents,g)!==-1)return}},_draggableMoved:function(u){return u=u.dragging&&u.dragging.enabled()?u:this,u.dragging&&u.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var u=0,g=this._handlers.length;u<g;u++)this._handlers[u].disable()},whenReady:function(u,g){return this._loaded?u.call(g||this,{target:this}):this.on("load",u,g),this},_getMapPanePos:function(){return Uc(this._mapPane)||new R(0,0)},_moved:function(){var u=this._getMapPanePos();return u&&!u.equals([0,0])},_getTopLeftPoint:function(u,g){var _=u&&g!==void 0?this._getNewPixelOrigin(u,g):this.getPixelOrigin();return _.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(u,g){var _=this.getSize()._divideBy(2);return this.project(u,g)._subtract(_)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(u,g,_){var k=this._getNewPixelOrigin(_,g);return this.project(u,g)._subtract(k)},_latLngBoundsToNewLayerBounds:function(u,g,_){var k=this._getNewPixelOrigin(_,g);return ae([this.project(u.getSouthWest(),g)._subtract(k),this.project(u.getNorthWest(),g)._subtract(k),this.project(u.getSouthEast(),g)._subtract(k),this.project(u.getNorthEast(),g)._subtract(k)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(u){return this.latLngToLayerPoint(u).subtract(this._getCenterLayerPoint())},_limitCenter:function(u,g,_){if(!_)return u;var k=this.project(u,g),M=this.getSize().divideBy(2),W=new ie(k.subtract(M),k.add(M)),te=this._getBoundsOffset(W,_,g);return Math.abs(te.x)<=1&&Math.abs(te.y)<=1?u:this.unproject(k.add(te),g)},_limitOffset:function(u,g){if(!g)return u;var _=this.getPixelBounds(),k=new ie(_.min.add(u),_.max.add(u));return u.add(this._getBoundsOffset(k,g))},_getBoundsOffset:function(u,g,_){var k=ae(this.project(g.getNorthEast(),_),this.project(g.getSouthWest(),_)),M=k.min.subtract(u.min),W=k.max.subtract(u.max),te=this._rebound(M.x,-W.x),he=this._rebound(M.y,-W.y);return new R(te,he)},_rebound:function(u,g){return u+g>0?Math.round(u-g)/2:Math.max(0,Math.ceil(u))-Math.max(0,Math.floor(g))},_limitZoom:function(u){var g=this.getMinZoom(),_=this.getMaxZoom(),k=se.any3d?this.options.zoomSnap:1;return k&&(u=Math.round(u/k)*k),Math.max(g,Math.min(_,u))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Qr(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(u,g){var _=this._getCenterOffset(u)._trunc();return(g&&g.animate)!==!0&&!this.getSize().contains(_)?!1:(this.panBy(_,g),!0)},_createAnimProxy:function(){var u=this._proxy=Ht("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(u),this.on("zoomanim",function(g){var _=uN,k=this._proxy.style[_];zc(this._proxy,this.project(g.center,g.zoom),this.getZoomScale(g.zoom,1)),k===this._proxy.style[_]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Lr(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var u=this.getCenter(),g=this.getZoom();zc(this._proxy,this.project(u,g),this.getZoomScale(g,1))},_catchTransitionEnd:function(u){this._animatingZoom&&u.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(u,g,_){if(this._animatingZoom)return!0;if(_=_||{},!this._zoomAnimated||_.animate===!1||this._nothingToAnimate()||Math.abs(g-this._zoom)>this.options.zoomAnimationThreshold)return!1;var k=this.getZoomScale(g),M=this._getCenterOffset(u)._divideBy(1-1/k);return _.animate!==!0&&!this.getSize().contains(M)?!1:(I(function(){this._moveStart(!0,_.noMoveStart||!1)._animateZoom(u,g,!0)},this),!0)},_animateZoom:function(u,g,_,k){this._mapPane&&(_&&(this._animatingZoom=!0,this._animateToCenter=u,this._animateToZoom=g,_t(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:u,zoom:g,noUpdate:k}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Qr(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function IY(u,g){return new Ft(u,g)}var vi=U.extend({options:{position:"topright"},initialize:function(u){v(this,u)},getPosition:function(){return this.options.position},setPosition:function(u){var g=this._map;return g&&g.removeControl(this),this.options.position=u,g&&g.addControl(this),this},getContainer:function(){return this._container},addTo:function(u){this.remove(),this._map=u;var g=this._container=this.onAdd(u),_=this.getPosition(),k=u._controlCorners[_];return _t(g,"leaflet-control"),_.indexOf("bottom")!==-1?k.insertBefore(g,k.firstChild):k.appendChild(g),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Lr(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(u){this._map&&u&&u.screenX>0&&u.screenY>0&&this._map.getContainer().focus()}}),vm=function(u){return new vi(u)};Ft.include({addControl:function(u){return u.addTo(this),this},removeControl:function(u){return u.remove(),this},_initControlPos:function(){var u=this._controlCorners={},g="leaflet-",_=this._controlContainer=Ht("div",g+"control-container",this._container);function k(M,W){var te=g+M+" "+g+W;u[M+W]=Ht("div",te,_)}k("top","left"),k("top","right"),k("bottom","left"),k("bottom","right")},_clearControlPos:function(){for(var u in this._controlCorners)Lr(this._controlCorners[u]);Lr(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var QA=vi.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(u,g,_,k){return _<k?-1:k<_?1:0}},initialize:function(u,g,_){v(this,_),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var k in u)this._addLayer(u[k],k);for(k in g)this._addLayer(g[k],k,!0)},onAdd:function(u){this._initLayout(),this._update(),this._map=u,u.on("zoomend",this._checkDisabledLayers,this);for(var g=0;g<this._layers.length;g++)this._layers[g].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(u){return vi.prototype.addTo.call(this,u),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(u,g){return this._addLayer(u,g),this._map?this._update():this},addOverlay:function(u,g){return this._addLayer(u,g,!0),this._map?this._update():this},removeLayer:function(u){u.off("add remove",this._onLayerChange,this);var g=this._getLayer(c(u));return g&&this._layers.splice(this._layers.indexOf(g),1),this._map?this._update():this},expand:function(){_t(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var u=this._map.getSize().y-(this._container.offsetTop+50);return u<this._section.clientHeight?(_t(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=u+"px"):Qr(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Qr(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var u="leaflet-control-layers",g=this._container=Ht("div",u),_=this.options.collapsed;g.setAttribute("aria-haspopup",!0),xm(g),NN(g);var k=this._section=Ht("section",u+"-list");_&&(this._map.on("click",this.collapse,this),bt(g,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var M=this._layersLink=Ht("a",u+"-toggle",g);M.href="#",M.title="Layers",M.setAttribute("role","button"),bt(M,{keydown:function(W){W.keyCode===13&&this._expandSafely()},click:function(W){Wn(W),this._expandSafely()}},this),_||this.expand(),this._baseLayersList=Ht("div",u+"-base",k),this._separator=Ht("div",u+"-separator",k),this._overlaysList=Ht("div",u+"-overlays",k),g.appendChild(k)},_getLayer:function(u){for(var g=0;g<this._layers.length;g++)if(this._layers[g]&&c(this._layers[g].layer)===u)return this._layers[g]},_addLayer:function(u,g,_){this._map&&u.on("add remove",this._onLayerChange,this),this._layers.push({layer:u,name:g,overlay:_}),this.options.sortLayers&&this._layers.sort(o(function(k,M){return this.options.sortFunction(k.layer,M.layer,k.name,M.name)},this)),this.options.autoZIndex&&u.setZIndex&&(this._lastZIndex++,u.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Fx(this._baseLayersList),Fx(this._overlaysList),this._layerControlInputs=[];var u,g,_,k,M=0;for(_=0;_<this._layers.length;_++)k=this._layers[_],this._addItem(k),g=g||k.overlay,u=u||!k.overlay,M+=k.overlay?0:1;return this.options.hideSingleBase&&(u=u&&M>1,this._baseLayersList.style.display=u?"":"none"),this._separator.style.display=g&&u?"":"none",this},_onLayerChange:function(u){this._handlingClick||this._update();var g=this._getLayer(c(u.target)),_=g.overlay?u.type==="add"?"overlayadd":"overlayremove":u.type==="add"?"baselayerchange":null;_&&this._map.fire(_,g)},_createRadioElement:function(u,g){var _='<input type="radio" class="leaflet-control-layers-selector" name="'+u+'"'+(g?' checked="checked"':"")+"/>",k=document.createElement("div");return k.innerHTML=_,k.firstChild},_addItem:function(u){var g=document.createElement("label"),_=this._map.hasLayer(u.layer),k;u.overlay?(k=document.createElement("input"),k.type="checkbox",k.className="leaflet-control-layers-selector",k.defaultChecked=_):k=this._createRadioElement("leaflet-base-layers_"+c(this),_),this._layerControlInputs.push(k),k.layerId=c(u.layer),bt(k,"click",this._onInputClick,this);var M=document.createElement("span");M.innerHTML=" "+u.name;var W=document.createElement("span");g.appendChild(W),W.appendChild(k),W.appendChild(M);var te=u.overlay?this._overlaysList:this._baseLayersList;return te.appendChild(g),this._checkDisabledLayers(),g},_onInputClick:function(){if(!this._preventClick){var u=this._layerControlInputs,g,_,k=[],M=[];this._handlingClick=!0;for(var W=u.length-1;W>=0;W--)g=u[W],_=this._getLayer(g.layerId).layer,g.checked?k.push(_):g.checked||M.push(_);for(W=0;W<M.length;W++)this._map.hasLayer(M[W])&&this._map.removeLayer(M[W]);for(W=0;W<k.length;W++)this._map.hasLayer(k[W])||this._map.addLayer(k[W]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var u=this._layerControlInputs,g,_,k=this._map.getZoom(),M=u.length-1;M>=0;M--)g=u[M],_=this._getLayer(g.layerId).layer,g.disabled=_.options.minZoom!==void 0&&k<_.options.minZoom||_.options.maxZoom!==void 0&&k>_.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var u=this._section;this._preventClick=!0,bt(u,"click",Wn),this.expand();var g=this;setTimeout(function(){gr(u,"click",Wn),g._preventClick=!1})}}),RY=function(u,g,_){return new QA(u,g,_)},SN=vi.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(u){var g="leaflet-control-zoom",_=Ht("div",g+" leaflet-bar"),k=this.options;return this._zoomInButton=this._createButton(k.zoomInText,k.zoomInTitle,g+"-in",_,this._zoomIn),this._zoomOutButton=this._createButton(k.zoomOutText,k.zoomOutTitle,g+"-out",_,this._zoomOut),this._updateDisabled(),u.on("zoomend zoomlevelschange",this._updateDisabled,this),_},onRemove:function(u){u.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(u){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(u.shiftKey?3:1))},_zoomOut:function(u){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(u.shiftKey?3:1))},_createButton:function(u,g,_,k,M){var W=Ht("a",_,k);return W.innerHTML=u,W.href="#",W.title=g,W.setAttribute("role","button"),W.setAttribute("aria-label",g),xm(W),bt(W,"click",Hc),bt(W,"click",M,this),bt(W,"click",this._refocusOnMap,this),W},_updateDisabled:function(){var u=this._map,g="leaflet-disabled";Qr(this._zoomInButton,g),Qr(this._zoomOutButton,g),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||u._zoom===u.getMinZoom())&&(_t(this._zoomOutButton,g),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||u._zoom===u.getMaxZoom())&&(_t(this._zoomInButton,g),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ft.mergeOptions({zoomControl:!0}),Ft.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new SN,this.addControl(this.zoomControl))});var DY=function(u){return new SN(u)},eO=vi.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(u){var g="leaflet-control-scale",_=Ht("div",g),k=this.options;return this._addScales(k,g+"-line",_),u.on(k.updateWhenIdle?"moveend":"move",this._update,this),u.whenReady(this._update,this),_},onRemove:function(u){u.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(u,g,_){u.metric&&(this._mScale=Ht("div",g,_)),u.imperial&&(this._iScale=Ht("div",g,_))},_update:function(){var u=this._map,g=u.getSize().y/2,_=u.distance(u.containerPointToLatLng([0,g]),u.containerPointToLatLng([this.options.maxWidth,g]));this._updateScales(_)},_updateScales:function(u){this.options.metric&&u&&this._updateMetric(u),this.options.imperial&&u&&this._updateImperial(u)},_updateMetric:function(u){var g=this._getRoundNum(u),_=g<1e3?g+" m":g/1e3+" km";this._updateScale(this._mScale,_,g/u)},_updateImperial:function(u){var g=u*3.2808399,_,k,M;g>5280?(_=g/5280,k=this._getRoundNum(_),this._updateScale(this._iScale,k+" mi",k/_)):(M=this._getRoundNum(g),this._updateScale(this._iScale,M+" ft",M/g))},_updateScale:function(u,g,_){u.style.width=Math.round(this.options.maxWidth*_)+"px",u.innerHTML=g},_getRoundNum:function(u){var g=Math.pow(10,(Math.floor(u)+"").length-1),_=u/g;return _=_>=10?10:_>=5?5:_>=3?3:_>=2?2:1,g*_}}),$Y=function(u){return new eO(u)},LY='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',CN=vi.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(se.inlineSvg?LY+" ":"")+"Leaflet</a>"},initialize:function(u){v(this,u),this._attributions={}},onAdd:function(u){u.attributionControl=this,this._container=Ht("div","leaflet-control-attribution"),xm(this._container);for(var g in u._layers)u._layers[g].getAttribution&&this.addAttribution(u._layers[g].getAttribution());return this._update(),u.on("layeradd",this._addAttribution,this),this._container},onRemove:function(u){u.off("layeradd",this._addAttribution,this)},_addAttribution:function(u){u.layer.getAttribution&&(this.addAttribution(u.layer.getAttribution()),u.layer.once("remove",function(){this.removeAttribution(u.layer.getAttribution())},this))},setPrefix:function(u){return this.options.prefix=u,this._update(),this},addAttribution:function(u){return u?(this._attributions[u]||(this._attributions[u]=0),this._attributions[u]++,this._update(),this):this},removeAttribution:function(u){return u?(this._attributions[u]&&(this._attributions[u]--,this._update()),this):this},_update:function(){if(this._map){var u=[];for(var g in this._attributions)this._attributions[g]&&u.push(g);var _=[];this.options.prefix&&_.push(this.options.prefix),u.length&&_.push(u.join(", ")),this._container.innerHTML=_.join(' <span aria-hidden="true">|</span> ')}}});Ft.mergeOptions({attributionControl:!0}),Ft.addInitHook(function(){this.options.attributionControl&&new CN().addTo(this)});var FY=function(u){return new CN(u)};vi.Layers=QA,vi.Zoom=SN,vi.Scale=eO,vi.Attribution=CN,vm.layers=RY,vm.zoom=DY,vm.scale=$Y,vm.attribution=FY;var Qi=U.extend({initialize:function(u){this._map=u},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Qi.addTo=function(u,g){return u.addHandler(g,this),this};var BY={Events:H},tO=se.touch?"touchstart mousedown":"mousedown",Pl=F.extend({options:{clickTolerance:3},initialize:function(u,g,_,k){v(this,k),this._element=u,this._dragStartTarget=g||u,this._preventOutline=_},enable:function(){this._enabled||(bt(this._dragStartTarget,tO,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Pl._dragging===this&&this.finishDrag(!0),gr(this._dragStartTarget,tO,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(u){if(this._enabled&&(this._moved=!1,!hN(this._element,"leaflet-zoom-anim"))){if(u.touches&&u.touches.length!==1){Pl._dragging===this&&this.finishDrag();return}if(!(Pl._dragging||u.shiftKey||u.which!==1&&u.button!==1&&!u.touches)&&(Pl._dragging=this,this._preventOutline&&vN(this._element),pN(),mm(),!this._moving)){this.fire("down");var g=u.touches?u.touches[0]:u,_=GA(this._element);this._startPoint=new R(g.clientX,g.clientY),this._startPos=Uc(this._element),this._parentScale=yN(_);var k=u.type==="mousedown";bt(document,k?"mousemove":"touchmove",this._onMove,this),bt(document,k?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(u){if(this._enabled){if(u.touches&&u.touches.length>1){this._moved=!0;return}var g=u.touches&&u.touches.length===1?u.touches[0]:u,_=new R(g.clientX,g.clientY)._subtract(this._startPoint);!_.x&&!_.y||Math.abs(_.x)+Math.abs(_.y)<this.options.clickTolerance||(_.x/=this._parentScale.x,_.y/=this._parentScale.y,Wn(u),this._moved||(this.fire("dragstart"),this._moved=!0,_t(document.body,"leaflet-dragging"),this._lastTarget=u.target||u.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),_t(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(_),this._moving=!0,this._lastEvent=u,this._updatePosition())}},_updatePosition:function(){var u={originalEvent:this._lastEvent};this.fire("predrag",u),an(this._element,this._newPos),this.fire("drag",u)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(u){Qr(document.body,"leaflet-dragging"),this._lastTarget&&(Qr(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),gr(document,"mousemove touchmove",this._onMove,this),gr(document,"mouseup touchend touchcancel",this._onUp,this),gN(),pm();var g=this._moved&&this._moving;this._moving=!1,Pl._dragging=!1,g&&this.fire("dragend",{noInertia:u,distance:this._newPos.distanceTo(this._startPos)})}});function rO(u,g,_){var k,M=[1,4,2,8],W,te,he,me,Oe,We,ct,Tt;for(W=0,We=u.length;W<We;W++)u[W]._code=Vc(u[W],g);for(he=0;he<4;he++){for(ct=M[he],k=[],W=0,We=u.length,te=We-1;W<We;te=W++)me=u[W],Oe=u[te],me._code&ct?Oe._code&ct||(Tt=Hx(Oe,me,ct,g,_),Tt._code=Vc(Tt,g),k.push(Tt)):(Oe._code&ct&&(Tt=Hx(Oe,me,ct,g,_),Tt._code=Vc(Tt,g),k.push(Tt)),k.push(me));u=k}return u}function nO(u,g){var _,k,M,W,te,he,me,Oe,We;if(!u||u.length===0)throw new Error("latlngs not passed");za(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var ct=ge([0,0]),Tt=le(u),xs=Tt.getNorthWest().distanceTo(Tt.getSouthWest())*Tt.getNorthEast().distanceTo(Tt.getNorthWest());xs<1700&&(ct=PN(u));var An=u.length,Ua=[];for(_=0;_<An;_++){var Bs=ge(u[_]);Ua.push(g.project(ge([Bs.lat-ct.lat,Bs.lng-ct.lng])))}for(he=me=Oe=0,_=0,k=An-1;_<An;k=_++)M=Ua[_],W=Ua[k],te=M.y*W.x-W.y*M.x,me+=(M.x+W.x)*te,Oe+=(M.y+W.y)*te,he+=te*3;he===0?We=Ua[0]:We=[me/he,Oe/he];var Nu=g.unproject(G(We));return ge([Nu.lat+ct.lat,Nu.lng+ct.lng])}function PN(u){for(var g=0,_=0,k=0,M=0;M<u.length;M++){var W=ge(u[M]);g+=W.lat,_+=W.lng,k++}return ge([g/k,_/k])}var zY={__proto__:null,clipPolygon:rO,polygonCenter:nO,centroid:PN};function sO(u,g){if(!g||!u.length)return u.slice();var _=g*g;return u=HY(u,_),u=WY(u,_),u}function aO(u,g,_){return Math.sqrt(ym(u,g,_,!0))}function UY(u,g,_){return ym(u,g,_)}function WY(u,g){var _=u.length,k=typeof Uint8Array<"u"?Uint8Array:Array,M=new k(_);M[0]=M[_-1]=1,kN(u,M,g,0,_-1);var W,te=[];for(W=0;W<_;W++)M[W]&&te.push(u[W]);return te}function kN(u,g,_,k,M){var W=0,te,he,me;for(he=k+1;he<=M-1;he++)me=ym(u[he],u[k],u[M],!0),me>W&&(te=he,W=me);W>_&&(g[te]=1,kN(u,g,_,k,te),kN(u,g,_,te,M))}function HY(u,g){for(var _=[u[0]],k=1,M=0,W=u.length;k<W;k++)VY(u[k],u[M])>g&&(_.push(u[k]),M=k);return M<W-1&&_.push(u[W-1]),_}var iO;function oO(u,g,_,k,M){var W=k?iO:Vc(u,_),te=Vc(g,_),he,me,Oe;for(iO=te;;){if(!(W|te))return[u,g];if(W&te)return!1;he=W||te,me=Hx(u,g,he,_,M),Oe=Vc(me,_),he===W?(u=me,W=Oe):(g=me,te=Oe)}}function Hx(u,g,_,k,M){var W=g.x-u.x,te=g.y-u.y,he=k.min,me=k.max,Oe,We;return _&8?(Oe=u.x+W*(me.y-u.y)/te,We=me.y):_&4?(Oe=u.x+W*(he.y-u.y)/te,We=he.y):_&2?(Oe=me.x,We=u.y+te*(me.x-u.x)/W):_&1&&(Oe=he.x,We=u.y+te*(he.x-u.x)/W),new R(Oe,We,M)}function Vc(u,g){var _=0;return u.x<g.min.x?_|=1:u.x>g.max.x&&(_|=2),u.y<g.min.y?_|=4:u.y>g.max.y&&(_|=8),_}function VY(u,g){var _=g.x-u.x,k=g.y-u.y;return _*_+k*k}function ym(u,g,_,k){var M=g.x,W=g.y,te=_.x-M,he=_.y-W,me=te*te+he*he,Oe;return me>0&&(Oe=((u.x-M)*te+(u.y-W)*he)/me,Oe>1?(M=_.x,W=_.y):Oe>0&&(M+=te*Oe,W+=he*Oe)),te=u.x-M,he=u.y-W,k?te*te+he*he:new R(M,W)}function za(u){return!w(u[0])||typeof u[0][0]!="object"&&typeof u[0][0]<"u"}function lO(u){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),za(u)}function cO(u,g){var _,k,M,W,te,he,me,Oe;if(!u||u.length===0)throw new Error("latlngs not passed");za(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var We=ge([0,0]),ct=le(u),Tt=ct.getNorthWest().distanceTo(ct.getSouthWest())*ct.getNorthEast().distanceTo(ct.getNorthWest());Tt<1700&&(We=PN(u));var xs=u.length,An=[];for(_=0;_<xs;_++){var Ua=ge(u[_]);An.push(g.project(ge([Ua.lat-We.lat,Ua.lng-We.lng])))}for(_=0,k=0;_<xs-1;_++)k+=An[_].distanceTo(An[_+1])/2;if(k===0)Oe=An[0];else for(_=0,W=0;_<xs-1;_++)if(te=An[_],he=An[_+1],M=te.distanceTo(he),W+=M,W>k){me=(W-k)/M,Oe=[he.x-me*(he.x-te.x),he.y-me*(he.y-te.y)];break}var Bs=g.unproject(G(Oe));return ge([Bs.lat+We.lat,Bs.lng+We.lng])}var qY={__proto__:null,simplify:sO,pointToSegmentDistance:aO,closestPointOnSegment:UY,clipSegment:oO,_getEdgeIntersection:Hx,_getBitCode:Vc,_sqClosestPointOnSegment:ym,isFlat:za,_flat:lO,polylineCenter:cO},EN={project:function(u){return new R(u.lng,u.lat)},unproject:function(u){return new fe(u.y,u.x)},bounds:new ie([-180,-90],[180,90])},TN={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ie([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(u){var g=Math.PI/180,_=this.R,k=u.lat*g,M=this.R_MINOR/_,W=Math.sqrt(1-M*M),te=W*Math.sin(k),he=Math.tan(Math.PI/4-k/2)/Math.pow((1-te)/(1+te),W/2);return k=-_*Math.log(Math.max(he,1e-10)),new R(u.lng*g*_,k)},unproject:function(u){for(var g=180/Math.PI,_=this.R,k=this.R_MINOR/_,M=Math.sqrt(1-k*k),W=Math.exp(-u.y/_),te=Math.PI/2-2*Math.atan(W),he=0,me=.1,Oe;he<15&&Math.abs(me)>1e-7;he++)Oe=M*Math.sin(te),Oe=Math.pow((1-Oe)/(1+Oe),M/2),me=Math.PI/2-2*Math.atan(W*Oe)-te,te+=me;return new fe(te*g,u.x*g/_)}},GY={__proto__:null,LonLat:EN,Mercator:TN,SphericalMercator:Ne},KY=a({},re,{code:"EPSG:3395",projection:TN,transformation:function(){var u=.5/(Math.PI*TN.R);return Y(u,.5,-u,.5)}()}),dO=a({},re,{code:"EPSG:4326",projection:EN,transformation:Y(1/180,1,-1/180,.5)}),YY=a({},ee,{projection:EN,transformation:Y(1,0,-1,0),scale:function(u){return Math.pow(2,u)},zoom:function(u){return Math.log(u)/Math.LN2},distance:function(u,g){var _=g.lng-u.lng,k=g.lat-u.lat;return Math.sqrt(_*_+k*k)},infinite:!0});ee.Earth=re,ee.EPSG3395=KY,ee.EPSG3857=xe,ee.EPSG900913=Me,ee.EPSG4326=dO,ee.Simple=YY;var yi=F.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(u){return u.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(u){return u&&u.removeLayer(this),this},getPane:function(u){return this._map.getPane(u?this.options[u]||u:this.options.pane)},addInteractiveTarget:function(u){return this._map._targets[c(u)]=this,this},removeInteractiveTarget:function(u){return delete this._map._targets[c(u)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(u){var g=u.target;if(g.hasLayer(this)){if(this._map=g,this._zoomAnimated=g._zoomAnimated,this.getEvents){var _=this.getEvents();g.on(_,this),this.once("remove",function(){g.off(_,this)},this)}this.onAdd(g),this.fire("add"),g.fire("layeradd",{layer:this})}}});Ft.include({addLayer:function(u){if(!u._layerAdd)throw new Error("The provided object is not a Layer.");var g=c(u);return this._layers[g]?this:(this._layers[g]=u,u._mapToAdd=this,u.beforeAdd&&u.beforeAdd(this),this.whenReady(u._layerAdd,u),this)},removeLayer:function(u){var g=c(u);return this._layers[g]?(this._loaded&&u.onRemove(this),delete this._layers[g],this._loaded&&(this.fire("layerremove",{layer:u}),u.fire("remove")),u._map=u._mapToAdd=null,this):this},hasLayer:function(u){return c(u)in this._layers},eachLayer:function(u,g){for(var _ in this._layers)u.call(g,this._layers[_]);return this},_addLayers:function(u){u=u?w(u)?u:[u]:[];for(var g=0,_=u.length;g<_;g++)this.addLayer(u[g])},_addZoomLimit:function(u){(!isNaN(u.options.maxZoom)||!isNaN(u.options.minZoom))&&(this._zoomBoundLayers[c(u)]=u,this._updateZoomLevels())},_removeZoomLimit:function(u){var g=c(u);this._zoomBoundLayers[g]&&(delete this._zoomBoundLayers[g],this._updateZoomLevels())},_updateZoomLevels:function(){var u=1/0,g=-1/0,_=this._getZoomSpan();for(var k in this._zoomBoundLayers){var M=this._zoomBoundLayers[k].options;u=M.minZoom===void 0?u:Math.min(u,M.minZoom),g=M.maxZoom===void 0?g:Math.max(g,M.maxZoom)}this._layersMaxZoom=g===-1/0?void 0:g,this._layersMinZoom=u===1/0?void 0:u,_!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var vu=yi.extend({initialize:function(u,g){v(this,g),this._layers={};var _,k;if(u)for(_=0,k=u.length;_<k;_++)this.addLayer(u[_])},addLayer:function(u){var g=this.getLayerId(u);return this._layers[g]=u,this._map&&this._map.addLayer(u),this},removeLayer:function(u){var g=u in this._layers?u:this.getLayerId(u);return this._map&&this._layers[g]&&this._map.removeLayer(this._layers[g]),delete this._layers[g],this},hasLayer:function(u){var g=typeof u=="number"?u:this.getLayerId(u);return g in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(u){var g=Array.prototype.slice.call(arguments,1),_,k;for(_ in this._layers)k=this._layers[_],k[u]&&k[u].apply(k,g);return this},onAdd:function(u){this.eachLayer(u.addLayer,u)},onRemove:function(u){this.eachLayer(u.removeLayer,u)},eachLayer:function(u,g){for(var _ in this._layers)u.call(g,this._layers[_]);return this},getLayer:function(u){return this._layers[u]},getLayers:function(){var u=[];return this.eachLayer(u.push,u),u},setZIndex:function(u){return this.invoke("setZIndex",u)},getLayerId:function(u){return c(u)}}),ZY=function(u,g){return new vu(u,g)},Mo=vu.extend({addLayer:function(u){return this.hasLayer(u)?this:(u.addEventParent(this),vu.prototype.addLayer.call(this,u),this.fire("layeradd",{layer:u}))},removeLayer:function(u){return this.hasLayer(u)?(u in this._layers&&(u=this._layers[u]),u.removeEventParent(this),vu.prototype.removeLayer.call(this,u),this.fire("layerremove",{layer:u})):this},setStyle:function(u){return this.invoke("setStyle",u)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var u=new X;for(var g in this._layers){var _=this._layers[g];u.extend(_.getBounds?_.getBounds():_.getLatLng())}return u}}),XY=function(u,g){return new Mo(u,g)},yu=U.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(u){v(this,u)},createIcon:function(u){return this._createIcon("icon",u)},createShadow:function(u){return this._createIcon("shadow",u)},_createIcon:function(u,g){var _=this._getIconUrl(u);if(!_){if(u==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var k=this._createImg(_,g&&g.tagName==="IMG"?g:null);return this._setIconStyles(k,u),(this.options.crossOrigin||this.options.crossOrigin==="")&&(k.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),k},_setIconStyles:function(u,g){var _=this.options,k=_[g+"Size"];typeof k=="number"&&(k=[k,k]);var M=G(k),W=G(g==="shadow"&&_.shadowAnchor||_.iconAnchor||M&&M.divideBy(2,!0));u.className="leaflet-marker-"+g+" "+(_.className||""),W&&(u.style.marginLeft=-W.x+"px",u.style.marginTop=-W.y+"px"),M&&(u.style.width=M.x+"px",u.style.height=M.y+"px")},_createImg:function(u,g){return g=g||document.createElement("img"),g.src=u,g},_getIconUrl:function(u){return se.retina&&this.options[u+"RetinaUrl"]||this.options[u+"Url"]}});function JY(u){return new yu(u)}var bm=yu.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(u){return typeof bm.imagePath!="string"&&(bm.imagePath=this._detectIconPath()),(this.options.imagePath||bm.imagePath)+yu.prototype._getIconUrl.call(this,u)},_stripUrl:function(u){var g=function(_,k,M){var W=k.exec(_);return W&&W[M]};return u=g(u,/^url\((['"])?(.+)\1\)$/,2),u&&g(u,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var u=Ht("div","leaflet-default-icon-path",document.body),g=fm(u,"background-image")||fm(u,"backgroundImage");if(document.body.removeChild(u),g=this._stripUrl(g),g)return g;var _=document.querySelector('link[href$="leaflet.css"]');return _?_.href.substring(0,_.href.length-11-1):""}}),uO=Qi.extend({initialize:function(u){this._marker=u},addHooks:function(){var u=this._marker._icon;this._draggable||(this._draggable=new Pl(u,u,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),_t(u,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Qr(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(u){var g=this._marker,_=g._map,k=this._marker.options.autoPanSpeed,M=this._marker.options.autoPanPadding,W=Uc(g._icon),te=_.getPixelBounds(),he=_.getPixelOrigin(),me=ae(te.min._subtract(he).add(M),te.max._subtract(he).subtract(M));if(!me.contains(W)){var Oe=G((Math.max(me.max.x,W.x)-me.max.x)/(te.max.x-me.max.x)-(Math.min(me.min.x,W.x)-me.min.x)/(te.min.x-me.min.x),(Math.max(me.max.y,W.y)-me.max.y)/(te.max.y-me.max.y)-(Math.min(me.min.y,W.y)-me.min.y)/(te.min.y-me.min.y)).multiplyBy(k);_.panBy(Oe,{animate:!1}),this._draggable._newPos._add(Oe),this._draggable._startPos._add(Oe),an(g._icon,this._draggable._newPos),this._onDrag(u),this._panRequest=I(this._adjustPan.bind(this,u))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(u){this._marker.options.autoPan&&(A(this._panRequest),this._panRequest=I(this._adjustPan.bind(this,u)))},_onDrag:function(u){var g=this._marker,_=g._shadow,k=Uc(g._icon),M=g._map.layerPointToLatLng(k);_&&an(_,k),g._latlng=M,u.latlng=M,u.oldLatLng=this._oldLatLng,g.fire("move",u).fire("drag",u)},_onDragEnd:function(u){A(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",u)}}),Vx=yi.extend({options:{icon:new bm,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(u,g){v(this,g),this._latlng=ge(u)},onAdd:function(u){this._zoomAnimated=this._zoomAnimated&&u.options.markerZoomAnimation,this._zoomAnimated&&u.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(u){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&u.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(u){var g=this._latlng;return this._latlng=ge(u),this.update(),this.fire("move",{oldLatLng:g,latlng:this._latlng})},setZIndexOffset:function(u){return this.options.zIndexOffset=u,this.update()},getIcon:function(){return this.options.icon},setIcon:function(u){return this.options.icon=u,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var u=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(u)}return this},_initIcon:function(){var u=this.options,g="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),_=u.icon.createIcon(this._icon),k=!1;_!==this._icon&&(this._icon&&this._removeIcon(),k=!0,u.title&&(_.title=u.title),_.tagName==="IMG"&&(_.alt=u.alt||"")),_t(_,g),u.keyboard&&(_.tabIndex="0",_.setAttribute("role","button")),this._icon=_,u.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&bt(_,"focus",this._panOnFocus,this);var M=u.icon.createShadow(this._shadow),W=!1;M!==this._shadow&&(this._removeShadow(),W=!0),M&&(_t(M,g),M.alt=""),this._shadow=M,u.opacity<1&&this._updateOpacity(),k&&this.getPane().appendChild(this._icon),this._initInteraction(),M&&W&&this.getPane(u.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&gr(this._icon,"focus",this._panOnFocus,this),Lr(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Lr(this._shadow),this._shadow=null},_setPos:function(u){this._icon&&an(this._icon,u),this._shadow&&an(this._shadow,u),this._zIndex=u.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(u){this._icon&&(this._icon.style.zIndex=this._zIndex+u)},_animateZoom:function(u){var g=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center).round();this._setPos(g)},_initInteraction:function(){if(this.options.interactive&&(_t(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),uO)){var u=this.options.draggable;this.dragging&&(u=this.dragging.enabled(),this.dragging.disable()),this.dragging=new uO(this),u&&this.dragging.enable()}},setOpacity:function(u){return this.options.opacity=u,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var u=this.options.opacity;this._icon&&Ba(this._icon,u),this._shadow&&Ba(this._shadow,u)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var u=this._map;if(u){var g=this.options.icon.options,_=g.iconSize?G(g.iconSize):G(0,0),k=g.iconAnchor?G(g.iconAnchor):G(0,0);u.panInside(this._latlng,{paddingTopLeft:k,paddingBottomRight:_.subtract(k)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function QY(u,g){return new Vx(u,g)}var kl=yi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(u){this._renderer=u.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(u){return v(this,u),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&u&&Object.prototype.hasOwnProperty.call(u,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),qx=kl.extend({options:{fill:!0,radius:10},initialize:function(u,g){v(this,g),this._latlng=ge(u),this._radius=this.options.radius},setLatLng:function(u){var g=this._latlng;return this._latlng=ge(u),this.redraw(),this.fire("move",{oldLatLng:g,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(u){return this.options.radius=this._radius=u,this.redraw()},getRadius:function(){return this._radius},setStyle:function(u){var g=u&&u.radius||this._radius;return kl.prototype.setStyle.call(this,u),this.setRadius(g),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var u=this._radius,g=this._radiusY||u,_=this._clickTolerance(),k=[u+_,g+_];this._pxBounds=new ie(this._point.subtract(k),this._point.add(k))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(u){return u.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function eZ(u,g){return new qx(u,g)}var AN=qx.extend({initialize:function(u,g,_){if(typeof g=="number"&&(g=a({},_,{radius:g})),v(this,g),this._latlng=ge(u),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(u){return this._mRadius=u,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var u=[this._radius,this._radiusY||this._radius];return new X(this._map.layerPointToLatLng(this._point.subtract(u)),this._map.layerPointToLatLng(this._point.add(u)))},setStyle:kl.prototype.setStyle,_project:function(){var u=this._latlng.lng,g=this._latlng.lat,_=this._map,k=_.options.crs;if(k.distance===re.distance){var M=Math.PI/180,W=this._mRadius/re.R/M,te=_.project([g+W,u]),he=_.project([g-W,u]),me=te.add(he).divideBy(2),Oe=_.unproject(me).lat,We=Math.acos((Math.cos(W*M)-Math.sin(g*M)*Math.sin(Oe*M))/(Math.cos(g*M)*Math.cos(Oe*M)))/M;(isNaN(We)||We===0)&&(We=W/Math.cos(Math.PI/180*g)),this._point=me.subtract(_.getPixelOrigin()),this._radius=isNaN(We)?0:me.x-_.project([Oe,u-We]).x,this._radiusY=me.y-te.y}else{var ct=k.unproject(k.project(this._latlng).subtract([this._mRadius,0]));this._point=_.latLngToLayerPoint(this._latlng),this._radius=this._point.x-_.latLngToLayerPoint(ct).x}this._updateBounds()}});function tZ(u,g,_){return new AN(u,g,_)}var Io=kl.extend({options:{smoothFactor:1,noClip:!1},initialize:function(u,g){v(this,g),this._setLatLngs(u)},getLatLngs:function(){return this._latlngs},setLatLngs:function(u){return this._setLatLngs(u),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(u){for(var g=1/0,_=null,k=ym,M,W,te=0,he=this._parts.length;te<he;te++)for(var me=this._parts[te],Oe=1,We=me.length;Oe<We;Oe++){M=me[Oe-1],W=me[Oe];var ct=k(u,M,W,!0);ct<g&&(g=ct,_=k(u,M,W))}return _&&(_.distance=Math.sqrt(g)),_},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return cO(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(u,g){return g=g||this._defaultShape(),u=ge(u),g.push(u),this._bounds.extend(u),this.redraw()},_setLatLngs:function(u){this._bounds=new X,this._latlngs=this._convertLatLngs(u)},_defaultShape:function(){return za(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(u){for(var g=[],_=za(u),k=0,M=u.length;k<M;k++)_?(g[k]=ge(u[k]),this._bounds.extend(g[k])):g[k]=this._convertLatLngs(u[k]);return g},_project:function(){var u=new ie;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,u),this._bounds.isValid()&&u.isValid()&&(this._rawPxBounds=u,this._updateBounds())},_updateBounds:function(){var u=this._clickTolerance(),g=new R(u,u);this._rawPxBounds&&(this._pxBounds=new ie([this._rawPxBounds.min.subtract(g),this._rawPxBounds.max.add(g)]))},_projectLatlngs:function(u,g,_){var k=u[0]instanceof fe,M=u.length,W,te;if(k){for(te=[],W=0;W<M;W++)te[W]=this._map.latLngToLayerPoint(u[W]),_.extend(te[W]);g.push(te)}else for(W=0;W<M;W++)this._projectLatlngs(u[W],g,_)},_clipPoints:function(){var u=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}var g=this._parts,_,k,M,W,te,he,me;for(_=0,M=0,W=this._rings.length;_<W;_++)for(me=this._rings[_],k=0,te=me.length;k<te-1;k++)he=oO(me[k],me[k+1],u,k,!0),he&&(g[M]=g[M]||[],g[M].push(he[0]),(he[1]!==me[k+1]||k===te-2)&&(g[M].push(he[1]),M++))}},_simplifyPoints:function(){for(var u=this._parts,g=this.options.smoothFactor,_=0,k=u.length;_<k;_++)u[_]=sO(u[_],g)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(u,g){var _,k,M,W,te,he,me=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(_=0,W=this._parts.length;_<W;_++)for(he=this._parts[_],k=0,te=he.length,M=te-1;k<te;M=k++)if(!(!g&&k===0)&&aO(u,he[M],he[k])<=me)return!0;return!1}});function rZ(u,g){return new Io(u,g)}Io._flat=lO;var bu=Io.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return nO(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(u){var g=Io.prototype._convertLatLngs.call(this,u),_=g.length;return _>=2&&g[0]instanceof fe&&g[0].equals(g[_-1])&&g.pop(),g},_setLatLngs:function(u){Io.prototype._setLatLngs.call(this,u),za(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return za(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var u=this._renderer._bounds,g=this.options.weight,_=new R(g,g);if(u=new ie(u.min.subtract(_),u.max.add(_)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}for(var k=0,M=this._rings.length,W;k<M;k++)W=rO(this._rings[k],u,!0),W.length&&this._parts.push(W)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(u){var g=!1,_,k,M,W,te,he,me,Oe;if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(W=0,me=this._parts.length;W<me;W++)for(_=this._parts[W],te=0,Oe=_.length,he=Oe-1;te<Oe;he=te++)k=_[te],M=_[he],k.y>u.y!=M.y>u.y&&u.x<(M.x-k.x)*(u.y-k.y)/(M.y-k.y)+k.x&&(g=!g);return g||Io.prototype._containsPoint.call(this,u,!0)}});function nZ(u,g){return new bu(u,g)}var Ro=Mo.extend({initialize:function(u,g){v(this,g),this._layers={},u&&this.addData(u)},addData:function(u){var g=w(u)?u:u.features,_,k,M;if(g){for(_=0,k=g.length;_<k;_++)M=g[_],(M.geometries||M.geometry||M.features||M.coordinates)&&this.addData(M);return this}var W=this.options;if(W.filter&&!W.filter(u))return this;var te=Gx(u,W);return te?(te.feature=Zx(u),te.defaultOptions=te.options,this.resetStyle(te),W.onEachFeature&&W.onEachFeature(u,te),this.addLayer(te)):this},resetStyle:function(u){return u===void 0?this.eachLayer(this.resetStyle,this):(u.options=a({},u.defaultOptions),this._setLayerStyle(u,this.options.style),this)},setStyle:function(u){return this.eachLayer(function(g){this._setLayerStyle(g,u)},this)},_setLayerStyle:function(u,g){u.setStyle&&(typeof g=="function"&&(g=g(u.feature)),u.setStyle(g))}});function Gx(u,g){var _=u.type==="Feature"?u.geometry:u,k=_?_.coordinates:null,M=[],W=g&&g.pointToLayer,te=g&&g.coordsToLatLng||ON,he,me,Oe,We;if(!k&&!_)return null;switch(_.type){case"Point":return he=te(k),hO(W,u,he,g);case"MultiPoint":for(Oe=0,We=k.length;Oe<We;Oe++)he=te(k[Oe]),M.push(hO(W,u,he,g));return new Mo(M);case"LineString":case"MultiLineString":return me=Kx(k,_.type==="LineString"?0:1,te),new Io(me,g);case"Polygon":case"MultiPolygon":return me=Kx(k,_.type==="Polygon"?1:2,te),new bu(me,g);case"GeometryCollection":for(Oe=0,We=_.geometries.length;Oe<We;Oe++){var ct=Gx({geometry:_.geometries[Oe],type:"Feature",properties:u.properties},g);ct&&M.push(ct)}return new Mo(M);case"FeatureCollection":for(Oe=0,We=_.features.length;Oe<We;Oe++){var Tt=Gx(_.features[Oe],g);Tt&&M.push(Tt)}return new Mo(M);default:throw new Error("Invalid GeoJSON object.")}}function hO(u,g,_,k){return u?u(g,_):new Vx(_,k&&k.markersInheritOptions&&k)}function ON(u){return new fe(u[1],u[0],u[2])}function Kx(u,g,_){for(var k=[],M=0,W=u.length,te;M<W;M++)te=g?Kx(u[M],g-1,_):(_||ON)(u[M]),k.push(te);return k}function MN(u,g){return u=ge(u),u.alt!==void 0?[m(u.lng,g),m(u.lat,g),m(u.alt,g)]:[m(u.lng,g),m(u.lat,g)]}function Yx(u,g,_,k){for(var M=[],W=0,te=u.length;W<te;W++)M.push(g?Yx(u[W],za(u[W])?0:g-1,_,k):MN(u[W],k));return!g&&_&&M.length>0&&M.push(M[0].slice()),M}function wu(u,g){return u.feature?a({},u.feature,{geometry:g}):Zx(g)}function Zx(u){return u.type==="Feature"||u.type==="FeatureCollection"?u:{type:"Feature",properties:{},geometry:u}}var IN={toGeoJSON:function(u){return wu(this,{type:"Point",coordinates:MN(this.getLatLng(),u)})}};Vx.include(IN),AN.include(IN),qx.include(IN),Io.include({toGeoJSON:function(u){var g=!za(this._latlngs),_=Yx(this._latlngs,g?1:0,!1,u);return wu(this,{type:(g?"Multi":"")+"LineString",coordinates:_})}}),bu.include({toGeoJSON:function(u){var g=!za(this._latlngs),_=g&&!za(this._latlngs[0]),k=Yx(this._latlngs,_?2:g?1:0,!0,u);return g||(k=[k]),wu(this,{type:(_?"Multi":"")+"Polygon",coordinates:k})}}),vu.include({toMultiPoint:function(u){var g=[];return this.eachLayer(function(_){g.push(_.toGeoJSON(u).geometry.coordinates)}),wu(this,{type:"MultiPoint",coordinates:g})},toGeoJSON:function(u){var g=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(g==="MultiPoint")return this.toMultiPoint(u);var _=g==="GeometryCollection",k=[];return this.eachLayer(function(M){if(M.toGeoJSON){var W=M.toGeoJSON(u);if(_)k.push(W.geometry);else{var te=Zx(W);te.type==="FeatureCollection"?k.push.apply(k,te.features):k.push(te)}}}),_?wu(this,{geometries:k,type:"GeometryCollection"}):{type:"FeatureCollection",features:k}}});function fO(u,g){return new Ro(u,g)}var sZ=fO,Xx=yi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(u,g,_){this._url=u,this._bounds=le(g),v(this,_)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(_t(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Lr(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(u){return this.options.opacity=u,this._image&&this._updateOpacity(),this},setStyle:function(u){return u.opacity&&this.setOpacity(u.opacity),this},bringToFront:function(){return this._map&&gu(this._image),this},bringToBack:function(){return this._map&&xu(this._image),this},setUrl:function(u){return this._url=u,this._image&&(this._image.src=u),this},setBounds:function(u){return this._bounds=le(u),this._map&&this._reset(),this},getEvents:function(){var u={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var u=this._url.tagName==="IMG",g=this._image=u?this._url:Ht("img");if(_t(g,"leaflet-image-layer"),this._zoomAnimated&&_t(g,"leaflet-zoom-animated"),this.options.className&&_t(g,this.options.className),g.onselectstart=f,g.onmousemove=f,g.onload=o(this.fire,this,"load"),g.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),u){this._url=g.src;return}g.src=this._url,g.alt=this.options.alt},_animateZoom:function(u){var g=this._map.getZoomScale(u.zoom),_=this._map._latLngBoundsToNewLayerBounds(this._bounds,u.zoom,u.center).min;zc(this._image,_,g)},_reset:function(){var u=this._image,g=new ie(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),_=g.getSize();an(u,g.min),u.style.width=_.x+"px",u.style.height=_.y+"px"},_updateOpacity:function(){Ba(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var u=this.options.errorOverlayUrl;u&&this._url!==u&&(this._url=u,this._image.src=u)},getCenter:function(){return this._bounds.getCenter()}}),aZ=function(u,g,_){return new Xx(u,g,_)},mO=Xx.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var u=this._url.tagName==="VIDEO",g=this._image=u?this._url:Ht("video");if(_t(g,"leaflet-image-layer"),this._zoomAnimated&&_t(g,"leaflet-zoom-animated"),this.options.className&&_t(g,this.options.className),g.onselectstart=f,g.onmousemove=f,g.onloadeddata=o(this.fire,this,"load"),u){for(var _=g.getElementsByTagName("source"),k=[],M=0;M<_.length;M++)k.push(_[M].src);this._url=_.length>0?k:[g.src];return}w(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(g.style,"objectFit")&&(g.style.objectFit="fill"),g.autoplay=!!this.options.autoplay,g.loop=!!this.options.loop,g.muted=!!this.options.muted,g.playsInline=!!this.options.playsInline;for(var W=0;W<this._url.length;W++){var te=Ht("source");te.src=this._url[W],g.appendChild(te)}}});function iZ(u,g,_){return new mO(u,g,_)}var pO=Xx.extend({_initImage:function(){var u=this._image=this._url;_t(u,"leaflet-image-layer"),this._zoomAnimated&&_t(u,"leaflet-zoom-animated"),this.options.className&&_t(u,this.options.className),u.onselectstart=f,u.onmousemove=f}});function oZ(u,g,_){return new pO(u,g,_)}var eo=yi.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(u,g){u&&(u instanceof fe||w(u))?(this._latlng=ge(u),v(this,g)):(v(this,u),this._source=g),this.options.content&&(this._content=this.options.content)},openOn:function(u){return u=arguments.length?u:this._source._map,u.hasLayer(this)||u.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(u){return this._map?this.close():(arguments.length?this._source=u:u=this._source,this._prepareOpen(),this.openOn(u._map)),this},onAdd:function(u){this._zoomAnimated=u._zoomAnimated,this._container||this._initLayout(),u._fadeAnimated&&Ba(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),u._fadeAnimated&&Ba(this._container,1),this.bringToFront(),this.options.interactive&&(_t(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(u){u._fadeAnimated?(Ba(this._container,0),this._removeTimeout=setTimeout(o(Lr,void 0,this._container),200)):Lr(this._container),this.options.interactive&&(Qr(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(u){return this._latlng=ge(u),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(u){return this._content=u,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var u={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&gu(this._container),this},bringToBack:function(){return this._map&&xu(this._container),this},_prepareOpen:function(u){var g=this._source;if(!g._map)return!1;if(g instanceof Mo){g=null;var _=this._source._layers;for(var k in _)if(_[k]._map){g=_[k];break}if(!g)return!1;this._source=g}if(!u)if(g.getCenter)u=g.getCenter();else if(g.getLatLng)u=g.getLatLng();else if(g.getBounds)u=g.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(u),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var u=this._contentNode,g=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof g=="string")u.innerHTML=g;else{for(;u.hasChildNodes();)u.removeChild(u.firstChild);u.appendChild(g)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var u=this._map.latLngToLayerPoint(this._latlng),g=G(this.options.offset),_=this._getAnchor();this._zoomAnimated?an(this._container,u.add(_)):g=g.add(u).add(_);var k=this._containerBottom=-g.y,M=this._containerLeft=-Math.round(this._containerWidth/2)+g.x;this._container.style.bottom=k+"px",this._container.style.left=M+"px"}},_getAnchor:function(){return[0,0]}});Ft.include({_initOverlay:function(u,g,_,k){var M=g;return M instanceof u||(M=new u(k).setContent(g)),_&&M.setLatLng(_),M}}),yi.include({_initOverlay:function(u,g,_,k){var M=_;return M instanceof u?(v(M,k),M._source=this):(M=g&&!k?g:new u(k,this),M.setContent(_)),M}});var Jx=eo.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(u){return u=arguments.length?u:this._source._map,!u.hasLayer(this)&&u._popup&&u._popup.options.autoClose&&u.removeLayer(u._popup),u._popup=this,eo.prototype.openOn.call(this,u)},onAdd:function(u){eo.prototype.onAdd.call(this,u),u.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof kl||this._source.on("preclick",Wc))},onRemove:function(u){eo.prototype.onRemove.call(this,u),u.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof kl||this._source.off("preclick",Wc))},getEvents:function(){var u=eo.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(u.preclick=this.close),this.options.keepInView&&(u.moveend=this._adjustPan),u},_initLayout:function(){var u="leaflet-popup",g=this._container=Ht("div",u+" "+(this.options.className||"")+" leaflet-zoom-animated"),_=this._wrapper=Ht("div",u+"-content-wrapper",g);if(this._contentNode=Ht("div",u+"-content",_),xm(g),NN(this._contentNode),bt(g,"contextmenu",Wc),this._tipContainer=Ht("div",u+"-tip-container",g),this._tip=Ht("div",u+"-tip",this._tipContainer),this.options.closeButton){var k=this._closeButton=Ht("a",u+"-close-button",g);k.setAttribute("role","button"),k.setAttribute("aria-label","Close popup"),k.href="#close",k.innerHTML='<span aria-hidden="true">&#215;</span>',bt(k,"click",function(M){Wn(M),this.close()},this)}},_updateLayout:function(){var u=this._contentNode,g=u.style;g.width="",g.whiteSpace="nowrap";var _=u.offsetWidth;_=Math.min(_,this.options.maxWidth),_=Math.max(_,this.options.minWidth),g.width=_+1+"px",g.whiteSpace="",g.height="";var k=u.offsetHeight,M=this.options.maxHeight,W="leaflet-popup-scrolled";M&&k>M?(g.height=M+"px",_t(u,W)):Qr(u,W),this._containerWidth=this._container.offsetWidth},_animateZoom:function(u){var g=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center),_=this._getAnchor();an(this._container,g.add(_))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var u=this._map,g=parseInt(fm(this._container,"marginBottom"),10)||0,_=this._container.offsetHeight+g,k=this._containerWidth,M=new R(this._containerLeft,-_-this._containerBottom);M._add(Uc(this._container));var W=u.layerPointToContainerPoint(M),te=G(this.options.autoPanPadding),he=G(this.options.autoPanPaddingTopLeft||te),me=G(this.options.autoPanPaddingBottomRight||te),Oe=u.getSize(),We=0,ct=0;W.x+k+me.x>Oe.x&&(We=W.x+k-Oe.x+me.x),W.x-We-he.x<0&&(We=W.x-he.x),W.y+_+me.y>Oe.y&&(ct=W.y+_-Oe.y+me.y),W.y-ct-he.y<0&&(ct=W.y-he.y),(We||ct)&&(this.options.keepInView&&(this._autopanning=!0),u.fire("autopanstart").panBy([We,ct]))}},_getAnchor:function(){return G(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),lZ=function(u,g){return new Jx(u,g)};Ft.mergeOptions({closePopupOnClick:!0}),Ft.include({openPopup:function(u,g,_){return this._initOverlay(Jx,u,g,_).openOn(this),this},closePopup:function(u){return u=arguments.length?u:this._popup,u&&u.close(),this}}),yi.include({bindPopup:function(u,g){return this._popup=this._initOverlay(Jx,this._popup,u,g),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(u){return this._popup&&(this instanceof Mo||(this._popup._source=this),this._popup._prepareOpen(u||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(u){return this._popup&&this._popup.setContent(u),this},getPopup:function(){return this._popup},_openPopup:function(u){if(!(!this._popup||!this._map)){Hc(u);var g=u.layer||u.target;if(this._popup._source===g&&!(g instanceof kl)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(u.latlng);return}this._popup._source=g,this.openPopup(u.latlng)}},_movePopup:function(u){this._popup.setLatLng(u.latlng)},_onKeyPress:function(u){u.originalEvent.keyCode===13&&this._openPopup(u)}});var Qx=eo.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(u){eo.prototype.onAdd.call(this,u),this.setOpacity(this.options.opacity),u.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(u){eo.prototype.onRemove.call(this,u),u.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var u=eo.prototype.getEvents.call(this);return this.options.permanent||(u.preclick=this.close),u},_initLayout:function(){var u="leaflet-tooltip",g=u+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ht("div",g),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(u){var g,_,k=this._map,M=this._container,W=k.latLngToContainerPoint(k.getCenter()),te=k.layerPointToContainerPoint(u),he=this.options.direction,me=M.offsetWidth,Oe=M.offsetHeight,We=G(this.options.offset),ct=this._getAnchor();he==="top"?(g=me/2,_=Oe):he==="bottom"?(g=me/2,_=0):he==="center"?(g=me/2,_=Oe/2):he==="right"?(g=0,_=Oe/2):he==="left"?(g=me,_=Oe/2):te.x<W.x?(he="right",g=0,_=Oe/2):(he="left",g=me+(We.x+ct.x)*2,_=Oe/2),u=u.subtract(G(g,_,!0)).add(We).add(ct),Qr(M,"leaflet-tooltip-right"),Qr(M,"leaflet-tooltip-left"),Qr(M,"leaflet-tooltip-top"),Qr(M,"leaflet-tooltip-bottom"),_t(M,"leaflet-tooltip-"+he),an(M,u)},_updatePosition:function(){var u=this._map.latLngToLayerPoint(this._latlng);this._setPosition(u)},setOpacity:function(u){this.options.opacity=u,this._container&&Ba(this._container,u)},_animateZoom:function(u){var g=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center);this._setPosition(g)},_getAnchor:function(){return G(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),cZ=function(u,g){return new Qx(u,g)};Ft.include({openTooltip:function(u,g,_){return this._initOverlay(Qx,u,g,_).openOn(this),this},closeTooltip:function(u){return u.close(),this}}),yi.include({bindTooltip:function(u,g){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Qx,this._tooltip,u,g),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(u){if(!(!u&&this._tooltipHandlersAdded)){var g=u?"off":"on",_={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?_.add=this._openTooltip:(_.mouseover=this._openTooltip,_.mouseout=this.closeTooltip,_.click=this._openTooltip,this._map?this._addFocusListeners():_.add=this._addFocusListeners),this._tooltip.options.sticky&&(_.mousemove=this._moveTooltip),this[g](_),this._tooltipHandlersAdded=!u}},openTooltip:function(u){return this._tooltip&&(this instanceof Mo||(this._tooltip._source=this),this._tooltip._prepareOpen(u)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(u){return this._tooltip&&this._tooltip.setContent(u),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(u){var g=typeof u.getElement=="function"&&u.getElement();g&&(bt(g,"focus",function(){this._tooltip._source=u,this.openTooltip()},this),bt(g,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(u){var g=typeof u.getElement=="function"&&u.getElement();g&&g.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(u){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var g=this;this._map.once("moveend",function(){g._openOnceFlag=!1,g._openTooltip(u)});return}this._tooltip._source=u.layer||u.target,this.openTooltip(this._tooltip.options.sticky?u.latlng:void 0)}},_moveTooltip:function(u){var g=u.latlng,_,k;this._tooltip.options.sticky&&u.originalEvent&&(_=this._map.mouseEventToContainerPoint(u.originalEvent),k=this._map.containerPointToLayerPoint(_),g=this._map.layerPointToLatLng(k)),this._tooltip.setLatLng(g)}});var gO=yu.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(u){var g=u&&u.tagName==="DIV"?u:document.createElement("div"),_=this.options;if(_.html instanceof Element?(Fx(g),g.appendChild(_.html)):g.innerHTML=_.html!==!1?_.html:"",_.bgPos){var k=G(_.bgPos);g.style.backgroundPosition=-k.x+"px "+-k.y+"px"}return this._setIconStyles(g,"icon"),g},createShadow:function(){return null}});function dZ(u){return new gO(u)}yu.Default=bm;var wm=yi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:se.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(u){v(this,u)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(u){u._addZoomLimit(this)},onRemove:function(u){this._removeAllTiles(),Lr(this._container),u._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(gu(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(xu(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(u){return this.options.opacity=u,this._updateOpacity(),this},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var u=this._clampZoom(this._map.getZoom());u!==this._tileZoom&&(this._tileZoom=u,this._updateLevels()),this._update()}return this},getEvents:function(){var u={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),u.move=this._onMove),this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},createTile:function(){return document.createElement("div")},getTileSize:function(){var u=this.options.tileSize;return u instanceof R?u:new R(u,u)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(u){for(var g=this.getPane().children,_=-u(-1/0,1/0),k=0,M=g.length,W;k<M;k++)W=g[k].style.zIndex,g[k]!==this._container&&W&&(_=u(_,+W));isFinite(_)&&(this.options.zIndex=_+u(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!se.ielt9){Ba(this._container,this.options.opacity);var u=+new Date,g=!1,_=!1;for(var k in this._tiles){var M=this._tiles[k];if(!(!M.current||!M.loaded)){var W=Math.min(1,(u-M.loaded)/200);Ba(M.el,W),W<1?g=!0:(M.active?_=!0:this._onOpaqueTile(M),M.active=!0)}}_&&!this._noPrune&&this._pruneTiles(),g&&(A(this._fadeFrame),this._fadeFrame=I(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=Ht("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var u=this._tileZoom,g=this.options.maxZoom;if(u!==void 0){for(var _ in this._levels)_=Number(_),this._levels[_].el.children.length||_===u?(this._levels[_].el.style.zIndex=g-Math.abs(u-_),this._onUpdateLevel(_)):(Lr(this._levels[_].el),this._removeTilesAtZoom(_),this._onRemoveLevel(_),delete this._levels[_]);var k=this._levels[u],M=this._map;return k||(k=this._levels[u]={},k.el=Ht("div","leaflet-tile-container leaflet-zoom-animated",this._container),k.el.style.zIndex=g,k.origin=M.project(M.unproject(M.getPixelOrigin()),u).round(),k.zoom=u,this._setZoomTransform(k,M.getCenter(),M.getZoom()),f(k.el.offsetWidth),this._onCreateLevel(k)),this._level=k,k}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var u,g,_=this._map.getZoom();if(_>this.options.maxZoom||_<this.options.minZoom){this._removeAllTiles();return}for(u in this._tiles)g=this._tiles[u],g.retain=g.current;for(u in this._tiles)if(g=this._tiles[u],g.current&&!g.active){var k=g.coords;this._retainParent(k.x,k.y,k.z,k.z-5)||this._retainChildren(k.x,k.y,k.z,k.z+2)}for(u in this._tiles)this._tiles[u].retain||this._removeTile(u)}},_removeTilesAtZoom:function(u){for(var g in this._tiles)this._tiles[g].coords.z===u&&this._removeTile(g)},_removeAllTiles:function(){for(var u in this._tiles)this._removeTile(u)},_invalidateAll:function(){for(var u in this._levels)Lr(this._levels[u].el),this._onRemoveLevel(Number(u)),delete this._levels[u];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(u,g,_,k){var M=Math.floor(u/2),W=Math.floor(g/2),te=_-1,he=new R(+M,+W);he.z=+te;var me=this._tileCoordsToKey(he),Oe=this._tiles[me];return Oe&&Oe.active?(Oe.retain=!0,!0):(Oe&&Oe.loaded&&(Oe.retain=!0),te>k?this._retainParent(M,W,te,k):!1)},_retainChildren:function(u,g,_,k){for(var M=2*u;M<2*u+2;M++)for(var W=2*g;W<2*g+2;W++){var te=new R(M,W);te.z=_+1;var he=this._tileCoordsToKey(te),me=this._tiles[he];if(me&&me.active){me.retain=!0;continue}else me&&me.loaded&&(me.retain=!0);_+1<k&&this._retainChildren(M,W,_+1,k)}},_resetView:function(u){var g=u&&(u.pinch||u.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),g,g)},_animateZoom:function(u){this._setView(u.center,u.zoom,!0,u.noUpdate)},_clampZoom:function(u){var g=this.options;return g.minNativeZoom!==void 0&&u<g.minNativeZoom?g.minNativeZoom:g.maxNativeZoom!==void 0&&g.maxNativeZoom<u?g.maxNativeZoom:u},_setView:function(u,g,_,k){var M=Math.round(g);this.options.maxZoom!==void 0&&M>this.options.maxZoom||this.options.minZoom!==void 0&&M<this.options.minZoom?M=void 0:M=this._clampZoom(M);var W=this.options.updateWhenZooming&&M!==this._tileZoom;(!k||W)&&(this._tileZoom=M,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),M!==void 0&&this._update(u),_||this._pruneTiles(),this._noPrune=!!_),this._setZoomTransforms(u,g)},_setZoomTransforms:function(u,g){for(var _ in this._levels)this._setZoomTransform(this._levels[_],u,g)},_setZoomTransform:function(u,g,_){var k=this._map.getZoomScale(_,u.zoom),M=u.origin.multiplyBy(k).subtract(this._map._getNewPixelOrigin(g,_)).round();se.any3d?zc(u.el,M,k):an(u.el,M)},_resetGrid:function(){var u=this._map,g=u.options.crs,_=this._tileSize=this.getTileSize(),k=this._tileZoom,M=this._map.getPixelWorldBounds(this._tileZoom);M&&(this._globalTileRange=this._pxBoundsToTileRange(M)),this._wrapX=g.wrapLng&&!this.options.noWrap&&[Math.floor(u.project([0,g.wrapLng[0]],k).x/_.x),Math.ceil(u.project([0,g.wrapLng[1]],k).x/_.y)],this._wrapY=g.wrapLat&&!this.options.noWrap&&[Math.floor(u.project([g.wrapLat[0],0],k).y/_.x),Math.ceil(u.project([g.wrapLat[1],0],k).y/_.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(u){var g=this._map,_=g._animatingZoom?Math.max(g._animateToZoom,g.getZoom()):g.getZoom(),k=g.getZoomScale(_,this._tileZoom),M=g.project(u,this._tileZoom).floor(),W=g.getSize().divideBy(k*2);return new ie(M.subtract(W),M.add(W))},_update:function(u){var g=this._map;if(g){var _=this._clampZoom(g.getZoom());if(u===void 0&&(u=g.getCenter()),this._tileZoom!==void 0){var k=this._getTiledPixelBounds(u),M=this._pxBoundsToTileRange(k),W=M.getCenter(),te=[],he=this.options.keepBuffer,me=new ie(M.getBottomLeft().subtract([he,-he]),M.getTopRight().add([he,-he]));if(!(isFinite(M.min.x)&&isFinite(M.min.y)&&isFinite(M.max.x)&&isFinite(M.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Oe in this._tiles){var We=this._tiles[Oe].coords;(We.z!==this._tileZoom||!me.contains(new R(We.x,We.y)))&&(this._tiles[Oe].current=!1)}if(Math.abs(_-this._tileZoom)>1){this._setView(u,_);return}for(var ct=M.min.y;ct<=M.max.y;ct++)for(var Tt=M.min.x;Tt<=M.max.x;Tt++){var xs=new R(Tt,ct);if(xs.z=this._tileZoom,!!this._isValidTile(xs)){var An=this._tiles[this._tileCoordsToKey(xs)];An?An.current=!0:te.push(xs)}}if(te.sort(function(Bs,Nu){return Bs.distanceTo(W)-Nu.distanceTo(W)}),te.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ua=document.createDocumentFragment();for(Tt=0;Tt<te.length;Tt++)this._addTile(te[Tt],Ua);this._level.el.appendChild(Ua)}}}},_isValidTile:function(u){var g=this._map.options.crs;if(!g.infinite){var _=this._globalTileRange;if(!g.wrapLng&&(u.x<_.min.x||u.x>_.max.x)||!g.wrapLat&&(u.y<_.min.y||u.y>_.max.y))return!1}if(!this.options.bounds)return!0;var k=this._tileCoordsToBounds(u);return le(this.options.bounds).overlaps(k)},_keyToBounds:function(u){return this._tileCoordsToBounds(this._keyToTileCoords(u))},_tileCoordsToNwSe:function(u){var g=this._map,_=this.getTileSize(),k=u.scaleBy(_),M=k.add(_),W=g.unproject(k,u.z),te=g.unproject(M,u.z);return[W,te]},_tileCoordsToBounds:function(u){var g=this._tileCoordsToNwSe(u),_=new X(g[0],g[1]);return this.options.noWrap||(_=this._map.wrapLatLngBounds(_)),_},_tileCoordsToKey:function(u){return u.x+":"+u.y+":"+u.z},_keyToTileCoords:function(u){var g=u.split(":"),_=new R(+g[0],+g[1]);return _.z=+g[2],_},_removeTile:function(u){var g=this._tiles[u];g&&(Lr(g.el),delete this._tiles[u],this.fire("tileunload",{tile:g.el,coords:this._keyToTileCoords(u)}))},_initTile:function(u){_t(u,"leaflet-tile");var g=this.getTileSize();u.style.width=g.x+"px",u.style.height=g.y+"px",u.onselectstart=f,u.onmousemove=f,se.ielt9&&this.options.opacity<1&&Ba(u,this.options.opacity)},_addTile:function(u,g){var _=this._getTilePos(u),k=this._tileCoordsToKey(u),M=this.createTile(this._wrapCoords(u),o(this._tileReady,this,u));this._initTile(M),this.createTile.length<2&&I(o(this._tileReady,this,u,null,M)),an(M,_),this._tiles[k]={el:M,coords:u,current:!0},g.appendChild(M),this.fire("tileloadstart",{tile:M,coords:u})},_tileReady:function(u,g,_){g&&this.fire("tileerror",{error:g,tile:_,coords:u});var k=this._tileCoordsToKey(u);_=this._tiles[k],_&&(_.loaded=+new Date,this._map._fadeAnimated?(Ba(_.el,0),A(this._fadeFrame),this._fadeFrame=I(this._updateOpacity,this)):(_.active=!0,this._pruneTiles()),g||(_t(_.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:_.el,coords:u})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),se.ielt9||!this._map._fadeAnimated?I(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(u){return u.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(u){var g=new R(this._wrapX?h(u.x,this._wrapX):u.x,this._wrapY?h(u.y,this._wrapY):u.y);return g.z=u.z,g},_pxBoundsToTileRange:function(u){var g=this.getTileSize();return new ie(u.min.unscaleBy(g).floor(),u.max.unscaleBy(g).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var u in this._tiles)if(!this._tiles[u].loaded)return!1;return!0}});function uZ(u){return new wm(u)}var ju=wm.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(u,g){this._url=u,g=v(this,g),g.detectRetina&&se.retina&&g.maxZoom>0?(g.tileSize=Math.floor(g.tileSize/2),g.zoomReverse?(g.zoomOffset--,g.minZoom=Math.min(g.maxZoom,g.minZoom+1)):(g.zoomOffset++,g.maxZoom=Math.max(g.minZoom,g.maxZoom-1)),g.minZoom=Math.max(0,g.minZoom)):g.zoomReverse?g.minZoom=Math.min(g.maxZoom,g.minZoom):g.maxZoom=Math.max(g.minZoom,g.maxZoom),typeof g.subdomains=="string"&&(g.subdomains=g.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(u,g){return this._url===u&&g===void 0&&(g=!0),this._url=u,g||this.redraw(),this},createTile:function(u,g){var _=document.createElement("img");return bt(_,"load",o(this._tileOnLoad,this,g,_)),bt(_,"error",o(this._tileOnError,this,g,_)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(_.referrerPolicy=this.options.referrerPolicy),_.alt="",_.src=this.getTileUrl(u),_},getTileUrl:function(u){var g={r:se.retina?"@2x":"",s:this._getSubdomain(u),x:u.x,y:u.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var _=this._globalTileRange.max.y-u.y;this.options.tms&&(g.y=_),g["-y"]=_}return j(this._url,a(g,this.options))},_tileOnLoad:function(u,g){se.ielt9?setTimeout(o(u,this,null,g),0):u(null,g)},_tileOnError:function(u,g,_){var k=this.options.errorTileUrl;k&&g.getAttribute("src")!==k&&(g.src=k),u(_,g)},_onTileRemove:function(u){u.tile.onload=null},_getZoomForUrl:function(){var u=this._tileZoom,g=this.options.maxZoom,_=this.options.zoomReverse,k=this.options.zoomOffset;return _&&(u=g-u),u+k},_getSubdomain:function(u){var g=Math.abs(u.x+u.y)%this.options.subdomains.length;return this.options.subdomains[g]},_abortLoading:function(){var u,g;for(u in this._tiles)if(this._tiles[u].coords.z!==this._tileZoom&&(g=this._tiles[u].el,g.onload=f,g.onerror=f,!g.complete)){g.src=C;var _=this._tiles[u].coords;Lr(g),delete this._tiles[u],this.fire("tileabort",{tile:g,coords:_})}},_removeTile:function(u){var g=this._tiles[u];if(g)return g.el.setAttribute("src",C),wm.prototype._removeTile.call(this,u)},_tileReady:function(u,g,_){if(!(!this._map||_&&_.getAttribute("src")===C))return wm.prototype._tileReady.call(this,u,g,_)}});function xO(u,g){return new ju(u,g)}var vO=ju.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(u,g){this._url=u;var _=a({},this.defaultWmsParams);for(var k in g)k in this.options||(_[k]=g[k]);g=v(this,g);var M=g.detectRetina&&se.retina?2:1,W=this.getTileSize();_.width=W.x*M,_.height=W.y*M,this.wmsParams=_},onAdd:function(u){this._crs=this.options.crs||u.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var g=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[g]=this._crs.code,ju.prototype.onAdd.call(this,u)},getTileUrl:function(u){var g=this._tileCoordsToNwSe(u),_=this._crs,k=ae(_.project(g[0]),_.project(g[1])),M=k.min,W=k.max,te=(this._wmsVersion>=1.3&&this._crs===dO?[M.y,M.x,W.y,W.x]:[M.x,M.y,W.x,W.y]).join(","),he=ju.prototype.getTileUrl.call(this,u);return he+b(this.wmsParams,he,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+te},setParams:function(u,g){return a(this.wmsParams,u),g||this.redraw(),this}});function hZ(u,g){return new vO(u,g)}ju.WMS=vO,xO.wms=hZ;var Do=yi.extend({options:{padding:.1},initialize:function(u){v(this,u),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),_t(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var u={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(u.zoomanim=this._onAnimZoom),u},_onAnimZoom:function(u){this._updateTransform(u.center,u.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(u,g){var _=this._map.getZoomScale(g,this._zoom),k=this._map.getSize().multiplyBy(.5+this.options.padding),M=this._map.project(this._center,g),W=k.multiplyBy(-_).add(M).subtract(this._map._getNewPixelOrigin(u,g));se.any3d?zc(this._container,W,_):an(this._container,W)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var u in this._layers)this._layers[u]._reset()},_onZoomEnd:function(){for(var u in this._layers)this._layers[u]._project()},_updatePaths:function(){for(var u in this._layers)this._layers[u]._update()},_update:function(){var u=this.options.padding,g=this._map.getSize(),_=this._map.containerPointToLayerPoint(g.multiplyBy(-u)).round();this._bounds=new ie(_,_.add(g.multiplyBy(1+u*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),yO=Do.extend({options:{tolerance:0},getEvents:function(){var u=Do.prototype.getEvents.call(this);return u.viewprereset=this._onViewPreReset,u},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Do.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var u=this._container=document.createElement("canvas");bt(u,"mousemove",this._onMouseMove,this),bt(u,"click dblclick mousedown mouseup contextmenu",this._onClick,this),bt(u,"mouseout",this._handleMouseOut,this),u._leaflet_disable_events=!0,this._ctx=u.getContext("2d")},_destroyContainer:function(){A(this._redrawRequest),delete this._ctx,Lr(this._container),gr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var u;this._redrawBounds=null;for(var g in this._layers)u=this._layers[g],u._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Do.prototype._update.call(this);var u=this._bounds,g=this._container,_=u.getSize(),k=se.retina?2:1;an(g,u.min),g.width=k*_.x,g.height=k*_.y,g.style.width=_.x+"px",g.style.height=_.y+"px",se.retina&&this._ctx.scale(2,2),this._ctx.translate(-u.min.x,-u.min.y),this.fire("update")}},_reset:function(){Do.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(u){this._updateDashArray(u),this._layers[c(u)]=u;var g=u._order={layer:u,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=g),this._drawLast=g,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(u){this._requestRedraw(u)},_removePath:function(u){var g=u._order,_=g.next,k=g.prev;_?_.prev=k:this._drawLast=k,k?k.next=_:this._drawFirst=_,delete u._order,delete this._layers[c(u)],this._requestRedraw(u)},_updatePath:function(u){this._extendRedrawBounds(u),u._project(),u._update(),this._requestRedraw(u)},_updateStyle:function(u){this._updateDashArray(u),this._requestRedraw(u)},_updateDashArray:function(u){if(typeof u.options.dashArray=="string"){var g=u.options.dashArray.split(/[, ]+/),_=[],k,M;for(M=0;M<g.length;M++){if(k=Number(g[M]),isNaN(k))return;_.push(k)}u.options._dashArray=_}else u.options._dashArray=u.options.dashArray},_requestRedraw:function(u){this._map&&(this._extendRedrawBounds(u),this._redrawRequest=this._redrawRequest||I(this._redraw,this))},_extendRedrawBounds:function(u){if(u._pxBounds){var g=(u.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ie,this._redrawBounds.extend(u._pxBounds.min.subtract([g,g])),this._redrawBounds.extend(u._pxBounds.max.add([g,g]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var u=this._redrawBounds;if(u){var g=u.getSize();this._ctx.clearRect(u.min.x,u.min.y,g.x,g.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var u,g=this._redrawBounds;if(this._ctx.save(),g){var _=g.getSize();this._ctx.beginPath(),this._ctx.rect(g.min.x,g.min.y,_.x,_.y),this._ctx.clip()}this._drawing=!0;for(var k=this._drawFirst;k;k=k.next)u=k.layer,(!g||u._pxBounds&&u._pxBounds.intersects(g))&&u._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(u,g){if(this._drawing){var _,k,M,W,te=u._parts,he=te.length,me=this._ctx;if(he){for(me.beginPath(),_=0;_<he;_++){for(k=0,M=te[_].length;k<M;k++)W=te[_][k],me[k?"lineTo":"moveTo"](W.x,W.y);g&&me.closePath()}this._fillStroke(me,u)}}},_updateCircle:function(u){if(!(!this._drawing||u._empty())){var g=u._point,_=this._ctx,k=Math.max(Math.round(u._radius),1),M=(Math.max(Math.round(u._radiusY),1)||k)/k;M!==1&&(_.save(),_.scale(1,M)),_.beginPath(),_.arc(g.x,g.y/M,k,0,Math.PI*2,!1),M!==1&&_.restore(),this._fillStroke(_,u)}},_fillStroke:function(u,g){var _=g.options;_.fill&&(u.globalAlpha=_.fillOpacity,u.fillStyle=_.fillColor||_.color,u.fill(_.fillRule||"evenodd")),_.stroke&&_.weight!==0&&(u.setLineDash&&u.setLineDash(g.options&&g.options._dashArray||[]),u.globalAlpha=_.opacity,u.lineWidth=_.weight,u.strokeStyle=_.color,u.lineCap=_.lineCap,u.lineJoin=_.lineJoin,u.stroke())},_onClick:function(u){for(var g=this._map.mouseEventToLayerPoint(u),_,k,M=this._drawFirst;M;M=M.next)_=M.layer,_.options.interactive&&_._containsPoint(g)&&(!(u.type==="click"||u.type==="preclick")||!this._map._draggableMoved(_))&&(k=_);this._fireEvent(k?[k]:!1,u)},_onMouseMove:function(u){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var g=this._map.mouseEventToLayerPoint(u);this._handleMouseHover(u,g)}},_handleMouseOut:function(u){var g=this._hoveredLayer;g&&(Qr(this._container,"leaflet-interactive"),this._fireEvent([g],u,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(u,g){if(!this._mouseHoverThrottled){for(var _,k,M=this._drawFirst;M;M=M.next)_=M.layer,_.options.interactive&&_._containsPoint(g)&&(k=_);k!==this._hoveredLayer&&(this._handleMouseOut(u),k&&(_t(this._container,"leaflet-interactive"),this._fireEvent([k],u,"mouseover"),this._hoveredLayer=k)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,u),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(u,g,_){this._map._fireDOMEvent(g,_||g.type,u)},_bringToFront:function(u){var g=u._order;if(g){var _=g.next,k=g.prev;if(_)_.prev=k;else return;k?k.next=_:_&&(this._drawFirst=_),g.prev=this._drawLast,this._drawLast.next=g,g.next=null,this._drawLast=g,this._requestRedraw(u)}},_bringToBack:function(u){var g=u._order;if(g){var _=g.next,k=g.prev;if(k)k.next=_;else return;_?_.prev=k:k&&(this._drawLast=k),g.prev=null,g.next=this._drawFirst,this._drawFirst.prev=g,this._drawFirst=g,this._requestRedraw(u)}}});function bO(u){return se.canvas?new yO(u):null}var jm=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(u){return document.createElement("<lvml:"+u+' class="lvml">')}}catch{}return function(u){return document.createElement("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),fZ={_initContainer:function(){this._container=Ht("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Do.prototype._update.call(this),this.fire("update"))},_initPath:function(u){var g=u._container=jm("shape");_t(g,"leaflet-vml-shape "+(this.options.className||"")),g.coordsize="1 1",u._path=jm("path"),g.appendChild(u._path),this._updateStyle(u),this._layers[c(u)]=u},_addPath:function(u){var g=u._container;this._container.appendChild(g),u.options.interactive&&u.addInteractiveTarget(g)},_removePath:function(u){var g=u._container;Lr(g),u.removeInteractiveTarget(g),delete this._layers[c(u)]},_updateStyle:function(u){var g=u._stroke,_=u._fill,k=u.options,M=u._container;M.stroked=!!k.stroke,M.filled=!!k.fill,k.stroke?(g||(g=u._stroke=jm("stroke")),M.appendChild(g),g.weight=k.weight+"px",g.color=k.color,g.opacity=k.opacity,k.dashArray?g.dashStyle=w(k.dashArray)?k.dashArray.join(" "):k.dashArray.replace(/( *, *)/g," "):g.dashStyle="",g.endcap=k.lineCap.replace("butt","flat"),g.joinstyle=k.lineJoin):g&&(M.removeChild(g),u._stroke=null),k.fill?(_||(_=u._fill=jm("fill")),M.appendChild(_),_.color=k.fillColor||k.color,_.opacity=k.fillOpacity):_&&(M.removeChild(_),u._fill=null)},_updateCircle:function(u){var g=u._point.round(),_=Math.round(u._radius),k=Math.round(u._radiusY||_);this._setPath(u,u._empty()?"M0 0":"AL "+g.x+","+g.y+" "+_+","+k+" 0,"+65535*360)},_setPath:function(u,g){u._path.v=g},_bringToFront:function(u){gu(u._container)},_bringToBack:function(u){xu(u._container)}},ev=se.vml?jm:$e,Nm=Do.extend({_initContainer:function(){this._container=ev("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ev("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Lr(this._container),gr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Do.prototype._update.call(this);var u=this._bounds,g=u.getSize(),_=this._container;(!this._svgSize||!this._svgSize.equals(g))&&(this._svgSize=g,_.setAttribute("width",g.x),_.setAttribute("height",g.y)),an(_,u.min),_.setAttribute("viewBox",[u.min.x,u.min.y,g.x,g.y].join(" ")),this.fire("update")}},_initPath:function(u){var g=u._path=ev("path");u.options.className&&_t(g,u.options.className),u.options.interactive&&_t(g,"leaflet-interactive"),this._updateStyle(u),this._layers[c(u)]=u},_addPath:function(u){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(u._path),u.addInteractiveTarget(u._path)},_removePath:function(u){Lr(u._path),u.removeInteractiveTarget(u._path),delete this._layers[c(u)]},_updatePath:function(u){u._project(),u._update()},_updateStyle:function(u){var g=u._path,_=u.options;g&&(_.stroke?(g.setAttribute("stroke",_.color),g.setAttribute("stroke-opacity",_.opacity),g.setAttribute("stroke-width",_.weight),g.setAttribute("stroke-linecap",_.lineCap),g.setAttribute("stroke-linejoin",_.lineJoin),_.dashArray?g.setAttribute("stroke-dasharray",_.dashArray):g.removeAttribute("stroke-dasharray"),_.dashOffset?g.setAttribute("stroke-dashoffset",_.dashOffset):g.removeAttribute("stroke-dashoffset")):g.setAttribute("stroke","none"),_.fill?(g.setAttribute("fill",_.fillColor||_.color),g.setAttribute("fill-opacity",_.fillOpacity),g.setAttribute("fill-rule",_.fillRule||"evenodd")):g.setAttribute("fill","none"))},_updatePoly:function(u,g){this._setPath(u,ce(u._parts,g))},_updateCircle:function(u){var g=u._point,_=Math.max(Math.round(u._radius),1),k=Math.max(Math.round(u._radiusY),1)||_,M="a"+_+","+k+" 0 1,0 ",W=u._empty()?"M0 0":"M"+(g.x-_)+","+g.y+M+_*2+",0 "+M+-_*2+",0 ";this._setPath(u,W)},_setPath:function(u,g){u._path.setAttribute("d",g)},_bringToFront:function(u){gu(u._path)},_bringToBack:function(u){xu(u._path)}});se.vml&&Nm.include(fZ);function wO(u){return se.svg||se.vml?new Nm(u):null}Ft.include({getRenderer:function(u){var g=u.options.renderer||this._getPaneRenderer(u.options.pane)||this.options.renderer||this._renderer;return g||(g=this._renderer=this._createRenderer()),this.hasLayer(g)||this.addLayer(g),g},_getPaneRenderer:function(u){if(u==="overlayPane"||u===void 0)return!1;var g=this._paneRenderers[u];return g===void 0&&(g=this._createRenderer({pane:u}),this._paneRenderers[u]=g),g},_createRenderer:function(u){return this.options.preferCanvas&&bO(u)||wO(u)}});var jO=bu.extend({initialize:function(u,g){bu.prototype.initialize.call(this,this._boundsToLatLngs(u),g)},setBounds:function(u){return this.setLatLngs(this._boundsToLatLngs(u))},_boundsToLatLngs:function(u){return u=le(u),[u.getSouthWest(),u.getNorthWest(),u.getNorthEast(),u.getSouthEast()]}});function mZ(u,g){return new jO(u,g)}Nm.create=ev,Nm.pointsToPath=ce,Ro.geometryToLayer=Gx,Ro.coordsToLatLng=ON,Ro.coordsToLatLngs=Kx,Ro.latLngToCoords=MN,Ro.latLngsToCoords=Yx,Ro.getFeature=wu,Ro.asFeature=Zx,Ft.mergeOptions({boxZoom:!0});var NO=Qi.extend({initialize:function(u){this._map=u,this._container=u._container,this._pane=u._panes.overlayPane,this._resetStateTimeout=0,u.on("unload",this._destroy,this)},addHooks:function(){bt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){gr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Lr(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(u){if(!u.shiftKey||u.which!==1&&u.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),mm(),pN(),this._startPoint=this._map.mouseEventToContainerPoint(u),bt(document,{contextmenu:Hc,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(u){this._moved||(this._moved=!0,this._box=Ht("div","leaflet-zoom-box",this._container),_t(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(u);var g=new ie(this._point,this._startPoint),_=g.getSize();an(this._box,g.min),this._box.style.width=_.x+"px",this._box.style.height=_.y+"px"},_finish:function(){this._moved&&(Lr(this._box),Qr(this._container,"leaflet-crosshair")),pm(),gN(),gr(document,{contextmenu:Hc,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(u){if(!(u.which!==1&&u.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var g=new X(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(g).fire("boxzoomend",{boxZoomBounds:g})}},_onKeyDown:function(u){u.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ft.addInitHook("addHandler","boxZoom",NO),Ft.mergeOptions({doubleClickZoom:!0});var _O=Qi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(u){var g=this._map,_=g.getZoom(),k=g.options.zoomDelta,M=u.originalEvent.shiftKey?_-k:_+k;g.options.doubleClickZoom==="center"?g.setZoom(M):g.setZoomAround(u.containerPoint,M)}});Ft.addInitHook("addHandler","doubleClickZoom",_O),Ft.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var SO=Qi.extend({addHooks:function(){if(!this._draggable){var u=this._map;this._draggable=new Pl(u._mapPane,u._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),u.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),u.on("zoomend",this._onZoomEnd,this),u.whenReady(this._onZoomEnd,this))}_t(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Qr(this._map._container,"leaflet-grab"),Qr(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var u=this._map;if(u._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var g=le(this._map.options.maxBounds);this._offsetLimit=ae(this._map.latLngToContainerPoint(g.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(g.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;u.fire("movestart").fire("dragstart"),u.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(u){if(this._map.options.inertia){var g=this._lastTime=+new Date,_=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(_),this._times.push(g),this._prunePositions(g)}this._map.fire("move",u).fire("drag",u)},_prunePositions:function(u){for(;this._positions.length>1&&u-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var u=this._map.getSize().divideBy(2),g=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=g.subtract(u).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(u,g){return u-(u-g)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var u=this._draggable._newPos.subtract(this._draggable._startPos),g=this._offsetLimit;u.x<g.min.x&&(u.x=this._viscousLimit(u.x,g.min.x)),u.y<g.min.y&&(u.y=this._viscousLimit(u.y,g.min.y)),u.x>g.max.x&&(u.x=this._viscousLimit(u.x,g.max.x)),u.y>g.max.y&&(u.y=this._viscousLimit(u.y,g.max.y)),this._draggable._newPos=this._draggable._startPos.add(u)}},_onPreDragWrap:function(){var u=this._worldWidth,g=Math.round(u/2),_=this._initialWorldOffset,k=this._draggable._newPos.x,M=(k-g+_)%u+g-_,W=(k+g+_)%u-g-_,te=Math.abs(M+_)<Math.abs(W+_)?M:W;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=te},_onDragEnd:function(u){var g=this._map,_=g.options,k=!_.inertia||u.noInertia||this._times.length<2;if(g.fire("dragend",u),k)g.fire("moveend");else{this._prunePositions(+new Date);var M=this._lastPos.subtract(this._positions[0]),W=(this._lastTime-this._times[0])/1e3,te=_.easeLinearity,he=M.multiplyBy(te/W),me=he.distanceTo([0,0]),Oe=Math.min(_.inertiaMaxSpeed,me),We=he.multiplyBy(Oe/me),ct=Oe/(_.inertiaDeceleration*te),Tt=We.multiplyBy(-ct/2).round();!Tt.x&&!Tt.y?g.fire("moveend"):(Tt=g._limitOffset(Tt,g.options.maxBounds),I(function(){g.panBy(Tt,{duration:ct,easeLinearity:te,noMoveStart:!0,animate:!0})}))}}});Ft.addInitHook("addHandler","dragging",SO),Ft.mergeOptions({keyboard:!0,keyboardPanDelta:80});var CO=Qi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(u){this._map=u,this._setPanDelta(u.options.keyboardPanDelta),this._setZoomDelta(u.options.zoomDelta)},addHooks:function(){var u=this._map._container;u.tabIndex<=0&&(u.tabIndex="0"),bt(u,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),gr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var u=document.body,g=document.documentElement,_=u.scrollTop||g.scrollTop,k=u.scrollLeft||g.scrollLeft;this._map._container.focus(),window.scrollTo(k,_)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(u){var g=this._panKeys={},_=this.keyCodes,k,M;for(k=0,M=_.left.length;k<M;k++)g[_.left[k]]=[-1*u,0];for(k=0,M=_.right.length;k<M;k++)g[_.right[k]]=[u,0];for(k=0,M=_.down.length;k<M;k++)g[_.down[k]]=[0,u];for(k=0,M=_.up.length;k<M;k++)g[_.up[k]]=[0,-1*u]},_setZoomDelta:function(u){var g=this._zoomKeys={},_=this.keyCodes,k,M;for(k=0,M=_.zoomIn.length;k<M;k++)g[_.zoomIn[k]]=u;for(k=0,M=_.zoomOut.length;k<M;k++)g[_.zoomOut[k]]=-u},_addHooks:function(){bt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){gr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(u){if(!(u.altKey||u.ctrlKey||u.metaKey)){var g=u.keyCode,_=this._map,k;if(g in this._panKeys){if(!_._panAnim||!_._panAnim._inProgress)if(k=this._panKeys[g],u.shiftKey&&(k=G(k).multiplyBy(3)),_.options.maxBounds&&(k=_._limitOffset(G(k),_.options.maxBounds)),_.options.worldCopyJump){var M=_.wrapLatLng(_.unproject(_.project(_.getCenter()).add(k)));_.panTo(M)}else _.panBy(k)}else if(g in this._zoomKeys)_.setZoom(_.getZoom()+(u.shiftKey?3:1)*this._zoomKeys[g]);else if(g===27&&_._popup&&_._popup.options.closeOnEscapeKey)_.closePopup();else return;Hc(u)}}});Ft.addInitHook("addHandler","keyboard",CO),Ft.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var PO=Qi.extend({addHooks:function(){bt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){gr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(u){var g=XA(u),_=this._map.options.wheelDebounceTime;this._delta+=g,this._lastMousePos=this._map.mouseEventToContainerPoint(u),this._startTime||(this._startTime=+new Date);var k=Math.max(_-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),k),Hc(u)},_performZoom:function(){var u=this._map,g=u.getZoom(),_=this._map.options.zoomSnap||0;u._stop();var k=this._delta/(this._map.options.wheelPxPerZoomLevel*4),M=4*Math.log(2/(1+Math.exp(-Math.abs(k))))/Math.LN2,W=_?Math.ceil(M/_)*_:M,te=u._limitZoom(g+(this._delta>0?W:-W))-g;this._delta=0,this._startTime=null,te&&(u.options.scrollWheelZoom==="center"?u.setZoom(g+te):u.setZoomAround(this._lastMousePos,g+te))}});Ft.addInitHook("addHandler","scrollWheelZoom",PO);var pZ=600;Ft.mergeOptions({tapHold:se.touchNative&&se.safari&&se.mobile,tapTolerance:15});var kO=Qi.extend({addHooks:function(){bt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){gr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(u){if(clearTimeout(this._holdTimeout),u.touches.length===1){var g=u.touches[0];this._startPos=this._newPos=new R(g.clientX,g.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(bt(document,"touchend",Wn),bt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",g))},this),pZ),bt(document,"touchend touchcancel contextmenu",this._cancel,this),bt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function u(){gr(document,"touchend",Wn),gr(document,"touchend touchcancel",u)},_cancel:function(){clearTimeout(this._holdTimeout),gr(document,"touchend touchcancel contextmenu",this._cancel,this),gr(document,"touchmove",this._onMove,this)},_onMove:function(u){var g=u.touches[0];this._newPos=new R(g.clientX,g.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(u,g){var _=new MouseEvent(u,{bubbles:!0,cancelable:!0,view:window,screenX:g.screenX,screenY:g.screenY,clientX:g.clientX,clientY:g.clientY});_._simulated=!0,g.target.dispatchEvent(_)}});Ft.addInitHook("addHandler","tapHold",kO),Ft.mergeOptions({touchZoom:se.touch,bounceAtZoomLimits:!0});var EO=Qi.extend({addHooks:function(){_t(this._map._container,"leaflet-touch-zoom"),bt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Qr(this._map._container,"leaflet-touch-zoom"),gr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(u){var g=this._map;if(!(!u.touches||u.touches.length!==2||g._animatingZoom||this._zooming)){var _=g.mouseEventToContainerPoint(u.touches[0]),k=g.mouseEventToContainerPoint(u.touches[1]);this._centerPoint=g.getSize()._divideBy(2),this._startLatLng=g.containerPointToLatLng(this._centerPoint),g.options.touchZoom!=="center"&&(this._pinchStartLatLng=g.containerPointToLatLng(_.add(k)._divideBy(2))),this._startDist=_.distanceTo(k),this._startZoom=g.getZoom(),this._moved=!1,this._zooming=!0,g._stop(),bt(document,"touchmove",this._onTouchMove,this),bt(document,"touchend touchcancel",this._onTouchEnd,this),Wn(u)}},_onTouchMove:function(u){if(!(!u.touches||u.touches.length!==2||!this._zooming)){var g=this._map,_=g.mouseEventToContainerPoint(u.touches[0]),k=g.mouseEventToContainerPoint(u.touches[1]),M=_.distanceTo(k)/this._startDist;if(this._zoom=g.getScaleZoom(M,this._startZoom),!g.options.bounceAtZoomLimits&&(this._zoom<g.getMinZoom()&&M<1||this._zoom>g.getMaxZoom()&&M>1)&&(this._zoom=g._limitZoom(this._zoom)),g.options.touchZoom==="center"){if(this._center=this._startLatLng,M===1)return}else{var W=_._add(k)._divideBy(2)._subtract(this._centerPoint);if(M===1&&W.x===0&&W.y===0)return;this._center=g.unproject(g.project(this._pinchStartLatLng,this._zoom).subtract(W),this._zoom)}this._moved||(g._moveStart(!0,!1),this._moved=!0),A(this._animRequest);var te=o(g._move,g,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=I(te,this,!0),Wn(u)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,A(this._animRequest),gr(document,"touchmove",this._onTouchMove,this),gr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ft.addInitHook("addHandler","touchZoom",EO),Ft.BoxZoom=NO,Ft.DoubleClickZoom=_O,Ft.Drag=SO,Ft.Keyboard=CO,Ft.ScrollWheelZoom=PO,Ft.TapHold=kO,Ft.TouchZoom=EO,r.Bounds=ie,r.Browser=se,r.CRS=ee,r.Canvas=yO,r.Circle=AN,r.CircleMarker=qx,r.Class=U,r.Control=vi,r.DivIcon=gO,r.DivOverlay=eo,r.DomEvent=MY,r.DomUtil=AY,r.Draggable=Pl,r.Evented=F,r.FeatureGroup=Mo,r.GeoJSON=Ro,r.GridLayer=wm,r.Handler=Qi,r.Icon=yu,r.ImageOverlay=Xx,r.LatLng=fe,r.LatLngBounds=X,r.Layer=yi,r.LayerGroup=vu,r.LineUtil=qY,r.Map=Ft,r.Marker=Vx,r.Mixin=BY,r.Path=kl,r.Point=R,r.PolyUtil=zY,r.Polygon=bu,r.Polyline=Io,r.Popup=Jx,r.PosAnimation=JA,r.Projection=GY,r.Rectangle=jO,r.Renderer=Do,r.SVG=Nm,r.SVGOverlay=pO,r.TileLayer=ju,r.Tooltip=Qx,r.Transformation=je,r.Util=V,r.VideoOverlay=mO,r.bind=o,r.bounds=ae,r.canvas=bO,r.circle=tZ,r.circleMarker=eZ,r.control=vm,r.divIcon=dZ,r.extend=a,r.featureGroup=XY,r.geoJSON=fO,r.geoJson=sZ,r.gridLayer=uZ,r.icon=JY,r.imageOverlay=aZ,r.latLng=ge,r.latLngBounds=le,r.layerGroup=ZY,r.map=IY,r.marker=QY,r.point=G,r.polygon=nZ,r.polyline=rZ,r.popup=lZ,r.rectangle=mZ,r.setOptions=v,r.stamp=c,r.svg=wO,r.svgOverlay=oZ,r.tileLayer=xO,r.tooltip=cZ,r.transformation=Y,r.version=n,r.videoOverlay=iZ;var gZ=window.L;r.noConflict=function(){return window.L=gZ,this},window.L=r})})(RC,RC.exports);var du=RC.exports;const Wt=tr(du);function kx(e,t,r){return Object.freeze({instance:e,context:t,container:r})}function hj(e,t){return t==null?function(n,a){const i=x.useRef();return i.current||(i.current=e(n,a)),i}:function(n,a){const i=x.useRef();i.current||(i.current=e(n,a));const o=x.useRef(n),{instance:l}=i.current;return x.useEffect(function(){o.current!==n&&(t(l,n,o.current),o.current=n)},[l,n,a]),i}}function dV(e,t){x.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var i;(i=t.layerContainer)==null||i.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function uV(e){return function(r){const n=dj(),a=e(uj(r,n),n);return iV(n.map,r.attribution),RT(a.current,r.eventHandlers),dV(a.current,n),a}}function B0e(e,t){const r=x.useRef();x.useEffect(function(){if(t.pathOptions!==r.current){const a=t.pathOptions??{};e.instance.setStyle(a),r.current=a}},[e,t])}function z0e(e){return function(r){const n=dj(),a=e(uj(r,n),n);return RT(a.current,r.eventHandlers),dV(a.current,n),B0e(a.current,r),a}}function U0e(e,t){const r=hj(e,t),n=uV(r);return cV(n)}function W0e(e,t){const r=hj(e),n=F0e(r,t);return $0e(n)}function hV(e,t){const r=hj(e,t),n=z0e(r);return cV(n)}function H0e(e,t){const r=hj(e,t),n=uV(r);return L0e(n)}function V0e(e,t,r){const{opacity:n,zIndex:a}=t;n!=null&&n!==r.opacity&&e.setOpacity(n),a!=null&&a!==r.zIndex&&e.setZIndex(a)}function Qf(){return dj().map}const DC=hV(function({center:t,children:r,...n},a){const i=new du.Circle(t,n);return kx(i,IT(a,{overlayContainer:i}))},I0e);function $C(){return $C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$C.apply(this,arguments)}function q0e({bounds:e,boundsOptions:t,center:r,children:n,className:a,id:i,placeholder:o,style:l,whenReady:c,zoom:d,...h},f){const[m]=x.useState({className:a,id:i,style:l}),[p,y]=x.useState(null);x.useImperativeHandle(f,()=>(p==null?void 0:p.map)??null,[p]);const v=x.useCallback(N=>{if(N!==null&&p===null){const j=new du.Map(N,h);r!=null&&d!=null?j.setView(r,d):e!=null&&j.fitBounds(e,t),c!=null&&j.whenReady(c),y(D0e(j))}},[]);x.useEffect(()=>()=>{p==null||p.map.remove()},[p]);const b=p?q.createElement(lV,{value:p},n):o??null;return q.createElement("div",$C({},m,{ref:v}),b)}const Ex=x.forwardRef(q0e),wo=U0e(function({position:t,...r},n){const a=new du.Marker(t,r);return kx(a,IT(n,{overlayContainer:a}))},function(t,r,n){r.position!==n.position&&t.setLatLng(r.position),r.icon!=null&&r.icon!==n.icon&&t.setIcon(r.icon),r.zIndexOffset!=null&&r.zIndexOffset!==n.zIndexOffset&&t.setZIndexOffset(r.zIndexOffset),r.opacity!=null&&r.opacity!==n.opacity&&t.setOpacity(r.opacity),t.dragging!=null&&r.draggable!==n.draggable&&(r.draggable===!0?t.dragging.enable():t.dragging.disable())}),G0e=hV(function({positions:t,...r},n){const a=new du.Polyline(t,r);return kx(a,IT(n,{overlayContainer:a}))},function(t,r,n){r.positions!==n.positions&&t.setLatLngs(r.positions)}),zi=W0e(function(t,r){const n=new du.Popup(t,r.overlayContainer);return kx(n,r)},function(t,r,{position:n},a){x.useEffect(function(){const{instance:o}=t;function l(d){d.popup===o&&(o.update(),a(!0))}function c(d){d.popup===o&&a(!1)}return r.map.on({popupopen:l,popupclose:c}),r.overlayContainer==null?(n!=null&&o.setLatLng(n),o.openOn(r.map)):r.overlayContainer.bindPopup(o),function(){var h;r.map.off({popupopen:l,popupclose:c}),(h=r.overlayContainer)==null||h.unbindPopup(),r.map.removeLayer(o)}},[t,r,a,n])}),Tx=H0e(function({url:t,...r},n){const a=new du.TileLayer(t,uj(r,n));return kx(a,n)},function(t,r,n){V0e(t,r,n);const{url:a}=r;a!=null&&a!==n.url&&t.setUrl(a)});delete Wt.Icon.Default.prototype._getIconUrl;Wt.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const K0e=new Wt.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),Y0e=new Wt.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-gold.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),HI=new Wt.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});new Wt.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});const Z0e=({bounds:e})=>{const t=Qf();return x.useEffect(()=>{e&&t.fitBounds(e,{padding:[50,50]})},[e,t]),null},X0e=e=>{try{const t=new Date(`${e.scheduledDate}T${e.startTime}`),r=new Date,n=uge(t,r),a=OW(t,r);return!e.pswAssigned&&(e.status==="pending"||e.status==="paid")?{category:"unclaimed",daysRemaining:n,hoursRemaining:a}:e.pswAssigned&&(e.status==="in-progress"||e.status==="active")?{category:"live",daysRemaining:0,hoursRemaining:0}:e.pswAssigned?n<=7?{category:"claimed_soon",daysRemaining:n,hoursRemaining:a}:{category:"claimed_later",daysRemaining:n,hoursRemaining:a}:{category:"unclaimed",daysRemaining:n,hoursRemaining:a}}catch{return{category:"unclaimed",daysRemaining:999,hoursRemaining:9999}}},J0e=e=>{switch(e){case"live":return K0e;case"claimed_soon":return Y0e;case"claimed_later":case"unclaimed":return HI;default:return HI}},VI=(e,t)=>e<=0&&t<=0?"Now":e<=0&&t>0?`${t}h`:e===1?"Tomorrow":`${e} days`,qI="admin_map_show_unclaimed",Q0e=()=>{const[e,t]=x.useState([]),[r,n]=x.useState(!1),[a,i]=x.useState(!0),[o,l]=x.useState(null),[c,d]=x.useState(()=>{const S=sessionStorage.getItem(qI);return S!==null?S==="true":!0});x.useEffect(()=>{sessionStorage.setItem(qI,String(c))},[c]);const h=x.useCallback(async()=>{try{const{data:S,error:C}=await de.from("bookings").select("*").in("status",["pending","paid","active","in-progress","assigned"]).not("status","eq","archived").order("scheduled_date",{ascending:!0});if(C){console.error("Error fetching bookings for map:",C),Z.error("Failed to load map data");return}const P=(S||[]).map(T=>{const O=E0(T.patient_postal_code||""),{category:E,daysRemaining:D,hoursRemaining:I}=X0e({scheduledDate:T.scheduled_date,startTime:T.start_time,status:T.status,pswAssigned:T.psw_assigned});return{id:T.id,bookingCode:T.booking_code,clientName:T.client_name||"Unknown Client",clientPhone:T.client_phone,patientAddress:T.patient_address,postalCode:T.patient_postal_code,scheduledDate:T.scheduled_date,startTime:T.start_time,endTime:T.end_time,serviceType:T.service_type||[],status:T.status,paymentStatus:T.payment_status,pswAssigned:T.psw_assigned,pswFirstName:T.psw_first_name,coords:O||void 0,category:E,daysRemaining:D,hoursRemaining:I}});P.sort((T,O)=>{const E={live:0,claimed_soon:1,unclaimed:2,claimed_later:3},D=E[T.category]-E[O.category];return D!==0?D:T.daysRemaining-O.daysRemaining}),t(P)}catch(S){console.error("Map data error:",S)}finally{i(!1)}},[]);x.useEffect(()=>{h();const S=setInterval(h,3e4);return()=>clearInterval(S)},[h]),x.useEffect(()=>{const S=de.channel("booking-status-changes").on("postgres_changes",{event:"*",schema:"public",table:"bookings"},()=>{h()}).subscribe();return()=>{de.removeChannel(S)}},[h]);const f=async()=>{n(!0),await h(),setTimeout(()=>n(!1),500),Z.success("Map refreshed")},m=x.useMemo(()=>c?e:e.filter(S=>S.category!=="unclaimed"),[e,c]),p=x.useMemo(()=>{const S=[];return m.forEach(C=>{C.coords&&S.push([C.coords.lat,C.coords.lng])}),S.length>=2?Wt.latLngBounds(S):S.length===1?Wt.latLngBounds([[S[0][0]-.05,S[0][1]-.05],[S[0][0]+.05,S[0][1]+.05]]):Wt.latLngBounds([[43.58,-79.5],[43.85,-79.2]])},[m]),y=e.filter(S=>S.category==="live").length,v=e.filter(S=>S.category==="claimed_soon").length,b=e.filter(S=>S.category==="claimed_later").length,N=e.filter(S=>S.category==="unclaimed").length,j=S=>{switch(S){case"live":return"LIVE NOW";case"claimed_soon":return"CLAIMED";case"claimed_later":return"CLAIMED";case"unclaimed":return"UNCLAIMED JOB";default:return"UNKNOWN"}},w=S=>{switch(S){case"live":return{badge:"bg-green-500/10 text-green-600 border-green-200",card:"border-green-300 bg-green-50/30 dark:bg-green-950/10",dot:"bg-green-500",text:"text-green-600"};case"claimed_soon":return{badge:"bg-yellow-500/10 text-yellow-600 border-yellow-200",card:"border-yellow-300 bg-yellow-50/30 dark:bg-yellow-950/10",dot:"bg-yellow-500",text:"text-yellow-600"};case"claimed_later":case"unclaimed":return{badge:"bg-red-500/10 text-red-600 border-red-200",card:"border-red-300 bg-red-50/30 dark:bg-red-950/10",dot:"bg-red-500",text:"text-red-600"};default:return{badge:"bg-muted text-muted-foreground border-border",card:"border-border",dot:"bg-muted-foreground",text:"text-muted-foreground"}}};return a?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(Nr,{className:"w-8 h-8 animate-spin text-primary"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs(ne,{variant:"secondary",className:"px-3 py-1 bg-green-500/10 text-green-700 border-green-300",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),y," Live Now"]}),s.jsxs(ne,{variant:"outline",className:"px-3 py-1 bg-yellow-500/10 text-yellow-700 border-yellow-300",children:[s.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full mr-2"}),v," Claimed (7 Days)"]}),s.jsxs(ne,{variant:"outline",className:"px-3 py-1 bg-red-500/10 text-red-700 border-red-300",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-2"}),b+N," Other"]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 bg-muted/50 rounded-lg px-3 py-2",children:[s.jsx(mn,{id:"show-unclaimed",checked:c,onCheckedChange:d}),s.jsxs(oe,{htmlFor:"show-unclaimed",className:"text-sm cursor-pointer flex items-center gap-2",children:[s.jsx(At,{className:"w-4 h-4 text-red-500"}),"Show Unclaimed Jobs (",N,")"]})]}),s.jsxs(K,{variant:"outline",size:"sm",onClick:f,disabled:r,children:[s.jsx(Nr,{className:`w-4 h-4 mr-2 ${r?"animate-spin":""}`}),"Refresh"]})]})]}),s.jsxs(J,{className:"shadow-card overflow-hidden",children:[s.jsxs(ke,{className:"pb-2",children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(St,{className:"w-5 h-5 text-primary"}),"Live Shift Tracking Map"]}),s.jsx(Ge,{children:"Real-time view of all orders with full client details for admin oversight"})]}),s.jsxs(Q,{className:"p-0 relative",children:[s.jsx("div",{className:"h-[450px] w-full",children:s.jsxs(Ex,{center:[43.6532,-79.3832],zoom:11,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[s.jsx(Tx,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),s.jsx(Z0e,{bounds:p}),m.map(S=>S.coords&&s.jsx(wo,{position:[S.coords.lat,S.coords.lng],icon:J0e(S.category),children:s.jsx(zi,{children:s.jsxs("div",{className:"text-sm min-w-[240px] space-y-2",children:[s.jsx("div",{className:`font-bold text-xs uppercase tracking-wide ${w(S.category).text}`,children:j(S.category)}),s.jsxs("div",{className:"border-b border-border pb-2",children:[s.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[s.jsx($t,{className:"w-3 h-3 text-primary"}),s.jsx("p",{className:"font-semibold text-foreground",children:S.clientName})]}),S.clientPhone&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Fn,{className:"w-3 h-3 text-muted-foreground"}),s.jsx("a",{href:`tel:${S.clientPhone}`,className:"text-primary hover:underline text-xs",children:S.clientPhone})]})]}),s.jsxs("div",{className:"flex items-start gap-1",children:[s.jsx(Gp,{className:"w-3 h-3 text-muted-foreground mt-0.5"}),s.jsx("div",{className:"text-xs",children:S.serviceType.length>0?S.serviceType.slice(0,2).join(", ")+(S.serviceType.length>2?"...":""):"General Care"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Lt,{className:"w-3 h-3 text-muted-foreground"}),s.jsx("span",{className:"text-xs",children:Ze(un(S.scheduledDate),"EEEE, MMM d, yyyy")})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Qe,{className:"w-3 h-3 text-muted-foreground"}),s.jsxs("span",{className:"text-xs",children:[S.startTime," - ",S.endTime]})]}),s.jsxs("div",{className:"flex items-center gap-1 pt-1 border-t border-border",children:[s.jsx(QQ,{className:`w-3 h-3 ${w(S.category).text}`}),s.jsx("span",{className:`text-xs font-medium ${w(S.category).text}`,children:S.category==="live"?"In Progress":VI(S.daysRemaining,S.hoursRemaining)})]}),S.pswFirstName&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["PSW: ",S.pswFirstName]}),s.jsxs("div",{className:"text-xs text-muted-foreground pt-1 border-t border-border",children:[s.jsx("p",{children:S.patientAddress}),S.postalCode&&s.jsx("p",{children:S.postalCode})]})]})})},S.id))]})}),s.jsxs("div",{className:"absolute bottom-4 right-4 bg-background/95 backdrop-blur-sm border border-border rounded-lg p-3 shadow-lg z-[1000]",children:[s.jsxs("p",{className:"text-xs font-semibold text-foreground mb-2 flex items-center gap-1",children:[s.jsx(St,{className:"w-3 h-3"}),"Legend"]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Live Now"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Claimed (within 7 days)"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Unclaimed / 7+ Days"})]})]})]})]})]}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:m.length===0?s.jsx(J,{className:"col-span-full shadow-card",children:s.jsx(Q,{className:"py-8 text-center text-muted-foreground",children:"No bookings to display on map"})}):m.map(S=>{const C=w(S.category);return s.jsx(J,{className:`shadow-card transition-all cursor-pointer ${o===S.id?"ring-2 ring-primary":""} ${C.card}`,onClick:()=>l(S.id===o?null:S.id),children:s.jsxs(Q,{className:"p-4",children:[s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[s.jsxs(ne,{className:C.badge,children:[S.category==="live"?s.jsx(Kt,{className:"w-3 h-3 mr-1"}):S.category==="unclaimed"?s.jsx(At,{className:"w-3 h-3 mr-1"}):s.jsx(Qe,{className:"w-3 h-3 mr-1"}),j(S.category)]}),S.category!=="live"&&s.jsx("span",{className:`text-xs ${C.text}`,children:VI(S.daysRemaining,S.hoursRemaining)})]}),s.jsx("p",{className:"font-semibold text-foreground",children:S.clientName}),S.clientPhone&&s.jsxs("p",{className:"text-sm text-primary flex items-center gap-1 mt-1",children:[s.jsx(Fn,{className:"w-3 h-3"}),s.jsx("a",{href:`tel:${S.clientPhone}`,className:"hover:underline",children:S.clientPhone})]}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1 flex items-center gap-1",children:[s.jsx(Gp,{className:"w-3 h-3"}),S.serviceType.length>0?S.serviceType.slice(0,2).join(", "):"General Care"]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:S.patientAddress}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-2",children:[s.jsx(Lt,{className:"w-3 h-3"}),s.jsx("span",{children:Ze(un(S.scheduledDate),"MMM d, yyyy")}),s.jsx("span",{children:""}),s.jsxs("span",{children:[S.startTime," - ",S.endTime]})]}),S.pswFirstName&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["PSW: ",S.pswFirstName]})]})}),S.category==="unclaimed"&&s.jsx("div",{className:"mt-3 pt-3 border-t border-border",children:s.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:[s.jsx(Wr,{className:"w-4 h-4"}),s.jsx("span",{children:"Action Required: No PSW assigned"})]})})]})},S.id)})})]})};function Wu({className:e,...t}){return s.jsx("div",{className:Re("animate-pulse rounded-md bg-muted",e),...t})}const DT=({bookingId:e,pswId:t,limit:r=10,refreshIntervalMs:n=6e4,enabled:a=!0})=>{const[i,o]=x.useState([]),[l,c]=x.useState(null),[d,h]=x.useState(!0),[f,m]=x.useState(null),p=x.useCallback(async()=>{if(!a||!e&&!t){h(!1);return}try{let y=de.from("location_logs").select("*").order("created_at",{ascending:!1}).limit(r);e&&(y=y.eq("booking_id",e)),t&&(y=y.eq("psw_id",t));const{data:v,error:b}=await y;b?(console.error("Error fetching location logs:",b),m(b.message)):(o(v||[]),c(v&&v.length>0?v[0]:null),m(null))}catch(y){console.error("Location logs fetch error:",y),m("Failed to fetch location data")}finally{h(!1)}},[e,t,r,a]);return x.useEffect(()=>{p()},[p]),x.useEffect(()=>{if(!a||n<=0)return;const y=setInterval(p,n);return()=>clearInterval(y)},[p,n,a]),x.useEffect(()=>{if(!a||!e&&!t)return;const y=de.channel(`location-logs-${e||t}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"location_logs",...e&&{filter:`booking_id=eq.${e}`}},v=>{const b=v.new;o(N=>[b,...N.slice(0,r-1)]),c(b)}).subscribe();return()=>{de.removeChannel(y)}},[e,t,r,a]),{logs:i,latestLog:l,isLoading:d,error:f,refetch:p}},n1=new Map,fV=async e=>{if(!e||e.trim().length<5)return console.warn("Geocoding: Address too short or empty"),null;const t=e.trim().toLowerCase();if(n1.has(t))return n1.get(t);try{const r=e.includes("Canada")?e:`${e}, Canada`,n=encodeURIComponent(r),a=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${n}&limit=1&countrycodes=ca`,{headers:{"User-Agent":"PSWDirect/1.0"}});if(!a.ok)return console.error("Geocoding API error:",a.status),null;const i=await a.json();if(i.length===0)return console.warn("Geocoding: No results found for address:",e),null;const o={lat:parseFloat(i[0].lat),lng:parseFloat(i[0].lon),displayName:i[0].display_name};return n1.set(t,o),o}catch(r){return console.error("Geocoding error:",r),null}},ebe=(e,t,r,n)=>{const i=(r-e)*Math.PI/180,o=(n-t)*Math.PI/180,l=Math.sin(i/2)*Math.sin(i/2)+Math.cos(e*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2);return 6371e3*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))},tbe=e=>e<1e3?`${Math.round(e)}m`:`${(e/1e3).toFixed(1)}km`,mV=({address:e,enabled:t=!0})=>{const[r,n]=x.useState({coords:null,displayName:null,isLoading:!!e&&t,error:null});return x.useEffect(()=>{if(!e||!t){n({coords:null,displayName:null,isLoading:!1,error:null});return}let a=!1;return(async()=>{n(o=>({...o,isLoading:!0,error:null}));try{const o=await fV(e);if(a)return;n(o?{coords:{lat:o.lat,lng:o.lng},displayName:o.displayName,isLoading:!1,error:null}:{coords:null,displayName:null,isLoading:!1,error:"Could not find coordinates for this address"})}catch{if(a)return;n({coords:null,displayName:null,isLoading:!1,error:"Geocoding failed"})}})(),()=>{a=!0}},[e,t]),r};delete Wt.Icon.Default.prototype._getIconUrl;Wt.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const rbe=new Wt.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),nbe=new Wt.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-grey.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png",iconSize:[20,33],iconAnchor:[10,33],popupAnchor:[1,-27],shadowSize:[33,33]}),sbe=new Wt.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),abe=({positions:e,clientCoords:t})=>{const r=Qf();return x.useEffect(()=>{const n=[...e];if(t&&n.push([t.lat,t.lng]),n.length>0){const a=Wt.latLngBounds(n.map(([i,o])=>[i,o]));r.fitBounds(a,{padding:[50,50]})}},[e,t,r]),null},ibe=({open:e,onOpenChange:t,bookingId:r,pswName:n="PSW",clientName:a,clientAddress:i,clientCoords:o})=>{const{logs:l,latestLog:c,isLoading:d,error:h,refetch:f}=DT({bookingId:r,limit:10,refreshIntervalMs:3e4,enabled:e}),{coords:m,isLoading:p}=mV({address:i,enabled:e&&!o&&!!i}),y=o||m,v=l.map(N=>[N.latitude,N.longitude]).reverse(),b=c?[c.latitude,c.longitude]:y?[y.lat,y.lng]:[43.6532,-79.3832];return s.jsx(hr,{open:e,onOpenChange:t,children:s.jsxs(or,{className:"max-w-2xl max-h-[90vh] overflow-hidden",children:[s.jsx(lr,{children:s.jsxs(cr,{className:"flex items-center gap-2",children:[s.jsx(el,{className:"w-5 h-5 text-primary"}),"Live Location: ",n]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c&&s.jsxs(ne,{variant:"outline",className:"text-xs",children:[s.jsx(Qe,{className:"w-3 h-3 mr-1"}),"Last update: ",TC(new Date(c.created_at),{addSuffix:!0})]}),l.length>0&&s.jsxs(ne,{variant:"secondary",className:"text-xs",children:[s.jsx(vee,{className:"w-3 h-3 mr-1"}),l.length," location point",l.length!==1?"s":""]}),s.jsx(K,{variant:"ghost",size:"sm",onClick:f,className:"ml-auto text-xs",children:"Refresh"})]}),d?s.jsx(Wu,{className:"h-[400px] w-full rounded-lg"}):h?s.jsx("div",{className:"h-[400px] flex items-center justify-center bg-muted rounded-lg",children:s.jsx("p",{className:"text-muted-foreground",children:h})}):!c&&!y?s.jsx("div",{className:"h-[400px] flex items-center justify-center bg-muted rounded-lg",children:s.jsxs("div",{className:"text-center",children:[s.jsx(St,{className:"w-12 h-12 text-muted-foreground/30 mx-auto mb-3"}),s.jsx("p",{className:"text-muted-foreground",children:"No location data available yet"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Location will appear once the PSW starts sharing"})]})}):s.jsx("div",{className:"h-[400px] rounded-lg overflow-hidden border",children:s.jsxs(Ex,{center:b,zoom:14,style:{height:"100%",width:"100%"},children:[s.jsx(Tx,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),s.jsx(abe,{positions:v,clientCoords:y}),v.length>1&&s.jsx(G0e,{positions:v,color:"#3b82f6",weight:3,opacity:.7,dashArray:"5, 10"}),l.slice(1).map((N,j)=>s.jsx(wo,{position:[N.latitude,N.longitude],icon:nbe,children:s.jsx(zi,{children:s.jsxs("div",{className:"text-center text-sm",children:[s.jsxs("strong",{children:["Position #",l.length-j-1]}),s.jsx("br",{}),s.jsx("span",{className:"text-xs text-muted-foreground",children:Ze(new Date(N.created_at),"h:mm a")})]})})},N.id)),c&&s.jsx(wo,{position:[c.latitude,c.longitude],icon:rbe,children:s.jsx(zi,{children:s.jsxs("div",{className:"text-center",children:[s.jsx("strong",{children:n}),s.jsx("br",{}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Current Position"}),s.jsx("br",{}),s.jsx("span",{className:"text-xs",children:Ze(new Date(c.created_at),"h:mm:ss a")})]})})}),y&&s.jsx(wo,{position:[y.lat,y.lng],icon:sbe,children:s.jsx(zi,{children:s.jsxs("div",{className:"text-center",children:[s.jsxs("strong",{children:[a||"Client","'s Location"]}),i&&s.jsxs(s.Fragment,{children:[s.jsx("br",{}),s.jsx("span",{className:"text-xs",children:i})]})]})})})]})}),s.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 text-xs text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),s.jsx("span",{children:"Current Position"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-400"}),s.jsx("span",{children:"Previous Positions"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),s.jsx("span",{children:"Client Location"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-3 h-4 border-t-2 border-dashed border-blue-500"}),s.jsx("span",{children:"Movement Trail"})]})]})]})]})})},obe=()=>{const{user:e}=na(),[t,r]=x.useState([]),[n,a]=x.useState([]),[i,o]=x.useState([]),[l,c]=x.useState({}),[d,h]=x.useState(null),[f,m]=x.useState(!1),[p,y]=x.useState(null),[v,b]=x.useState(""),[N,j]=x.useState(null),[w,S]=x.useState(null),[C,P]=x.useState(""),[T,O]=x.useState(!1),[E,D]=x.useState(null),{toast:I}=_F(),A=()=>{const z=gs();r(z.filter(ie=>ie.status==="checked-in")),a(z.filter(ie=>ie.status==="claimed"));const G=new Date(Date.now()-24*60*60*1e3).toISOString();o(z.filter(ie=>ie.status==="completed"&&ie.signedOutAt&&ie.signedOutAt>G))};x.useEffect(()=>{A();const z=setInterval(A,3e4);return()=>clearInterval(z)},[]),x.useEffect(()=>{const z=()=>{const ie=Date.now(),ae={};t.forEach(X=>{if(X.checkedInAt){const le=new Date(X.checkedInAt).getTime();ae[X.id]=Math.floor((ie-le)/1e3)}}),c(ae)};z();const G=setInterval(z,1e3);return()=>clearInterval(G)},[t]);const V=()=>{m(!0),A(),setTimeout(()=>m(!1),500)},U=z=>{const G=Math.floor(z/3600),ie=Math.floor(z%3600/60),ae=z%60;return`${G.toString().padStart(2,"0")}:${ie.toString().padStart(2,"0")}:${ae.toString().padStart(2,"0")}`},$=z=>Ze(new Date(z),"MMM d, h:mm a"),H=z=>z.isAsap===!0||z.is_asap===!0||z.services.some(G=>G.toLowerCase().includes("rush")||G.toLowerCase().includes("asap")),F=z=>{var ae,X;const G=z.services.some(le=>le.toLowerCase().includes("hospital")||le.toLowerCase().includes("doctor")),ie=((ae=z.patientAddress)==null?void 0:ae.toLowerCase().includes("toronto"))||((X=z.patientAddress)==null?void 0:X.match(/^M[0-9]/i))!==null;return G&&ie},R=({shift:z,type:G})=>{const ie=H(z),ae=F(z);return s.jsx(J,{className:`${G==="active"?"border-green-500 bg-green-50/50 dark:bg-green-950/20":G==="completed"?"border-muted":"border-yellow-500 bg-yellow-50/50 dark:bg-yellow-950/20"}`,children:s.jsxs(Q,{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[G==="active"&&s.jsxs(ne,{variant:"default",className:"bg-green-600 animate-pulse",children:[s.jsx(cl,{className:"w-3 h-3 mr-1"}),"In Progress"]}),G==="claimed"&&s.jsxs(ne,{variant:"secondary",className:"bg-yellow-500 text-white",children:[s.jsx(Qe,{className:"w-3 h-3 mr-1"}),"Pending Check-in"]}),G==="completed"&&s.jsxs(ne,{variant:"outline",className:"text-green-600 border-green-600",children:[s.jsx(Kt,{className:"w-3 h-3 mr-1"}),"Completed"]}),ie&&s.jsx(ne,{className:"bg-red-100 text-red-700 border-red-300",children:" Rush"}),ae&&s.jsx(ne,{className:"bg-yellow-100 text-yellow-700 border-yellow-300",children:" Urban"}),z.flaggedForOvertime&&s.jsxs(ne,{variant:"destructive",children:[s.jsx(Wr,{className:"w-3 h-3 mr-1"}),"+",z.overtimeMinutes,"min OT"]})]}),G==="active"&&l[z.id]!==void 0&&s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"Elapsed"}),s.jsx("p",{className:"font-mono text-lg font-bold text-green-600",children:U(l[z.id])})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($t,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{className:"font-medium",children:["PSW: ",z.pswName||"Unassigned"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($t,{className:"w-4 h-4 text-primary"}),s.jsxs("span",{children:["Client: ",z.clientName]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(St,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:z.patientAddress})]}),z.clientPhone&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Fn,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:z.clientPhone})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qe,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{className:"text-sm",children:[z.scheduledDate,"  ",z.scheduledStart," - ",z.scheduledEnd]})]})]}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-3",children:z.services.map((X,le)=>s.jsx(ne,{variant:"outline",className:"text-xs",children:X},le))}),G==="claimed"&&z.pswName&&s.jsx("div",{className:"mt-3 pt-3 border-t",children:s.jsxs(K,{variant:"outline",size:"sm",className:"w-full text-amber-600 border-amber-300 hover:bg-amber-50",onClick:()=>j(z),children:[s.jsx(rM,{className:"w-4 h-4 mr-2"}),"Manual Sign-In"]})}),G==="active"&&z.checkedInAt&&s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Checked in: ",$(z.checkedInAt)]}),s.jsxs(K,{variant:"outline",size:"sm",className:"w-full text-blue-600 border-blue-300 hover:bg-blue-50",onClick:()=>D(z),children:[s.jsx(el,{className:"w-4 h-4 mr-2"}),"View Live Map"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(K,{variant:"outline",size:"sm",className:"flex-1 text-amber-600 border-amber-300 hover:bg-amber-50",onClick:()=>S(z),children:[s.jsx(Wh,{className:"w-4 h-4 mr-1"}),"Manual Sign-Out"]}),s.jsxs(K,{variant:"destructive",size:"sm",className:"flex-1",onClick:()=>y(z),children:[s.jsx(h_,{className:"w-4 h-4 mr-1"}),"Stop Shift"]})]})]}),G==="completed"&&z.careSheet&&s.jsx("div",{className:"mt-3 pt-3 border-t",children:s.jsxs(K,{variant:"outline",size:"sm",className:"w-full",onClick:()=>h({shift:z,data:z.careSheet}),children:[s.jsx(zt,{className:"w-4 h-4 mr-2"}),"View Care Sheet"]})})]})})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Active Shifts"}),s.jsx("p",{className:"text-muted-foreground",children:"Real-time monitoring of all in-progress shifts"})]}),s.jsxs(K,{variant:"outline",size:"sm",onClick:V,disabled:f,children:[s.jsx(Nr,{className:`w-4 h-4 mr-2 ${f?"animate-spin":""}`}),"Refresh"]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(cl,{className:"w-5 h-5 text-green-600"}),s.jsxs("h3",{className:"font-semibold",children:["In Progress (",t.length,")"]})]}),t.length===0?s.jsx(J,{className:"border-dashed",children:s.jsx(Q,{className:"p-6 text-center text-muted-foreground",children:"No active shifts at the moment"})}):s.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:t.map(z=>s.jsx(R,{shift:z,type:"active"},z.id))})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(Qe,{className:"w-5 h-5 text-yellow-600"}),s.jsxs("h3",{className:"font-semibold",children:["Pending Check-in (",n.length,")"]})]}),n.length===0?s.jsx(J,{className:"border-dashed",children:s.jsx(Q,{className:"p-6 text-center text-muted-foreground",children:"No shifts pending check-in"})}):s.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:n.map(z=>s.jsx(R,{shift:z,type:"claimed"},z.id))})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(Kt,{className:"w-5 h-5 text-muted-foreground"}),s.jsxs("h3",{className:"font-semibold",children:["Recently Completed (",i.length,")"]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"(Last 24 hours)"})]}),i.length===0?s.jsx(J,{className:"border-dashed",children:s.jsx(Q,{className:"p-6 text-center text-muted-foreground",children:"No recently completed shifts"})}):s.jsx(Ps,{className:"h-[400px]",children:s.jsx("div",{className:"grid gap-4 md:grid-cols-2 pr-4",children:i.map(z=>s.jsx(R,{shift:z,type:"completed"},z.id))})})]}),s.jsx(hr,{open:!!d,onOpenChange:()=>h(null),children:s.jsxs(or,{className:"max-w-lg max-h-[90vh] overflow-auto",children:[s.jsx(lr,{children:s.jsxs(cr,{className:"flex items-center gap-2",children:[s.jsx(zt,{className:"w-5 h-5"}),"Care Sheet - ",d==null?void 0:d.shift.clientName]})}),d&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"PSW"}),s.jsx("p",{className:"font-medium",children:d.shift.pswName})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Date"}),s.jsx("p",{className:"font-medium",children:d.shift.scheduledDate})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Signed Out"}),s.jsx("p",{className:"font-medium",children:d.shift.signedOutAt?$(d.shift.signedOutAt):"-"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Duration"}),s.jsxs("p",{className:"font-medium",children:[d.shift.scheduledStart," - ",d.shift.scheduledEnd]})]})]}),s.jsx(ja,{}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"Mood Assessment"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[s.jsx("p",{className:"text-muted-foreground text-xs",children:"On Arrival"}),s.jsx("p",{className:"font-medium capitalize",children:d.data.moodOnArrival})]}),s.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[s.jsx("p",{className:"text-muted-foreground text-xs",children:"On Departure"}),s.jsx("p",{className:"font-medium capitalize",children:d.data.moodOnDeparture})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"Tasks Completed"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:d.data.tasksCompleted.map((z,G)=>s.jsxs(ne,{variant:"secondary",children:[s.jsx(Kt,{className:"w-3 h-3 mr-1"}),z]},G))})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"Observations"}),s.jsx("p",{className:"text-sm bg-muted p-3 rounded-lg whitespace-pre-wrap",children:d.data.observations||"No observations recorded"})]}),d.data.isHospitalDischarge&&s.jsxs(s.Fragment,{children:[s.jsx(ja,{}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/30 p-4 rounded-lg",children:[s.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2 text-blue-700 dark:text-blue-400",children:[s.jsx(zt,{className:"w-4 h-4"}),"Hospital Discharge Protocol"]}),d.data.dischargeDocuments&&s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:" Discharge documents attached"}),d.data.dischargeNotes&&s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Notes:"}),s.jsx("p",{className:"text-sm",children:d.data.dischargeNotes})]})]})]}),d.shift.flaggedForOvertime&&s.jsx("div",{className:"bg-red-50 dark:bg-red-950/30 p-4 rounded-lg",children:s.jsxs("p",{className:"text-sm font-medium text-red-700 dark:text-red-400 flex items-center gap-2",children:[s.jsx(Wr,{className:"w-4 h-4"}),"Overtime: ",d.shift.overtimeMinutes," minutes past scheduled end"]})})]})]})}),s.jsx(hr,{open:!!p,onOpenChange:()=>{y(null),b("")},children:s.jsxs(or,{children:[s.jsxs(lr,{children:[s.jsxs(cr,{className:"flex items-center gap-2 text-destructive",children:[s.jsx(h_,{className:"w-5 h-5"}),"Stop Shift"]}),s.jsx(bo,{children:"This will end the shift immediately and mark it as completed. The PSW will no longer be able to sign out normally."})]}),p&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-muted p-3 rounded-lg text-sm space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"PSW:"})," ",p.pswName]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Client:"})," ",p.clientName]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Scheduled:"})," ",p.scheduledStart," - ",p.scheduledEnd]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"stopReason",children:"Reason for manual stop (optional)"}),s.jsx(_n,{id:"stopReason",placeholder:"e.g., PSW called - phone died, emergency, app issues...",value:v,onChange:z=>b(z.target.value)})]})]}),s.jsxs(yo,{className:"gap-2 sm:gap-0",children:[s.jsx(K,{variant:"outline",onClick:()=>{y(null),b("")},children:"Cancel"}),s.jsxs(K,{variant:"destructive",onClick:()=>{p&&(xfe(p.id,v||void 0)?(I({title:"Shift stopped",description:`${p.pswName}'s shift has been ended and marked as completed.`}),A()):I({title:"Error",description:"Failed to stop shift. It may have already been completed.",variant:"destructive"}),y(null),b(""))},children:[s.jsx(h_,{className:"w-4 h-4 mr-2"}),"Stop Shift"]})]})]})}),s.jsx(hr,{open:!!N,onOpenChange:()=>{j(null),P(""),O(!1)},children:s.jsxs(or,{children:[s.jsxs(lr,{children:[s.jsxs(cr,{className:"flex items-center gap-2 text-amber-600",children:[s.jsx(nM,{className:"w-5 h-5"}),"Manual Sign-In Override"]}),s.jsx(bo,{children:"This will check in the PSW manually, bypassing the GPS geofencing requirement. Use only for technical issues (no internet, phone problems)."})]}),N&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-muted p-3 rounded-lg text-sm space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"PSW:"})," ",N.pswName]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Client:"})," ",N.clientName]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Scheduled:"})," ",N.scheduledDate,"  ",N.scheduledStart," - ",N.scheduledEnd]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Location:"})," ",N.patientAddress]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"checkInReason",children:"Reason for manual override"}),s.jsx(_n,{id:"checkInReason",placeholder:"e.g., PSW called - no internet at location, phone issues, GPS not working...",value:C,onChange:z=>P(z.target.value)})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-amber-50 dark:bg-amber-950/30 rounded-lg border border-amber-200",children:[s.jsxs(oe,{htmlFor:"confirmCheckIn",className:"text-sm font-medium text-amber-800 dark:text-amber-200 cursor-pointer",children:["I confirm I want to manually sign in ",s.jsx("strong",{children:N.pswName.split(" ")[0]})]}),s.jsx(mn,{id:"confirmCheckIn",checked:T,onCheckedChange:O})]})]}),s.jsxs(yo,{className:"gap-2 sm:gap-0",children:[s.jsx(K,{variant:"outline",onClick:()=>{j(null),P(""),O(!1)},children:"Cancel"}),s.jsxs(K,{variant:"default",className:"bg-amber-600 hover:bg-amber-700",disabled:!T,onClick:()=>{N&&T&&(pfe(N.id,(e==null?void 0:e.email)||"admin@unknown.com",C||void 0)?(I({title:"Manual Check-In Complete",description:`${N.pswName} has been checked in manually. Geofencing bypassed.`}),A()):I({title:"Error",description:"Failed to check in. The shift may already be in progress or completed.",variant:"destructive"}),j(null),P(""),O(!1))},children:[s.jsx(rM,{className:"w-4 h-4 mr-2"}),"Manual Sign-In"]})]})]})}),s.jsx(hr,{open:!!w,onOpenChange:()=>{S(null),P(""),O(!1)},children:s.jsxs(or,{children:[s.jsxs(lr,{children:[s.jsxs(cr,{className:"flex items-center gap-2 text-amber-600",children:[s.jsx(nM,{className:"w-5 h-5"}),"Manual Sign-Out Override"]}),s.jsx(bo,{children:"This will sign out the PSW manually, bypassing the GPS geofencing requirement. A default care sheet will be created. Use only for technical issues."})]}),w&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-muted p-3 rounded-lg text-sm space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"PSW:"})," ",w.pswName]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Client:"})," ",w.clientName]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Checked In:"})," ",w.checkedInAt?$(w.checkedInAt):"N/A"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Scheduled End:"})," ",w.scheduledEnd]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"checkOutReason",children:"Reason for manual override"}),s.jsx(_n,{id:"checkOutReason",placeholder:"e.g., PSW called - phone died, no internet, app issues, forgot phone...",value:C,onChange:z=>P(z.target.value)})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/30 p-3 rounded-lg border border-blue-200 text-sm text-blue-800 dark:text-blue-200",children:[s.jsx("strong",{children:"Note:"}),' A basic care sheet will be auto-generated with "Admin manual sign-out" noted. The PSW should submit a proper care sheet later if possible.']}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-amber-50 dark:bg-amber-950/30 rounded-lg border border-amber-200",children:[s.jsxs(oe,{htmlFor:"confirmCheckOut",className:"text-sm font-medium text-amber-800 dark:text-amber-200 cursor-pointer",children:["I confirm I want to manually sign out ",s.jsx("strong",{children:w.pswName.split(" ")[0]})]}),s.jsx(mn,{id:"confirmCheckOut",checked:T,onCheckedChange:O})]})]}),s.jsxs(yo,{className:"gap-2 sm:gap-0",children:[s.jsx(K,{variant:"outline",onClick:()=>{S(null),P(""),O(!1)},children:"Cancel"}),s.jsxs(K,{variant:"default",className:"bg-amber-600 hover:bg-amber-700",disabled:!T,onClick:()=>{w&&T&&(gfe(w.id,(e==null?void 0:e.email)||"admin@unknown.com",C||void 0)?(I({title:"Manual Sign-Out Complete",description:`${w.pswName} has been signed out manually. Shift marked as completed.`}),A()):I({title:"Error",description:"Failed to sign out. The shift may already be completed.",variant:"destructive"}),S(null),P(""),O(!1))},children:[s.jsx(Wh,{className:"w-4 h-4 mr-2"}),"Manual Sign-Out"]})]})]})}),s.jsx(ibe,{open:!!E,onOpenChange:z=>!z&&D(null),bookingId:(E==null?void 0:E.bookingId)||"",pswName:E==null?void 0:E.pswName,clientName:E==null?void 0:E.clientName,clientAddress:E==null?void 0:E.patientAddress,clientCoords:null})]})},Ru={Brantford:{postalCode:"N3T 1K2",fullAddress:"100 Market St, Brantford, ON"},Peterborough:{postalCode:"K9H 2E4",fullAddress:"200 George St N, Peterborough, ON"},London:{postalCode:"N6A 3C9",fullAddress:"300 Dundas St, London, ON"},Hamilton:{postalCode:"L8P 1A1",fullAddress:"400 King St W, Hamilton, ON"},Ottawa:{postalCode:"K1P 5G3",fullAddress:"500 Rideau St, Ottawa, ON"},Toronto:{postalCode:"M5V 1A1",fullAddress:"600 Bay St, Toronto, ON"}},Pt="TEST_",pV=()=>{try{const e=Date.now(),t={id:`test-psw-${e}`,firstName:"Test",lastName:"Worker",email:`test.worker.${e}@testpsw.com`,phone:"416-555-0199",homePostalCode:"M5V 1A1",homeCity:"Toronto",languages:["en","fr"],vettingStatus:"approved",appliedAt:new Date().toISOString(),approvedAt:new Date().toISOString(),yearsExperience:"3-5",certifications:"PSW Certificate, First Aid, CPR",hasOwnTransport:"yes-car",availableShifts:"flexible",vettingNotes:`${Pt}Auto-generated test PSW`};return hi(t),console.log("[TEST] Created test PSW:",t.id,t.firstName,t.lastName),{success:!0,step:"Create Test PSW",details:`Created PSW: ${t.firstName} ${t.lastName} (${t.email})`,data:t}}catch(e){return console.error("[TEST] Failed to create test PSW:",e),{success:!1,step:"Create Test PSW",details:"Failed to create test PSW",error:e.message}}},lbe=()=>{const e=`
    <!DOCTYPE html>
    <html>
      <head><title>Hospital Discharge Summary</title></head>
      <body style="font-family: Arial, sans-serif; padding: 40px; max-width: 600px; margin: 0 auto;">
        <div style="border: 2px solid #0077B5; padding: 20px; border-radius: 8px;">
          <h1 style="color: #0077B5; margin-top: 0;"> MOCK - Hospital Discharge Summary</h1>
          <hr style="border-color: #e2e8f0;">
          
          <p><strong>Patient:</strong> Test Patient</p>
          <p><strong>Discharge Date:</strong> ${new Date().toLocaleDateString()}</p>
          <p><strong>Discharge Time:</strong> ${new Date().toLocaleTimeString()}</p>
          <p><strong>Attending Physician:</strong> Dr. Test Physician</p>
          <p><strong>Hospital:</strong> Test General Hospital</p>
          
          <h3 style="color: #0077B5;">Discharge Instructions:</h3>
          <ul>
            <li>Take all prescribed medications as directed</li>
            <li>Follow up with family doctor within 7 days</li>
            <li>Rest and stay well hydrated</li>
            <li>Call 911 if symptoms worsen</li>
            <li>Return to ER if experiencing severe pain, difficulty breathing, or fever over 38.5C</li>
          </ul>
          
          <h3 style="color: #0077B5;">Medications Prescribed:</h3>
          <ul>
            <li>Acetaminophen 500mg - Take 2 tablets every 6 hours as needed for pain</li>
            <li>Amoxicillin 500mg - Take 1 tablet 3 times daily for 7 days</li>
          </ul>
          
          <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 16px; margin: 20px 0;">
            <p style="margin: 0; color: #856404;">
              <strong> THIS IS A MOCK DOCUMENT FOR TESTING PURPOSES ONLY</strong>
            </p>
            <p style="margin: 8px 0 0 0; font-size: 12px; color: #856404;">
              Generated by PSA Direct E2E Testing System
            </p>
          </div>
          
          <p style="font-size: 12px; color: #718096; margin-top: 20px;">
            Document ID: TEST-${Date.now()}<br>
            Generated: ${new Date().toISOString()}
          </p>
        </div>
      </body>
    </html>
  `;return{base64:`data:text/html;base64,${btoa(e)}`,fileName:`mock-discharge-${Date.now()}.html`}},gV=async()=>{try{const e=new Date,r=new Date(e.getTime()+24*60*60*1e3).toISOString().split("T")[0],n=Date.now(),a=[{paymentStatus:"paid",serviceType:["Personal Care","Companionship"],date:r,startTime:"09:00",endTime:"11:00",status:"pending",hours:2,hourlyRate:55,subtotal:110,surgeAmount:0,total:110,isAsap:!1,wasRefunded:!1,orderingClient:{name:"Test Client Standard",address:"123 Test St, Toronto, ON M5V 1A1",postalCode:"M5V 1A1",phone:"416-555-1001",email:`test.standard.${n}@test.com`,isNewAccount:!0},patient:{name:"Patient Standard",address:"123 Test St, Toronto, ON M5V 1A1",postalCode:"M5V 1A1",relationship:"Parent",preferredLanguages:["en"]},pswAssigned:null,specialNotes:`${Pt}Standard home care test booking`,emailNotifications:{confirmationSent:!1,reminderSent:!1},adminNotifications:{notified:!1}},{paymentStatus:"paid",serviceType:["Hospital Pick-up","Escort Services"],date:r,startTime:"11:00",endTime:"14:00",status:"pending",hours:3,hourlyRate:65,subtotal:195,surgeAmount:0,total:195,isAsap:!1,wasRefunded:!1,orderingClient:{name:"Test Client Hospital",address:"456 Hospital Ave, Toronto, ON M5V 2B2",postalCode:"M5V 2B2",phone:"416-555-1002",email:`test.hospital.${n}@test.com`,isNewAccount:!0},patient:{name:"Patient Hospital",address:"456 Hospital Ave, Toronto, ON M5V 2B2",postalCode:"M5V 2B2",relationship:"Spouse",preferredLanguages:["en"]},pswAssigned:null,specialNotes:`${Pt}Hospital visit test booking`,isTransportBooking:!0,pickupAddress:"Toronto General Hospital",pickupPostalCode:"M5G 2C4",dropoffAddress:"456 Hospital Ave, Toronto, ON M5V 2B2",dropoffPostalCode:"M5V 2B2",emailNotifications:{confirmationSent:!1,reminderSent:!1},adminNotifications:{notified:!1}},{paymentStatus:"paid",serviceType:["Doctor Visit Escort","Medication Pickup"],date:r,startTime:"14:00",endTime:"15:30",status:"pending",hours:1.5,hourlyRate:60,subtotal:90,surgeAmount:0,total:90,isAsap:!1,wasRefunded:!1,orderingClient:{name:"Test Client Doctor",address:"789 Medical Dr, Toronto, ON M5V 3C3",postalCode:"M5V 3C3",phone:"416-555-1003",email:`test.doctor.${n}@test.com`,isNewAccount:!0},patient:{name:"Patient Doctor",address:"789 Medical Dr, Toronto, ON M5V 3C3",postalCode:"M5V 3C3",relationship:"Child",preferredLanguages:["en"]},pswAssigned:null,specialNotes:`${Pt}Doctor visit test booking`,isTransportBooking:!0,emailNotifications:{confirmationSent:!1,reminderSent:!1},adminNotifications:{notified:!1}}],i=[];for(const o of a){const l=await UE(o);i.push(l)}return console.log("[TEST] Created test bookings:",i.map(o=>o.id)),{success:!0,step:"Create Test Bookings",details:`Created ${i.length} bookings (Standard, Hospital, Doctor)`,data:i}}catch(e){return console.error("[TEST] Failed to create test bookings:",e),{success:!1,step:"Create Test Bookings",details:"Failed to create test bookings",error:e.message}}},cbe=async(e,t,r,n=2)=>{try{console.log("[TEST] Claiming shift:",e),Mz(e,t,r);const a={lat:43.6532,lng:-79.3832};console.log("[TEST] Checking in to shift:",e),PC(e,a);const i=qd(e);if(!i)throw new Error("Shift not found after check-in");const o={moodOnArrival:"calm and relaxed",moodOnDeparture:"happy and comfortable",tasksCompleted:i.services||["Personal Care"],observations:`${Pt}Simulated shift completion - ${n} hours worked`,pswFirstName:r.split(" ")[0]||"Test",officeNumber:Ea},l=`test.client.${Date.now()}@test.com`;console.log("[TEST] Signing out from shift:",e),Iz(e,o,l);const c=qd(e),d=ij((c==null?void 0:c.services)||[]);return console.log("[TEST] Shift completed:",{shiftId:e,status:c==null?void 0:c.status,shiftType:d,hoursWorked:n}),{success:!0,step:`Complete Shift ${e}`,details:`Shift completed: ${d} type, ${n} hours`,data:{shift:c,shiftType:d,hoursWorked:n}}}catch(a){return console.error("[TEST] Failed to complete shift cycle:",e,a),{success:!1,step:`Complete Shift ${e}`,details:"Failed to complete shift cycle",error:a.message}}},xV=()=>gs().filter(t=>{var r,n;return((n=(r=t.careSheet)==null?void 0:r.observations)==null?void 0:n.includes(Pt))||t.status==="available"}),dbe=e=>{const t=sf();let r=0,n=0,a=0,i=0;return e.forEach(o=>{if(o.status!=="completed")return;const l=ij(o.services||[]),c=o.scheduledStart.split(":").map(Number),d=o.scheduledEnd.split(":").map(Number),h=d[0]+d[1]/60-(c[0]+c[1]/60);switch(i+=h,l){case"hospital":n+=h*t.hospitalVisit;break;case"doctor":a+=h*t.doctorVisit;break;default:r+=h*t.standardHomeCare}}),{standardPay:r,hospitalPay:n,doctorPay:a,totalPay:r+n+a,totalHours:i}},ube=async()=>{console.log("[TEST] ====== Starting Full E2E Test Scenario ======");const e=pV(),t=e.data,r=(t==null?void 0:t.id)||`test-psw-fallback-${Date.now()}`,n=t?`${t.firstName} ${t.lastName}`:"Test Worker";console.log("[TEST] Using PSW:",{id:r,name:n});const a=await gV(),i=a.data,o={success:a.success,step:"Create Test Clients",details:i?`Created ${i.length} test clients: ${i.map(m=>m.orderingClient.name).join(", ")}`:"No clients created",data:i==null?void 0:i.map(m=>({name:m.orderingClient.name,email:m.orderingClient.email,address:m.orderingClient.address})),timestamp:new Date().toISOString()};await new Promise(m=>setTimeout(m,500));const l=xV().filter(m=>m.status==="available");console.log("[TEST] Found available test shifts:",l.length);const c=[];for(const m of l){const p=m.scheduledStart.split(":").map(Number),y=m.scheduledEnd.split(":").map(Number),v=y[0]+y[1]/60-(p[0]+p[1]/60),b=await cbe(m.id,r,n,v);c.push(b),await new Promise(N=>setTimeout(N,100))}const d=gs().filter(m=>{var p,y;return m.status==="completed"&&(((y=(p=m.careSheet)==null?void 0:p.observations)==null?void 0:y.includes(Pt))||m.pswId===r)}),h=dbe(d);console.log("[TEST] ====== E2E Test Scenario Complete ======"),console.log("[TEST] Expected Payroll:",h),console.log("[TEST] Shifts completed by PSW:",n,"| Count:",d.length);const f=e.success&&a.success&&c.every(m=>m.success);return{pswCreated:e,clientsCreated:o,bookingsCreated:a,shiftsCompleted:c,payrollExpected:h,allPassed:f}},hbe=async e=>{try{const{data:t,error:r}=await de.from("payroll_entries").select("*").in("shift_id",e);if(r)return console.error("[TEST] Failed to fetch payroll entries:",r),{success:!1,entriesFound:0,totalHours:0,totalPay:0,details:[]};const n=t||[],a=n.reduce((o,l)=>o+l.hours_worked,0),i=n.reduce((o,l)=>o+l.total_owed,0);return{success:n.length>0,entriesFound:n.length,totalHours:a,totalPay:i,details:n.map(o=>({shiftId:o.shift_id,pswName:o.psw_name,taskType:o.task_name,hoursWorked:o.hours_worked,payRate:o.hourly_rate,totalOwed:o.total_owed}))}}catch(t){return console.error("[TEST] Error verifying payroll:",t),{success:!1,entriesFound:0,totalHours:0,totalPay:0,details:[]}}},fbe=async()=>{console.log("[TEST] Clearing all test data...");try{const e=JSON.parse(localStorage.getItem("pswdirect_shifts")||"[]"),t=e.filter(m=>{var p,y;return(y=(p=m.careSheet)==null?void 0:p.observations)==null?void 0:y.includes(Pt)}).map(m=>m.id),r=JSON.parse(localStorage.getItem("pswdirect_psw_profiles")||"[]"),n=r.filter(m=>{var p;return(p=m.vettingNotes)==null?void 0:p.includes(Pt)}).length,a=r.filter(m=>{var p;return!((p=m.vettingNotes)!=null&&p.includes(Pt))});localStorage.setItem("pswdirect_psw_profiles",JSON.stringify(a));const i=JSON.parse(localStorage.getItem("pswdirect_bookings")||"[]"),o=i.filter(m=>{var p;return(p=m.specialNotes)==null?void 0:p.includes(Pt)}).length,l=i.filter(m=>{var p;return!((p=m.specialNotes)!=null&&p.includes(Pt))});localStorage.setItem("pswdirect_bookings",JSON.stringify(l));const c=e.filter(m=>{var p,y;return(y=(p=m.careSheet)==null?void 0:p.observations)==null?void 0:y.includes(Pt)}).length,d=e.filter(m=>{var p,y;return!((y=(p=m.careSheet)==null?void 0:p.observations)!=null&&y.includes(Pt))});localStorage.setItem("pswdirect_shifts",JSON.stringify(d));let h=0;if(t.length>0){const{error:m,count:p}=await de.from("payroll_entries").delete().in("shift_id",t);m?console.warn("[TEST] Failed to clear Supabase payroll:",m):h=p||t.length}const f=`Cleared: ${n} PSWs, ${o} bookings, ${c} shifts, ${h} payroll entries`;return console.log("[TEST]",f),{success:!0,details:f}}catch(e){return console.error("[TEST] Error clearing test data:",e),{success:!1,details:e.message}}},Ml=()=>{const e=JSON.parse(localStorage.getItem("pswdirect_psw_profiles")||"[]"),t=JSON.parse(localStorage.getItem("pswdirect_bookings")||"[]"),r=gs(),n=e.filter(o=>{var l;return(l=o.vettingNotes)==null?void 0:l.includes(Pt)}),a=t.filter(o=>{var l;return(l=o.specialNotes)==null?void 0:l.includes(Pt)}),i=r.filter(o=>{var l,c;return(c=(l=o.careSheet)==null?void 0:l.observations)==null?void 0:c.includes(Pt)});return{totalPSWs:e.length,testPSWs:n.length,approvedPSWs:e.filter(o=>o.vettingStatus==="approved").length,pendingPSWs:e.filter(o=>o.vettingStatus==="pending").length,totalBookings:t.length,testBookings:a.length,totalShifts:r.length,testShifts:i.length,availableShifts:r.filter(o=>o.status==="available").length,claimedShifts:r.filter(o=>o.status==="claimed").length,activeShifts:r.filter(o=>o.status==="checked-in").length,completedShifts:r.filter(o=>o.status==="completed").length}},mbe=async()=>{var e,t,r,n,a,i,o,l,c,d;console.log("[DEMO] Creating comprehensive demo payroll data in Supabase...");try{const h=Date.now(),m=new Date().toISOString().split("T")[0],p=[{first_name:"Sarah",last_name:"Johnson",email:`sarah.johnson.${h}@testpsw.com`,phone:"416-555-0101",home_postal_code:"M5V 1A1",home_city:"Toronto",languages:["en","fr"],vetting_status:"approved",years_experience:"5+",certifications:"PSW Certificate, First Aid, CPR, Dementia Care",has_own_transport:"yes-car",available_shifts:"flexible",vetting_notes:`${Pt}Demo PSW for payroll testing`,approved_at:new Date().toISOString()},{first_name:"Michael",last_name:"Chen",email:`michael.chen.${h}@testpsw.com`,phone:"416-555-0102",home_postal_code:"L4C 3B8",home_city:"Barrie",languages:["en","zh"],vetting_status:"approved",years_experience:"3-5",certifications:"PSW Certificate, First Aid",has_own_transport:"yes-car",available_shifts:"weekdays",vetting_notes:`${Pt}Demo PSW for payroll testing`,approved_at:new Date().toISOString()},{first_name:"Priya",last_name:"Patel",email:`priya.patel.${h}@testpsw.com`,phone:"416-555-0103",home_postal_code:"L6Y 4M5",home_city:"Brampton",languages:["en","hi","gu"],vetting_status:"approved",years_experience:"1-3",certifications:"PSW Certificate, First Aid, CPR",has_own_transport:"no",available_shifts:"weekends",vetting_notes:`${Pt}Demo PSW for payroll testing`,approved_at:new Date().toISOString()}],{data:y,error:v}=await de.from("psw_profiles").insert(p).select();if(v)throw console.error("[DEMO] Failed to create PSW profiles:",v),new Error(`PSW creation failed: ${v.message}`);if(console.log("[DEMO] Created PSW profiles:",y==null?void 0:y.length),y&&y.length>0){const T=y.map((E,D)=>({psw_id:E.id,institution_number:"00"+(D+1),transit_number:"1234"+D,account_number:"999888"+(7770+D)})),{error:O}=await de.from("psw_banking").insert(T);O?console.warn("[DEMO] Banking insert warning:",O):console.log("[DEMO] Created banking records for PSWs")}const b=[{client_name:"Margaret Wilson",client_email:`margaret.${h}@test.com`,client_phone:"416-555-2001",client_address:"100 King St W, Toronto, ON",client_postal_code:"M5V 1A1",patient_name:"Robert Wilson",patient_address:"100 King St W, Toronto, ON",patient_postal_code:"M5V 1A1",patient_relationship:"Spouse",service_type:["Personal Care","Companionship"],scheduled_date:m,start_time:"09:00",end_time:"12:00",hours:3,hourly_rate:55,subtotal:165,surge_amount:0,total:165,status:"completed",payment_status:"paid",booking_code:`TEST-STD-${h}-1`,special_notes:`${Pt}Standard home care shift`,psw_assigned:(e=y==null?void 0:y[0])==null?void 0:e.id,psw_first_name:"Sarah",care_sheet:{moodOnArrival:"calm",moodOnDeparture:"happy",tasksCompleted:["Personal Care","Companionship"],observations:`${Pt}Client was in good spirits`,pswFirstName:"Sarah"},care_sheet_submitted_at:new Date().toISOString(),care_sheet_psw_name:"Sarah"},{client_name:"David Thompson",client_email:`david.${h}@test.com`,client_phone:"416-555-2002",client_address:"200 Bay St, Toronto, ON",client_postal_code:"M5J 2J5",patient_name:"Eleanor Thompson",patient_address:"Toronto General Hospital",patient_postal_code:"M5G 2C4",patient_relationship:"Mother",service_type:["Hospital Pick-up","Escort Services"],scheduled_date:m,start_time:"10:00",end_time:"14:00",hours:4,hourly_rate:65,subtotal:260,surge_amount:0,total:260,status:"completed",payment_status:"paid",booking_code:`TEST-HSP-${h}-1`,special_notes:`${Pt}Hospital discharge pickup`,is_transport_booking:!0,pickup_address:"Toronto General Hospital",pickup_postal_code:"M5G 2C4",dropoff_address:"200 Bay St, Toronto, ON",psw_assigned:(t=y==null?void 0:y[0])==null?void 0:t.id,psw_first_name:"Sarah",care_sheet:{moodOnArrival:"anxious",moodOnDeparture:"relieved",tasksCompleted:["Hospital Pick-up","Escort Services"],observations:`${Pt}Patient discharged successfully`,pswFirstName:"Sarah",hospitalDischarge:{dischargeTime:"11:00",medicationsReceived:!0,followUpAppointment:"Next Tuesday 2PM"}},care_sheet_submitted_at:new Date().toISOString(),care_sheet_psw_name:"Sarah"},{client_name:"Linda Brown",client_email:`linda.${h}@test.com`,client_phone:"705-555-3001",client_address:"50 Dunlop St E, Barrie, ON",client_postal_code:"L4M 1A1",patient_name:"George Brown",patient_address:"50 Dunlop St E, Barrie, ON",patient_postal_code:"L4M 1A1",patient_relationship:"Husband",service_type:["Doctor Visit Escort","Medication Pickup"],scheduled_date:m,start_time:"13:00",end_time:"15:00",hours:2,hourly_rate:60,subtotal:120,surge_amount:0,total:120,status:"completed",payment_status:"paid",booking_code:`TEST-DOC-${h}-1`,special_notes:`${Pt}Doctor visit escort`,is_transport_booking:!0,psw_assigned:(r=y==null?void 0:y[1])==null?void 0:r.id,psw_first_name:"Michael",care_sheet:{moodOnArrival:"nervous",moodOnDeparture:"calm",tasksCompleted:["Doctor Visit Escort","Medication Pickup"],observations:`${Pt}Routine checkup completed`,pswFirstName:"Michael"},care_sheet_submitted_at:new Date().toISOString(),care_sheet_psw_name:"Michael"},{client_name:"Susan Miller",client_email:`susan.${h}@test.com`,client_phone:"705-555-3002",client_address:"123 Bayfield St, Barrie, ON",client_postal_code:"L4M 3B3",patient_name:"James Miller",patient_address:"123 Bayfield St, Barrie, ON",patient_postal_code:"L4M 3B3",patient_relationship:"Father",service_type:["Personal Care","Meal Preparation"],scheduled_date:m,start_time:"08:00",end_time:"11:00",hours:3,hourly_rate:55,subtotal:165,surge_amount:0,total:165,status:"completed",payment_status:"paid",booking_code:`TEST-STD-${h}-2`,special_notes:`${Pt}Morning care routine`,psw_assigned:(n=y==null?void 0:y[1])==null?void 0:n.id,psw_first_name:"Michael",care_sheet:{moodOnArrival:"sleepy",moodOnDeparture:"energetic",tasksCompleted:["Personal Care","Meal Preparation"],observations:`${Pt}Prepared breakfast and assisted with morning routine`,pswFirstName:"Michael"},care_sheet_submitted_at:new Date().toISOString(),care_sheet_psw_name:"Michael"},{client_name:"Karen Singh",client_email:`karen.${h}@test.com`,client_phone:"905-555-4001",client_address:"75 Main St N, Brampton, ON",client_postal_code:"L6X 1N1",patient_name:"Raj Singh",patient_address:"75 Main St N, Brampton, ON",patient_postal_code:"L6X 1N1",patient_relationship:"Grandfather",service_type:["Personal Care","Companionship","Light Housekeeping"],scheduled_date:m,start_time:"14:00",end_time:"18:00",hours:4,hourly_rate:55,subtotal:220,surge_amount:0,total:220,status:"completed",payment_status:"paid",booking_code:`TEST-STD-${h}-3`,special_notes:`${Pt}Afternoon care with light housekeeping`,psw_assigned:(a=y==null?void 0:y[2])==null?void 0:a.id,psw_first_name:"Priya",care_sheet:{moodOnArrival:"cheerful",moodOnDeparture:"content",tasksCompleted:["Personal Care","Companionship","Light Housekeeping"],observations:`${Pt}Enjoyed conversation in Hindi, tidied living room`,pswFirstName:"Priya"},care_sheet_submitted_at:new Date().toISOString(),care_sheet_psw_name:"Priya"}],{data:N,error:j}=await de.from("bookings").insert(b).select();if(j)throw console.error("[DEMO] Failed to create bookings:",j),new Error(`Booking creation failed: ${j.message}`);console.log("[DEMO] Created bookings:",N==null?void 0:N.length);const w=[{shift_id:`demo-shift-${h}-1`,psw_id:((i=y==null?void 0:y[0])==null?void 0:i.id)||"unknown",psw_name:"Sarah Johnson",task_name:"Standard Home Care: Personal Care, Companionship",hours_worked:3,hourly_rate:22,surcharge_applied:0,total_owed:66,scheduled_date:m,status:"pending"},{shift_id:`demo-shift-${h}-2`,psw_id:((o=y==null?void 0:y[0])==null?void 0:o.id)||"unknown",psw_name:"Sarah Johnson",task_name:"Hospital Pick-up: Hospital Pick-up, Escort Services",hours_worked:4,hourly_rate:28,surcharge_applied:0,total_owed:112,scheduled_date:m,status:"pending"},{shift_id:`demo-shift-${h}-3`,psw_id:((l=y==null?void 0:y[1])==null?void 0:l.id)||"unknown",psw_name:"Michael Chen",task_name:"Doctor Visit: Doctor Visit Escort, Medication Pickup",hours_worked:2,hourly_rate:25,surcharge_applied:0,total_owed:50,scheduled_date:m,status:"pending"},{shift_id:`demo-shift-${h}-4`,psw_id:((c=y==null?void 0:y[1])==null?void 0:c.id)||"unknown",psw_name:"Michael Chen",task_name:"Standard Home Care: Personal Care, Meal Preparation",hours_worked:3,hourly_rate:22,surcharge_applied:0,total_owed:66,scheduled_date:m,status:"pending"},{shift_id:`demo-shift-${h}-5`,psw_id:((d=y==null?void 0:y[2])==null?void 0:d.id)||"unknown",psw_name:"Priya Patel",task_name:"Standard Home Care: Personal Care, Companionship, Light Housekeeping",hours_worked:4.5,hourly_rate:22,surcharge_applied:11,total_owed:110,scheduled_date:m,status:"overtime_adjusted"}],{data:S,error:C}=await de.from("payroll_entries").insert(w).select();if(C)throw console.error("[DEMO] Failed to create payroll entries:",C),new Error(`Payroll creation failed: ${C.message}`);console.log("[DEMO] Created payroll entries:",S==null?void 0:S.length);const P=`Created ${(y==null?void 0:y.length)||0} PSWs, ${(N==null?void 0:N.length)||0} bookings, ${(S==null?void 0:S.length)||0} payroll entries (4 pending, 1 overtime)`;return console.log("[DEMO] Complete:",P),{success:!0,pswsCreated:(y==null?void 0:y.length)||0,bookingsCreated:(N==null?void 0:N.length)||0,payrollEntriesCreated:(S==null?void 0:S.length)||0,details:P}}catch(h){return console.error("[DEMO] Error creating demo data:",h),{success:!1,pswsCreated:0,bookingsCreated:0,payrollEntriesCreated:0,details:h.message}}},pbe=async()=>{console.log("[DEMO] Clearing demo data from Supabase...");try{const{error:e,count:t}=await de.from("payroll_entries").delete().like("shift_id","demo-shift-%");e&&console.warn("[DEMO] Payroll delete warning:",e);const{error:r,count:n}=await de.from("bookings").delete().like("special_notes",`${Pt}%`);r&&console.warn("[DEMO] Booking delete warning:",r);const{error:a,count:i}=await de.from("psw_profiles").delete().like("vetting_notes",`${Pt}%`);a&&console.warn("[DEMO] PSW delete warning:",a);const o="Cleared Supabase demo data";return console.log("[DEMO]",o),{success:!0,details:o}}catch(e){return console.error("[DEMO] Error clearing demo data:",e),{success:!1,details:e.message}}},gbe=async()=>{console.log("[MULTI-CITY TEST] Starting multi-city E2E test...");const e=Date.now(),r=new Date().toISOString().split("T")[0],n=["Brantford","Peterborough","London","Hamilton","Ottawa"];try{const a=[{first_name:"Jessica",last_name:"Adams",email:`jessica.adams.${e}@testpsw.com`,phone:"519-555-0101",home_postal_code:Ru.Brantford.postalCode,home_city:"Brantford",languages:["en"],vetting_status:"approved",years_experience:"3-5",certifications:"PSW Certificate, First Aid, CPR",has_own_transport:"yes-car",available_shifts:"flexible",vetting_notes:`${Pt}Multi-city test PSW - Brantford`,approved_at:new Date().toISOString()},{first_name:"David",last_name:"Wilson",email:`david.wilson.${e}@testpsw.com`,phone:"705-555-0102",home_postal_code:Ru.Peterborough.postalCode,home_city:"Peterborough",languages:["en","fr"],vetting_status:"approved",years_experience:"5+",certifications:"PSW Certificate, First Aid, CPR, Palliative Care",has_own_transport:"yes-car",available_shifts:"weekdays",vetting_notes:`${Pt}Multi-city test PSW - Peterborough`,approved_at:new Date().toISOString()},{first_name:"Emma",last_name:"Brown",email:`emma.brown.${e}@testpsw.com`,phone:"519-555-0103",home_postal_code:Ru.London.postalCode,home_city:"London",languages:["en"],vetting_status:"approved",years_experience:"1-3",certifications:"PSW Certificate, First Aid",has_own_transport:"no",available_shifts:"weekends",vetting_notes:`${Pt}Multi-city test PSW - London`,approved_at:new Date().toISOString()},{first_name:"Marcus",last_name:"Taylor",email:`marcus.taylor.${e}@testpsw.com`,phone:"905-555-0104",home_postal_code:Ru.Hamilton.postalCode,home_city:"Hamilton",languages:["en","es"],vetting_status:"approved",years_experience:"3-5",certifications:"PSW Certificate, First Aid, CPR, Dementia Care",has_own_transport:"yes-car",available_shifts:"flexible",vetting_notes:`${Pt}Multi-city test PSW - Hamilton`,approved_at:new Date().toISOString()},{first_name:"Aisha",last_name:"Khan",email:`aisha.khan.${e}@testpsw.com`,phone:"613-555-0105",home_postal_code:Ru.Ottawa.postalCode,home_city:"Ottawa",languages:["en","fr","ar"],vetting_status:"approved",years_experience:"5+",certifications:"PSW Certificate, First Aid, CPR, Mental Health",has_own_transport:"yes-car",available_shifts:"flexible",vetting_notes:`${Pt}Multi-city test PSW - Ottawa`,approved_at:new Date().toISOString()}],{data:i,error:o}=await de.from("psw_profiles").insert(a).select();if(o)throw console.error("[MULTI-CITY TEST] PSW creation failed:",o),new Error(`PSW creation failed: ${o.message}`);console.log("[MULTI-CITY TEST] Created PSWs:",i==null?void 0:i.length);const l=(i||[]).map((y,v)=>{const b=n[v],N=Ru[b];return{client_name:`Test Client ${b}`,client_email:`testclient.${b.toLowerCase()}.${e}@test.com`,client_phone:`555-${1e3+v}`,client_address:N.fullAddress,client_postal_code:N.postalCode,patient_name:`Test Patient ${b}`,patient_address:N.fullAddress,patient_postal_code:N.postalCode,patient_relationship:"Self",service_type:v%2===0?["Personal Care","Companionship"]:["Doctor Visit Escort"],scheduled_date:r,start_time:`${9+v}:00`,end_time:`${11+v}:00`,hours:2,hourly_rate:v%2===0?55:60,subtotal:v%2===0?110:120,surge_amount:0,total:v%2===0?110:120,status:"completed",payment_status:"paid",booking_code:`MCITY-${b.substring(0,3).toUpperCase()}-${e}`,special_notes:`${Pt}Multi-city test booking - ${b}`,psw_assigned:y.id,psw_first_name:y.first_name,care_sheet:{moodOnArrival:"calm",moodOnDeparture:"happy",tasksCompleted:v%2===0?["Personal Care","Companionship"]:["Doctor Visit Escort"],observations:`${Pt}Multi-city test completed successfully in ${b}`,pswFirstName:y.first_name},care_sheet_submitted_at:new Date().toISOString(),care_sheet_psw_name:y.first_name}}),{data:c,error:d}=await de.from("bookings").insert(l).select();if(d)throw console.error("[MULTI-CITY TEST] Booking creation failed:",d),new Error(`Booking creation failed: ${d.message}`);console.log("[MULTI-CITY TEST] Created bookings:",c==null?void 0:c.length);const h=(i||[]).map((y,v)=>{const b=n[v],N=v%2===0,j=2,w=N?22:25;return{shift_id:`mcity-shift-${e}-${v}`,psw_id:y.id,psw_name:`${y.first_name} ${y.last_name}`,task_name:N?"Standard Home Care":"Doctor Visit Escort",hours_worked:j,hourly_rate:w,surcharge_applied:0,total_owed:j*w,scheduled_date:r,status:"pending"}}),{data:f,error:m}=await de.from("payroll_entries").insert(h).select();if(m)throw console.error("[MULTI-CITY TEST] Payroll creation failed:",m),new Error(`Payroll creation failed: ${m.message}`);console.log("[MULTI-CITY TEST] Created payroll entries:",f==null?void 0:f.length);const p=`Created ${(i==null?void 0:i.length)||0} PSWs, ${(c==null?void 0:c.length)||0} bookings, ${(f==null?void 0:f.length)||0} payroll entries across ${n.join(", ")}`;return{success:!0,pswsCreated:(i==null?void 0:i.length)||0,bookingsCreated:(c==null?void 0:c.length)||0,payrollEntriesCreated:(f==null?void 0:f.length)||0,cities:n,details:p}}catch(a){return console.error("[MULTI-CITY TEST] Error:",a),{success:!1,pswsCreated:0,bookingsCreated:0,payrollEntriesCreated:0,cities:[],details:a.message}}},xbe=()=>{const[e,t]=x.useState(!1),[r,n]=x.useState(!1),[a,i]=x.useState(!1),[o,l]=x.useState(!1),[c,d]=x.useState(null),[h,f]=x.useState(null),[m,p]=x.useState(null),[y,v]=x.useState(Ml()),[b,N]=x.useState([]);x.useEffect(()=>{const I=setInterval(()=>{v(Ml())},2e3);return()=>clearInterval(I)},[]);const j=I=>{const A=new Date().toLocaleTimeString();N(V=>[...V,`[${A}] ${I}`])},w=()=>{j("Creating test PSW...");const I=pV();I.success?(Z.success("Test PSW created successfully"),j(` ${I.details}`)):(Z.error("Failed to create test PSW"),j(` Error: ${I.error}`)),v(Ml())},S=async()=>{j("Creating test bookings...");const I=await gV();I.success?(Z.success("Test bookings created successfully"),j(` ${I.details}`)):(Z.error("Failed to create test bookings"),j(` Error: ${I.error}`)),v(Ml())},C=async()=>{t(!0),d(null),p(null),N([]),j("====== Starting Full E2E Test ======");try{j("Step 1: Creating test PSW profile..."),j("Step 2: Creating test clients and bookings...");const I=await ube();j(` PSW Created: ${I.pswCreated.details}`),j(` Clients Created: ${I.clientsCreated.details}`),j(` Bookings Created: ${I.bookingsCreated.details}`),I.shiftsCompleted.forEach((V,U)=>{j(`Shift ${U+1}: ${V.success?"":""} ${V.details}`)}),j("====== Expected Payroll Calculation ======");const A=sf();j(`Standard Home Care: $${A.standardHomeCare}/hr  $${I.payrollExpected.standardPay.toFixed(2)}`),j(`Hospital Visit: $${A.hospitalVisit}/hr  $${I.payrollExpected.hospitalPay.toFixed(2)}`),j(`Doctor Visit: $${A.doctorVisit}/hr  $${I.payrollExpected.doctorPay.toFixed(2)}`),j(`TOTAL: ${I.payrollExpected.totalHours.toFixed(1)} hours = $${I.payrollExpected.totalPay.toFixed(2)}`),d(I),I.allPassed?(Z.success("All E2E tests passed!"),j("====== ALL TESTS PASSED ======")):(Z.warning("Some tests failed - check logs"),j("====== SOME TESTS FAILED ======"))}catch(I){Z.error("Test execution failed"),j(`ERROR: ${I.message}`)}finally{t(!1),v(Ml())}},P=async()=>{j("Syncing completed shifts to payroll database...");try{const I=await m0e();if(I.success){Z.success(`Synced ${I.count} payroll entries`),j(` Synced ${I.count} entries to database`);const V=xV().filter(U=>U.status==="completed").map(U=>U.id);if(V.length>0){j("Verifying payroll entries in database...");const U=await hbe(V);p(U),j(` Found ${U.entriesFound} entries: ${U.totalHours.toFixed(1)} hrs = $${U.totalPay.toFixed(2)}`)}}else Z.error("Payroll sync failed"),j(` Sync failed: ${I.error}`)}catch(I){Z.error("Payroll sync error"),j(` Error: ${I.message}`)}},T=async()=>{j("Clearing all test data (localStorage + Supabase)...");const I=await fbe(),A=await pbe();d(null),p(null),v(Ml()),I.success&&A.success?(Z.success("All test data cleared"),j(` ${I.details}`),j(` ${A.details}`)):(Z.warning("Partial cleanup"),j(` ${I.details}`),j(` ${A.details}`))},O=async()=>{n(!0),j("====== Creating Demo Payroll Data ======"),j("Inserting PSW profiles, bookings, and payroll entries into database...");try{const I=await mbe();I.success?(Z.success(`Created ${I.payrollEntriesCreated} payroll entries awaiting payment`),j(` ${I.details}`),j("====== Demo Data Created Successfully ======"),j("Go to 'Payroll Dashboard' or 'Payroll Approval' tabs to see pending payments!")):(Z.error("Failed to create demo data"),j(` Error: ${I.details}`))}catch(I){Z.error("Demo data creation failed"),j(` Error: ${I.message}`)}finally{n(!1),v(Ml())}},E=async()=>{i(!0),f(null),j("====== Starting Multi-City E2E Test ======"),j("Creating PSWs and bookings across Ontario cities: Brantford, Peterborough, London, Hamilton, Ottawa...");try{const I=await gbe();f(I),I.success?(Z.success(`Multi-city test completed! Created data in ${I.cities.length} cities`),j(` Created ${I.pswsCreated} PSWs across cities`),j(` Created ${I.bookingsCreated} completed bookings`),j(` Created ${I.payrollEntriesCreated} payroll entries`),j(` Cities: ${I.cities.join(", ")}`),j("====== Multi-City Test Complete ======"),j("Go to 'Orders/Calendar' tab  PSW Order Completions to test city filters!")):(Z.error("Multi-city test failed"),j(` Error: ${I.details}`))}catch(I){Z.error("Multi-city test error"),j(` Error: ${I.message}`)}finally{i(!1),v(Ml())}},D=async()=>{l(!0),j("====== Hospital Discharge E2E Test ======"),j("Testing hospital discharge email with mock attachment...");try{const I=lbe();j(" Created mock discharge document"),j("Sending hospital discharge email with attachment..."),await FE("tiffarshi@gmail.com","Test Client","Test PSW",void 0,new Date().toLocaleDateString(),["Hospital Pick-up","Escort Services","Personal Care"],"Patient was safely discharged from hospital and transported home. Patient is stable and comfortable.",I.base64,I.fileName)?(Z.success("Hospital discharge email sent successfully!"),j(" Hospital discharge email sent with attachment"),j(" Check the Email History tab to verify the email was logged"),j("====== Discharge Test Complete ======")):(Z.error("Failed to send hospital discharge email"),j(" Email sending failed - check console for errors"))}catch(I){Z.error("Hospital discharge test failed"),j(` Error: ${I.message}`)}finally{l(!1)}};return s.jsx("div",{className:"space-y-6",children:s.jsxs(J,{children:[s.jsxs(ke,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(cl,{className:"w-5 h-5"}),"E2E Testing Panel"]}),s.jsx(Ge,{children:"Test the complete PSW intake  Job Completion  Payroll flow"})]}),s.jsxs(Q,{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx(J,{className:"bg-muted/50",children:s.jsxs(Q,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pn,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"PSWs"})]}),s.jsxs("div",{className:"mt-1 flex items-baseline gap-2",children:[s.jsx("span",{className:"text-2xl font-bold",children:y.totalPSWs}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",y.approvedPSWs," approved, ",y.pendingPSWs," pending)"]})]})]})}),s.jsx(J,{className:"bg-muted/50",children:s.jsxs(Q,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Lt,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Bookings"})]}),s.jsxs("div",{className:"mt-1 flex items-baseline gap-2",children:[s.jsx("span",{className:"text-2xl font-bold",children:y.totalBookings}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",y.testBookings," test)"]})]})]})}),s.jsx(J,{className:"bg-muted/50",children:s.jsxs(Q,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Gp,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Shifts"})]}),s.jsxs("div",{className:"mt-1 flex items-baseline gap-2",children:[s.jsx("span",{className:"text-2xl font-bold",children:y.totalShifts}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",y.completedShifts," completed)"]})]})]})}),s.jsx(J,{className:"bg-muted/50",children:s.jsxs(Q,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qe,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Shift Status"})]}),s.jsxs("div",{className:"mt-1 text-xs space-y-1",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Available:"}),s.jsx(ne,{variant:"outline",children:y.availableShifts})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Active:"}),s.jsx(ne,{variant:"secondary",children:y.activeShifts})]})]})]})})]}),s.jsx(ja,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium",children:"Test Actions"}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsxs(K,{onClick:w,variant:"outline",className:"gap-2",children:[s.jsx(kk,{className:"w-4 h-4"}),"Create Test PSW"]}),s.jsxs(K,{onClick:S,variant:"outline",className:"gap-2",children:[s.jsx(Lt,{className:"w-4 h-4"}),"Create Test Bookings"]}),s.jsxs(K,{onClick:C,disabled:e,variant:"brand",className:"gap-2",children:[e?s.jsx(Nr,{className:"w-4 h-4 animate-spin"}):s.jsx(cl,{className:"w-4 h-4"}),e?"Running...":"Run Full E2E Test"]}),s.jsx(ja,{orientation:"vertical",className:"h-8"}),s.jsxs(K,{onClick:E,disabled:a,variant:"default",className:"gap-2 bg-blue-600 hover:bg-blue-700",children:[a?s.jsx(Nr,{className:"w-4 h-4 animate-spin"}):s.jsx(gee,{className:"w-4 h-4"}),a?"Running...":"Run Multi-City E2E Test"]}),s.jsxs(K,{onClick:D,disabled:o,variant:"default",className:"gap-2 bg-amber-600 hover:bg-amber-700",children:[o?s.jsx(Nr,{className:"w-4 h-4 animate-spin"}):s.jsx(Ld,{className:"w-4 h-4"}),o?"Testing...":"Test Hospital Discharge Email"]}),s.jsxs(K,{onClick:O,disabled:r,variant:"default",className:"gap-2 bg-green-600 hover:bg-green-700",children:[r?s.jsx(Nr,{className:"w-4 h-4 animate-spin"}):s.jsx(JF,{className:"w-4 h-4"}),r?"Creating...":"Create Demo Payroll Data"]}),s.jsxs(K,{onClick:P,variant:"secondary",className:"gap-2",children:[s.jsx(hs,{className:"w-4 h-4"}),"Sync to Payroll DB"]}),s.jsxs(K,{onClick:T,variant:"destructive",className:"gap-2",children:[s.jsx(yc,{className:"w-4 h-4"}),"Clear Test Data"]})]})]}),s.jsx(ja,{}),c&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[c.allPassed?s.jsx(Kt,{className:"w-5 h-5 text-green-500"}):s.jsx(At,{className:"w-5 h-5 text-yellow-500"}),"Test Results"]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[s.jsxs(J,{children:[s.jsx(ke,{className:"pb-2",children:s.jsx(Ee,{className:"text-sm",children:"Execution Summary"})}),s.jsxs(Q,{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"PSW Creation:"}),s.jsx(ne,{variant:c.pswCreated.success?"default":"destructive",children:c.pswCreated.success?"Passed":"Failed"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"Clients Created:"}),s.jsx(ne,{variant:c.clientsCreated.success?"default":"destructive",children:c.clientsCreated.success?"Passed":"Failed"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"Bookings Creation:"}),s.jsx(ne,{variant:c.bookingsCreated.success?"default":"destructive",children:c.bookingsCreated.success?"Passed":"Failed"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"Shifts Completed:"}),s.jsxs(ne,{variant:"secondary",children:[c.shiftsCompleted.filter(I=>I.success).length," / ",c.shiftsCompleted.length]})]})]})]}),s.jsxs(J,{children:[s.jsx(ke,{className:"pb-2",children:s.jsx(Ee,{className:"text-sm",children:"Expected Payroll"})}),s.jsxs(Q,{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Standard Home Care:"}),s.jsxs("span",{className:"font-mono",children:["$",c.payrollExpected.standardPay.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Hospital Visit:"}),s.jsxs("span",{className:"font-mono",children:["$",c.payrollExpected.hospitalPay.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Doctor Visit:"}),s.jsxs("span",{className:"font-mono",children:["$",c.payrollExpected.doctorPay.toFixed(2)]})]}),s.jsx(ja,{}),s.jsxs("div",{className:"flex justify-between font-bold",children:[s.jsxs("span",{children:["Total (",c.payrollExpected.totalHours.toFixed(1)," hrs):"]}),s.jsxs("span",{className:"font-mono text-primary",children:["$",c.payrollExpected.totalPay.toFixed(2)]})]})]})]}),s.jsxs(J,{className:m?"":"opacity-50",children:[s.jsx(ke,{className:"pb-2",children:s.jsxs(Ee,{className:"text-sm flex items-center gap-2",children:["Database Verification",(m==null?void 0:m.success)&&s.jsx(Kt,{className:"w-4 h-4 text-green-500"})]})}),s.jsx(Q,{className:"space-y-2 text-sm",children:m?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Entries Found:"}),s.jsx(ne,{children:m.entriesFound})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Total Hours:"}),s.jsx("span",{className:"font-mono",children:m.totalHours.toFixed(2)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Total Pay:"}),s.jsxs("span",{className:"font-mono",children:["$",m.totalPay.toFixed(2)]})]}),s.jsx(ja,{}),s.jsx("div",{className:"text-xs text-muted-foreground",children:m.details.map((I,A)=>s.jsxs("div",{className:"truncate",children:[I.taskType.split(":")[0],": $",I.totalOwed.toFixed(2)]},A))})]}):s.jsx("p",{className:"text-muted-foreground text-xs",children:'Click "Sync to Payroll DB" after test to verify database entries'})})]})]})]}),s.jsx(ja,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-medium",children:"Execution Log"}),s.jsx(J,{className:"bg-muted/30",children:s.jsx(Ps,{className:"h-[200px]",children:s.jsx(Q,{className:"p-4",children:b.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"No logs yet. Run a test to see execution details."}):s.jsx("div",{className:"font-mono text-xs space-y-1",children:b.map((I,A)=>s.jsx("div",{className:`${I.includes("")?"text-green-600":I.includes("")?"text-red-600":I.includes("======")?"text-primary font-bold":"text-muted-foreground"}`,children:I},A))})})})})]})]})]})})};var vV=["PageUp","PageDown"],yV=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],bV={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},em="Slider",[LC,vbe,ybe]=Rf(em),[wV,Tze]=sn(em,[ybe]),[bbe,fj]=wV(em),jV=x.forwardRef((e,t)=>{const{name:r,min:n=0,max:a=100,step:i=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[n],value:h,onValueChange:f=()=>{},onValueCommit:m=()=>{},inverted:p=!1,form:y,...v}=e,b=x.useRef(new Set),N=x.useRef(0),w=o==="horizontal"?wbe:jbe,[S=[],C]=Ln({prop:h,defaultProp:d,onChange:I=>{var V;(V=[...b.current][N.current])==null||V.focus(),f(I)}}),P=x.useRef(S);function T(I){const A=Pbe(S,I);D(I,A)}function O(I){D(I,N.current)}function E(){const I=P.current[N.current];S[N.current]!==I&&m(S)}function D(I,A,{commit:V}={commit:!1}){const U=Abe(i),$=Obe(Math.round((I-n)/i)*i+n,U),H=cg($,[n,a]);C((F=[])=>{const R=Sbe(F,H,A);if(Tbe(R,c*i)){N.current=R.indexOf(H);const z=String(R)!==String(F);return z&&V&&m(R),z?R:F}else return F})}return s.jsx(bbe,{scope:e.__scopeSlider,name:r,disabled:l,min:n,max:a,valueIndexToChangeRef:N,thumbs:b.current,values:S,orientation:o,form:y,children:s.jsx(LC.Provider,{scope:e.__scopeSlider,children:s.jsx(LC.Slot,{scope:e.__scopeSlider,children:s.jsx(w,{"aria-disabled":l,"data-disabled":l?"":void 0,...v,ref:t,onPointerDown:Ie(v.onPointerDown,()=>{l||(P.current=S)}),min:n,max:a,inverted:p,onSlideStart:l?void 0:T,onSlideMove:l?void 0:O,onSlideEnd:l?void 0:E,onHomeKeyDown:()=>!l&&D(n,0,{commit:!0}),onEndKeyDown:()=>!l&&D(a,S.length-1,{commit:!0}),onStepKeyDown:({event:I,direction:A})=>{if(!l){const $=vV.includes(I.key)||I.shiftKey&&yV.includes(I.key)?10:1,H=N.current,F=S[H],R=i*$*A;D(F+R,H,{commit:!0})}}})})})})});jV.displayName=em;var[NV,_V]=wV(em,{startEdge:"left",endEdge:"right",size:"width",direction:1}),wbe=x.forwardRef((e,t)=>{const{min:r,max:n,dir:a,inverted:i,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...h}=e,[f,m]=x.useState(null),p=nt(t,w=>m(w)),y=x.useRef(void 0),v=Tc(a),b=v==="ltr",N=b&&!i||!b&&i;function j(w){const S=y.current||f.getBoundingClientRect(),C=[0,S.width],T=$T(C,N?[r,n]:[n,r]);return y.current=S,T(w-S.left)}return s.jsx(NV,{scope:e.__scopeSlider,startEdge:N?"left":"right",endEdge:N?"right":"left",direction:N?1:-1,size:"width",children:s.jsx(SV,{dir:v,"data-orientation":"horizontal",...h,ref:p,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const S=j(w.clientX);o==null||o(S)},onSlideMove:w=>{const S=j(w.clientX);l==null||l(S)},onSlideEnd:()=>{y.current=void 0,c==null||c()},onStepKeyDown:w=>{const C=bV[N?"from-left":"from-right"].includes(w.key);d==null||d({event:w,direction:C?-1:1})}})})}),jbe=x.forwardRef((e,t)=>{const{min:r,max:n,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...d}=e,h=x.useRef(null),f=nt(t,h),m=x.useRef(void 0),p=!a;function y(v){const b=m.current||h.current.getBoundingClientRect(),N=[0,b.height],w=$T(N,p?[n,r]:[r,n]);return m.current=b,w(v-b.top)}return s.jsx(NV,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:s.jsx(SV,{"data-orientation":"vertical",...d,ref:f,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const b=y(v.clientY);i==null||i(b)},onSlideMove:v=>{const b=y(v.clientY);o==null||o(b)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:v=>{const N=bV[p?"from-bottom":"from-top"].includes(v.key);c==null||c({event:v,direction:N?-1:1})}})})}),SV=x.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...d}=e,h=fj(em,r);return s.jsx(ze.span,{...d,ref:t,onKeyDown:Ie(e.onKeyDown,f=>{f.key==="Home"?(o(f),f.preventDefault()):f.key==="End"?(l(f),f.preventDefault()):vV.concat(yV).includes(f.key)&&(c(f),f.preventDefault())}),onPointerDown:Ie(e.onPointerDown,f=>{const m=f.target;m.setPointerCapture(f.pointerId),f.preventDefault(),h.thumbs.has(m)?m.focus():n(f)}),onPointerMove:Ie(e.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&a(f)}),onPointerUp:Ie(e.onPointerUp,f=>{const m=f.target;m.hasPointerCapture(f.pointerId)&&(m.releasePointerCapture(f.pointerId),i(f))})})}),CV="SliderTrack",PV=x.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,a=fj(CV,r);return s.jsx(ze.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...n,ref:t})});PV.displayName=CV;var FC="SliderRange",kV=x.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,a=fj(FC,r),i=_V(FC,r),o=x.useRef(null),l=nt(t,o),c=a.values.length,d=a.values.map(m=>AV(m,a.min,a.max)),h=c>1?Math.min(...d):0,f=100-Math.max(...d);return s.jsx(ze.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...n,ref:l,style:{...e.style,[i.startEdge]:h+"%",[i.endEdge]:f+"%"}})});kV.displayName=FC;var BC="SliderThumb",EV=x.forwardRef((e,t)=>{const r=vbe(e.__scopeSlider),[n,a]=x.useState(null),i=nt(t,l=>a(l)),o=x.useMemo(()=>n?r().findIndex(l=>l.ref.current===n):-1,[r,n]);return s.jsx(Nbe,{...e,ref:i,index:o})}),Nbe=x.forwardRef((e,t)=>{const{__scopeSlider:r,index:n,name:a,...i}=e,o=fj(BC,r),l=_V(BC,r),[c,d]=x.useState(null),h=nt(t,j=>d(j)),f=c?o.form||!!c.closest("form"):!0,m=yw(c),p=o.values[n],y=p===void 0?0:AV(p,o.min,o.max),v=Cbe(n,o.values.length),b=m==null?void 0:m[l.size],N=b?kbe(b,y,l.direction):0;return x.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${y}% + ${N}px)`},children:[s.jsx(LC.ItemSlot,{scope:e.__scopeSlider,children:s.jsx(ze.span,{role:"slider","aria-label":e["aria-label"]||v,"aria-valuemin":o.min,"aria-valuenow":p,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:h,style:p===void 0?{display:"none"}:e.style,onFocus:Ie(e.onFocus,()=>{o.valueIndexToChangeRef.current=n})})}),f&&s.jsx(TV,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:p},n)]})});EV.displayName=BC;var _be="RadioBubbleInput",TV=x.forwardRef(({__scopeSlider:e,value:t,...r},n)=>{const a=x.useRef(null),i=nt(a,n),o=Ow(t);return x.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&h){const f=new Event("input",{bubbles:!0});h.call(l,t),l.dispatchEvent(f)}},[o,t]),s.jsx(ze.input,{style:{display:"none"},...r,ref:i,defaultValue:t})});TV.displayName=_be;function Sbe(e=[],t,r){const n=[...e];return n[r]=t,n.sort((a,i)=>a-i)}function AV(e,t,r){const i=100/(r-t)*(e-t);return cg(i,[0,100])}function Cbe(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Pbe(e,t){if(e.length===1)return 0;const r=e.map(a=>Math.abs(a-t)),n=Math.min(...r);return r.indexOf(n)}function kbe(e,t,r){const n=e/2,i=$T([0,50],[0,n]);return(n-i(t)*r)*r}function Ebe(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function Tbe(e,t){if(t>0){const r=Ebe(e);return Math.min(...r)>=t}return!0}function $T(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function Abe(e){return(String(e).split(".")[1]||"").length}function Obe(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var OV=jV,Mbe=PV,Ibe=kV,Rbe=EV;const LT=x.forwardRef(({className:e,...t},r)=>s.jsxs(OV,{ref:r,className:Re("relative flex w-full touch-none select-none items-center",e),...t,children:[s.jsx(Mbe,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:s.jsx(Ibe,{className:"absolute h-full bg-primary"})}),s.jsx(Rbe,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));LT.displayName=OV.displayName;delete Wt.Icon.Default.prototype._getIconUrl;Wt.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const Dbe=new Wt.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),$be=new Wt.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-gold.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),Lbe=new Wt.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),Fbe=({bounds:e})=>{const t=Qf();return x.useEffect(()=>{e&&t.fitBounds(e,{padding:[50,50]})},[e,t]),null},Bbe=()=>{const[e,t]=x.useState([]),[r,n]=x.useState(!1),[a,i]=x.useState(!0),[o,l]=x.useState(!0),[c,d]=x.useState(!0),[h,f]=x.useState(Nh),m=x.useRef(null),{radius:p,isLoading:y,isSaving:v,setActiveRadius:b}=mT();x.useEffect(()=>{f(p)},[p]);const N=async()=>{try{const{data:E,error:D}=await de.from("psw_profiles").select("*").in("vetting_status",["approved","pending"]).eq("is_test",!1).order("first_name");if(D)throw D;const I=(E||[]).map(A=>({id:A.id,firstName:A.first_name,lastName:A.last_name,email:A.email,phone:A.phone||"",gender:A.gender||void 0,languages:A.languages||["en"],homePostalCode:A.home_postal_code||"",homeCity:A.home_city||"",profilePhotoUrl:A.profile_photo_url||void 0,profilePhotoName:A.profile_photo_name||void 0,hscpoaNumber:A.hscpoa_number||void 0,policeCheckUrl:A.police_check_url||void 0,policeCheckName:A.police_check_name||void 0,policeCheckDate:A.police_check_date||void 0,vehiclePhotoUrl:A.vehicle_photo_url||void 0,vehiclePhotoName:A.vehicle_photo_name||void 0,yearsExperience:A.years_experience||void 0,certifications:A.certifications||void 0,hasOwnTransport:A.has_own_transport||void 0,licensePlate:A.license_plate||void 0,availableShifts:A.available_shifts||void 0,vehicleDisclaimer:A.vehicle_disclaimer||void 0,vettingStatus:A.vetting_status,vettingNotes:A.vetting_notes||void 0,vettingUpdatedAt:A.vetting_updated_at||void 0,appliedAt:A.applied_at||new Date().toISOString(),approvedAt:A.approved_at||void 0,expiredDueToPoliceCheck:A.expired_due_to_police_check||!1,coords:A.home_lat&&A.home_lng?{lat:Number(A.home_lat),lng:Number(A.home_lng)}:void 0}));t(I)}catch(E){console.error("Error loading PSW profiles for map:",E),Z.error("Failed to load PSW coverage data")}};x.useEffect(()=>{N()},[]);const j=()=>{n(!0),N(),setTimeout(()=>n(!1),500),Z.success("Coverage map refreshed")},w=E=>{const D=E[0];f(D),m.current&&window.clearTimeout(m.current),m.current=window.setTimeout(async()=>{console.log("Persisting active_service_radius:",D),await b(D)?Z.success(`Service radius updated to ${D}km`):Z.error("Couldn't save radius (admin permissions required)")},350)};x.useEffect(()=>()=>{m.current&&window.clearTimeout(m.current)},[]);const S=x.useMemo(()=>e.filter(E=>!!(E.vettingStatus==="approved"&&a||E.vettingStatus==="pending"&&o)).filter(E=>E.coords),[e,a,o]),C=x.useMemo(()=>{const E=[],D=hC();return E.push([D.lat,D.lng]),S.forEach(I=>{I.coords&&E.push([I.coords.lat,I.coords.lng])}),E.length>=2?Wt.latLngBounds(E):Wt.latLngBounds([[43.9,-77.8],[44.4,-76.9]])},[S]),P=e.filter(E=>E.vettingStatus==="approved"&&E.coords).length,T=e.filter(E=>E.vettingStatus==="pending"&&E.coords).length,O=hC();return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(ne,{variant:"secondary",className:"px-3 py-1",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),P," Approved"]}),s.jsxs(ne,{variant:"outline",className:"px-3 py-1",children:[s.jsx(Qe,{className:"w-3 h-3 mr-2"}),T," Pending"]})]}),s.jsxs(K,{variant:"outline",size:"sm",onClick:j,disabled:r,children:[s.jsx(Nr,{className:`w-4 h-4 mr-2 ${r?"animate-spin":""}`}),"Refresh"]})]}),s.jsxs(J,{className:"shadow-card border-primary/20",children:[s.jsxs(ke,{className:"pb-2",children:[s.jsxs(Ee,{className:"flex items-center gap-2 text-base",children:[s.jsx(e8,{className:"w-4 h-4 text-primary"}),"Active Service Radius"]}),s.jsx(Ge,{children:"Adjust how far PSWs can accept jobs from their home location"})]}),s.jsxs(Q,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"flex-1",children:y?s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(Ut,{className:"w-4 h-4 animate-spin"}),"Loading..."]}):s.jsx(LT,{value:[h],min:vg,max:Nh,step:q0,onValueChange:w,disabled:v,className:"w-full"})}),s.jsx("div",{className:"w-24 text-right",children:s.jsx(ne,{variant:"default",className:"text-lg font-bold px-3 py-1",children:v?s.jsx(Ut,{className:"w-4 h-4 animate-spin"}):`${h}km`})})]}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsxs("span",{children:[vg,"km (Tightest)"]}),s.jsxs("span",{children:[Nh,"km (Widest)"]})]})]})]}),s.jsx(J,{className:"shadow-card",children:s.jsx(Q,{className:"py-4",children:s.jsxs("div",{className:"flex flex-wrap items-center gap-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(mn,{id:"show-approved",checked:a,onCheckedChange:i}),s.jsxs(oe,{htmlFor:"show-approved",className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),"Approved PSWs"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(mn,{id:"show-pending",checked:o,onCheckedChange:l}),s.jsxs(oe,{htmlFor:"show-pending",className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("div",{className:"w-3 h-3 bg-amber-500 rounded-full"}),"Pending PSWs"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(mn,{id:"show-radius",checked:c,onCheckedChange:d}),s.jsxs(oe,{htmlFor:"show-radius",className:"cursor-pointer",children:["Show ",h,"km Radius"]})]})]})})}),s.jsxs(J,{className:"shadow-card overflow-hidden",children:[s.jsxs(ke,{className:"pb-2",children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(pn,{className:"w-5 h-5 text-primary"}),"PSW Coverage Areas"]}),s.jsxs(Ge,{className:"flex flex-wrap gap-4",children:[s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 bg-red-500 rounded-full"})," Office"]}),s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 bg-green-500 rounded-full"})," Approved PSW"]}),s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 bg-amber-500 rounded-full"})," Pending PSW"]}),s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 bg-green-200 rounded-full border border-green-400"})," ",h,"km Service Radius"]})]})]}),s.jsx(Q,{className:"p-0",children:s.jsx("div",{className:"h-[500px] w-full",children:s.jsxs(Ex,{center:[O.lat,O.lng],zoom:8,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[s.jsx(Tx,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),s.jsx(Fbe,{bounds:C}),s.jsx(wo,{position:[O.lat,O.lng],icon:Lbe,children:s.jsx(zi,{children:s.jsxs("div",{className:"text-sm",children:[s.jsx("p",{className:"font-semibold text-red-700",children:"Central Office"}),s.jsx("p",{className:"text-muted-foreground",children:"Belleville, ON"})]})})}),S.map(E=>E.coords&&s.jsxs("div",{children:[c&&s.jsx(DC,{center:[E.coords.lat,E.coords.lng],radius:h*1e3,pathOptions:{color:E.vettingStatus==="approved"?"#22c55e":"#f59e0b",fillColor:E.vettingStatus==="approved"?"#22c55e":"#f59e0b",fillOpacity:.1,weight:2}}),s.jsx(wo,{position:[E.coords.lat,E.coords.lng],icon:E.vettingStatus==="approved"?Dbe:$be,children:s.jsx(zi,{children:s.jsxs("div",{className:"text-sm min-w-[150px]",children:[s.jsxs("p",{className:"font-semibold text-foreground",children:[E.firstName," ",E.lastName]}),s.jsxs("p",{className:"text-muted-foreground",children:[E.homeCity||"City not set",", ON"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:E.homePostalCode}),s.jsx("div",{className:"mt-2 pt-2 border-t",children:E.vettingStatus==="approved"?s.jsxs(ne,{className:"bg-green-500/10 text-green-600 border-green-200 text-xs",children:[s.jsx(Kt,{className:"w-3 h-3 mr-1"}),"Approved"]}):s.jsxs(ne,{className:"bg-amber-500/10 text-amber-600 border-amber-200 text-xs",children:[s.jsx(Qe,{className:"w-3 h-3 mr-1"}),"Pending"]})}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Coverage: ",h,"km radius"]})]})})})]},E.id))]})})})]}),s.jsxs(J,{className:"shadow-card",children:[s.jsxs(ke,{children:[s.jsx(Ee,{className:"text-base",children:"PSWs with Coverage Areas"}),s.jsxs(Ge,{children:[S.length," PSWs with valid postal codes"]})]}),s.jsx(Q,{children:S.length===0?s.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No PSWs with valid home postal codes found"}):s.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:S.map(E=>s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[s.jsx("div",{className:`w-3 h-3 rounded-full shrink-0 ${E.vettingStatus==="approved"?"bg-green-500":"bg-amber-500"}`}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("p",{className:"font-medium text-foreground truncate",children:[E.firstName," ",E.lastName]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[E.homeCity||"Unknown","  ",E.homePostalCode]})]})]},E.id))})})]})]})};var zbe=Array.isArray,sa=zbe,Ube=typeof Km=="object"&&Km&&Km.Object===Object&&Km,MV=Ube,Wbe=MV,Hbe=typeof self=="object"&&self&&self.Object===Object&&self,Vbe=Wbe||Hbe||Function("return this")(),Ao=Vbe,qbe=Ao,Gbe=qbe.Symbol,Ax=Gbe,GI=Ax,IV=Object.prototype,Kbe=IV.hasOwnProperty,Ybe=IV.toString,Lm=GI?GI.toStringTag:void 0;function Zbe(e){var t=Kbe.call(e,Lm),r=e[Lm];try{e[Lm]=void 0;var n=!0}catch{}var a=Ybe.call(e);return n&&(t?e[Lm]=r:delete e[Lm]),a}var Xbe=Zbe,Jbe=Object.prototype,Qbe=Jbe.toString;function ewe(e){return Qbe.call(e)}var twe=ewe,KI=Ax,rwe=Xbe,nwe=twe,swe="[object Null]",awe="[object Undefined]",YI=KI?KI.toStringTag:void 0;function iwe(e){return e==null?e===void 0?awe:swe:YI&&YI in Object(e)?rwe(e):nwe(e)}var Nl=iwe;function owe(e){return e!=null&&typeof e=="object"}var _l=owe,lwe=Nl,cwe=_l,dwe="[object Symbol]";function uwe(e){return typeof e=="symbol"||cwe(e)&&lwe(e)==dwe}var tm=uwe,hwe=sa,fwe=tm,mwe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pwe=/^\w*$/;function gwe(e,t){if(hwe(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||fwe(e)?!0:pwe.test(e)||!mwe.test(e)||t!=null&&e in Object(t)}var FT=gwe;function xwe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Rc=xwe;const rm=tr(Rc);var vwe=Nl,ywe=Rc,bwe="[object AsyncFunction]",wwe="[object Function]",jwe="[object GeneratorFunction]",Nwe="[object Proxy]";function _we(e){if(!ywe(e))return!1;var t=vwe(e);return t==wwe||t==jwe||t==bwe||t==Nwe}var BT=_we;const yt=tr(BT);var Swe=Ao,Cwe=Swe["__core-js_shared__"],Pwe=Cwe,s1=Pwe,ZI=function(){var e=/[^.]+$/.exec(s1&&s1.keys&&s1.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function kwe(e){return!!ZI&&ZI in e}var Ewe=kwe,Twe=Function.prototype,Awe=Twe.toString;function Owe(e){if(e!=null){try{return Awe.call(e)}catch{}try{return e+""}catch{}}return""}var RV=Owe,Mwe=BT,Iwe=Ewe,Rwe=Rc,Dwe=RV,$we=/[\\^$.*+?()[\]{}|]/g,Lwe=/^\[object .+?Constructor\]$/,Fwe=Function.prototype,Bwe=Object.prototype,zwe=Fwe.toString,Uwe=Bwe.hasOwnProperty,Wwe=RegExp("^"+zwe.call(Uwe).replace($we,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Hwe(e){if(!Rwe(e)||Iwe(e))return!1;var t=Mwe(e)?Wwe:Lwe;return t.test(Dwe(e))}var Vwe=Hwe;function qwe(e,t){return e==null?void 0:e[t]}var Gwe=qwe,Kwe=Vwe,Ywe=Gwe;function Zwe(e,t){var r=Ywe(e,t);return Kwe(r)?r:void 0}var uu=Zwe,Xwe=uu,Jwe=Xwe(Object,"create"),mj=Jwe,XI=mj;function Qwe(){this.__data__=XI?XI(null):{},this.size=0}var eje=Qwe;function tje(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var rje=tje,nje=mj,sje="__lodash_hash_undefined__",aje=Object.prototype,ije=aje.hasOwnProperty;function oje(e){var t=this.__data__;if(nje){var r=t[e];return r===sje?void 0:r}return ije.call(t,e)?t[e]:void 0}var lje=oje,cje=mj,dje=Object.prototype,uje=dje.hasOwnProperty;function hje(e){var t=this.__data__;return cje?t[e]!==void 0:uje.call(t,e)}var fje=hje,mje=mj,pje="__lodash_hash_undefined__";function gje(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=mje&&t===void 0?pje:t,this}var xje=gje,vje=eje,yje=rje,bje=lje,wje=fje,jje=xje;function nm(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}nm.prototype.clear=vje;nm.prototype.delete=yje;nm.prototype.get=bje;nm.prototype.has=wje;nm.prototype.set=jje;var Nje=nm;function _je(){this.__data__=[],this.size=0}var Sje=_je;function Cje(e,t){return e===t||e!==e&&t!==t}var zT=Cje,Pje=zT;function kje(e,t){for(var r=e.length;r--;)if(Pje(e[r][0],t))return r;return-1}var pj=kje,Eje=pj,Tje=Array.prototype,Aje=Tje.splice;function Oje(e){var t=this.__data__,r=Eje(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Aje.call(t,r,1),--this.size,!0}var Mje=Oje,Ije=pj;function Rje(e){var t=this.__data__,r=Ije(t,e);return r<0?void 0:t[r][1]}var Dje=Rje,$je=pj;function Lje(e){return $je(this.__data__,e)>-1}var Fje=Lje,Bje=pj;function zje(e,t){var r=this.__data__,n=Bje(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var Uje=zje,Wje=Sje,Hje=Mje,Vje=Dje,qje=Fje,Gje=Uje;function sm(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}sm.prototype.clear=Wje;sm.prototype.delete=Hje;sm.prototype.get=Vje;sm.prototype.has=qje;sm.prototype.set=Gje;var gj=sm,Kje=uu,Yje=Ao,Zje=Kje(Yje,"Map"),UT=Zje,JI=Nje,Xje=gj,Jje=UT;function Qje(){this.size=0,this.__data__={hash:new JI,map:new(Jje||Xje),string:new JI}}var eNe=Qje;function tNe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var rNe=tNe,nNe=rNe;function sNe(e,t){var r=e.__data__;return nNe(t)?r[typeof t=="string"?"string":"hash"]:r.map}var xj=sNe,aNe=xj;function iNe(e){var t=aNe(this,e).delete(e);return this.size-=t?1:0,t}var oNe=iNe,lNe=xj;function cNe(e){return lNe(this,e).get(e)}var dNe=cNe,uNe=xj;function hNe(e){return uNe(this,e).has(e)}var fNe=hNe,mNe=xj;function pNe(e,t){var r=mNe(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var gNe=pNe,xNe=eNe,vNe=oNe,yNe=dNe,bNe=fNe,wNe=gNe;function am(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}am.prototype.clear=xNe;am.prototype.delete=vNe;am.prototype.get=yNe;am.prototype.has=bNe;am.prototype.set=wNe;var WT=am,DV=WT,jNe="Expected a function";function HT(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(jNe);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(HT.Cache||DV),r}HT.Cache=DV;var $V=HT;const NNe=tr($V);var _Ne=$V,SNe=500;function CNe(e){var t=_Ne(e,function(n){return r.size===SNe&&r.clear(),n}),r=t.cache;return t}var PNe=CNe,kNe=PNe,ENe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,TNe=/\\(\\)?/g,ANe=kNe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(ENe,function(r,n,a,i){t.push(a?i.replace(TNe,"$1"):n||r)}),t}),ONe=ANe;function MNe(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var VT=MNe,QI=Ax,INe=VT,RNe=sa,DNe=tm,$Ne=1/0,eR=QI?QI.prototype:void 0,tR=eR?eR.toString:void 0;function LV(e){if(typeof e=="string")return e;if(RNe(e))return INe(e,LV)+"";if(DNe(e))return tR?tR.call(e):"";var t=e+"";return t=="0"&&1/e==-$Ne?"-0":t}var LNe=LV,FNe=LNe;function BNe(e){return e==null?"":FNe(e)}var FV=BNe,zNe=sa,UNe=FT,WNe=ONe,HNe=FV;function VNe(e,t){return zNe(e)?e:UNe(e,t)?[e]:WNe(HNe(e))}var BV=VNe,qNe=tm,GNe=1/0;function KNe(e){if(typeof e=="string"||qNe(e))return e;var t=e+"";return t=="0"&&1/e==-GNe?"-0":t}var vj=KNe,YNe=BV,ZNe=vj;function XNe(e,t){t=YNe(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[ZNe(t[r++])];return r&&r==n?e:void 0}var qT=XNe,JNe=qT;function QNe(e,t,r){var n=e==null?void 0:JNe(e,t);return n===void 0?r:n}var zV=QNe;const Ta=tr(zV);function e_e(e){return e==null}var t_e=e_e;const It=tr(t_e);var r_e=Nl,n_e=sa,s_e=_l,a_e="[object String]";function i_e(e){return typeof e=="string"||!n_e(e)&&s_e(e)&&r_e(e)==a_e}var o_e=i_e;const Yd=tr(o_e);var UV={exports:{}},ar={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GT=Symbol.for("react.element"),KT=Symbol.for("react.portal"),yj=Symbol.for("react.fragment"),bj=Symbol.for("react.strict_mode"),wj=Symbol.for("react.profiler"),jj=Symbol.for("react.provider"),Nj=Symbol.for("react.context"),l_e=Symbol.for("react.server_context"),_j=Symbol.for("react.forward_ref"),Sj=Symbol.for("react.suspense"),Cj=Symbol.for("react.suspense_list"),Pj=Symbol.for("react.memo"),kj=Symbol.for("react.lazy"),c_e=Symbol.for("react.offscreen"),WV;WV=Symbol.for("react.module.reference");function mi(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case GT:switch(e=e.type,e){case yj:case wj:case bj:case Sj:case Cj:return e;default:switch(e=e&&e.$$typeof,e){case l_e:case Nj:case _j:case kj:case Pj:case jj:return e;default:return t}}case KT:return t}}}ar.ContextConsumer=Nj;ar.ContextProvider=jj;ar.Element=GT;ar.ForwardRef=_j;ar.Fragment=yj;ar.Lazy=kj;ar.Memo=Pj;ar.Portal=KT;ar.Profiler=wj;ar.StrictMode=bj;ar.Suspense=Sj;ar.SuspenseList=Cj;ar.isAsyncMode=function(){return!1};ar.isConcurrentMode=function(){return!1};ar.isContextConsumer=function(e){return mi(e)===Nj};ar.isContextProvider=function(e){return mi(e)===jj};ar.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===GT};ar.isForwardRef=function(e){return mi(e)===_j};ar.isFragment=function(e){return mi(e)===yj};ar.isLazy=function(e){return mi(e)===kj};ar.isMemo=function(e){return mi(e)===Pj};ar.isPortal=function(e){return mi(e)===KT};ar.isProfiler=function(e){return mi(e)===wj};ar.isStrictMode=function(e){return mi(e)===bj};ar.isSuspense=function(e){return mi(e)===Sj};ar.isSuspenseList=function(e){return mi(e)===Cj};ar.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===yj||e===wj||e===bj||e===Sj||e===Cj||e===c_e||typeof e=="object"&&e!==null&&(e.$$typeof===kj||e.$$typeof===Pj||e.$$typeof===jj||e.$$typeof===Nj||e.$$typeof===_j||e.$$typeof===WV||e.getModuleId!==void 0)};ar.typeOf=mi;UV.exports=ar;var d_e=UV.exports,u_e=Nl,h_e=_l,f_e="[object Number]";function m_e(e){return typeof e=="number"||h_e(e)&&u_e(e)==f_e}var HV=m_e;const p_e=tr(HV);var g_e=HV;function x_e(e){return g_e(e)&&e!=+e}var v_e=x_e;const Ox=tr(v_e);var Ns=function(t){return t===0?0:t>0?1:-1},vd=function(t){return Yd(t)&&t.indexOf("%")===t.length-1},Be=function(t){return p_e(t)&&!Ox(t)},y_e=function(t){return It(t)},Nn=function(t){return Be(t)||Yd(t)},b_e=0,Mx=function(t){var r=++b_e;return"".concat(t||"").concat(r)},_s=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Be(t)&&!Yd(t))return n;var i;if(vd(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Ox(i)&&(i=n),a&&i>r&&(i=r),i},Hu=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},w_e=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},Ul=function(t,r){return Be(t)&&Be(r)?function(n){return t+n*(r-t)}:function(){return r}};function zC(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):Ta(n,t))===r})}var j_e=function(t,r){return Be(t)&&Be(r)?t-r:Yd(t)&&Yd(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function _h(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function UC(e){"@babel/helpers - typeof";return UC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},UC(e)}var N_e=["viewBox","children"],__e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],rR=["points","pathLength"],a1={svg:N_e,polygon:rR,polyline:rR},YT=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],X0=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(x.isValidElement(t)&&(n=t.props),!rm(n))return null;var a={};return Object.keys(n).forEach(function(i){YT.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},S_e=function(t,r,n){return function(a){return t(r,n,a),null}},Zd=function(t,r,n){if(!rm(t)||UC(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];YT.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=S_e(o,r,n))}),a},C_e=["children"],P_e=["children"];function nR(e,t){if(e==null)return{};var r=k_e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function k_e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var sR={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},tl=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},aR=null,i1=null,ZT=function e(t){if(t===aR&&Array.isArray(i1))return i1;var r=[];return x.Children.forEach(t,function(n){It(n)||(d_e.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),i1=r,aR=t,r};function ti(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return tl(a)}):n=[tl(t)],ZT(e).forEach(function(a){var i=Ta(a,"type.displayName")||Ta(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function va(e,t){var r=ti(e,t);return r&&r[0]}var iR=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!Be(n)||n<=0||!Be(a)||a<=0)},E_e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],T_e=function(t){return t&&t.type&&Yd(t.type)&&E_e.indexOf(t.type)>=0},A_e=function(t,r,n,a){var i,o=(i=a1==null?void 0:a1[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!yt(t)&&(a&&o.includes(r)||__e.includes(r))||n&&YT.includes(r)},ht=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(x.isValidElement(t)&&(a=t.props),!rm(a))return null;var i={};return Object.keys(a).forEach(function(o){var l;A_e((l=a)===null||l===void 0?void 0:l[o],o,r,n)&&(i[o]=a[o])}),i},WC=function e(t,r){if(t===r)return!0;var n=x.Children.count(t);if(n!==x.Children.count(r))return!1;if(n===0)return!0;if(n===1)return oR(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=t[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!oR(i,o))return!1}return!0},oR=function(t,r){if(It(t)&&It(r))return!0;if(!It(t)&&!It(r)){var n=t.props||{},a=n.children,i=nR(n,C_e),o=r.props||{},l=o.children,c=nR(o,P_e);return a&&l?_h(i,c)&&WC(a,l):!a&&!l?_h(i,c):!1}return!1},lR=function(t,r){var n=[],a={};return ZT(t).forEach(function(i,o){if(T_e(i))n.push(i);else if(i){var l=tl(i.type),c=r[l]||{},d=c.handler,h=c.once;if(d&&(!h||!a[l])){var f=d(i,l,o);n.push(f),a[l]=!0}}}),n},O_e=function(t){var r=t&&t.type;return r&&sR[r]?sR[r]:null},M_e=function(t,r){return ZT(r).indexOf(t)},I_e=["children","width","height","viewBox","className","style","title","desc"];function HC(){return HC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},HC.apply(this,arguments)}function R_e(e,t){if(e==null)return{};var r=D_e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function D_e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function VC(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,d=R_e(e,I_e),h=a||{width:r,height:n,x:0,y:0},f=Nt("recharts-surface",i);return q.createElement("svg",HC({},ht(d,!0,"svg"),{className:f,width:r,height:n,style:o,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height)}),q.createElement("title",null,l),q.createElement("desc",null,c),t)}var $_e=["children","className"];function qC(){return qC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qC.apply(this,arguments)}function L_e(e,t){if(e==null)return{};var r=F_e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function F_e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var nr=q.forwardRef(function(e,t){var r=e.children,n=e.className,a=L_e(e,$_e),i=Nt("recharts-layer",n);return q.createElement("g",qC({className:i},ht(a,!0),{ref:t}),r)}),rl=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function B_e(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}var z_e=B_e,U_e=z_e;function W_e(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:U_e(e,t,r)}var H_e=W_e,V_e="\\ud800-\\udfff",q_e="\\u0300-\\u036f",G_e="\\ufe20-\\ufe2f",K_e="\\u20d0-\\u20ff",Y_e=q_e+G_e+K_e,Z_e="\\ufe0e\\ufe0f",X_e="\\u200d",J_e=RegExp("["+X_e+V_e+Y_e+Z_e+"]");function Q_e(e){return J_e.test(e)}var VV=Q_e;function e1e(e){return e.split("")}var t1e=e1e,qV="\\ud800-\\udfff",r1e="\\u0300-\\u036f",n1e="\\ufe20-\\ufe2f",s1e="\\u20d0-\\u20ff",a1e=r1e+n1e+s1e,i1e="\\ufe0e\\ufe0f",o1e="["+qV+"]",GC="["+a1e+"]",KC="\\ud83c[\\udffb-\\udfff]",l1e="(?:"+GC+"|"+KC+")",GV="[^"+qV+"]",KV="(?:\\ud83c[\\udde6-\\uddff]){2}",YV="[\\ud800-\\udbff][\\udc00-\\udfff]",c1e="\\u200d",ZV=l1e+"?",XV="["+i1e+"]?",d1e="(?:"+c1e+"(?:"+[GV,KV,YV].join("|")+")"+XV+ZV+")*",u1e=XV+ZV+d1e,h1e="(?:"+[GV+GC+"?",GC,KV,YV,o1e].join("|")+")",f1e=RegExp(KC+"(?="+KC+")|"+h1e+u1e,"g");function m1e(e){return e.match(f1e)||[]}var p1e=m1e,g1e=t1e,x1e=VV,v1e=p1e;function y1e(e){return x1e(e)?v1e(e):g1e(e)}var b1e=y1e,w1e=H_e,j1e=VV,N1e=b1e,_1e=FV;function S1e(e){return function(t){t=_1e(t);var r=j1e(t)?N1e(t):void 0,n=r?r[0]:t.charAt(0),a=r?w1e(r,1).join(""):t.slice(1);return n[e]()+a}}var C1e=S1e,P1e=C1e,k1e=P1e("toUpperCase"),E1e=k1e;const Ej=tr(E1e);function yr(e){return function(){return e}}const JV=Math.cos,J0=Math.sin,Zi=Math.sqrt,Q0=Math.PI,Tj=2*Q0,YC=Math.PI,ZC=2*YC,rd=1e-6,T1e=ZC-rd;function QV(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function A1e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return QV;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class O1e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?QV:A1e(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,d=a-r,h=o-t,f=l-r,m=h*h+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(m>rd)if(!(Math.abs(f*c-d*h)>rd)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-o,y=a-l,v=c*c+d*d,b=p*p+y*y,N=Math.sqrt(v),j=Math.sqrt(m),w=i*Math.tan((YC-Math.acos((v+m-b)/(2*N*j)))/2),S=w/j,C=w/N;Math.abs(S-1)>rd&&this._append`L${t+S*h},${r+S*f}`,this._append`A${i},${i},0,0,${+(f*p>h*y)},${this._x1=t+C*c},${this._y1=r+C*d}`}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),d=t+l,h=r+c,f=1^o,m=o?a-i:i-a;this._x1===null?this._append`M${d},${h}`:(Math.abs(this._x1-d)>rd||Math.abs(this._y1-h)>rd)&&this._append`L${d},${h}`,n&&(m<0&&(m=m%ZC+ZC),m>T1e?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=d},${this._y1=h}`:m>rd&&this._append`A${n},${n},0,${+(m>=YC)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function XT(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new O1e(t)}function JT(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function eq(e){this._context=e}eq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Aj(e){return new eq(e)}function tq(e){return e[0]}function rq(e){return e[1]}function nq(e,t){var r=yr(!0),n=null,a=Aj,i=null,o=XT(l);e=typeof e=="function"?e:e===void 0?tq:yr(e),t=typeof t=="function"?t:t===void 0?rq:yr(t);function l(c){var d,h=(c=JT(c)).length,f,m=!1,p;for(n==null&&(i=a(p=o())),d=0;d<=h;++d)!(d<h&&r(f=c[d],d,c))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(f,d,c),+t(f,d,c));if(p)return i=null,p+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:yr(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:yr(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:yr(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),l):n},l}function zv(e,t,r){var n=null,a=yr(!0),i=null,o=Aj,l=null,c=XT(d);e=typeof e=="function"?e:e===void 0?tq:yr(+e),t=typeof t=="function"?t:yr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?rq:yr(+r);function d(f){var m,p,y,v=(f=JT(f)).length,b,N=!1,j,w=new Array(v),S=new Array(v);for(i==null&&(l=o(j=c())),m=0;m<=v;++m){if(!(m<v&&a(b=f[m],m,f))===N)if(N=!N)p=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),y=m-1;y>=p;--y)l.point(w[y],S[y]);l.lineEnd(),l.areaEnd()}N&&(w[m]=+e(b,m,f),S[m]=+t(b,m,f),l.point(n?+n(b,m,f):w[m],r?+r(b,m,f):S[m]))}if(j)return l=null,j+""||null}function h(){return nq().defined(a).curve(o).context(i)}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:yr(+f),n=null,d):e},d.x0=function(f){return arguments.length?(e=typeof f=="function"?f:yr(+f),d):e},d.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:yr(+f),d):n},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:yr(+f),r=null,d):t},d.y0=function(f){return arguments.length?(t=typeof f=="function"?f:yr(+f),d):t},d.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:yr(+f),d):r},d.lineX0=d.lineY0=function(){return h().x(e).y(t)},d.lineY1=function(){return h().x(e).y(r)},d.lineX1=function(){return h().x(n).y(t)},d.defined=function(f){return arguments.length?(a=typeof f=="function"?f:yr(!!f),d):a},d.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),d):o},d.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),d):i},d}class sq{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function M1e(e){return new sq(e,!0)}function I1e(e){return new sq(e,!1)}const QT={draw(e,t){const r=Zi(t/Q0);e.moveTo(r,0),e.arc(0,0,r,0,Tj)}},R1e={draw(e,t){const r=Zi(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},aq=Zi(1/3),D1e=aq*2,$1e={draw(e,t){const r=Zi(t/D1e),n=r*aq;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},L1e={draw(e,t){const r=Zi(t),n=-r/2;e.rect(n,n,r,r)}},F1e=.8908130915292852,iq=J0(Q0/10)/J0(7*Q0/10),B1e=J0(Tj/10)*iq,z1e=-JV(Tj/10)*iq,U1e={draw(e,t){const r=Zi(t*F1e),n=B1e*r,a=z1e*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const o=Tj*i/5,l=JV(o),c=J0(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*a,c*n+l*a)}e.closePath()}},o1=Zi(3),W1e={draw(e,t){const r=-Zi(t/(o1*3));e.moveTo(0,r*2),e.lineTo(-o1*r,-r),e.lineTo(o1*r,-r),e.closePath()}},Wa=-.5,Ha=Zi(3)/2,XC=1/Zi(12),H1e=(XC/2+1)*3,V1e={draw(e,t){const r=Zi(t/H1e),n=r/2,a=r*XC,i=n,o=r*XC+r,l=-i,c=o;e.moveTo(n,a),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Wa*n-Ha*a,Ha*n+Wa*a),e.lineTo(Wa*i-Ha*o,Ha*i+Wa*o),e.lineTo(Wa*l-Ha*c,Ha*l+Wa*c),e.lineTo(Wa*n+Ha*a,Wa*a-Ha*n),e.lineTo(Wa*i+Ha*o,Wa*o-Ha*i),e.lineTo(Wa*l+Ha*c,Wa*c-Ha*l),e.closePath()}};function q1e(e,t){let r=null,n=XT(a);e=typeof e=="function"?e:yr(e||QT),t=typeof t=="function"?t:yr(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:yr(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:yr(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function eb(){}function tb(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function oq(e){this._context=e}oq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:tb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:tb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function G1e(e){return new oq(e)}function lq(e){this._context=e}lq.prototype={areaStart:eb,areaEnd:eb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:tb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function K1e(e){return new lq(e)}function cq(e){this._context=e}cq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:tb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Y1e(e){return new cq(e)}function dq(e){this._context=e}dq.prototype={areaStart:eb,areaEnd:eb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Z1e(e){return new dq(e)}function cR(e){return e<0?-1:1}function dR(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),l=(i*a+o*n)/(n+a);return(cR(i)+cR(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function uR(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function l1(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,a+l*t,i-l,o-l*r,i,o)}function rb(e){this._context=e}rb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:l1(this,this._t0,uR(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,l1(this,uR(this,r=dR(this,e,t)),r);break;default:l1(this,this._t0,r=dR(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function uq(e){this._context=new hq(e)}(uq.prototype=Object.create(rb.prototype)).point=function(e,t){rb.prototype.point.call(this,t,e)};function hq(e){this._context=e}hq.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function X1e(e){return new rb(e)}function J1e(e){return new uq(e)}function fq(e){this._context=e}fq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=hR(e),a=hR(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function hR(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function Q1e(e){return new fq(e)}function Oj(e,t){this._context=e,this._t=t}Oj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function eSe(e){return new Oj(e,.5)}function tSe(e){return new Oj(e,0)}function rSe(e){return new Oj(e,1)}function af(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,l=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function JC(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function nSe(e,t){return e[t]}function sSe(e){const t=[];return t.key=e,t}function aSe(){var e=yr([]),t=JC,r=af,n=nSe;function a(i){var o=Array.from(e.apply(this,arguments),sSe),l,c=o.length,d=-1,h;for(const f of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+n(f,o[l].key,d,i)]).data=f;for(l=0,h=JT(t(o));l<c;++l)o[h[l]].index=l;return r(o,h),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:yr(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:yr(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?JC:typeof i=="function"?i:yr(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??af,a):r},a}function iSe(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}af(e,t)}}function oSe(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,l=0;o<a;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}af(e,t)}}function lSe(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var l=0,c=0,d=0;l<o;++l){for(var h=e[t[l]],f=h[n][1]||0,m=h[n-1][1]||0,p=(f-m)/2,y=0;y<l;++y){var v=e[t[y]],b=v[n][1]||0,N=v[n-1][1]||0;p+=b-N}c+=f,d+=p*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=d/c)}a[n-1][1]+=a[n-1][0]=r,af(e,t)}}function yg(e){"@babel/helpers - typeof";return yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yg(e)}var cSe=["type","size","sizeType"];function QC(){return QC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},QC.apply(this,arguments)}function fR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fR(Object(r),!0).forEach(function(n){dSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dSe(e,t,r){return t=uSe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uSe(e){var t=hSe(e,"string");return yg(t)=="symbol"?t:t+""}function hSe(e,t){if(yg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(yg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fSe(e,t){if(e==null)return{};var r=mSe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function mSe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var mq={symbolCircle:QT,symbolCross:R1e,symbolDiamond:$1e,symbolSquare:L1e,symbolStar:U1e,symbolTriangle:W1e,symbolWye:V1e},pSe=Math.PI/180,gSe=function(t){var r="symbol".concat(Ej(t));return mq[r]||QT},xSe=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*pSe;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},vSe=function(t,r){mq["symbol".concat(Ej(t))]=r},eA=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=fSe(t,cSe),d=mR(mR({},c),{},{type:n,size:i,sizeType:l}),h=function(){var b=gSe(n),N=q1e().type(b).size(xSe(i,l,n));return N()},f=d.className,m=d.cx,p=d.cy,y=ht(d,!0);return m===+m&&p===+p&&i===+i?q.createElement("path",QC({},y,{className:Nt("recharts-symbols",f),transform:"translate(".concat(m,", ").concat(p,")"),d:h()})):null};eA.registerSymbol=vSe;function of(e){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},of(e)}function e2(){return e2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e2.apply(this,arguments)}function pR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ySe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pR(Object(r),!0).forEach(function(n){bg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wSe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gq(n.key),n)}}function jSe(e,t,r){return t&&wSe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function NSe(e,t,r){return t=nb(t),_Se(e,pq()?Reflect.construct(t,r||[],nb(e).constructor):t.apply(e,r))}function _Se(e,t){if(t&&(of(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SSe(e)}function SSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pq=function(){return!!e})()}function nb(e){return nb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nb(e)}function CSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&t2(e,t)}function t2(e,t){return t2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},t2(e,t)}function bg(e,t,r){return t=gq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gq(e){var t=PSe(e,"string");return of(t)=="symbol"?t:t+""}function PSe(e,t){if(of(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(of(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Va=32,tA=function(e){function t(){return bSe(this,t),NSe(this,t,arguments)}return CSe(t,e),jSe(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=Va/2,o=Va/6,l=Va/3,c=n.inactive?a:n.color;if(n.type==="plainline")return q.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:Va,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return q.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Va,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return q.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Va/8,"h").concat(Va,"v").concat(Va*3/4,"h").concat(-Va,"z"),className:"recharts-legend-icon"});if(q.isValidElement(n.legendIcon)){var d=ySe({},n);return delete d.legendIcon,q.cloneElement(n.legendIcon,d)}return q.createElement(eA,{fill:c,cx:i,cy:i,size:Va,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,d=a.inactiveColor,h={x:0,y:0,width:Va,height:Va},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(p,y){var v=p.formatter||c,b=Nt(bg(bg({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",p.inactive));if(p.type==="none")return null;var N=yt(p.value)?null:p.value;rl(!yt(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var j=p.inactive?d:p.color;return q.createElement("li",e2({className:b,style:f,key:"legend-item-".concat(y)},Zd(n.props,p,y)),q.createElement(VC,{width:o,height:o,viewBox:h,style:m},n.renderIcon(p)),q.createElement("span",{className:"recharts-legend-item-text",style:{color:j}},v?v(N,p,y):N))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return q.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(x.PureComponent);bg(tA,"displayName","Legend");bg(tA,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var kSe=gj;function ESe(){this.__data__=new kSe,this.size=0}var TSe=ESe;function ASe(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var OSe=ASe;function MSe(e){return this.__data__.get(e)}var ISe=MSe;function RSe(e){return this.__data__.has(e)}var DSe=RSe,$Se=gj,LSe=UT,FSe=WT,BSe=200;function zSe(e,t){var r=this.__data__;if(r instanceof $Se){var n=r.__data__;if(!LSe||n.length<BSe-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new FSe(n)}return r.set(e,t),this.size=r.size,this}var USe=zSe,WSe=gj,HSe=TSe,VSe=OSe,qSe=ISe,GSe=DSe,KSe=USe;function im(e){var t=this.__data__=new WSe(e);this.size=t.size}im.prototype.clear=HSe;im.prototype.delete=VSe;im.prototype.get=qSe;im.prototype.has=GSe;im.prototype.set=KSe;var xq=im,YSe="__lodash_hash_undefined__";function ZSe(e){return this.__data__.set(e,YSe),this}var XSe=ZSe;function JSe(e){return this.__data__.has(e)}var QSe=JSe,eCe=WT,tCe=XSe,rCe=QSe;function sb(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new eCe;++t<r;)this.add(e[t])}sb.prototype.add=sb.prototype.push=tCe;sb.prototype.has=rCe;var vq=sb;function nCe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var yq=nCe;function sCe(e,t){return e.has(t)}var bq=sCe,aCe=vq,iCe=yq,oCe=bq,lCe=1,cCe=2;function dCe(e,t,r,n,a,i){var o=r&lCe,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var d=i.get(e),h=i.get(t);if(d&&h)return d==t&&h==e;var f=-1,m=!0,p=r&cCe?new aCe:void 0;for(i.set(e,t),i.set(t,e);++f<l;){var y=e[f],v=t[f];if(n)var b=o?n(v,y,f,t,e,i):n(y,v,f,e,t,i);if(b!==void 0){if(b)continue;m=!1;break}if(p){if(!iCe(t,function(N,j){if(!oCe(p,j)&&(y===N||a(y,N,r,n,i)))return p.push(j)})){m=!1;break}}else if(!(y===v||a(y,v,r,n,i))){m=!1;break}}return i.delete(e),i.delete(t),m}var wq=dCe,uCe=Ao,hCe=uCe.Uint8Array,fCe=hCe;function mCe(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var pCe=mCe;function gCe(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var rA=gCe,gR=Ax,xR=fCe,xCe=zT,vCe=wq,yCe=pCe,bCe=rA,wCe=1,jCe=2,NCe="[object Boolean]",_Ce="[object Date]",SCe="[object Error]",CCe="[object Map]",PCe="[object Number]",kCe="[object RegExp]",ECe="[object Set]",TCe="[object String]",ACe="[object Symbol]",OCe="[object ArrayBuffer]",MCe="[object DataView]",vR=gR?gR.prototype:void 0,c1=vR?vR.valueOf:void 0;function ICe(e,t,r,n,a,i,o){switch(r){case MCe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case OCe:return!(e.byteLength!=t.byteLength||!i(new xR(e),new xR(t)));case NCe:case _Ce:case PCe:return xCe(+e,+t);case SCe:return e.name==t.name&&e.message==t.message;case kCe:case TCe:return e==t+"";case CCe:var l=yCe;case ECe:var c=n&wCe;if(l||(l=bCe),e.size!=t.size&&!c)return!1;var d=o.get(e);if(d)return d==t;n|=jCe,o.set(e,t);var h=vCe(l(e),l(t),n,a,i,o);return o.delete(e),h;case ACe:if(c1)return c1.call(e)==c1.call(t)}return!1}var RCe=ICe;function DCe(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var jq=DCe,$Ce=jq,LCe=sa;function FCe(e,t,r){var n=t(e);return LCe(e)?n:$Ce(n,r(e))}var BCe=FCe;function zCe(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}var UCe=zCe;function WCe(){return[]}var HCe=WCe,VCe=UCe,qCe=HCe,GCe=Object.prototype,KCe=GCe.propertyIsEnumerable,yR=Object.getOwnPropertySymbols,YCe=yR?function(e){return e==null?[]:(e=Object(e),VCe(yR(e),function(t){return KCe.call(e,t)}))}:qCe,ZCe=YCe;function XCe(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var JCe=XCe,QCe=Nl,e2e=_l,t2e="[object Arguments]";function r2e(e){return e2e(e)&&QCe(e)==t2e}var n2e=r2e,bR=n2e,s2e=_l,Nq=Object.prototype,a2e=Nq.hasOwnProperty,i2e=Nq.propertyIsEnumerable,o2e=bR(function(){return arguments}())?bR:function(e){return s2e(e)&&a2e.call(e,"callee")&&!i2e.call(e,"callee")},nA=o2e,ab={exports:{}};function l2e(){return!1}var c2e=l2e;ab.exports;(function(e,t){var r=Ao,n=c2e,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||n;e.exports=d})(ab,ab.exports);var _q=ab.exports,d2e=9007199254740991,u2e=/^(?:0|[1-9]\d*)$/;function h2e(e,t){var r=typeof e;return t=t??d2e,!!t&&(r=="number"||r!="symbol"&&u2e.test(e))&&e>-1&&e%1==0&&e<t}var sA=h2e,f2e=9007199254740991;function m2e(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=f2e}var aA=m2e,p2e=Nl,g2e=aA,x2e=_l,v2e="[object Arguments]",y2e="[object Array]",b2e="[object Boolean]",w2e="[object Date]",j2e="[object Error]",N2e="[object Function]",_2e="[object Map]",S2e="[object Number]",C2e="[object Object]",P2e="[object RegExp]",k2e="[object Set]",E2e="[object String]",T2e="[object WeakMap]",A2e="[object ArrayBuffer]",O2e="[object DataView]",M2e="[object Float32Array]",I2e="[object Float64Array]",R2e="[object Int8Array]",D2e="[object Int16Array]",$2e="[object Int32Array]",L2e="[object Uint8Array]",F2e="[object Uint8ClampedArray]",B2e="[object Uint16Array]",z2e="[object Uint32Array]",Er={};Er[M2e]=Er[I2e]=Er[R2e]=Er[D2e]=Er[$2e]=Er[L2e]=Er[F2e]=Er[B2e]=Er[z2e]=!0;Er[v2e]=Er[y2e]=Er[A2e]=Er[b2e]=Er[O2e]=Er[w2e]=Er[j2e]=Er[N2e]=Er[_2e]=Er[S2e]=Er[C2e]=Er[P2e]=Er[k2e]=Er[E2e]=Er[T2e]=!1;function U2e(e){return x2e(e)&&g2e(e.length)&&!!Er[p2e(e)]}var W2e=U2e;function H2e(e){return function(t){return e(t)}}var Sq=H2e,ib={exports:{}};ib.exports;(function(e,t){var r=MV,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,o=i&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(ib,ib.exports);var V2e=ib.exports,q2e=W2e,G2e=Sq,wR=V2e,jR=wR&&wR.isTypedArray,K2e=jR?G2e(jR):q2e,Cq=K2e,Y2e=JCe,Z2e=nA,X2e=sa,J2e=_q,Q2e=sA,ePe=Cq,tPe=Object.prototype,rPe=tPe.hasOwnProperty;function nPe(e,t){var r=X2e(e),n=!r&&Z2e(e),a=!r&&!n&&J2e(e),i=!r&&!n&&!a&&ePe(e),o=r||n||a||i,l=o?Y2e(e.length,String):[],c=l.length;for(var d in e)(t||rPe.call(e,d))&&!(o&&(d=="length"||a&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Q2e(d,c)))&&l.push(d);return l}var sPe=nPe,aPe=Object.prototype;function iPe(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||aPe;return e===r}var oPe=iPe;function lPe(e,t){return function(r){return e(t(r))}}var Pq=lPe,cPe=Pq,dPe=cPe(Object.keys,Object),uPe=dPe,hPe=oPe,fPe=uPe,mPe=Object.prototype,pPe=mPe.hasOwnProperty;function gPe(e){if(!hPe(e))return fPe(e);var t=[];for(var r in Object(e))pPe.call(e,r)&&r!="constructor"&&t.push(r);return t}var xPe=gPe,vPe=BT,yPe=aA;function bPe(e){return e!=null&&yPe(e.length)&&!vPe(e)}var Mj=bPe,wPe=sPe,jPe=xPe,NPe=Mj;function _Pe(e){return NPe(e)?wPe(e):jPe(e)}var iA=_Pe,SPe=BCe,CPe=ZCe,PPe=iA;function kPe(e){return SPe(e,PPe,CPe)}var EPe=kPe,NR=EPe,TPe=1,APe=Object.prototype,OPe=APe.hasOwnProperty;function MPe(e,t,r,n,a,i){var o=r&TPe,l=NR(e),c=l.length,d=NR(t),h=d.length;if(c!=h&&!o)return!1;for(var f=c;f--;){var m=l[f];if(!(o?m in t:OPe.call(t,m)))return!1}var p=i.get(e),y=i.get(t);if(p&&y)return p==t&&y==e;var v=!0;i.set(e,t),i.set(t,e);for(var b=o;++f<c;){m=l[f];var N=e[m],j=t[m];if(n)var w=o?n(j,N,m,t,e,i):n(N,j,m,e,t,i);if(!(w===void 0?N===j||a(N,j,r,n,i):w)){v=!1;break}b||(b=m=="constructor")}if(v&&!b){var S=e.constructor,C=t.constructor;S!=C&&"constructor"in e&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof C=="function"&&C instanceof C)&&(v=!1)}return i.delete(e),i.delete(t),v}var IPe=MPe,RPe=uu,DPe=Ao,$Pe=RPe(DPe,"DataView"),LPe=$Pe,FPe=uu,BPe=Ao,zPe=FPe(BPe,"Promise"),UPe=zPe,WPe=uu,HPe=Ao,VPe=WPe(HPe,"Set"),kq=VPe,qPe=uu,GPe=Ao,KPe=qPe(GPe,"WeakMap"),YPe=KPe,r2=LPe,n2=UT,s2=UPe,a2=kq,i2=YPe,Eq=Nl,om=RV,_R="[object Map]",ZPe="[object Object]",SR="[object Promise]",CR="[object Set]",PR="[object WeakMap]",kR="[object DataView]",XPe=om(r2),JPe=om(n2),QPe=om(s2),eke=om(a2),tke=om(i2),nd=Eq;(r2&&nd(new r2(new ArrayBuffer(1)))!=kR||n2&&nd(new n2)!=_R||s2&&nd(s2.resolve())!=SR||a2&&nd(new a2)!=CR||i2&&nd(new i2)!=PR)&&(nd=function(e){var t=Eq(e),r=t==ZPe?e.constructor:void 0,n=r?om(r):"";if(n)switch(n){case XPe:return kR;case JPe:return _R;case QPe:return SR;case eke:return CR;case tke:return PR}return t});var rke=nd,d1=xq,nke=wq,ske=RCe,ake=IPe,ER=rke,TR=sa,AR=_q,ike=Cq,oke=1,OR="[object Arguments]",MR="[object Array]",Uv="[object Object]",lke=Object.prototype,IR=lke.hasOwnProperty;function cke(e,t,r,n,a,i){var o=TR(e),l=TR(t),c=o?MR:ER(e),d=l?MR:ER(t);c=c==OR?Uv:c,d=d==OR?Uv:d;var h=c==Uv,f=d==Uv,m=c==d;if(m&&AR(e)){if(!AR(t))return!1;o=!0,h=!1}if(m&&!h)return i||(i=new d1),o||ike(e)?nke(e,t,r,n,a,i):ske(e,t,c,r,n,a,i);if(!(r&oke)){var p=h&&IR.call(e,"__wrapped__"),y=f&&IR.call(t,"__wrapped__");if(p||y){var v=p?e.value():e,b=y?t.value():t;return i||(i=new d1),a(v,b,r,n,i)}}return m?(i||(i=new d1),ake(e,t,r,n,a,i)):!1}var dke=cke,uke=dke,RR=_l;function Tq(e,t,r,n,a){return e===t?!0:e==null||t==null||!RR(e)&&!RR(t)?e!==e&&t!==t:uke(e,t,r,n,Tq,a)}var oA=Tq,hke=xq,fke=oA,mke=1,pke=2;function gke(e,t,r,n){var a=r.length,i=a,o=!n;if(e==null)return!i;for(e=Object(e);a--;){var l=r[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){l=r[a];var c=l[0],d=e[c],h=l[1];if(o&&l[2]){if(d===void 0&&!(c in e))return!1}else{var f=new hke;if(n)var m=n(d,h,c,e,t,f);if(!(m===void 0?fke(h,d,mke|pke,n,f):m))return!1}}return!0}var xke=gke,vke=Rc;function yke(e){return e===e&&!vke(e)}var Aq=yke,bke=Aq,wke=iA;function jke(e){for(var t=wke(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,bke(a)]}return t}var Nke=jke;function _ke(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var Oq=_ke,Ske=xke,Cke=Nke,Pke=Oq;function kke(e){var t=Cke(e);return t.length==1&&t[0][2]?Pke(t[0][0],t[0][1]):function(r){return r===e||Ske(r,e,t)}}var Eke=kke;function Tke(e,t){return e!=null&&t in Object(e)}var Ake=Tke,Oke=BV,Mke=nA,Ike=sa,Rke=sA,Dke=aA,$ke=vj;function Lke(e,t,r){t=Oke(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var o=$ke(t[n]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&Dke(a)&&Rke(o,a)&&(Ike(e)||Mke(e)))}var Fke=Lke,Bke=Ake,zke=Fke;function Uke(e,t){return e!=null&&zke(e,t,Bke)}var Wke=Uke,Hke=oA,Vke=zV,qke=Wke,Gke=FT,Kke=Aq,Yke=Oq,Zke=vj,Xke=1,Jke=2;function Qke(e,t){return Gke(e)&&Kke(t)?Yke(Zke(e),t):function(r){var n=Vke(r,e);return n===void 0&&n===t?qke(r,e):Hke(t,n,Xke|Jke)}}var eEe=Qke;function tEe(e){return e}var lm=tEe;function rEe(e){return function(t){return t==null?void 0:t[e]}}var nEe=rEe,sEe=qT;function aEe(e){return function(t){return sEe(t,e)}}var iEe=aEe,oEe=nEe,lEe=iEe,cEe=FT,dEe=vj;function uEe(e){return cEe(e)?oEe(dEe(e)):lEe(e)}var hEe=uEe,fEe=Eke,mEe=eEe,pEe=lm,gEe=sa,xEe=hEe;function vEe(e){return typeof e=="function"?e:e==null?pEe:typeof e=="object"?gEe(e)?mEe(e[0],e[1]):fEe(e):xEe(e)}var Dc=vEe;function yEe(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var bEe=yEe;function wEe(e){return e!==e}var jEe=wEe;function NEe(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var _Ee=NEe,SEe=bEe,CEe=jEe,PEe=_Ee;function kEe(e,t,r){return t===t?PEe(e,t,r):SEe(e,CEe,r)}var EEe=kEe,TEe=EEe;function AEe(e,t){var r=e==null?0:e.length;return!!r&&TEe(e,t,0)>-1}var OEe=AEe;function MEe(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var IEe=MEe;function REe(){}var DEe=REe,u1=kq,$Ee=DEe,LEe=rA,FEe=1/0,BEe=u1&&1/LEe(new u1([,-0]))[1]==FEe?function(e){return new u1(e)}:$Ee,zEe=BEe,UEe=vq,WEe=OEe,HEe=IEe,VEe=bq,qEe=zEe,GEe=rA,KEe=200;function YEe(e,t,r){var n=-1,a=WEe,i=e.length,o=!0,l=[],c=l;if(r)o=!1,a=HEe;else if(i>=KEe){var d=t?null:qEe(e);if(d)return GEe(d);o=!1,a=VEe,c=new UEe}else c=t?[]:l;e:for(;++n<i;){var h=e[n],f=t?t(h):h;if(h=r||h!==0?h:0,o&&f===f){for(var m=c.length;m--;)if(c[m]===f)continue e;t&&c.push(f),l.push(h)}else a(c,f,r)||(c!==l&&c.push(f),l.push(h))}return l}var ZEe=YEe,XEe=Dc,JEe=ZEe;function QEe(e,t){return e&&e.length?JEe(e,XEe(t)):[]}var eTe=QEe;const DR=tr(eTe);function Mq(e,t,r){return t===!0?DR(e,r):yt(t)?DR(e,t):e}function lf(e){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lf(e)}var tTe=["ref"];function $R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Bo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$R(Object(r),!0).forEach(function(n){Ij(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$R(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Rq(n.key),n)}}function nTe(e,t,r){return t&&LR(e.prototype,t),r&&LR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function sTe(e,t,r){return t=ob(t),aTe(e,Iq()?Reflect.construct(t,r||[],ob(e).constructor):t.apply(e,r))}function aTe(e,t){if(t&&(lf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iTe(e)}function iTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Iq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Iq=function(){return!!e})()}function ob(e){return ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ob(e)}function oTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o2(e,t)}function o2(e,t){return o2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},o2(e,t)}function Ij(e,t,r){return t=Rq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rq(e){var t=lTe(e,"string");return lf(t)=="symbol"?t:t+""}function lTe(e,t){if(lf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(lf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cTe(e,t){if(e==null)return{};var r=dTe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dTe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function uTe(e){return e.value}function hTe(e,t){if(q.isValidElement(e))return q.cloneElement(e,t);if(typeof e=="function")return q.createElement(e,t);t.ref;var r=cTe(t,tTe);return q.createElement(tA,r)}var FR=1,Sh=function(e){function t(){var r;rTe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=sTe(this,t,[].concat(a)),Ij(r,"lastBoundingBox",{width:-1,height:-1}),r}return oTe(t,e),nTe(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>FR||Math.abs(a.height-this.lastBoundingBox.height)>FR)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Bo({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,d=a.chartWidth,h=a.chartHeight,f,m;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var p=this.getBBoxSnapshot();f={left:((d||0)-p.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var y=this.getBBoxSnapshot();m={top:((h||0)-y.height)/2}}else m=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Bo(Bo({},f),m)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,l=a.height,c=a.wrapperStyle,d=a.payloadUniqBy,h=a.payload,f=Bo(Bo({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return q.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(p){n.wrapperNode=p}},hTe(i,Bo(Bo({},this.props),{},{payload:Mq(h,d,uTe)})))}}],[{key:"getWithHeight",value:function(n,a){var i=Bo(Bo({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&Be(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])}(x.PureComponent);Ij(Sh,"displayName","Legend");Ij(Sh,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var BR=Ax,fTe=nA,mTe=sa,zR=BR?BR.isConcatSpreadable:void 0;function pTe(e){return mTe(e)||fTe(e)||!!(zR&&e&&e[zR])}var gTe=pTe,xTe=jq,vTe=gTe;function Dq(e,t,r,n,a){var i=-1,o=e.length;for(r||(r=vTe),a||(a=[]);++i<o;){var l=e[i];t>0&&r(l)?t>1?Dq(l,t-1,r,n,a):xTe(a,l):n||(a[a.length]=l)}return a}var $q=Dq;function yTe(e){return function(t,r,n){for(var a=-1,i=Object(t),o=n(t),l=o.length;l--;){var c=o[e?l:++a];if(r(i[c],c,i)===!1)break}return t}}var bTe=yTe,wTe=bTe,jTe=wTe(),NTe=jTe,_Te=NTe,STe=iA;function CTe(e,t){return e&&_Te(e,t,STe)}var Lq=CTe,PTe=Mj;function kTe(e,t){return function(r,n){if(r==null)return r;if(!PTe(r))return e(r,n);for(var a=r.length,i=t?a:-1,o=Object(r);(t?i--:++i<a)&&n(o[i],i,o)!==!1;);return r}}var ETe=kTe,TTe=Lq,ATe=ETe,OTe=ATe(TTe),lA=OTe,MTe=lA,ITe=Mj;function RTe(e,t){var r=-1,n=ITe(e)?Array(e.length):[];return MTe(e,function(a,i,o){n[++r]=t(a,i,o)}),n}var Fq=RTe;function DTe(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var $Te=DTe,UR=tm;function LTe(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,i=UR(e),o=t!==void 0,l=t===null,c=t===t,d=UR(t);if(!l&&!d&&!i&&e>t||i&&o&&c&&!l&&!d||n&&o&&c||!r&&c||!a)return 1;if(!n&&!i&&!d&&e<t||d&&r&&a&&!n&&!i||l&&r&&a||!o&&a||!c)return-1}return 0}var FTe=LTe,BTe=FTe;function zTe(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,o=a.length,l=r.length;++n<o;){var c=BTe(a[n],i[n]);if(c){if(n>=l)return c;var d=r[n];return c*(d=="desc"?-1:1)}}return e.index-t.index}var UTe=zTe,h1=VT,WTe=qT,HTe=Dc,VTe=Fq,qTe=$Te,GTe=Sq,KTe=UTe,YTe=lm,ZTe=sa;function XTe(e,t,r){t.length?t=h1(t,function(i){return ZTe(i)?function(o){return WTe(o,i.length===1?i[0]:i)}:i}):t=[YTe];var n=-1;t=h1(t,GTe(HTe));var a=VTe(e,function(i,o,l){var c=h1(t,function(d){return d(i)});return{criteria:c,index:++n,value:i}});return qTe(a,function(i,o){return KTe(i,o,r)})}var JTe=XTe;function QTe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var eAe=QTe,tAe=eAe,WR=Math.max;function rAe(e,t,r){return t=WR(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=WR(n.length-t,0),o=Array(i);++a<i;)o[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=r(o),tAe(e,this,l)}}var nAe=rAe;function sAe(e){return function(){return e}}var aAe=sAe,iAe=uu,oAe=function(){try{var e=iAe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Bq=oAe,lAe=aAe,HR=Bq,cAe=lm,dAe=HR?function(e,t){return HR(e,"toString",{configurable:!0,enumerable:!1,value:lAe(t),writable:!0})}:cAe,uAe=dAe,hAe=800,fAe=16,mAe=Date.now;function pAe(e){var t=0,r=0;return function(){var n=mAe(),a=fAe-(n-r);if(r=n,a>0){if(++t>=hAe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var gAe=pAe,xAe=uAe,vAe=gAe,yAe=vAe(xAe),bAe=yAe,wAe=lm,jAe=nAe,NAe=bAe;function _Ae(e,t){return NAe(jAe(e,t,wAe),e+"")}var SAe=_Ae,CAe=zT,PAe=Mj,kAe=sA,EAe=Rc;function TAe(e,t,r){if(!EAe(r))return!1;var n=typeof t;return(n=="number"?PAe(r)&&kAe(t,r.length):n=="string"&&t in r)?CAe(r[t],e):!1}var Rj=TAe,AAe=$q,OAe=JTe,MAe=SAe,VR=Rj,IAe=MAe(function(e,t){if(e==null)return[];var r=t.length;return r>1&&VR(e,t[0],t[1])?t=[]:r>2&&VR(t[0],t[1],t[2])&&(t=[t[0]]),OAe(e,AAe(t,1),[])}),RAe=IAe;const cA=tr(RAe);function wg(e){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wg(e)}function l2(){return l2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l2.apply(this,arguments)}function DAe(e,t){return BAe(e)||FAe(e,t)||LAe(e,t)||$Ae()}function $Ae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LAe(e,t){if(e){if(typeof e=="string")return qR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qR(e,t)}}function qR(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function FAe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(h){d=!0,a=h}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function BAe(e){if(Array.isArray(e))return e}function GR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function f1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GR(Object(r),!0).forEach(function(n){zAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zAe(e,t,r){return t=UAe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UAe(e){var t=WAe(e,"string");return wg(t)=="symbol"?t:t+""}function WAe(e,t){if(wg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(wg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HAe(e){return Array.isArray(e)&&Nn(e[0])&&Nn(e[1])?e.join(" ~ "):e}var VAe=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,d=c===void 0?{}:c,h=t.payload,f=t.formatter,m=t.itemSorter,p=t.wrapperClassName,y=t.labelClassName,v=t.label,b=t.labelFormatter,N=t.accessibilityLayer,j=N===void 0?!1:N,w=function(){if(h&&h.length){var A={padding:0,margin:0},V=(m?cA(h,m):h).map(function(U,$){if(U.type==="none")return null;var H=f1({display:"block",paddingTop:4,paddingBottom:4,color:U.color||"#000"},l),F=U.formatter||f||HAe,R=U.value,z=U.name,G=R,ie=z;if(F&&G!=null&&ie!=null){var ae=F(R,z,U,$,h);if(Array.isArray(ae)){var X=DAe(ae,2);G=X[0],ie=X[1]}else G=ae}return q.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat($),style:H},Nn(ie)?q.createElement("span",{className:"recharts-tooltip-item-name"},ie):null,Nn(ie)?q.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,q.createElement("span",{className:"recharts-tooltip-item-value"},G),q.createElement("span",{className:"recharts-tooltip-item-unit"},U.unit||""))});return q.createElement("ul",{className:"recharts-tooltip-item-list",style:A},V)}return null},S=f1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),C=f1({margin:0},d),P=!It(v),T=P?v:"",O=Nt("recharts-default-tooltip",p),E=Nt("recharts-tooltip-label",y);P&&b&&h!==void 0&&h!==null&&(T=b(v,h));var D=j?{role:"status","aria-live":"assertive"}:{};return q.createElement("div",l2({className:O,style:S},D),q.createElement("p",{className:E,style:C},q.isValidElement(T)?T:"".concat(T)),w())};function jg(e){"@babel/helpers - typeof";return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jg(e)}function Wv(e,t,r){return t=qAe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qAe(e){var t=GAe(e,"string");return jg(t)=="symbol"?t:t+""}function GAe(e,t){if(jg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(jg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fm="recharts-tooltip-wrapper",KAe={visibility:"hidden"};function YAe(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return Nt(Fm,Wv(Wv(Wv(Wv({},"".concat(Fm,"-right"),Be(r)&&t&&Be(t.x)&&r>=t.x),"".concat(Fm,"-left"),Be(r)&&t&&Be(t.x)&&r<t.x),"".concat(Fm,"-bottom"),Be(n)&&t&&Be(t.y)&&n>=t.y),"".concat(Fm,"-top"),Be(n)&&t&&Be(t.y)&&n<t.y))}function KR(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,d=e.viewBoxDimension;if(i&&Be(i[n]))return i[n];var h=r[n]-l-a,f=r[n]+a;if(t[n])return o[n]?h:f;if(o[n]){var m=h,p=c[n];return m<p?Math.max(f,c[n]):Math.max(h,c[n])}var y=f+l,v=c[n]+d;return y>v?Math.max(h,c[n]):Math.max(f,c[n])}function ZAe(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function XAe(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,d,h,f;return o.height>0&&o.width>0&&r?(h=KR({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=KR({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=ZAe({translateX:h,translateY:f,useTranslate3d:l})):d=KAe,{cssProperties:d,cssClasses:YAe({translateX:h,translateY:f,coordinate:r})}}function cf(e){"@babel/helpers - typeof";return cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cf(e)}function YR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ZR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YR(Object(r),!0).forEach(function(n){d2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QAe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Uq(n.key),n)}}function eOe(e,t,r){return t&&QAe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function tOe(e,t,r){return t=lb(t),rOe(e,zq()?Reflect.construct(t,r||[],lb(e).constructor):t.apply(e,r))}function rOe(e,t){if(t&&(cf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nOe(e)}function nOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zq=function(){return!!e})()}function lb(e){return lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lb(e)}function sOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c2(e,t)}function c2(e,t){return c2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},c2(e,t)}function d2(e,t,r){return t=Uq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uq(e){var t=aOe(e,"string");return cf(t)=="symbol"?t:t+""}function aOe(e,t){if(cf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(cf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var XR=1,iOe=function(e){function t(){var r;JAe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=tOe(this,t,[].concat(a)),d2(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),d2(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,h;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(h=r.props.coordinate)===null||h===void 0?void 0:h.y)!==null&&d!==void 0?d:0}})}}),r}return sOe(t,e),eOe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>XR||Math.abs(n.height-this.state.lastBoundingBox.height)>XR)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,d=a.children,h=a.coordinate,f=a.hasPayload,m=a.isAnimationActive,p=a.offset,y=a.position,v=a.reverseDirection,b=a.useTranslate3d,N=a.viewBox,j=a.wrapperStyle,w=XAe({allowEscapeViewBox:o,coordinate:h,offsetTopLeft:p,position:y,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:b,viewBox:N}),S=w.cssClasses,C=w.cssProperties,P=ZR(ZR({transition:m&&i?"transform ".concat(l,"ms ").concat(c):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},j);return q.createElement("div",{tabIndex:-1,className:S,style:P,ref:function(O){n.wrapperNode=O}},d)}}])}(x.PureComponent),oOe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},nl={isSsr:oOe(),get:function(t){return nl[t]},set:function(t,r){if(typeof t=="string")nl[t]=r;else{var n=Object.keys(t);n&&n.length&&n.forEach(function(a){nl[a]=t[a]})}}};function df(e){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},df(e)}function JR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function QR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JR(Object(r),!0).forEach(function(n){dA(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cOe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Hq(n.key),n)}}function dOe(e,t,r){return t&&cOe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function uOe(e,t,r){return t=cb(t),hOe(e,Wq()?Reflect.construct(t,r||[],cb(e).constructor):t.apply(e,r))}function hOe(e,t){if(t&&(df(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fOe(e)}function fOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Wq=function(){return!!e})()}function cb(e){return cb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},cb(e)}function mOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u2(e,t)}function u2(e,t){return u2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},u2(e,t)}function dA(e,t,r){return t=Hq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hq(e){var t=pOe(e,"string");return df(t)=="symbol"?t:t+""}function pOe(e,t){if(df(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(df(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gOe(e){return e.dataKey}function xOe(e,t){return q.isValidElement(e)?q.cloneElement(e,t):typeof e=="function"?q.createElement(e,t):q.createElement(VAe,t)}var Oi=function(e){function t(){return lOe(this,t),uOe(this,t,arguments)}return mOe(t,e),dOe(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,d=a.content,h=a.coordinate,f=a.filterNull,m=a.isAnimationActive,p=a.offset,y=a.payload,v=a.payloadUniqBy,b=a.position,N=a.reverseDirection,j=a.useTranslate3d,w=a.viewBox,S=a.wrapperStyle,C=y??[];f&&C.length&&(C=Mq(y.filter(function(T){return T.value!=null&&(T.hide!==!0||n.props.includeHidden)}),v,gOe));var P=C.length>0;return q.createElement(iOe,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:m,active:i,coordinate:h,hasPayload:P,offset:p,position:b,reverseDirection:N,useTranslate3d:j,viewBox:w,wrapperStyle:S},xOe(d,QR(QR({},this.props),{},{payload:C})))}}])}(x.PureComponent);dA(Oi,"displayName","Tooltip");dA(Oi,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!nl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var vOe=Ao,yOe=function(){return vOe.Date.now()},bOe=yOe,wOe=/\s/;function jOe(e){for(var t=e.length;t--&&wOe.test(e.charAt(t)););return t}var NOe=jOe,_Oe=NOe,SOe=/^\s+/;function COe(e){return e&&e.slice(0,_Oe(e)+1).replace(SOe,"")}var POe=COe,kOe=POe,eD=Rc,EOe=tm,tD=NaN,TOe=/^[-+]0x[0-9a-f]+$/i,AOe=/^0b[01]+$/i,OOe=/^0o[0-7]+$/i,MOe=parseInt;function IOe(e){if(typeof e=="number")return e;if(EOe(e))return tD;if(eD(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=eD(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=kOe(e);var r=AOe.test(e);return r||OOe.test(e)?MOe(e.slice(2),r?2:8):TOe.test(e)?tD:+e}var Vq=IOe,ROe=Rc,m1=bOe,rD=Vq,DOe="Expected a function",$Oe=Math.max,LOe=Math.min;function FOe(e,t,r){var n,a,i,o,l,c,d=0,h=!1,f=!1,m=!0;if(typeof e!="function")throw new TypeError(DOe);t=rD(t)||0,ROe(r)&&(h=!!r.leading,f="maxWait"in r,i=f?$Oe(rD(r.maxWait)||0,t):i,m="trailing"in r?!!r.trailing:m);function p(P){var T=n,O=a;return n=a=void 0,d=P,o=e.apply(O,T),o}function y(P){return d=P,l=setTimeout(N,t),h?p(P):o}function v(P){var T=P-c,O=P-d,E=t-T;return f?LOe(E,i-O):E}function b(P){var T=P-c,O=P-d;return c===void 0||T>=t||T<0||f&&O>=i}function N(){var P=m1();if(b(P))return j(P);l=setTimeout(N,v(P))}function j(P){return l=void 0,m&&n?p(P):(n=a=void 0,o)}function w(){l!==void 0&&clearTimeout(l),d=0,n=c=a=l=void 0}function S(){return l===void 0?o:j(m1())}function C(){var P=m1(),T=b(P);if(n=arguments,a=this,c=P,T){if(l===void 0)return y(c);if(f)return clearTimeout(l),l=setTimeout(N,t),p(c)}return l===void 0&&(l=setTimeout(N,t)),o}return C.cancel=w,C.flush=S,C}var BOe=FOe,zOe=BOe,UOe=Rc,WOe="Expected a function";function HOe(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(WOe);return UOe(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),zOe(e,t,{leading:n,maxWait:t,trailing:a})}var VOe=HOe;const qq=tr(VOe);function Ng(e){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ng(e)}function nD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Hv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nD(Object(r),!0).forEach(function(n){qOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qOe(e,t,r){return t=GOe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GOe(e){var t=KOe(e,"string");return Ng(t)=="symbol"?t:t+""}function KOe(e,t){if(Ng(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ng(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YOe(e,t){return QOe(e)||JOe(e,t)||XOe(e,t)||ZOe()}function ZOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XOe(e,t){if(e){if(typeof e=="string")return sD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sD(e,t)}}function sD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function JOe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(h){d=!0,a=h}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function QOe(e){if(Array.isArray(e))return e}var aD=x.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,d=e.minWidth,h=d===void 0?0:d,f=e.minHeight,m=e.maxHeight,p=e.children,y=e.debounce,v=y===void 0?0:y,b=e.id,N=e.className,j=e.onResize,w=e.style,S=w===void 0?{}:w,C=x.useRef(null),P=x.useRef();P.current=j,x.useImperativeHandle(t,function(){return Object.defineProperty(C.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),C.current},configurable:!0})});var T=x.useState({containerWidth:a.width,containerHeight:a.height}),O=YOe(T,2),E=O[0],D=O[1],I=x.useCallback(function(V,U){D(function($){var H=Math.round(V),F=Math.round(U);return $.containerWidth===H&&$.containerHeight===F?$:{containerWidth:H,containerHeight:F}})},[]);x.useEffect(function(){var V=function(z){var G,ie=z[0].contentRect,ae=ie.width,X=ie.height;I(ae,X),(G=P.current)===null||G===void 0||G.call(P,ae,X)};v>0&&(V=qq(V,v,{trailing:!0,leading:!1}));var U=new ResizeObserver(V),$=C.current.getBoundingClientRect(),H=$.width,F=$.height;return I(H,F),U.observe(C.current),function(){U.disconnect()}},[I,v]);var A=x.useMemo(function(){var V=E.containerWidth,U=E.containerHeight;if(V<0||U<0)return null;rl(vd(o)||vd(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),rl(!r||r>0,"The aspect(%s) must be greater than zero.",r);var $=vd(o)?V:o,H=vd(c)?U:c;r&&r>0&&($?H=$/r:H&&($=H*r),m&&H>m&&(H=m)),rl($>0||H>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,$,H,o,c,h,f,r);var F=!Array.isArray(p)&&tl(p.type).endsWith("Chart");return q.Children.map(p,function(R){return q.isValidElement(R)?x.cloneElement(R,Hv({width:$,height:H},F?{style:Hv({height:"100%",width:"100%",maxHeight:H,maxWidth:$},R.props.style)}:{})):R})},[r,p,c,m,f,h,E,o]);return q.createElement("div",{id:b?"".concat(b):void 0,className:Nt("recharts-responsive-container",N),style:Hv(Hv({},S),{},{width:o,height:c,minWidth:h,minHeight:f,maxHeight:m}),ref:C},A)}),Dj=function(t){return null};Dj.displayName="Cell";function _g(e){"@babel/helpers - typeof";return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_g(e)}function iD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function h2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iD(Object(r),!0).forEach(function(n){e4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function e4e(e,t,r){return t=t4e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t4e(e){var t=r4e(e,"string");return _g(t)=="symbol"?t:t+""}function r4e(e,t){if(_g(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(_g(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Du={widthCache:{},cacheCount:0},n4e=2e3,s4e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},oD="recharts_measurement_span";function a4e(e){var t=h2({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var _p=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||nl.isSsr)return{width:0,height:0};var n=a4e(r),a=JSON.stringify({text:t,copyStyle:n});if(Du.widthCache[a])return Du.widthCache[a];try{var i=document.getElementById(oD);i||(i=document.createElement("span"),i.setAttribute("id",oD),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=h2(h2({},s4e),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return Du.widthCache[a]=c,++Du.cacheCount>n4e&&(Du.cacheCount=0,Du.widthCache={}),c}catch{return{width:0,height:0}}},i4e=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Sg(e){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sg(e)}function db(e,t){return d4e(e)||c4e(e,t)||l4e(e,t)||o4e()}function o4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l4e(e,t){if(e){if(typeof e=="string")return lD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lD(e,t)}}function lD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c4e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(h){d=!0,a=h}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function d4e(e){if(Array.isArray(e))return e}function u4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f4e(n.key),n)}}function h4e(e,t,r){return t&&cD(e.prototype,t),r&&cD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f4e(e){var t=m4e(e,"string");return Sg(t)=="symbol"?t:t+""}function m4e(e,t){if(Sg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var dD=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,uD=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,p4e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,g4e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Gq={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},x4e=Object.keys(Gq),ah="NaN";function v4e(e,t){return e*Gq[t]}var Vv=function(){function e(t,r){u4e(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!p4e.test(r)&&(this.num=NaN,this.unit=""),x4e.includes(r)&&(this.num=v4e(t,r),this.unit="px")}return h4e(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=g4e.exec(r))!==null&&n!==void 0?n:[],i=db(a,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function Kq(e){if(e.includes(ah))return ah;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=dD.exec(t))!==null&&r!==void 0?r:[],a=db(n,4),i=a[1],o=a[2],l=a[3],c=Vv.parse(i??""),d=Vv.parse(l??""),h=o==="*"?c.multiply(d):c.divide(d);if(h.isNaN())return ah;t=t.replace(dD,h.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,m=(f=uD.exec(t))!==null&&f!==void 0?f:[],p=db(m,4),y=p[1],v=p[2],b=p[3],N=Vv.parse(y??""),j=Vv.parse(b??""),w=v==="+"?N.add(j):N.subtract(j);if(w.isNaN())return ah;t=t.replace(uD,w.toString())}return t}var hD=/\(([^()]*)\)/;function y4e(e){for(var t=e;t.includes("(");){var r=hD.exec(t),n=db(r,2),a=n[1];t=t.replace(hD,Kq(a))}return t}function b4e(e){var t=e.replace(/\s+/g,"");return t=y4e(t),t=Kq(t),t}function w4e(e){try{return b4e(e)}catch{return ah}}function p1(e){var t=w4e(e.slice(5,-1));return t===ah?"":t}var j4e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],N4e=["dx","dy","angle","className","breakAll"];function f2(){return f2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f2.apply(this,arguments)}function fD(e,t){if(e==null)return{};var r=_4e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function _4e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function mD(e,t){return k4e(e)||P4e(e,t)||C4e(e,t)||S4e()}function S4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C4e(e,t){if(e){if(typeof e=="string")return pD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pD(e,t)}}function pD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function P4e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(h){d=!0,a=h}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function k4e(e){if(Array.isArray(e))return e}var Yq=/[ \f\n\r\t\v\u2028\u2029]+/,Zq=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var i=[];It(r)||(n?i=r.toString().split(""):i=r.toString().split(Yq));var o=i.map(function(c){return{word:c,width:_p(c,a).width}}),l=n?0:_p("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},E4e=function(t,r,n,a,i){var o=t.maxLines,l=t.children,c=t.style,d=t.breakAll,h=Be(o),f=l,m=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return $.reduce(function(H,F){var R=F.word,z=F.width,G=H[H.length-1];if(G&&(a==null||i||G.width+z+n<Number(a)))G.words.push(R),G.width+=z+n;else{var ie={words:[R],width:z};H.push(ie)}return H},[])},p=m(r),y=function($){return $.reduce(function(H,F){return H.width>F.width?H:F})};if(!h)return p;for(var v="",b=function($){var H=f.slice(0,$),F=Zq({breakAll:d,style:c,children:H+v}).wordsWithComputedWidth,R=m(F),z=R.length>o||y(R).width>Number(a);return[z,R]},N=0,j=f.length-1,w=0,S;N<=j&&w<=f.length-1;){var C=Math.floor((N+j)/2),P=C-1,T=b(P),O=mD(T,2),E=O[0],D=O[1],I=b(C),A=mD(I,1),V=A[0];if(!E&&!V&&(N=C+1),E&&V&&(j=C-1),!E&&V){S=D;break}w++}return S||p},gD=function(t){var r=It(t)?[]:t.toString().split(Yq);return[{words:r}]},T4e=function(t){var r=t.width,n=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||n)&&!nl.isSsr){var c,d,h=Zq({breakAll:o,children:a,style:i});if(h){var f=h.wordsWithComputedWidth,m=h.spaceWidth;c=f,d=m}else return gD(a);return E4e({breakAll:o,children:a,maxLines:l,style:i},c,d,r,n)}return gD(a)},xD="#808080",Xd=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,d=c===void 0?"0.71em":c,h=t.scaleToFit,f=h===void 0?!1:h,m=t.textAnchor,p=m===void 0?"start":m,y=t.verticalAnchor,v=y===void 0?"end":y,b=t.fill,N=b===void 0?xD:b,j=fD(t,j4e),w=x.useMemo(function(){return T4e({breakAll:j.breakAll,children:j.children,maxLines:j.maxLines,scaleToFit:f,style:j.style,width:j.width})},[j.breakAll,j.children,j.maxLines,f,j.style,j.width]),S=j.dx,C=j.dy,P=j.angle,T=j.className,O=j.breakAll,E=fD(j,N4e);if(!Nn(n)||!Nn(i))return null;var D=n+(Be(S)?S:0),I=i+(Be(C)?C:0),A;switch(v){case"start":A=p1("calc(".concat(d,")"));break;case"middle":A=p1("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:A=p1("calc(".concat(w.length-1," * -").concat(l,")"));break}var V=[];if(f){var U=w[0].width,$=j.width;V.push("scale(".concat((Be($)?$/U:1)/U,")"))}return P&&V.push("rotate(".concat(P,", ").concat(D,", ").concat(I,")")),V.length&&(E.transform=V.join(" ")),q.createElement("text",f2({},ht(E,!0),{x:D,y:I,className:Nt("recharts-text",T),textAnchor:p,fill:N.includes("url")?xD:N}),w.map(function(H,F){var R=H.words.join(O?"":" ");return q.createElement("tspan",{x:D,dy:F===0?A:l,key:"".concat(R,"-").concat(F)},R)}))};function mc(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function A4e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function uA(e){let t,r,n;e.length!==2?(t=mc,r=(l,c)=>mc(e(l),c),n=(l,c)=>e(l)-c):(t=e===mc||e===A4e?e:O4e,r=e,n=e);function a(l,c,d=0,h=l.length){if(d<h){if(t(c,c)!==0)return h;do{const f=d+h>>>1;r(l[f],c)<0?d=f+1:h=f}while(d<h)}return d}function i(l,c,d=0,h=l.length){if(d<h){if(t(c,c)!==0)return h;do{const f=d+h>>>1;r(l[f],c)<=0?d=f+1:h=f}while(d<h)}return d}function o(l,c,d=0,h=l.length){const f=a(l,c,d,h-1);return f>d&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:o,right:i}}function O4e(){return 0}function Xq(e){return e===null?NaN:+e}function*M4e(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const I4e=uA(mc),Ix=I4e.right;uA(Xq).center;class vD extends Map{constructor(t,r=$4e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(yD(this,t))}has(t){return super.has(yD(this,t))}set(t,r){return super.set(R4e(this,t),r)}delete(t){return super.delete(D4e(this,t))}}function yD({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function R4e({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function D4e({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function $4e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function L4e(e=mc){if(e===mc)return Jq;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function Jq(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const F4e=Math.sqrt(50),B4e=Math.sqrt(10),z4e=Math.sqrt(2);function ub(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=F4e?10:i>=B4e?5:i>=z4e?2:1;let l,c,d;return a<0?(d=Math.pow(10,-a)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,a)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=r&&r<2?ub(e,t,r*2):[l,c,d]}function m2(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?ub(t,e,r):ub(e,t,r);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(n)if(o<0)for(let d=0;d<l;++d)c[d]=(i-d)/-o;else for(let d=0;d<l;++d)c[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(a+d)/-o;else for(let d=0;d<l;++d)c[d]=(a+d)*o;return c}function p2(e,t,r){return t=+t,e=+e,r=+r,ub(e,t,r)[2]}function g2(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?p2(t,e,r):p2(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function bD(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function wD(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Qq(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?Jq:L4e(a);n>r;){if(n-r>600){const c=n-r+1,d=t-r+1,h=Math.log(c),f=.5*Math.exp(2*h/3),m=.5*Math.sqrt(h*f*(c-f)/c)*(d-c/2<0?-1:1),p=Math.max(r,Math.floor(t-d*f/c+m)),y=Math.min(n,Math.floor(t+(c-d)*f/c+m));Qq(e,t,p,y,a)}const i=e[t];let o=r,l=n;for(Bm(e,r,t),a(e[n],i)>0&&Bm(e,r,n);o<l;){for(Bm(e,o,l),++o,--l;a(e[o],i)<0;)++o;for(;a(e[l],i)>0;)--l}a(e[r],i)===0?Bm(e,r,l):(++l,Bm(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function Bm(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function U4e(e,t,r){if(e=Float64Array.from(M4e(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return wD(e);if(t>=1)return bD(e);var n,a=(n-1)*t,i=Math.floor(a),o=bD(Qq(e,i).subarray(0,i+1)),l=wD(e.subarray(i+1));return o+(l-o)*(a-i)}}function W4e(e,t,r=Xq){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function H4e(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function pi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Sl(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const x2=Symbol("implicit");function hA(){var e=new vD,t=[],r=[],n=x2;function a(i){let o=e.get(i);if(o===void 0){if(n!==x2)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new vD;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return hA(t,r).unknown(n)},pi.apply(a,arguments),a}function Cg(){var e=hA().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,l=!1,c=0,d=0,h=.5;delete e.unknown;function f(){var m=t().length,p=a<n,y=p?a:n,v=p?n:a;i=(v-y)/Math.max(1,m-c+d*2),l&&(i=Math.floor(i)),y+=(v-y-i*(m-c))*h,o=i*(1-c),l&&(y=Math.round(y),o=Math.round(o));var b=H4e(m).map(function(N){return y+i*N});return r(p?b.reverse():b)}return e.domain=function(m){return arguments.length?(t(m),f()):t()},e.range=function(m){return arguments.length?([n,a]=m,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(m){return[n,a]=m,n=+n,a=+a,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(m){return arguments.length?(l=!!m,f()):l},e.padding=function(m){return arguments.length?(c=Math.min(1,d=+m),f()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),f()):c},e.paddingOuter=function(m){return arguments.length?(d=+m,f()):d},e.align=function(m){return arguments.length?(h=Math.max(0,Math.min(1,m)),f()):h},e.copy=function(){return Cg(t(),[n,a]).round(l).paddingInner(c).paddingOuter(d).align(h)},pi.apply(f(),arguments)}function eG(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return eG(t())},e}function Sp(){return eG(Cg.apply(null,arguments).paddingInner(1))}function fA(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function tG(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Rx(){}var Pg=.7,hb=1/Pg,Ch="\\s*([+-]?\\d+)\\s*",kg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",jo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",V4e=/^#([0-9a-f]{3,8})$/,q4e=new RegExp(`^rgb\\(${Ch},${Ch},${Ch}\\)$`),G4e=new RegExp(`^rgb\\(${jo},${jo},${jo}\\)$`),K4e=new RegExp(`^rgba\\(${Ch},${Ch},${Ch},${kg}\\)$`),Y4e=new RegExp(`^rgba\\(${jo},${jo},${jo},${kg}\\)$`),Z4e=new RegExp(`^hsl\\(${kg},${jo},${jo}\\)$`),X4e=new RegExp(`^hsla\\(${kg},${jo},${jo},${kg}\\)$`),jD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fA(Rx,Eg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ND,formatHex:ND,formatHex8:J4e,formatHsl:Q4e,formatRgb:_D,toString:_D});function ND(){return this.rgb().formatHex()}function J4e(){return this.rgb().formatHex8()}function Q4e(){return rG(this).formatHsl()}function _D(){return this.rgb().formatRgb()}function Eg(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=V4e.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?SD(t):r===3?new Ks(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?qv(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?qv(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=q4e.exec(e))?new Ks(t[1],t[2],t[3],1):(t=G4e.exec(e))?new Ks(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=K4e.exec(e))?qv(t[1],t[2],t[3],t[4]):(t=Y4e.exec(e))?qv(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Z4e.exec(e))?kD(t[1],t[2]/100,t[3]/100,1):(t=X4e.exec(e))?kD(t[1],t[2]/100,t[3]/100,t[4]):jD.hasOwnProperty(e)?SD(jD[e]):e==="transparent"?new Ks(NaN,NaN,NaN,0):null}function SD(e){return new Ks(e>>16&255,e>>8&255,e&255,1)}function qv(e,t,r,n){return n<=0&&(e=t=r=NaN),new Ks(e,t,r,n)}function eMe(e){return e instanceof Rx||(e=Eg(e)),e?(e=e.rgb(),new Ks(e.r,e.g,e.b,e.opacity)):new Ks}function v2(e,t,r,n){return arguments.length===1?eMe(e):new Ks(e,t,r,n??1)}function Ks(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}fA(Ks,v2,tG(Rx,{brighter(e){return e=e==null?hb:Math.pow(hb,e),new Ks(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Pg:Math.pow(Pg,e),new Ks(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ks(Ad(this.r),Ad(this.g),Ad(this.b),fb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:CD,formatHex:CD,formatHex8:tMe,formatRgb:PD,toString:PD}));function CD(){return`#${yd(this.r)}${yd(this.g)}${yd(this.b)}`}function tMe(){return`#${yd(this.r)}${yd(this.g)}${yd(this.b)}${yd((isNaN(this.opacity)?1:this.opacity)*255)}`}function PD(){const e=fb(this.opacity);return`${e===1?"rgb(":"rgba("}${Ad(this.r)}, ${Ad(this.g)}, ${Ad(this.b)}${e===1?")":`, ${e})`}`}function fb(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ad(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function yd(e){return e=Ad(e),(e<16?"0":"")+e.toString(16)}function kD(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Di(e,t,r,n)}function rG(e){if(e instanceof Di)return new Di(e.h,e.s,e.l,e.opacity);if(e instanceof Rx||(e=Eg(e)),!e)return new Di;if(e instanceof Di)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-a,c=(i+a)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new Di(o,l,c,e.opacity)}function rMe(e,t,r,n){return arguments.length===1?rG(e):new Di(e,t,r,n??1)}function Di(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}fA(Di,rMe,tG(Rx,{brighter(e){return e=e==null?hb:Math.pow(hb,e),new Di(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Pg:Math.pow(Pg,e),new Di(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Ks(g1(e>=240?e-240:e+120,a,n),g1(e,a,n),g1(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Di(ED(this.h),Gv(this.s),Gv(this.l),fb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=fb(this.opacity);return`${e===1?"hsl(":"hsla("}${ED(this.h)}, ${Gv(this.s)*100}%, ${Gv(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ED(e){return e=(e||0)%360,e<0?e+360:e}function Gv(e){return Math.max(0,Math.min(1,e||0))}function g1(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const mA=e=>()=>e;function nMe(e,t){return function(r){return e+r*t}}function sMe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function aMe(e){return(e=+e)==1?nG:function(t,r){return r-t?sMe(t,r,e):mA(isNaN(t)?r:t)}}function nG(e,t){var r=t-e;return r?nMe(e,r):mA(isNaN(e)?t:e)}const TD=function e(t){var r=aMe(t);function n(a,i){var o=r((a=v2(a)).r,(i=v2(i)).r),l=r(a.g,i.g),c=r(a.b,i.b),d=nG(a.opacity,i.opacity);return function(h){return a.r=o(h),a.g=l(h),a.b=c(h),a.opacity=d(h),a+""}}return n.gamma=e,n}(1);function iMe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function oMe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function lMe(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=cm(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=a[o](l);return i}}function cMe(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function mb(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function dMe(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=cm(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var y2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,x1=new RegExp(y2.source,"g");function uMe(e){return function(){return e}}function hMe(e){return function(t){return e(t)+""}}function fMe(e,t){var r=y2.lastIndex=x1.lastIndex=0,n,a,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=y2.exec(e))&&(a=x1.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:mb(n,a)})),r=x1.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?hMe(c[0].x):uMe(t):(t=c.length,function(d){for(var h=0,f;h<t;++h)l[(f=c[h]).i]=f.x(d);return l.join("")})}function cm(e,t){var r=typeof t,n;return t==null||r==="boolean"?mA(t):(r==="number"?mb:r==="string"?(n=Eg(t))?(t=n,TD):fMe:t instanceof Eg?TD:t instanceof Date?cMe:oMe(t)?iMe:Array.isArray(t)?lMe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?dMe:mb)(e,t)}function pA(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function mMe(e,t){t===void 0&&(t=e,e=cm);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function pMe(e){return function(){return e}}function pb(e){return+e}var AD=[0,1];function Ss(e){return e}function b2(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:pMe(isNaN(t)?NaN:.5)}function gMe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function xMe(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=b2(a,n),i=r(o,i)):(n=b2(n,a),i=r(i,o)),function(l){return i(n(l))}}function vMe(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=b2(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=Ix(e,l,1,n)-1;return i[c](a[c](l))}}function Dx(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function $j(){var e=AD,t=AD,r=cm,n,a,i,o=Ss,l,c,d;function h(){var m=Math.min(e.length,t.length);return o!==Ss&&(o=gMe(e[0],e[m-1])),l=m>2?vMe:xMe,c=d=null,f}function f(m){return m==null||isNaN(m=+m)?i:(c||(c=l(e.map(n),t,r)))(n(o(m)))}return f.invert=function(m){return o(a((d||(d=l(t,e.map(n),mb)))(m)))},f.domain=function(m){return arguments.length?(e=Array.from(m,pb),h()):e.slice()},f.range=function(m){return arguments.length?(t=Array.from(m),h()):t.slice()},f.rangeRound=function(m){return t=Array.from(m),r=pA,h()},f.clamp=function(m){return arguments.length?(o=m?!0:Ss,h()):o!==Ss},f.interpolate=function(m){return arguments.length?(r=m,h()):r},f.unknown=function(m){return arguments.length?(i=m,f):i},function(m,p){return n=m,a=p,h()}}function gA(){return $j()(Ss,Ss)}function yMe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function gb(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function uf(e){return e=gb(Math.abs(e)),e?e[1]:NaN}function bMe(e,t){return function(r,n){for(var a=r.length,i=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function wMe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var jMe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Tg(e){if(!(t=jMe.exec(e)))throw new Error("invalid format: "+e);var t;return new xA({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Tg.prototype=xA.prototype;function xA(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}xA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function NMe(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var sG;function _Me(e,t){var r=gb(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(sG=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+gb(e,Math.max(0,t+i-1))[0]}function OD(e,t){var r=gb(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const MD={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:yMe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>OD(e*100,t),r:OD,s:_Me,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ID(e){return e}var RD=Array.prototype.map,DD=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function SMe(e){var t=e.grouping===void 0||e.thousands===void 0?ID:bMe(RD.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?ID:wMe(RD.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(f){f=Tg(f);var m=f.fill,p=f.align,y=f.sign,v=f.symbol,b=f.zero,N=f.width,j=f.comma,w=f.precision,S=f.trim,C=f.type;C==="n"?(j=!0,C="g"):MD[C]||(w===void 0&&(w=12),S=!0,C="g"),(b||m==="0"&&p==="=")&&(b=!0,m="0",p="=");var P=v==="$"?r:v==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",T=v==="$"?n:/[%p]/.test(C)?o:"",O=MD[C],E=/[defgprs%]/.test(C);w=w===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function D(I){var A=P,V=T,U,$,H;if(C==="c")V=O(I)+V,I="";else{I=+I;var F=I<0||1/I<0;if(I=isNaN(I)?c:O(Math.abs(I),w),S&&(I=NMe(I)),F&&+I==0&&y!=="+"&&(F=!1),A=(F?y==="("?y:l:y==="-"||y==="("?"":y)+A,V=(C==="s"?DD[8+sG/3]:"")+V+(F&&y==="("?")":""),E){for(U=-1,$=I.length;++U<$;)if(H=I.charCodeAt(U),48>H||H>57){V=(H===46?a+I.slice(U+1):I.slice(U))+V,I=I.slice(0,U);break}}}j&&!b&&(I=t(I,1/0));var R=A.length+I.length+V.length,z=R<N?new Array(N-R+1).join(m):"";switch(j&&b&&(I=t(z+I,z.length?N-V.length:1/0),z=""),p){case"<":I=A+I+V+z;break;case"=":I=A+z+I+V;break;case"^":I=z.slice(0,R=z.length>>1)+A+I+V+z.slice(R);break;default:I=z+A+I+V;break}return i(I)}return D.toString=function(){return f+""},D}function h(f,m){var p=d((f=Tg(f),f.type="f",f)),y=Math.max(-8,Math.min(8,Math.floor(uf(m)/3)))*3,v=Math.pow(10,-y),b=DD[8+y/3];return function(N){return p(v*N)+b}}return{format:d,formatPrefix:h}}var Kv,vA,aG;CMe({thousands:",",grouping:[3],currency:["$",""]});function CMe(e){return Kv=SMe(e),vA=Kv.format,aG=Kv.formatPrefix,Kv}function PMe(e){return Math.max(0,-uf(Math.abs(e)))}function kMe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(uf(t)/3)))*3-uf(Math.abs(e)))}function EMe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,uf(t)-uf(e))+1}function iG(e,t,r,n){var a=g2(e,t,r),i;switch(n=Tg(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=kMe(a,o))&&(n.precision=i),aG(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=EMe(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=PMe(a))&&(n.precision=i-(n.type==="%")*2);break}}return vA(n)}function $c(e){var t=e.domain;return e.ticks=function(r){var n=t();return m2(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return iG(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],l=n[i],c,d,h=10;for(l<o&&(d=o,o=l,l=d,d=a,a=i,i=d);h-- >0;){if(d=p2(o,l,r),d===c)return n[a]=o,n[i]=l,t(n);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function xb(){var e=gA();return e.copy=function(){return Dx(e,xb())},pi.apply(e,arguments),$c(e)}function oG(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,pb),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return oG(e).unknown(t)},e=arguments.length?Array.from(e,pb):[0,1],$c(r)}function lG(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function $D(e){return Math.log(e)}function LD(e){return Math.exp(e)}function TMe(e){return-Math.log(-e)}function AMe(e){return-Math.exp(-e)}function OMe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function MMe(e){return e===10?OMe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function IMe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function FD(e){return(t,r)=>-e(-t,r)}function yA(e){const t=e($D,LD),r=t.domain;let n=10,a,i;function o(){return a=IMe(n),i=MMe(n),r()[0]<0?(a=FD(a),i=FD(i),e(TMe,AMe)):e($D,LD),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let d=c[0],h=c[c.length-1];const f=h<d;f&&([d,h]=[h,d]);let m=a(d),p=a(h),y,v;const b=l==null?10:+l;let N=[];if(!(n%1)&&p-m<b){if(m=Math.floor(m),p=Math.ceil(p),d>0){for(;m<=p;++m)for(y=1;y<n;++y)if(v=m<0?y/i(-m):y*i(m),!(v<d)){if(v>h)break;N.push(v)}}else for(;m<=p;++m)for(y=n-1;y>=1;--y)if(v=m>0?y/i(-m):y*i(m),!(v<d)){if(v>h)break;N.push(v)}N.length*2<b&&(N=m2(d,h,b))}else N=m2(m,p,Math.min(p-m,b)).map(i);return f?N.reverse():N},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Tg(c)).precision==null&&(c.trim=!0),c=vA(c)),l===1/0)return c;const d=Math.max(1,n*l/t.ticks().length);return h=>{let f=h/i(Math.round(a(h)));return f*n<n-.5&&(f*=n),f<=d?c(h):""}},t.nice=()=>r(lG(r(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function cG(){const e=yA($j()).domain([1,10]);return e.copy=()=>Dx(e,cG()).base(e.base()),pi.apply(e,arguments),e}function BD(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function zD(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function bA(e){var t=1,r=e(BD(t),zD(t));return r.constant=function(n){return arguments.length?e(BD(t=+n),zD(t)):t},$c(r)}function dG(){var e=bA($j());return e.copy=function(){return Dx(e,dG()).constant(e.constant())},pi.apply(e,arguments)}function UD(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function RMe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function DMe(e){return e<0?-e*e:e*e}function wA(e){var t=e(Ss,Ss),r=1;function n(){return r===1?e(Ss,Ss):r===.5?e(RMe,DMe):e(UD(r),UD(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},$c(t)}function jA(){var e=wA($j());return e.copy=function(){return Dx(e,jA()).exponent(e.exponent())},pi.apply(e,arguments),e}function $Me(){return jA.apply(null,arguments).exponent(.5)}function WD(e){return Math.sign(e)*e*e}function LMe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function uG(){var e=gA(),t=[0,1],r=!1,n;function a(i){var o=LMe(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(WD(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,pb)).map(WD)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return uG(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},pi.apply(a,arguments),$c(a)}function hG(){var e=[],t=[],r=[],n;function a(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=W4e(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[Ix(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(mc),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return hG().domain(e).range(t).unknown(n)},pi.apply(i,arguments)}function fG(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[Ix(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var d=a.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,n[0]]:d>=r?[n[r-1],t]:[n[d-1],n[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return fG().domain([e,t]).range(a).unknown(i)},pi.apply($c(o),arguments)}function mG(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[Ix(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return mG().domain(e).range(t).unknown(r)},pi.apply(a,arguments)}const v1=new Date,y1=new Date;function En(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},a.filter=i=>En(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(v1.setTime(+i),y1.setTime(+o),e(v1),e(y1),Math.floor(r(v1,y1))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const vb=En(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);vb.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?En(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):vb);vb.range;const Zo=1e3,Xa=Zo*60,Xo=Xa*60,pl=Xo*24,NA=pl*7,HD=pl*30,b1=pl*365,bd=En(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Zo)},(e,t)=>(t-e)/Zo,e=>e.getUTCSeconds());bd.range;const _A=En(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zo)},(e,t)=>{e.setTime(+e+t*Xa)},(e,t)=>(t-e)/Xa,e=>e.getMinutes());_A.range;const SA=En(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Xa)},(e,t)=>(t-e)/Xa,e=>e.getUTCMinutes());SA.range;const CA=En(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zo-e.getMinutes()*Xa)},(e,t)=>{e.setTime(+e+t*Xo)},(e,t)=>(t-e)/Xo,e=>e.getHours());CA.range;const PA=En(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Xo)},(e,t)=>(t-e)/Xo,e=>e.getUTCHours());PA.range;const $x=En(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Xa)/pl,e=>e.getDate()-1);$x.range;const Lj=En(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/pl,e=>e.getUTCDate()-1);Lj.range;const pG=En(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/pl,e=>Math.floor(e/pl));pG.range;function hu(e){return En(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Xa)/NA)}const Fj=hu(0),yb=hu(1),FMe=hu(2),BMe=hu(3),hf=hu(4),zMe=hu(5),UMe=hu(6);Fj.range;yb.range;FMe.range;BMe.range;hf.range;zMe.range;UMe.range;function fu(e){return En(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/NA)}const Bj=fu(0),bb=fu(1),WMe=fu(2),HMe=fu(3),ff=fu(4),VMe=fu(5),qMe=fu(6);Bj.range;bb.range;WMe.range;HMe.range;ff.range;VMe.range;qMe.range;const kA=En(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());kA.range;const EA=En(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());EA.range;const gl=En(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());gl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:En(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});gl.range;const xl=En(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());xl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:En(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});xl.range;function gG(e,t,r,n,a,i){const o=[[bd,1,Zo],[bd,5,5*Zo],[bd,15,15*Zo],[bd,30,30*Zo],[i,1,Xa],[i,5,5*Xa],[i,15,15*Xa],[i,30,30*Xa],[a,1,Xo],[a,3,3*Xo],[a,6,6*Xo],[a,12,12*Xo],[n,1,pl],[n,2,2*pl],[r,1,NA],[t,1,HD],[t,3,3*HD],[e,1,b1]];function l(d,h,f){const m=h<d;m&&([d,h]=[h,d]);const p=f&&typeof f.range=="function"?f:c(d,h,f),y=p?p.range(d,+h+1):[];return m?y.reverse():y}function c(d,h,f){const m=Math.abs(h-d)/f,p=uA(([,,b])=>b).right(o,m);if(p===o.length)return e.every(g2(d/b1,h/b1,f));if(p===0)return vb.every(Math.max(g2(d,h,f),1));const[y,v]=o[m/o[p-1][2]<o[p][2]/m?p-1:p];return y.every(v)}return[l,c]}const[GMe,KMe]=gG(xl,EA,Bj,pG,PA,SA),[YMe,ZMe]=gG(gl,kA,Fj,$x,CA,_A);function w1(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function j1(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function zm(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function XMe(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=Um(a),h=Wm(a),f=Um(i),m=Wm(i),p=Um(o),y=Wm(o),v=Um(l),b=Wm(l),N=Um(c),j=Wm(c),w={a:F,A:R,b:z,B:G,c:null,d:ZD,e:ZD,f:b3e,g:T3e,G:O3e,H:x3e,I:v3e,j:y3e,L:xG,m:w3e,M:j3e,p:ie,q:ae,Q:QD,s:e$,S:N3e,u:_3e,U:S3e,V:C3e,w:P3e,W:k3e,x:null,X:null,y:E3e,Y:A3e,Z:M3e,"%":JD},S={a:X,A:le,b:fe,B:ge,c:null,d:XD,e:XD,f:$3e,g:G3e,G:Y3e,H:I3e,I:R3e,j:D3e,L:yG,m:L3e,M:F3e,p:ee,q:re,Q:QD,s:e$,S:B3e,u:z3e,U:U3e,V:W3e,w:H3e,W:V3e,x:null,X:null,y:q3e,Y:K3e,Z:Z3e,"%":JD},C={a:D,A:I,b:A,B:V,c:U,d:KD,e:KD,f:f3e,g:GD,G:qD,H:YD,I:YD,j:c3e,L:h3e,m:l3e,M:d3e,p:E,q:o3e,Q:p3e,s:g3e,S:u3e,u:r3e,U:n3e,V:s3e,w:t3e,W:a3e,x:$,X:H,y:GD,Y:qD,Z:i3e,"%":m3e};w.x=P(r,w),w.X=P(n,w),w.c=P(t,w),S.x=P(r,S),S.X=P(n,S),S.c=P(t,S);function P(ue,Ne){return function(je){var Y=[],xe=-1,Me=0,$e=ue.length,ce,Le,qe;for(je instanceof Date||(je=new Date(+je));++xe<$e;)ue.charCodeAt(xe)===37&&(Y.push(ue.slice(Me,xe)),(Le=VD[ce=ue.charAt(++xe)])!=null?ce=ue.charAt(++xe):Le=ce==="e"?" ":"0",(qe=Ne[ce])&&(ce=qe(je,Le)),Y.push(ce),Me=xe+1);return Y.push(ue.slice(Me,xe)),Y.join("")}}function T(ue,Ne){return function(je){var Y=zm(1900,void 0,1),xe=O(Y,ue,je+="",0),Me,$e;if(xe!=je.length)return null;if("Q"in Y)return new Date(Y.Q);if("s"in Y)return new Date(Y.s*1e3+("L"in Y?Y.L:0));if(Ne&&!("Z"in Y)&&(Y.Z=0),"p"in Y&&(Y.H=Y.H%12+Y.p*12),Y.m===void 0&&(Y.m="q"in Y?Y.q:0),"V"in Y){if(Y.V<1||Y.V>53)return null;"w"in Y||(Y.w=1),"Z"in Y?(Me=j1(zm(Y.y,0,1)),$e=Me.getUTCDay(),Me=$e>4||$e===0?bb.ceil(Me):bb(Me),Me=Lj.offset(Me,(Y.V-1)*7),Y.y=Me.getUTCFullYear(),Y.m=Me.getUTCMonth(),Y.d=Me.getUTCDate()+(Y.w+6)%7):(Me=w1(zm(Y.y,0,1)),$e=Me.getDay(),Me=$e>4||$e===0?yb.ceil(Me):yb(Me),Me=$x.offset(Me,(Y.V-1)*7),Y.y=Me.getFullYear(),Y.m=Me.getMonth(),Y.d=Me.getDate()+(Y.w+6)%7)}else("W"in Y||"U"in Y)&&("w"in Y||(Y.w="u"in Y?Y.u%7:"W"in Y?1:0),$e="Z"in Y?j1(zm(Y.y,0,1)).getUTCDay():w1(zm(Y.y,0,1)).getDay(),Y.m=0,Y.d="W"in Y?(Y.w+6)%7+Y.W*7-($e+5)%7:Y.w+Y.U*7-($e+6)%7);return"Z"in Y?(Y.H+=Y.Z/100|0,Y.M+=Y.Z%100,j1(Y)):w1(Y)}}function O(ue,Ne,je,Y){for(var xe=0,Me=Ne.length,$e=je.length,ce,Le;xe<Me;){if(Y>=$e)return-1;if(ce=Ne.charCodeAt(xe++),ce===37){if(ce=Ne.charAt(xe++),Le=C[ce in VD?Ne.charAt(xe++):ce],!Le||(Y=Le(ue,je,Y))<0)return-1}else if(ce!=je.charCodeAt(Y++))return-1}return Y}function E(ue,Ne,je){var Y=d.exec(Ne.slice(je));return Y?(ue.p=h.get(Y[0].toLowerCase()),je+Y[0].length):-1}function D(ue,Ne,je){var Y=p.exec(Ne.slice(je));return Y?(ue.w=y.get(Y[0].toLowerCase()),je+Y[0].length):-1}function I(ue,Ne,je){var Y=f.exec(Ne.slice(je));return Y?(ue.w=m.get(Y[0].toLowerCase()),je+Y[0].length):-1}function A(ue,Ne,je){var Y=N.exec(Ne.slice(je));return Y?(ue.m=j.get(Y[0].toLowerCase()),je+Y[0].length):-1}function V(ue,Ne,je){var Y=v.exec(Ne.slice(je));return Y?(ue.m=b.get(Y[0].toLowerCase()),je+Y[0].length):-1}function U(ue,Ne,je){return O(ue,t,Ne,je)}function $(ue,Ne,je){return O(ue,r,Ne,je)}function H(ue,Ne,je){return O(ue,n,Ne,je)}function F(ue){return o[ue.getDay()]}function R(ue){return i[ue.getDay()]}function z(ue){return c[ue.getMonth()]}function G(ue){return l[ue.getMonth()]}function ie(ue){return a[+(ue.getHours()>=12)]}function ae(ue){return 1+~~(ue.getMonth()/3)}function X(ue){return o[ue.getUTCDay()]}function le(ue){return i[ue.getUTCDay()]}function fe(ue){return c[ue.getUTCMonth()]}function ge(ue){return l[ue.getUTCMonth()]}function ee(ue){return a[+(ue.getUTCHours()>=12)]}function re(ue){return 1+~~(ue.getUTCMonth()/3)}return{format:function(ue){var Ne=P(ue+="",w);return Ne.toString=function(){return ue},Ne},parse:function(ue){var Ne=T(ue+="",!1);return Ne.toString=function(){return ue},Ne},utcFormat:function(ue){var Ne=P(ue+="",S);return Ne.toString=function(){return ue},Ne},utcParse:function(ue){var Ne=T(ue+="",!0);return Ne.toString=function(){return ue},Ne}}}var VD={"-":"",_:" ",0:"0"},Bn=/^\s*\d+/,JMe=/^%/,QMe=/[\\^$*+?|[\]().{}]/g;function Yt(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function e3e(e){return e.replace(QMe,"\\$&")}function Um(e){return new RegExp("^(?:"+e.map(e3e).join("|")+")","i")}function Wm(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function t3e(e,t,r){var n=Bn.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function r3e(e,t,r){var n=Bn.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function n3e(e,t,r){var n=Bn.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function s3e(e,t,r){var n=Bn.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function a3e(e,t,r){var n=Bn.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function qD(e,t,r){var n=Bn.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function GD(e,t,r){var n=Bn.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function i3e(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function o3e(e,t,r){var n=Bn.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function l3e(e,t,r){var n=Bn.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function KD(e,t,r){var n=Bn.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function c3e(e,t,r){var n=Bn.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function YD(e,t,r){var n=Bn.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function d3e(e,t,r){var n=Bn.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function u3e(e,t,r){var n=Bn.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function h3e(e,t,r){var n=Bn.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function f3e(e,t,r){var n=Bn.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function m3e(e,t,r){var n=JMe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function p3e(e,t,r){var n=Bn.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function g3e(e,t,r){var n=Bn.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function ZD(e,t){return Yt(e.getDate(),t,2)}function x3e(e,t){return Yt(e.getHours(),t,2)}function v3e(e,t){return Yt(e.getHours()%12||12,t,2)}function y3e(e,t){return Yt(1+$x.count(gl(e),e),t,3)}function xG(e,t){return Yt(e.getMilliseconds(),t,3)}function b3e(e,t){return xG(e,t)+"000"}function w3e(e,t){return Yt(e.getMonth()+1,t,2)}function j3e(e,t){return Yt(e.getMinutes(),t,2)}function N3e(e,t){return Yt(e.getSeconds(),t,2)}function _3e(e){var t=e.getDay();return t===0?7:t}function S3e(e,t){return Yt(Fj.count(gl(e)-1,e),t,2)}function vG(e){var t=e.getDay();return t>=4||t===0?hf(e):hf.ceil(e)}function C3e(e,t){return e=vG(e),Yt(hf.count(gl(e),e)+(gl(e).getDay()===4),t,2)}function P3e(e){return e.getDay()}function k3e(e,t){return Yt(yb.count(gl(e)-1,e),t,2)}function E3e(e,t){return Yt(e.getFullYear()%100,t,2)}function T3e(e,t){return e=vG(e),Yt(e.getFullYear()%100,t,2)}function A3e(e,t){return Yt(e.getFullYear()%1e4,t,4)}function O3e(e,t){var r=e.getDay();return e=r>=4||r===0?hf(e):hf.ceil(e),Yt(e.getFullYear()%1e4,t,4)}function M3e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Yt(t/60|0,"0",2)+Yt(t%60,"0",2)}function XD(e,t){return Yt(e.getUTCDate(),t,2)}function I3e(e,t){return Yt(e.getUTCHours(),t,2)}function R3e(e,t){return Yt(e.getUTCHours()%12||12,t,2)}function D3e(e,t){return Yt(1+Lj.count(xl(e),e),t,3)}function yG(e,t){return Yt(e.getUTCMilliseconds(),t,3)}function $3e(e,t){return yG(e,t)+"000"}function L3e(e,t){return Yt(e.getUTCMonth()+1,t,2)}function F3e(e,t){return Yt(e.getUTCMinutes(),t,2)}function B3e(e,t){return Yt(e.getUTCSeconds(),t,2)}function z3e(e){var t=e.getUTCDay();return t===0?7:t}function U3e(e,t){return Yt(Bj.count(xl(e)-1,e),t,2)}function bG(e){var t=e.getUTCDay();return t>=4||t===0?ff(e):ff.ceil(e)}function W3e(e,t){return e=bG(e),Yt(ff.count(xl(e),e)+(xl(e).getUTCDay()===4),t,2)}function H3e(e){return e.getUTCDay()}function V3e(e,t){return Yt(bb.count(xl(e)-1,e),t,2)}function q3e(e,t){return Yt(e.getUTCFullYear()%100,t,2)}function G3e(e,t){return e=bG(e),Yt(e.getUTCFullYear()%100,t,2)}function K3e(e,t){return Yt(e.getUTCFullYear()%1e4,t,4)}function Y3e(e,t){var r=e.getUTCDay();return e=r>=4||r===0?ff(e):ff.ceil(e),Yt(e.getUTCFullYear()%1e4,t,4)}function Z3e(){return"+0000"}function JD(){return"%"}function QD(e){return+e}function e$(e){return Math.floor(+e/1e3)}var $u,wG,jG;X3e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function X3e(e){return $u=XMe(e),wG=$u.format,$u.parse,jG=$u.utcFormat,$u.utcParse,$u}function J3e(e){return new Date(e)}function Q3e(e){return e instanceof Date?+e:+new Date(+e)}function TA(e,t,r,n,a,i,o,l,c,d){var h=gA(),f=h.invert,m=h.domain,p=d(".%L"),y=d(":%S"),v=d("%I:%M"),b=d("%I %p"),N=d("%a %d"),j=d("%b %d"),w=d("%B"),S=d("%Y");function C(P){return(c(P)<P?p:l(P)<P?y:o(P)<P?v:i(P)<P?b:n(P)<P?a(P)<P?N:j:r(P)<P?w:S)(P)}return h.invert=function(P){return new Date(f(P))},h.domain=function(P){return arguments.length?m(Array.from(P,Q3e)):m().map(J3e)},h.ticks=function(P){var T=m();return e(T[0],T[T.length-1],P??10)},h.tickFormat=function(P,T){return T==null?C:d(T)},h.nice=function(P){var T=m();return(!P||typeof P.range!="function")&&(P=t(T[0],T[T.length-1],P??10)),P?m(lG(T,P)):h},h.copy=function(){return Dx(h,TA(e,t,r,n,a,i,o,l,c,d))},h}function eIe(){return pi.apply(TA(YMe,ZMe,gl,kA,Fj,$x,CA,_A,bd,wG).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function tIe(){return pi.apply(TA(GMe,KMe,xl,EA,Bj,Lj,PA,SA,bd,jG).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function zj(){var e=0,t=1,r,n,a,i,o=Ss,l=!1,c;function d(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(i(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}d.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),d):[e,t]},d.clamp=function(f){return arguments.length?(l=!!f,d):l},d.interpolator=function(f){return arguments.length?(o=f,d):o};function h(f){return function(m){var p,y;return arguments.length?([p,y]=m,o=f(p,y),d):[o(0),o(1)]}}return d.range=h(cm),d.rangeRound=h(pA),d.unknown=function(f){return arguments.length?(c=f,d):c},function(f){return i=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),d}}function Lc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function NG(){var e=$c(zj()(Ss));return e.copy=function(){return Lc(e,NG())},Sl.apply(e,arguments)}function _G(){var e=yA(zj()).domain([1,10]);return e.copy=function(){return Lc(e,_G()).base(e.base())},Sl.apply(e,arguments)}function SG(){var e=bA(zj());return e.copy=function(){return Lc(e,SG()).constant(e.constant())},Sl.apply(e,arguments)}function AA(){var e=wA(zj());return e.copy=function(){return Lc(e,AA()).exponent(e.exponent())},Sl.apply(e,arguments)}function rIe(){return AA.apply(null,arguments).exponent(.5)}function CG(){var e=[],t=Ss;function r(n){if(n!=null&&!isNaN(n=+n))return t((Ix(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(mc),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>U4e(e,i/n))},r.copy=function(){return CG(t).domain(e)},Sl.apply(r,arguments)}function Uj(){var e=0,t=.5,r=1,n=1,a,i,o,l,c,d=Ss,h,f=!1,m;function p(v){return isNaN(v=+v)?m:(v=.5+((v=+h(v))-i)*(n*v<n*i?l:c),d(f?Math.max(0,Math.min(1,v)):v))}p.domain=function(v){return arguments.length?([e,t,r]=v,a=h(e=+e),i=h(t=+t),o=h(r=+r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,p):[e,t,r]},p.clamp=function(v){return arguments.length?(f=!!v,p):f},p.interpolator=function(v){return arguments.length?(d=v,p):d};function y(v){return function(b){var N,j,w;return arguments.length?([N,j,w]=b,d=mMe(v,[N,j,w]),p):[d(0),d(.5),d(1)]}}return p.range=y(cm),p.rangeRound=y(pA),p.unknown=function(v){return arguments.length?(m=v,p):m},function(v){return h=v,a=v(e),i=v(t),o=v(r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,p}}function PG(){var e=$c(Uj()(Ss));return e.copy=function(){return Lc(e,PG())},Sl.apply(e,arguments)}function kG(){var e=yA(Uj()).domain([.1,1,10]);return e.copy=function(){return Lc(e,kG()).base(e.base())},Sl.apply(e,arguments)}function EG(){var e=bA(Uj());return e.copy=function(){return Lc(e,EG()).constant(e.constant())},Sl.apply(e,arguments)}function OA(){var e=wA(Uj());return e.copy=function(){return Lc(e,OA()).exponent(e.exponent())},Sl.apply(e,arguments)}function nIe(){return OA.apply(null,arguments).exponent(.5)}const t$=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Cg,scaleDiverging:PG,scaleDivergingLog:kG,scaleDivergingPow:OA,scaleDivergingSqrt:nIe,scaleDivergingSymlog:EG,scaleIdentity:oG,scaleImplicit:x2,scaleLinear:xb,scaleLog:cG,scaleOrdinal:hA,scalePoint:Sp,scalePow:jA,scaleQuantile:hG,scaleQuantize:fG,scaleRadial:uG,scaleSequential:NG,scaleSequentialLog:_G,scaleSequentialPow:AA,scaleSequentialQuantile:CG,scaleSequentialSqrt:rIe,scaleSequentialSymlog:SG,scaleSqrt:$Me,scaleSymlog:dG,scaleThreshold:mG,scaleTime:eIe,scaleUtc:tIe,tickFormat:iG},Symbol.toStringTag,{value:"Module"}));var sIe=tm;function aIe(e,t,r){for(var n=-1,a=e.length;++n<a;){var i=e[n],o=t(i);if(o!=null&&(l===void 0?o===o&&!sIe(o):r(o,l)))var l=o,c=i}return c}var Wj=aIe;function iIe(e,t){return e>t}var TG=iIe,oIe=Wj,lIe=TG,cIe=lm;function dIe(e){return e&&e.length?oIe(e,cIe,lIe):void 0}var uIe=dIe;const Hj=tr(uIe);function hIe(e,t){return e<t}var AG=hIe,fIe=Wj,mIe=AG,pIe=lm;function gIe(e){return e&&e.length?fIe(e,pIe,mIe):void 0}var xIe=gIe;const Vj=tr(xIe);var vIe=VT,yIe=Dc,bIe=Fq,wIe=sa;function jIe(e,t){var r=wIe(e)?vIe:bIe;return r(e,yIe(t))}var NIe=jIe,_Ie=$q,SIe=NIe;function CIe(e,t){return _Ie(SIe(e,t),1)}var PIe=CIe;const kIe=tr(PIe);var EIe=oA;function TIe(e,t){return EIe(e,t)}var AIe=TIe;const qj=tr(AIe);var dm=1e9,OIe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},IA,Dr=!0,ui="[DecimalError] ",Od=ui+"Invalid argument: ",MA=ui+"Exponent out of range: ",um=Math.floor,sd=Math.pow,MIe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Sa,On=1e7,Tr=7,OG=9007199254740991,wb=um(OG/Tr),Ve={};Ve.absoluteValue=Ve.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ve.comparedTo=Ve.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};Ve.decimalPlaces=Ve.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Tr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ve.dividedBy=Ve.div=function(e){return sl(this,new this.constructor(e))};Ve.dividedToIntegerBy=Ve.idiv=function(e){var t=this,r=t.constructor;return fr(sl(t,new r(e),0,1),r.precision)};Ve.equals=Ve.eq=function(e){return!this.cmp(e)};Ve.exponent=function(){return gn(this)};Ve.greaterThan=Ve.gt=function(e){return this.cmp(e)>0};Ve.greaterThanOrEqualTo=Ve.gte=function(e){return this.cmp(e)>=0};Ve.isInteger=Ve.isint=function(){return this.e>this.d.length-2};Ve.isNegative=Ve.isneg=function(){return this.s<0};Ve.isPositive=Ve.ispos=function(){return this.s>0};Ve.isZero=function(){return this.s===0};Ve.lessThan=Ve.lt=function(e){return this.cmp(e)<0};Ve.lessThanOrEqualTo=Ve.lte=function(e){return this.cmp(e)<1};Ve.logarithm=Ve.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Sa))throw Error(ui+"NaN");if(r.s<1)throw Error(ui+(r.s?"NaN":"-Infinity"));return r.eq(Sa)?new n(0):(Dr=!1,t=sl(Ag(r,i),Ag(e,i),i),Dr=!0,fr(t,a))};Ve.minus=Ve.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?RG(t,e):MG(t,(e.s=-e.s,e))};Ve.modulo=Ve.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(ui+"NaN");return r.s?(Dr=!1,t=sl(r,e,0,1).times(e),Dr=!0,r.minus(t)):fr(new n(r),a)};Ve.naturalExponential=Ve.exp=function(){return IG(this)};Ve.naturalLogarithm=Ve.ln=function(){return Ag(this)};Ve.negated=Ve.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ve.plus=Ve.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?MG(t,e):RG(t,(e.s=-e.s,e))};Ve.precision=Ve.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Od+e);if(t=gn(a)+1,n=a.d.length-1,r=n*Tr+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ve.squareRoot=Ve.sqrt=function(){var e,t,r,n,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(ui+"NaN")}for(e=gn(l),Dr=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=fo(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=um((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(i=n,n=i.plus(sl(l,i,o+2)).times(.5),fo(i.d).slice(0,o)===(t=fo(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(fr(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return Dr=!0,fr(n,r)};Ve.times=Ve.mul=function(e){var t,r,n,a,i,o,l,c,d,h=this,f=h.constructor,m=h.d,p=(e=new f(e)).d;if(!h.s||!e.s)return new f(0);for(e.s*=h.s,r=h.e+e.e,c=m.length,d=p.length,c<d&&(i=m,m=p,p=i,o=c,c=d,d=o),i=[],o=c+d,n=o;n--;)i.push(0);for(n=d;--n>=0;){for(t=0,a=c+n;a>n;)l=i[a]+p[n]*m[a-n-1]+t,i[a--]=l%On|0,t=l/On|0;i[a]=(i[a]+t)%On|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Dr?fr(e,f.precision):e};Ve.toDecimalPlaces=Ve.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(ko(e,0,dm),t===void 0?t=n.rounding:ko(t,0,8),fr(r,e+gn(r)+1,t))};Ve.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Jd(n,!0):(ko(e,0,dm),t===void 0?t=a.rounding:ko(t,0,8),n=fr(new a(n),e+1,t),r=Jd(n,!0,e+1)),r};Ve.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?Jd(a):(ko(e,0,dm),t===void 0?t=i.rounding:ko(t,0,8),n=fr(new i(a),e+gn(a)+1,t),r=Jd(n.abs(),!1,e+gn(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Ve.toInteger=Ve.toint=function(){var e=this,t=e.constructor;return fr(new t(e),gn(e)+1,t.rounding)};Ve.toNumber=function(){return+this};Ve.toPower=Ve.pow=function(e){var t,r,n,a,i,o,l=this,c=l.constructor,d=12,h=+(e=new c(e));if(!e.s)return new c(Sa);if(l=new c(l),!l.s){if(e.s<1)throw Error(ui+"Infinity");return l}if(l.eq(Sa))return l;if(n=c.precision,e.eq(Sa))return fr(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=h<0?-h:h)<=OG){for(a=new c(Sa),t=Math.ceil(n/Tr+4),Dr=!1;r%2&&(a=a.times(l),n$(a.d,t)),r=um(r/2),r!==0;)l=l.times(l),n$(l.d,t);return Dr=!0,e.s<0?new c(Sa).div(a):fr(a,n)}}else if(i<0)throw Error(ui+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Dr=!1,a=e.times(Ag(l,n+d)),Dr=!0,a=IG(a),a.s=i,a};Ve.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=gn(a),n=Jd(a,r<=i.toExpNeg||r>=i.toExpPos)):(ko(e,1,dm),t===void 0?t=i.rounding:ko(t,0,8),a=fr(new i(a),e,t),r=gn(a),n=Jd(a,e<=r||r<=i.toExpNeg,e)),n};Ve.toSignificantDigits=Ve.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(ko(e,1,dm),t===void 0?t=n.rounding:ko(t,0,8)),fr(new n(r),e,t)};Ve.toString=Ve.valueOf=Ve.val=Ve.toJSON=Ve[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=gn(e),r=e.constructor;return Jd(e,t<=r.toExpNeg||t>=r.toExpPos)};function MG(e,t){var r,n,a,i,o,l,c,d,h=e.constructor,f=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),Dr?fr(t,f):t;if(c=e.d,d=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(n=c,i=-i,l=d.length):(n=d,a=o,l=c.length),o=Math.ceil(f/Tr),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,n=d,d=c,c=n),r=0;i;)r=(c[--i]=c[i]+d[i]+r)/On|0,c[i]%=On;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,Dr?fr(t,f):t}function ko(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Od+e)}function fo(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=Tr-n.length,r&&(i+=Wl(r)),i+=n;o=e[t],n=o+"",r=Tr-n.length,r&&(i+=Wl(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var sl=function(){function e(n,a){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*a+o,n[l]=i%On|0,o=i/On|0;return o&&n.unshift(o),n}function t(n,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*On+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var l,c,d,h,f,m,p,y,v,b,N,j,w,S,C,P,T,O,E=n.constructor,D=n.s==a.s?1:-1,I=n.d,A=a.d;if(!n.s)return new E(n);if(!a.s)throw Error(ui+"Division by zero");for(c=n.e-a.e,T=A.length,C=I.length,p=new E(D),y=p.d=[],d=0;A[d]==(I[d]||0);)++d;if(A[d]>(I[d]||0)&&--c,i==null?j=i=E.precision:o?j=i+(gn(n)-gn(a))+1:j=i,j<0)return new E(0);if(j=j/Tr+2|0,d=0,T==1)for(h=0,A=A[0],j++;(d<C||h)&&j--;d++)w=h*On+(I[d]||0),y[d]=w/A|0,h=w%A|0;else{for(h=On/(A[0]+1)|0,h>1&&(A=e(A,h),I=e(I,h),T=A.length,C=I.length),S=T,v=I.slice(0,T),b=v.length;b<T;)v[b++]=0;O=A.slice(),O.unshift(0),P=A[0],A[1]>=On/2&&++P;do h=0,l=t(A,v,T,b),l<0?(N=v[0],T!=b&&(N=N*On+(v[1]||0)),h=N/P|0,h>1?(h>=On&&(h=On-1),f=e(A,h),m=f.length,b=v.length,l=t(f,v,m,b),l==1&&(h--,r(f,T<m?O:A,m))):(h==0&&(l=h=1),f=A.slice()),m=f.length,m<b&&f.unshift(0),r(v,f,b),l==-1&&(b=v.length,l=t(A,v,T,b),l<1&&(h++,r(v,T<b?O:A,b))),b=v.length):l===0&&(h++,v=[0]),y[d++]=h,l&&v[0]?v[b++]=I[S]||0:(v=[I[S]],b=1);while((S++<C||v[0]!==void 0)&&j--)}return y[0]||y.shift(),p.e=c,fr(p,o?i+gn(p)+1:i)}}();function IG(e,t){var r,n,a,i,o,l,c=0,d=0,h=e.constructor,f=h.precision;if(gn(e)>16)throw Error(MA+gn(e));if(!e.s)return new h(Sa);for(t==null?(Dr=!1,l=f):l=t,o=new h(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(n=Math.log(sd(2,d))/Math.LN10*2+5|0,l+=n,r=a=i=new h(Sa),h.precision=l;;){if(a=fr(a.times(e),l),r=r.times(++c),o=i.plus(sl(a,r,l)),fo(o.d).slice(0,l)===fo(i.d).slice(0,l)){for(;d--;)i=fr(i.times(i),l);return h.precision=f,t==null?(Dr=!0,fr(i,f)):i}i=o}}function gn(e){for(var t=e.e*Tr,r=e.d[0];r>=10;r/=10)t++;return t}function N1(e,t,r){if(t>e.LN10.sd())throw Dr=!0,r&&(e.precision=r),Error(ui+"LN10 precision limit exceeded");return fr(new e(e.LN10),t)}function Wl(e){for(var t="";e--;)t+="0";return t}function Ag(e,t){var r,n,a,i,o,l,c,d,h,f=1,m=10,p=e,y=p.d,v=p.constructor,b=v.precision;if(p.s<1)throw Error(ui+(p.s?"NaN":"-Infinity"));if(p.eq(Sa))return new v(0);if(t==null?(Dr=!1,d=b):d=t,p.eq(10))return t==null&&(Dr=!0),N1(v,d);if(d+=m,v.precision=d,r=fo(y),n=r.charAt(0),i=gn(p),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=fo(p.d),n=r.charAt(0),f++;i=gn(p),n>1?(p=new v("0."+r),i++):p=new v(n+"."+r.slice(1))}else return c=N1(v,d+2,b).times(i+""),p=Ag(new v(n+"."+r.slice(1)),d-m).plus(c),v.precision=b,t==null?(Dr=!0,fr(p,b)):p;for(l=o=p=sl(p.minus(Sa),p.plus(Sa),d),h=fr(p.times(p),d),a=3;;){if(o=fr(o.times(h),d),c=l.plus(sl(o,new v(a),d)),fo(c.d).slice(0,d)===fo(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(N1(v,d+2,b).times(i+""))),l=sl(l,new v(f),d),v.precision=b,t==null?(Dr=!0,fr(l,b)):l;l=c,a+=2}}function r$(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=um(r/Tr),e.d=[],n=(r+1)%Tr,r<0&&(n+=Tr),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Tr;n<a;)e.d.push(+t.slice(n,n+=Tr));t=t.slice(n),n=Tr-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),Dr&&(e.e>wb||e.e<-wb))throw Error(MA+r)}else e.s=0,e.e=0,e.d=[0];return e}function fr(e,t,r){var n,a,i,o,l,c,d,h,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Tr,a=t,d=f[h=0];else{if(h=Math.ceil((n+1)/Tr),i=f.length,h>=i)return e;for(d=i=f[h],o=1;i>=10;i/=10)o++;n%=Tr,a=n-Tr+o}if(r!==void 0&&(i=sd(10,o-a-1),l=d/i%10|0,c=t<0||f[h+1]!==void 0||d%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?d/sd(10,o-a):0:f[h-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=gn(e),f.length=1,t=t-i-1,f[0]=sd(10,(Tr-t%Tr)%Tr),e.e=um(-t/Tr)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=h,i=1,h--):(f.length=h+1,i=sd(10,Tr-n),f[h]=a>0?(d/sd(10,o-a)%sd(10,a)|0)*i:0),c)for(;;)if(h==0){(f[0]+=i)==On&&(f[0]=1,++e.e);break}else{if(f[h]+=i,f[h]!=On)break;f[h--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(Dr&&(e.e>wb||e.e<-wb))throw Error(MA+gn(e));return e}function RG(e,t){var r,n,a,i,o,l,c,d,h,f,m=e.constructor,p=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),Dr?fr(t,p):t;if(c=e.d,f=t.d,n=t.e,d=e.e,c=c.slice(),o=d-n,o){for(h=o<0,h?(r=c,o=-o,l=f.length):(r=f,n=d,l=c.length),a=Math.max(Math.ceil(p/Tr),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,h=a<l,h&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){h=c[a]<f[a];break}o=0}for(h&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(i=a;i&&c[--i]===0;)c[i]=On-1;--c[i],c[a]+=On}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Dr?fr(t,p):t):new m(0)}function Jd(e,t,r){var n,a=gn(e),i=fo(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Wl(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Wl(-a-1)+i,r&&(n=r-o)>0&&(i+=Wl(n))):a>=o?(i+=Wl(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+Wl(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=Wl(n))),e.s<0?"-"+i:i}function n$(e,t){if(e.length>t)return e.length=t,!0}function DG(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Od+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return r$(o,i.toString())}else if(typeof i!="string")throw Error(Od+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,MIe.test(i))r$(o,i);else throw Error(Od+i)}if(a.prototype=Ve,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=DG,a.config=a.set=IIe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function IIe(e){if(!e||typeof e!="object")throw Error(ui+"Object expected");var t,r,n,a=["precision",1,dm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(um(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Od+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Od+r+": "+n);return this}var IA=DG(OIe);Sa=new IA(1);const ir=IA;function RIe(e){return FIe(e)||LIe(e)||$Ie(e)||DIe()}function DIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Ie(e,t){if(e){if(typeof e=="string")return w2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w2(e,t)}}function LIe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function FIe(e){if(Array.isArray(e))return w2(e)}function w2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var BIe=function(t){return t},$G={"@@functional/placeholder":!0},LG=function(t){return t===$G},s$=function(t){return function r(){return arguments.length===0||arguments.length===1&&LG(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},zIe=function e(t,r){return t===1?r:s$(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(l){return l!==$G}).length;return o>=t?r.apply(void 0,a):e(t-o,s$(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var h=a.map(function(f){return LG(f)?c.shift():f});return r.apply(void 0,RIe(h).concat(c))}))})},Gj=function(t){return zIe(t.length,t)},j2=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},UIe=Gj(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),WIe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return BIe;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},N2=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},FG=function(t){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,n=t.apply(void 0,i)),n}};function HIe(e){var t;return e===0?t=1:t=Math.floor(new ir(e).abs().log(10).toNumber())+1,t}function VIe(e,t,r){for(var n=new ir(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var qIe=Gj(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),GIe=Gj(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),KIe=Gj(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const Kj={rangeStep:VIe,getDigitCount:HIe,interpolateNumber:qIe,uninterpolateNumber:GIe,uninterpolateTruncation:KIe};function _2(e){return XIe(e)||ZIe(e)||BG(e)||YIe()}function YIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZIe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function XIe(e){if(Array.isArray(e))return S2(e)}function Og(e,t){return eRe(e)||QIe(e,t)||BG(e,t)||JIe()}function JIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BG(e,t){if(e){if(typeof e=="string")return S2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S2(e,t)}}function S2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function QIe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(c){a=!0,i=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function eRe(e){if(Array.isArray(e))return e}function zG(e){var t=Og(e,2),r=t[0],n=t[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function UG(e,t,r){if(e.lte(0))return new ir(0);var n=Kj.getDigitCount(e.toNumber()),a=new ir(10).pow(n),i=e.div(a),o=n!==1?.05:.1,l=new ir(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return t?c:new ir(Math.ceil(c))}function tRe(e,t,r){var n=1,a=new ir(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new ir(10).pow(Kj.getDigitCount(e)-1),a=new ir(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new ir(Math.floor(e)))}else e===0?a=new ir(Math.floor((t-1)/2)):r||(a=new ir(Math.floor(e)));var o=Math.floor((t-1)/2),l=WIe(UIe(function(c){return a.add(new ir(c-o).mul(n)).toNumber()}),j2);return l(0,t)}function WG(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new ir(0),tickMin:new ir(0),tickMax:new ir(0)};var i=UG(new ir(t).sub(e).div(r-1),n,a),o;e<=0&&t>=0?o=new ir(0):(o=new ir(e).add(t).div(2),o=o.sub(new ir(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new ir(t).sub(o).div(i).toNumber()),d=l+c+1;return d>r?WG(e,t,r,n,a+1):(d<r&&(c=t>0?c+(r-d):c,l=t>0?l:l+(r-d)),{step:i,tickMin:o.sub(new ir(l).mul(i)),tickMax:o.add(new ir(c).mul(i))})}function rRe(e){var t=Og(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=zG([r,n]),c=Og(l,2),d=c[0],h=c[1];if(d===-1/0||h===1/0){var f=h===1/0?[d].concat(_2(j2(0,a-1).map(function(){return 1/0}))):[].concat(_2(j2(0,a-1).map(function(){return-1/0})),[h]);return r>n?N2(f):f}if(d===h)return tRe(d,a,i);var m=WG(d,h,o,i),p=m.step,y=m.tickMin,v=m.tickMax,b=Kj.rangeStep(y,v.add(new ir(.1).mul(p)),p);return r>n?N2(b):b}function nRe(e,t){var r=Og(e,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=zG([n,a]),l=Og(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[n,a];if(c===d)return[c];var h=Math.max(t,2),f=UG(new ir(d).sub(c).div(h-1),i,0),m=[].concat(_2(Kj.rangeStep(new ir(c),new ir(d).sub(new ir(.99).mul(f)),f)),[d]);return n>a?N2(m):m}var sRe=FG(rRe),aRe=FG(nRe),iRe="Invariant failed";function Qd(e,t){throw new Error(iRe)}var oRe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function mf(e){"@babel/helpers - typeof";return mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mf(e)}function jb(){return jb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jb.apply(this,arguments)}function lRe(e,t){return hRe(e)||uRe(e,t)||dRe(e,t)||cRe()}function cRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dRe(e,t){if(e){if(typeof e=="string")return a$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a$(e,t)}}function a$(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function uRe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(h){d=!0,a=h}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function hRe(e){if(Array.isArray(e))return e}function fRe(e,t){if(e==null)return{};var r=mRe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function mRe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function pRe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gRe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qG(n.key),n)}}function xRe(e,t,r){return t&&gRe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function vRe(e,t,r){return t=Nb(t),yRe(e,HG()?Reflect.construct(t,r||[],Nb(e).constructor):t.apply(e,r))}function yRe(e,t){if(t&&(mf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bRe(e)}function bRe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HG=function(){return!!e})()}function Nb(e){return Nb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Nb(e)}function wRe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C2(e,t)}function C2(e,t){return C2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},C2(e,t)}function VG(e,t,r){return t=qG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qG(e){var t=jRe(e,"string");return mf(t)=="symbol"?t:t+""}function jRe(e,t){if(mf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(mf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yj=function(e){function t(){return pRe(this,t),vRe(this,t,arguments)}return wRe(t,e),xRe(t,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,l=n.dataKey,c=n.data,d=n.dataPointFormatter,h=n.xAxis,f=n.yAxis,m=fRe(n,oRe),p=ht(m,!1);this.props.direction==="x"&&h.type!=="number"&&Qd();var y=c.map(function(v){var b=d(v,l),N=b.x,j=b.y,w=b.value,S=b.errorVal;if(!S)return null;var C=[],P,T;if(Array.isArray(S)){var O=lRe(S,2);P=O[0],T=O[1]}else P=T=S;if(i==="vertical"){var E=h.scale,D=j+a,I=D+o,A=D-o,V=E(w-P),U=E(w+T);C.push({x1:U,y1:I,x2:U,y2:A}),C.push({x1:V,y1:D,x2:U,y2:D}),C.push({x1:V,y1:I,x2:V,y2:A})}else if(i==="horizontal"){var $=f.scale,H=N+a,F=H-o,R=H+o,z=$(w-P),G=$(w+T);C.push({x1:F,y1:G,x2:R,y2:G}),C.push({x1:H,y1:z,x2:H,y2:G}),C.push({x1:F,y1:z,x2:R,y2:z})}return q.createElement(nr,jb({className:"recharts-errorBar",key:"bar-".concat(C.map(function(ie){return"".concat(ie.x1,"-").concat(ie.x2,"-").concat(ie.y1,"-").concat(ie.y2)}))},p),C.map(function(ie){return q.createElement("line",jb({},ie,{key:"line-".concat(ie.x1,"-").concat(ie.x2,"-").concat(ie.y1,"-").concat(ie.y2)}))}))});return q.createElement(nr,{className:"recharts-errorBars"},y)}}])}(q.Component);VG(Yj,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});VG(Yj,"displayName","ErrorBar");function Mg(e){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mg(e)}function i$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Yc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i$(Object(r),!0).forEach(function(n){NRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NRe(e,t,r){return t=_Re(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Re(e){var t=SRe(e,"string");return Mg(t)=="symbol"?t:t+""}function SRe(e,t){if(Mg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Mg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GG=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=va(r,Sh);if(!o)return null;var l=Sh.defaultProps,c=l!==void 0?Yc(Yc({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:i==="children"?d=(n||[]).reduce(function(h,f){var m=f.item,p=f.props,y=p.sectors||p.data||[];return h.concat(y.map(function(v){return{type:o.props.iconType||m.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):d=(n||[]).map(function(h){var f=h.item,m=f.type.defaultProps,p=m!==void 0?Yc(Yc({},m),f.props):{},y=p.dataKey,v=p.name,b=p.legendType,N=p.hide;return{inactive:N,dataKey:y,type:c.iconType||b||"square",color:RA(f),value:v||y,payload:p}}),Yc(Yc(Yc({},c),Sh.getWithHeight(o,a)),{},{payload:d,item:o})};function Ig(e){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ig(e)}function o$(e){return ERe(e)||kRe(e)||PRe(e)||CRe()}function CRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PRe(e,t){if(e){if(typeof e=="string")return P2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P2(e,t)}}function kRe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ERe(e){if(Array.isArray(e))return P2(e)}function P2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Yr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l$(Object(r),!0).forEach(function(n){Ph(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ph(e,t,r){return t=TRe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TRe(e){var t=ARe(e,"string");return Ig(t)=="symbol"?t:t+""}function ARe(e,t){if(Ig(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ig(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ds(e,t,r){return It(e)||It(t)?r:Nn(t)?Ta(e,t,r):yt(t)?t(e):r}function Cp(e,t,r,n){var a=kIe(e,function(l){return ds(l,t)});if(r==="number"){var i=a.filter(function(l){return Be(l)||parseFloat(l)});return i.length?[Vj(i),Hj(i)]:[1/0,-1/0]}var o=n?a.filter(function(l){return!It(l)}):a;return o.map(function(l){return Nn(l)||l instanceof Date?l:""})}var ORe=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,d=0;d<l;d++){var h=d>0?a[d-1].coordinate:a[l-1].coordinate,f=a[d].coordinate,m=d>=l-1?a[0].coordinate:a[d+1].coordinate,p=void 0;if(Ns(f-h)!==Ns(m-f)){var y=[];if(Ns(m-f)===Ns(c[1]-c[0])){p=m;var v=f+c[1]-c[0];y[0]=Math.min(v,(v+h)/2),y[1]=Math.max(v,(v+h)/2)}else{p=h;var b=m+c[1]-c[0];y[0]=Math.min(f,(b+f)/2),y[1]=Math.max(f,(b+f)/2)}var N=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(t>N[0]&&t<=N[1]||t>=y[0]&&t<=y[1]){o=a[d].index;break}}else{var j=Math.min(h,m),w=Math.max(h,m);if(t>(j+f)/2&&t<=(w+f)/2){o=a[d].index;break}}}else for(var S=0;S<l;S++)if(S===0&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S>0&&S<l-1&&t>(n[S].coordinate+n[S-1].coordinate)/2&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S===l-1&&t>(n[S].coordinate+n[S-1].coordinate)/2){o=n[S].index;break}return o},RA=function(t){var r,n=t,a=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Yr(Yr({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},MRe=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},l=Object.keys(i),c=0,d=l.length;c<d;c++)for(var h=i[l[c]].stackGroups,f=Object.keys(h),m=0,p=f.length;m<p;m++){var y=h[f[m]],v=y.items,b=y.cateAxisId,N=v.filter(function(T){return tl(T.type).indexOf("Bar")>=0});if(N&&N.length){var j=N[0].type.defaultProps,w=j!==void 0?Yr(Yr({},j),N[0].props):N[0].props,S=w.barSize,C=w[b];o[C]||(o[C]=[]);var P=It(S)?r:S;o[C].push({item:N[0],stackList:N.slice(1),barSize:It(P)?void 0:_s(P,n,0)})}}return o},IRe=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var d=_s(r,a,0,!0),h,f=[];if(o[0].barSize===+o[0].barSize){var m=!1,p=a/c,y=o.reduce(function(S,C){return S+C.barSize||0},0);y+=(c-1)*d,y>=a&&(y-=(c-1)*d,d=0),y>=a&&p>0&&(m=!0,p*=.9,y=c*p);var v=(a-y)/2>>0,b={offset:v-d,size:0};h=o.reduce(function(S,C){var P={item:C.item,position:{offset:b.offset+b.size+d,size:m?p:C.barSize}},T=[].concat(o$(S),[P]);return b=T[T.length-1].position,C.stackList&&C.stackList.length&&C.stackList.forEach(function(O){T.push({item:O,position:b})}),T},f)}else{var N=_s(n,a,0,!0);a-2*N-(c-1)*d<=0&&(d=0);var j=(a-2*N-(c-1)*d)/c;j>1&&(j>>=0);var w=l===+l?Math.min(j,l):j;h=o.reduce(function(S,C,P){var T=[].concat(o$(S),[{item:C.item,position:{offset:N+(j+d)*P+(j-w)/2,size:w}}]);return C.stackList&&C.stackList.length&&C.stackList.forEach(function(O){T.push({item:O,position:T[T.length-1].position})}),T},f)}return h},RRe=function(t,r,n,a){var i=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),d=GG({children:i,legendWidth:c});if(d){var h=a||{},f=h.width,m=h.height,p=d.align,y=d.verticalAlign,v=d.layout;if((v==="vertical"||v==="horizontal"&&y==="middle")&&p!=="center"&&Be(t[p]))return Yr(Yr({},t),{},Ph({},p,t[p]+(f||0)));if((v==="horizontal"||v==="vertical"&&p==="center")&&y!=="middle"&&Be(t[y]))return Yr(Yr({},t),{},Ph({},y,t[y]+(m||0)))}return t},DRe=function(t,r,n){return It(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},KG=function(t,r,n,a,i){var o=r.props.children,l=ti(o,Yj).filter(function(d){return DRe(a,i,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return t.reduce(function(d,h){var f=ds(h,n);if(It(f))return d;var m=Array.isArray(f)?[Vj(f),Hj(f)]:[f,f],p=c.reduce(function(y,v){var b=ds(h,v,0),N=m[0]-Math.abs(Array.isArray(b)?b[0]:b),j=m[1]+Math.abs(Array.isArray(b)?b[1]:b);return[Math.min(N,y[0]),Math.max(j,y[1])]},[1/0,-1/0]);return[Math.min(p[0],d[0]),Math.max(p[1],d[1])]},[1/0,-1/0])}return null},$Re=function(t,r,n,a,i){var o=r.map(function(l){return KG(t,l,n,i,a)}).filter(function(l){return!It(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},YG=function(t,r,n,a,i){var o=r.map(function(c){var d=c.props.dataKey;return n==="number"&&d&&KG(t,c,d,a)||Cp(t,d,n,i)});if(n==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var h=0,f=d.length;h<f;h++)l[d[h]]||(l[d[h]]=!0,c.push(d[h]));return c},[])},ZG=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},wd=function(t,r,n){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,d=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(d=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Ns(l[0]-l[1])*2*d:d,r&&(t.ticks||t.niceTicks)){var h=(t.ticks||t.niceTicks).map(function(f){var m=i?i.indexOf(f):f;return{coordinate:a(m)+d,value:f,offset:d}});return h.filter(function(f){return!Ox(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,m){return{coordinate:a(f)+d,value:f,index:m,offset:d}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(f){return{coordinate:a(f)+d,value:f,offset:d}}):a.domain().map(function(f,m){return{coordinate:a(f)+d,value:i?i[f]:f,index:m,offset:d}})},_1=new WeakMap,Yv=function(t,r){if(typeof r!="function")return t;_1.has(t)||_1.set(t,new WeakMap);var n=_1.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},XG=function(t,r,n){var a=t.scale,i=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Cg(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:xb(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Sp(),realScaleType:"point"}:i==="category"?{scale:Cg(),realScaleType:"band"}:{scale:xb(),realScaleType:"linear"};if(Yd(a)){var c="scale".concat(Ej(a));return{scale:(t$[c]||Sp)(),realScaleType:t$[c]?c:"point"}}return yt(a)?{scale:a}:{scale:Sp(),realScaleType:"point"}},c$=1e-4,JG=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),i=Math.min(a[0],a[1])-c$,o=Math.max(a[0],a[1])+c$,l=t(r[0]),c=t(r[n-1]);(l<i||l>o||c<i||c>o)&&t.domain([r[0],r[n-1]])}},LRe=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},FRe=function(t,r){if(!r||r.length!==2||!Be(r[0])||!Be(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!Be(t[0])||t[0]<n)&&(i[0]=n),(!Be(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},BRe=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0,l=0;l<r;++l){var c=Ox(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=i,t[l][n][1]=i+c,i=t[l][n][1]):(t[l][n][0]=o,t[l][n][1]=o+c,o=t[l][n][1])}},zRe=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var l=Ox(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=i,t[o][n][1]=i+l,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},URe={sign:BRe,expand:iSe,none:af,silhouette:oSe,wiggle:lSe,positive:zRe},WRe=function(t,r,n){var a=r.map(function(l){return l.props.dataKey}),i=URe[n],o=aSe().keys(a).value(function(l,c){return+ds(l,c,0)}).order(JC).offset(i);return o(t)},HRe=function(t,r,n,a,i,o){if(!t)return null;var l=o?r.reverse():r,c={},d=l.reduce(function(f,m){var p,y=(p=m.type)!==null&&p!==void 0&&p.defaultProps?Yr(Yr({},m.type.defaultProps),m.props):m.props,v=y.stackId,b=y.hide;if(b)return f;var N=y[n],j=f[N]||{hasStack:!1,stackGroups:{}};if(Nn(v)){var w=j.stackGroups[v]||{numericAxisId:n,cateAxisId:a,items:[]};w.items.push(m),j.hasStack=!0,j.stackGroups[v]=w}else j.stackGroups[Mx("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[m]};return Yr(Yr({},f),{},Ph({},N,j))},c),h={};return Object.keys(d).reduce(function(f,m){var p=d[m];if(p.hasStack){var y={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(v,b){var N=p.stackGroups[b];return Yr(Yr({},v),{},Ph({},b,{numericAxisId:n,cateAxisId:a,items:N.items,stackedData:WRe(t,N.items,i)}))},y)}return Yr(Yr({},f),{},Ph({},m,p))},h)},QG=function(t,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=t.domain();if(!d.length)return null;var h=sRe(d,i,l);return t.domain([Vj(h),Hj(h)]),{niceTicks:h}}if(i&&a==="number"){var f=t.domain(),m=aRe(f,i,l);return{niceTicks:m}}return null},d$=function(t){var r=t.axis,n=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+a:null;var c=ds(o,r.dataKey,r.domain[l]);return It(c)?null:r.scale(c)-i/2+a},VRe=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},qRe=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Yr(Yr({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(Nn(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},GRe=function(t){return t.reduce(function(r,n){return[Vj(n.concat([r[0]]).filter(Be)),Hj(n.concat([r[1]]).filter(Be))]},[1/0,-1/0])},eK=function(t,r,n){return Object.keys(t).reduce(function(a,i){var o=t[i],l=o.stackedData,c=l.reduce(function(d,h){var f=GRe(h.slice(r,n+1));return[Math.min(d[0],f[0]),Math.max(d[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},u$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,h$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,k2=function(t,r,n){if(yt(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(Be(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(u$.test(t[0])){var i=+u$.exec(t[0])[1];a[0]=r[0]-i}else yt(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(Be(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if(h$.test(t[1])){var o=+h$.exec(t[1])[1];a[1]=r[1]+o}else yt(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},_b=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var i=cA(r,function(f){return f.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var d=i[l],h=i[l-1];o=Math.min((d.coordinate||0)-(h.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},f$=function(t,r,n){return!t||!t.length||qj(t,Ta(n,"type.defaultProps.domain"))?r:t},tK=function(t,r){var n=t.type.defaultProps?Yr(Yr({},t.type.defaultProps),t.props):t.props,a=n.dataKey,i=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,d=n.chartType,h=n.hide;return Yr(Yr({},ht(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:i||a,color:RA(t),value:ds(r,a),type:c,payload:r,chartType:d,hide:h})};function Rg(e){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rg(e)}function m$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ho(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m$(Object(r),!0).forEach(function(n){rK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rK(e,t,r){return t=KRe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KRe(e){var t=YRe(e,"string");return Rg(t)=="symbol"?t:t+""}function YRe(e,t){if(Rg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Rg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZRe(e,t){return eDe(e)||QRe(e,t)||JRe(e,t)||XRe()}function XRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JRe(e,t){if(e){if(typeof e=="string")return p$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p$(e,t)}}function p$(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function QRe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(h){d=!0,a=h}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function eDe(e){if(Array.isArray(e))return e}var Sb=Math.PI/180,tDe=function(t){return t*180/Math.PI},_r=function(t,r,n,a){return{x:t+Math.cos(-Sb*a)*n,y:r+Math.sin(-Sb*a)*n}},nK=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},rDe=function(t,r,n,a,i){var o=t.width,l=t.height,c=t.startAngle,d=t.endAngle,h=_s(t.cx,o,o/2),f=_s(t.cy,l,l/2),m=nK(o,l,n),p=_s(t.innerRadius,m,0),y=_s(t.outerRadius,m,m*.8),v=Object.keys(r);return v.reduce(function(b,N){var j=r[N],w=j.domain,S=j.reversed,C;if(It(j.range))a==="angleAxis"?C=[c,d]:a==="radiusAxis"&&(C=[p,y]),S&&(C=[C[1],C[0]]);else{C=j.range;var P=C,T=ZRe(P,2);c=T[0],d=T[1]}var O=XG(j,i),E=O.realScaleType,D=O.scale;D.domain(w).range(C),JG(D);var I=QG(D,Ho(Ho({},j),{},{realScaleType:E})),A=Ho(Ho(Ho({},j),I),{},{range:C,radius:y,realScaleType:E,scale:D,cx:h,cy:f,innerRadius:p,outerRadius:y,startAngle:c,endAngle:d});return Ho(Ho({},b),{},rK({},N,A))},{})},nDe=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},sDe=function(t,r){var n=t.x,a=t.y,i=r.cx,o=r.cy,l=nDe({x:n,y:a},{x:i,y:o});if(l<=0)return{radius:l};var c=(n-i)/l,d=Math.acos(c);return a>o&&(d=2*Math.PI-d),{radius:l,angle:tDe(d),angleInRadian:d}},aDe=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},iDe=function(t,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),l=Math.min(i,o);return t+l*360},g$=function(t,r){var n=t.x,a=t.y,i=sDe({x:n,y:a},r),o=i.radius,l=i.angle,c=r.innerRadius,d=r.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var h=aDe(r),f=h.startAngle,m=h.endAngle,p=l,y;if(f<=m){for(;p>m;)p-=360;for(;p<f;)p+=360;y=p>=f&&p<=m}else{for(;p>f;)p-=360;for(;p<m;)p+=360;y=p>=m&&p<=f}return y?Ho(Ho({},r),{},{radius:o,angle:iDe(p,r)}):null},sK=function(t){return!x.isValidElement(t)&&!yt(t)&&typeof t!="boolean"?t.className:""};function Dg(e){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dg(e)}var oDe=["offset"];function lDe(e){return hDe(e)||uDe(e)||dDe(e)||cDe()}function cDe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dDe(e,t){if(e){if(typeof e=="string")return E2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E2(e,t)}}function uDe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hDe(e){if(Array.isArray(e))return E2(e)}function E2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fDe(e,t){if(e==null)return{};var r=mDe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function mDe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function x$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x$(Object(r),!0).forEach(function(n){pDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pDe(e,t,r){return t=gDe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gDe(e){var t=xDe(e,"string");return Dg(t)=="symbol"?t:t+""}function xDe(e,t){if(Dg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Dg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $g(){return $g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$g.apply(this,arguments)}var vDe=function(t){var r=t.value,n=t.formatter,a=It(t.children)?r:t.children;return yt(n)?n(a):a},yDe=function(t,r){var n=Ns(r-t),a=Math.min(Math.abs(r-t),360);return n*a},bDe=function(t,r,n){var a=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,d=c.cx,h=c.cy,f=c.innerRadius,m=c.outerRadius,p=c.startAngle,y=c.endAngle,v=c.clockWise,b=(f+m)/2,N=yDe(p,y),j=N>=0?1:-1,w,S;a==="insideStart"?(w=p+j*o,S=v):a==="insideEnd"?(w=y-j*o,S=!v):a==="end"&&(w=y+j*o,S=v),S=N<=0?S:!S;var C=_r(d,h,b,w),P=_r(d,h,b,w+(S?1:-1)*359),T="M".concat(C.x,",").concat(C.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(S?0:1,`,
    `).concat(P.x,",").concat(P.y),O=It(t.id)?Mx("recharts-radial-line-"):t.id;return q.createElement("text",$g({},n,{dominantBaseline:"central",className:Nt("recharts-radial-bar-label",l)}),q.createElement("defs",null,q.createElement("path",{id:O,d:T})),q.createElement("textPath",{xlinkHref:"#".concat(O)},r))},wDe=function(t){var r=t.viewBox,n=t.offset,a=t.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,d=i.outerRadius,h=i.startAngle,f=i.endAngle,m=(h+f)/2;if(a==="outside"){var p=_r(o,l,d+n,m),y=p.x,v=p.y;return{x:y,y:v,textAnchor:y>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var b=(c+d)/2,N=_r(o,l,b,m),j=N.x,w=N.y;return{x:j,y:w,textAnchor:"middle",verticalAnchor:"middle"}},jDe=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,i=t.position,o=r,l=o.x,c=o.y,d=o.width,h=o.height,f=h>=0?1:-1,m=f*a,p=f>0?"end":"start",y=f>0?"start":"end",v=d>=0?1:-1,b=v*a,N=v>0?"end":"start",j=v>0?"start":"end";if(i==="top"){var w={x:l+d/2,y:c-f*a,textAnchor:"middle",verticalAnchor:p};return yn(yn({},w),n?{height:Math.max(c-n.y,0),width:d}:{})}if(i==="bottom"){var S={x:l+d/2,y:c+h+m,textAnchor:"middle",verticalAnchor:y};return yn(yn({},S),n?{height:Math.max(n.y+n.height-(c+h),0),width:d}:{})}if(i==="left"){var C={x:l-b,y:c+h/2,textAnchor:N,verticalAnchor:"middle"};return yn(yn({},C),n?{width:Math.max(C.x-n.x,0),height:h}:{})}if(i==="right"){var P={x:l+d+b,y:c+h/2,textAnchor:j,verticalAnchor:"middle"};return yn(yn({},P),n?{width:Math.max(n.x+n.width-P.x,0),height:h}:{})}var T=n?{width:d,height:h}:{};return i==="insideLeft"?yn({x:l+b,y:c+h/2,textAnchor:j,verticalAnchor:"middle"},T):i==="insideRight"?yn({x:l+d-b,y:c+h/2,textAnchor:N,verticalAnchor:"middle"},T):i==="insideTop"?yn({x:l+d/2,y:c+m,textAnchor:"middle",verticalAnchor:y},T):i==="insideBottom"?yn({x:l+d/2,y:c+h-m,textAnchor:"middle",verticalAnchor:p},T):i==="insideTopLeft"?yn({x:l+b,y:c+m,textAnchor:j,verticalAnchor:y},T):i==="insideTopRight"?yn({x:l+d-b,y:c+m,textAnchor:N,verticalAnchor:y},T):i==="insideBottomLeft"?yn({x:l+b,y:c+h-m,textAnchor:j,verticalAnchor:p},T):i==="insideBottomRight"?yn({x:l+d-b,y:c+h-m,textAnchor:N,verticalAnchor:p},T):rm(i)&&(Be(i.x)||vd(i.x))&&(Be(i.y)||vd(i.y))?yn({x:l+_s(i.x,d),y:c+_s(i.y,h),textAnchor:"end",verticalAnchor:"end"},T):yn({x:l+d/2,y:c+h/2,textAnchor:"middle",verticalAnchor:"middle"},T)},NDe=function(t){return"cx"in t&&Be(t.cx)};function Rn(e){var t=e.offset,r=t===void 0?5:t,n=fDe(e,oDe),a=yn({offset:r},n),i=a.viewBox,o=a.position,l=a.value,c=a.children,d=a.content,h=a.className,f=h===void 0?"":h,m=a.textBreakAll;if(!i||It(l)&&It(c)&&!x.isValidElement(d)&&!yt(d))return null;if(x.isValidElement(d))return x.cloneElement(d,a);var p;if(yt(d)){if(p=x.createElement(d,a),x.isValidElement(p))return p}else p=vDe(a);var y=NDe(i),v=ht(a,!0);if(y&&(o==="insideStart"||o==="insideEnd"||o==="end"))return bDe(a,p,v);var b=y?wDe(a):jDe(a);return q.createElement(Xd,$g({className:Nt("recharts-label",f)},v,b,{breakAll:m}),p)}Rn.displayName="Label";var aK=function(t){var r=t.cx,n=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,d=t.innerRadius,h=t.outerRadius,f=t.x,m=t.y,p=t.top,y=t.left,v=t.width,b=t.height,N=t.clockWise,j=t.labelViewBox;if(j)return j;if(Be(v)&&Be(b)){if(Be(f)&&Be(m))return{x:f,y:m,width:v,height:b};if(Be(p)&&Be(y))return{x:p,y,width:v,height:b}}return Be(f)&&Be(m)?{x:f,y:m,width:0,height:0}:Be(r)&&Be(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:d||0,outerRadius:h||c||l||0,clockWise:N}:t.viewBox?t.viewBox:{}},_De=function(t,r){return t?t===!0?q.createElement(Rn,{key:"label-implicit",viewBox:r}):Nn(t)?q.createElement(Rn,{key:"label-implicit",viewBox:r,value:t}):x.isValidElement(t)?t.type===Rn?x.cloneElement(t,{key:"label-implicit",viewBox:r}):q.createElement(Rn,{key:"label-implicit",content:t,viewBox:r}):yt(t)?q.createElement(Rn,{key:"label-implicit",content:t,viewBox:r}):rm(t)?q.createElement(Rn,$g({viewBox:r},t,{key:"label-implicit"})):null:null},SDe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=aK(t),o=ti(a,Rn).map(function(c,d){return x.cloneElement(c,{viewBox:r||i,key:"label-".concat(d)})});if(!n)return o;var l=_De(t.label,r||i);return[l].concat(lDe(o))};Rn.parseViewBox=aK;Rn.renderCallByParent=SDe;function CDe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var PDe=CDe;const kDe=tr(PDe);function Lg(e){"@babel/helpers - typeof";return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lg(e)}var EDe=["valueAccessor"],TDe=["data","dataKey","clockWise","id","textBreakAll"];function ADe(e){return RDe(e)||IDe(e)||MDe(e)||ODe()}function ODe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MDe(e,t){if(e){if(typeof e=="string")return T2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T2(e,t)}}function IDe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function RDe(e){if(Array.isArray(e))return T2(e)}function T2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Cb(){return Cb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cb.apply(this,arguments)}function v$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function y$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v$(Object(r),!0).forEach(function(n){DDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DDe(e,t,r){return t=$De(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $De(e){var t=LDe(e,"string");return Lg(t)=="symbol"?t:t+""}function LDe(e,t){if(Lg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Lg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function b$(e,t){if(e==null)return{};var r=FDe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function FDe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var BDe=function(t){return Array.isArray(t.value)?kDe(t.value):t.value};function pc(e){var t=e.valueAccessor,r=t===void 0?BDe:t,n=b$(e,EDe),a=n.data,i=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,d=b$(n,TDe);return!a||!a.length?null:q.createElement(nr,{className:"recharts-label-list"},a.map(function(h,f){var m=It(i)?r(h,f):ds(h&&h.payload,i),p=It(l)?{}:{id:"".concat(l,"-").concat(f)};return q.createElement(Rn,Cb({},ht(h,!0),d,p,{parentViewBox:h.parentViewBox,value:m,textBreakAll:c,viewBox:Rn.parseViewBox(It(o)?h:y$(y$({},h),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}pc.displayName="LabelList";function zDe(e,t){return e?e===!0?q.createElement(pc,{key:"labelList-implicit",data:t}):q.isValidElement(e)||yt(e)?q.createElement(pc,{key:"labelList-implicit",data:t,content:e}):rm(e)?q.createElement(pc,Cb({data:t},e,{key:"labelList-implicit"})):null:null}function UDe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=ti(n,pc).map(function(o,l){return x.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return a;var i=zDe(e.label,t);return[i].concat(ADe(a))}pc.renderCallByParent=UDe;function Fg(e){"@babel/helpers - typeof";return Fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fg(e)}function A2(){return A2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A2.apply(this,arguments)}function w$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function j$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w$(Object(r),!0).forEach(function(n){WDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WDe(e,t,r){return t=HDe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HDe(e){var t=VDe(e,"string");return Fg(t)=="symbol"?t:t+""}function VDe(e,t){if(Fg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Fg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qDe=function(t,r){var n=Ns(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},Zv=function(t){var r=t.cx,n=t.cy,a=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,d=t.cornerIsExternal,h=c*(l?1:-1)+a,f=Math.asin(c/h)/Sb,m=d?i:i+o*f,p=_r(r,n,h,m),y=_r(r,n,a,m),v=d?i-o*f:i,b=_r(r,n,h*Math.cos(f*Sb),v);return{center:p,circleTangency:y,lineTangency:b,theta:f}},iK=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=qDe(o,l),d=o+c,h=_r(r,n,i,o),f=_r(r,n,i,d),m="M ".concat(h.x,",").concat(h.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var p=_r(r,n,a,o),y=_r(r,n,a,d);m+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(p.x,",").concat(p.y," Z")}else m+="L ".concat(r,",").concat(n," Z");return m},GDe=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,h=t.endAngle,f=Ns(h-d),m=Zv({cx:r,cy:n,radius:i,angle:d,sign:f,cornerRadius:o,cornerIsExternal:c}),p=m.circleTangency,y=m.lineTangency,v=m.theta,b=Zv({cx:r,cy:n,radius:i,angle:h,sign:-f,cornerRadius:o,cornerIsExternal:c}),N=b.circleTangency,j=b.lineTangency,w=b.theta,S=c?Math.abs(d-h):Math.abs(d-h)-v-w;if(S<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):iK({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:d,endAngle:h});var C="M ".concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(S>180),",").concat(+(f<0),",").concat(N.x,",").concat(N.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(j.x,",").concat(j.y,`
  `);if(a>0){var P=Zv({cx:r,cy:n,radius:a,angle:d,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),T=P.circleTangency,O=P.lineTangency,E=P.theta,D=Zv({cx:r,cy:n,radius:a,angle:h,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),I=D.circleTangency,A=D.lineTangency,V=D.theta,U=c?Math.abs(d-h):Math.abs(d-h)-E-V;if(U<0&&o===0)return"".concat(C,"L").concat(r,",").concat(n,"Z");C+="L".concat(A.x,",").concat(A.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(I.x,",").concat(I.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(U>180),",").concat(+(f>0),",").concat(T.x,",").concat(T.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(O.x,",").concat(O.y,"Z")}else C+="L".concat(r,",").concat(n,"Z");return C},KDe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},oK=function(t){var r=j$(j$({},KDe),t),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,d=r.cornerIsExternal,h=r.startAngle,f=r.endAngle,m=r.className;if(o<i||h===f)return null;var p=Nt("recharts-sector",m),y=o-i,v=_s(l,y,0,!0),b;return v>0&&Math.abs(h-f)<360?b=GDe({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(v,y/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:h,endAngle:f}):b=iK({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:h,endAngle:f}),q.createElement("path",A2({},ht(r,!0),{className:p,d:b,role:"img"}))};function Bg(e){"@babel/helpers - typeof";return Bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bg(e)}function O2(){return O2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O2.apply(this,arguments)}function N$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N$(Object(r),!0).forEach(function(n){YDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YDe(e,t,r){return t=ZDe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZDe(e){var t=XDe(e,"string");return Bg(t)=="symbol"?t:t+""}function XDe(e,t){if(Bg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Bg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var S$={curveBasisClosed:K1e,curveBasisOpen:Y1e,curveBasis:G1e,curveBumpX:M1e,curveBumpY:I1e,curveLinearClosed:Z1e,curveLinear:Aj,curveMonotoneX:X1e,curveMonotoneY:J1e,curveNatural:Q1e,curveStep:eSe,curveStepAfter:rSe,curveStepBefore:tSe},Xv=function(t){return t.x===+t.x&&t.y===+t.y},Hm=function(t){return t.x},Vm=function(t){return t.y},JDe=function(t,r){if(yt(t))return t;var n="curve".concat(Ej(t));return(n==="curveMonotone"||n==="curveBump")&&r?S$["".concat(n).concat(r==="vertical"?"Y":"X")]:S$[n]||Aj},QDe=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,d=c===void 0?!1:c,h=JDe(n,l),f=d?i.filter(function(v){return Xv(v)}):i,m;if(Array.isArray(o)){var p=d?o.filter(function(v){return Xv(v)}):o,y=f.map(function(v,b){return _$(_$({},v),{},{base:p[b]})});return l==="vertical"?m=zv().y(Vm).x1(Hm).x0(function(v){return v.base.x}):m=zv().x(Hm).y1(Vm).y0(function(v){return v.base.y}),m.defined(Xv).curve(h),m(y)}return l==="vertical"&&Be(o)?m=zv().y(Vm).x1(Hm).x0(o):Be(o)?m=zv().x(Hm).y1(Vm).y0(o):m=nq().x(Hm).y(Vm),m.defined(Xv).curve(h),m(f)},M2=function(t){var r=t.className,n=t.points,a=t.path,i=t.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?QDe(t):a;return x.createElement("path",O2({},ht(t,!1),X0(t),{className:Nt("recharts-curve",r),d:o,ref:i}))},lK={exports:{}},e$e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",t$e=e$e,r$e=t$e;function cK(){}function dK(){}dK.resetWarningCache=cK;var n$e=function(){function e(n,a,i,o,l,c){if(c!==r$e){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:dK,resetWarningCache:cK};return r.PropTypes=r,r};lK.exports=n$e();var s$e=lK.exports;const er=tr(s$e);var a$e=Object.getOwnPropertyNames,i$e=Object.getOwnPropertySymbols,o$e=Object.prototype.hasOwnProperty;function C$(e,t){return function(n,a,i){return e(n,a,i)&&t(n,a,i)}}function Jv(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);var i=a.cache,o=i.get(r),l=i.get(n);if(o&&l)return o===n&&l===r;i.set(r,n),i.set(n,r);var c=e(r,n,a);return i.delete(r),i.delete(n),c}}function P$(e){return a$e(e).concat(i$e(e))}var l$e=Object.hasOwn||function(e,t){return o$e.call(e,t)};function mu(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var c$e="__v",d$e="__o",u$e="_owner",k$=Object.getOwnPropertyDescriptor,E$=Object.keys;function h$e(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function f$e(e,t){return mu(e.getTime(),t.getTime())}function m$e(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function p$e(e,t){return e===t}function T$(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),i=e.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var d=t.entries(),h=!1,f=0;(l=d.next())&&!l.done;){if(a[f]){f++;continue}var m=o.value,p=l.value;if(r.equals(m[0],p[0],c,f,e,t,r)&&r.equals(m[1],p[1],m[0],p[0],e,t,r)){h=a[f]=!0;break}f++}if(!h)return!1;c++}return!0}var g$e=mu;function x$e(e,t,r){var n=E$(e),a=n.length;if(E$(t).length!==a)return!1;for(;a-- >0;)if(!uK(e,t,r,n[a]))return!1;return!0}function qm(e,t,r){var n=P$(e),a=n.length;if(P$(t).length!==a)return!1;for(var i,o,l;a-- >0;)if(i=n[a],!uK(e,t,r,i)||(o=k$(e,i),l=k$(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function v$e(e,t){return mu(e.valueOf(),t.valueOf())}function y$e(e,t){return e.source===t.source&&e.flags===t.flags}function A$(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),i=e.values(),o,l;(o=i.next())&&!o.done;){for(var c=t.values(),d=!1,h=0;(l=c.next())&&!l.done;){if(!a[h]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){d=a[h]=!0;break}h++}if(!d)return!1}return!0}function b$e(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function w$e(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function uK(e,t,r,n){return(n===u$e||n===d$e||n===c$e)&&(e.$$typeof||t.$$typeof)?!0:l$e(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var j$e="[object Arguments]",N$e="[object Boolean]",_$e="[object Date]",S$e="[object Error]",C$e="[object Map]",P$e="[object Number]",k$e="[object Object]",E$e="[object RegExp]",T$e="[object Set]",A$e="[object String]",O$e="[object URL]",M$e=Array.isArray,O$=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,M$=Object.assign,I$e=Object.prototype.toString.call.bind(Object.prototype.toString);function R$e(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,d=e.areRegExpsEqual,h=e.areSetsEqual,f=e.areTypedArraysEqual,m=e.areUrlsEqual;return function(y,v,b){if(y===v)return!0;if(y==null||v==null)return!1;var N=typeof y;if(N!==typeof v)return!1;if(N!=="object")return N==="number"?o(y,v,b):N==="function"?a(y,v,b):!1;var j=y.constructor;if(j!==v.constructor)return!1;if(j===Object)return l(y,v,b);if(M$e(y))return t(y,v,b);if(O$!=null&&O$(y))return f(y,v,b);if(j===Date)return r(y,v,b);if(j===RegExp)return d(y,v,b);if(j===Map)return i(y,v,b);if(j===Set)return h(y,v,b);var w=I$e(y);return w===_$e?r(y,v,b):w===E$e?d(y,v,b):w===C$e?i(y,v,b):w===T$e?h(y,v,b):w===k$e?typeof y.then!="function"&&typeof v.then!="function"&&l(y,v,b):w===O$e?m(y,v,b):w===S$e?n(y,v,b):w===j$e?l(y,v,b):w===N$e||w===P$e||w===A$e?c(y,v,b):!1}}function D$e(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,a={areArraysEqual:n?qm:h$e,areDatesEqual:f$e,areErrorsEqual:m$e,areFunctionsEqual:p$e,areMapsEqual:n?C$(T$,qm):T$,areNumbersEqual:g$e,areObjectsEqual:n?qm:x$e,arePrimitiveWrappersEqual:v$e,areRegExpsEqual:y$e,areSetsEqual:n?C$(A$,qm):A$,areTypedArraysEqual:n?qm:b$e,areUrlsEqual:w$e};if(r&&(a=M$({},a,r(a))),t){var i=Jv(a.areArraysEqual),o=Jv(a.areMapsEqual),l=Jv(a.areObjectsEqual),c=Jv(a.areSetsEqual);a=M$({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function $$e(e){return function(t,r,n,a,i,o,l){return e(t,r,l)}}function L$e(e){var t=e.circular,r=e.comparator,n=e.createState,a=e.equals,i=e.strict;if(n)return function(c,d){var h=n(),f=h.cache,m=f===void 0?t?new WeakMap:void 0:f,p=h.meta;return r(c,d,{cache:m,equals:a,meta:p,strict:i})};if(t)return function(c,d){return r(c,d,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,d){return r(c,d,o)}}var F$e=Fc();Fc({strict:!0});Fc({circular:!0});Fc({circular:!0,strict:!0});Fc({createInternalComparator:function(){return mu}});Fc({strict:!0,createInternalComparator:function(){return mu}});Fc({circular:!0,createInternalComparator:function(){return mu}});Fc({circular:!0,createInternalComparator:function(){return mu},strict:!0});function Fc(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,a=e.createState,i=e.strict,o=i===void 0?!1:i,l=D$e(e),c=R$e(l),d=n?n(c):$$e(c);return L$e({circular:r,comparator:c,createState:a,equals:d,strict:o})}function B$e(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function I$(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):B$e(a)};requestAnimationFrame(n)}function I2(e){"@babel/helpers - typeof";return I2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I2(e)}function z$e(e){return V$e(e)||H$e(e)||W$e(e)||U$e()}function U$e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W$e(e,t){if(e){if(typeof e=="string")return R$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R$(e,t)}}function R$(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function H$e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function V$e(e){if(Array.isArray(e))return e}function q$e(){var e={},t=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=z$e(o),c=l[0],d=l.slice(1);if(typeof c=="number"){I$(a.bind(null,d),c);return}a(c),I$(a.bind(null,d));return}I2(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function zg(e){"@babel/helpers - typeof";return zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zg(e)}function D$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D$(Object(r),!0).forEach(function(n){hK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hK(e,t,r){return t=G$e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G$e(e){var t=K$e(e,"string");return zg(t)==="symbol"?t:String(t)}function K$e(e,t){if(zg(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(zg(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Y$e=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},Z$e=function(t){return t},X$e=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Pp=function(t,r){return Object.keys(r).reduce(function(n,a){return $$($$({},n),{},hK({},a,t(a,r[a])))},{})},L$=function(t,r,n){return t.map(function(a){return"".concat(X$e(a)," ").concat(r,"ms ").concat(n)}).join(",")};function J$e(e,t){return t5e(e)||e5e(e,t)||fK(e,t)||Q$e()}function Q$e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e5e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(h){d=!0,a=h}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function t5e(e){if(Array.isArray(e))return e}function r5e(e){return a5e(e)||s5e(e)||fK(e)||n5e()}function n5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fK(e,t){if(e){if(typeof e=="string")return R2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R2(e,t)}}function s5e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function a5e(e){if(Array.isArray(e))return R2(e)}function R2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Pb=1e-4,mK=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},pK=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},F$=function(t,r){return function(n){var a=mK(t,r);return pK(a,n)}},i5e=function(t,r){return function(n){var a=mK(t,r),i=[].concat(r5e(a.map(function(o,l){return o*l}).slice(1)),[0]);return pK(i,n)}},B$=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,l=1;break;case"ease":a=.25,i=.1,o=.25,l=1;break;case"ease-in":a=.42,i=0,o=1,l=1;break;case"ease-out":a=.42,i=0,o=.58,l=1;break;case"ease-in-out":a=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(b){return parseFloat(b)}),h=J$e(d,4);a=h[0],i=h[1],o=h[2],l=h[3]}}}var f=F$(a,o),m=F$(i,l),p=i5e(a,o),y=function(N){return N>1?1:N<0?0:N},v=function(N){for(var j=N>1?1:N,w=j,S=0;S<8;++S){var C=f(w)-j,P=p(w);if(Math.abs(C-j)<Pb||P<Pb)return m(w);w=y(w-C/P)}return m(w)};return v.isStepper=!1,v},o5e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(h,f,m){var p=-(h-f)*n,y=m*i,v=m+(p-y)*l/1e3,b=m*l/1e3+h;return Math.abs(b-f)<Pb&&Math.abs(v)<Pb?[f,0]:[b,v]};return c.isStepper=!0,c.dt=l,c},l5e=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return B$(a);case"spring":return o5e();default:if(a.split("(")[0]==="cubic-bezier")return B$(a)}return typeof a=="function"?a:null};function Ug(e){"@babel/helpers - typeof";return Ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ug(e)}function z$(e){return u5e(e)||d5e(e)||gK(e)||c5e()}function c5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d5e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function u5e(e){if(Array.isArray(e))return $2(e)}function U$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U$(Object(r),!0).forEach(function(n){D2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function D2(e,t,r){return t=h5e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h5e(e){var t=f5e(e,"string");return Ug(t)==="symbol"?t:String(t)}function f5e(e,t){if(Ug(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ug(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function m5e(e,t){return x5e(e)||g5e(e,t)||gK(e,t)||p5e()}function p5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gK(e,t){if(e){if(typeof e=="string")return $2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $2(e,t)}}function $2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g5e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(h){d=!0,a=h}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function x5e(e){if(Array.isArray(e))return e}var kb=function(t,r,n){return t+(r-t)*n},L2=function(t){var r=t.from,n=t.to;return r!==n},v5e=function e(t,r,n){var a=Pp(function(i,o){if(L2(o)){var l=t(o.from,o.to,o.velocity),c=m5e(l,2),d=c[0],h=c[1];return qn(qn({},o),{},{from:d,velocity:h})}return o},r);return n<1?Pp(function(i,o){return L2(o)?qn(qn({},o),{},{velocity:kb(o.velocity,a[i].velocity,n),from:kb(o.from,a[i].from,n)}):o},r):e(t,a,n-1)};const y5e=function(e,t,r,n,a){var i=Y$e(e,t),o=i.reduce(function(b,N){return qn(qn({},b),{},D2({},N,[e[N],t[N]]))},{}),l=i.reduce(function(b,N){return qn(qn({},b),{},D2({},N,{from:e[N],velocity:0,to:t[N]}))},{}),c=-1,d,h,f=function(){return null},m=function(){return Pp(function(N,j){return j.from},l)},p=function(){return!Object.values(l).filter(L2).length},y=function(N){d||(d=N);var j=N-d,w=j/r.dt;l=v5e(r,l,w),a(qn(qn(qn({},e),t),m())),d=N,p()||(c=requestAnimationFrame(f))},v=function(N){h||(h=N);var j=(N-h)/n,w=Pp(function(C,P){return kb.apply(void 0,z$(P).concat([r(j)]))},o);if(a(qn(qn(qn({},e),t),w)),j<1)c=requestAnimationFrame(f);else{var S=Pp(function(C,P){return kb.apply(void 0,z$(P).concat([r(1)]))},o);a(qn(qn(qn({},e),t),S))}};return f=r.isStepper?y:v,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function pf(e){"@babel/helpers - typeof";return pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pf(e)}var b5e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function w5e(e,t){if(e==null)return{};var r=j5e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function j5e(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function S1(e){return C5e(e)||S5e(e)||_5e(e)||N5e()}function N5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _5e(e,t){if(e){if(typeof e=="string")return F2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F2(e,t)}}function S5e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function C5e(e){if(Array.isArray(e))return F2(e)}function F2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function W$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ji(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W$(Object(r),!0).forEach(function(n){lp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lp(e,t,r){return t=xK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P5e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k5e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xK(n.key),n)}}function E5e(e,t,r){return t&&k5e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function xK(e){var t=T5e(e,"string");return pf(t)==="symbol"?t:String(t)}function T5e(e,t){if(pf(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(pf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function A5e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B2(e,t)}function B2(e,t){return B2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},B2(e,t)}function O5e(e){var t=M5e();return function(){var n=Eb(e),a;if(t){var i=Eb(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return z2(this,a)}}function z2(e,t){if(t&&(pf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U2(e)}function U2(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M5e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Eb(e){return Eb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Eb(e)}var vl=function(e){A5e(r,e);var t=O5e(r);function r(n,a){var i;P5e(this,r),i=t.call(this,n,a);var o=i.props,l=o.isActive,c=o.attributeName,d=o.from,h=o.to,f=o.steps,m=o.children,p=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(U2(i)),i.changeStyle=i.changeStyle.bind(U2(i)),!l||p<=0)return i.state={style:{}},typeof m=="function"&&(i.state={style:h}),z2(i);if(f&&f.length)i.state={style:f[0].style};else if(d){if(typeof m=="function")return i.state={style:d},z2(i);i.state={style:c?lp({},c,d):d}}else i.state={style:{}};return i}return E5e(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,d=i.shouldReAnimate,h=i.to,f=i.from,m=this.state.style;if(l){if(!o){var p={style:c?lp({},c,h):h};this.state&&m&&(c&&m[c]!==h||!c&&m!==h)&&this.setState(p);return}if(!(F$e(a.to,h)&&a.canBegin&&a.isActive)){var y=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=y||d?f:a.to;if(this.state&&m){var b={style:c?lp({},c,v):v};(c&&m[c]!==v||!c&&m!==v)&&this.setState(b)}this.runAnimation(ji(ji({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,l=a.to,c=a.duration,d=a.easing,h=a.begin,f=a.onAnimationEnd,m=a.onAnimationStart,p=y5e(o,l,l5e(d),c,this.changeStyle),y=function(){i.stopJSAnimation=p()};this.manager.start([m,h,y,c,f])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,l=a.begin,c=a.onAnimationStart,d=o[0],h=d.style,f=d.duration,m=f===void 0?0:f,p=function(v,b,N){if(N===0)return v;var j=b.duration,w=b.easing,S=w===void 0?"ease":w,C=b.style,P=b.properties,T=b.onAnimationEnd,O=N>0?o[N-1]:b,E=P||Object.keys(C);if(typeof S=="function"||S==="spring")return[].concat(S1(v),[i.runJSAnimation.bind(i,{from:O.style,to:C,duration:j,easing:S}),j]);var D=L$(E,j,S),I=ji(ji(ji({},O.style),C),{},{transition:D});return[].concat(S1(v),[I,j,T]).filter(Z$e)};return this.manager.start([c].concat(S1(o.reduce(p,[h,Math.max(m,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=q$e());var i=a.begin,o=a.duration,l=a.attributeName,c=a.to,d=a.easing,h=a.onAnimationStart,f=a.onAnimationEnd,m=a.steps,p=a.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof d=="function"||typeof p=="function"||d==="spring"){this.runJSAnimation(a);return}if(m.length>1){this.runStepAnimation(a);return}var v=l?lp({},l,c):c,b=L$(Object.keys(v),o,d);y.start([h,i,ji(ji({},v),{},{transition:b}),o,f])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=w5e(a,b5e),d=x.Children.count(i),h=this.state.style;if(typeof i=="function")return i(h);if(!l||d===0||o<=0)return i;var f=function(p){var y=p.props,v=y.style,b=v===void 0?{}:v,N=y.className,j=x.cloneElement(p,ji(ji({},c),{},{style:ji(ji({},b),h),className:N}));return j};return d===1?f(x.Children.only(i)):q.createElement("div",null,x.Children.map(i,function(m){return f(m)}))}}]),r}(x.PureComponent);vl.displayName="Animate";vl.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};vl.propTypes={from:er.oneOfType([er.object,er.string]),to:er.oneOfType([er.object,er.string]),attributeName:er.string,duration:er.number,begin:er.number,easing:er.oneOfType([er.string,er.func]),steps:er.arrayOf(er.shape({duration:er.number.isRequired,style:er.object.isRequired,easing:er.oneOfType([er.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),er.func]),properties:er.arrayOf("string"),onAnimationEnd:er.func})),children:er.oneOfType([er.node,er.func]),isActive:er.bool,canBegin:er.bool,onAnimationEnd:er.func,shouldReAnimate:er.bool,onAnimationStart:er.func,onAnimationReStart:er.func};function Wg(e){"@babel/helpers - typeof";return Wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wg(e)}function Tb(){return Tb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tb.apply(this,arguments)}function I5e(e,t){return L5e(e)||$5e(e,t)||D5e(e,t)||R5e()}function R5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D5e(e,t){if(e){if(typeof e=="string")return H$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H$(e,t)}}function H$(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $5e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(h){d=!0,a=h}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function L5e(e){if(Array.isArray(e))return e}function V$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function q$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V$(Object(r),!0).forEach(function(n){F5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function F5e(e,t,r){return t=B5e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B5e(e){var t=z5e(e,"string");return Wg(t)=="symbol"?t:t+""}function z5e(e,t){if(Wg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Wg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var G$=function(t,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),l=a>=0?1:-1,c=n>=0?1:-1,d=a>=0&&n>=0||a<0&&n<0?1:0,h;if(o>0&&i instanceof Array){for(var f=[0,0,0,0],m=0,p=4;m<p;m++)f[m]=i[m]>o?o:i[m];h="M".concat(t,",").concat(r+l*f[0]),f[0]>0&&(h+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(d,",").concat(t+c*f[0],",").concat(r)),h+="L ".concat(t+n-c*f[1],",").concat(r),f[1]>0&&(h+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(d,`,
        `).concat(t+n,",").concat(r+l*f[1])),h+="L ".concat(t+n,",").concat(r+a-l*f[2]),f[2]>0&&(h+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(d,`,
        `).concat(t+n-c*f[2],",").concat(r+a)),h+="L ".concat(t+c*f[3],",").concat(r+a),f[3]>0&&(h+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(r+a-l*f[3])),h+="Z"}else if(o>0&&i===+i&&i>0){var y=Math.min(o,i);h="M ".concat(t,",").concat(r+l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(d,",").concat(t+c*y,",").concat(r,`
            L `).concat(t+n-c*y,",").concat(r,`
            A `).concat(y,",").concat(y,",0,0,").concat(d,",").concat(t+n,",").concat(r+l*y,`
            L `).concat(t+n,",").concat(r+a-l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(d,",").concat(t+n-c*y,",").concat(r+a,`
            L `).concat(t+c*y,",").concat(r+a,`
            A `).concat(y,",").concat(y,",0,0,").concat(d,",").concat(t,",").concat(r+a-l*y," Z")}else h="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return h},U5e=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(i,i+l),h=Math.max(i,i+l),f=Math.min(o,o+c),m=Math.max(o,o+c);return n>=d&&n<=h&&a>=f&&a<=m}return!1},W5e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},DA=function(t){var r=q$(q$({},W5e),t),n=x.useRef(),a=x.useState(-1),i=I5e(a,2),o=i[0],l=i[1];x.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var S=n.current.getTotalLength();S&&l(S)}catch{}},[]);var c=r.x,d=r.y,h=r.width,f=r.height,m=r.radius,p=r.className,y=r.animationEasing,v=r.animationDuration,b=r.animationBegin,N=r.isAnimationActive,j=r.isUpdateAnimationActive;if(c!==+c||d!==+d||h!==+h||f!==+f||h===0||f===0)return null;var w=Nt("recharts-rectangle",p);return j?q.createElement(vl,{canBegin:o>0,from:{width:h,height:f,x:c,y:d},to:{width:h,height:f,x:c,y:d},duration:v,animationEasing:y,isActive:j},function(S){var C=S.width,P=S.height,T=S.x,O=S.y;return q.createElement(vl,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:v,isActive:N,easing:y},q.createElement("path",Tb({},ht(r,!0),{className:w,d:G$(T,O,C,P,m),ref:n})))}):q.createElement("path",Tb({},ht(r,!0),{className:w,d:G$(c,d,h,f,m)}))},H5e=["points","className","baseLinePoints","connectNulls"];function ih(){return ih=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ih.apply(this,arguments)}function V5e(e,t){if(e==null)return{};var r=q5e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function q5e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function K$(e){return Z5e(e)||Y5e(e)||K5e(e)||G5e()}function G5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K5e(e,t){if(e){if(typeof e=="string")return W2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W2(e,t)}}function Y5e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Z5e(e){if(Array.isArray(e))return W2(e)}function W2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Y$=function(t){return t&&t.x===+t.x&&t.y===+t.y},X5e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){Y$(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),Y$(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},kp=function(t,r){var n=X5e(t);r&&(n=[n.reduce(function(i,o){return[].concat(K$(i),K$(o))},[])]);var a=n.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},J5e=function(t,r,n){var a=kp(t,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(kp(r.reverse(),n).slice(1))},Q5e=function(t){var r=t.points,n=t.className,a=t.baseLinePoints,i=t.connectNulls,o=V5e(t,H5e);if(!r||!r.length)return null;var l=Nt("recharts-polygon",n);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",d=J5e(r,a,i);return q.createElement("g",{className:l},q.createElement("path",ih({},ht(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",stroke:"none",d})),c?q.createElement("path",ih({},ht(o,!0),{fill:"none",d:kp(r,i)})):null,c?q.createElement("path",ih({},ht(o,!0),{fill:"none",d:kp(a,i)})):null)}var h=kp(r,i);return q.createElement("path",ih({},ht(o,!0),{fill:h.slice(-1)==="Z"?o.fill:"none",className:l,d:h}))};function H2(){return H2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},H2.apply(this,arguments)}var $A=function(t){var r=t.cx,n=t.cy,a=t.r,i=t.className,o=Nt("recharts-dot",i);return r===+r&&n===+n&&a===+a?x.createElement("circle",H2({},ht(t,!1),X0(t),{className:o,cx:r,cy:n,r:a})):null};function Hg(e){"@babel/helpers - typeof";return Hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hg(e)}var eLe=["x","y","top","left","width","height","className"];function V2(){return V2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},V2.apply(this,arguments)}function Z$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tLe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z$(Object(r),!0).forEach(function(n){rLe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rLe(e,t,r){return t=nLe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nLe(e){var t=sLe(e,"string");return Hg(t)=="symbol"?t:t+""}function sLe(e,t){if(Hg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Hg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aLe(e,t){if(e==null)return{};var r=iLe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function iLe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var oLe=function(t,r,n,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},lLe=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,d=c===void 0?0:c,h=t.width,f=h===void 0?0:h,m=t.height,p=m===void 0?0:m,y=t.className,v=aLe(t,eLe),b=tLe({x:n,y:i,top:l,left:d,width:f,height:p},v);return!Be(n)||!Be(i)||!Be(f)||!Be(p)||!Be(l)||!Be(d)?null:q.createElement("path",V2({},ht(b,!0),{className:Nt("recharts-cross",y),d:oLe(n,i,f,p,l,d)}))},cLe=Wj,dLe=TG,uLe=Dc;function hLe(e,t){return e&&e.length?cLe(e,uLe(t),dLe):void 0}var fLe=hLe;const mLe=tr(fLe);var pLe=Wj,gLe=Dc,xLe=AG;function vLe(e,t){return e&&e.length?pLe(e,gLe(t),xLe):void 0}var yLe=vLe;const bLe=tr(yLe);var wLe=["cx","cy","angle","ticks","axisLine"],jLe=["ticks","tick","angle","tickFormatter","stroke"];function gf(e){"@babel/helpers - typeof";return gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gf(e)}function Ep(){return Ep=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ep.apply(this,arguments)}function X$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X$(Object(r),!0).forEach(function(n){Zj(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function J$(e,t){if(e==null)return{};var r=NLe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function NLe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function _Le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yK(n.key),n)}}function SLe(e,t,r){return t&&Q$(e.prototype,t),r&&Q$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function CLe(e,t,r){return t=Ab(t),PLe(e,vK()?Reflect.construct(t,r||[],Ab(e).constructor):t.apply(e,r))}function PLe(e,t){if(t&&(gf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kLe(e)}function kLe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vK=function(){return!!e})()}function Ab(e){return Ab=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ab(e)}function ELe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q2(e,t)}function q2(e,t){return q2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},q2(e,t)}function Zj(e,t,r){return t=yK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yK(e){var t=TLe(e,"string");return gf(t)=="symbol"?t:t+""}function TLe(e,t){if(gf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(gf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xj=function(e){function t(){return _Le(this,t),CLe(this,t,arguments)}return ELe(t,e),SLe(t,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return _r(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=mLe(l,function(h){return h.coordinate||0}),d=bLe(l,function(h){return h.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=n.axisLine,d=J$(n,wLe),h=l.reduce(function(y,v){return[Math.min(y[0],v.coordinate),Math.max(y[1],v.coordinate)]},[1/0,-1/0]),f=_r(a,i,h[0],o),m=_r(a,i,h[1],o),p=Zc(Zc(Zc({},ht(d,!1)),{},{fill:"none"},ht(c,!1)),{},{x1:f.x,y1:f.y,x2:m.x,y2:m.y});return q.createElement("line",Ep({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,d=a.stroke,h=J$(a,jLe),f=this.getTickTextAnchor(),m=ht(h,!1),p=ht(o,!1),y=i.map(function(v,b){var N=n.getTickValueCoord(v),j=Zc(Zc(Zc(Zc({textAnchor:f,transform:"rotate(".concat(90-l,", ").concat(N.x,", ").concat(N.y,")")},m),{},{stroke:"none",fill:d},p),{},{index:b},N),{},{payload:v});return q.createElement(nr,Ep({className:Nt("recharts-polar-radius-axis-tick",sK(o)),key:"tick-".concat(v.coordinate)},Zd(n.props,v,b)),t.renderTickItem(o,j,c?c(v.value,b):v.value))});return q.createElement(nr,{className:"recharts-polar-radius-axis-ticks"},y)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,o=n.tick;return!a||!a.length?null:q.createElement(nr,{className:Nt("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),Rn.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var o;return q.isValidElement(n)?o=q.cloneElement(n,a):yt(n)?o=n(a):o=q.createElement(Xd,Ep({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(x.PureComponent);Zj(Xj,"displayName","PolarRadiusAxis");Zj(Xj,"axisType","radiusAxis");Zj(Xj,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function xf(e){"@babel/helpers - typeof";return xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xf(e)}function ud(){return ud=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ud.apply(this,arguments)}function e5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Xc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e5(Object(r),!0).forEach(function(n){Jj(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ALe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wK(n.key),n)}}function OLe(e,t,r){return t&&t5(e.prototype,t),r&&t5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function MLe(e,t,r){return t=Ob(t),ILe(e,bK()?Reflect.construct(t,r||[],Ob(e).constructor):t.apply(e,r))}function ILe(e,t){if(t&&(xf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RLe(e)}function RLe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bK=function(){return!!e})()}function Ob(e){return Ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ob(e)}function DLe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G2(e,t)}function G2(e,t){return G2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},G2(e,t)}function Jj(e,t,r){return t=wK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wK(e){var t=$Le(e,"string");return xf(t)=="symbol"?t:t+""}function $Le(e,t){if(xf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(xf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LLe=Math.PI/180,r5=1e-5,Qj=function(e){function t(){return ALe(this,t),MLe(this,t,arguments)}return DLe(t,e),OLe(t,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,o=a.cy,l=a.radius,c=a.orientation,d=a.tickSize,h=d||8,f=_r(i,o,l,n.coordinate),m=_r(i,o,l+(c==="inner"?-1:1)*h,n.coordinate);return{x1:f.x,y1:f.y,x2:m.x,y2:m.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*LLe),o;return i>r5?o=a==="outer"?"start":"end":i<-r5?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.radius,l=n.axisLine,c=n.axisLineType,d=Xc(Xc({},ht(this.props,!1)),{},{fill:"none"},ht(l,!1));if(c==="circle")return q.createElement($A,ud({className:"recharts-polar-angle-axis-line"},d,{cx:a,cy:i,r:o}));var h=this.props.ticks,f=h.map(function(m){return _r(a,i,o,m.coordinate)});return q.createElement(Q5e,ud({className:"recharts-polar-angle-axis-line"},d,{points:f}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,d=a.stroke,h=ht(this.props,!1),f=ht(o,!1),m=Xc(Xc({},h),{},{fill:"none"},ht(l,!1)),p=i.map(function(y,v){var b=n.getTickLineCoord(y),N=n.getTickTextAnchor(y),j=Xc(Xc(Xc({textAnchor:N},h),{},{stroke:"none",fill:d},f),{},{index:v,payload:y,x:b.x2,y:b.y2});return q.createElement(nr,ud({className:Nt("recharts-polar-angle-axis-tick",sK(o)),key:"tick-".concat(y.coordinate)},Zd(n.props,y,v)),l&&q.createElement("line",ud({className:"recharts-polar-angle-axis-tick-line"},m,b)),o&&t.renderTickItem(o,j,c?c(y.value,v):y.value))});return q.createElement(nr,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!a||!a.length?null:q.createElement(nr,{className:Nt("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var o;return q.isValidElement(n)?o=q.cloneElement(n,a):yt(n)?o=n(a):o=q.createElement(Xd,ud({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(x.PureComponent);Jj(Qj,"displayName","PolarAngleAxis");Jj(Qj,"axisType","angleAxis");Jj(Qj,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var FLe=Pq,BLe=FLe(Object.getPrototypeOf,Object),zLe=BLe,ULe=Nl,WLe=zLe,HLe=_l,VLe="[object Object]",qLe=Function.prototype,GLe=Object.prototype,jK=qLe.toString,KLe=GLe.hasOwnProperty,YLe=jK.call(Object);function ZLe(e){if(!HLe(e)||ULe(e)!=VLe)return!1;var t=WLe(e);if(t===null)return!0;var r=KLe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&jK.call(r)==YLe}var XLe=ZLe;const JLe=tr(XLe);var QLe=Nl,e6e=_l,t6e="[object Boolean]";function r6e(e){return e===!0||e===!1||e6e(e)&&QLe(e)==t6e}var n6e=r6e;const s6e=tr(n6e);function Vg(e){"@babel/helpers - typeof";return Vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vg(e)}function Mb(){return Mb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mb.apply(this,arguments)}function a6e(e,t){return c6e(e)||l6e(e,t)||o6e(e,t)||i6e()}function i6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o6e(e,t){if(e){if(typeof e=="string")return n5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n5(e,t)}}function n5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l6e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(h){d=!0,a=h}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function c6e(e){if(Array.isArray(e))return e}function s5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function a5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s5(Object(r),!0).forEach(function(n){d6e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function d6e(e,t,r){return t=u6e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u6e(e){var t=h6e(e,"string");return Vg(t)=="symbol"?t:t+""}function h6e(e,t){if(Vg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Vg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var i5=function(t,r,n,a,i){var o=n-a,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-o/2,",").concat(r+i),l+="L ".concat(t+n-o/2-a,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},f6e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},m6e=function(t){var r=a5(a5({},f6e),t),n=x.useRef(),a=x.useState(-1),i=a6e(a,2),o=i[0],l=i[1];x.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&l(w)}catch{}},[]);var c=r.x,d=r.y,h=r.upperWidth,f=r.lowerWidth,m=r.height,p=r.className,y=r.animationEasing,v=r.animationDuration,b=r.animationBegin,N=r.isUpdateAnimationActive;if(c!==+c||d!==+d||h!==+h||f!==+f||m!==+m||h===0&&f===0||m===0)return null;var j=Nt("recharts-trapezoid",p);return N?q.createElement(vl,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:m,x:c,y:d},to:{upperWidth:h,lowerWidth:f,height:m,x:c,y:d},duration:v,animationEasing:y,isActive:N},function(w){var S=w.upperWidth,C=w.lowerWidth,P=w.height,T=w.x,O=w.y;return q.createElement(vl,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:v,easing:y},q.createElement("path",Mb({},ht(r,!0),{className:j,d:i5(T,O,S,C,P),ref:n})))}):q.createElement("g",null,q.createElement("path",Mb({},ht(r,!0),{className:j,d:i5(c,d,h,f,m)})))},p6e=["option","shapeType","propTransformer","activeClassName","isActive"];function qg(e){"@babel/helpers - typeof";return qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qg(e)}function g6e(e,t){if(e==null)return{};var r=x6e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function x6e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function o5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ib(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o5(Object(r),!0).forEach(function(n){v6e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function v6e(e,t,r){return t=y6e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y6e(e){var t=b6e(e,"string");return qg(t)=="symbol"?t:t+""}function b6e(e,t){if(qg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(qg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function w6e(e,t){return Ib(Ib({},t),e)}function j6e(e,t){return e==="symbols"}function l5(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return q.createElement(DA,r);case"trapezoid":return q.createElement(m6e,r);case"sector":return q.createElement(oK,r);case"symbols":if(j6e(t))return q.createElement(eA,r);break;default:return null}}function N6e(e){return x.isValidElement(e)?e.props:e}function NK(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?w6e:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=g6e(e,p6e),d;if(x.isValidElement(t))d=x.cloneElement(t,Ib(Ib({},c),N6e(t)));else if(yt(t))d=t(c);else if(JLe(t)&&!s6e(t)){var h=a(t,c);d=q.createElement(l5,{shapeType:r,elementProps:h})}else{var f=c;d=q.createElement(l5,{shapeType:r,elementProps:f})}return l?q.createElement(nr,{className:o},d):d}function eN(e,t){return t!=null&&"trapezoids"in e.props}function tN(e,t){return t!=null&&"sectors"in e.props}function Gg(e,t){return t!=null&&"points"in e.props}function _6e(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&i}function S6e(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function C6e(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function P6e(e,t){var r;return eN(e,t)?r=_6e:tN(e,t)?r=S6e:Gg(e,t)&&(r=C6e),r}function k6e(e,t){var r;return eN(e,t)?r="trapezoids":tN(e,t)?r="sectors":Gg(e,t)&&(r="points"),r}function E6e(e,t){if(eN(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(tN(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Gg(e,t)?t.payload:{}}function T6e(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=k6e(r,t),i=E6e(r,t),o=n.filter(function(c,d){var h=qj(i,c),f=r.props[a].filter(function(y){var v=P6e(r,t);return v(y,t)}),m=r.props[a].indexOf(f[f.length-1]),p=d===m;return h&&p}),l=n.indexOf(o[o.length-1]);return l}var zy;function vf(e){"@babel/helpers - typeof";return vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vf(e)}function oh(){return oh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oh.apply(this,arguments)}function c5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c5(Object(r),!0).forEach(function(n){Ya(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function A6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,SK(n.key),n)}}function O6e(e,t,r){return t&&d5(e.prototype,t),r&&d5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function M6e(e,t,r){return t=Rb(t),I6e(e,_K()?Reflect.construct(t,r||[],Rb(e).constructor):t.apply(e,r))}function I6e(e,t){if(t&&(vf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R6e(e)}function R6e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _K(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_K=function(){return!!e})()}function Rb(e){return Rb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rb(e)}function D6e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K2(e,t)}function K2(e,t){return K2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},K2(e,t)}function Ya(e,t,r){return t=SK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SK(e){var t=$6e(e,"string");return vf(t)=="symbol"?t:t+""}function $6e(e,t){if(vf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(vf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cl=function(e){function t(r){var n;return A6e(this,t),n=M6e(this,t,[r]),Ya(n,"pieRef",null),Ya(n,"sectorRefs",[]),Ya(n,"id",Mx("recharts-pie-")),Ya(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),yt(a)&&a()}),Ya(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),yt(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return D6e(t,e),O6e(t,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,d=i.valueKey,h=ht(this.props,!1),f=ht(o,!1),m=ht(l,!1),p=o&&o.offsetRadius||20,y=n.map(function(v,b){var N=(v.startAngle+v.endAngle)/2,j=_r(v.cx,v.cy,v.outerRadius+p,N),w=vr(vr(vr(vr({},h),v),{},{stroke:"none"},f),{},{index:b,textAnchor:t.getTextAnchor(j.x,v.cx)},j),S=vr(vr(vr(vr({},h),v),{},{fill:"none",stroke:v.fill},m),{},{index:b,points:[_r(v.cx,v.cy,v.outerRadius,N),j]}),C=c;return It(c)&&It(d)?C="value":It(c)&&(C=d),q.createElement(nr,{key:"label-".concat(v.startAngle,"-").concat(v.endAngle,"-").concat(v.midAngle,"-").concat(b)},l&&t.renderLabelLineItem(l,S,"line"),t.renderLabelItem(o,w,ds(v,C)))});return q.createElement(nr,{className:"recharts-pie-labels"},y)}},{key:"renderSectorsStatically",value:function(n){var a=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return n.map(function(d,h){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&n.length!==1)return null;var f=a.isActiveIndex(h),m=c&&a.hasActiveIndex()?c:null,p=f?o:m,y=vr(vr({},d),{},{stroke:l?d.fill:d.stroke,tabIndex:-1});return q.createElement(nr,oh({ref:function(b){b&&!a.sectorRefs.includes(b)&&a.sectorRefs.push(b)},tabIndex:-1,className:"recharts-pie-sector"},Zd(a.props,d,h),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(h)}),q.createElement(NK,oh({option:p,isActive:f,shapeType:"sector"},y)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,i=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,d=a.animationEasing,h=a.animationId,f=this.state,m=f.prevSectors,p=f.prevIsAnimationActive;return q.createElement(vl,{begin:l,duration:c,isActive:o,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(h,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(y){var v=y.t,b=[],N=i&&i[0],j=N.startAngle;return i.forEach(function(w,S){var C=m&&m[S],P=S>0?Ta(w,"paddingAngle",0):0;if(C){var T=Ul(C.endAngle-C.startAngle,w.endAngle-w.startAngle),O=vr(vr({},w),{},{startAngle:j+P,endAngle:j+T(v)+P});b.push(O),j=O.endAngle}else{var E=w.endAngle,D=w.startAngle,I=Ul(0,E-D),A=I(v),V=vr(vr({},w),{},{startAngle:j+P,endAngle:j+A+P});b.push(V),j=V.endAngle}}),q.createElement(nr,null,n.renderSectorsStatically(b))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,i=n.isAnimationActive,o=this.state.prevSectors;return i&&a&&a.length&&(!o||!qj(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,i=a.hide,o=a.sectors,l=a.className,c=a.label,d=a.cx,h=a.cy,f=a.innerRadius,m=a.outerRadius,p=a.isAnimationActive,y=this.state.isAnimationFinished;if(i||!o||!o.length||!Be(d)||!Be(h)||!Be(f)||!Be(m))return null;var v=Nt("recharts-pie",l);return q.createElement(nr,{tabIndex:this.props.rootTabIndex,className:v,ref:function(N){n.pieRef=N}},this.renderSectors(),c&&this.renderLabels(o),Rn.renderCallByParent(this.props,null,!1),(!p||y)&&pc.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,i){if(q.isValidElement(n))return q.cloneElement(n,a);if(yt(n))return n(a);var o=Nt("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return q.createElement(M2,oh({},a,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,a,i){if(q.isValidElement(n))return q.cloneElement(n,a);var o=i;if(yt(n)&&(o=n(a),q.isValidElement(o)))return o;var l=Nt("recharts-pie-label-text",typeof n!="boolean"&&!yt(n)?n.className:"");return q.createElement(Xd,oh({},a,{alignmentBaseline:"middle",className:l}),o)}}])}(x.PureComponent);zy=Cl;Ya(Cl,"displayName","Pie");Ya(Cl,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!nl.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Ya(Cl,"parseDeltaAngle",function(e,t){var r=Ns(t-e),n=Math.min(Math.abs(t-e),360);return r*n});Ya(Cl,"getRealPieData",function(e){var t=e.data,r=e.children,n=ht(e,!1),a=ti(r,Dj);return t&&t.length?t.map(function(i,o){return vr(vr(vr({payload:i},n),i),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(i){return vr(vr({},n),i.props)}):[]});Ya(Cl,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,a=t.width,i=t.height,o=nK(a,i),l=n+_s(e.cx,a,a/2),c=r+_s(e.cy,i,i/2),d=_s(e.innerRadius,o,0),h=_s(e.outerRadius,o,o*.8),f=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:l,cy:c,innerRadius:d,outerRadius:h,maxRadius:f}});Ya(Cl,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?vr(vr({},t.type.defaultProps),t.props):t.props,a=zy.getRealPieData(n);if(!a||!a.length)return null;var i=n.cornerRadius,o=n.startAngle,l=n.endAngle,c=n.paddingAngle,d=n.dataKey,h=n.nameKey,f=n.valueKey,m=n.tooltipType,p=Math.abs(n.minAngle),y=zy.parseCoordinateOfPie(n,r),v=zy.parseDeltaAngle(o,l),b=Math.abs(v),N=d;It(d)&&It(f)?(rl(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),N="value"):It(d)&&(rl(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),N=f);var j=a.filter(function(O){return ds(O,N,0)!==0}).length,w=(b>=360?j:j-1)*c,S=b-j*p-w,C=a.reduce(function(O,E){var D=ds(E,N,0);return O+(Be(D)?D:0)},0),P;if(C>0){var T;P=a.map(function(O,E){var D=ds(O,N,0),I=ds(O,h,E),A=(Be(D)?D:0)/C,V;E?V=T.endAngle+Ns(v)*c*(D!==0?1:0):V=o;var U=V+Ns(v)*((D!==0?p:0)+A*S),$=(V+U)/2,H=(y.innerRadius+y.outerRadius)/2,F=[{name:I,value:D,payload:O,dataKey:N,type:m}],R=_r(y.cx,y.cy,H,$);return T=vr(vr(vr({percent:A,cornerRadius:i,name:I,tooltipPayload:F,midAngle:$,middleRadius:H,tooltipPosition:R},O),y),{},{value:ds(O,N),startAngle:V,endAngle:U,payload:O,paddingAngle:Ns(v)*c}),T})}return vr(vr({},y),{},{sectors:P,data:a})});var L6e=Math.ceil,F6e=Math.max;function B6e(e,t,r,n){for(var a=-1,i=F6e(L6e((t-e)/(r||1)),0),o=Array(i);i--;)o[n?i:++a]=e,e+=r;return o}var z6e=B6e,U6e=Vq,u5=1/0,W6e=17976931348623157e292;function H6e(e){if(!e)return e===0?e:0;if(e=U6e(e),e===u5||e===-u5){var t=e<0?-1:1;return t*W6e}return e===e?e:0}var V6e=H6e,q6e=z6e,G6e=Rj,C1=V6e;function K6e(e){return function(t,r,n){return n&&typeof n!="number"&&G6e(t,r,n)&&(r=n=void 0),t=C1(t),r===void 0?(r=t,t=0):r=C1(r),n=n===void 0?t<r?1:-1:C1(n),q6e(t,r,n,e)}}var Y6e=K6e,Z6e=Y6e,X6e=Z6e(),J6e=X6e;const Db=tr(J6e);function Kg(e){"@babel/helpers - typeof";return Kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kg(e)}function h5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function f5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h5(Object(r),!0).forEach(function(n){CK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CK(e,t,r){return t=Q6e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q6e(e){var t=eFe(e,"string");return Kg(t)=="symbol"?t:t+""}function eFe(e,t){if(Kg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Kg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tFe=["Webkit","Moz","O","ms"],rFe=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=tFe.reduce(function(i,o){return f5(f5({},i),{},CK({},o+n,r))},{});return a[t]=r,a};function yf(e){"@babel/helpers - typeof";return yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yf(e)}function $b(){return $b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$b.apply(this,arguments)}function m5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function P1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m5(Object(r),!0).forEach(function(n){ha(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nFe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kK(n.key),n)}}function sFe(e,t,r){return t&&p5(e.prototype,t),r&&p5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function aFe(e,t,r){return t=Lb(t),iFe(e,PK()?Reflect.construct(t,r||[],Lb(e).constructor):t.apply(e,r))}function iFe(e,t){if(t&&(yf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oFe(e)}function oFe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PK=function(){return!!e})()}function Lb(e){return Lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lb(e)}function lFe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y2(e,t)}function Y2(e,t){return Y2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Y2(e,t)}function ha(e,t,r){return t=kK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kK(e){var t=cFe(e,"string");return yf(t)=="symbol"?t:t+""}function cFe(e,t){if(yf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(yf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dFe=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,d=Sp().domain(Db(0,c)).range([i,i+o-l]),h=d.domain().map(function(f){return d(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(n),endX:d(a),scale:d,scaleValues:h}},g5=function(t){return t.changedTouches&&!!t.changedTouches.length},bf=function(e){function t(r){var n;return nFe(this,t),n=aFe(this,t,[r]),ha(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),ha(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),ha(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),ha(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),ha(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),ha(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),ha(n,"handleSlideDragStart",function(a){var i=g5(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return lFe(t,e),sFe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,h=d.length-1,f=Math.min(a,i),m=Math.max(a,i),p=t.getIndexInRange(o,f),y=t.getIndexInRange(o,m);return{startIndex:p-p%c,endIndex:y===h?h:y-y%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,l=a.dataKey,c=ds(i[n],l,n);return yt(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,d=c.x,h=c.width,f=c.travellerWidth,m=c.startIndex,p=c.endIndex,y=c.onChange,v=n.pageX-i;v>0?v=Math.min(v,d+h-f-l,d+h-f-o):v<0&&(v=Math.max(v,d-o,d-l));var b=this.getIndex({startX:o+v,endX:l+v});(b.startIndex!==m||b.endIndex!==p)&&y&&y(b),this.setState({startX:o+v,endX:l+v,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=g5(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,d=this.state[o],h=this.props,f=h.x,m=h.width,p=h.travellerWidth,y=h.onChange,v=h.gap,b=h.data,N={startX:this.state.startX,endX:this.state.endX},j=n.pageX-i;j>0?j=Math.min(j,f+m-p-d):j<0&&(j=Math.max(j,f-d)),N[o]=d+j;var w=this.getIndex(N),S=w.startIndex,C=w.endIndex,P=function(){var O=b.length-1;return o==="startX"&&(l>c?S%v===0:C%v===0)||l<c&&C===O||o==="endX"&&(l>c?C%v===0:S%v===0)||l>c&&C===O};this.setState(ha(ha({},o,d+j),"brushMoveStartX",n.pageX),function(){y&&P()&&y(w)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,h=this.state[a],f=l.indexOf(h);if(f!==-1){var m=f+n;if(!(m===-1||m>=l.length)){var p=l[m];a==="startX"&&p>=d||a==="endX"&&p<=c||this.setState(ha({},a,p),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.fill,d=n.stroke;return q.createElement("rect",{stroke:d,fill:c,x:a,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.data,d=n.children,h=n.padding,f=x.Children.only(d);return f?q.cloneElement(f,{x:a,y:i,width:o,height:l,margin:h,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,l=this,c=this.props,d=c.y,h=c.travellerWidth,f=c.height,m=c.traveller,p=c.ariaLabel,y=c.data,v=c.startIndex,b=c.endIndex,N=Math.max(n,this.props.x),j=P1(P1({},ht(this.props,!1)),{},{x:N,y:d,width:h,height:f}),w=p||"Min value: ".concat((i=y[v])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=y[b])===null||o===void 0?void 0:o.name);return q.createElement(nr,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(C){["ArrowLeft","ArrowRight"].includes(C.key)&&(C.preventDefault(),C.stopPropagation(),l.handleTravellerMoveKeyboard(C.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(m,j))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,l=i.height,c=i.stroke,d=i.travellerWidth,h=Math.min(n,a)+d,f=Math.max(Math.abs(a-n)-d,0);return q.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:h,y:o,width:f,height:l})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,d=n.stroke,h=this.state,f=h.startX,m=h.endX,p=5,y={pointerEvents:"none",fill:d};return q.createElement(nr,{className:"recharts-brush-texts"},q.createElement(Xd,$b({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,m)-p,y:o+l/2},y),this.getTextOfTick(a)),q.createElement(Xd,$b({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,m)+c+p,y:o+l/2},y),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,l=n.x,c=n.y,d=n.width,h=n.height,f=n.alwaysShowText,m=this.state,p=m.startX,y=m.endX,v=m.isTextActive,b=m.isSlideMoving,N=m.isTravellerMoving,j=m.isTravellerFocused;if(!a||!a.length||!Be(l)||!Be(c)||!Be(d)||!Be(h)||d<=0||h<=0)return null;var w=Nt("recharts-brush",i),S=q.Children.count(o)===1,C=rFe("userSelect","none");return q.createElement(nr,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:C},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(p,y),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(y,"endX"),(v||b||N||j||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,l=n.height,c=n.stroke,d=Math.floor(i+l/2)-1;return q.createElement(q.Fragment,null,q.createElement("rect",{x:a,y:i,width:o,height:l,fill:c,stroke:"none"}),q.createElement("line",{x1:a+1,y1:d,x2:a+o-1,y2:d,fill:"none",stroke:"#fff"}),q.createElement("line",{x1:a+1,y1:d+2,x2:a+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return q.isValidElement(n)?i=q.cloneElement(n,a):yt(n)?i=n(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,l=n.x,c=n.travellerWidth,d=n.updateId,h=n.startIndex,f=n.endIndex;if(i!==a.prevData||d!==a.prevUpdateId)return P1({prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},i&&i.length?dFe({data:i,width:o,x:l,travellerWidth:c,startIndex:h,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var m=a.scale.domain().map(function(p){return a.scale(p)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>a?l=c:o=c}return a>=n[l]?l:o}}])}(x.PureComponent);ha(bf,"displayName","Brush");ha(bf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var uFe=lA;function hFe(e,t){var r;return uFe(e,function(n,a,i){return r=t(n,a,i),!r}),!!r}var fFe=hFe,mFe=yq,pFe=Dc,gFe=fFe,xFe=sa,vFe=Rj;function yFe(e,t,r){var n=xFe(e)?mFe:gFe;return r&&vFe(e,t,r)&&(t=void 0),n(e,pFe(t))}var bFe=yFe;const wFe=tr(bFe);var No=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},x5=Bq;function jFe(e,t,r){t=="__proto__"&&x5?x5(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var NFe=jFe,_Fe=NFe,SFe=Lq,CFe=Dc;function PFe(e,t){var r={};return t=CFe(t),SFe(e,function(n,a,i){_Fe(r,a,t(n,a,i))}),r}var kFe=PFe;const EFe=tr(kFe);function TFe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var AFe=TFe,OFe=lA;function MFe(e,t){var r=!0;return OFe(e,function(n,a,i){return r=!!t(n,a,i),r}),r}var IFe=MFe,RFe=AFe,DFe=IFe,$Fe=Dc,LFe=sa,FFe=Rj;function BFe(e,t,r){var n=LFe(e)?RFe:DFe;return r&&FFe(e,t,r)&&(t=void 0),n(e,$Fe(t))}var zFe=BFe;const UFe=tr(zFe);var WFe=["x","y"];function Yg(e){"@babel/helpers - typeof";return Yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yg(e)}function Z2(){return Z2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Z2.apply(this,arguments)}function v5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Gm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v5(Object(r),!0).forEach(function(n){HFe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HFe(e,t,r){return t=VFe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VFe(e){var t=qFe(e,"string");return Yg(t)=="symbol"?t:t+""}function qFe(e,t){if(Yg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Yg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GFe(e,t){if(e==null)return{};var r=KFe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function KFe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function YFe(e,t){var r=e.x,n=e.y,a=GFe(e,WFe),i="".concat(r),o=parseInt(i,10),l="".concat(n),c=parseInt(l,10),d="".concat(t.height||a.height),h=parseInt(d,10),f="".concat(t.width||a.width),m=parseInt(f,10);return Gm(Gm(Gm(Gm(Gm({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:h,width:m,name:t.name,radius:t.radius})}function y5(e){return q.createElement(NK,Z2({shapeType:"rectangle",propTransformer:YFe,activeClassName:"recharts-active-bar"},e))}var ZFe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var i=Be(n)||y_e(n);return i?t(n,a):(i||Qd(),r)}},XFe=["value","background"],EK;function wf(e){"@babel/helpers - typeof";return wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wf(e)}function JFe(e,t){if(e==null)return{};var r=QFe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function QFe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Fb(){return Fb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fb.apply(this,arguments)}function b5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ln(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b5(Object(r),!0).forEach(function(n){nc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function e8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,AK(n.key),n)}}function t8e(e,t,r){return t&&w5(e.prototype,t),r&&w5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function r8e(e,t,r){return t=Bb(t),n8e(e,TK()?Reflect.construct(t,r||[],Bb(e).constructor):t.apply(e,r))}function n8e(e,t){if(t&&(wf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s8e(e)}function s8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TK=function(){return!!e})()}function Bb(e){return Bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bb(e)}function a8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X2(e,t)}function X2(e,t){return X2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},X2(e,t)}function nc(e,t,r){return t=AK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AK(e){var t=i8e(e,"string");return wf(t)=="symbol"?t:t+""}function i8e(e,t){if(wf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(wf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pu=function(e){function t(){var r;e8e(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=r8e(this,t,[].concat(a)),nc(r,"state",{isAnimationFinished:!1}),nc(r,"id",Mx("recharts-bar-")),nc(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),nc(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return a8e(t,e),t8e(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,d=i.activeBar,h=ht(this.props,!1);return n&&n.map(function(f,m){var p=m===c,y=p?d:o,v=ln(ln(ln({},h),f),{},{isActive:p,option:y,index:m,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return q.createElement(nr,Fb({className:"recharts-bar-rectangle"},Zd(a.props,f,m),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(m)}),q.createElement(y5,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,h=a.animationEasing,f=a.animationId,m=this.state.prevData;return q.createElement(vl,{begin:c,duration:d,isActive:l,easing:h,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var y=p.t,v=i.map(function(b,N){var j=m&&m[N];if(j){var w=Ul(j.x,b.x),S=Ul(j.y,b.y),C=Ul(j.width,b.width),P=Ul(j.height,b.height);return ln(ln({},b),{},{x:w(y),y:S(y),width:C(y),height:P(y)})}if(o==="horizontal"){var T=Ul(0,b.height),O=T(y);return ln(ln({},b),{},{y:b.y+b.height-O,height:O})}var E=Ul(0,b.width),D=E(y);return ln(ln({},b),{},{width:D})});return q.createElement(nr,null,n.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!qj(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,l=a.activeIndex,c=ht(this.props.background,!1);return i.map(function(d,h){d.value;var f=d.background,m=JFe(d,XFe);if(!f)return null;var p=ln(ln(ln(ln(ln({},m),{},{fill:"#eee"},f),c),Zd(n.props,d,h)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:h,className:"recharts-bar-background-rectangle"});return q.createElement(y5,Fb({key:"background-bar-".concat(h),option:n.props.background,isActive:h===l},p))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,d=i.layout,h=i.children,f=ti(h,Yj);if(!f)return null;var m=d==="vertical"?o[0].height/2:o[0].width/2,p=function(b,N){var j=Array.isArray(b.value)?b.value[1]:b.value;return{x:b.x,y:b.y,value:j,errorVal:ds(b,N)}},y={clipPath:n?"url(#clipPath-".concat(a,")"):null};return q.createElement(nr,y,f.map(function(v){return q.cloneElement(v,{key:"error-bar-".concat(a,"-").concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:m,dataPointFormatter:p})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,l=n.xAxis,c=n.yAxis,d=n.left,h=n.top,f=n.width,m=n.height,p=n.isAnimationActive,y=n.background,v=n.id;if(a||!i||!i.length)return null;var b=this.state.isAnimationFinished,N=Nt("recharts-bar",o),j=l&&l.allowDataOverflow,w=c&&c.allowDataOverflow,S=j||w,C=It(v)?this.id:v;return q.createElement(nr,{className:N},j||w?q.createElement("defs",null,q.createElement("clipPath",{id:"clipPath-".concat(C)},q.createElement("rect",{x:j?d:d-f/2,y:w?h:h-m/2,width:j?f:f*2,height:w?m:m*2}))):null,q.createElement(nr,{className:"recharts-bar-rectangles",clipPath:S?"url(#clipPath-".concat(C,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(S,C),(!p||b)&&pc.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(x.PureComponent);EK=pu;nc(pu,"displayName","Bar");nc(pu,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!nl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});nc(pu,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,d=e.stackedData,h=e.dataStartIndex,f=e.displayedData,m=e.offset,p=LRe(n,r);if(!p)return null;var y=t.layout,v=r.type.defaultProps,b=v!==void 0?ln(ln({},v),r.props):r.props,N=b.dataKey,j=b.children,w=b.minPointSize,S=y==="horizontal"?o:i,C=d?S.scale.domain():null,P=VRe({numericAxis:S}),T=ti(j,Dj),O=f.map(function(E,D){var I,A,V,U,$,H;d?I=FRe(d[h+D],C):(I=ds(E,N),Array.isArray(I)||(I=[P,I]));var F=ZFe(w,EK.defaultProps.minPointSize)(I[1],D);if(y==="horizontal"){var R,z=[o.scale(I[0]),o.scale(I[1])],G=z[0],ie=z[1];A=d$({axis:i,ticks:l,bandSize:a,offset:p.offset,entry:E,index:D}),V=(R=ie??G)!==null&&R!==void 0?R:void 0,U=p.size;var ae=G-ie;if($=Number.isNaN(ae)?0:ae,H={x:A,y:o.y,width:U,height:o.height},Math.abs(F)>0&&Math.abs($)<Math.abs(F)){var X=Ns($||F)*(Math.abs(F)-Math.abs($));V-=X,$+=X}}else{var le=[i.scale(I[0]),i.scale(I[1])],fe=le[0],ge=le[1];if(A=fe,V=d$({axis:o,ticks:c,bandSize:a,offset:p.offset,entry:E,index:D}),U=ge-fe,$=p.size,H={x:i.x,y:V,width:i.width,height:$},Math.abs(F)>0&&Math.abs(U)<Math.abs(F)){var ee=Ns(U||F)*(Math.abs(F)-Math.abs(U));U+=ee}}return ln(ln(ln({},E),{},{x:A,y:V,width:U,height:$,value:d?I:I[1],payload:E,background:H},T&&T[D]&&T[D].props),{},{tooltipPayload:[tK(r,E)],tooltipPosition:{x:A+U/2,y:V+$/2}})});return ln({data:O,layout:y},m)});function Zg(e){"@babel/helpers - typeof";return Zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zg(e)}function o8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,OK(n.key),n)}}function l8e(e,t,r){return t&&j5(e.prototype,t),r&&j5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function N5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Mi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N5(Object(r),!0).forEach(function(n){rN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rN(e,t,r){return t=OK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OK(e){var t=c8e(e,"string");return Zg(t)=="symbol"?t:t+""}function c8e(e,t){if(Zg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Zg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var d8e=function(t,r,n,a,i){var o=t.width,l=t.height,c=t.layout,d=t.children,h=Object.keys(r),f={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},m=!!va(d,pu);return h.reduce(function(p,y){var v=r[y],b=v.orientation,N=v.domain,j=v.padding,w=j===void 0?{}:j,S=v.mirror,C=v.reversed,P="".concat(b).concat(S?"Mirror":""),T,O,E,D,I;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var A=N[1]-N[0],V=1/0,U=v.categoricalDomain.sort(j_e);if(U.forEach(function(le,fe){fe>0&&(V=Math.min((le||0)-(U[fe-1]||0),V))}),Number.isFinite(V)){var $=V/A,H=v.layout==="vertical"?n.height:n.width;if(v.padding==="gap"&&(T=$*H/2),v.padding==="no-gap"){var F=_s(t.barCategoryGap,$*H),R=$*H/2;T=R-F-(R-F)/H*F}}}a==="xAxis"?O=[n.left+(w.left||0)+(T||0),n.left+n.width-(w.right||0)-(T||0)]:a==="yAxis"?O=c==="horizontal"?[n.top+n.height-(w.bottom||0),n.top+(w.top||0)]:[n.top+(w.top||0)+(T||0),n.top+n.height-(w.bottom||0)-(T||0)]:O=v.range,C&&(O=[O[1],O[0]]);var z=XG(v,i,m),G=z.scale,ie=z.realScaleType;G.domain(N).range(O),JG(G);var ae=QG(G,Mi(Mi({},v),{},{realScaleType:ie}));a==="xAxis"?(I=b==="top"&&!S||b==="bottom"&&S,E=n.left,D=f[P]-I*v.height):a==="yAxis"&&(I=b==="left"&&!S||b==="right"&&S,E=f[P]-I*v.width,D=n.top);var X=Mi(Mi(Mi({},v),ae),{},{realScaleType:ie,x:E,y:D,scale:G,width:a==="xAxis"?n.width:v.width,height:a==="yAxis"?n.height:v.height});return X.bandSize=_b(X,ae),!v.hide&&a==="xAxis"?f[P]+=(I?-1:1)*X.height:v.hide||(f[P]+=(I?-1:1)*X.width),Mi(Mi({},p),{},rN({},y,X))},{})},MK=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},u8e=function(t){var r=t.x1,n=t.y1,a=t.x2,i=t.y2;return MK({x:r,y:n},{x:a,y:i})},IK=function(){function e(t){o8e(this,e),this.scale=t}return l8e(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();rN(IK,"EPS",1e-4);var LA=function(t){var r=Object.keys(t).reduce(function(n,a){return Mi(Mi({},n),{},rN({},a,IK.create(t[a])))},{});return Mi(Mi({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return EFe(a,function(c,d){return r[d].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return UFe(a,function(i,o){return r[o].isInRange(i)})}})};function h8e(e){return(e%180+180)%180}var f8e=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=h8e(a),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},m8e=NNe(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),RK=x.createContext(void 0),DK=x.createContext(void 0),$K=x.createContext(void 0),p8e=x.createContext({}),LK=x.createContext(void 0),FK=x.createContext(0),BK=x.createContext(0),_5=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,c=t.width,d=t.height,h=m8e(i);return q.createElement(RK.Provider,{value:n},q.createElement(DK.Provider,{value:a},q.createElement(p8e.Provider,{value:i},q.createElement($K.Provider,{value:h},q.createElement(LK.Provider,{value:o},q.createElement(FK.Provider,{value:d},q.createElement(BK.Provider,{value:c},l)))))))},g8e=function(){return x.useContext(LK)},zK=function(t){var r=x.useContext(RK);r==null&&Qd();var n=r[t];return n==null&&Qd(),n},UK=function(t){var r=x.useContext(DK);r==null&&Qd();var n=r[t];return n==null&&Qd(),n},x8e=function(){var t=x.useContext($K);return t},WK=function(){return x.useContext(BK)},HK=function(){return x.useContext(FK)};function jf(e){"@babel/helpers - typeof";return jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jf(e)}function v8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y8e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qK(n.key),n)}}function b8e(e,t,r){return t&&y8e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function w8e(e,t,r){return t=zb(t),j8e(e,VK()?Reflect.construct(t,r||[],zb(e).constructor):t.apply(e,r))}function j8e(e,t){if(t&&(jf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N8e(e)}function N8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VK=function(){return!!e})()}function zb(e){return zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zb(e)}function _8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J2(e,t)}function J2(e,t){return J2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},J2(e,t)}function S5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function C5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S5(Object(r),!0).forEach(function(n){FA(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FA(e,t,r){return t=qK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qK(e){var t=S8e(e,"string");return jf(t)=="symbol"?t:t+""}function S8e(e,t){if(jf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(jf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function C8e(e,t){return T8e(e)||E8e(e,t)||k8e(e,t)||P8e()}function P8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k8e(e,t){if(e){if(typeof e=="string")return P5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P5(e,t)}}function P5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function E8e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(h){d=!0,a=h}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function T8e(e){if(Array.isArray(e))return e}function Q2(){return Q2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q2.apply(this,arguments)}var A8e=function(t,r){var n;return q.isValidElement(t)?n=q.cloneElement(t,r):yt(t)?n=t(r):n=q.createElement("line",Q2({},r,{className:"recharts-reference-line-line"})),n},O8e=function(t,r,n,a,i,o,l,c,d){var h=i.x,f=i.y,m=i.width,p=i.height;if(n){var y=d.y,v=t.y.apply(y,{position:o});if(No(d,"discard")&&!t.y.isInRange(v))return null;var b=[{x:h+m,y:v},{x:h,y:v}];return c==="left"?b.reverse():b}if(r){var N=d.x,j=t.x.apply(N,{position:o});if(No(d,"discard")&&!t.x.isInRange(j))return null;var w=[{x:j,y:f+p},{x:j,y:f}];return l==="top"?w.reverse():w}if(a){var S=d.segment,C=S.map(function(P){return t.apply(P,{position:o})});return No(d,"discard")&&wFe(C,function(P){return!t.isInRange(P)})?null:C}return null};function M8e(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,d=g8e(),h=zK(a),f=UK(i),m=x8e();if(!d||!m)return null;rl(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=LA({x:h.scale,y:f.scale}),y=Nn(t),v=Nn(r),b=n&&n.length===2,N=O8e(p,y,v,b,m,e.position,h.orientation,f.orientation,e);if(!N)return null;var j=C8e(N,2),w=j[0],S=w.x,C=w.y,P=j[1],T=P.x,O=P.y,E=No(e,"hidden")?"url(#".concat(d,")"):void 0,D=C5(C5({clipPath:E},ht(e,!0)),{},{x1:S,y1:C,x2:T,y2:O});return q.createElement(nr,{className:Nt("recharts-reference-line",l)},A8e(o,D),Rn.renderCallByParent(e,u8e({x1:S,y1:C,x2:T,y2:O})))}var BA=function(e){function t(){return v8e(this,t),w8e(this,t,arguments)}return _8e(t,e),b8e(t,[{key:"render",value:function(){return q.createElement(M8e,this.props)}}])}(q.Component);FA(BA,"displayName","ReferenceLine");FA(BA,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function eP(){return eP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eP.apply(this,arguments)}function Nf(e){"@babel/helpers - typeof";return Nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nf(e)}function k5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function E5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k5(Object(r),!0).forEach(function(n){nN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function I8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R8e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,KK(n.key),n)}}function D8e(e,t,r){return t&&R8e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $8e(e,t,r){return t=Ub(t),L8e(e,GK()?Reflect.construct(t,r||[],Ub(e).constructor):t.apply(e,r))}function L8e(e,t){if(t&&(Nf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F8e(e)}function F8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GK=function(){return!!e})()}function Ub(e){return Ub=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ub(e)}function B8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tP(e,t)}function tP(e,t){return tP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},tP(e,t)}function nN(e,t,r){return t=KK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KK(e){var t=z8e(e,"string");return Nf(t)=="symbol"?t:t+""}function z8e(e,t){if(Nf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Nf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var U8e=function(t){var r=t.x,n=t.y,a=t.xAxis,i=t.yAxis,o=LA({x:a.scale,y:i.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return No(t,"discard")&&!o.isInRange(l)?null:l},sN=function(e){function t(){return I8e(this,t),$8e(this,t,arguments)}return B8e(t,e),D8e(t,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,d=Nn(a),h=Nn(i);if(rl(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!h)return null;var f=U8e(this.props);if(!f)return null;var m=f.x,p=f.y,y=this.props,v=y.shape,b=y.className,N=No(this.props,"hidden")?"url(#".concat(c,")"):void 0,j=E5(E5({clipPath:N},ht(this.props,!0)),{},{cx:m,cy:p});return q.createElement(nr,{className:Nt("recharts-reference-dot",b)},t.renderDot(v,j),Rn.renderCallByParent(this.props,{x:m-o,y:p-o,width:2*o,height:2*o}))}}])}(q.Component);nN(sN,"displayName","ReferenceDot");nN(sN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});nN(sN,"renderDot",function(e,t){var r;return q.isValidElement(e)?r=q.cloneElement(e,t):yt(e)?r=e(t):r=q.createElement($A,eP({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function rP(){return rP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rP.apply(this,arguments)}function _f(e){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_f(e)}function T5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function A5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T5(Object(r),!0).forEach(function(n){aN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function W8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H8e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ZK(n.key),n)}}function V8e(e,t,r){return t&&H8e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function q8e(e,t,r){return t=Wb(t),G8e(e,YK()?Reflect.construct(t,r||[],Wb(e).constructor):t.apply(e,r))}function G8e(e,t){if(t&&(_f(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return K8e(e)}function K8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YK=function(){return!!e})()}function Wb(e){return Wb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wb(e)}function Y8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nP(e,t)}function nP(e,t){return nP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},nP(e,t)}function aN(e,t,r){return t=ZK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZK(e){var t=Z8e(e,"string");return _f(t)=="symbol"?t:t+""}function Z8e(e,t){if(_f(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(_f(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var X8e=function(t,r,n,a,i){var o=i.x1,l=i.x2,c=i.y1,d=i.y2,h=i.xAxis,f=i.yAxis;if(!h||!f)return null;var m=LA({x:h.scale,y:f.scale}),p={x:t?m.x.apply(o,{position:"start"}):m.x.rangeMin,y:n?m.y.apply(c,{position:"start"}):m.y.rangeMin},y={x:r?m.x.apply(l,{position:"end"}):m.x.rangeMax,y:a?m.y.apply(d,{position:"end"}):m.y.rangeMax};return No(i,"discard")&&(!m.isInRange(p)||!m.isInRange(y))?null:MK(p,y)},iN=function(e){function t(){return W8e(this,t),q8e(this,t,arguments)}return Y8e(t,e),V8e(t,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,l=n.y2,c=n.className,d=n.alwaysShow,h=n.clipPathId;rl(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Nn(a),m=Nn(i),p=Nn(o),y=Nn(l),v=this.props.shape;if(!f&&!m&&!p&&!y&&!v)return null;var b=X8e(f,m,p,y,this.props);if(!b&&!v)return null;var N=No(this.props,"hidden")?"url(#".concat(h,")"):void 0;return q.createElement(nr,{className:Nt("recharts-reference-area",c)},t.renderRect(v,A5(A5({clipPath:N},ht(this.props,!0)),b)),Rn.renderCallByParent(this.props,b))}}])}(q.Component);aN(iN,"displayName","ReferenceArea");aN(iN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});aN(iN,"renderRect",function(e,t){var r;return q.isValidElement(e)?r=q.cloneElement(e,t):yt(e)?r=e(t):r=q.createElement(DA,rP({},t,{className:"recharts-reference-area-rect"})),r});function XK(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function J8e(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return f8e(n,r)}function Q8e(e,t,r){var n=r==="width",a=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:n?a:i,end:n?a+o:i+l}:{start:n?a+o:i+l,end:n?a:i}}function Hb(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function eBe(e,t){return XK(e,t+1)}function tBe(e,t,r,n,a){for(var i=(n||[]).slice(),o=t.start,l=t.end,c=0,d=1,h=o,f=function(){var y=n==null?void 0:n[c];if(y===void 0)return{v:XK(n,d)};var v=c,b,N=function(){return b===void 0&&(b=r(y,v)),b},j=y.coordinate,w=c===0||Hb(e,j,N,h,l);w||(c=0,h=o,d+=1),w&&(h=j+e*(N()/2+a),c+=d)},m;d<=i.length;)if(m=f(),m)return m.v;return[]}function Xg(e){"@babel/helpers - typeof";return Xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xg(e)}function O5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ls(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O5(Object(r),!0).forEach(function(n){rBe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rBe(e,t,r){return t=nBe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nBe(e){var t=sBe(e,"string");return Xg(t)=="symbol"?t:t+""}function sBe(e,t){if(Xg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Xg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aBe(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,l=t.start,c=t.end,d=function(m){var p=i[m],y,v=function(){return y===void 0&&(y=r(p,m)),y};if(m===o-1){var b=e*(p.coordinate+e*v()/2-c);i[m]=p=ls(ls({},p),{},{tickCoord:b>0?p.coordinate-b*e:p.coordinate})}else i[m]=p=ls(ls({},p),{},{tickCoord:p.coordinate});var N=Hb(e,p.tickCoord,v,l,c);N&&(c=p.tickCoord-e*(v()/2+a),i[m]=ls(ls({},p),{},{isShow:!0}))},h=o-1;h>=0;h--)d(h);return i}function iBe(e,t,r,n,a,i){var o=(n||[]).slice(),l=o.length,c=t.start,d=t.end;if(i){var h=n[l-1],f=r(h,l-1),m=e*(h.coordinate+e*f/2-d);o[l-1]=h=ls(ls({},h),{},{tickCoord:m>0?h.coordinate-m*e:h.coordinate});var p=Hb(e,h.tickCoord,function(){return f},c,d);p&&(d=h.tickCoord-e*(f/2+a),o[l-1]=ls(ls({},h),{},{isShow:!0}))}for(var y=i?l-1:l,v=function(j){var w=o[j],S,C=function(){return S===void 0&&(S=r(w,j)),S};if(j===0){var P=e*(w.coordinate-e*C()/2-c);o[j]=w=ls(ls({},w),{},{tickCoord:P<0?w.coordinate-P*e:w.coordinate})}else o[j]=w=ls(ls({},w),{},{tickCoord:w.coordinate});var T=Hb(e,w.tickCoord,C,c,d);T&&(c=w.tickCoord+e*(C()/2+a),o[j]=ls(ls({},w),{},{isShow:!0}))},b=0;b<y;b++)v(b);return o}function oBe(e,t,r){var n=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,d=e.tickFormatter,h=e.unit,f=e.angle;if(!a||!a.length||!n)return[];if(Be(c)||nl.isSsr)return eBe(a,typeof c=="number"&&Be(c)?c:0);var m=[],p=l==="top"||l==="bottom"?"width":"height",y=h&&p==="width"?_p(h,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=function(w,S){var C=yt(d)?d(w.value,S):w.value;return p==="width"?J8e(_p(C,{fontSize:t,letterSpacing:r}),y,f):_p(C,{fontSize:t,letterSpacing:r})[p]},b=a.length>=2?Ns(a[1].coordinate-a[0].coordinate):1,N=Q8e(i,b,p);return c==="equidistantPreserveStart"?tBe(b,N,v,a,o):(c==="preserveStart"||c==="preserveStartEnd"?m=iBe(b,N,v,a,o,c==="preserveStartEnd"):m=aBe(b,N,v,a,o),m.filter(function(j){return j.isShow}))}var lBe=["viewBox"],cBe=["viewBox"],dBe=["ticks"];function Sf(e){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sf(e)}function lh(){return lh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lh.apply(this,arguments)}function M5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M5(Object(r),!0).forEach(function(n){zA(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function k1(e,t){if(e==null)return{};var r=uBe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function uBe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function hBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,QK(n.key),n)}}function fBe(e,t,r){return t&&I5(e.prototype,t),r&&I5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function mBe(e,t,r){return t=Vb(t),pBe(e,JK()?Reflect.construct(t,r||[],Vb(e).constructor):t.apply(e,r))}function pBe(e,t){if(t&&(Sf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gBe(e)}function gBe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JK=function(){return!!e})()}function Vb(e){return Vb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vb(e)}function xBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sP(e,t)}function sP(e,t){return sP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},sP(e,t)}function zA(e,t,r){return t=QK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QK(e){var t=vBe(e,"string");return Sf(t)=="symbol"?t:t+""}function vBe(e,t){if(Sf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oN=function(e){function t(r){var n;return hBe(this,t),n=mBe(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return xBe(t,e),fBe(t,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=k1(n,lBe),l=this.props,c=l.viewBox,d=k1(l,cBe);return!_h(i,c)||!_h(o,d)||!_h(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,l=a.width,c=a.height,d=a.orientation,h=a.tickSize,f=a.mirror,m=a.tickMargin,p,y,v,b,N,j,w=f?-1:1,S=n.tickSize||h,C=Be(n.tickCoord)?n.tickCoord:n.coordinate;switch(d){case"top":p=y=n.coordinate,b=o+ +!f*c,v=b-w*S,j=v-w*m,N=C;break;case"left":v=b=n.coordinate,y=i+ +!f*l,p=y-w*S,N=p-w*m,j=C;break;case"right":v=b=n.coordinate,y=i+ +f*l,p=y+w*S,N=p+w*m,j=C;break;default:p=y=n.coordinate,b=o+ +f*c,v=b+w*S,j=v+w*m,N=C;break}return{line:{x1:p,y1:v,x2:y,y2:b},tick:{x:N,y:j}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.orientation,d=n.mirror,h=n.axisLine,f=vn(vn(vn({},ht(this.props,!1)),ht(h,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var m=+(c==="top"&&!d||c==="bottom"&&d);f=vn(vn({},f),{},{x1:a,y1:i+m*l,x2:a+o,y2:i+m*l})}else{var p=+(c==="left"&&!d||c==="right"&&d);f=vn(vn({},f),{},{x1:a+p*o,y1:i,x2:a+p*o,y2:i+l})}return q.createElement("line",lh({},f,{className:Nt("recharts-cartesian-axis-line",Ta(h,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,l=this.props,c=l.tickLine,d=l.stroke,h=l.tick,f=l.tickFormatter,m=l.unit,p=oBe(vn(vn({},this.props),{},{ticks:n}),a,i),y=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),b=ht(this.props,!1),N=ht(h,!1),j=vn(vn({},b),{},{fill:"none"},ht(c,!1)),w=p.map(function(S,C){var P=o.getTickLineCoord(S),T=P.line,O=P.tick,E=vn(vn(vn(vn({textAnchor:y,verticalAnchor:v},b),{},{stroke:"none",fill:d},N),O),{},{index:C,payload:S,visibleTicksCount:p.length,tickFormatter:f});return q.createElement(nr,lh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},Zd(o.props,S,C)),c&&q.createElement("line",lh({},j,T,{className:Nt("recharts-cartesian-axis-tick-line",Ta(c,"className"))})),h&&t.renderTickItem(h,E,"".concat(yt(f)?f(S.value,C):S.value).concat(m||"")))});return q.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,d=a.className,h=a.hide;if(h)return null;var f=this.props,m=f.ticks,p=k1(f,dBe),y=m;return yt(c)&&(y=m&&m.length>0?c(this.props):c(p)),o<=0||l<=0||!y||!y.length?null:q.createElement(nr,{className:Nt("recharts-cartesian-axis",d),ref:function(b){n.layerReference=b}},i&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),Rn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o,l=Nt(a.className,"recharts-cartesian-axis-tick-value");return q.isValidElement(n)?o=q.cloneElement(n,vn(vn({},a),{},{className:l})):yt(n)?o=n(vn(vn({},a),{},{className:l})):o=q.createElement(Xd,lh({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(x.Component);zA(oN,"displayName","CartesianAxis");zA(oN,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});function Cf(e){"@babel/helpers - typeof";return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cf(e)}function yBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bBe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rY(n.key),n)}}function wBe(e,t,r){return t&&bBe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jBe(e,t,r){return t=qb(t),NBe(e,eY()?Reflect.construct(t,r||[],qb(e).constructor):t.apply(e,r))}function NBe(e,t){if(t&&(Cf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _Be(e)}function _Be(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eY=function(){return!!e})()}function qb(e){return qb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qb(e)}function SBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aP(e,t)}function aP(e,t){return aP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},aP(e,t)}function tY(e,t,r){return t=rY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rY(e){var t=CBe(e,"string");return Cf(t)=="symbol"?t:t+""}function CBe(e,t){if(Cf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Cf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iP(){return iP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iP.apply(this,arguments)}function PBe(e){var t=e.xAxisId,r=WK(),n=HK(),a=zK(t);return a==null?null:x.createElement(oN,iP({},a,{className:Nt("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return wd(o,!0)}}))}var lN=function(e){function t(){return yBe(this,t),jBe(this,t,arguments)}return SBe(t,e),wBe(t,[{key:"render",value:function(){return x.createElement(PBe,this.props)}}])}(x.Component);tY(lN,"displayName","XAxis");tY(lN,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Pf(e){"@babel/helpers - typeof";return Pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pf(e)}function kBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EBe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,aY(n.key),n)}}function TBe(e,t,r){return t&&EBe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ABe(e,t,r){return t=Gb(t),OBe(e,nY()?Reflect.construct(t,r||[],Gb(e).constructor):t.apply(e,r))}function OBe(e,t){if(t&&(Pf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MBe(e)}function MBe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nY=function(){return!!e})()}function Gb(e){return Gb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gb(e)}function IBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oP(e,t)}function oP(e,t){return oP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},oP(e,t)}function sY(e,t,r){return t=aY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aY(e){var t=RBe(e,"string");return Pf(t)=="symbol"?t:t+""}function RBe(e,t){if(Pf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Pf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lP(){return lP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lP.apply(this,arguments)}var DBe=function(t){var r=t.yAxisId,n=WK(),a=HK(),i=UK(r);return i==null?null:x.createElement(oN,lP({},i,{className:Nt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(l){return wd(l,!0)}}))},cN=function(e){function t(){return kBe(this,t),ABe(this,t,arguments)}return IBe(t,e),TBe(t,[{key:"render",value:function(){return x.createElement(DBe,this.props)}}])}(x.Component);sY(cN,"displayName","YAxis");sY(cN,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function R5(e){return BBe(e)||FBe(e)||LBe(e)||$Be()}function $Be(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LBe(e,t){if(e){if(typeof e=="string")return cP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cP(e,t)}}function FBe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function BBe(e){if(Array.isArray(e))return cP(e)}function cP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var dP=function(t,r,n,a,i){var o=ti(t,BA),l=ti(t,sN),c=[].concat(R5(o),R5(l)),d=ti(t,iN),h="".concat(a,"Id"),f=a[0],m=r;if(c.length&&(m=c.reduce(function(v,b){if(b.props[h]===n&&No(b.props,"extendDomain")&&Be(b.props[f])){var N=b.props[f];return[Math.min(v[0],N),Math.max(v[1],N)]}return v},m)),d.length){var p="".concat(f,"1"),y="".concat(f,"2");m=d.reduce(function(v,b){if(b.props[h]===n&&No(b.props,"extendDomain")&&Be(b.props[p])&&Be(b.props[y])){var N=b.props[p],j=b.props[y];return[Math.min(v[0],N,j),Math.max(v[1],N,j)]}return v},m)}return i&&i.length&&(m=i.reduce(function(v,b){return Be(b)?[Math.min(v[0],b),Math.max(v[1],b)]:v},m)),m},iY={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,d,h){this.fn=c,this.context=d,this.once=h||!1}function i(c,d,h,f,m){if(typeof h!="function")throw new TypeError("The listener must be a function");var p=new a(h,f||c,m),y=r?r+d:d;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],p]:c._events[y].push(p):(c._events[y]=p,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],h,f;if(this._eventsCount===0)return d;for(f in h=this._events)t.call(h,f)&&d.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},l.prototype.listeners=function(d){var h=r?r+d:d,f=this._events[h];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,p=f.length,y=new Array(p);m<p;m++)y[m]=f[m].fn;return y},l.prototype.listenerCount=function(d){var h=r?r+d:d,f=this._events[h];return f?f.fn?1:f.length:0},l.prototype.emit=function(d,h,f,m,p,y){var v=r?r+d:d;if(!this._events[v])return!1;var b=this._events[v],N=arguments.length,j,w;if(b.fn){switch(b.once&&this.removeListener(d,b.fn,void 0,!0),N){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,h),!0;case 3:return b.fn.call(b.context,h,f),!0;case 4:return b.fn.call(b.context,h,f,m),!0;case 5:return b.fn.call(b.context,h,f,m,p),!0;case 6:return b.fn.call(b.context,h,f,m,p,y),!0}for(w=1,j=new Array(N-1);w<N;w++)j[w-1]=arguments[w];b.fn.apply(b.context,j)}else{var S=b.length,C;for(w=0;w<S;w++)switch(b[w].once&&this.removeListener(d,b[w].fn,void 0,!0),N){case 1:b[w].fn.call(b[w].context);break;case 2:b[w].fn.call(b[w].context,h);break;case 3:b[w].fn.call(b[w].context,h,f);break;case 4:b[w].fn.call(b[w].context,h,f,m);break;default:if(!j)for(C=1,j=new Array(N-1);C<N;C++)j[C-1]=arguments[C];b[w].fn.apply(b[w].context,j)}}return!0},l.prototype.on=function(d,h,f){return i(this,d,h,f,!1)},l.prototype.once=function(d,h,f){return i(this,d,h,f,!0)},l.prototype.removeListener=function(d,h,f,m){var p=r?r+d:d;if(!this._events[p])return this;if(!h)return o(this,p),this;var y=this._events[p];if(y.fn)y.fn===h&&(!m||y.once)&&(!f||y.context===f)&&o(this,p);else{for(var v=0,b=[],N=y.length;v<N;v++)(y[v].fn!==h||m&&!y[v].once||f&&y[v].context!==f)&&b.push(y[v]);b.length?this._events[p]=b.length===1?b[0]:b:o(this,p)}return this},l.prototype.removeAllListeners=function(d){var h;return d?(h=r?r+d:d,this._events[h]&&o(this,h)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(iY);var zBe=iY.exports;const UBe=tr(zBe);var E1=new UBe,T1="recharts.syncMouseEvents";function Jg(e){"@babel/helpers - typeof";return Jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jg(e)}function WBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HBe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,oY(n.key),n)}}function VBe(e,t,r){return t&&HBe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function A1(e,t,r){return t=oY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oY(e){var t=qBe(e,"string");return Jg(t)=="symbol"?t:t+""}function qBe(e,t){if(Jg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Jg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var GBe=function(){function e(){WBe(this,e),A1(this,"activeIndex",0),A1(this,"coordinateList",[]),A1(this,"layout","horizontal")}return VBe(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,l=o===void 0?null:o,c=r.layout,d=c===void 0?null:c,h=r.offset,f=h===void 0?null:h,m=r.mouseHandlerCallback,p=m===void 0?null:m;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,d=((r=window)===null||r===void 0?void 0:r.scrollX)||0,h=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=i+c+d,m=o+this.offset.top+l/2+h;this.mouseHandlerCallback({pageX:f,pageY:m})}}}])}();function KBe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],a=e==null?void 0:e[1];if(n&&a&&Be(n)&&Be(a))return!0}return!1}function YBe(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function lY(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,i=e.endAngle,o=_r(t,r,n,a),l=_r(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function ZBe(e,t,r){var n,a,i,o;if(e==="horizontal")n=t.x,i=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,d=t.innerRadius,h=t.outerRadius,f=t.angle,m=_r(l,c,d,f),p=_r(l,c,h,f);n=m.x,a=m.y,i=p.x,o=p.y}else return lY(t);return[{x:n,y:a},{x:i,y:o}]}function Qg(e){"@babel/helpers - typeof";return Qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qg(e)}function D5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D5(Object(r),!0).forEach(function(n){XBe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XBe(e,t,r){return t=JBe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JBe(e){var t=QBe(e,"string");return Qg(t)=="symbol"?t:t+""}function QBe(e,t){if(Qg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Qg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function e7e(e){var t,r,n=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,d=e.activeTooltipIndex,h=e.tooltipAxisBandSize,f=e.layout,m=e.chartName,p=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!p||!i||!o||m!=="ScatterChart"&&a!=="axis")return null;var y,v=M2;if(m==="ScatterChart")y=o,v=lLe;else if(m==="BarChart")y=YBe(f,o,c,h),v=DA;else if(f==="radial"){var b=lY(o),N=b.cx,j=b.cy,w=b.radius,S=b.startAngle,C=b.endAngle;y={cx:N,cy:j,startAngle:S,endAngle:C,innerRadius:w,outerRadius:w},v=oK}else y={points:ZBe(f,o,c)},v=M2;var P=Qv(Qv(Qv(Qv({stroke:"#ccc",pointerEvents:"none"},c),y),ht(p,!1)),{},{payload:l,payloadIndex:d,className:Nt("recharts-tooltip-cursor",p.className)});return x.isValidElement(p)?x.cloneElement(p,P):x.createElement(v,P)}var t7e=["item"],r7e=["children","className","width","height","style","compact","title","desc"];function kf(e){"@babel/helpers - typeof";return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kf(e)}function ch(){return ch=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ch.apply(this,arguments)}function $5(e,t){return a7e(e)||s7e(e,t)||dY(e,t)||n7e()}function n7e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s7e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(h){d=!0,a=h}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function a7e(e){if(Array.isArray(e))return e}function L5(e,t){if(e==null)return{};var r=i7e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function i7e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function o7e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l7e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uY(n.key),n)}}function c7e(e,t,r){return t&&l7e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function d7e(e,t,r){return t=Kb(t),u7e(e,cY()?Reflect.construct(t,r||[],Kb(e).constructor):t.apply(e,r))}function u7e(e,t){if(t&&(kf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h7e(e)}function h7e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cY=function(){return!!e})()}function Kb(e){return Kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Kb(e)}function f7e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uP(e,t)}function uP(e,t){return uP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},uP(e,t)}function Ef(e){return g7e(e)||p7e(e)||dY(e)||m7e()}function m7e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dY(e,t){if(e){if(typeof e=="string")return hP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hP(e,t)}}function p7e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function g7e(e){if(Array.isArray(e))return hP(e)}function hP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function F5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ye(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F5(Object(r),!0).forEach(function(n){it(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function it(e,t,r){return t=uY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uY(e){var t=x7e(e,"string");return kf(t)=="symbol"?t:t+""}function x7e(e,t){if(kf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(kf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var v7e={xAxis:["bottom","top"],yAxis:["left","right"]},y7e={width:"100%",height:"100%"},hY={x:0,y:0};function ey(e){return e}var b7e=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},w7e=function(t,r,n,a){var i=r.find(function(h){return h&&h.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=a.radius;return ye(ye(ye({},a),_r(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,d=a.angle;return ye(ye(ye({},a),_r(a.cx,a.cy,c,d)),{},{angle:d,radius:c})}return hY},dN=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(Ef(l),Ef(d)):l},[]);return o.length>0?o:t&&t.length&&Be(a)&&Be(i)?t.slice(a,i+1):[]};function fY(e){return e==="number"?[0,"auto"]:void 0}var fP=function(t,r,n,a){var i=t.graphicalItems,o=t.tooltipAxis,l=dN(r,t);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(c,d){var h,f=(h=d.props.data)!==null&&h!==void 0?h:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var m;if(o.dataKey&&!o.allowDuplicatedCategory){var p=f===void 0?l:f;m=zC(p,o.dataKey,a)}else m=f&&f[n]||l[n];return m?[].concat(Ef(c),[tK(d,m)]):c},[])},B5=function(t,r,n,a){var i=a||{x:t.chartX,y:t.chartY},o=b7e(i,n),l=t.orderedTooltipTicks,c=t.tooltipAxis,d=t.tooltipTicks,h=ORe(o,l,d,c);if(h>=0&&d){var f=d[h]&&d[h].value,m=fP(t,r,h,f),p=w7e(n,l,h,i);return{activeTooltipIndex:h,activeLabel:f,activePayload:m,activeCoordinate:p}}return null},j7e=function(t,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,h=t.layout,f=t.children,m=t.stackOffset,p=ZG(h,i);return n.reduce(function(y,v){var b,N=v.type.defaultProps!==void 0?ye(ye({},v.type.defaultProps),v.props):v.props,j=N.type,w=N.dataKey,S=N.allowDataOverflow,C=N.allowDuplicatedCategory,P=N.scale,T=N.ticks,O=N.includeHidden,E=N[o];if(y[E])return y;var D=dN(t.data,{graphicalItems:a.filter(function(ae){var X,le=o in ae.props?ae.props[o]:(X=ae.type.defaultProps)===null||X===void 0?void 0:X[o];return le===E}),dataStartIndex:c,dataEndIndex:d}),I=D.length,A,V,U;KBe(N.domain,S,j)&&(A=k2(N.domain,null,S),p&&(j==="number"||P!=="auto")&&(U=Cp(D,w,"category")));var $=fY(j);if(!A||A.length===0){var H,F=(H=N.domain)!==null&&H!==void 0?H:$;if(w){if(A=Cp(D,w,j),j==="category"&&p){var R=w_e(A);C&&R?(V=A,A=Db(0,I)):C||(A=f$(F,A,v).reduce(function(ae,X){return ae.indexOf(X)>=0?ae:[].concat(Ef(ae),[X])},[]))}else if(j==="category")C?A=A.filter(function(ae){return ae!==""&&!It(ae)}):A=f$(F,A,v).reduce(function(ae,X){return ae.indexOf(X)>=0||X===""||It(X)?ae:[].concat(Ef(ae),[X])},[]);else if(j==="number"){var z=$Re(D,a.filter(function(ae){var X,le,fe=o in ae.props?ae.props[o]:(X=ae.type.defaultProps)===null||X===void 0?void 0:X[o],ge="hide"in ae.props?ae.props.hide:(le=ae.type.defaultProps)===null||le===void 0?void 0:le.hide;return fe===E&&(O||!ge)}),w,i,h);z&&(A=z)}p&&(j==="number"||P!=="auto")&&(U=Cp(D,w,"category"))}else p?A=Db(0,I):l&&l[E]&&l[E].hasStack&&j==="number"?A=m==="expand"?[0,1]:eK(l[E].stackGroups,c,d):A=YG(D,a.filter(function(ae){var X=o in ae.props?ae.props[o]:ae.type.defaultProps[o],le="hide"in ae.props?ae.props.hide:ae.type.defaultProps.hide;return X===E&&(O||!le)}),j,h,!0);if(j==="number")A=dP(f,A,E,i,T),F&&(A=k2(F,A,S));else if(j==="category"&&F){var G=F,ie=A.every(function(ae){return G.indexOf(ae)>=0});ie&&(A=G)}}return ye(ye({},y),{},it({},E,ye(ye({},N),{},{axisType:i,domain:A,categoricalDomain:U,duplicateDomain:V,originalDomain:(b=N.domain)!==null&&b!==void 0?b:$,isCategorical:p,layout:h})))},{})},N7e=function(t,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,h=t.layout,f=t.children,m=dN(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:d}),p=m.length,y=ZG(h,i),v=-1;return n.reduce(function(b,N){var j=N.type.defaultProps!==void 0?ye(ye({},N.type.defaultProps),N.props):N.props,w=j[o],S=fY("number");if(!b[w]){v++;var C;return y?C=Db(0,p):l&&l[w]&&l[w].hasStack?(C=eK(l[w].stackGroups,c,d),C=dP(f,C,w,i)):(C=k2(S,YG(m,n.filter(function(P){var T,O,E=o in P.props?P.props[o]:(T=P.type.defaultProps)===null||T===void 0?void 0:T[o],D="hide"in P.props?P.props.hide:(O=P.type.defaultProps)===null||O===void 0?void 0:O.hide;return E===w&&!D}),"number",h),a.defaultProps.allowDataOverflow),C=dP(f,C,w,i)),ye(ye({},b),{},it({},w,ye(ye({axisType:i},a.defaultProps),{},{hide:!0,orientation:Ta(v7e,"".concat(i,".").concat(v%2),null),domain:C,originalDomain:S,isCategorical:y,layout:h})))}return b},{})},_7e=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,h=t.children,f="".concat(a,"Id"),m=ti(h,i),p={};return m&&m.length?p=j7e(t,{axes:m,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(p=N7e(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),p},S7e=function(t){var r=Hu(t),n=wd(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:cA(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:_b(r,n)}},z5=function(t){var r=t.children,n=t.defaultShowTooltip,a=va(r,bf),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},C7e=function(t){return!t||!t.length?!1:t.some(function(r){var n=tl(r&&r.type);return n&&n.indexOf("Bar")>=0})},U5=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},P7e=function(t,r){var n=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,d=n.width,h=n.height,f=n.children,m=n.margin||{},p=va(f,bf),y=va(f,Sh),v=Object.keys(c).reduce(function(C,P){var T=c[P],O=T.orientation;return!T.mirror&&!T.hide?ye(ye({},C),{},it({},O,C[O]+T.width)):C},{left:m.left||0,right:m.right||0}),b=Object.keys(o).reduce(function(C,P){var T=o[P],O=T.orientation;return!T.mirror&&!T.hide?ye(ye({},C),{},it({},O,Ta(C,"".concat(O))+T.height)):C},{top:m.top||0,bottom:m.bottom||0}),N=ye(ye({},b),v),j=N.bottom;p&&(N.bottom+=p.props.height||bf.defaultProps.height),y&&r&&(N=RRe(N,a,n,r));var w=d-N.left-N.right,S=h-N.top-N.bottom;return ye(ye({brushBottom:j},N),{},{width:Math.max(w,0),height:Math.max(S,0)})},k7e=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},mY=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,d=t.legendContent,h=t.formatAxisMap,f=t.defaultProps,m=function(N,j){var w=j.graphicalItems,S=j.stackGroups,C=j.offset,P=j.updateId,T=j.dataStartIndex,O=j.dataEndIndex,E=N.barSize,D=N.layout,I=N.barGap,A=N.barCategoryGap,V=N.maxBarSize,U=U5(D),$=U.numericAxisName,H=U.cateAxisName,F=C7e(w),R=[];return w.forEach(function(z,G){var ie=dN(N.data,{graphicalItems:[z],dataStartIndex:T,dataEndIndex:O}),ae=z.type.defaultProps!==void 0?ye(ye({},z.type.defaultProps),z.props):z.props,X=ae.dataKey,le=ae.maxBarSize,fe=ae["".concat($,"Id")],ge=ae["".concat(H,"Id")],ee={},re=c.reduce(function(B,ve){var Fe=j["".concat(ve.axisType,"Map")],st=ae["".concat(ve.axisType,"Id")];Fe&&Fe[st]||ve.axisType==="zAxis"||Qd();var pt=Fe[st];return ye(ye({},B),{},it(it({},ve.axisType,pt),"".concat(ve.axisType,"Ticks"),wd(pt)))},ee),ue=re[H],Ne=re["".concat(H,"Ticks")],je=S&&S[fe]&&S[fe].hasStack&&qRe(z,S[fe].stackGroups),Y=tl(z.type).indexOf("Bar")>=0,xe=_b(ue,Ne),Me=[],$e=F&&MRe({barSize:E,stackGroups:S,totalSize:k7e(re,H)});if(Y){var ce,Le,qe=It(le)?V:le,Xe=(ce=(Le=_b(ue,Ne,!0))!==null&&Le!==void 0?Le:qe)!==null&&ce!==void 0?ce:0;Me=IRe({barGap:I,barCategoryGap:A,bandSize:Xe!==xe?Xe:xe,sizeList:$e[ge],maxBarSize:qe}),Xe!==xe&&(Me=Me.map(function(B){return ye(ye({},B),{},{position:ye(ye({},B.position),{},{offset:B.position.offset-Xe/2})})}))}var Et=z&&z.type&&z.type.getComposedData;Et&&R.push({props:ye(ye({},Et(ye(ye({},re),{},{displayedData:ie,props:N,dataKey:X,item:z,bandSize:xe,barPosition:Me,offset:C,stackedData:je,layout:D,dataStartIndex:T,dataEndIndex:O}))),{},it(it(it({key:z.key||"item-".concat(G)},$,re[$]),H,re[H]),"animationId",P)),childIndex:M_e(z,N.children),item:z})}),R},p=function(N,j){var w=N.props,S=N.dataStartIndex,C=N.dataEndIndex,P=N.updateId;if(!iR({props:w}))return null;var T=w.children,O=w.layout,E=w.stackOffset,D=w.data,I=w.reverseStackOrder,A=U5(O),V=A.numericAxisName,U=A.cateAxisName,$=ti(T,n),H=HRe(D,$,"".concat(V,"Id"),"".concat(U,"Id"),E,I),F=c.reduce(function(ae,X){var le="".concat(X.axisType,"Map");return ye(ye({},ae),{},it({},le,_7e(w,ye(ye({},X),{},{graphicalItems:$,stackGroups:X.axisType===V&&H,dataStartIndex:S,dataEndIndex:C}))))},{}),R=P7e(ye(ye({},F),{},{props:w,graphicalItems:$}),j==null?void 0:j.legendBBox);Object.keys(F).forEach(function(ae){F[ae]=h(w,F[ae],R,ae.replace("Map",""),r)});var z=F["".concat(U,"Map")],G=S7e(z),ie=m(w,ye(ye({},F),{},{dataStartIndex:S,dataEndIndex:C,updateId:P,graphicalItems:$,stackGroups:H,offset:R}));return ye(ye({formattedGraphicalItems:ie,graphicalItems:$,offset:R,stackGroups:H},G),F)},y=function(b){function N(j){var w,S,C;return o7e(this,N),C=d7e(this,N,[j]),it(C,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),it(C,"accessibilityManager",new GBe),it(C,"handleLegendBBoxUpdate",function(P){if(P){var T=C.state,O=T.dataStartIndex,E=T.dataEndIndex,D=T.updateId;C.setState(ye({legendBBox:P},p({props:C.props,dataStartIndex:O,dataEndIndex:E,updateId:D},ye(ye({},C.state),{},{legendBBox:P}))))}}),it(C,"handleReceiveSyncEvent",function(P,T,O){if(C.props.syncId===P){if(O===C.eventEmitterSymbol&&typeof C.props.syncMethod!="function")return;C.applySyncEvent(T)}}),it(C,"handleBrushChange",function(P){var T=P.startIndex,O=P.endIndex;if(T!==C.state.dataStartIndex||O!==C.state.dataEndIndex){var E=C.state.updateId;C.setState(function(){return ye({dataStartIndex:T,dataEndIndex:O},p({props:C.props,dataStartIndex:T,dataEndIndex:O,updateId:E},C.state))}),C.triggerSyncEvent({dataStartIndex:T,dataEndIndex:O})}}),it(C,"handleMouseEnter",function(P){var T=C.getMouseInfo(P);if(T){var O=ye(ye({},T),{},{isTooltipActive:!0});C.setState(O),C.triggerSyncEvent(O);var E=C.props.onMouseEnter;yt(E)&&E(O,P)}}),it(C,"triggeredAfterMouseMove",function(P){var T=C.getMouseInfo(P),O=T?ye(ye({},T),{},{isTooltipActive:!0}):{isTooltipActive:!1};C.setState(O),C.triggerSyncEvent(O);var E=C.props.onMouseMove;yt(E)&&E(O,P)}),it(C,"handleItemMouseEnter",function(P){C.setState(function(){return{isTooltipActive:!0,activeItem:P,activePayload:P.tooltipPayload,activeCoordinate:P.tooltipPosition||{x:P.cx,y:P.cy}}})}),it(C,"handleItemMouseLeave",function(){C.setState(function(){return{isTooltipActive:!1}})}),it(C,"handleMouseMove",function(P){P.persist(),C.throttleTriggeredAfterMouseMove(P)}),it(C,"handleMouseLeave",function(P){C.throttleTriggeredAfterMouseMove.cancel();var T={isTooltipActive:!1};C.setState(T),C.triggerSyncEvent(T);var O=C.props.onMouseLeave;yt(O)&&O(T,P)}),it(C,"handleOuterEvent",function(P){var T=O_e(P),O=Ta(C.props,"".concat(T));if(T&&yt(O)){var E,D;/.*touch.*/i.test(T)?D=C.getMouseInfo(P.changedTouches[0]):D=C.getMouseInfo(P),O((E=D)!==null&&E!==void 0?E:{},P)}}),it(C,"handleClick",function(P){var T=C.getMouseInfo(P);if(T){var O=ye(ye({},T),{},{isTooltipActive:!0});C.setState(O),C.triggerSyncEvent(O);var E=C.props.onClick;yt(E)&&E(O,P)}}),it(C,"handleMouseDown",function(P){var T=C.props.onMouseDown;if(yt(T)){var O=C.getMouseInfo(P);T(O,P)}}),it(C,"handleMouseUp",function(P){var T=C.props.onMouseUp;if(yt(T)){var O=C.getMouseInfo(P);T(O,P)}}),it(C,"handleTouchMove",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&C.throttleTriggeredAfterMouseMove(P.changedTouches[0])}),it(C,"handleTouchStart",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&C.handleMouseDown(P.changedTouches[0])}),it(C,"handleTouchEnd",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&C.handleMouseUp(P.changedTouches[0])}),it(C,"handleDoubleClick",function(P){var T=C.props.onDoubleClick;if(yt(T)){var O=C.getMouseInfo(P);T(O,P)}}),it(C,"handleContextMenu",function(P){var T=C.props.onContextMenu;if(yt(T)){var O=C.getMouseInfo(P);T(O,P)}}),it(C,"triggerSyncEvent",function(P){C.props.syncId!==void 0&&E1.emit(T1,C.props.syncId,P,C.eventEmitterSymbol)}),it(C,"applySyncEvent",function(P){var T=C.props,O=T.layout,E=T.syncMethod,D=C.state.updateId,I=P.dataStartIndex,A=P.dataEndIndex;if(P.dataStartIndex!==void 0||P.dataEndIndex!==void 0)C.setState(ye({dataStartIndex:I,dataEndIndex:A},p({props:C.props,dataStartIndex:I,dataEndIndex:A,updateId:D},C.state)));else if(P.activeTooltipIndex!==void 0){var V=P.chartX,U=P.chartY,$=P.activeTooltipIndex,H=C.state,F=H.offset,R=H.tooltipTicks;if(!F)return;if(typeof E=="function")$=E(R,P);else if(E==="value"){$=-1;for(var z=0;z<R.length;z++)if(R[z].value===P.activeLabel){$=z;break}}var G=ye(ye({},F),{},{x:F.left,y:F.top}),ie=Math.min(V,G.x+G.width),ae=Math.min(U,G.y+G.height),X=R[$]&&R[$].value,le=fP(C.state,C.props.data,$),fe=R[$]?{x:O==="horizontal"?R[$].coordinate:ie,y:O==="horizontal"?ae:R[$].coordinate}:hY;C.setState(ye(ye({},P),{},{activeLabel:X,activeCoordinate:fe,activePayload:le,activeTooltipIndex:$}))}else C.setState(P)}),it(C,"renderCursor",function(P){var T,O=C.state,E=O.isTooltipActive,D=O.activeCoordinate,I=O.activePayload,A=O.offset,V=O.activeTooltipIndex,U=O.tooltipAxisBandSize,$=C.getTooltipEventType(),H=(T=P.props.active)!==null&&T!==void 0?T:E,F=C.props.layout,R=P.key||"_recharts-cursor";return q.createElement(e7e,{key:R,activeCoordinate:D,activePayload:I,activeTooltipIndex:V,chartName:r,element:P,isActive:H,layout:F,offset:A,tooltipAxisBandSize:U,tooltipEventType:$})}),it(C,"renderPolarAxis",function(P,T,O){var E=Ta(P,"type.axisType"),D=Ta(C.state,"".concat(E,"Map")),I=P.type.defaultProps,A=I!==void 0?ye(ye({},I),P.props):P.props,V=D&&D[A["".concat(E,"Id")]];return x.cloneElement(P,ye(ye({},V),{},{className:Nt(E,V.className),key:P.key||"".concat(T,"-").concat(O),ticks:wd(V,!0)}))}),it(C,"renderPolarGrid",function(P){var T=P.props,O=T.radialLines,E=T.polarAngles,D=T.polarRadius,I=C.state,A=I.radiusAxisMap,V=I.angleAxisMap,U=Hu(A),$=Hu(V),H=$.cx,F=$.cy,R=$.innerRadius,z=$.outerRadius;return x.cloneElement(P,{polarAngles:Array.isArray(E)?E:wd($,!0).map(function(G){return G.coordinate}),polarRadius:Array.isArray(D)?D:wd(U,!0).map(function(G){return G.coordinate}),cx:H,cy:F,innerRadius:R,outerRadius:z,key:P.key||"polar-grid",radialLines:O})}),it(C,"renderLegend",function(){var P=C.state.formattedGraphicalItems,T=C.props,O=T.children,E=T.width,D=T.height,I=C.props.margin||{},A=E-(I.left||0)-(I.right||0),V=GG({children:O,formattedGraphicalItems:P,legendWidth:A,legendContent:d});if(!V)return null;var U=V.item,$=L5(V,t7e);return x.cloneElement(U,ye(ye({},$),{},{chartWidth:E,chartHeight:D,margin:I,onBBoxUpdate:C.handleLegendBBoxUpdate}))}),it(C,"renderTooltip",function(){var P,T=C.props,O=T.children,E=T.accessibilityLayer,D=va(O,Oi);if(!D)return null;var I=C.state,A=I.isTooltipActive,V=I.activeCoordinate,U=I.activePayload,$=I.activeLabel,H=I.offset,F=(P=D.props.active)!==null&&P!==void 0?P:A;return x.cloneElement(D,{viewBox:ye(ye({},H),{},{x:H.left,y:H.top}),active:F,label:$,payload:F?U:[],coordinate:V,accessibilityLayer:E})}),it(C,"renderBrush",function(P){var T=C.props,O=T.margin,E=T.data,D=C.state,I=D.offset,A=D.dataStartIndex,V=D.dataEndIndex,U=D.updateId;return x.cloneElement(P,{key:P.key||"_recharts-brush",onChange:Yv(C.handleBrushChange,P.props.onChange),data:E,x:Be(P.props.x)?P.props.x:I.left,y:Be(P.props.y)?P.props.y:I.top+I.height+I.brushBottom-(O.bottom||0),width:Be(P.props.width)?P.props.width:I.width,startIndex:A,endIndex:V,updateId:"brush-".concat(U)})}),it(C,"renderReferenceElement",function(P,T,O){if(!P)return null;var E=C,D=E.clipPathId,I=C.state,A=I.xAxisMap,V=I.yAxisMap,U=I.offset,$=P.type.defaultProps||{},H=P.props,F=H.xAxisId,R=F===void 0?$.xAxisId:F,z=H.yAxisId,G=z===void 0?$.yAxisId:z;return x.cloneElement(P,{key:P.key||"".concat(T,"-").concat(O),xAxis:A[R],yAxis:V[G],viewBox:{x:U.left,y:U.top,width:U.width,height:U.height},clipPathId:D})}),it(C,"renderActivePoints",function(P){var T=P.item,O=P.activePoint,E=P.basePoint,D=P.childIndex,I=P.isRange,A=[],V=T.props.key,U=T.item.type.defaultProps!==void 0?ye(ye({},T.item.type.defaultProps),T.item.props):T.item.props,$=U.activeDot,H=U.dataKey,F=ye(ye({index:D,dataKey:H,cx:O.x,cy:O.y,r:4,fill:RA(T.item),strokeWidth:2,stroke:"#fff",payload:O.payload,value:O.value},ht($,!1)),X0($));return A.push(N.renderActiveDot($,F,"".concat(V,"-activePoint-").concat(D))),E?A.push(N.renderActiveDot($,ye(ye({},F),{},{cx:E.x,cy:E.y}),"".concat(V,"-basePoint-").concat(D))):I&&A.push(null),A}),it(C,"renderGraphicChild",function(P,T,O){var E=C.filterFormatItem(P,T,O);if(!E)return null;var D=C.getTooltipEventType(),I=C.state,A=I.isTooltipActive,V=I.tooltipAxis,U=I.activeTooltipIndex,$=I.activeLabel,H=C.props.children,F=va(H,Oi),R=E.props,z=R.points,G=R.isRange,ie=R.baseLine,ae=E.item.type.defaultProps!==void 0?ye(ye({},E.item.type.defaultProps),E.item.props):E.item.props,X=ae.activeDot,le=ae.hide,fe=ae.activeBar,ge=ae.activeShape,ee=!!(!le&&A&&F&&(X||fe||ge)),re={};D!=="axis"&&F&&F.props.trigger==="click"?re={onClick:Yv(C.handleItemMouseEnter,P.props.onClick)}:D!=="axis"&&(re={onMouseLeave:Yv(C.handleItemMouseLeave,P.props.onMouseLeave),onMouseEnter:Yv(C.handleItemMouseEnter,P.props.onMouseEnter)});var ue=x.cloneElement(P,ye(ye({},E.props),re));function Ne(ve){return typeof V.dataKey=="function"?V.dataKey(ve.payload):null}if(ee)if(U>=0){var je,Y;if(V.dataKey&&!V.allowDuplicatedCategory){var xe=typeof V.dataKey=="function"?Ne:"payload.".concat(V.dataKey.toString());je=zC(z,xe,$),Y=G&&ie&&zC(ie,xe,$)}else je=z==null?void 0:z[U],Y=G&&ie&&ie[U];if(ge||fe){var Me=P.props.activeIndex!==void 0?P.props.activeIndex:U;return[x.cloneElement(P,ye(ye(ye({},E.props),re),{},{activeIndex:Me})),null,null]}if(!It(je))return[ue].concat(Ef(C.renderActivePoints({item:E,activePoint:je,basePoint:Y,childIndex:U,isRange:G})))}else{var $e,ce=($e=C.getItemByXY(C.state.activeCoordinate))!==null&&$e!==void 0?$e:{graphicalItem:ue},Le=ce.graphicalItem,qe=Le.item,Xe=qe===void 0?P:qe,Et=Le.childIndex,B=ye(ye(ye({},E.props),re),{},{activeIndex:Et});return[x.cloneElement(Xe,B),null,null]}return G?[ue,null,null]:[ue,null]}),it(C,"renderCustomized",function(P,T,O){return x.cloneElement(P,ye(ye({key:"recharts-customized-".concat(O)},C.props),C.state))}),it(C,"renderMap",{CartesianGrid:{handler:ey,once:!0},ReferenceArea:{handler:C.renderReferenceElement},ReferenceLine:{handler:ey},ReferenceDot:{handler:C.renderReferenceElement},XAxis:{handler:ey},YAxis:{handler:ey},Brush:{handler:C.renderBrush,once:!0},Bar:{handler:C.renderGraphicChild},Line:{handler:C.renderGraphicChild},Area:{handler:C.renderGraphicChild},Radar:{handler:C.renderGraphicChild},RadialBar:{handler:C.renderGraphicChild},Scatter:{handler:C.renderGraphicChild},Pie:{handler:C.renderGraphicChild},Funnel:{handler:C.renderGraphicChild},Tooltip:{handler:C.renderCursor,once:!0},PolarGrid:{handler:C.renderPolarGrid,once:!0},PolarAngleAxis:{handler:C.renderPolarAxis},PolarRadiusAxis:{handler:C.renderPolarAxis},Customized:{handler:C.renderCustomized}}),C.clipPathId="".concat((w=j.id)!==null&&w!==void 0?w:Mx("recharts"),"-clip"),C.throttleTriggeredAfterMouseMove=qq(C.triggeredAfterMouseMove,(S=j.throttleDelay)!==null&&S!==void 0?S:1e3/60),C.state={},C}return f7e(N,b),c7e(N,[{key:"componentDidMount",value:function(){var w,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,S=w.children,C=w.data,P=w.height,T=w.layout,O=va(S,Oi);if(O){var E=O.props.defaultIndex;if(!(typeof E!="number"||E<0||E>this.state.tooltipTicks.length-1)){var D=this.state.tooltipTicks[E]&&this.state.tooltipTicks[E].value,I=fP(this.state,C,E,D),A=this.state.tooltipTicks[E].coordinate,V=(this.state.offset.top+P)/2,U=T==="horizontal",$=U?{x:A,y:V}:{y:A,x:V},H=this.state.formattedGraphicalItems.find(function(R){var z=R.item;return z.type.name==="Scatter"});H&&($=ye(ye({},$),H.props.points[E].tooltipPosition),I=H.props.points[E].tooltipPayload);var F={activeTooltipIndex:E,isTooltipActive:!0,activeLabel:D,activePayload:I,activeCoordinate:$};this.setState(F),this.renderCursor(O),this.accessibilityManager.setIndex(E)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var C,P;this.accessibilityManager.setDetails({offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0}})}return null}},{key:"componentDidUpdate",value:function(w){WC([va(w.children,Oi)],[va(this.props.children,Oi)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=va(this.props.children,Oi);if(w&&typeof w.props.shared=="boolean"){var S=w.props.shared?"axis":"item";return l.indexOf(S)>=0?S:i}return i}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var S=this.container,C=S.getBoundingClientRect(),P=i4e(C),T={chartX:Math.round(w.pageX-P.left),chartY:Math.round(w.pageY-P.top)},O=C.width/S.offsetWidth||1,E=this.inRange(T.chartX,T.chartY,O);if(!E)return null;var D=this.state,I=D.xAxisMap,A=D.yAxisMap,V=this.getTooltipEventType(),U=B5(this.state,this.props.data,this.props.layout,E);if(V!=="axis"&&I&&A){var $=Hu(I).scale,H=Hu(A).scale,F=$&&$.invert?$.invert(T.chartX):null,R=H&&H.invert?H.invert(T.chartY):null;return ye(ye({},T),{},{xValue:F,yValue:R},U)}return U?ye(ye({},T),U):null}},{key:"inRange",value:function(w,S){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,P=this.props.layout,T=w/C,O=S/C;if(P==="horizontal"||P==="vertical"){var E=this.state.offset,D=T>=E.left&&T<=E.left+E.width&&O>=E.top&&O<=E.top+E.height;return D?{x:T,y:O}:null}var I=this.state,A=I.angleAxisMap,V=I.radiusAxisMap;if(A&&V){var U=Hu(A);return g$({x:T,y:O},U)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,S=this.getTooltipEventType(),C=va(w,Oi),P={};C&&S==="axis"&&(C.props.trigger==="click"?P={onClick:this.handleClick}:P={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var T=X0(this.props,this.handleOuterEvent);return ye(ye({},T),P)}},{key:"addListener",value:function(){E1.on(T1,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){E1.removeListener(T1,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,S,C){for(var P=this.state.formattedGraphicalItems,T=0,O=P.length;T<O;T++){var E=P[T];if(E.item===w||E.props.key===w.key||S===tl(E.item.type)&&C===E.childIndex)return E}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,S=this.state.offset,C=S.left,P=S.top,T=S.height,O=S.width;return q.createElement("defs",null,q.createElement("clipPath",{id:w},q.createElement("rect",{x:C,y:P,height:T,width:O})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(S,C){var P=$5(C,2),T=P[0],O=P[1];return ye(ye({},S),{},it({},T,O.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(S,C){var P=$5(C,2),T=P[0],O=P[1];return ye(ye({},S),{},it({},T,O.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[w])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(w){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[w])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(w){var S=this.state,C=S.formattedGraphicalItems,P=S.activeItem;if(C&&C.length)for(var T=0,O=C.length;T<O;T++){var E=C[T],D=E.props,I=E.item,A=I.type.defaultProps!==void 0?ye(ye({},I.type.defaultProps),I.props):I.props,V=tl(I.type);if(V==="Bar"){var U=(D.data||[]).find(function(R){return U5e(w,R)});if(U)return{graphicalItem:E,payload:U}}else if(V==="RadialBar"){var $=(D.data||[]).find(function(R){return g$(w,R)});if($)return{graphicalItem:E,payload:$}}else if(eN(E,P)||tN(E,P)||Gg(E,P)){var H=T6e({graphicalItem:E,activeTooltipItem:P,itemData:A.data}),F=A.activeIndex===void 0?H:A.activeIndex;return{graphicalItem:ye(ye({},E),{},{childIndex:F}),payload:Gg(E,P)?A.data[H]:E.props.data[H]}}}return null}},{key:"render",value:function(){var w=this;if(!iR(this))return null;var S=this.props,C=S.children,P=S.className,T=S.width,O=S.height,E=S.style,D=S.compact,I=S.title,A=S.desc,V=L5(S,r7e),U=ht(V,!1);if(D)return q.createElement(_5,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},q.createElement(VC,ch({},U,{width:T,height:O,title:I,desc:A}),this.renderClipPath(),lR(C,this.renderMap)));if(this.props.accessibilityLayer){var $,H;U.tabIndex=($=this.props.tabIndex)!==null&&$!==void 0?$:0,U.role=(H=this.props.role)!==null&&H!==void 0?H:"application",U.onKeyDown=function(R){w.accessibilityManager.keyboardEvent(R)},U.onFocus=function(){w.accessibilityManager.focus()}}var F=this.parseEventsOfWrapper();return q.createElement(_5,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},q.createElement("div",ch({className:Nt("recharts-wrapper",P),style:ye({position:"relative",cursor:"default",width:T,height:O},E)},F,{ref:function(z){w.container=z}}),q.createElement(VC,ch({},U,{width:T,height:O,title:I,desc:A,style:y7e}),this.renderClipPath(),lR(C,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(x.Component);it(y,"displayName",r),it(y,"defaultProps",ye({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),it(y,"getDerivedStateFromProps",function(b,N){var j=b.dataKey,w=b.data,S=b.children,C=b.width,P=b.height,T=b.layout,O=b.stackOffset,E=b.margin,D=N.dataStartIndex,I=N.dataEndIndex;if(N.updateId===void 0){var A=z5(b);return ye(ye(ye({},A),{},{updateId:0},p(ye(ye({props:b},A),{},{updateId:0}),N)),{},{prevDataKey:j,prevData:w,prevWidth:C,prevHeight:P,prevLayout:T,prevStackOffset:O,prevMargin:E,prevChildren:S})}if(j!==N.prevDataKey||w!==N.prevData||C!==N.prevWidth||P!==N.prevHeight||T!==N.prevLayout||O!==N.prevStackOffset||!_h(E,N.prevMargin)){var V=z5(b),U={chartX:N.chartX,chartY:N.chartY,isTooltipActive:N.isTooltipActive},$=ye(ye({},B5(N,w,T)),{},{updateId:N.updateId+1}),H=ye(ye(ye({},V),U),$);return ye(ye(ye({},H),p(ye({props:b},H),N)),{},{prevDataKey:j,prevData:w,prevWidth:C,prevHeight:P,prevLayout:T,prevStackOffset:O,prevMargin:E,prevChildren:S})}if(!WC(S,N.prevChildren)){var F,R,z,G,ie=va(S,bf),ae=ie&&(F=(R=ie.props)===null||R===void 0?void 0:R.startIndex)!==null&&F!==void 0?F:D,X=ie&&(z=(G=ie.props)===null||G===void 0?void 0:G.endIndex)!==null&&z!==void 0?z:I,le=ae!==D||X!==I,fe=!It(w),ge=fe&&!le?N.updateId:N.updateId+1;return ye(ye({updateId:ge},p(ye(ye({props:b},N),{},{updateId:ge,dataStartIndex:ae,dataEndIndex:X}),N)),{},{prevChildren:S,dataStartIndex:ae,dataEndIndex:X})}return null}),it(y,"renderActiveDot",function(b,N,j){var w;return x.isValidElement(b)?w=x.cloneElement(b,N):yt(b)?w=b(N):w=q.createElement($A,N),q.createElement(nr,{className:"recharts-active-dot",key:j},w)});var v=x.forwardRef(function(N,j){return q.createElement(y,ch({},N,{ref:j}))});return v.displayName=y.displayName,v},E7e=mY({chartName:"BarChart",GraphicalChild:pu,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:lN},{axisType:"yAxis",AxisComp:cN}],formatAxisMap:d8e}),T7e=mY({chartName:"PieChart",GraphicalChild:Cl,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Qj},{axisType:"radiusAxis",AxisComp:Xj}],formatAxisMap:rDe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const A7e=()=>{const[e,t]=x.useState(null),[r,n]=x.useState(null),[a,i]=x.useState(null),[o,l]=x.useState(null),[c,d]=x.useState(null),[h,f]=x.useState(null),[m,p]=x.useState(!0),y=j=>{const w=j.length,S=j.reduce((A,V)=>A+(V.total||0),0),C=w>0?S/w:0,P=j.filter(A=>A.status==="pending").length,T=j.filter(A=>A.status==="confirmed").length,O=j.filter(A=>A.status==="completed").length,E=j.filter(A=>A.status==="cancelled").length,D={};j.forEach(A=>{(A.service_type||[]).forEach(V=>{D[V]=(D[V]||0)+1})});const I=Object.entries(D).map(([A,V])=>({service:A,count:V})).sort((A,V)=>V.count-A.count);return{totalOrders:w,totalRevenue:S,averageValue:C,pendingOrders:P,confirmedOrders:T,completedOrders:O,cancelledOrders:E,serviceBreakdown:I}},v=async()=>{p(!0);const j=new Date;try{const w=ra(j,{weekStartsOn:1}),S=Kd(j,{weekStartsOn:1}),C=nn(j),P=Bi(j),T=nf(j),O=xg(j),E=ra(OC(j,1),{weekStartsOn:1}),D=Kd(OC(j,1),{weekStartsOn:1}),I=nn(V0(j,1)),A=Bi(V0(j,1)),V=nf(MC(j,1)),U=xg(MC(j,1)),{data:$,error:H}=await de.from("bookings").select("*").order("created_at",{ascending:!1});if(H)throw H;const F=$||[],R=(z,G)=>F.filter(ie=>{const ae=un(ie.scheduled_date);return ae>=z&&ae<=G});t(y(R(w,S))),n(y(R(C,P))),i(y(R(T,O))),l(y(R(E,D))),d(y(R(I,A))),f(y(R(V,U)))}catch(w){console.error("Failed to fetch order stats:",w)}finally{p(!1)}};x.useEffect(()=>{v()},[]);const b=(j,w)=>{if(w===0)return{value:j>0?100:0,isPositive:j>0};const S=(j-w)/w*100;return{value:Math.abs(S),isPositive:S>=0}},N=(j,w,S)=>{if(!w)return s.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No data available"});const C=S?b(w.totalRevenue,S.totalRevenue):null,P=S?b(w.totalOrders,S.totalOrders):null,T=[{name:"Pending",value:w.pendingOrders,color:"#f59e0b"},{name:"Confirmed",value:w.confirmedOrders,color:"#3b82f6"},{name:"Completed",value:w.completedOrders,color:"#16a34a"},{name:"Cancelled",value:w.cancelledOrders,color:"#ef4444"}].filter(O=>O.value>0);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx(J,{children:s.jsxs(Q,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[s.jsx(bee,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:"Total Orders"})]}),s.jsx("p",{className:"text-2xl font-bold",children:w.totalOrders}),P&&s.jsxs("div",{className:`flex items-center gap-1 text-xs ${P.isPositive?"text-emerald-600":"text-red-600"}`,children:[P.isPositive?s.jsx(Q4,{className:"w-3 h-3"}):s.jsx(J4,{className:"w-3 h-3"}),P.value.toFixed(1),"% vs previous"]})]})}),s.jsx(J,{children:s.jsxs(Q,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[s.jsx(hs,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:"Total Revenue"})]}),s.jsxs("p",{className:"text-2xl font-bold",children:["$",w.totalRevenue.toFixed(2)]}),C&&s.jsxs("div",{className:`flex items-center gap-1 text-xs ${C.isPositive?"text-emerald-600":"text-red-600"}`,children:[C.isPositive?s.jsx(Q4,{className:"w-3 h-3"}):s.jsx(J4,{className:"w-3 h-3"}),C.value.toFixed(1),"% vs previous"]})]})}),s.jsx(J,{children:s.jsxs(Q,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[s.jsx(cx,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:"Avg Order Value"})]}),s.jsxs("p",{className:"text-2xl font-bold",children:["$",w.averageValue.toFixed(2)]})]})}),s.jsx(J,{children:s.jsxs(Q,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[s.jsx(Lt,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:"Completed"})]}),s.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:w.completedOrders}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.totalOrders>0?(w.completedOrders/w.totalOrders*100).toFixed(0):0,"% completion rate"]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs(J,{children:[s.jsx(ke,{className:"pb-2",children:s.jsx(Ee,{className:"text-sm",children:"Order Status"})}),s.jsx(Q,{children:T.length>0?s.jsx("div",{className:"h-48",children:s.jsx(aD,{width:"100%",height:"100%",children:s.jsxs(T7e,{children:[s.jsx(Cl,{data:T,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:60,label:({name:O,value:E})=>`${O}: ${E}`,children:T.map((O,E)=>s.jsx(Dj,{fill:O.color},O.name))}),s.jsx(Oi,{})]})})}):s.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No orders"})})]}),s.jsxs(J,{children:[s.jsx(ke,{className:"pb-2",children:s.jsx(Ee,{className:"text-sm",children:"Services Booked"})}),s.jsx(Q,{children:w.serviceBreakdown.length>0?s.jsx("div",{className:"h-48",children:s.jsx(aD,{width:"100%",height:"100%",children:s.jsxs(E7e,{data:w.serviceBreakdown.slice(0,5),layout:"vertical",children:[s.jsx(lN,{type:"number"}),s.jsx(cN,{type:"category",dataKey:"service",width:100,tick:{fontSize:11}}),s.jsx(Oi,{}),s.jsx(pu,{dataKey:"count",fill:"#16a34a",radius:[0,4,4,0]})]})})}):s.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No services"})})]})]})]})};return m?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[s.jsx(Kp,{className:"w-5 h-5 text-primary"}),"Order Statistics"]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Revenue and order analytics by time period"})]}),s.jsxs(qi,{defaultValue:"weekly",className:"w-full",children:[s.jsxs(ii,{className:"grid w-full grid-cols-3",children:[s.jsx(ft,{value:"weekly",children:"This Week"}),s.jsx(ft,{value:"monthly",children:"This Month"}),s.jsx(ft,{value:"yearly",children:"This Year"})]}),s.jsx(Ct,{value:"weekly",className:"mt-6",children:N("Weekly",e,o)}),s.jsx(Ct,{value:"monthly",className:"mt-6",children:N("Monthly",r,c)}),s.jsx(Ct,{value:"yearly",className:"mt-6",children:N("Yearly",a,h)})]})]})},pY=(e,t,r)=>e==="in-progress"?{icon:si,label:"In Progress",color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-100 dark:bg-blue-900/30",borderColor:"border-blue-300 dark:border-blue-700"}:t&&(e==="active"||e==="confirmed")?{icon:es,label:"Confirmed",color:"text-green-600 dark:text-green-400",bgColor:"bg-green-100 dark:bg-green-900/30",borderColor:"border-green-300 dark:border-green-700"}:e==="pending"?{icon:Qe,label:"Pending",color:"text-amber-600 dark:text-amber-400",bgColor:"bg-amber-100 dark:bg-amber-900/30",borderColor:"border-amber-300 dark:border-amber-700"}:e==="completed"&&r==="overtime_adjusted"?{icon:Yo,label:"Completed (Overtime)",color:"text-orange-600 dark:text-orange-400",bgColor:"bg-orange-100 dark:bg-orange-900/30",borderColor:"border-orange-300 dark:border-orange-700"}:e==="completed"?{icon:es,label:"Completed",color:"text-green-600 dark:text-green-400",bgColor:"bg-green-100 dark:bg-green-900/30",borderColor:"border-green-300 dark:border-green-700"}:e==="archived"?{icon:ya,label:"Archived",color:"text-muted-foreground",bgColor:"bg-muted/50",borderColor:"border-muted"}:{icon:Qe,label:e,color:"text-muted-foreground",bgColor:"bg-muted",borderColor:"border-border"},O7e={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"},M7e={sm:"w-6 h-6",md:"w-8 h-8",lg:"w-10 h-10"},mP=({status:e,pswAssigned:t,paymentStatus:r,size:n="md",showLabel:a=!1,className:i})=>{const o=pY(e,t,r),l=o.icon;return s.jsxs("div",{className:Re("flex items-center gap-2",i),children:[s.jsx("div",{className:Re("flex items-center justify-center rounded-full",M7e[n],o.bgColor),children:s.jsx(l,{className:Re(O7e[n],o.color)})}),a&&s.jsx("span",{className:Re("text-sm font-medium",o.color),children:o.label})]})},gY=e=>e<=14?0:e<=30?30:e<=60?60:Math.ceil(e/60)*60,I7e=(e,t=35)=>gY(e)/60*t,W5=({overtimeMinutes:e,overtimePaymentIntentId:t,subtotal:r,total:n,className:a,showTooltip:i=!0})=>{if(!e||e<=14)return null;const o=gY(e),l=r&&n?n-r:I7e(e),c=t?`${t.slice(0,10)}...`:null,d=s.jsxs(ne,{className:Re("bg-orange-100 text-orange-700 border-orange-300 dark:bg-orange-900/30 dark:text-orange-400 dark:border-orange-700 gap-1",a),children:[s.jsx(Yo,{className:"w-3 h-3"}),"Overtime"]});return i?s.jsx(B8,{children:s.jsxs(jne,{children:[s.jsx(Nne,{asChild:!0,children:d}),s.jsx(z8,{className:"max-w-xs",children:s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsx("p",{className:"font-medium",children:" Overtime Charged"}),s.jsxs("p",{children:["Actual overtime: ",e," min"]}),s.jsxs("p",{children:["Billed for: ",o," min block"]}),l>0&&s.jsxs("p",{children:["Surcharge: $",l.toFixed(2)]}),c&&s.jsxs("p",{className:"text-xs text-muted-foreground font-mono",children:["Stripe: ",c]})]})})]})}):d},R7e=({open:e,onOpenChange:t,onOrderCreated:r})=>{const[n,a]=x.useState(""),[i,o]=x.useState(""),[l,c]=x.useState(""),[d,h]=x.useState(""),[f,m]=x.useState(""),[p,y]=x.useState(""),[v,b]=x.useState(""),[N,j]=x.useState("1"),[w,S]=x.useState(""),[C,P]=x.useState("invoice"),[T,O]=x.useState(""),[E,D]=x.useState([]),[I,A]=x.useState(!1),[V,U]=x.useState(null),{tasks:$}=vx(),H=$,F=()=>{a(""),o(""),c(""),h(""),m(""),y(""),b(""),j("1"),S(""),P("invoice"),O(""),D([]),U(null)},R=()=>{F(),t(!1)},z=X=>{D(le=>le.includes(X)?le.filter(fe=>fe!==X):[...le,X])},G=(X,le)=>{const[fe,ge]=X.split(":").map(Number),ee=fe*60+ge+le*60,re=Math.floor(ee/60)%24,ue=ee%60;return`${String(re).padStart(2,"0")}:${String(ue).padStart(2,"0")}`},ie=async()=>{if(!n.trim())return Z.error("Client name is required");if(!l.trim())return Z.error("Client phone is required");if(!d.trim())return Z.error("Service address is required");if(!f.trim())return Z.error("Postal code is required");if(!p)return Z.error("Service date is required");if(!v)return Z.error("Start time is required");if(E.length===0)return Z.error("Select at least one service");A(!0);try{const X=parseFloat(N),le=G(v,X),fe=35,ge=fe*X,ee=ge,re=E.map($e=>{const ce=H.find(Le=>Le.id===$e);return(ce==null?void 0:ce.name)||$e}),{data:{user:ue}}=await de.auth.getUser(),{data:Ne,error:je}=await de.functions.invoke("create-booking",{body:{user_id:(ue==null?void 0:ue.id)||null,client_name:n.trim(),client_email:i.trim()||`admin-order-${Date.now()}@manual.local`,client_phone:l.trim(),client_address:d.trim(),client_postal_code:f.trim().toUpperCase(),patient_name:n.trim(),patient_address:d.trim(),patient_postal_code:f.trim().toUpperCase(),scheduled_date:p,start_time:v,end_time:le,hours:X,hourly_rate:fe,subtotal:ge,surge_amount:0,total:ee,service_type:re,payment_status:C==="invoice"?"invoice-pending":"pending",is_asap:!1,is_transport_booking:!1,special_notes:w.trim()||null}});if(je||Ne!=null&&Ne.error)throw new Error((je==null?void 0:je.message)||(Ne==null?void 0:Ne.error)||"Failed to create booking");const Y=Ne.booking_code,xe=Ne.booking_id;if(Zw({bookingId:Y,pswId:"",pswName:"",clientName:n.trim(),clientFirstName:n.trim().split(" ")[0],clientPhone:l.trim(),clientEmail:i.trim()||void 0,patientAddress:d.trim(),postalCode:f.trim().toUpperCase(),scheduledStart:v,scheduledEnd:le,scheduledDate:p,services:re,agreementAccepted:!1,overtimeMinutes:0,flaggedForOvertime:!1,postedAt:new Date().toISOString(),status:"available"}),T.trim()){const $e=parseInt(T.replace(/\D/g,""));if(!isNaN($e)){const{data:ce}=await de.from("psw_profiles").select("id, first_name, last_name, psw_number").eq("psw_number",$e).single();ce?(await de.from("bookings").update({psw_assigned:ce.id,psw_first_name:ce.first_name,status:"active"}).eq("id",xe),Z.success(`PSW ${ce.first_name} assigned`)):Z.warning(`PSW number ${$e} not found - booking created without assignment`)}}let Me;if(C==="pay-now"&&i.trim())try{const{data:$e,error:ce}=await de.functions.invoke("create-payment-intent",{body:{amount:Math.round(ee*100),customerEmail:i.trim(),bookingDetails:{bookingUuid:xe,bookingCode:Y,clientName:n.trim(),date:p,time:v},isLiveMode:!0}});!ce&&($e!=null&&$e.paymentIntentId)&&(Me=$e.paymentIntentId,await de.from("bookings").update({stripe_payment_intent_id:Me,payment_status:"paid"}).eq("id",xe))}catch($e){console.warn("Stripe PI creation failed:",$e),Z.warning("Booking created but Stripe payment intent failed")}U({bookingCode:Y,bookingUuid:xe,clientName:n.trim(),serviceDate:p,startTime:v,paymentIntentId:Me}),r==null||r(),Z.success(`Order ${Y} created`)}catch(X){console.error("MOC error:",X),Z.error(X.message||"Failed to create order")}finally{A(!1)}},ae=(X,le)=>{navigator.clipboard.writeText(X),Z.success(`Copied ${le}`)};return V?s.jsx(hr,{open:e,onOpenChange:R,children:s.jsxs(or,{className:"sm:max-w-md",children:[s.jsx(lr,{children:s.jsxs(cr,{className:"flex items-center gap-2 text-green-600",children:[s.jsx(Kt,{className:"w-5 h-5"}),"Order Created Successfully"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 bg-muted rounded-lg space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Booking Code"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-mono font-bold text-foreground",children:V.bookingCode}),s.jsx(K,{variant:"ghost",size:"sm",onClick:()=>ae(V.bookingCode,"Booking Code"),children:s.jsx(Qo,{className:"w-3 h-3"})})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"UUID (Internal)"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-mono text-xs text-muted-foreground truncate max-w-[180px]",children:V.bookingUuid}),s.jsx(K,{variant:"ghost",size:"sm",onClick:()=>ae(V.bookingUuid,"UUID"),children:s.jsx(Qo,{className:"w-3 h-3"})})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Client"}),s.jsx("span",{className:"text-sm font-medium text-foreground",children:V.clientName})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Date / Time"}),s.jsxs("span",{className:"text-sm font-medium text-foreground",children:[V.serviceDate," @ ",V.startTime]})]}),V.paymentIntentId&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Stripe PI"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-mono text-xs text-muted-foreground truncate max-w-[160px]",children:V.paymentIntentId}),s.jsx(K,{variant:"ghost",size:"sm",onClick:()=>ae(V.paymentIntentId,"Payment Intent ID"),children:s.jsx(Qo,{className:"w-3 h-3"})})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(K,{variant:"outline",className:"flex-1",onClick:R,children:"Close"}),s.jsx(K,{className:"flex-1",onClick:()=>{F(),U(null)},children:"Create Another"})]})]})]})}):s.jsx(hr,{open:e,onOpenChange:R,children:s.jsxs(or,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(lr,{children:[s.jsxs(cr,{className:"flex items-center gap-2",children:[s.jsx(xo,{className:"w-5 h-5 text-primary"}),"Create Order (Manual)"]}),s.jsx(bo,{children:"Admin manual order creation. Uses the same booking pipeline as client orders."})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-semibold text-foreground text-sm border-b pb-1",children:"Client Information"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(oe,{htmlFor:"moc-name",children:"Full Name *"}),s.jsx(pe,{id:"moc-name",value:n,onChange:X=>a(X.target.value),placeholder:"John Smith"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(oe,{htmlFor:"moc-phone",children:"Phone *"}),s.jsx(pe,{id:"moc-phone",value:l,onChange:X=>c(X.target.value),placeholder:"416-555-1234"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(oe,{htmlFor:"moc-email",children:"Email"}),s.jsx(pe,{id:"moc-email",type:"email",value:i,onChange:X=>o(X.target.value),placeholder:"client@email.com"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(oe,{htmlFor:"moc-postal",children:"Postal Code *"}),s.jsx(pe,{id:"moc-postal",value:f,onChange:X=>m(X.target.value),placeholder:"M5V 3L9"})]})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(oe,{htmlFor:"moc-address",children:"Service Address *"}),s.jsx(pe,{id:"moc-address",value:d,onChange:X=>h(X.target.value),placeholder:"123 Main St, Toronto, ON"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-semibold text-foreground text-sm border-b pb-1",children:"Booking Details"}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(oe,{htmlFor:"moc-date",children:"Service Date *"}),s.jsx(pe,{id:"moc-date",type:"date",value:p,onChange:X=>y(X.target.value)})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(oe,{htmlFor:"moc-time",children:"Start Time *"}),s.jsx(pe,{id:"moc-time",type:"time",value:v,onChange:X=>b(X.target.value)})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(oe,{htmlFor:"moc-duration",children:"Duration (hrs)"}),s.jsxs(Xt,{value:N,onValueChange:j,children:[s.jsx(qt,{children:s.jsx(Jt,{})}),s.jsx(Gt,{children:[1,1.5,2,2.5,3,4,5,6,8].map(X=>s.jsxs(_e,{value:String(X),children:[X," hr",X>1?"s":""]},X))})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{children:"Service Type(s) *"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:H.map(X=>s.jsx(ne,{variant:E.includes(X.id)?"default":"outline",className:"cursor-pointer select-none",onClick:()=>z(X.id),children:X.name},X.id))}),E.length===0&&s.jsx("p",{className:"text-xs text-muted-foreground",children:"Click to select services"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(oe,{htmlFor:"moc-notes",children:"Special Notes"}),s.jsx(_n,{id:"moc-notes",value:w,onChange:X=>S(X.target.value),placeholder:"Optional notes...",rows:2})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-semibold text-foreground text-sm border-b pb-1",children:"Payment & Assignment"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(oe,{children:"Payment Mode"}),s.jsxs(Xt,{value:C,onValueChange:X=>P(X),children:[s.jsx(qt,{children:s.jsx(Jt,{})}),s.jsxs(Gt,{children:[s.jsx(_e,{value:"invoice",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(zt,{className:"w-3 h-3"}),"Invoice / Pay Later"]})}),s.jsx(_e,{value:"pay-now",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ms,{className:"w-3 h-3"}),"Pay Now (Stripe)"]})})]})]})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(oe,{htmlFor:"moc-psw",children:"Assign PSW (optional)"}),s.jsx(pe,{id:"moc-psw",value:T,onChange:X=>O(X.target.value),placeholder:"e.g. 1001 or PSW-1001"})]})]}),C==="pay-now"&&!i.trim()&&s.jsx("p",{className:"text-xs text-amber-600",children:" Email is required for Stripe payment"})]}),s.jsxs("div",{className:"flex gap-3 pt-2",children:[s.jsx(K,{variant:"outline",onClick:R,className:"flex-1",disabled:I,children:"Cancel"}),s.jsx(K,{onClick:ie,className:"flex-1",disabled:I,children:I?s.jsxs(s.Fragment,{children:[s.jsx(Ut,{className:"w-4 h-4 animate-spin mr-2"}),"Creating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(xo,{className:"w-4 h-4 mr-2"}),"Create Order"]})})]})]})]})})},O1=e=>Ze(new Date(e),"MMM d, yyyy"),ty=e=>{const[t,r]=e.split(":"),n=parseInt(t),a=n>=12?"PM":"AM";return`${n%12||12}:${r} ${a}`},H5=(e,t,r)=>{const n=pY(e,t,r);return s.jsx(ne,{className:`${n.bgColor} ${n.color} border ${n.borderColor}`,children:n.label})},D7e=()=>{var $e;const[e,t]=x.useState([]),[r,n]=x.useState(!0),[a,i]=x.useState(""),[o,l]=x.useState(""),[c,d]=x.useState(null),[h,f]=x.useState(!1),[m,p]=x.useState("daily"),[y,v]=x.useState("list"),[b,N]=x.useState(new Date),[j,w]=x.useState(!1),[S,C]=x.useState(null),[P,T]=x.useState(null),[O,E]=x.useState(!1),[D,I]=x.useState(null),[A,V]=x.useState(!1),[U,$]=x.useState(!1),[H,F]=x.useState(!1);x.useEffect(()=>{G()},[m,b]),x.useEffect(()=>{const ce=de.channel("admin-orders-realtime").on("postgres_changes",{event:"*",schema:"public",table:"bookings"},Le=>{if(console.log("Realtime order update:",Le),Le.eventType==="UPDATE"){const qe=Le.new;t(Xe=>Xe.map(Et=>Et.id===qe.id?{...Et,...qe,care_sheet:qe.care_sheet}:Et))}else Le.eventType==="INSERT"&&G()}).subscribe();return()=>{de.removeChannel(ce)}},[m,b]);const R=()=>{switch(m){case"daily":return{start:ml(b),end:nj(b)};case"weekly":return{start:ra(b,{weekStartsOn:1}),end:Kd(b,{weekStartsOn:1})};case"monthly":return{start:nn(b),end:Bi(b)};case"yearly":return{start:nf(b),end:xg(b)};case"archived":return{start:new Date(0),end:new Date}}},z=async ce=>{if(!ce.trim()){d(null);return}f(!0);const{data:Le,error:qe}=await de.from("bookings").select("id, booking_code, client_name, client_email, scheduled_date, start_time, end_time, status, subtotal, total, service_type, psw_first_name, psw_assigned, care_sheet, care_sheet_submitted_at, care_sheet_psw_name, payment_status, overtime_minutes, overtime_payment_intent_id").eq("booking_code",ce.trim().toUpperCase()).maybeSingle();qe?(console.error("Error searching order:",qe),d(null)):d(Le?{...Le,care_sheet:Le.care_sheet,overtime_minutes:Le.overtime_minutes??null,overtime_payment_intent_id:Le.overtime_payment_intent_id??null}:null),f(!1)};x.useEffect(()=>{const ce=setTimeout(()=>{o.length>=3?z(o):d(null)},300);return()=>clearTimeout(ce)},[o]);const G=async()=>{if(n(!0),m==="archived"){const{data:Et,error:B}=await de.from("bookings").select("id, booking_code, client_name, client_email, scheduled_date, start_time, end_time, status, subtotal, total, service_type, psw_first_name, psw_assigned, care_sheet, care_sheet_submitted_at, care_sheet_psw_name, payment_status, overtime_minutes, overtime_payment_intent_id").eq("status","archived").order("scheduled_date",{ascending:!1});if(B)console.error("Error fetching archived bookings:",B);else{const ve=(Et||[]).map(Fe=>({...Fe,care_sheet:Fe.care_sheet,overtime_minutes:Fe.overtime_minutes??null,overtime_payment_intent_id:Fe.overtime_payment_intent_id??null}));t(ve)}n(!1);return}const{start:ce,end:Le}=R(),{data:qe,error:Xe}=await de.from("bookings").select("id, booking_code, client_name, client_email, scheduled_date, start_time, end_time, status, subtotal, total, service_type, psw_first_name, psw_assigned, care_sheet, care_sheet_submitted_at, care_sheet_psw_name, payment_status, overtime_minutes, overtime_payment_intent_id").gte("scheduled_date",Ze(ce,"yyyy-MM-dd")).lte("scheduled_date",Ze(Le,"yyyy-MM-dd")).neq("status","archived").order("scheduled_date",{ascending:!1});if(Xe)console.error("Error fetching bookings:",Xe);else{const Et=(qe||[]).map(B=>({...B,care_sheet:B.care_sheet,overtime_minutes:B.overtime_minutes??null,overtime_payment_intent_id:B.overtime_payment_intent_id??null}));t(Et)}n(!1)},ie=ce=>{const Le=ce==="prev"?-1:1;switch(m){case"daily":N(new Date(b.getTime()+Le*24*60*60*1e3));break;case"weekly":N(ce==="prev"?OC(b,1):gg(b,1));break;case"monthly":N(ce==="prev"?V0(b,1):ta(b,1));break;case"yearly":N(ce==="prev"?MC(b,1):cT(b,1));break}},ae=()=>{N(new Date),p("daily")},X=ce=>{ce&&(N(ce),p("daily"),w(!1))},le=()=>{if(m==="archived")return"Archived Orders";const{start:ce,end:Le}=R();switch(m){case"daily":return Ze(b,"EEEE, MMMM d, yyyy");case"weekly":return`${Ze(ce,"MMM d")} - ${Ze(Le,"MMM d, yyyy")}`;case"monthly":return Ze(b,"MMMM yyyy");case"yearly":return Ze(b,"yyyy");default:return""}},fe=x.useMemo(()=>{if(!a.trim())return e;const ce=a.toLowerCase();return e.filter(Le=>{var qe;return Le.client_name.toLowerCase().includes(ce)||Le.booking_code.toLowerCase().includes(ce)||Le.client_email.toLowerCase().includes(ce)||((qe=Le.psw_first_name)==null?void 0:qe.toLowerCase().includes(ce))})},[e,a]),ge=x.useMemo(()=>{const ce=fe.filter(B=>B.status==="completed").length,Le=fe.reduce((B,ve)=>B+(ve.total||0),0),qe=fe.filter(B=>B.care_sheet!==null).length,Xe=fe.filter(B=>B.payment_status==="overtime_adjusted").length,Et=fe.filter(B=>B.payment_status==="overtime_adjusted").reduce((B,ve)=>B+((ve.total||0)-(ve.subtotal||0)),0);return{completed:ce,totalRevenue:Le,withCareSheet:qe,total:fe.length,overtimeCount:Xe,overtimeRevenue:Et}},[fe]),ee=x.useMemo(()=>{const ce=fe.filter(Fe=>Fe.status==="pending").length,Le=fe.filter(Fe=>Fe.status==="confirmed").length,qe=fe.filter(Fe=>Fe.status==="in-progress").length,Xe=fe.filter(Fe=>Fe.status==="completed").length,Et=fe.filter(Fe=>Fe.status==="cancelled").length,B=fe.reduce((Fe,st)=>Fe+(st.total||0),0),ve=fe.filter(Fe=>Fe.payment_status==="overtime_adjusted").length;return{pending:ce,confirmed:Le,inProgress:qe,completed:Xe,cancelled:Et,totalRevenue:B,total:fe.length,overtimeCount:ve}},[fe]),re=ce=>{T(ce),C(ce.care_sheet)},ue=ce=>{if(ce.status==="in-progress"){Z.error("Cannot archive in-progress orders");return}I(ce),E(!0)},Ne=async()=>{if(!D)return;$(!0),await jfe(D.booking_code)?(Z.success(`Order ${D.booking_code} archived`),G()):Z.error("Failed to archive order"),$(!1),E(!1),I(null)},je=async ce=>{$(!0),await _fe(ce.booking_code)?(Z.success(`Order ${ce.booking_code} restored`),G()):Z.error("Failed to restore order"),$(!1)},Y=async()=>{$(!0);const ce=await Sfe();ce.error?Z.error(`Failed to archive: ${ce.error}`):ce.archived>0?(Z.success(`Archived ${ce.archived} past-due orders`),G()):Z.info("No past-due orders to archive"),$(!1),V(!1)},xe=x.useMemo(()=>{const ce=new Date().toISOString().split("T")[0];return fe.filter(Le=>Le.scheduled_date<ce&&Le.status!=="completed"&&Le.status!=="in-progress"&&Le.status!=="archived").length},[fe]),Me=ce=>{navigator.clipboard.writeText(ce),Z.success("Copied booking ID")};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{}),s.jsxs(K,{onClick:()=>F(!0),className:"gap-2",children:[s.jsx(xo,{className:"w-4 h-4"}),"Create Order (Manual)"]})]}),s.jsx(R7e,{open:H,onOpenChange:F,onOrderCreated:()=>G()}),s.jsx(J,{className:"shadow-card border-primary/20",children:s.jsxs(Q,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Js,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(pe,{placeholder:"Search by Order ID (e.g., CDT-000001 or PSW-ABC123)...",value:o,onChange:ce=>l(ce.target.value.toUpperCase()),className:"pl-10 font-mono"})]}),h&&s.jsx("span",{className:"text-sm text-muted-foreground",children:"Searching..."})]}),c&&s.jsxs("div",{className:"mt-4 p-4 bg-primary/5 rounded-lg border border-primary/20",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("h4",{className:"font-semibold text-foreground flex items-center gap-2",children:[s.jsx(zt,{className:"w-4 h-4 text-primary"}),"Order Found: ",c.booking_code]}),s.jsx(K,{variant:"ghost",size:"sm",onClick:()=>l(""),children:"Clear"})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Client:"}),s.jsx("p",{className:"font-medium",children:c.client_name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Date:"}),s.jsx("p",{className:"font-medium",children:O1(c.scheduled_date)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Time:"}),s.jsxs("p",{className:"font-medium",children:[ty(c.start_time)," - ",ty(c.end_time)]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Status:"}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(mP,{status:c.status,pswAssigned:c.psw_assigned,paymentStatus:c.payment_status,size:"sm"}),H5(c.status,c.psw_assigned,c.payment_status),c.payment_status==="overtime_adjusted"&&s.jsx(W5,{overtimeMinutes:c.overtime_minutes,overtimePaymentIntentId:c.overtime_payment_intent_id,subtotal:c.subtotal,total:c.total})]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"PSW:"}),s.jsx("p",{className:"font-medium",children:c.psw_first_name||"Unassigned"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Total:"}),s.jsxs("p",{className:"font-medium",children:["$",c.total.toFixed(2)]})]}),s.jsx("div",{className:"col-span-2",children:c.care_sheet&&s.jsxs(K,{variant:"outline",size:"sm",onClick:()=>re(c),children:[s.jsx(zt,{className:"w-4 h-4 mr-1"}),"View Care Sheet"]})})]})]}),o.length>=3&&!h&&!c&&s.jsxs("p",{className:"mt-3 text-sm text-muted-foreground",children:['No order found with ID "',o,'"']})]})}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs(K,{variant:vxe(b)&&m==="daily"?"default":"outline",size:"sm",onClick:ae,className:"gap-2",children:[s.jsx(bk,{className:"w-4 h-4"}),"Today"]}),s.jsxs(KE,{open:j,onOpenChange:w,children:[s.jsx(YE,{asChild:!0,children:s.jsxs(K,{variant:"outline",size:"sm",className:"gap-2",children:[s.jsx(Lt,{className:"w-4 h-4"}),"Pick Date"]})}),s.jsx(Jw,{className:"w-auto p-0",align:"start",children:s.jsx(K0,{mode:"single",selected:b,onSelect:X,initialFocus:!0,className:Re("p-3 pointer-events-auto")})})]}),m==="daily"&&s.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[s.jsx(oe,{htmlFor:"view-mode",className:"text-sm text-muted-foreground",children:"View:"}),s.jsxs("div",{className:"flex items-center border rounded-md",children:[s.jsx(K,{variant:y==="list"?"secondary":"ghost",size:"sm",className:"rounded-r-none",onClick:()=>v("list"),children:s.jsx(pee,{className:"w-4 h-4"})}),s.jsx(K,{variant:y==="summary"?"secondary":"ghost",size:"sm",className:"rounded-l-none",onClick:()=>v("summary"),children:s.jsx(hee,{className:"w-4 h-4"})})]})]})]}),s.jsx(qi,{value:m,onValueChange:ce=>p(ce),children:s.jsxs(ii,{className:"grid w-full grid-cols-5",children:[s.jsx(ft,{value:"daily",children:"Daily"}),s.jsx(ft,{value:"weekly",children:"Weekly"}),s.jsx(ft,{value:"monthly",children:"Monthly"}),s.jsx(ft,{value:"yearly",children:"Yearly"}),s.jsxs(ft,{value:"archived",className:"gap-1",children:[s.jsx(ya,{className:"w-3 h-3"}),"Archived"]})]})}),m!=="archived"&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(K,{variant:"outline",size:"icon",onClick:()=>ie("prev"),children:s.jsx(wk,{className:"w-4 h-4"})}),s.jsx("h3",{className:"text-lg font-semibold",children:le()}),s.jsx(K,{variant:"outline",size:"icon",onClick:()=>ie("next"),children:s.jsx(Pc,{className:"w-4 h-4"})})]}),m==="archived"&&s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[s.jsx(ya,{className:"w-5 h-5 text-muted-foreground"}),le()," (",fe.length,")"]})}),m!=="archived"&&xe>0&&s.jsx(J,{className:"bg-amber-50/50 dark:bg-amber-950/20 border-amber-200 dark:border-amber-800",children:s.jsxs(Q,{className:"p-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Wr,{className:"w-5 h-5 text-amber-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-foreground",children:"Past-Due Orders Found"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[xe," order",xe>1?"s are":" is"," past scheduled date and not completed"]})]})]}),s.jsxs(K,{variant:"outline",size:"sm",onClick:()=>V(!0),className:"gap-2 border-amber-300 hover:bg-amber-100 dark:hover:bg-amber-900/30",children:[s.jsx(ya,{className:"w-4 h-4"}),"Archive Past Due"]})]})}),m==="daily"&&y==="summary"&&s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"p-4 text-center",children:[s.jsx("p",{className:"text-3xl font-bold text-foreground",children:ee.total}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Orders"})]})}),s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"p-4 text-center",children:[s.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:ee.pending}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Pending"})]})}),s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"p-4 text-center",children:[s.jsx("p",{className:"text-3xl font-bold text-blue-600",children:ee.confirmed}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Confirmed"})]})}),s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"p-4 text-center",children:[s.jsx("p",{className:"text-3xl font-bold text-purple-600",children:ee.inProgress}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"In Progress"})]})}),s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"p-4 text-center",children:[s.jsx("p",{className:"text-3xl font-bold text-green-600",children:ee.completed}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed"})]})}),s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"p-4 text-center",children:[s.jsxs("p",{className:"text-3xl font-bold text-primary",children:["$",ee.totalRevenue.toFixed(0)]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Revenue"})]})})]}),(m!=="daily"||y==="list")&&s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"p-4 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-foreground",children:ge.total}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Orders"})]})}),s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"p-4 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-green-600",children:ge.completed}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed"})]})}),s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"p-4 text-center",children:[s.jsxs("p",{className:"text-2xl font-bold text-primary",children:["$",ge.totalRevenue.toFixed(0)]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Revenue"})]})}),s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"p-4 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:ge.withCareSheet}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Care Sheets"})]})})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Js,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(pe,{placeholder:"Filter by client name, email, or PSW...",value:a,onChange:ce=>i(ce.target.value),className:"pl-10"})]}),(m!=="daily"||y==="list")&&s.jsxs(J,{className:"shadow-card",children:[s.jsxs(ke,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(Lt,{className:"w-5 h-5 text-primary"}),"Orders"]}),s.jsxs(Ge,{children:[fe.length," orders in selected period"]})]}),s.jsx(Q,{children:r?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):fe.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No orders found for this period"}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Sn,{children:[s.jsx(Cn,{children:s.jsxs(Mt,{children:[s.jsx(Pe,{children:"Order ID"}),s.jsx(Pe,{children:"Date"}),s.jsx(Pe,{children:"Time"}),s.jsx(Pe,{children:"Client"}),s.jsx(Pe,{children:"PSW"}),s.jsx(Pe,{children:"Status"}),s.jsx(Pe,{children:"Total"}),s.jsx(Pe,{className:"text-right",children:"Actions"})]})}),s.jsx(Pn,{children:fe.map(ce=>s.jsxs(Mt,{children:[s.jsx(be,{className:"font-mono text-sm",children:s.jsxs("div",{className:"flex items-center gap-2",children:[ce.booking_code,ce.status==="archived"&&s.jsx(ne,{variant:"outline",className:"text-xs text-muted-foreground",children:"Archived"}),ce.payment_status==="overtime_adjusted"&&s.jsx(W5,{overtimeMinutes:ce.overtime_minutes,overtimePaymentIntentId:ce.overtime_payment_intent_id,subtotal:ce.subtotal,total:ce.total})]})}),s.jsx(be,{children:O1(ce.scheduled_date)}),s.jsxs(be,{children:[ty(ce.start_time)," - ",ty(ce.end_time)]}),s.jsx(be,{children:ce.client_name}),s.jsx(be,{children:ce.psw_first_name||"-"}),s.jsx(be,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(mP,{status:ce.status,pswAssigned:ce.psw_assigned,paymentStatus:ce.payment_status,size:"sm"}),H5(ce.status,ce.psw_assigned,ce.payment_status)]})}),s.jsxs(be,{children:["$",ce.total.toFixed(2)]}),s.jsx(be,{className:"text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsxs(K,{variant:"ghost",size:"sm",onClick:()=>Me(ce.id),title:"Copy booking UUID for Stripe/manual ops",className:"gap-1 text-muted-foreground hover:text-foreground",children:[s.jsx(Qo,{className:"w-3 h-3"}),s.jsx("span",{className:"text-xs",children:"UUID"})]}),ce.care_sheet&&s.jsxs(K,{variant:"outline",size:"sm",onClick:()=>re(ce),children:[s.jsx(zt,{className:"w-4 h-4 mr-1"}),"View"]}),ce.status==="completed"&&s.jsxs(K,{variant:"outline",size:"sm",onClick:async()=>{await Nfe(ce.booking_code)?(Z.success(`Order ${ce.booking_code} archived to accounting`),G()):Z.error("Failed to archive to accounting")},disabled:U,className:"gap-1 text-primary hover:text-primary",children:[s.jsx(hs,{className:"w-4 h-4"}),"To Accounting"]}),ce.status==="archived"?s.jsxs(K,{variant:"outline",size:"sm",onClick:()=>je(ce),disabled:U,className:"gap-1 text-green-600 hover:text-green-700 hover:bg-green-50",children:[s.jsx(XQ,{className:"w-4 h-4"}),"Restore"]}):ce.status!=="in-progress"&&s.jsx(K,{variant:"ghost",size:"sm",onClick:()=>ue(ce),disabled:U,className:"gap-1 text-muted-foreground hover:text-foreground",children:s.jsx(ya,{className:"w-4 h-4"})})]})})]},ce.id))})]})})})]}),s.jsx(hr,{open:!!S,onOpenChange:()=>C(null),children:s.jsxs(or,{className:"sm:max-w-lg max-h-[80vh] overflow-y-auto",children:[s.jsx(lr,{children:s.jsxs(cr,{className:"flex items-center gap-2",children:[s.jsx(zt,{className:"w-5 h-5 text-primary"}),"Care Sheet Report"]})}),S&&P&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"p-3 bg-muted rounded-lg",children:s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Order ID:"}),s.jsx("p",{className:"font-medium text-foreground",children:P.booking_code})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Date:"}),s.jsx("p",{className:"font-medium text-foreground",children:O1(P.scheduled_date)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Client:"}),s.jsx("p",{className:"font-medium text-foreground",children:P.client_name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"PSW:"}),s.jsx("p",{className:"font-medium text-foreground",children:S.pswFirstName||P.care_sheet_psw_name})]})]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"font-medium text-foreground flex items-center gap-2",children:[s.jsx($t,{className:"w-4 h-4 text-primary"}),"Patient Status"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{className:"p-2 bg-muted rounded text-center",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Mood on Arrival"}),s.jsx("p",{className:"text-sm font-medium text-foreground",children:S.moodOnArrival})]}),s.jsxs("div",{className:"p-2 bg-muted rounded text-center",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Mood on Departure"}),s.jsx("p",{className:"text-sm font-medium text-foreground",children:S.moodOnDeparture})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-foreground",children:"Tasks Completed"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:($e=S.tasksCompleted)==null?void 0:$e.map((ce,Le)=>s.jsx(ne,{variant:"secondary",className:"text-xs",children:ce},Le))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-foreground",children:"Observations"}),s.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed p-3 bg-muted rounded-lg",children:S.observations||"No observations recorded."})]}),P.care_sheet_submitted_at&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Submitted: ",Ze(new Date(P.care_sheet_submitted_at),"MMM d, yyyy 'at' h:mm a")]})]})]})}),s.jsx(di,{open:O,onOpenChange:E,children:s.jsxs(Ia,{children:[s.jsxs(ks,{children:[s.jsxs(Ts,{className:"flex items-center gap-2",children:[s.jsx(ya,{className:"w-5 h-5 text-muted-foreground"}),"Archive Order"]}),s.jsxs(As,{children:["Are you sure you want to archive order ",s.jsx("strong",{children:D==null?void 0:D.booking_code}),"?",s.jsx("br",{}),s.jsx("br",{}),"The order will be removed from the Live Map and Active views but preserved in the Archived tab for record-keeping."]})]}),s.jsxs(Es,{children:[s.jsx(Ra,{disabled:U,children:"Cancel"}),s.jsxs(Os,{onClick:Ne,disabled:U,className:"gap-2",children:[s.jsx(ya,{className:"w-4 h-4"}),U?"Archiving...":"Archive"]})]})]})}),s.jsx(di,{open:A,onOpenChange:V,children:s.jsxs(Ia,{children:[s.jsxs(ks,{children:[s.jsxs(Ts,{className:"flex items-center gap-2",children:[s.jsx(Wr,{className:"w-5 h-5 text-amber-600"}),"Archive Past-Due Orders"]}),s.jsxs(As,{children:["This will archive all orders that:",s.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[s.jsx("li",{children:"Are scheduled before today"}),s.jsx("li",{children:"Are NOT completed or in-progress"})]}),s.jsx("br",{}),"These orders will be removed from the Live Map and Active views but preserved in the Archived tab."]})]}),s.jsxs(Es,{children:[s.jsx(Ra,{disabled:U,children:"Cancel"}),s.jsxs(Os,{onClick:Y,disabled:U,className:"gap-2 bg-amber-600 hover:bg-amber-700",children:[s.jsx(ya,{className:"w-4 h-4"}),U?"Archiving...":"Archive All Past Due"]})]})]})})]})},$7e=async e=>{const{data:t,error:r}=await de.from("refund_logs").insert({booking_id:e.booking_id,booking_code:e.booking_code,client_name:e.client_name,client_email:e.client_email,amount:e.amount,reason:e.reason,status:e.status,stripe_refund_id:e.stripe_refund_id,processed_at:e.processed_at,processed_by:e.processed_by,is_dry_run:e.is_dry_run}).select().single();return r?(console.error("Failed to add refund log:",r),null):t},L7e=()=>{const[e,t]=x.useState([]),[r,n]=x.useState(""),[a,i]=x.useState(!1),o=async()=>{i(!0);const{data:f,error:m}=await de.from("refund_logs").select("*").order("created_at",{ascending:!1}).limit(100);m?(console.error("Failed to load refund logs:",m),t([])):t(f||[]),i(!1)};x.useEffect(()=>{o()},[]);const l=e.filter(f=>{var p;const m=r.toLowerCase();return(((p=f.booking_code)==null?void 0:p.toLowerCase())||"").includes(m)||f.booking_id.toLowerCase().includes(m)||f.client_name.toLowerCase().includes(m)||f.client_email.toLowerCase().includes(m)}),c=f=>{if(f.is_dry_run||f.status==="dry-run")return s.jsxs(ne,{variant:"outline",className:"bg-purple-50 text-purple-700 border-purple-200",children:[s.jsx(At,{className:"w-3 h-3 mr-1"}),"Dry Run"]});switch(f.status){case"processed":return s.jsxs(ne,{className:"bg-green-100 text-green-700 border-green-200",children:[s.jsx(Kt,{className:"w-3 h-3 mr-1"}),"Processed"]});case"failed":return s.jsxs(ne,{variant:"destructive",children:[s.jsx(Xn,{className:"w-3 h-3 mr-1"}),"Failed"]});case"pending":return s.jsxs(ne,{variant:"secondary",children:[s.jsx(Nr,{className:"w-3 h-3 mr-1 animate-spin"}),"Pending"]});default:return s.jsx(ne,{variant:"outline",children:f.status})}},d=e.filter(f=>f.status==="processed"&&!f.is_dry_run).reduce((f,m)=>f+m.amount,0),h=e.filter(f=>f.is_dry_run||f.status==="dry-run").length;return s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(ms,{className:"w-5 h-5 text-primary"}),"Refund Logs"]}),s.jsx(Ge,{children:"Track all refund transactions (real and dry-run)"})]}),s.jsxs(K,{variant:"outline",size:"sm",onClick:o,disabled:a,children:[s.jsx(Nr,{className:`w-4 h-4 mr-2 ${a?"animate-spin":""}`}),"Refresh"]})]})}),s.jsxs(Q,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"p-4 bg-muted rounded-lg text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-foreground",children:e.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Refunds"})]}),s.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-950/20 rounded-lg text-center",children:[s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",d.toFixed(2)]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Refunded"})]}),s.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-950/20 rounded-lg text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:h}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Dry Run Tests"})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Js,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(pe,{placeholder:"Search by booking ID, client name, or email...",value:r,onChange:f=>n(f.target.value),className:"pl-10"})]}),s.jsx(Ps,{className:"h-[400px]",children:l.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(ms,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"No refund logs found"})]}):s.jsxs(Sn,{children:[s.jsx(Cn,{children:s.jsxs(Mt,{children:[s.jsx(Pe,{children:"Date"}),s.jsx(Pe,{children:"Booking"}),s.jsx(Pe,{children:"Client"}),s.jsx(Pe,{children:"Amount"}),s.jsx(Pe,{children:"Reason"}),s.jsx(Pe,{children:"Status"})]})}),s.jsx(Pn,{children:l.map(f=>s.jsxs(Mt,{children:[s.jsx(be,{className:"text-xs whitespace-nowrap",children:Ze(un(f.created_at),"MMM d, HH:mm")}),s.jsx(be,{className:"font-mono text-xs",children:f.booking_code||f.booking_id}),s.jsx(be,{children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:f.client_name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:f.client_email})]})}),s.jsxs(be,{className:"font-bold text-primary",children:["$",f.amount.toFixed(2)]}),s.jsx(be,{className:"text-sm max-w-[150px] truncate",children:f.reason||"-"}),s.jsx(be,{children:c(f)})]},f.id))})]})})]})]})},F7e=()=>{const[e,t]=x.useState(()=>So()?!0:localStorage.getItem("stripe_dry_run")!=="true"),[r,n]=x.useState(!0),a=So(),i=l=>{if(a){Z.error("Live mode cannot be disabled on production");return}t(l),localStorage.setItem("stripe_dry_run",(!l).toString()),l?Z.success("Live Mode ENABLED",{description:"Real charges will occur. Test cards will be REJECTED.",duration:5e3}):Z.info("Test Mode ENABLED",{description:"No real charges. Test cards (4242...) accepted.",duration:5e3})},o=async()=>{const l=await $7e({booking_id:`TEST-${Date.now().toString(36).toUpperCase()}`,booking_code:`TEST-${Date.now().toString(36).toUpperCase()}`,client_name:"Test Client",client_email:"test@example.com",amount:35,reason:"Test refund (test mode)",status:"test-mode",stripe_refund_id:`test-${Date.now()}`,processed_at:new Date().toISOString(),processed_by:"Admin",is_dry_run:!0});l?Z.success(`Test refund logged: ${l.id}`):Z.error("Failed to log test refund")};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(J,{className:"shadow-card",children:[s.jsxs(ke,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(ms,{className:"w-5 h-5 text-primary"}),"Stripe Integration"]}),s.jsx(Ge,{children:"Manage payment processing and refunds"})]}),s.jsxs(Q,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[r?s.jsx(Kt,{className:"w-5 h-5 text-green-600"}):s.jsx(At,{className:"w-5 h-5 text-amber-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-foreground",children:r?"Stripe Connected":"Stripe Not Connected"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:r?"Secret key configured in environment":"Add STRIPE_SECRET_KEY to connect"})]})]}),s.jsx(ne,{variant:r?"default":"secondary",className:r?"bg-green-600":"",children:r?"Active":"Inactive"})]}),s.jsx(J,{className:`border-2 ${e?"border-green-400 bg-green-50/50 dark:bg-green-950/20":"border-purple-400 bg-purple-50/50 dark:bg-purple-950/20"}`,children:s.jsxs(Q,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[e?s.jsx(RS,{className:"w-5 h-5 text-green-600"}):s.jsx(f_,{className:"w-5 h-5 text-purple-600"}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"font-medium text-foreground",children:"Payment Mode"}),e?s.jsx(ne,{variant:"outline",className:"bg-green-100 text-green-700 border-green-300",children:"LIVE"}):s.jsx(ne,{variant:"outline",className:"bg-purple-100 text-purple-700 border-purple-300",children:"TEST"}),a&&s.jsx(ne,{variant:"secondary",className:"text-xs",children:"Locked"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e?"Real charges occur. Test cards (4242...) will be REJECTED.":"Test mode - no real charges. Test cards accepted."})]})]}),s.jsx(mn,{checked:e,onCheckedChange:i,disabled:a})]}),!e&&!a&&s.jsx("div",{className:"mt-4 flex gap-2",children:s.jsxs(K,{variant:"outline",size:"sm",onClick:o,children:[s.jsx(f_,{className:"w-4 h-4 mr-2"}),"Test Refund"]})})]})}),e&&s.jsx("div",{className:"p-4 bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(qh,{className:"w-5 h-5 text-green-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-green-800 dark:text-green-200",children:"Live Mode Active"}),s.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"All payment operations will affect real customer accounts. Test card numbers (like 4242 4242 4242 4242) will be rejected."})]})]})}),!e&&s.jsx("div",{className:"p-4 bg-purple-50 dark:bg-purple-950/20 border border-purple-200 dark:border-purple-800 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(f_,{className:"w-5 h-5 text-purple-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-purple-800 dark:text-purple-200",children:"Test Mode Active"}),s.jsxs("p",{className:"text-sm text-purple-700 dark:text-purple-300",children:["No real charges will occur. Use test card: ",s.jsx("code",{className:"bg-purple-100 dark:bg-purple-900 px-1 rounded",children:"4242 4242 4242 4242"})]})]})]})})]})]}),s.jsx(L7e,{})]})};function B7e(){const[e,t]=x.useState(""),[r,n]=x.useState(!1),[a,i]=x.useState([]),[o,l]=x.useState([]),[c,d]=x.useState(!0),[h,f]=x.useState(null);x.useEffect(()=>{(async()=>{d(!0);const{data:{user:S}}=await de.auth.getUser();S&&f(S.id),await Promise.all([m(),p()]),d(!1)})()},[]);const m=async()=>{try{const{data:w,error:S}=await de.from("admin_invitations").select("*").order("created_at",{ascending:!1});if(S)throw S;i(w||[])}catch(w){console.error("Failed to fetch invitations:",w)}},p=async()=>{try{const{data:w,error:S}=await de.from("user_roles").select("user_id, created_at").eq("role","admin");if(S)throw S;const C=[];for(const P of w||[]){const{data:T}=await de.from("admin_invitations").select("email").eq("status","accepted").single();C.push({user_id:P.user_id,email:(T==null?void 0:T.email)||"admin@pswdirect.ca",created_at:P.created_at})}l(C)}catch(w){console.error("Failed to fetch admin users:",w)}},y=async w=>{if(w.preventDefault(),!e||!e.includes("@")){Z.error("Please enter a valid email address");return}n(!0);try{const{data:S,error:C}=await de.functions.invoke("invite-admin",{body:{email:e.toLowerCase().trim()}});if(C)throw C;if(!S.success)throw new Error(S.error||"Failed to send invitation");Z.success("Invitation sent successfully!"),t(""),await m(),S.setupUrl&&(console.log("Setup URL:",S.setupUrl),Z.info("Check console for setup URL (email not configured)"))}catch(S){const C=S instanceof Error?S.message:"Failed to send invitation";Z.error(C)}finally{n(!1)}},v=async w=>{try{const{error:S}=await de.from("admin_invitations").delete().eq("id",w);if(S)throw S;Z.success("Invitation deleted"),await m()}catch{Z.error("Failed to delete invitation")}},b=async w=>{try{await de.from("admin_invitations").delete().eq("id",w.id);const{data:S,error:C}=await de.functions.invoke("invite-admin",{body:{email:w.email}});if(C)throw C;Z.success("Invitation resent!"),await m()}catch{Z.error("Failed to resend invitation")}},N=async w=>{if(w===h){Z.error("You cannot revoke your own admin access");return}try{const{error:S}=await de.from("user_roles").delete().eq("user_id",w).eq("role","admin");if(S)throw S;Z.success("Admin access revoked"),await p()}catch{Z.error("Failed to revoke admin access")}},j=w=>{const S=new Date(w.expires_at)<new Date;return w.status==="accepted"?s.jsx(ne,{variant:"default",className:"bg-green-500",children:"Accepted"}):S||w.status==="expired"?s.jsx(ne,{variant:"destructive",children:"Expired"}):s.jsx(ne,{variant:"secondary",children:"Pending"})};return c?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(Ut,{className:"w-6 h-6 animate-spin text-primary"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(J,{children:[s.jsxs(ke,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(kk,{className:"w-5 h-5"}),"Invite New Admin"]}),s.jsx(Ge,{children:"Send an invitation to a new admin. They will receive an email to set up their password."})]}),s.jsx(Q,{children:s.jsxs("form",{onSubmit:y,className:"flex gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(oe,{htmlFor:"invite-email",className:"sr-only",children:"Email Address"}),s.jsx(pe,{id:"invite-email",type:"email",value:e,onChange:w=>t(w.target.value),placeholder:"Enter email address",required:!0})]}),s.jsx(K,{type:"submit",variant:"brand",disabled:r,children:r?s.jsx(Ut,{className:"w-4 h-4 animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(pw,{className:"w-4 h-4 mr-2"}),"Send Invite"]})})]})})]}),s.jsxs(J,{children:[s.jsx(ke,{children:s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(hn,{className:"w-5 h-5"}),"Pending Invitations"]})}),s.jsx(Q,{children:a.length===0?s.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No pending invitations"}):s.jsxs(Sn,{children:[s.jsx(Cn,{children:s.jsxs(Mt,{children:[s.jsx(Pe,{children:"Email"}),s.jsx(Pe,{children:"Status"}),s.jsx(Pe,{children:"Expires"}),s.jsx(Pe,{className:"text-right",children:"Actions"})]})}),s.jsx(Pn,{children:a.map(w=>{const S=new Date(w.expires_at)<new Date,C=w.status==="pending"&&!S;return s.jsxs(Mt,{children:[s.jsx(be,{className:"font-medium",children:w.email}),s.jsx(be,{children:j(w)}),s.jsx(be,{className:"text-muted-foreground",children:Ze(new Date(w.expires_at),"MMM d, yyyy")}),s.jsx(be,{className:"text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[C&&s.jsx(K,{variant:"ghost",size:"sm",onClick:()=>b(w),children:s.jsx(Nr,{className:"w-4 h-4"})}),(S||w.status==="expired")&&s.jsxs(K,{variant:"ghost",size:"sm",onClick:()=>b(w),children:[s.jsx(Nr,{className:"w-4 h-4 mr-1"}),"Resend"]}),s.jsxs(di,{children:[s.jsx(DI,{asChild:!0,children:s.jsx(K,{variant:"ghost",size:"sm",className:"text-destructive",children:s.jsx(yc,{className:"w-4 h-4"})})}),s.jsxs(Ia,{children:[s.jsxs(ks,{children:[s.jsx(Ts,{children:"Delete Invitation?"}),s.jsxs(As,{children:["This will remove the invitation for ",w.email,". They will no longer be able to use the invitation link."]})]}),s.jsxs(Es,{children:[s.jsx(Ra,{children:"Cancel"}),s.jsx(Os,{onClick:()=>v(w.id),className:"bg-destructive text-destructive-foreground",children:"Delete"})]})]})]})]})})]},w.id)})})]})})]}),s.jsxs(J,{children:[s.jsxs(ke,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(mr,{className:"w-5 h-5"}),"Active Administrators"]}),s.jsx(Ge,{children:"Users with admin access to this portal"})]}),s.jsx(Q,{children:o.length===0?s.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No administrators found"}):s.jsxs(Sn,{children:[s.jsx(Cn,{children:s.jsxs(Mt,{children:[s.jsx(Pe,{children:"Email"}),s.jsx(Pe,{children:"Added"}),s.jsx(Pe,{className:"text-right",children:"Actions"})]})}),s.jsx(Pn,{children:o.map(w=>s.jsxs(Mt,{children:[s.jsxs(be,{className:"font-medium",children:[w.email,w.user_id===h&&s.jsx(ne,{variant:"outline",className:"ml-2",children:"You"})]}),s.jsx(be,{className:"text-muted-foreground",children:Ze(new Date(w.created_at),"MMM d, yyyy")}),s.jsx(be,{className:"text-right",children:w.user_id!==h&&s.jsxs(di,{children:[s.jsx(DI,{asChild:!0,children:s.jsxs(K,{variant:"ghost",size:"sm",className:"text-destructive",children:[s.jsx(yc,{className:"w-4 h-4 mr-1"}),"Revoke"]})}),s.jsxs(Ia,{children:[s.jsxs(ks,{children:[s.jsx(Ts,{children:"Revoke Admin Access?"}),s.jsxs(As,{children:["This will remove admin access for ",w.email,". They will no longer be able to log in to the admin portal."]})]}),s.jsxs(Es,{children:[s.jsx(Ra,{children:"Cancel"}),s.jsx(Os,{onClick:()=>N(w.user_id),className:"bg-destructive text-destructive-foreground",children:"Revoke Access"})]})]})]})})]},w.user_id))})]})})]})]})}const z7e=$f("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Tf=x.forwardRef(({className:e,variant:t,...r},n)=>s.jsx("div",{ref:n,role:"alert",className:Re(z7e({variant:t}),e),...r}));Tf.displayName="Alert";const UA=x.forwardRef(({className:e,...t},r)=>s.jsx("h5",{ref:r,className:Re("mb-1 font-medium leading-none tracking-tight",e),...t}));UA.displayName="AlertTitle";const Af=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Re("text-sm [&_p]:leading-relaxed",e),...t}));Af.displayName="AlertDescription";const U7e=()=>{const[e,t]=x.useState(Yn()),[r,n]=x.useState(!1);x.useEffect(()=>{t(Yn())},[]);const a=d=>{t(h=>({...h,baseUrl:d})),n(!0)},i=d=>{t(h=>({...h,displayName:d})),n(!0)},o=()=>{if(!e.baseUrl.startsWith("https://")){Z.error("Base URL must start with https://");return}if(!e.displayName){Z.error("Display name is required");return}Ghe(e),n(!1),Z.success("Domain settings saved! All URLs will now use the new domain.")},l=()=>{Khe(),t(Yn()),n(!1),Z.success("Domain reset to default")},c={pswLogin:`${e.baseUrl}/psw-login`,clientPortal:`${e.baseUrl}/client-portal`,install:`${e.baseUrl}/install`};return s.jsx("div",{className:"space-y-6",children:s.jsxs(J,{children:[s.jsxs(ke,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(Oa,{className:"w-5 h-5 text-primary"}),"App Domain Settings"]}),s.jsx(Ge,{children:"Configure the domain used for all app URLs including QR codes, email links, and install prompts. Update this before migrating to a new domain."})]}),s.jsxs(Q,{className:"space-y-6",children:[s.jsxs(Tf,{children:[s.jsx(Wr,{className:"h-4 w-4"}),s.jsxs(Af,{children:[s.jsx("strong",{children:"Important:"})," When you switch domains, update these settings FIRST. All QR codes and links will immediately use the new domain."]})]}),s.jsxs("div",{className:"grid gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"baseUrl",children:"Base URL"}),s.jsx(pe,{id:"baseUrl",value:e.baseUrl,onChange:d=>a(d.target.value),placeholder:"https://pswdirect.ca"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Full URL including https:// (e.g., https://pswdirect.ca)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"displayName",children:"Display Name (for emails)"}),s.jsx(pe,{id:"displayName",value:e.displayName,onChange:d=>i(d.target.value),placeholder:"pswdirect.ca"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Shown in email footers and notifications (e.g., pswdirect.ca)"})]})]}),s.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-3",children:[s.jsx("h4",{className:"font-medium text-sm",children:"URL Preview"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-muted-foreground w-28",children:"PSW Login:"}),s.jsx("code",{className:"bg-background px-2 py-1 rounded text-xs flex-1 truncate",children:c.pswLogin}),s.jsx("a",{href:c.pswLogin,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:s.jsx(go,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-muted-foreground w-28",children:"Client Portal:"}),s.jsx("code",{className:"bg-background px-2 py-1 rounded text-xs flex-1 truncate",children:c.clientPortal}),s.jsx("a",{href:c.clientPortal,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:s.jsx(go,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-muted-foreground w-28",children:"Install App:"}),s.jsx("code",{className:"bg-background px-2 py-1 rounded text-xs flex-1 truncate",children:c.install}),s.jsx("a",{href:c.install,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:s.jsx(go,{className:"w-4 h-4"})})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:" PSW approval emails will include QR codes pointing to the PSW Login URL above."})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(K,{onClick:o,disabled:!r,className:"flex-1",children:[s.jsx(In,{className:"w-4 h-4 mr-2"}),"Save Domain Settings"]}),s.jsxs(K,{variant:"outline",onClick:l,children:[s.jsx(Qa,{className:"w-4 h-4 mr-2"}),"Reset to Default"]})]})]})]})})},W7e=({url:e,size:t=180,logoSize:r=40,className:n=""})=>s.jsx("div",{className:`bg-white p-3 rounded-lg shadow-sm inline-block ${n}`,children:s.jsx(DE,{value:e,size:t,level:"H",includeMargin:!0,bgColor:"#ffffff",fgColor:"#16a34a",imageSettings:{src:"/logo-192.png",height:r,width:r,excavate:!0}})}),ry=({icon:e,name:t,provider:r,status:n,description:a,action:i})=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-background",children:e}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"font-medium text-sm",children:t}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",r,")"]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:a})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ne,{variant:n==="not_configured"?"secondary":"default",className:n!=="not_configured"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"",children:[s.jsx(es,{className:"w-3 h-3 mr-1"}),n==="connected"?"Connected":n==="active"?"Active":"Not Configured"]}),i&&i.href&&s.jsx(K,{variant:"ghost",size:"sm",asChild:!0,children:s.jsx("a",{href:i.href,target:"_blank",rel:"noopener noreferrer",children:s.jsx(go,{className:"w-3 h-3"})})})]})]}),H7e=()=>{const e=Yn();return s.jsxs(J,{className:"shadow-card mb-6",children:[s.jsx(ke,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:s.jsx(Oa,{className:"w-5 h-5 text-primary"})}),s.jsxs("div",{children:[s.jsx(Ee,{className:"text-lg",children:"Infrastructure & Integrations"}),s.jsx(Ge,{children:"Backend services powering your application"})]})]})}),s.jsxs(Q,{className:"space-y-3",children:[s.jsx(ry,{icon:s.jsx(hn,{className:"w-4 h-4 text-primary"}),name:"Email Service",provider:Kc.email.provider,status:Kc.email.status,description:Kc.email.description}),s.jsx(ry,{icon:s.jsx(ms,{className:"w-4 h-4 text-primary"}),name:"Payments",provider:Kc.payments.provider,status:Kc.payments.status,description:Kc.payments.description}),s.jsx(ry,{icon:s.jsx(Hh,{className:"w-4 h-4 text-primary"}),name:"PWA",provider:Kc.pwa.provider,status:"active",description:`App ID: ${Td.appId.substring(0,8)}...`,action:{label:"Dashboard",href:Td.dashboardUrl}}),s.jsx(ry,{icon:s.jsx(Oa,{className:"w-4 h-4 text-primary"}),name:"Domain",provider:e.displayName,status:"active",description:e.baseUrl}),s.jsx("div",{className:"pt-2 mt-2 border-t border-border",children:s.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"API keys are securely stored as backend secrets and not exposed in the frontend"})})]})]})},V7e=()=>{const[e,t]=x.useState("clients"),[r,n]=x.useState(""),[a,i]=x.useState([]),[o,l]=x.useState([]),[c,d]=x.useState(!0),[h,f]=x.useState(null);x.useEffect(()=>{m()},[e]);const m=async()=>{if(d(!0),e==="clients"){const{data:w,error:S}=await de.from("client_profiles").select("id, user_id, email, full_name, first_name, phone").order("created_at",{ascending:!1});S?console.error("Error fetching clients:",S):i(w||[])}else{const{data:w,error:S}=await de.from("psw_profiles").select("id, email, first_name, last_name, vetting_status, home_city").order("created_at",{ascending:!1});S?console.error("Error fetching PSWs:",S):l(w||[])}d(!1)},p=(w,S)=>`${Zhe()}/verify/${w==="clients"?"client":"psw"}/${S}`,y=a.filter(w=>{var S,C;return(((S=w.full_name)==null?void 0:S.toLowerCase())||"").includes(r.toLowerCase())||(((C=w.first_name)==null?void 0:C.toLowerCase())||"").includes(r.toLowerCase())||w.email.toLowerCase().includes(r.toLowerCase())}),v=o.filter(w=>w.first_name.toLowerCase().includes(r.toLowerCase())||w.last_name.toLowerCase().includes(r.toLowerCase())||w.email.toLowerCase().includes(r.toLowerCase())),b=(w,S,C)=>{f({url:w,name:S,type:C})},N=w=>{navigator.clipboard.writeText(w),Z.success("URL copied to clipboard")},j=w=>{switch(w){case"approved":return s.jsx(ne,{className:"bg-green-100 text-green-700",children:"Approved"});case"pending":return s.jsx(ne,{className:"bg-amber-100 text-amber-700",children:"Pending"});case"rejected":return s.jsx(ne,{className:"bg-red-100 text-red-700",children:"Rejected"});default:return s.jsx(ne,{variant:"secondary",children:w||"Unknown"})}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx(H7e,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-semibold text-foreground flex items-center gap-2",children:[s.jsx(Qm,{className:"w-5 h-5 text-primary"}),"QR Code Management"]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Generate and manage verification QR codes for clients and caregivers"})]}),s.jsxs(K,{variant:"outline",size:"sm",onClick:m,children:[s.jsx(Nr,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),s.jsxs(qi,{value:e,onValueChange:w=>t(w),children:[s.jsxs(ii,{className:"grid w-full grid-cols-2",children:[s.jsxs(ft,{value:"clients",className:"flex items-center gap-2",children:[s.jsx(jee,{className:"w-4 h-4"}),"Clients (",a.length,")"]}),s.jsxs(ft,{value:"psws",className:"flex items-center gap-2",children:[s.jsx(pn,{className:"w-4 h-4"}),"Caregivers (",o.length,")"]})]}),s.jsxs("div",{className:"relative my-4",children:[s.jsx(Js,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(pe,{placeholder:`Search ${e}...`,value:r,onChange:w=>n(w.target.value),className:"pl-10"})]}),s.jsx(Ct,{value:"clients",children:s.jsxs(J,{className:"shadow-card",children:[s.jsxs(ke,{children:[s.jsx(Ee,{children:"Client QR Codes"}),s.jsx(Ge,{children:"Each QR code points to a dynamic verification URL that reflects live profile data"})]}),s.jsx(Q,{children:c?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):y.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No clients found"}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Sn,{children:[s.jsx(Cn,{children:s.jsxs(Mt,{children:[s.jsx(Pe,{children:"Name"}),s.jsx(Pe,{children:"Email"}),s.jsx(Pe,{children:"Phone"}),s.jsx(Pe,{className:"text-right",children:"Actions"})]})}),s.jsx(Pn,{children:y.map(w=>{const S=w.full_name||w.first_name||"Client",C=p("clients",w.id);return s.jsxs(Mt,{children:[s.jsx(be,{className:"font-medium",children:S}),s.jsx(be,{children:w.email}),s.jsx(be,{children:w.phone||"-"}),s.jsx(be,{className:"text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsxs(K,{variant:"outline",size:"sm",onClick:()=>b(C,S,"clients"),children:[s.jsx(Qm,{className:"w-4 h-4 mr-1"}),"QR"]}),s.jsx(K,{variant:"ghost",size:"sm",onClick:()=>N(C),children:s.jsx(Qo,{className:"w-4 h-4"})})]})})]},w.id)})})]})})})]})}),s.jsx(Ct,{value:"psws",children:s.jsxs(J,{className:"shadow-card",children:[s.jsxs(ke,{children:[s.jsx(Ee,{children:"Caregiver QR Codes"}),s.jsx(Ge,{children:"QR codes for caregiver verification - updates instantly when profile changes"})]}),s.jsx(Q,{children:c?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):v.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No caregivers found"}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Sn,{children:[s.jsx(Cn,{children:s.jsxs(Mt,{children:[s.jsx(Pe,{children:"Name"}),s.jsx(Pe,{children:"Email"}),s.jsx(Pe,{children:"City"}),s.jsx(Pe,{children:"Status"}),s.jsx(Pe,{className:"text-right",children:"Actions"})]})}),s.jsx(Pn,{children:v.map(w=>{const S=`${w.first_name} ${w.last_name}`,C=p("psws",w.id);return s.jsxs(Mt,{children:[s.jsx(be,{className:"font-medium",children:S}),s.jsx(be,{children:w.email}),s.jsx(be,{children:w.home_city||"-"}),s.jsx(be,{children:j(w.vetting_status)}),s.jsx(be,{className:"text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsxs(K,{variant:"outline",size:"sm",onClick:()=>b(C,S,"psws"),children:[s.jsx(Qm,{className:"w-4 h-4 mr-1"}),"QR"]}),s.jsx(K,{variant:"ghost",size:"sm",onClick:()=>N(C),children:s.jsx(Qo,{className:"w-4 h-4"})})]})})]},w.id)})})]})})})]})})]}),s.jsx(hr,{open:!!h,onOpenChange:()=>f(null),children:s.jsxs(or,{className:"sm:max-w-md",children:[s.jsx(lr,{children:s.jsxs(cr,{className:"flex items-center gap-2",children:[s.jsx(Qm,{className:"w-5 h-5 text-primary"}),(h==null?void 0:h.type)==="clients"?"Client":"Caregiver"," QR Code"]})}),h&&s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:["QR Code for ",s.jsx("strong",{children:h.name})]}),s.jsx(W7e,{url:h.url,size:200,logoSize:50}),s.jsxs("div",{className:"w-full p-3 bg-muted rounded-lg",children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Verification URL"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("code",{className:"text-xs break-all flex-1",children:h.url}),s.jsx(K,{variant:"ghost",size:"sm",onClick:()=>N(h.url),children:s.jsx(Qo,{className:"w-4 h-4"})})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"This QR code points to a dynamic URL. Profile updates are reflected instantly without regenerating the code."}),s.jsxs(K,{variant:"outline",className:"w-full",onClick:()=>window.open(h.url,"_blank"),children:[s.jsx(go,{className:"w-4 h-4 mr-2"}),"Open Verification Page"]})]})]})})]})},q7e=({open:e,onClose:t,dateRange:r,summary:n,ledgerEntries:a,selectedPeriod:i})=>{const o=x.useRef(null),l=()=>{const h=o.current;if(!h)return;const f=window.open("","_blank");f&&(f.document.write(`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Financial Report - PSADIRECT.CA</title>
        <style>
          @page { margin: 0.75in; size: letter; }
          * { margin: 0; padding: 0; box-sizing: border-box; }
          body { 
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, Roboto, sans-serif;
            padding: 0;
            color: #1a1a1a;
            font-size: 11px;
            line-height: 1.4;
            background: white;
          }
          .report-container { max-width: 100%; }
          .header { 
            display: flex; 
            justify-content: space-between; 
            align-items: flex-start;
            border-bottom: 4px solid #1e40af;
            padding-bottom: 24px;
            margin-bottom: 24px;
          }
          .header-left { display: flex; align-items: center; gap: 16px; }
          .logo { height: 56px; }
          .company-name { 
            font-size: 28px; 
            font-weight: 800; 
            color: #1e40af;
            letter-spacing: -0.5px;
          }
          .company-tagline {
            font-size: 11px;
            color: #64748b;
            margin-top: 2px;
          }
          .header-right { text-align: right; }
          .report-title { 
            font-size: 18px; 
            font-weight: 700; 
            color: #1e293b;
          }
          .report-period { 
            font-size: 13px; 
            color: #1e40af; 
            font-weight: 600;
            margin-top: 4px; 
          }
          .report-date { font-size: 10px; color: #94a3b8; margin-top: 4px; }
          
          .summary-section { margin-bottom: 28px; }
          .section-title { 
            font-size: 13px; 
            font-weight: 700; 
            color: #1e293b;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
            padding-bottom: 6px;
            border-bottom: 2px solid #e2e8f0;
          }
          
          .summary-grid { 
            display: grid; 
            grid-template-columns: repeat(4, 1fr); 
            gap: 12px; 
          }
          .summary-card { 
            border: 1px solid #e2e8f0; 
            padding: 14px; 
            border-radius: 8px;
            background: #f8fafc;
          }
          .summary-card.primary { 
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%); 
            border: none;
            color: white;
          }
          .summary-card.primary .summary-label { color: rgba(255,255,255,0.8); }
          .summary-card.primary .summary-value { color: white; }
          .summary-card.success { 
            background: linear-gradient(135deg, #059669 0%, #10b981 100%); 
            border: none;
            color: white;
          }
          .summary-card.success .summary-label { color: rgba(255,255,255,0.8); }
          .summary-card.success .summary-value { color: white; }
          .summary-label { 
            font-size: 9px; 
            color: #64748b; 
            text-transform: uppercase; 
            font-weight: 600;
            letter-spacing: 0.3px;
          }
          .summary-value { 
            font-size: 22px; 
            font-weight: 800; 
            margin-top: 4px;
            color: #1e293b;
          }
          .summary-note { font-size: 9px; color: #94a3b8; margin-top: 2px; }
          
          .ledger-section { margin-top: 20px; }
          table { 
            width: 100%; 
            border-collapse: collapse;
            font-size: 10px;
          }
          th { 
            background: #1e293b; 
            color: white;
            padding: 10px 8px; 
            text-align: left; 
            font-weight: 600;
            font-size: 9px;
            text-transform: uppercase;
            letter-spacing: 0.3px;
          }
          th:first-child { border-radius: 6px 0 0 0; }
          th:last-child { border-radius: 0 6px 0 0; }
          td { 
            padding: 10px 8px; 
            border-bottom: 1px solid #e2e8f0;
          }
          tr:nth-child(even) { background: #f8fafc; }
          tr.refunded { background: #fef2f2; }
          tr:hover { background: #f1f5f9; }
          
          .badge { 
            display: inline-block; 
            padding: 3px 10px; 
            border-radius: 12px; 
            font-size: 9px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.3px;
          }
          .badge-completed { background: #dcfce7; color: #166534; }
          .badge-refunded { background: #fee2e2; color: #991b1b; }
          .badge-pending { background: #f3f4f6; color: #4b5563; }
          
          .text-right { text-align: right; }
          .text-green { color: #059669; }
          .text-blue { color: #2563eb; }
          .text-amber { color: #d97706; }
          .text-red { color: #dc2626; }
          .font-mono { font-family: 'SF Mono', 'Consolas', monospace; font-size: 9px; }
          
          .tax-notes {
            margin-top: 24px;
            padding: 16px;
            background: #fffbeb;
            border: 1px solid #fcd34d;
            border-radius: 8px;
          }
          .tax-notes-title {
            font-weight: 700;
            font-size: 11px;
            color: #92400e;
            margin-bottom: 8px;
          }
          .tax-notes p {
            font-size: 10px;
            color: #78350f;
            margin: 4px 0;
          }
          
          .footer { 
            margin-top: 32px; 
            padding-top: 16px; 
            border-top: 2px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
          }
          .footer-left { font-size: 10px; color: #64748b; }
          .footer-right { 
            font-size: 9px; 
            color: #94a3b8; 
            font-family: 'SF Mono', 'Consolas', monospace;
          }
          
          @media print {
            body { padding: 0; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
            .no-print { display: none !important; }
            .summary-card.primary, .summary-card.success { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
          }
        </style>
      </head>
      <body>
        <div class="report-container">
          ${h.innerHTML}
        </div>
      </body>
      </html>
    `),f.document.close(),f.focus(),setTimeout(()=>{f.print(),f.close()},250))},c=new Date().toISOString(),d=`RPT-${Ze(new Date,"yyyyMMdd-HHmmss")}`;return s.jsx(hr,{open:e,onOpenChange:t,children:s.jsxs(or,{className:"max-w-5xl max-h-[90vh] overflow-auto",children:[s.jsxs(lr,{className:"flex flex-row items-center justify-between",children:[s.jsxs(cr,{className:"flex items-center gap-2",children:[s.jsx(zt,{className:"w-5 h-5 text-primary"}),"Financial Report Preview"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(K,{variant:"brand",size:"sm",onClick:l,children:[s.jsx(m0,{className:"w-4 h-4 mr-2"}),"Print / Save PDF"]}),s.jsx(K,{variant:"ghost",size:"icon",onClick:t,children:s.jsx(Hr,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{ref:o,className:"bg-white p-8 text-foreground",children:[s.jsxs("div",{className:"header",children:[s.jsxs("div",{className:"header-left",children:[s.jsx("img",{src:Rr,alt:"PSA Direct Logo",className:"logo",style:{height:"56px"}}),s.jsxs("div",{children:[s.jsx("div",{className:"company-name",children:"PSADIRECT.CA"}),s.jsx("div",{className:"company-tagline",children:"Personal Support Assistant Services"})]})]}),s.jsxs("div",{className:"header-right",children:[s.jsx("div",{className:"report-title",children:"Financial Summary Report"}),s.jsx("div",{className:"report-period",children:i||`${Ze(r.start,"MMMM d, yyyy")}  ${Ze(r.end,"MMMM d, yyyy")}`}),s.jsxs("div",{className:"report-date",children:["Generated: ",Ze(un(c),"MMMM d, yyyy 'at' h:mm a")]})]})]}),s.jsxs("div",{className:"summary-section",children:[s.jsx("div",{className:"section-title",children:"Financial Overview"}),s.jsxs("div",{className:"summary-grid",children:[s.jsxs("div",{className:"summary-card",children:[s.jsx("div",{className:"summary-label",children:"Gross Revenue"}),s.jsxs("div",{className:"summary-value",children:["$",n.grossRevenue.toFixed(2)]}),s.jsxs("div",{className:"summary-note",children:[n.totalBookings," orders"]})]}),s.jsxs("div",{className:"summary-card",children:[s.jsx("div",{className:"summary-label",children:"Total Refunds"}),s.jsxs("div",{className:"summary-value",style:{color:"#dc2626"},children:["-$",n.totalRefunds.toFixed(2)]}),s.jsxs("div",{className:"summary-note",children:[n.refundedCount," refunded"]})]}),s.jsxs("div",{className:"summary-card success",children:[s.jsx("div",{className:"summary-label",children:"Net Revenue"}),s.jsxs("div",{className:"summary-value",children:["$",n.netRevenue.toFixed(2)]}),s.jsx("div",{className:"summary-note",children:"After refunds"})]}),s.jsxs("div",{className:"summary-card",children:[s.jsx("div",{className:"summary-label",children:"HST Collected"}),s.jsxs("div",{className:"summary-value",style:{color:"#d97706"},children:["$",n.netTaxCollected.toFixed(2)]}),s.jsx("div",{className:"summary-note",children:"13% Ontario HST"})]})]})]}),s.jsx("div",{className:"summary-section",children:s.jsxs("div",{className:"summary-grid",children:[s.jsxs("div",{className:"summary-card",children:[s.jsx("div",{className:"summary-label",children:"PSA Payouts"}),s.jsxs("div",{className:"summary-value",style:{color:"#2563eb"},children:["$",n.totalPayouts.toFixed(2)]}),s.jsx("div",{className:"summary-note",children:"Staff compensation"})]}),s.jsxs("div",{className:"summary-card primary",children:[s.jsx("div",{className:"summary-label",children:"Platform Profit"}),s.jsxs("div",{className:"summary-value",children:["$",n.platformProfit.toFixed(2)]}),s.jsx("div",{className:"summary-note",children:"Net after all costs"})]}),s.jsxs("div",{className:"summary-card",children:[s.jsx("div",{className:"summary-label",children:"Avg Order Value"}),s.jsxs("div",{className:"summary-value",children:["$",n.totalBookings>0?(n.netRevenue/n.totalBookings).toFixed(2):"0.00"]})]}),s.jsxs("div",{className:"summary-card",children:[s.jsx("div",{className:"summary-label",children:"Total Orders"}),s.jsx("div",{className:"summary-value",children:n.totalBookings}),s.jsx("div",{className:"summary-note",children:"Completed orders"})]})]})}),s.jsxs("div",{className:"ledger-section",children:[s.jsx("div",{className:"section-title",children:"Transaction Ledger"}),s.jsxs("table",{children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Date"}),s.jsx("th",{children:"Order ID"}),s.jsx("th",{children:"Customer"}),s.jsx("th",{children:"PSA"}),s.jsx("th",{className:"text-right",children:"Gross"}),s.jsx("th",{className:"text-right",children:"HST"}),s.jsx("th",{className:"text-right",children:"PSA Payout"}),s.jsx("th",{className:"text-right",children:"Platform"}),s.jsx("th",{children:"Status"})]})}),s.jsx("tbody",{children:a.slice(0,50).map(h=>s.jsxs("tr",{className:h.status==="refunded"?"refunded":"",children:[s.jsx("td",{children:Ze(un(h.date),"MMM d, yyyy")}),s.jsx("td",{className:"font-mono",children:h.bookingCode}),s.jsx("td",{children:h.customerName}),s.jsx("td",{children:h.pswName}),s.jsxs("td",{className:"text-right",children:["$",h.grossAmount.toFixed(2)]}),s.jsxs("td",{className:"text-right text-amber",children:["$",h.taxAmount.toFixed(2)]}),s.jsxs("td",{className:"text-right text-blue",children:["$",h.pswPayout.toFixed(2)]}),s.jsxs("td",{className:"text-right text-green",children:["$",h.platformFee.toFixed(2)]}),s.jsxs("td",{children:[s.jsx("span",{className:`badge badge-${h.status}`,children:h.status.charAt(0).toUpperCase()+h.status.slice(1)}),h.status==="refunded"&&h.refundAmount&&s.jsxs("span",{style:{fontSize:"9px",color:"#dc2626",marginLeft:"4px"},children:["-$",h.refundAmount.toFixed(2)]})]})]},h.id))})]}),a.length>50&&s.jsxs("p",{style:{fontSize:"10px",color:"#64748b",marginTop:"12px",textAlign:"center"},children:["Showing 50 of ",a.length," transactions. Export CSV for complete data."]})]}),s.jsxs("div",{className:"tax-notes",children:[s.jsx("div",{className:"tax-notes-title",children:"Tax & Compliance Notes"}),s.jsx("p",{children:" HST (Harmonized Sales Tax) at 13% is included in all transaction totals and remitted to CRA."}),s.jsx("p",{children:" All PSA payouts are reported as contractor payments and subject to T4A reporting."}),n.refundedTax>0&&s.jsxs("p",{children:[" Refunded HST: $",n.refundedTax.toFixed(2)," has been deducted from tax remittance totals."]}),s.jsx("p",{children:" Stripe payment references are retained for 5+ years for audit compliance."})]}),s.jsxs("div",{className:"footer",children:[s.jsxs("div",{className:"footer-left",children:[s.jsx("p",{style:{fontWeight:600},children:"PSADIRECT.CA"}),s.jsx("p",{children:"For accounting inquiries: accounting@psadirect.ca"})]}),s.jsxs("div",{className:"footer-right",children:[s.jsxs("p",{children:["Report ID: ",d]}),s.jsx("p",{children:"This is an official financial document"})]})]})]})]})})},ny=.13,G7e=.2,M1=["January","February","March","April","May","June","July","August","September","October","November","December"],K7e=()=>{const[e,t]=x.useState([]),[r,n]=x.useState([]),[a,i]=x.useState(!1),[o,l]=x.useState("this-month"),[c,d]=x.useState(""),[h,f]=x.useState(""),[m,p]=x.useState("summary"),[y,v]=x.useState("all"),[b,N]=x.useState(!1),j=x.useMemo(()=>{const A=new Date;switch(o){case"today":return{start:ml(A),end:nj(A)};case"this-week":return{start:ra(A,{weekStartsOn:1}),end:Kd(A,{weekStartsOn:1})};case"this-month":return{start:nn(A),end:Bi(A)};case"this-year":return{start:nf(A),end:xg(A)};case"all-time":return{start:new Date(2020,0,1),end:xg(A)};case"custom":return{start:c?un(c):nn(A),end:h?un(h):Bi(A)};default:return{start:nn(A),end:Bi(A)}}},[o,c,h]),w=async()=>{i(!0);try{const{data:A,error:V}=await de.from("bookings").select("*").or("status.eq.completed,was_refunded.eq.true").order("scheduled_date",{ascending:!1});if(V)throw V;t(A||[]);const{data:U,error:$}=await de.from("payroll_entries").select("*").order("scheduled_date",{ascending:!1});if($)throw $;n(U||[])}catch(A){console.error("Failed to load accounting data:",A),Z.error("Failed to load accounting data")}finally{i(!1)}};x.useEffect(()=>{w()},[]);const S=x.useMemo(()=>e.filter(A=>{const V=un(A.scheduled_date);return II(V,{start:j.start,end:j.end})}),[e,j]),C=x.useMemo(()=>r.filter(A=>{const V=un(A.scheduled_date);return II(V,{start:j.start,end:j.end})}),[r,j]),P=x.useMemo(()=>{const A=S.filter(X=>X.payment_status==="paid"||X.payment_status==="completed"||X.status==="completed"),V=A.reduce((X,le)=>X+le.total,0),U=A.filter(X=>X.was_refunded),$=U.reduce((X,le)=>X+(le.refund_amount||le.total),0),H=V-$,F=A.reduce((X,le)=>{const fe=le.total-le.total/(1+ny);return X+fe},0),R=U.reduce((X,le)=>{const fe=le.refund_amount||le.total,ge=fe-fe/(1+ny);return X+ge},0),z=F-R,G=C.reduce((X,le)=>X+le.total_owed,0),ae=H/(1+ny)-G;return{grossRevenue:V,totalRefunds:$,netRevenue:H,taxCollected:F,refundedTax:R,netTaxCollected:z,totalPayouts:G,platformProfit:ae,totalBookings:A.length,refundedCount:U.length}},[S,C]),T=x.useMemo(()=>S.filter(A=>A.payment_status==="paid"||A.payment_status==="completed"||A.was_refunded||A.status==="completed").map(A=>{const V=A.total,U=V-V/(1+ny),$=V-U,H=C.find(ae=>{var X,le,fe;return ae.scheduled_date===A.scheduled_date&&(((le=ae.psw_name)==null?void 0:le.toLowerCase().includes(((X=A.psw_first_name)==null?void 0:X.toLowerCase())||""))||((fe=ae.shift_id)==null?void 0:fe.includes(A.booking_code)))}),F=(H==null?void 0:H.total_owed)||$*(1-G7e),R=$-F;let z="completed";A.was_refunded?z="refunded":A.status==="pending"&&(z="pending");const G=un(A.scheduled_date),ie=`${M1[hxe(G)]} ${gxe(G)}`;return{id:A.id,date:A.scheduled_date,bookingCode:A.booking_code,customerName:A.client_name,pswName:A.psw_first_name||"Unassigned",grossAmount:V,taxAmount:U,pswPayout:F,platformFee:R,status:z,refundAmount:A.refund_amount||void 0,stripePaymentIntentId:A.stripe_payment_intent_id||void 0,monthYear:ie}}).sort((A,V)=>new Date(V.date).getTime()-new Date(A.date).getTime()),[S,C]),O=x.useMemo(()=>[...new Set(T.map(V=>V.monthYear))].sort((V,U)=>{const[$,H]=V.split(" "),[F,R]=U.split(" "),z=new Date(parseInt(H),M1.indexOf($));return new Date(parseInt(R),M1.indexOf(F)).getTime()-z.getTime()}),[T]),E=x.useMemo(()=>y==="all"?T:T.filter(A=>A.monthYear===y),[T,y]),D=()=>{const A=["Date","Booking Code","Customer","PSW","Gross","Tax (HST)","PSW Payout","Platform Fee","Status","Stripe Ref"],V=E.map(R=>[Ze(un(R.date),"yyyy-MM-dd"),R.bookingCode,R.customerName,R.pswName,R.grossAmount.toFixed(2),R.taxAmount.toFixed(2),R.pswPayout.toFixed(2),R.platformFee.toFixed(2),R.status,R.stripePaymentIntentId||"-"]),U=[A,...V].map(R=>R.join(",")).join(`
`),$=new Blob([U],{type:"text/csv"}),H=URL.createObjectURL($),F=document.createElement("a");F.href=H,F.download=`accounting-vault-${Ze(new Date,"yyyy-MM-dd")}.csv`,F.click(),URL.revokeObjectURL(H),Z.success("Accounting data exported!")},I=A=>{switch(A){case"completed":return s.jsx(ne,{className:"bg-green-100 text-green-700 border-green-200",children:"Completed"});case"refunded":return s.jsx(ne,{variant:"destructive",children:"Refunded"});case"pending":return s.jsx(ne,{variant:"secondary",children:"Pending"})}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-foreground flex items-center gap-2",children:[s.jsx(ya,{className:"w-6 h-6 text-primary"}),"Accounting Vault"]}),s.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:"Permanent financial records  5-year retention  Tax-ready reporting"})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsxs(K,{variant:"outline",size:"sm",onClick:w,disabled:a,children:[s.jsx(Nr,{className:`w-4 h-4 mr-2 ${a?"animate-spin":""}`}),"Refresh"]}),s.jsxs(K,{variant:"outline",size:"sm",onClick:D,children:[s.jsx(nu,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),s.jsxs(K,{variant:"brand",size:"sm",onClick:()=>N(!0),children:[s.jsx(zt,{className:"w-4 h-4 mr-2"}),"Generate Report"]})]})]}),s.jsx(qi,{value:m,onValueChange:A=>p(A),children:s.jsxs(ii,{className:"grid w-full max-w-md grid-cols-2",children:[s.jsxs(ft,{value:"summary",className:"gap-2",children:[s.jsx(MS,{className:"w-4 h-4"}),"Financial Summary"]}),s.jsxs(ft,{value:"ledger",className:"gap-2",children:[s.jsx(IS,{className:"w-4 h-4"}),"Transaction Ledger"]})]})}),s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{className:"pb-3",children:s.jsxs(Ee,{className:"text-sm flex items-center gap-2",children:[s.jsx(Lt,{className:"w-4 h-4 text-primary"}),"Tax Period Filter"]})}),s.jsx(Q,{children:s.jsxs("div",{className:"flex flex-wrap items-end gap-4",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(oe,{className:"text-xs",children:"Date Range"}),s.jsxs(Xt,{value:o,onValueChange:A=>l(A),children:[s.jsx(qt,{className:"w-[140px]",children:s.jsx(Jt,{})}),s.jsxs(Gt,{children:[s.jsx(_e,{value:"today",children:"Today"}),s.jsx(_e,{value:"this-week",children:"This Week"}),s.jsx(_e,{value:"this-month",children:"This Month"}),s.jsx(_e,{value:"this-year",children:"This Year"}),s.jsx(_e,{value:"all-time",children:"All Time"}),s.jsx(_e,{value:"custom",children:"Custom Range"})]})]})]}),o==="custom"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(oe,{className:"text-xs",children:"Start Date"}),s.jsx(pe,{type:"date",value:c,onChange:A=>d(A.target.value),className:"w-[160px]"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(oe,{className:"text-xs",children:"End Date"}),s.jsx(pe,{type:"date",value:h,onChange:A=>f(A.target.value),className:"w-[160px]"})]})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs(oe,{className:"text-xs flex items-center gap-1",children:[s.jsx(cee,{className:"w-3 h-3"}),"Tax Period"]}),s.jsxs(Xt,{value:y,onValueChange:v,children:[s.jsx(qt,{className:"w-[180px]",children:s.jsx(Jt,{placeholder:"Select period..."})}),s.jsxs(Gt,{children:[s.jsx(_e,{value:"all",children:"All Periods"}),O.map(A=>s.jsx(_e,{value:A,children:A},A))]})]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[s.jsx(mw,{className:"w-3 h-3"}),Ze(j.start,"MMM d, yyyy"),"  ",Ze(j.end,"MMM d, yyyy")]})]})})]}),s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(J,{className:"shadow-card bg-gradient-to-br from-green-50 to-green-100/50 dark:from-green-950/20 dark:to-green-900/10 border-green-200 dark:border-green-800",children:s.jsxs(Q,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400 mb-1",children:[s.jsx(hs,{className:"w-4 h-4"}),s.jsx("span",{className:"text-xs font-medium",children:"Total Revenue"})]}),s.jsxs("p",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:["$",P.netRevenue.toFixed(2)]}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Gross: $",P.grossRevenue.toFixed(2),P.totalRefunds>0&&s.jsxs("span",{className:"text-red-500",children:[" (-$",P.totalRefunds.toFixed(2),")"]})]})]})}),s.jsx(J,{className:"shadow-card bg-gradient-to-br from-blue-50 to-blue-100/50 dark:from-blue-950/20 dark:to-blue-900/10 border-blue-200 dark:border-blue-800",children:s.jsxs(Q,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400 mb-1",children:[s.jsx(IS,{className:"w-4 h-4"}),s.jsx("span",{className:"text-xs font-medium",children:"Total PSA Payouts"})]}),s.jsxs("p",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:["$",P.totalPayouts.toFixed(2)]}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[C.length," payroll entries"]})]})}),s.jsx(J,{className:"shadow-card bg-gradient-to-br from-amber-50 to-amber-100/50 dark:from-amber-950/20 dark:to-amber-900/10 border-amber-200 dark:border-amber-800",children:s.jsxs(Q,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-amber-600 dark:text-amber-400 mb-1",children:[s.jsx(MS,{className:"w-4 h-4"}),s.jsx("span",{className:"text-xs font-medium",children:"HST Collected"})]}),s.jsxs("p",{className:"text-2xl font-bold text-amber-700 dark:text-amber-300",children:["$",P.netTaxCollected.toFixed(2)]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:P.refundedTax>0&&s.jsxs("span",{children:["Refunded: -$",P.refundedTax.toFixed(2)]})})]})}),s.jsx(J,{className:"shadow-card bg-gradient-to-br from-primary/10 to-primary/5 border-primary/30",children:s.jsxs(Q,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-primary mb-1",children:[s.jsx(cx,{className:"w-4 h-4"}),s.jsx("span",{className:"text-xs font-medium",children:"Net Platform Profit"})]}),s.jsxs("p",{className:"text-2xl font-bold text-primary",children:["$",P.platformProfit.toFixed(2)]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"After payouts & taxes"})]})})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[s.jsxs("div",{className:"p-3 bg-muted rounded-lg text-center",children:[s.jsx("p",{className:"text-xl font-bold text-foreground",children:P.totalBookings}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Orders"})]}),s.jsxs("div",{className:"p-3 bg-muted rounded-lg text-center",children:[s.jsx("p",{className:"text-xl font-bold text-foreground",children:C.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Payroll Entries"})]}),s.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-950/20 rounded-lg text-center",children:[s.jsx("p",{className:"text-xl font-bold text-red-600",children:P.refundedCount}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Refunded"})]}),s.jsxs("div",{className:"p-3 bg-muted rounded-lg text-center",children:[s.jsx("p",{className:"text-xl font-bold text-foreground",children:P.totalBookings>0?`$${(P.netRevenue/P.totalBookings).toFixed(2)}`:"$0.00"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg Order Value"})]})]}),s.jsxs(J,{className:"shadow-card",children:[s.jsxs(ke,{children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(ya,{className:"w-5 h-5 text-primary"}),"Permanent Transaction Ledger",y!=="all"&&s.jsx(ne,{variant:"outline",className:"ml-2",children:y})]}),s.jsx(Ge,{children:"All finalized orders with complete audit trail  Stripe IDs preserved for 5+ years"})]}),s.jsx(Q,{children:s.jsx(Ps,{className:"h-[400px]",children:E.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(ya,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"No transactions found for this period"})]}):s.jsxs(Sn,{children:[s.jsx(Cn,{children:s.jsxs(Mt,{children:[s.jsx(Pe,{children:"Date"}),s.jsx(Pe,{children:"Order ID"}),s.jsx(Pe,{children:"Customer"}),s.jsx(Pe,{children:"PSA"}),s.jsx(Pe,{className:"text-right",children:"Gross"}),s.jsx(Pe,{className:"text-right",children:"HST"}),s.jsx(Pe,{className:"text-right",children:"PSA Payout"}),s.jsx(Pe,{className:"text-right",children:"Platform"}),s.jsx(Pe,{children:"Status"}),s.jsx(Pe,{children:"Stripe Ref"})]})}),s.jsx(Pn,{children:E.map(A=>s.jsxs(Mt,{className:A.status==="refunded"?"bg-destructive/5":"",children:[s.jsx(be,{className:"text-sm whitespace-nowrap",children:Ze(un(A.date),"MMM d, yyyy")}),s.jsx(be,{className:"font-mono text-xs",children:A.bookingCode}),s.jsx(be,{className:"text-sm",children:A.customerName}),s.jsx(be,{className:"text-sm",children:A.pswName}),s.jsxs(be,{className:"text-right font-medium",children:["$",A.grossAmount.toFixed(2)]}),s.jsxs(be,{className:"text-right text-amber-600",children:["$",A.taxAmount.toFixed(2)]}),s.jsxs(be,{className:"text-right text-blue-600",children:["$",A.pswPayout.toFixed(2)]}),s.jsxs(be,{className:"text-right text-green-600",children:["$",A.platformFee.toFixed(2)]}),s.jsxs(be,{children:[I(A.status),A.status==="refunded"&&A.refundAmount&&s.jsxs("span",{className:"text-xs text-destructive ml-1",children:["-$",A.refundAmount.toFixed(2)]})]}),s.jsx(be,{children:A.stripePaymentIntentId?s.jsxs("span",{className:"font-mono text-xs text-muted-foreground",title:A.stripePaymentIntentId,children:[A.stripePaymentIntentId.slice(0,14),"..."]}):s.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})})]},A.id))})]})})})]}),P.refundedCount>0&&s.jsxs(J,{className:"shadow-card border-destructive/30",children:[s.jsx(ke,{className:"pb-3",children:s.jsxs(Ee,{className:"text-sm text-destructive flex items-center gap-2",children:[s.jsx(Wr,{className:"w-4 h-4"}),"Refund Summary"]})}),s.jsx(Q,{children:s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-destructive",children:P.refundedCount}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Refunded Orders"})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-2xl font-bold text-destructive",children:["-$",P.totalRefunds.toFixed(2)]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Refunded"})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-2xl font-bold text-destructive",children:["-$",P.refundedTax.toFixed(2)]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"HST Returned"})]})]})})]}),s.jsx(q7e,{open:b,onClose:()=>N(!1),dateRange:j,summary:P,ledgerEntries:T,selectedPeriod:y!=="all"?y:void 0})]})};delete Wt.Icon.Default.prototype._getIconUrl;Wt.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const Y7e=new Wt.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),Z7e=new Wt.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-gold.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),X7e=new Wt.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),J7e=({bounds:e})=>{const t=Qf();return x.useEffect(()=>{e&&t.fitBounds(e,{padding:[50,50]})},[e,t]),null},sy=hC(),Q7e=e=>{const t=new Map;return e.forEach(r=>{const n=r.city||"Unknown";t.set(n,(t.get(n)||0)+1)}),Array.from(t.entries()).map(([r,n])=>({city:r,count:n})).sort((r,n)=>n.count-r.count)},e9e=e=>{const t=new Map;return e.forEach(r=>{const i=(px(r.postalCode||"").formatted||(r.postalCode||"").replace(/\s/g,"").toUpperCase()).replace(/\s/g,"").substring(0,3);i.length===3&&t.set(i,(t.get(i)||0)+1)}),Array.from(t.entries()).map(([r,n])=>({fsa:r,count:n})).sort((r,n)=>n.count-r.count)},t9e=(e,t)=>{const r=Math.max(.05,2/Math.pow(2,t-5)),n=new Map;return e.forEach(a=>{const i=`${Math.round(a.lat/r)}_${Math.round(a.lng/r)}`;n.has(i)||n.set(i,[]),n.get(i).push(a)}),Array.from(n.values()).map(a=>{const i=a.reduce((l,c)=>l+c.lat,0)/a.length,o=a.reduce((l,c)=>l+c.lng,0)/a.length;return{lat:i,lng:o,count:a.length,members:a}})},r9e=(e,t,r)=>{const n=t.map(a=>fT(e.lat,e.lng,a.lat,a.lng)).sort((a,i)=>a-i);return r>n.length?null:Math.ceil(n[r-1])},n9e=(e,t,r)=>{const n=t.map(i=>fT(e.lat,e.lng,i.lat,i.lng)).sort((i,o)=>i-o),a=Math.max(0,Math.ceil(n.length*(r/100))-1);return a>=n.length?n[n.length-1]?Math.ceil(n[n.length-1]):null:Math.ceil(n[a])},s9e=()=>{const[e,t]=x.useState([]),[r,n]=x.useState(!0),[a,i]=x.useState(!1),[o,l]=x.useState(0),[c,d]=x.useState(75),[h,f]=x.useState(75),[m,p]=x.useState(!1),y=x.useRef(null),[v,b]=x.useState(5),[N,j]=x.useState(80),[w,S]=x.useState(sy.lat),[C,P]=x.useState(sy.lng),[T,O]=x.useState(8),[E,D]=x.useState(!1),[I,A]=x.useState(null),V=x.useCallback(async()=>{n(!0);try{const{data:ee,error:re}=await de.from("psw_profiles").select("id, first_name, last_name, home_city, home_postal_code, home_lat, home_lng, vetting_status").in("vetting_status",["approved","pending"]).eq("is_test",!1).order("first_name");if(re)throw re;let ue=0;const Ne=[];(ee||[]).forEach(je=>{je.home_lat&&je.home_lng?Ne.push({id:je.id,firstName:je.first_name,lastName:je.last_name,city:je.home_city||"",postalCode:je.home_postal_code||"",lat:Number(je.home_lat),lng:Number(je.home_lng),status:je.vetting_status}):ue++}),t(Ne),l(ue)}catch(ee){console.error("Coverage data load error:",ee),Z.error("Failed to load PSW coverage data")}finally{n(!1)}},[]),U=x.useCallback(async()=>{const{data:ee}=await de.from("app_settings").select("setting_value").eq("setting_key","advertising_radius_km").maybeSingle();if(ee!=null&&ee.setting_value){const re=parseInt(ee.setting_value,10);isNaN(re)||(d(re),f(re))}},[]);x.useEffect(()=>{V(),U()},[V,U]);const $=ee=>{const re=ee[0];f(re),y.current&&window.clearTimeout(y.current),y.current=window.setTimeout(async()=>{p(!0);const{error:ue}=await de.from("app_settings").upsert({setting_key:"advertising_radius_km",setting_value:re.toString(),updated_at:new Date().toISOString()},{onConflict:"setting_key"});p(!1),ue?Z.error("Failed to save advertising radius"):(d(re),Z.success(`Advertising radius set to ${re}km`))},400)};x.useEffect(()=>()=>{y.current&&window.clearTimeout(y.current)},[]);const H=x.useMemo(()=>e.filter(ee=>ee.status==="approved"),[e]),F=x.useMemo(()=>a?e:H,[e,H,a]),R=x.useMemo(()=>t9e(F,T),[F,T]),z=x.useMemo(()=>Q7e(H).slice(0,10),[H]),G=x.useMemo(()=>e9e(H).slice(0,10),[H]),ie=x.useMemo(()=>{const ee=[[w,C]];return F.forEach(re=>ee.push([re.lat,re.lng])),ee.length>=2?Wt.latLngBounds(ee):Wt.latLngBounds([[43.5,-80.5],[44.8,-76.5]])},[F,w,C]),ae=x.useMemo(()=>r9e({lat:w,lng:C},H,v),[H,w,C,v]),X=x.useMemo(()=>n9e({lat:w,lng:C},H,N),[H,w,C,N]),le=async ee=>{const re=Math.max(5,Math.min(75,ee));f(re),p(!0);const{error:ue}=await de.from("app_settings").upsert({setting_key:"advertising_radius_km",setting_value:re.toString(),updated_at:new Date().toISOString()},{onConflict:"setting_key"});p(!1),ue?Z.error("Failed to apply radius"):(d(re),Z.success(`Advertising radius applied: ${re}km`))},fe=x.useCallback(async()=>{D(!0),A(null);try{const{data:ee,error:re}=await de.from("psw_profiles").select("id, first_name, last_name, home_postal_code").not("home_postal_code","is",null).neq("home_postal_code","");if(re)throw re;let ue=0,Ne=0,je=0;const Y=[];for(const xe of ee||[]){const Me=xe.home_postal_code||"",$e=px(Me);if($e.formatted)if($e.formatted!==Me){const{error:ce}=await de.from("psw_profiles").update({home_postal_code:$e.formatted}).eq("id",xe.id);ce?je++:ue++}else Ne++;else je++,Y.push({id:xe.id,name:`${xe.first_name} ${xe.last_name}`,postalCode:Me})}A({fixedCount:ue,unchangedCount:Ne,invalidCount:je,invalidItems:Y}),ue>0?(Z.success(`Normalized ${ue} postal code(s)`),V()):Z.info("All postal codes are already normalized or invalid")}catch(ee){console.error("Bulk normalize error:",ee),Z.error("Failed to run bulk normalization")}finally{D(!1)}},[V]),ge=()=>{const ee=Qf();return x.useEffect(()=>{const re=()=>O(ee.getZoom());return ee.on("zoomend",re),()=>{ee.off("zoomend",re)}},[ee]),null};return r?s.jsx("div",{className:"flex items-center justify-center py-20",children:s.jsx(Ut,{className:"w-8 h-8 animate-spin text-primary"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-semibold text-foreground flex items-center gap-2",children:[s.jsx(Kp,{className:"w-5 h-5 text-primary"}),"Coverage Intelligence"]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Analyse PSW concentration to optimise advertising radius"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(ne,{variant:"secondary",className:"px-3 py-1",children:[s.jsx(Kt,{className:"w-3 h-3 mr-1"})," ",H.length," Active"]}),o>0&&s.jsxs(ne,{variant:"outline",className:"px-3 py-1 text-destructive border-destructive/30",children:[s.jsx(Wr,{className:"w-3 h-3 mr-1"})," ",o," missing location"]}),s.jsxs(K,{variant:"outline",size:"sm",onClick:V,children:[s.jsx(Nr,{className:"w-4 h-4 mr-1"})," Refresh"]})]})]}),s.jsxs(J,{children:[s.jsxs(ke,{className:"pb-2",children:[s.jsxs(Ee,{className:"flex items-center gap-2 text-base",children:[s.jsx(e8,{className:"w-4 h-4 text-primary"}),"Advertising / Geo-fence Radius"]}),s.jsx(Ge,{children:"Controls the advertising geo-fence distance. Admin-only  not visible to clients."})]}),s.jsxs(Q,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx(LT,{value:[h],min:5,max:75,step:5,onValueChange:$,disabled:m})}),s.jsx(ne,{variant:"default",className:"text-lg font-bold px-3 py-1 min-w-[5rem] justify-center",children:m?s.jsx(Ut,{className:"w-4 h-4 animate-spin"}):`${h}km`})]}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsx("span",{children:"5km (tight)"}),s.jsx("span",{children:"75km (widest)"})]})]})]}),s.jsxs(J,{className:"overflow-hidden",children:[s.jsxs(ke,{className:"pb-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Ee,{className:"flex items-center gap-2",children:[s.jsx(St,{className:"w-5 h-5 text-primary"}),"PSW Concentration Map"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(mn,{id:"ci-pending",checked:a,onCheckedChange:i}),s.jsx(oe,{htmlFor:"ci-pending",className:"text-sm cursor-pointer",children:"Include Pending"})]})]}),s.jsxs(Ge,{className:"flex flex-wrap gap-4",children:[s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx("span",{className:"w-3 h-3 bg-red-500 rounded-full"})," Center"]}),s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx("span",{className:"w-3 h-3 bg-green-500 rounded-full"})," Approved"]}),a&&s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx("span",{className:"w-3 h-3 bg-amber-500 rounded-full"})," Pending"]}),s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx("span",{className:"w-3 h-3 bg-primary/20 rounded-full border border-primary/40"})," ",h,"km radius"]})]})]}),s.jsx(Q,{className:"p-0",children:s.jsx("div",{className:"h-[500px] w-full",children:s.jsxs(Ex,{center:[w,C],zoom:T,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[s.jsx(Tx,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),s.jsx(J7e,{bounds:ie}),s.jsx(ge,{}),s.jsx(wo,{position:[w,C],icon:X7e,children:s.jsx(zi,{children:s.jsx("p",{className:"font-semibold text-sm",children:"Center Point"})})}),s.jsx(DC,{center:[w,C],radius:h*1e3,pathOptions:{color:"hsl(var(--primary))",fillColor:"hsl(var(--primary))",fillOpacity:.08,weight:2,dashArray:"6 4"}}),R.map((ee,re)=>ee.count===1?s.jsx(wo,{position:[ee.lat,ee.lng],icon:ee.members[0].status==="approved"?Y7e:Z7e,children:s.jsx(zi,{children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("p",{className:"font-semibold",children:[ee.members[0].firstName," ",ee.members[0].lastName]}),s.jsx("p",{className:"text-muted-foreground",children:ee.members[0].city||"Unknown"}),s.jsx(ne,{className:ee.members[0].status==="approved"?"bg-green-500/10 text-green-600 border-green-200 text-xs mt-1":"bg-amber-500/10 text-amber-600 border-amber-200 text-xs mt-1",children:ee.members[0].status==="approved"?"Approved":"Pending"})]})})},re):s.jsx(DC,{center:[ee.lat,ee.lng],radius:Math.max(3e3,ee.count*1500),pathOptions:{color:"#22c55e",fillColor:"#22c55e",fillOpacity:.25,weight:2},children:s.jsx(zi,{children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("p",{className:"font-bold",children:[ee.count," PSWs in this area"]}),s.jsxs("ul",{className:"mt-1 text-xs max-h-32 overflow-y-auto",children:[ee.members.slice(0,10).map(ue=>s.jsxs("li",{children:[ue.firstName," ",ue.lastName,"  ",ue.city]},ue.id)),ee.members.length>10&&s.jsxs("li",{className:"text-muted-foreground",children:["+",ee.members.length-10," more"]})]})]})})},re))]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(J,{children:[s.jsxs(ke,{className:"pb-2",children:[s.jsx(Ee,{className:"text-base",children:"Top Cities"}),s.jsx(Ge,{children:"Most common home cities among active PSWs"})]}),s.jsx(Q,{children:z.length===0?s.jsx("p",{className:"text-muted-foreground text-sm py-4",children:"No data available"}):s.jsxs(Sn,{children:[s.jsx(Cn,{children:s.jsxs(Mt,{children:[s.jsx(Pe,{children:"City"}),s.jsx(Pe,{className:"text-right",children:"Count"}),s.jsx(Pe,{className:"text-right",children:"%"})]})}),s.jsx(Pn,{children:z.map(ee=>s.jsxs(Mt,{children:[s.jsx(be,{className:"font-medium",children:ee.city||"Unknown"}),s.jsx(be,{className:"text-right",children:ee.count}),s.jsxs(be,{className:"text-right",children:[H.length?(ee.count/H.length*100).toFixed(0):0,"%"]})]},ee.city))})]})})]}),s.jsxs(J,{children:[s.jsxs(ke,{className:"pb-2",children:[s.jsx(Ee,{className:"text-base",children:"Top Postal Prefixes (FSA)"}),s.jsx(Ge,{children:"3-character Forward Sortation Areas"})]}),s.jsx(Q,{children:G.length===0?s.jsx("p",{className:"text-muted-foreground text-sm py-4",children:"No data available"}):s.jsxs(Sn,{children:[s.jsx(Cn,{children:s.jsxs(Mt,{children:[s.jsx(Pe,{children:"FSA"}),s.jsx(Pe,{className:"text-right",children:"Count"}),s.jsx(Pe,{className:"text-right",children:"%"})]})}),s.jsx(Pn,{children:G.map(ee=>s.jsxs(Mt,{children:[s.jsx(be,{className:"font-mono font-medium",children:ee.fsa}),s.jsx(be,{className:"text-right",children:ee.count}),s.jsxs(be,{className:"text-right",children:[H.length?(ee.count/H.length*100).toFixed(0):0,"%"]})]},ee.fsa))})]})})]})]}),s.jsxs(J,{children:[s.jsxs(ke,{className:"pb-2",children:[s.jsxs(Ee,{className:"flex items-center gap-2 text-base",children:[s.jsx(fee,{className:"w-4 h-4 text-amber-500"}),"Radius Recommendation"]}),s.jsx(Ge,{children:"Calculate optimal advertising radius from a center point"})]}),s.jsxs(Q,{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(oe,{className:"text-xs text-muted-foreground mb-1 block",children:"Center Latitude"}),s.jsx(pe,{type:"number",step:"0.001",value:w,onChange:ee=>S(parseFloat(ee.target.value)||sy.lat)})]}),s.jsxs("div",{children:[s.jsx(oe,{className:"text-xs text-muted-foreground mb-1 block",children:"Center Longitude"}),s.jsx(pe,{type:"number",step:"0.001",value:C,onChange:ee=>P(parseFloat(ee.target.value)||sy.lng)})]})]}),s.jsxs("div",{className:"flex flex-wrap items-end gap-3 p-4 rounded-lg bg-muted/50",children:[s.jsxs("div",{children:[s.jsx(oe,{className:"text-xs mb-1 block",children:"Smallest radius for at least"}),s.jsx(pe,{type:"number",min:1,max:H.length||100,value:v,onChange:ee=>b(parseInt(ee.target.value)||1),className:"w-20"})]}),s.jsx("span",{className:"text-sm text-muted-foreground pb-2",children:"active PSWs "}),s.jsx(ne,{variant:"outline",className:"text-base font-bold px-3 py-1",children:ae!==null?`${ae}km`:"N/A"}),ae!==null&&s.jsxs(K,{size:"sm",variant:"secondary",onClick:()=>le(ae),children:["Apply ",ae,"km"]})]}),s.jsxs("div",{className:"flex flex-wrap items-end gap-3 p-4 rounded-lg bg-muted/50",children:[s.jsxs("div",{children:[s.jsx(oe,{className:"text-xs mb-1 block",children:"Radius covering"}),s.jsx(pe,{type:"number",min:1,max:100,value:N,onChange:ee=>j(parseInt(ee.target.value)||80),className:"w-20"})]}),s.jsx("span",{className:"text-sm text-muted-foreground pb-2",children:"% of active PSWs "}),s.jsx(ne,{variant:"outline",className:"text-base font-bold px-3 py-1",children:X!==null?`${X}km`:"N/A"}),X!==null&&s.jsxs(K,{size:"sm",variant:"secondary",onClick:()=>le(X),children:["Apply ",X,"km"]})]})]})]}),s.jsxs(J,{children:[s.jsxs(ke,{className:"pb-2",children:[s.jsxs(Ee,{className:"flex items-center gap-2 text-base",children:[s.jsx(sM,{className:"w-4 h-4 text-primary"}),"Normalize PSW Postal Codes"]}),s.jsx(Ge,{children:'Scan and fix postal codes to standard "A1A 1A1" format'})]}),s.jsxs(Q,{className:"space-y-4",children:[s.jsx(K,{onClick:fe,disabled:E,variant:"outline",children:E?s.jsxs(s.Fragment,{children:[s.jsx(Ut,{className:"w-4 h-4 mr-2 animate-spin"})," Scanning"]}):s.jsxs(s.Fragment,{children:[s.jsx(sM,{className:"w-4 h-4 mr-2"})," Normalize PSW Postal Codes"]})}),I&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsxs(ne,{variant:"secondary",className:"px-3 py-1",children:[s.jsx(Kt,{className:"w-3 h-3 mr-1"})," ",I.fixedCount," Fixed"]}),s.jsxs(ne,{variant:"outline",className:"px-3 py-1",children:[I.unchangedCount," Already OK"]}),I.invalidCount>0&&s.jsxs(ne,{variant:"outline",className:"px-3 py-1 text-destructive border-destructive/30",children:[s.jsx(Wr,{className:"w-3 h-3 mr-1"})," ",I.invalidCount," Invalid"]})]}),I.invalidItems.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-foreground mb-2",children:"Invalid postal codes (manual correction needed):"}),s.jsxs(Sn,{children:[s.jsx(Cn,{children:s.jsxs(Mt,{children:[s.jsx(Pe,{children:"PSW Name"}),s.jsx(Pe,{children:"ID"}),s.jsx(Pe,{children:"Current Postal Code"})]})}),s.jsx(Pn,{children:I.invalidItems.map(ee=>s.jsxs(Mt,{children:[s.jsx(be,{className:"font-medium",children:ee.name}),s.jsxs(be,{className:"font-mono text-xs text-muted-foreground",children:[ee.id.slice(0,8),""]}),s.jsx(be,{className:"font-mono text-destructive",children:ee.postalCode})]},ee.id))})]})]})]})]})]})]})},a9e=!0,I1=1.25,R1=30,i9e=()=>{const[e,t]=x.useState({enabled:a9e,multiplier:I1,leadTimeMinutes:R1}),[r,n]=x.useState(!0),[a,i]=x.useState(!1),o=x.useCallback(async()=>{n(!0);try{const{data:h,error:f}=await de.from("app_settings").select("setting_key, setting_value").in("setting_key",["asap_pricing_enabled","asap_multiplier","asap_lead_time_minutes"]);if(f)throw f;const m={};h==null||h.forEach(p=>{m[p.setting_key]=p.setting_value}),t({enabled:m.asap_pricing_enabled==="true",multiplier:parseFloat(m.asap_multiplier)||I1,leadTimeMinutes:parseInt(m.asap_lead_time_minutes)||R1})}catch(h){console.error("Error fetching ASAP pricing settings:",h)}finally{n(!1)}},[]);x.useEffect(()=>{o()},[o]),x.useEffect(()=>{const h=de.channel("asap_pricing_changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"app_settings"},f=>{const m=f.new.setting_key,p=f.new.setting_value;m==="asap_pricing_enabled"?t(y=>({...y,enabled:p==="true"})):m==="asap_multiplier"?t(y=>({...y,multiplier:parseFloat(p)||I1})):m==="asap_lead_time_minutes"&&t(y=>({...y,leadTimeMinutes:parseInt(p)||R1}))}).subscribe();return()=>{de.removeChannel(h)}},[]);const l=x.useCallback(async h=>{i(!0);try{const{error:f}=await de.from("app_settings").update({setting_value:h?"true":"false",updated_at:new Date().toISOString()}).eq("setting_key","asap_pricing_enabled");if(f)throw f;return t(m=>({...m,enabled:h})),Z.success(`Rush pricing ${h?"enabled":"disabled"}`),!0}catch(f){return console.error("Error updating ASAP enabled:",f),Z.error("Failed to update rush pricing status"),!1}finally{i(!1)}},[]),c=x.useCallback(async h=>{i(!0);try{const{error:f}=await de.from("app_settings").update({setting_value:h.toString(),updated_at:new Date().toISOString()}).eq("setting_key","asap_multiplier");if(f)throw f;return t(m=>({...m,multiplier:h})),Z.success(`Rush multiplier updated to ${Math.round((h-1)*100)}%`),!0}catch(f){return console.error("Error updating ASAP multiplier:",f),Z.error("Failed to update rush multiplier"),!1}finally{i(!1)}},[]),d=x.useCallback(async h=>{i(!0);try{const{error:f}=await de.from("app_settings").update({setting_value:h.toString(),updated_at:new Date().toISOString()}).eq("setting_key","asap_lead_time_minutes");if(f)throw f;return t(m=>({...m,leadTimeMinutes:h})),Z.success(`Rush lead time updated to ${h} minutes`),!0}catch(f){return console.error("Error updating ASAP lead time:",f),Z.error("Failed to update rush lead time"),!1}finally{i(!1)}},[]);return{enabled:e.enabled,multiplier:e.multiplier,leadTimeMinutes:e.leadTimeMinutes,isLoading:r,isSaving:a,setAsapEnabled:l,setAsapMultiplier:c,setAsapLeadTime:d,refresh:o}},o9e=()=>{const{user:e,isAuthenticated:t,logout:r}=na(),[n,a]=x.useState(ude),[i,o]=x.useState(!1),[l,c]=x.useState("active-psws"),[d,h]=x.useState(null),f=jc(),m=So(),p=i9e();if(x.useEffect(()=>{a(ba())},[]),!t||(e==null?void 0:e.role)!=="admin")return s.jsx(Yh,{to:"/",replace:!0});const y=()=>{fde(n),o(!1),Z.success("Configuration saved successfully!")},v=A=>{a(V=>({...V,surgeMultiplier:A[0]})),o(!0)},b=A=>{a(V=>({...V,minimumHours:parseFloat(A)||1})),o(!0)},N=A=>{a(V=>({...V,doctorEscortMinimumHours:parseFloat(A)||2})),o(!0)},j=(A,V)=>{a(U=>({...U,taskDurations:{...U.taskDurations,[A]:parseInt(V)||0}})),o(!0)},w=A=>{a(V=>({...V,overtimeRatePercentage:parseInt(A)||50})),o(!0)},S=A=>{a(V=>({...V,overtimeGraceMinutes:parseInt(A)||15})),o(!0)},C=A=>{a(V=>({...V,overtimeBlockMinutes:parseInt(A)||30})),o(!0)},P=A=>{a(V=>({...V,regionalSurgeEnabled:A})),o(!0)},T=A=>{a(V=>({...V,surgeZones:A})),o(!0)},O=async A=>{await p.setAsapEnabled(A),a(V=>({...V,asapPricingEnabled:A}))},E=async A=>{await p.setAsapMultiplier(A),a(V=>({...V,asapMultiplier:A}))},D=async A=>{await p.setAsapLeadTime(A)},I=()=>{switch(d){case"api":return"API Settings";case"messaging":return"Messaging Templates";case"radius":return"Radius Alerts";case"dev":return"Developer Settings";case"stripe":return"Stripe & Refunds";case"admin-mgmt":return"Admin Management";case"domain":return"Domain Settings";default:return"Settings"}};return s.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-background/95 backdrop-blur-sm border-b border-border",children:s.jsxs("div",{className:"flex items-center justify-between px-4 lg:px-6 h-16",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:Rr,alt:"PSW Direct Logo",className:"h-10 w-auto"}),s.jsx("span",{className:"font-semibold text-foreground hidden sm:inline",children:"Admin Panel"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Tpe,{children:[s.jsx(Ape,{asChild:!0,children:s.jsx(K,{variant:"ghost",size:"icon",children:s.jsx(jv,{className:"w-5 h-5"})})}),s.jsxs(hW,{align:"end",className:"w-56",children:[s.jsx(fW,{children:"Settings"}),s.jsx(Ry,{}),s.jsxs(Ll,{onClick:()=>h("api"),children:[s.jsx(jv,{className:"w-4 h-4 mr-2"}),"Email Settings"]}),s.jsxs(Ll,{onClick:()=>h("messaging"),children:[s.jsx(jv,{className:"w-4 h-4 mr-2"}),"Messaging Templates"]}),s.jsxs(Ll,{onClick:()=>h("stripe"),children:[s.jsx(hs,{className:"w-4 h-4 mr-2"}),"Stripe & Refunds"]}),s.jsxs(Ll,{onClick:()=>h("radius"),children:[s.jsx(jv,{className:"w-4 h-4 mr-2"}),"Radius Alerts"]}),s.jsx(Ry,{}),s.jsxs(Ll,{onClick:()=>h("admin-mgmt"),children:[s.jsx(kk,{className:"w-4 h-4 mr-2"}),"Admin Management"]}),s.jsxs(Ll,{onClick:()=>h("domain"),children:[s.jsx(Oa,{className:"w-4 h-4 mr-2"}),"Domain Settings"]}),!m&&!f.liveAuthEnabled&&s.jsxs(s.Fragment,{children:[s.jsx(Ry,{}),s.jsxs(Ll,{onClick:()=>h("dev"),children:[s.jsx(mr,{className:"w-4 h-4 mr-2"}),"Dev Settings"]})]})]})]}),i&&s.jsxs(K,{variant:"brand",onClick:y,size:"sm",children:[s.jsx(In,{className:"w-4 h-4 mr-2"}),"Save"]}),s.jsx(K,{variant:"ghost",size:"icon",onClick:r,className:"text-muted-foreground hover:text-destructive",children:s.jsx(Wh,{className:"w-5 h-5"})})]})]})}),s.jsx("main",{className:"flex-1 flex flex-col",children:s.jsxs(qi,{value:l,onValueChange:A=>c(A),className:"flex-1 flex flex-col",children:[s.jsx("div",{className:"sticky top-16 z-40 bg-background border-b border-border px-4 lg:px-6 overflow-x-auto",children:s.jsxs(ii,{className:"h-12 w-max justify-start gap-1 bg-transparent p-0 rounded-none",children:[s.jsx(ft,{value:"active-psws",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground rounded-t-lg rounded-b-none h-10 px-4 sm:px-6 whitespace-nowrap",children:"Active PSWs"}),s.jsx(ft,{value:"pending-review",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground rounded-t-lg rounded-b-none h-10 px-4 sm:px-6 whitespace-nowrap",children:"Pending Review"}),s.jsx(ft,{value:"psw-coverage-map",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground rounded-t-lg rounded-b-none h-10 px-4 sm:px-6 whitespace-nowrap",children:"PSW Coverage"}),s.jsxs(ft,{value:"coverage-intelligence",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground rounded-t-lg rounded-b-none h-10 px-4 sm:px-6 whitespace-nowrap",children:[s.jsx(Kp,{className:"w-4 h-4 mr-1"}),"Coverage Intel"]}),s.jsxs(ft,{value:"active-shifts",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground rounded-t-lg rounded-b-none h-10 px-4 sm:px-6 whitespace-nowrap",children:[s.jsx(cl,{className:"w-4 h-4 mr-1"}),"Active Shifts"]}),s.jsx(ft,{value:"orders-calendar",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground rounded-t-lg rounded-b-none h-10 px-4 sm:px-6 whitespace-nowrap",children:"Orders/Calendar"}),s.jsxs(ft,{value:"order-stats",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground rounded-t-lg rounded-b-none h-10 px-4 sm:px-6 whitespace-nowrap",children:[s.jsx(Kp,{className:"w-4 h-4 mr-1"}),"Statistics"]}),s.jsx(ft,{value:"order-list",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground rounded-t-lg rounded-b-none h-10 px-4 sm:px-6 whitespace-nowrap",children:"Order List"}),s.jsx(ft,{value:"active-shifts-map",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground rounded-t-lg rounded-b-none h-10 px-4 sm:px-6 whitespace-nowrap",children:"Live Map"}),s.jsx(ft,{value:"client-database",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground rounded-t-lg rounded-b-none h-10 px-4 sm:px-6 whitespace-nowrap",children:"Client Database"}),s.jsxs(ft,{value:"payroll",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground rounded-t-lg rounded-b-none h-10 px-4 sm:px-6 whitespace-nowrap",children:[s.jsx(hs,{className:"w-4 h-4 mr-1"}),"Payroll"]}),s.jsxs(ft,{value:"accounting",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground rounded-t-lg rounded-b-none h-10 px-4 sm:px-6 whitespace-nowrap",children:[s.jsx(MS,{className:"w-4 h-4 mr-1"}),"Accounting"]}),s.jsxs(ft,{value:"pricing-tasks",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground rounded-t-lg rounded-b-none h-10 px-4 sm:px-6 whitespace-nowrap",children:[s.jsx(mee,{className:"w-4 h-4 mr-1"}),"Pricing & Tasks"]}),s.jsxs(ft,{value:"security",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground rounded-t-lg rounded-b-none h-10 px-4 sm:px-6 whitespace-nowrap",children:[s.jsx(mr,{className:"w-4 h-4 mr-1"}),"Security"]}),s.jsxs(ft,{value:"gear-box",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground rounded-t-lg rounded-b-none h-10 px-4 sm:px-6 whitespace-nowrap",children:[s.jsx(Qm,{className:"w-4 h-4 mr-1"}),"Gear Box"]}),!m&&!f.liveAuthEnabled&&s.jsxs(ft,{value:"testing",className:"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground rounded-t-lg rounded-b-none h-10 px-4 sm:px-6 whitespace-nowrap",children:[s.jsx(lee,{className:"w-4 h-4 mr-1"}),"Testing"]})]})}),s.jsxs("div",{className:"flex-1 px-4 lg:px-6 py-6 max-w-6xl mx-auto w-full overflow-y-auto max-h-[calc(100vh-8rem)]",children:[s.jsx(Ct,{value:"active-psws",className:"m-0",children:s.jsx(Rxe,{})}),s.jsx(Ct,{value:"pending-review",className:"m-0",children:s.jsx(Qxe,{})}),s.jsx(Ct,{value:"psw-coverage-map",className:"m-0",children:s.jsx(Bbe,{})}),s.jsx(Ct,{value:"coverage-intelligence",className:"m-0",children:s.jsx(s9e,{})}),s.jsx(Ct,{value:"active-shifts",className:"m-0",children:s.jsx(obe,{})}),s.jsx(Ct,{value:"orders-calendar",className:"m-0",children:s.jsx($ye,{})}),s.jsx(Ct,{value:"order-stats",className:"m-0",children:s.jsx(A7e,{})}),s.jsx(Ct,{value:"order-list",className:"m-0",children:s.jsx(D7e,{})}),s.jsx(Ct,{value:"active-shifts-map",className:"m-0",children:s.jsx(Q0e,{})}),s.jsx(Ct,{value:"client-database",className:"m-0",children:s.jsx(Lye,{})}),s.jsx(Ct,{value:"payroll",className:"m-0",children:s.jsx(f0e,{})}),s.jsx(Ct,{value:"accounting",className:"m-0",children:s.jsx(K7e,{})}),s.jsx(Ct,{value:"pricing-tasks",className:"m-0",children:s.jsx(Ps,{className:"h-[calc(100vh-12rem)]",children:s.jsxs("div",{className:"space-y-6 pr-4",children:[s.jsx(s0e,{}),s.jsx(r0e,{pricing:{...n,asapPricingEnabled:p.enabled,asapMultiplier:p.multiplier},onSurgeChange:v,onMinHoursChange:b,onDoctorEscortMinChange:N,onTaskDurationChange:j,onOvertimeRateChange:w,onOvertimeGraceChange:S,onOvertimeBlockChange:C,onRegionalSurgeToggle:P,onSurgeZoneUpdate:T,onAsapToggle:O,onAsapMultiplierChange:E,onAsapLeadTimeChange:D,asapLeadTimeMinutes:p.leadTimeMinutes,asapIsSaving:p.isSaving,onSave:y,hasChanges:i})]})})}),s.jsx(Ct,{value:"security",className:"m-0",children:s.jsx(Ps,{className:"h-[calc(100vh-12rem)]",children:s.jsx("div",{className:"pr-4",children:s.jsx(Uye,{})})})}),s.jsx(Ct,{value:"gear-box",className:"m-0",children:s.jsx(V7e,{})}),!m&&!f.liveAuthEnabled&&s.jsx(Ct,{value:"testing",className:"m-0",children:s.jsx(xbe,{})})]})]})}),s.jsx(hr,{open:d!==null,onOpenChange:A=>!A&&h(null),children:s.jsxs(or,{className:"max-w-4xl h-[90vh] flex flex-col",children:[s.jsx(lr,{className:"shrink-0",children:s.jsx(cr,{children:I()})}),s.jsx(Ps,{className:"flex-1 min-h-0 pr-4",children:s.jsxs("div",{className:"pb-20",children:[d==="api"&&s.jsx(p0e,{}),d==="messaging"&&s.jsx(T0e,{}),d==="radius"&&s.jsx(O0e,{}),d==="dev"&&s.jsx(M0e,{}),d==="stripe"&&s.jsx(F7e,{}),d==="admin-mgmt"&&s.jsx(B7e,{}),d==="domain"&&s.jsx(U7e,{})]})})]})})]})};class l9e extends x.Component{constructor(r){super(r);IO(this,"handleReload",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("[AdminErrorBoundary] Caught error:",r,n)}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:s.jsx(J,{className:"max-w-md w-full shadow-card",children:s.jsxs(Q,{className:"pt-8 pb-8 text-center space-y-4",children:[s.jsx("div",{className:"w-16 h-16 mx-auto rounded-full bg-destructive/10 flex items-center justify-center",children:s.jsx(Wr,{className:"w-8 h-8 text-destructive"})}),s.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Admin Panel Error"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Something went wrong rendering the admin panel. This is usually caused by a data inconsistency."}),this.state.error&&s.jsx("pre",{className:"text-xs text-left bg-muted p-3 rounded overflow-auto max-h-32",children:this.state.error.message}),s.jsxs(K,{onClick:this.handleReload,className:"w-full gap-2",children:[s.jsx(Nr,{className:"w-4 h-4"}),"Reload Admin"]}),s.jsx(K,{variant:"outline",onClick:()=>window.location.reload(),className:"w-full",children:"Hard Refresh Page"})]})})}):this.props.children}}const c9e=({activeTab:e,onTabChange:t})=>{const r=[{id:"home",label:"Home",icon:dee},{id:"book",label:"Book",icon:eee},{id:"history",label:"History",icon:Sk}];return s.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-background border-t border-border shadow-elevated z-50",children:s.jsx("div",{className:"flex items-center justify-around h-16 max-w-md mx-auto",children:r.map(n=>{const a=n.icon,i=e===n.id;return s.jsxs("button",{onClick:()=>t(n.id),className:Re("flex flex-col items-center justify-center flex-1 h-full gap-1 transition-colors",i?"text-primary":"text-muted-foreground hover:text-foreground"),children:[s.jsx(a,{className:Re("w-5 h-5",i&&"stroke-[2.5px]")}),s.jsx("span",{className:Re("text-xs font-medium",i&&"font-semibold"),children:n.label})]},n.id)})})})};delete Wt.Icon.Default.prototype._getIconUrl;Wt.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const d9e=new Wt.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),u9e=new Wt.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),h9e=({center:e})=>{const t=Qf();return x.useEffect(()=>{e&&t.setView(e,t.getZoom())},[e,t]),null},f9e=({bookingId:e,pswName:t="Your PSW",clientAddress:r,clientCoords:n})=>{const{latestLog:a,isLoading:i,error:o}=DT({bookingId:e,limit:1,refreshIntervalMs:6e4}),{coords:l,isLoading:c}=mV({address:r,enabled:!n&&!!r}),d=n||l,[h,f]=x.useState(null);if(x.useEffect(()=>{a?f([a.latitude,a.longitude]):d&&f([d.lat,d.lng])},[a,d]),i||c)return s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{className:"pb-3",children:s.jsxs(Ee,{className:"text-base flex items-center gap-2",children:[s.jsx(el,{className:"w-4 h-4 text-primary"}),"PSW Location"]})}),s.jsx(Q,{children:s.jsx("div",{className:"h-[200px] w-full rounded-lg bg-muted flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ut,{className:"w-8 h-8 text-primary animate-spin mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading map..."})]})})})]});if(o||!a&&!d)return s.jsxs(J,{className:"shadow-card border-muted",children:[s.jsx(ke,{className:"pb-3",children:s.jsxs(Ee,{className:"text-base flex items-center gap-2",children:[s.jsx(el,{className:"w-4 h-4 text-muted-foreground"}),"PSW Location"]})}),s.jsx(Q,{children:s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[s.jsx(At,{className:"w-10 h-10 text-muted-foreground/50 mb-3"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:o||"Location data not yet available"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"The map will update once your PSW shares their location"})]})})]});const m=h||[43.6532,-79.3832];return s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Ee,{className:"text-base flex items-center gap-2",children:[s.jsx(el,{className:"w-4 h-4 text-primary"}),t,"'s Location"]}),a&&s.jsxs(ne,{variant:"outline",className:"text-xs",children:[s.jsx(Qe,{className:"w-3 h-3 mr-1"}),TC(new Date(a.created_at),{addSuffix:!0})]})]})}),s.jsxs(Q,{className:"p-0",children:[s.jsx("div",{className:"h-[200px] rounded-b-lg overflow-hidden",children:s.jsxs(Ex,{center:m,zoom:14,style:{height:"100%",width:"100%"},scrollWheelZoom:!1,children:[s.jsx(Tx,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),s.jsx(h9e,{center:h}),a&&s.jsx(wo,{position:[a.latitude,a.longitude],icon:d9e,children:s.jsx(zi,{children:s.jsxs("div",{className:"text-center",children:[s.jsx("strong",{children:t}),s.jsx("br",{}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["Last updated: ",TC(new Date(a.created_at),{addSuffix:!0})]})]})})}),d&&s.jsx(wo,{position:[d.lat,d.lng],icon:u9e,children:s.jsx(zi,{children:s.jsxs("div",{className:"text-center",children:[s.jsx("strong",{children:"Service Location"}),r&&s.jsxs(s.Fragment,{children:[s.jsx("br",{}),s.jsx("span",{className:"text-xs",children:r})]})]})})})]})}),s.jsxs("div",{className:"flex items-center justify-center gap-4 py-2 text-xs text-muted-foreground bg-muted/50",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),s.jsx("span",{children:t})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),s.jsx("span",{children:"Your Location"})]})]})]})]})},m9e=({bookingId:e,clientAddress:t,proximityThresholdMeters:r=500,enabled:n=!0})=>{const[a,i]=x.useState({isWithinProximity:!1,distanceMeters:null,distanceFormatted:null,clientCoords:null,hasAlerted:!1,isLoading:!0,error:null}),o=x.useRef(!1),{latestLog:l,isLoading:c}=DT({bookingId:e,limit:1,refreshIntervalMs:3e4,enabled:n});x.useEffect(()=>{if(!t||!n)return;(async()=>{try{const f=await fV(t);i(f?m=>({...m,clientCoords:{lat:f.lat,lng:f.lng},isLoading:!1}):m=>({...m,error:"Could not geocode client address",isLoading:!1}))}catch{i(m=>({...m,error:"Geocoding failed",isLoading:!1}))}})()},[t,n]),x.useEffect(()=>{if(!l||!a.clientCoords||!n)return;const h=ebe(l.latitude,l.longitude,a.clientCoords.lat,a.clientCoords.lng),f=h<=r;i(m=>({...m,distanceMeters:Math.round(h),distanceFormatted:tbe(h),isWithinProximity:f,hasAlerted:f&&!o.current?!0:m.hasAlerted})),f&&!o.current&&(o.current=!0)},[l,a.clientCoords,r,n]);const d=x.useCallback(()=>{o.current=!1,i(h=>({...h,hasAlerted:!1}))},[]);return{...a,isLoading:a.isLoading||c,resetAlert:d}},p9e=({bookingId:e,clientAddress:t,pswName:r="Your PSW",onDismiss:n})=>{const[a,i]=x.useState(!1),[o,l]=x.useState(!1),{isWithinProximity:c,distanceFormatted:d,hasAlerted:h,isLoading:f,clientCoords:m}=m9e({bookingId:e,clientAddress:t,proximityThresholdMeters:500,enabled:!a});if(x.useEffect(()=>{if(c&&h&&!a){l(!0);const y=setTimeout(()=>l(!1),3e3);return()=>clearTimeout(y)}},[c,h,a]),a||f||!c||!m)return null;const p=()=>{i(!0),n==null||n()};return s.jsx(Tf,{className:`
        border-emerald-300 bg-emerald-50 dark:bg-emerald-950/30 dark:border-emerald-800
        ${o?"animate-pulse ring-2 ring-emerald-400":""}
      `,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-100 dark:bg-emerald-900 flex items-center justify-center shrink-0",children:s.jsx(si,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs(UA,{className:"text-emerald-800 dark:text-emerald-200 flex items-center gap-2",children:[s.jsx(es,{className:"w-4 h-4"}),r," is Almost There!"]}),s.jsxs(Af,{className:"text-emerald-700 dark:text-emerald-300 mt-1",children:[s.jsxs("div",{className:"flex items-center gap-1.5 text-sm",children:[s.jsx(el,{className:"w-3.5 h-3.5"}),s.jsxs("span",{children:["Currently ",s.jsx("strong",{children:d})," away from your location"]})]}),s.jsx("p",{className:"text-xs mt-1 opacity-80",children:"They should arrive within a few minutes"})]})]}),s.jsx(K,{variant:"ghost",size:"icon",className:"shrink-0 h-8 w-8 text-emerald-600 hover:text-emerald-800 hover:bg-emerald-100",onClick:p,children:s.jsx(Hr,{className:"w-4 h-4"})})]})})},g9e=({clientName:e="there",activeBookings:t=[]})=>{const r=n=>{const[a,i]=n.split(":"),o=parseInt(a),l=o>=12?"PM":"AM";return`${o%12||12}:${i} ${l}`};return t.length===0?s.jsx(J,{className:"shadow-card border-dashed",children:s.jsxs(Q,{className:"p-6 text-center",children:[s.jsx(X4,{className:"w-12 h-12 text-muted-foreground/30 mx-auto mb-3"}),s.jsx("p",{className:"text-muted-foreground font-medium",children:"No Active Care"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"No PSW is currently checked in at your location"})]})}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide flex items-center gap-2",children:[s.jsx(X4,{className:"w-4 h-4 text-emerald-500"}),"Active Care"]}),t.map(n=>{var a;return s.jsxs("div",{className:"space-y-3",children:[s.jsx(p9e,{bookingId:n.id,clientAddress:n.patient_address,pswName:n.psw_first_name||"Your PSW"}),s.jsx(J,{className:"shadow-card border-emerald-200 bg-emerald-50/50 dark:bg-emerald-950/20",children:s.jsxs(Q,{className:"p-4 space-y-3",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(oi,{className:"h-10 w-10 ring-2 ring-emerald-500",children:[n.psw_photo_url?s.jsx(li,{src:n.psw_photo_url,alt:n.psw_first_name||"PSW",className:"object-cover"}):null,s.jsx(ci,{className:"bg-emerald-100 text-emerald-700",children:((a=n.psw_first_name)==null?void 0:a.charAt(0))||"P"})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-semibold text-foreground flex items-center gap-2",children:[n.psw_first_name||"Your PSW",s.jsxs(ne,{className:"bg-emerald-500/10 text-emerald-600 border-emerald-200 text-xs",children:[s.jsx(es,{className:"w-3 h-3 mr-1"}),n.status==="in-progress"?"In Progress":"Checked In"]})]}),s.jsx("p",{className:"text-sm text-emerald-600 font-medium",children:Xh(n.service_type[0])})]})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(Qe,{className:"w-4 h-4 text-emerald-600"}),s.jsxs("div",{children:[s.jsxs("span",{className:"font-medium text-foreground",children:[r(n.start_time)," - ",r(n.end_time)]}),s.jsxs("p",{className:"text-xs",children:[n.hours,"h scheduled"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx($t,{className:"w-4 h-4"}),s.jsx("span",{children:n.patient_name})]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(St,{className:"w-4 h-4 shrink-0"}),s.jsx("span",{className:"truncate",children:n.patient_address})]}),n.is_transport_booking&&s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 rounded-lg p-3 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-blue-700 dark:text-blue-300",children:[s.jsx(si,{className:"w-4 h-4"}),s.jsx("span",{children:"Transport Information"})]}),n.pickup_address&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.jsx("span",{className:"font-medium",children:"Pick-up:"})," ",n.pickup_address]}),n.dropoff_address&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.jsx("span",{className:"font-medium",children:"Drop-off:"})," ",n.dropoff_address]})]}),s.jsx(f9e,{bookingId:n.id,pswName:n.psw_first_name||"Your PSW",clientAddress:n.patient_address,clientCoords:null}),s.jsxs("div",{className:"text-xs text-muted-foreground bg-muted p-2 rounded flex items-start gap-2",children:[s.jsx(Fn,{className:"w-3 h-3 mt-0.5 shrink-0"}),s.jsx("span",{children:"For any concerns during the visit, please contact the office directly."})]})]})})]},n.id)})]})},V5=e=>{const t=new Date(e),r=new Date,n=new Date(r);return n.setDate(n.getDate()+1),e===r.toISOString().split("T")[0]?"Today":e===n.toISOString().split("T")[0]?"Tomorrow":t.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})},D1=e=>{const[t,r]=e.split(":"),n=parseInt(t),a=n>=12?"PM":"AM";return`${n%12||12}:${r} ${a}`},x9e=({upcomingBookings:e=[],onRefetch:t})=>{const[r,n]=x.useState(e),[a,i]=x.useState(!1),[o,l]=x.useState(null),[c,d]=x.useState(null),[h,f]=x.useState(!1);x.useEffect(()=>{n(e)},[e]);const m=v=>{l(v),i(!0),d(null)},p=async()=>{if(!o)return;f(!0);const v=pde(o.scheduled_date,o.start_time,o.is_asap);if(d(v),v.eligible){const b=localStorage.getItem("stripe_dry_run")==="true";try{const{data:N,error:j}=await de.functions.invoke("process-refund",{body:{bookingCode:o.booking_code,reason:"Client self-service cancellation (4+ hours notice)",processedBy:"client-self-service",isDryRun:b}});j?(console.error("Refund processing error:",j),Z.error("Refund request submitted. Please contact support if not processed within 5 business days.")):(console.log("Refund processed:",N),Z.success("Refund processed successfully!"))}catch(N){console.error("Failed to process refund:",N)}}await wfe(o.id,v.eligible),n(b=>b.filter(N=>N.id!==o.id)),t==null||t(),f(!1)},y=()=>{i(!1),l(null),d(null)};return r.length===0?null:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Upcoming Appointments"}),s.jsxs(hr,{children:[s.jsx(oE,{asChild:!0,children:s.jsxs(K,{variant:"ghost",size:"sm",className:"text-primary text-xs h-auto p-1",children:[s.jsx(uee,{className:"w-3.5 h-3.5 mr-1"}),"Refund Policy"]})}),s.jsxs(or,{className:"sm:max-w-md",children:[s.jsx(lr,{children:s.jsx(cr,{children:"Cancellation & Refund Policy"})}),s.jsxs("div",{className:"space-y-4 text-sm text-muted-foreground",children:[s.jsxs("p",{children:[s.jsx("strong",{className:"text-foreground",children:"Full refund:"})," Cancellations made 4+ hours before the scheduled start time."]}),s.jsxs("p",{children:[s.jsx("strong",{className:"text-foreground",children:"No refunds:"})," Cancellations within 4 hours of the appointment, or for ASAP/immediate service requests."]}),s.jsx("p",{children:"Contact admin for special circumstances or manual reviews."})]})]})]})]}),r.map(v=>{const b=v.status==="active"&&v.psw_assigned;return v.status==="pending"||v.status==="active"&&v.psw_assigned,s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"font-medium text-foreground",children:v.service_type.map(N=>Xh(N)).join(", ")}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(mP,{status:v.status,pswAssigned:v.psw_assigned,size:"sm"}),s.jsx(ne,{className:b?"bg-primary/10 text-primary":"bg-amber-100 text-amber-700",children:b?"Confirmed":"Pending"}),v.is_asap&&s.jsx(ne,{variant:"secondary",className:"bg-orange-100 text-orange-700",children:"ASAP"})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"font-semibold text-foreground",children:["$",v.total.toFixed(2)]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[v.hours,"h  $",v.hourly_rate,"/hr"]})]})]}),s.jsxs("div",{className:"space-y-1.5 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Lt,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium text-foreground",children:V5(v.scheduled_date)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qe,{className:"w-4 h-4"}),s.jsxs("span",{children:[D1(v.start_time)," - ",D1(v.end_time)]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(St,{className:"w-4 h-4"}),s.jsx("span",{className:"truncate",children:v.patient_address})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[v.psw_first_name?s.jsxs(oi,{className:"h-6 w-6",children:[v.psw_photo_url?s.jsx(li,{src:v.psw_photo_url,alt:v.psw_first_name,className:"object-cover"}):null,s.jsx(ci,{className:"text-xs bg-blue-100 text-blue-700",children:v.psw_first_name.charAt(0)})]}):s.jsx($t,{className:"w-4 h-4"}),s.jsxs("span",{children:["Caregiver: ",s.jsx("span",{className:"font-medium text-foreground",children:v.psw_first_name||"TBD"})]})]})]}),v.is_transport_booking&&b&&s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 rounded-lg p-3 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-blue-700 dark:text-blue-300",children:[s.jsx(si,{className:"w-4 h-4"}),s.jsx("span",{children:"Transport Details"})]}),v.pickup_address&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.jsx("span",{className:"font-medium",children:"Pick-up:"})," ",v.pickup_address]}),v.dropoff_address&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.jsx("span",{className:"font-medium",children:"Drop-off:"})," ",v.dropoff_address]}),v.psw_vehicle_photo_url&&s.jsxs("div",{className:"flex items-center gap-3 pt-2 border-t border-blue-200 dark:border-blue-800 mt-2",children:[s.jsx("img",{src:v.psw_vehicle_photo_url,alt:"PSW Vehicle",className:"w-16 h-12 object-cover rounded border border-blue-200"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Vehicle"}),s.jsx("p",{className:"text-sm font-mono font-semibold text-foreground",children:v.psw_license_plate||"N/A"})]})]})]}),v.is_asap&&s.jsxs("div",{className:"text-xs text-orange-600 bg-orange-50 p-2 rounded flex items-start gap-2",children:[s.jsx(At,{className:"w-3.5 h-3.5 mt-0.5 shrink-0"}),s.jsx("span",{children:"ASAP bookings are non-refundable once confirmed."})]}),s.jsxs(K,{variant:"outline",size:"sm",className:"w-full text-destructive border-destructive/30 hover:bg-destructive/10",onClick:()=>m(v),children:[s.jsx(Hr,{className:"w-4 h-4 mr-2"}),"Cancel Appointment"]})]})},v.id)}),s.jsx(di,{open:a,onOpenChange:i,children:s.jsx(Ia,{children:c?c.eligible?s.jsxs(s.Fragment,{children:[s.jsxs(ks,{children:[s.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-green-100 flex items-center justify-center mb-2",children:s.jsx(es,{className:"w-6 h-6 text-green-600"})}),s.jsx(Ts,{className:"text-center",children:"Cancellation Confirmed"}),s.jsx(As,{className:"text-center",children:c.message})]}),s.jsx(Es,{className:"sm:justify-center",children:s.jsx(Os,{onClick:y,children:"Done"})})]}):s.jsxs(s.Fragment,{children:[s.jsxs(ks,{children:[s.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-amber-100 flex items-center justify-center mb-2",children:s.jsx(At,{className:"w-6 h-6 text-amber-600"})}),s.jsx(Ts,{className:"text-center",children:"Non-Refundable Cancellation"}),s.jsxs(As,{className:"text-center space-y-3",children:[s.jsx("p",{children:c.message}),s.jsx("a",{href:"tel:+1234567890",className:"inline-block text-primary underline font-medium",children:"Contact Office"})]})]}),s.jsx(Es,{className:"sm:justify-center",children:s.jsx(Os,{onClick:y,children:"Understood"})})]}):s.jsxs(s.Fragment,{children:[s.jsxs(ks,{children:[s.jsx(Ts,{children:"Cancel Appointment?"}),s.jsxs(As,{className:"space-y-2",children:[s.jsx("p",{children:"Are you sure you want to cancel this appointment?"}),o&&s.jsxs("div",{className:"mt-3 p-3 bg-muted rounded-lg text-sm",children:[s.jsx("p",{className:"font-medium text-foreground",children:o.service_type.map(v=>Xh(v)).join(", ")}),s.jsxs("p",{className:"text-muted-foreground",children:[V5(o.scheduled_date),"  ",D1(o.start_time)]}),s.jsxs("p",{className:"text-muted-foreground mt-1",children:["Caregiver: ",o.psw_first_name||"TBD"]}),o.is_asap&&s.jsx("p",{className:"text-orange-600 font-medium mt-2",children:" This is an ASAP booking and is non-refundable."})]})]})]}),s.jsxs(Es,{children:[s.jsx(Ra,{children:"Keep Appointment"}),s.jsx(Os,{onClick:p,className:"bg-destructive hover:bg-destructive/90",children:"Yes, Cancel"})]})]})})})]})},q5=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),G5=e=>{const[t,r]=e.split(":"),n=parseInt(t),a=n>=12?"PM":"AM";return`${n%12||12}:${r} ${a}`},v9e=()=>{var m;const{user:e}=wx(),[t,r]=x.useState([]),[n,a]=x.useState(!0),[i,o]=x.useState(null),[l,c]=x.useState(null);x.useEffect(()=>{e!=null&&e.id&&d()},[e==null?void 0:e.id]);const d=async()=>{if(!(e!=null&&e.id))return;a(!0);const{data:p,error:y}=await de.from("bookings").select("id, service_type, scheduled_date, start_time, end_time, hours, subtotal, total, psw_first_name, patient_name, care_sheet, care_sheet_psw_name, care_sheet_submitted_at, payment_status, overtime_minutes, overtime_payment_intent_id").eq("user_id",e.id).eq("status","completed").order("scheduled_date",{ascending:!1}).limit(20);if(y)console.error("Error fetching past services:",y);else{const v=(p||[]).map(b=>({...b,care_sheet:b.care_sheet,overtime_minutes:b.overtime_minutes??null,overtime_payment_intent_id:b.overtime_payment_intent_id??null}));r(v)}a(!1)},h=p=>{c(p),o(p.care_sheet)},f=p=>p.payment_status!=="overtime_adjusted"?0:(p.total||0)-(p.subtotal||0);return n?s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Past Services"}),s.jsx(J,{className:"shadow-card",children:s.jsx(Q,{className:"p-6 text-center text-muted-foreground",children:"Loading past services..."})})]}):t.length===0?s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Past Services"}),s.jsx(J,{className:"shadow-card",children:s.jsx(Q,{className:"p-6 text-center text-muted-foreground",children:"No completed services yet. Your care history will appear here after your first visit."})})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Past Services"}),t.map(p=>{const y=f(p),v=p.payment_status==="overtime_adjusted"&&y>0;return s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"p-4 space-y-3",children:[v&&s.jsxs(Tf,{className:"border-orange-200 bg-orange-50 dark:bg-orange-950/20 dark:border-orange-800",children:[s.jsx(Yo,{className:"h-4 w-4 text-orange-600"}),s.jsxs(Af,{className:"text-orange-700 dark:text-orange-400",children:[s.jsx("span",{className:"font-medium",children:"Extended Service Notice:"})," This service ran +",p.overtime_minutes," minutes past the scheduled time. An additional charge of $",y.toFixed(2)," was applied."]})]}),s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"font-medium text-foreground",children:p.service_type.map(b=>Xh(b)).join(", ")}),s.jsx(ne,{variant:"secondary",className:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 text-xs",children:"Completed"}),v&&s.jsxs(ne,{className:"bg-orange-100 text-orange-700 border-orange-300 dark:bg-orange-900/30 dark:text-orange-400 gap-1 text-xs",children:[s.jsx(Yo,{className:"w-3 h-3"}),"Overtime"]})]}),s.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-sm text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Lt,{className:"w-3.5 h-3.5"}),q5(p.scheduled_date)]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Qe,{className:"w-3.5 h-3.5"}),G5(p.start_time)," - ",G5(p.end_time)]})]}),s.jsx("div",{className:"pt-2 border-t border-border",children:v?s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{className:"flex justify-between text-muted-foreground",children:[s.jsx("span",{children:"Base Service:"}),s.jsxs("span",{children:["$",p.subtotal.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-orange-600 dark:text-orange-400",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Yo,{className:"w-3 h-3"}),"Overtime (",p.overtime_minutes," min):"]}),s.jsxs("span",{children:["+$",y.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between font-medium text-foreground pt-1 border-t border-dashed",children:[s.jsx("span",{children:"Total Charged:"}),s.jsxs("span",{children:["$",p.total.toFixed(2)]})]})]}):s.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[s.jsx(hs,{className:"w-3.5 h-3.5"}),s.jsxs("span",{className:"font-medium text-foreground",children:["$",p.total.toFixed(2)]})]})}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.jsx("span",{className:"font-medium text-foreground",children:"Caregiver:"})," ",p.psw_first_name||p.care_sheet_psw_name||"Not assigned"]})]}),p.care_sheet&&s.jsxs(K,{variant:"outline",size:"sm",onClick:()=>h(p),className:"shrink-0",children:[s.jsx(zt,{className:"w-4 h-4 mr-1"}),"View Care Report"]})]})]})},p.id)}),s.jsx(hr,{open:!!i,onOpenChange:()=>o(null),children:s.jsxs(or,{className:"sm:max-w-lg max-h-[80vh] overflow-y-auto",children:[s.jsx(lr,{children:s.jsxs(cr,{className:"flex items-center gap-2",children:[s.jsx(zt,{className:"w-5 h-5 text-primary"}),"Care Report"]})}),i&&l&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"p-3 bg-muted rounded-lg",children:s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Date:"}),s.jsx("p",{className:"font-medium text-foreground",children:q5(l.scheduled_date)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),s.jsxs("p",{className:"font-medium text-foreground",children:[l.hours," hours"]})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("span",{className:"text-muted-foreground",children:"Caregiver:"}),s.jsx("p",{className:"font-medium text-foreground",children:i.pswFirstName||l.care_sheet_psw_name})]})]})}),l.payment_status==="overtime_adjusted"&&l.overtime_minutes&&s.jsxs(Tf,{className:"border-orange-200 bg-orange-50 dark:bg-orange-950/20 dark:border-orange-800",children:[s.jsx(Yo,{className:"h-4 w-4 text-orange-600"}),s.jsxs(Af,{className:"text-orange-700 dark:text-orange-400",children:["This service extended ",l.overtime_minutes," minutes beyond the scheduled time."]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"font-medium text-foreground flex items-center gap-2",children:[s.jsx($t,{className:"w-4 h-4 text-primary"}),"Patient Status"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{className:"p-2 bg-muted rounded text-center",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Mood on Arrival"}),s.jsx("p",{className:"text-sm font-medium text-foreground",children:i.moodOnArrival})]}),s.jsxs("div",{className:"p-2 bg-muted rounded text-center",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Mood on Departure"}),s.jsx("p",{className:"text-sm font-medium text-foreground",children:i.moodOnDeparture})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-foreground",children:"Tasks Completed"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:(m=i.tasksCompleted)==null?void 0:m.map((p,y)=>s.jsx(ne,{variant:"secondary",className:"text-xs",children:p},y))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-foreground",children:"Caregiver Observations"}),s.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed p-3 bg-muted rounded-lg",children:i.observations||"No observations recorded."})]}),s.jsxs("div",{className:"text-xs text-muted-foreground bg-primary/5 p-3 rounded-lg",children:[s.jsx("strong",{className:"text-foreground",children:"Privacy Note:"})," For caregiver's privacy, only their first name is shown. For any concerns or feedback, please contact the office."]})]})]})})]})},K5=e=>{const t=new Date(e),r=new Date,n=new Date(r);return n.setDate(n.getDate()+1),r.setHours(0,0,0,0),n.setHours(0,0,0,0),t.setHours(0,0,0,0),t.getTime()===r.getTime()?"Today":t.getTime()===n.getTime()?"Tomorrow":t.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})},Y5=e=>{const[t,r]=e.split(":"),n=parseInt(t,10),a=n>=12?"PM":"AM";return`${n%12||12}:${r} ${a}`},y9e=({pendingBookings:e,confirmedBookings:t,inProgressBookings:r})=>e.length>0||t.length>0||r.length>0?s.jsxs(J,{className:"shadow-card border-primary/20",children:[s.jsx(ke,{className:"pb-3",children:s.jsxs(Ee,{className:"text-base flex items-center gap-2",children:[s.jsx(Lt,{className:"w-4 h-4 text-primary"}),"Your Booking Status"]})}),s.jsxs(Q,{className:"space-y-3",children:[r.map(a=>{var i;return s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-green-50 dark:bg-green-950/30 border border-green-200 dark:border-green-800",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(oi,{className:"h-10 w-10 ring-2 ring-green-500",children:[a.psw_photo_url?s.jsx(li,{src:a.psw_photo_url,alt:a.psw_first_name||"Caregiver",className:"object-cover"}):null,s.jsx(ci,{className:"bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-400 font-medium",children:((i=a.psw_first_name)==null?void 0:i.charAt(0))||"C"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-foreground",children:"Care in Progress"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.jsx("span",{className:"font-medium text-green-700 dark:text-green-400",children:a.psw_first_name||"Caregiver"})," is with ",a.patient_name]})]})]}),s.jsx(ne,{variant:"outline",className:"bg-green-100 text-green-700 border-green-300 dark:bg-green-900 dark:text-green-300 dark:border-green-700",children:"Active"})]},a.id)}),t.map(a=>{var i;return s.jsxs("div",{className:"flex flex-col gap-3 p-3 rounded-lg bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(oi,{className:"h-10 w-10 ring-2 ring-blue-500",children:[a.psw_photo_url?s.jsx(li,{src:a.psw_photo_url,alt:a.psw_first_name||"Caregiver",className:"object-cover"}):null,s.jsx(ci,{className:"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400 font-medium",children:((i=a.psw_first_name)==null?void 0:i.charAt(0))||"C"})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-foreground",children:[K5(a.scheduled_date)," at ",Y5(a.start_time)]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.jsx("span",{className:"font-medium text-blue-700 dark:text-blue-400",children:a.psw_first_name})," assigned"]})]})]}),s.jsx(ne,{variant:"outline",className:"bg-blue-100 text-blue-700 border-blue-300 dark:bg-blue-900 dark:text-blue-300 dark:border-blue-700",children:"Confirmed"})]}),a.is_transport_booking&&a.psw_vehicle_photo_url&&s.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white dark:bg-background rounded-lg border border-blue-100 dark:border-blue-800",children:[s.jsx("img",{src:a.psw_vehicle_photo_url,alt:"PSW Vehicle",className:"w-16 h-12 object-cover rounded"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Vehicle"}),s.jsx("p",{className:"text-sm font-mono font-semibold text-foreground",children:a.psw_license_plate||"N/A"})]})]})]},a.id)}),e.map(a=>s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-amber-50 dark:bg-amber-950/30 border border-amber-200 dark:border-amber-800",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-100 dark:bg-amber-900 flex items-center justify-center",children:s.jsx(Qe,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-foreground",children:[K5(a.scheduled_date)," at ",Y5(a.start_time)]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Finding a caregiver..."})]})]}),s.jsx(ne,{variant:"outline",className:"bg-amber-100 text-amber-700 border-amber-300 dark:bg-amber-900 dark:text-amber-300 dark:border-amber-700",children:"Pending"})]},a.id)),(e.length>0||t.length>0)&&s.jsx("div",{className:"pt-2 border-t border-border",children:s.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(At,{className:"w-3 h-3"}),"You'll receive an email when your caregiver is confirmed"]})})]})]}):null,Z5=[{id:1,title:"Who Is This For?",icon:pn},{id:2,title:"Patient & Address",icon:$t},{id:3,title:"Service Details",icon:Lt},{id:4,title:"Review",icon:tn},{id:5,title:"Payment",icon:ms}],b9e=e=>{const t=e.toLowerCase();return t.includes("doctor")||t.includes("escort")?Vh:t.includes("hospital")||t.includes("discharge")?Ld:t.includes("personal")||t.includes("care")?$t:t.includes("respite")?mr:t.includes("companion")?pn:t.includes("meal")||t.includes("prep")?Lt:t.includes("medication")?Qe:t.includes("housekeeping")||t.includes("light")?QF:t.includes("transport")?St:Lt},w9e=({onBack:e,clientName:t,clientEmail:r,clientPhone:n})=>{var et,Zt,mt,zn,Qt,aa,$r,xn,Cr,gt,Un,ns,Fs,ia,La,gi,oa,Tn;ps();const{user:a}=wx(),i=r||(a==null?void 0:a.email)||"",o=t||((et=a==null?void 0:a.user_metadata)==null?void 0:et.full_name)||"",l=n||"",{tasks:c,loading:d}=vx(),[h,f]=x.useState(1),[m,p]=x.useState(null),[y,v]=x.useState(null),[b,N]=x.useState(!1),[j,w]=x.useState(null),[S,C]=x.useState(null),[P,T]=x.useState(null),[O,E]=x.useState(!1),[D,I]=x.useState(!1),[A,V]=x.useState([]),[U,$]=x.useState(!1),[H,F]=x.useState(null),[R,z]=x.useState(!1),[G,ie]=x.useState(null),ae=x.useRef(null),[X,le]=x.useState({patientName:"",patientRelationship:"",streetAddress:"",unitNumber:"",city:"",province:"ON",postalCode:"",buzzerCode:"",entryPoint:"",serviceDate:"",startTime:"",specialNotes:"",doctorOfficeName:"",doctorSuiteNumber:"",pickupAddress:"",pickupPostalCode:"",preferredGender:"no-preference"}),fe=x.useMemo(()=>c.map(we=>({value:we.id,label:we.name,icon:b9e(we.name),isHospitalDoctor:we.isHospitalDoctor})),[c]),ge=x.useMemo(()=>A.some(we=>{const Te=c.find(Ke=>Ke.id===we);return(Te==null?void 0:Te.isHospitalDoctor)===!0}),[A,c]),[ee,re]=x.useState([]),ue=(we,Te)=>{le(Ke=>({...Ke,[we]:Te})),(we==="streetAddress"||we==="city"||we==="postalCode")&&(w(null),C(null))},Ne=we=>{const Te=Wd(we);ue("postalCode",Te),C(null)},je=we=>{var Ke;const Te=(Ke=we.target.files)==null?void 0:Ke[0];Te&&v(Te)},Y=()=>{const we=[X.streetAddress];return X.unitNumber&&we.push(`Unit ${X.unitNumber}`),X.city&&we.push(X.city),X.province&&we.push(X.province),X.postalCode&&we.push(X.postalCode),we.join(", ")},xe=async()=>{if(!X.streetAddress.trim()||!X.city.trim())return!0;if(!X.postalCode.trim())return C("Postal code is required"),!1;if(!Ri(X.postalCode))return C("Please enter a valid Canadian postal code (e.g., K8N 1A1)"),!1;E(!0),w(null),C(null),Qk();try{const we=await h9(X.postalCode);return we.withinCoverage?(E(!1),!0):(w(we.message),E(!1),!1)}catch{return w("Error validating address. Please try again."),E(!1),!1}},Me=async()=>{if(!(h===2&&!await xe())){if(h===3&&ge){if(!X.pickupAddress.trim()){T("Pick-up address is required for hospital/doctor services");return}if(!X.pickupPostalCode.trim()){T("Pick-up postal code is required for PSW geofencing");return}if(!Ri(X.pickupPostalCode)){T("Please enter a valid Canadian postal code");return}}h<5&&f(we=>we+1)}},$e=()=>{if(!b){Z.error("Please agree to the cancellation policy");return}if(!(i!=null&&i.trim())){Z.error("Missing email address",{description:"Unable to retrieve your email. Please log out and back in."});return}const we=Xe();if(!we||we.total<20){Z.error("Minimum booking amount is $20");return}$(!0),f(5)},ce=()=>{h>1&&f(we=>we-1)},Le=we=>{p(we),we==="myself"&&ue("patientName",t),f(2)},qe=we=>{V(Te=>Te.includes(we)?Te.filter(Ke=>Ke!==we):[...Te,we])},Xe=()=>A.length===0?null:u9(A,D,X.city,X.postalCode,X.serviceDate,X.startTime),Et=()=>{if(!X.startTime||A.length===0)return"";const we=Xe();if(!we)return"";const[Te,Ke]=X.startTime.split(":").map(Number),xt=Te*60+Ke+we.totalMinutes,pr=Math.floor(xt/60)%24,dr=xt%60;return`${pr.toString().padStart(2,"0")}:${dr.toString().padStart(2,"0")}`},[B,ve]=x.useState(!1),Fe=async we=>{if(ve(!0),!(i!=null&&i.trim())){Z.error("Missing email address",{description:"Unable to retrieve your email. Please log out and back in."}),ve(!1);return}try{const Te=Xe(),Ke=A.map(at=>{const ur=c.find(Mr=>Mr.id===at);return(ur==null?void 0:ur.name)||at});let xt=X.serviceDate,pr=X.startTime,dr=Et();if(D||!xt||!pr){const at=new Date;xt=at.toISOString().split("T")[0],at.setMinutes(at.getMinutes()+15);const ur=at.getHours().toString().padStart(2,"0"),Mr=at.getMinutes().toString().padStart(2,"0");pr=`${ur}:${Mr}`;const se=(Te==null?void 0:Te.totalMinutes)||60;at.setMinutes(at.getMinutes()+se);const tt=at.getHours().toString().padStart(2,"0"),ut=at.getMinutes().toString().padStart(2,"0");dr=`${tt}:${ut}`}const Jr={paymentStatus:we?"paid":"invoice-pending",stripePaymentIntentId:we||void 0,serviceType:Ke,date:xt,startTime:pr,endTime:dr,status:"pending",hours:(Te==null?void 0:Te.totalHours)||1,hourlyRate:Te?Te.subtotal/(Te.totalHours||1):35,subtotal:(Te==null?void 0:Te.subtotal)||0,surgeAmount:(Te==null?void 0:Te.surgeAmount)||0,total:(Te==null?void 0:Te.total)||0,isAsap:D,wasRefunded:!1,orderingClient:{name:o,address:Y(),postalCode:X.postalCode,phone:l,email:i,isNewAccount:!1},patient:{name:m==="myself"?o:X.patientName,address:Y(),postalCode:X.postalCode,relationship:m==="myself"?"Self":X.patientRelationship,preferredLanguages:ee.length>0?ee:void 0,preferredGender:X.preferredGender},pickupAddress:ge?X.pickupAddress:void 0,pickupPostalCode:ge?X.pickupPostalCode:void 0,isTransportBooking:ge,pswAssigned:null,specialNotes:X.specialNotes,doctorOfficeName:X.doctorOfficeName||void 0,doctorSuiteNumber:X.doctorSuiteNumber||void 0,entryPhoto:y==null?void 0:y.name,buzzerCode:X.buzzerCode||void 0,entryPoint:X.entryPoint||void 0,emailNotifications:{confirmationSent:!0,confirmationSentAt:new Date().toISOString(),reminderSent:!1},adminNotifications:{notified:!0,notifiedAt:new Date().toISOString()}},Ae=await UE(Jr);console.log(" BOOKING CONFIRMED:",Ae),Z.success("Booking confirmed! Check your email for details."),ie(Ae),z(!0)}catch(Te){console.error("Booking submission error:",Te),Z.error("Failed to save booking. Please try again.")}finally{ve(!1)}},st=async we=>{F(we),await Fe(we)},pt=we=>{Z.error("Payment failed",{description:we})};return R&&G?s.jsx(J,{className:"shadow-card text-center",children:s.jsxs(Q,{className:"pt-8 pb-8 space-y-6",children:[s.jsx("div",{className:"w-20 h-20 mx-auto rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:s.jsx(tn,{className:"w-10 h-10 text-green-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Booking Confirmed!"}),s.jsxs("p",{className:"text-muted-foreground",children:["Thank you, ",o.split(" ")[0],"!"]})]}),s.jsxs("div",{className:"p-4 bg-primary/10 border border-primary/30 rounded-lg",children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Your Booking Code"}),s.jsx("p",{className:"text-2xl font-mono font-bold text-primary",children:G.id}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Save this ID for your records"})]}),s.jsxs("div",{className:"p-4 bg-muted rounded-lg text-left space-y-2",children:[s.jsx("h3",{className:"font-medium text-foreground mb-3",children:"Booking Summary"}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Date"}),s.jsx("span",{className:"font-medium text-foreground",children:G.date})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Time"}),s.jsxs("span",{className:"font-medium text-foreground",children:[G.startTime," - ",G.endTime]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Services"}),s.jsxs("span",{className:"font-medium text-foreground text-right",children:[G.serviceType.length," service(s)"]})]}),s.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-border",children:[s.jsx("span",{className:"text-muted-foreground",children:"Total"}),s.jsxs("span",{className:"font-bold text-primary",children:["$",G.total.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Payment Status"}),s.jsx(ne,{variant:"outline",className:"text-green-600 border-green-300 bg-green-50",children:"Paid"})]})]}),s.jsxs("div",{className:"p-4 bg-muted rounded-lg text-left",children:[s.jsx("p",{className:"text-foreground font-medium mb-2",children:"What's next?"}),s.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[s.jsxs("li",{children:[" Confirmation email sent to ",i]}),s.jsx("li",{children:" A PSW will be assigned to your booking"}),s.jsx("li",{children:" You'll receive a reminder before your appointment"})]})]}),s.jsxs("div",{className:"p-5 bg-gradient-to-br from-primary/10 to-accent/10 border border-primary/20 rounded-xl text-center space-y-3",children:[s.jsx("p",{className:"text-foreground font-semibold text-lg",children:" Enjoying our service?"}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"We'd love to hear about your experience!"}),s.jsx(K,{variant:"brand",className:"w-full",onClick:()=>window.open("https://g.page/r/CfuKfStrS_hoEAI/review","_blank"),children:"Rate your experience on Google"})]}),s.jsx(eU,{clientName:o.split(" ")[0]}),s.jsx(K,{variant:"outline",onClick:e,className:"w-full",children:"Go to Dashboard"})]})}):s.jsxs("div",{className:"min-h-full pb-24",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx(K,{variant:"ghost",size:"icon",onClick:e,className:"shrink-0",children:s.jsx($n,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-semibold text-foreground",children:"Request New Service"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Book care for yourself or a loved one"})]})]}),m&&s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between relative",children:[s.jsx("div",{className:"absolute top-5 left-0 right-0 h-0.5 bg-border"}),s.jsx("div",{className:"absolute top-5 left-0 h-0.5 bg-primary transition-all duration-300",style:{width:`${(h-1)/(Z5.length-1)*100}%`}}),Z5.map(we=>{const Te=we.icon,Ke=h>we.id,xt=h===we.id;return s.jsxs("div",{className:"flex flex-col items-center relative z-10",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center transition-all duration-300 ${Ke?"bg-primary text-primary-foreground":xt?"bg-primary text-primary-foreground ring-4 ring-primary/20":"bg-card border-2 border-border text-muted-foreground"}`,children:Ke?s.jsx(tn,{className:"w-5 h-5"}):s.jsx(Te,{className:"w-4 h-4"})}),s.jsx("span",{className:`text-xs mt-2 font-medium hidden sm:block ${xt?"text-primary":"text-muted-foreground"}`,children:we.title})]},we.id)})]})}),h===1&&!m&&s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{className:"pb-4",children:s.jsxs(Ee,{className:"text-lg flex items-center gap-2",children:[s.jsx(pn,{className:"w-5 h-5 text-primary"}),"Who is this service for?"]})}),s.jsxs(Q,{className:"space-y-4",children:[s.jsxs(K,{variant:"outline",className:"w-full h-20 flex flex-col items-center justify-center gap-2 hover:border-primary hover:bg-primary/5",onClick:()=>Le("myself"),children:[s.jsx($t,{className:"w-6 h-6 text-primary"}),s.jsx("span",{className:"font-medium",children:"Myself"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"I need care services"})]}),s.jsxs(K,{variant:"outline",className:"w-full h-20 flex flex-col items-center justify-center gap-2 hover:border-primary hover:bg-primary/5",onClick:()=>Le("someone-else"),children:[s.jsx(pn,{className:"w-6 h-6 text-primary"}),s.jsx("span",{className:"font-medium",children:"Someone Else"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Booking for a family member or friend"})]})]})]}),h===2&&s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{className:"pb-4",children:s.jsxs(Ee,{className:"text-lg flex items-center gap-2",children:[s.jsx($t,{className:"w-5 h-5 text-primary"}),m==="myself"?"Your Details":"Patient Information"]})}),s.jsxs(Q,{className:"space-y-6",children:[m==="someone-else"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"patientName",children:"Patient's Full Name"}),s.jsx(pe,{id:"patientName",placeholder:"Enter patient's full name",value:X.patientName,onChange:we=>ue("patientName",we.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"patientRelationship",children:"Your Relationship to Patient"}),s.jsxs(Xt,{value:X.patientRelationship,onValueChange:we=>ue("patientRelationship",we),children:[s.jsx(qt,{children:s.jsx(Jt,{placeholder:"Select relationship"})}),s.jsxs(Gt,{children:[s.jsx(_e,{value:"parent",children:"Parent"}),s.jsx(_e,{value:"spouse",children:"Spouse"}),s.jsx(_e,{value:"child",children:"Son/Daughter"}),s.jsx(_e,{value:"sibling",children:"Sibling"}),s.jsx(_e,{value:"guardian",children:"Legal Guardian"}),s.jsx(_e,{value:"friend",children:"Friend"}),s.jsx(_e,{value:"other",children:"Other"})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(St,{className:"w-4 h-4 text-primary"}),s.jsx("h3",{className:"font-medium text-foreground",children:"Service Address"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"streetAddress",children:"Street Address *"}),s.jsx(pe,{id:"streetAddress",placeholder:"123 Main Street",value:X.streetAddress,onChange:we=>ue("streetAddress",we.target.value)})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"unitNumber",children:"Unit / Suite / Apt #"}),s.jsx(pe,{id:"unitNumber",placeholder:"Unit 4B",value:X.unitNumber,onChange:we=>ue("unitNumber",we.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"city",children:"City *"}),s.jsx(pe,{id:"city",placeholder:"Belleville",value:X.city,onChange:we=>ue("city",we.target.value)})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"province",children:"Province"}),s.jsxs(Xt,{value:X.province,onValueChange:we=>ue("province",we),children:[s.jsx(qt,{children:s.jsx(Jt,{placeholder:"Select province"})}),s.jsxs(Gt,{children:[s.jsx(_e,{value:"ON",children:"Ontario"}),s.jsx(_e,{value:"QC",children:"Quebec"}),s.jsx(_e,{value:"BC",children:"British Columbia"}),s.jsx(_e,{value:"AB",children:"Alberta"}),s.jsx(_e,{value:"MB",children:"Manitoba"}),s.jsx(_e,{value:"SK",children:"Saskatchewan"}),s.jsx(_e,{value:"NS",children:"Nova Scotia"}),s.jsx(_e,{value:"NB",children:"New Brunswick"}),s.jsx(_e,{value:"NL",children:"Newfoundland"}),s.jsx(_e,{value:"PE",children:"PEI"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"postalCode",children:"Postal Code *"}),s.jsx(pe,{id:"postalCode",placeholder:"K8N 1A1",value:X.postalCode,onChange:we=>Ne(we.target.value),maxLength:7,className:S?"border-destructive":""}),S&&s.jsx("p",{className:"text-xs text-destructive",children:S})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"buzzerCode",children:"Buzzer Code (Optional)"}),s.jsx(pe,{id:"buzzerCode",placeholder:"e.g., #1234",value:X.buzzerCode,onChange:we=>ue("buzzerCode",we.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"entryPoint",children:"Entry Point"}),s.jsxs(Xt,{value:X.entryPoint,onValueChange:we=>ue("entryPoint",we),children:[s.jsx(qt,{children:s.jsx(Jt,{placeholder:"Select entry"})}),s.jsxs(Gt,{children:[s.jsx(_e,{value:"front-door",children:"Front Door"}),s.jsx(_e,{value:"side-door",children:"Side Door"}),s.jsx(_e,{value:"back-door",children:"Back Door"}),s.jsx(_e,{value:"concierge",children:"Concierge / Lobby"})]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{ref:ae,type:"file",accept:"image/*",onChange:je,className:"hidden"}),s.jsxs(K,{variant:"outline",className:"flex-1",onClick:()=>{var we;return(we=ae.current)==null?void 0:we.click()},children:[s.jsx(qs,{className:"w-4 h-4 mr-2"}),y?y.name:"Upload Entry Photo"]}),y&&s.jsx(K,{variant:"ghost",size:"sm",onClick:()=>v(null),className:"text-destructive",children:"Remove"})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Upload a photo of the entry point to help the PSW find the location easily."}),s.jsxs("div",{className:"flex items-start gap-2 p-3 bg-primary/5 border border-primary/20 rounded-lg",children:[s.jsx(Fn,{className:"w-4 h-4 text-primary mt-0.5 shrink-0"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.jsx("strong",{className:"text-foreground",children:"Privacy Note:"})," PSWs are instructed to only use the office line for access issues to protect your privacy."]})]}),O&&s.jsx("p",{className:"text-sm text-muted-foreground",children:"Verifying address..."}),j&&s.jsxs("div",{className:"flex items-start gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[s.jsx(At,{className:"w-4 h-4 text-red-600 shrink-0 mt-0.5"}),s.jsx("p",{className:"text-sm text-red-700",children:j})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($t,{className:"w-4 h-4 text-primary"}),s.jsx("h3",{className:"font-medium text-foreground",children:"Caregiver Preferences (Optional)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"preferredGender",children:"Preferred Gender of Caregiver"}),s.jsxs(Xt,{value:X.preferredGender,onValueChange:we=>ue("preferredGender",we),children:[s.jsx(qt,{children:s.jsx(Jt,{placeholder:"Select preference"})}),s.jsxs(Gt,{children:[s.jsx(_e,{value:"no-preference",children:"No Preference"}),s.jsx(_e,{value:"female",children:"Female"}),s.jsx(_e,{value:"male",children:"Male"})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"We'll try to match you with a caregiver of your preferred gender when possible"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(oe,{className:"flex items-center gap-2",children:[s.jsx(Oa,{className:"w-4 h-4 text-muted-foreground"}),"Preferred Languages (Optional)"]}),s.jsx(bx,{selectedLanguages:ee,onLanguagesChange:re,maxLanguages:3,label:"",description:"Select languages you'd prefer your caregiver to speak",placeholder:"Add preferred languages..."})]})]}),m==="someone-else"&&s.jsx("div",{className:"p-4 bg-muted rounded-lg",children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.jsx("strong",{className:"text-foreground",children:"Note:"})," All confirmations, invoices, and care reports will be sent to your email (",r,")."]})})]})]}),h===3&&s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{className:"pb-4",children:s.jsxs(Ee,{className:"text-lg flex items-center gap-2",children:[s.jsx(Lt,{className:"w-5 h-5 text-primary"}),"Service Details"]})}),s.jsxs(Q,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{children:"Select Care Types (Choose all that apply)"}),d?s.jsxs("div",{className:"flex items-center justify-center p-8",children:[s.jsx(Ut,{className:"w-6 h-6 animate-spin text-primary"}),s.jsx("span",{className:"ml-2 text-muted-foreground",children:"Loading services..."})]}):s.jsx("div",{className:"grid grid-cols-2 gap-2",children:fe.map(we=>{const Te=we.icon,Ke=A.includes(we.value);return s.jsxs(K,{variant:Ke?"default":"outline",className:`h-auto py-3 flex flex-col items-center gap-1 relative ${Ke?"bg-primary text-primary-foreground":""}`,onClick:()=>qe(we.value),children:[Ke&&s.jsx("div",{className:"absolute top-1 right-1",children:s.jsx(tn,{className:"w-3 h-3"})}),s.jsx(Te,{className:"w-5 h-5"}),s.jsx("span",{className:"text-xs text-center leading-tight",children:we.label})]},we.value)})})]}),A.length>0&&s.jsxs("div",{className:"p-3 bg-muted rounded-lg space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-foreground",children:"Selected Services:"}),s.jsxs("span",{className:"text-sm text-primary font-bold",children:["Base ",ba().minimumHours," Hour"]})]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:A.map(we=>{const Te=fe.find(pr=>pr.value===we),xt=ba().taskDurations[we]||0;return s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-primary/10 text-primary text-xs rounded-full",children:[Te==null?void 0:Te.label," (",b3(xt),")",s.jsx("button",{onClick:()=>qe(we),className:"hover:bg-primary/20 rounded-full p-0.5",children:s.jsx(Hr,{className:"w-3 h-3"})})]},we)})}),((Zt=Xe())==null?void 0:Zt.exceedsBaseHour)&&s.jsxs("div",{className:"flex items-start gap-2 p-2 bg-amber-50 border border-amber-200 rounded-lg mt-2",children:[s.jsx(At,{className:"w-4 h-4 text-amber-600 shrink-0 mt-0.5"}),s.jsx("p",{className:"text-xs text-amber-700",children:(mt=Xe())==null?void 0:mt.warningMessage})]}),ge&&s.jsxs("p",{className:"text-xs text-blue-600 flex items-center gap-1 mt-1",children:[s.jsx(Vh,{className:"w-3 h-3"}),"Doctor/Hospital visits: Final price adjusted based on actual visit duration."]})]}),ge&&s.jsxs("div",{className:"space-y-4 p-4 bg-blue-50 border border-blue-200 rounded-lg animate-fade-in",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ld,{className:"w-4 h-4 text-blue-600"}),s.jsx("h4",{className:"font-medium text-blue-900",children:"Hospital/Doctor Pick-up Details"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"pickupAddress",className:"text-blue-800",children:"Pick-up Address (Hospital/Clinic) *"}),s.jsx(pe,{id:"pickupAddress",placeholder:"e.g., Belleville General Hospital, 265 Dundas St E",value:X.pickupAddress,onChange:we=>ue("pickupAddress",we.target.value),className:"bg-white"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"pickupPostalCode",className:"text-blue-800",children:"Pick-up Location Postal Code *"}),s.jsx(pe,{id:"pickupPostalCode",placeholder:"K8N 1A1",value:X.pickupPostalCode,onChange:we=>{const Te=Wd(we.target.value);ue("pickupPostalCode",Te),T(null)},maxLength:7,className:`bg-white ${P?"border-destructive":""}`}),P&&s.jsx("p",{className:"text-xs text-destructive",children:P}),s.jsxs("p",{className:"text-xs text-blue-600",children:[s.jsx(St,{className:"w-3 h-3 inline mr-1"}),"PSW must be within 200m of this location to start the shift"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"doctorOfficeName",className:"text-blue-800",children:"Doctor's Office Name & Suite Number (Optional)"}),s.jsx(_n,{id:"doctorOfficeName",placeholder:"e.g., Dr. Smith Family Clinic, Suite 302",value:X.doctorOfficeName,onChange:we=>ue("doctorOfficeName",we.target.value),className:"bg-white",rows:2})]}),s.jsxs("p",{className:"text-xs text-blue-600 flex items-center gap-1",children:[s.jsx(Vh,{className:"w-3 h-3"}),"Final price adjusted based on actual visit duration."]})]}),s.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-orange-50 border border-orange-200 rounded-lg",children:[s.jsx(Co,{id:"asapBooking",checked:D,onCheckedChange:we=>I(we)}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs(oe,{htmlFor:"asapBooking",className:"font-medium cursor-pointer flex items-center gap-2",children:[s.jsx(qh,{className:"w-4 h-4 text-orange-500"}),"Request ASAP Service"]}),s.jsx("p",{className:"text-xs text-orange-700",children:"Immediate requests are non-refundable."})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(oe,{htmlFor:"serviceDate",children:[s.jsx(Lt,{className:"w-4 h-4 text-muted-foreground inline mr-2"}),"Service Date"]}),s.jsx(pe,{id:"serviceDate",type:"date",value:X.serviceDate,onChange:we=>ue("serviceDate",we.target.value)})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(oe,{htmlFor:"startTime",children:[s.jsx(Qe,{className:"w-4 h-4 text-muted-foreground inline mr-2"}),"Start Time"]}),s.jsx(pe,{id:"startTime",type:"time",value:X.startTime,onChange:we=>ue("startTime",we.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"endTime",children:"Calculated End Time"}),s.jsx("div",{className:"h-10 px-3 py-2 bg-muted rounded-md border border-input flex items-center",children:s.jsx("span",{className:Et()?"text-foreground":"text-muted-foreground",children:Et()||"Auto-calculated"})})]})]}),A.length>0&&X.startTime&&s.jsx("div",{className:"p-3 bg-primary/5 border border-primary/20 rounded-lg",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Qe,{className:"w-4 h-4 text-primary"}),s.jsx("span",{className:"text-muted-foreground",children:"Total Duration:"}),s.jsx("span",{className:"font-bold text-primary",children:b3(((zn=Xe())==null?void 0:zn.totalMinutes)||0)}),s.jsxs("span",{className:"text-muted-foreground",children:["(",X.startTime," - ",Et(),")"]})]})}),Xe()&&s.jsxs("div",{className:"p-4 bg-muted rounded-lg space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-muted-foreground",children:"Base Hour Charge"}),s.jsxs("span",{className:"text-xl font-bold text-foreground",children:["$",(Qt=Xe())==null?void 0:Qt.total.toFixed(2)]})]}),s.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:["Subtotal (",ba().minimumHours," hour min)"]}),s.jsxs("span",{children:["$",(aa=Xe())==null?void 0:aa.subtotal.toFixed(2)]})]}),((($r=Xe())==null?void 0:$r.surgeAmount)||0)>0&&s.jsxs("div",{className:"flex justify-between text-amber-600",children:[s.jsx("span",{children:"ASAP Fee"}),s.jsxs("span",{children:["+$",(xn=Xe())==null?void 0:xn.surgeAmount.toFixed(2)]})]}),(((Cr=Xe())==null?void 0:Cr.regionalSurcharge)||0)>0&&s.jsxs("div",{className:"flex justify-between text-blue-600",children:[s.jsx("span",{children:"Toronto/GTA Service Fee"}),s.jsxs("span",{children:["+$",(gt=Xe())==null?void 0:gt.regionalSurcharge.toFixed(2)]})]}),((Un=Xe())==null?void 0:Un.minimumFeeApplied)&&s.jsxs("div",{className:"flex justify-between text-green-600",children:[s.jsx("span",{children:"Minimum Booking Fee Applied"}),s.jsxs("span",{children:["$",ba().minimumBookingFee.toFixed(2)]})]})]}),((ns=Xe())==null?void 0:ns.exceedsBaseHour)&&s.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Note: Additional time may be billed in 15-minute increments if visit extends beyond 1 hour."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"specialNotes",children:"Special Notes (Optional)"}),s.jsx(_n,{id:"specialNotes",placeholder:"Any special requirements or preferences...",value:X.specialNotes,onChange:we=>ue("specialNotes",we.target.value)})]})]})]}),h===4&&s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{className:"pb-4",children:s.jsxs(Ee,{className:"text-lg flex items-center gap-2",children:[s.jsx(tn,{className:"w-5 h-5 text-primary"}),"Confirm Your Booking"]})}),s.jsxs(Q,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-3 p-4 bg-muted rounded-lg",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Patient"}),s.jsx("span",{className:"font-medium text-foreground",children:m==="myself"?t:X.patientName})]}),s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("span",{className:"text-muted-foreground",children:"Services"}),s.jsx("div",{className:"text-right",children:A.map(we=>{const Te=fe.find(Ke=>Ke.value===we);return s.jsx("span",{className:"block font-medium text-foreground text-sm",children:Te==null?void 0:Te.label},we)})})]}),ge&&X.pickupAddress&&s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("span",{className:"text-muted-foreground",children:"Pick-up Location"}),s.jsxs("div",{className:"text-right max-w-[60%]",children:[s.jsx("span",{className:"font-medium text-foreground text-sm block",children:X.pickupAddress}),s.jsx("span",{className:"text-xs text-muted-foreground",children:X.pickupPostalCode})]})]}),ge&&X.doctorOfficeName&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Doctor's Office"}),s.jsx("span",{className:"font-medium text-foreground text-right text-sm max-w-[60%]",children:X.doctorOfficeName})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Date"}),s.jsx("span",{className:"font-medium text-foreground",children:X.serviceDate})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Time"}),s.jsxs("span",{className:"font-medium text-foreground",children:[X.startTime," - ",Et()]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Base Hour"}),s.jsxs("span",{className:"font-medium text-primary",children:[ba().minimumHours," hour"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Address"}),s.jsx("span",{className:"font-medium text-foreground text-right text-sm max-w-[60%]",children:Y()})]}),X.entryPoint&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Entry"}),s.jsxs("span",{className:"font-medium text-foreground capitalize",children:[X.entryPoint.replace("-"," "),X.buzzerCode&&` (Buzzer: ${X.buzzerCode})`]})]}),y&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Entry Photo"}),s.jsx("span",{className:"text-primary text-sm",children:" Uploaded"})]}),Xe()&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between pt-2 border-t border-border",children:[s.jsx("span",{className:"font-medium text-foreground",children:"Total"}),s.jsxs("span",{className:"text-xl font-bold text-primary",children:["$",(Fs=Xe())==null?void 0:Fs.total.toFixed(2)]})]}),((ia=Xe())==null?void 0:ia.minimumFeeApplied)&&s.jsxs("p",{className:"text-xs text-green-600",children:["Minimum booking fee of $",ba().minimumBookingFee," applied."]}),(((La=Xe())==null?void 0:La.regionalSurcharge)||0)>0&&s.jsxs("p",{className:"text-xs text-blue-600",children:["Includes $",(gi=Xe())==null?void 0:gi.regionalSurcharge.toFixed(2)," Toronto/GTA service fee."]}),((oa=Xe())==null?void 0:oa.exceedsBaseHour)&&s.jsx("p",{className:"text-xs text-amber-600",children:"Additional time billed in 15-min increments if visit extends beyond 1 hour."})]})]}),s.jsxs("div",{className:"p-3 bg-primary/5 rounded-lg text-sm",children:[s.jsx("p",{className:"font-medium text-foreground mb-1",children:"Billing & Reports sent to:"}),s.jsx("p",{className:"text-muted-foreground",children:t}),s.jsx("p",{className:"text-muted-foreground",children:r})]}),s.jsxs("div",{className:"p-3 bg-muted rounded-lg text-xs text-muted-foreground",children:[s.jsx("p",{className:"font-medium text-foreground mb-1",children:"Billing Policy:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsx("li",{children:"All bookings include a 1-hour base charge"}),s.jsxs("li",{children:["Minimum booking fee: $",ba().minimumBookingFee]}),s.jsx("li",{children:"Up to 14 minutes over: No extra charge"}),s.jsx("li",{children:"15+ minutes over: Billed in 15-minute blocks ($/4 of hourly rate)"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Co,{id:"agreePolicy",checked:b,onCheckedChange:we=>N(we)}),s.jsx(oe,{htmlFor:"agreePolicy",className:"text-sm text-muted-foreground cursor-pointer",children:"I agree to the cancellation policy. Cancellations within 4 hours and ASAP bookings are non-refundable."})]}),s.jsx(e9,{}),s.jsx("div",{className:"text-xs text-muted-foreground bg-muted p-3 rounded",children:"Final price adjusted based on actual visit duration."})]})]}),h===5&&U&&s.jsx(Qz,{amount:Math.max(20,((Tn=Xe())==null?void 0:Tn.total)||20),customerEmail:i,customerName:o,bookingDetails:{serviceDate:X.serviceDate,services:A.map(we=>{const Te=c.find(Ke=>Ke.id===we);return(Te==null?void 0:Te.name)||we}).join(", ")},onPaymentSuccess:st,onPaymentError:pt,onCancel:()=>{$(!1),f(4)}}),m&&!U&&s.jsxs("div",{className:"flex gap-3 mt-6",children:[h>1&&s.jsxs(K,{variant:"outline",className:"flex-1",onClick:ce,children:[s.jsx($n,{className:"w-4 h-4 mr-2"}),"Back"]}),h<4?s.jsxs(K,{variant:"brand",className:"flex-1",onClick:Me,disabled:O||h===3&&A.length===0,children:[O?"Checking...":"Continue",s.jsx(vk,{className:"w-4 h-4 ml-2"})]}):s.jsxs(K,{variant:"brand",className:"flex-1",onClick:$e,disabled:!b||B,children:[s.jsx(ms,{className:"w-4 h-4 mr-2"}),"Proceed to Payment"]})]})]})},j9e=()=>{const{user:e,clientProfile:t}=wx(),[r,n]=x.useState([]),[a,i]=x.useState(!0),o=async()=>{if(!(e!=null&&e.email)){n([]),i(!1);return}try{const{data:y,error:v}=await de.from("bookings").select("*").eq("client_email",e.email).order("scheduled_date",{ascending:!1});v?console.error("Error fetching bookings:",v):n(y||[])}catch(y){console.error("Error fetching bookings:",y)}finally{i(!1)}};x.useEffect(()=>{e!=null&&e.email?o():i(!1)},[e==null?void 0:e.email]);const l=r.filter(y=>y.status==="in-progress"),c=r.filter(y=>{const v=new Date(y.scheduled_date),b=new Date;return b.setHours(0,0,0,0),y.status==="active"&&y.psw_assigned&&v>=b}),d=r.filter(y=>{const v=new Date(y.scheduled_date),b=new Date;return b.setHours(0,0,0,0),y.status==="pending"&&v>=b}),h=[...l,...c],f=r.filter(y=>{const v=new Date(y.scheduled_date),b=new Date;return b.setHours(0,0,0,0),(y.status==="pending"||y.status==="active")&&v>=b}),m=r.filter(y=>y.status==="completed");return{bookings:r,activeBookings:h,upcomingBookings:f,pastBookings:m,pendingBookings:d,confirmedBookings:c,inProgressBookings:l,isLoading:a,refetch:o,getSavedClientInfo:()=>{if(t)return{name:t.full_name||t.first_name||"",email:t.email,phone:t.phone||"",address:t.default_address||"",postalCode:t.default_postal_code||""};if(r.length>0){const y=r[0];return{name:y.client_name,email:y.client_email,phone:y.client_phone||"",address:y.client_address,postalCode:""}}return null}}},N9e=()=>{var E;const{user:e,clientProfile:t,isAuthenticated:r,isLoading:n,signOut:a}=wx(),{activeBookings:i,upcomingBookings:o,pendingBookings:l,confirmedBookings:c,inProgressBookings:d,bookings:h,isLoading:f,refetch:m}=j9e(),p=ps(),[y,v]=x.useState("home"),[b,N]=x.useState(!1);if(x.useEffect(()=>{const D=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;N(D)},[]),!n&&!r)return s.jsx(Yh,{to:"/client-login",replace:!0});if(n)return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"sticky top-0 z-40 bg-background/95 backdrop-blur-sm border-b border-border",children:s.jsxs("div",{className:"flex items-center justify-between px-4 h-16 max-w-md mx-auto",children:[s.jsx(Wu,{className:"h-10 w-32"}),s.jsx(Wu,{className:"h-8 w-20"})]})}),s.jsxs("main",{className:"px-4 py-6 pb-24 max-w-md mx-auto space-y-6",children:[s.jsx(Wu,{className:"h-24 w-full"}),s.jsx(Wu,{className:"h-48 w-full"}),s.jsx(Wu,{className:"h-32 w-full"})]})]});const j=(t==null?void 0:t.full_name)||(t==null?void 0:t.first_name)||((E=e==null?void 0:e.email)==null?void 0:E.split("@")[0])||"there",w=(e==null?void 0:e.email)||"",S=(t==null?void 0:t.first_name)||j.split(" ")[0],C=(t==null?void 0:t.phone)||"",P=async()=>{await a(),p("/")},T=()=>{m(),v("home")};if(y==="book")return s.jsx("div",{className:"min-h-screen bg-background",children:s.jsx("div",{className:"max-w-md mx-auto px-4 py-6",children:s.jsx(w9e,{onBack:T,clientName:j,clientEmail:w,clientPhone:C})})});const O=()=>{switch(y){case"home":return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-foreground",children:["Welcome, ",S]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your care services"})]}),s.jsx(K,{variant:"ghost",size:"icon",onClick:P,className:"text-muted-foreground hover:text-destructive",children:s.jsx(Wh,{className:"w-5 h-5"})})]}),s.jsx(y9e,{pendingBookings:l,confirmedBookings:c,inProgressBookings:d}),s.jsxs(K,{variant:"brand",size:"lg",className:"w-full h-14 text-base font-semibold shadow-card",onClick:()=>v("book"),children:[s.jsx(xo,{className:"w-5 h-5 mr-2"}),h.length>0?"Book Another Service":"Request New Service"]}),s.jsx(g9e,{clientName:j,activeBookings:i}),s.jsx(x9e,{upcomingBookings:o,onRefetch:m})]});case"history":return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Service History"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Past care sheets and invoices"})]}),s.jsx(v9e,{})]});default:return null}};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"sticky top-0 z-40 bg-background/95 backdrop-blur-sm border-b border-border",children:s.jsx("div",{className:"flex items-center justify-between px-4 h-16 max-w-md mx-auto",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:Rr,alt:"PSW Direct Logo",className:"h-10 w-auto"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold text-foreground",children:"My Care"}),!b&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-muted-foreground",children:"|"}),s.jsxs("a",{href:Yhe(),className:"text-sm text-primary hover:underline flex items-center gap-1",target:"_blank",rel:"noopener noreferrer",children:[s.jsx(nu,{className:"w-3.5 h-3.5"}),"Install App"]})]})]})]})})}),s.jsx("main",{className:"px-4 py-6 pb-24 max-w-md mx-auto",children:O()}),s.jsx(c9e,{activeTab:y,onTabChange:v})]})},_9e=()=>{const e=ps(),[t,r]=x.useState(""),[n,a]=x.useState(""),[i,o]=x.useState(!1),[l,c]=x.useState(!1),[d,h]=x.useState(!1),[f,m]=x.useState("password"),[p,y]=x.useState(!1),[v,b]=x.useState(!1),N=async S=>{if(S.preventDefault(),!t||!t.includes("@")){Z.error("Please enter a valid email address");return}if(!n||n.length<6){Z.error("Please enter your password (at least 6 characters)");return}c(!0);try{const{data:C,error:P}=await de.auth.signInWithPassword({email:t,password:n});P?(console.error("Password login error:",P),P.message.includes("Invalid login credentials")?Z.error("Invalid email or password",{description:"Please check your credentials or use a magic link to sign in."}):Z.error("Login failed",{description:P.message})):C.session&&(Z.success("Welcome back!"),e("/client",{replace:!0}))}catch(C){console.error("Password login exception:",C),Z.error("Something went wrong")}finally{c(!1)}},j=async S=>{if(S.preventDefault(),!t||!t.includes("@")){Z.error("Please enter a valid email address");return}c(!0);try{const{data:C,error:P}=await de.functions.invoke("reset-password",{body:{email:t,redirectTo:`${window.location.origin}/client`}});P?(console.error("Password reset error:",P),Z.error("Failed to send reset email",{description:"Please try again later."})):(b(!0),Z.success("Password reset email sent!",{description:"Check your email to reset your password"}))}catch(C){console.error("Password reset exception:",C),Z.error("Something went wrong")}finally{c(!1)}},w=async S=>{if(S.preventDefault(),!t||!t.includes("@")){Z.error("Please enter a valid email address");return}c(!0);try{const C=`${window.location.origin}/client`,{error:P}=await de.auth.signInWithOtp({email:t,options:{emailRedirectTo:C}});P?(console.error("Magic link error:",P),Z.error("Failed to send magic link",{description:P.message})):(h(!0),Z.success("Magic link sent!",{description:"Check your email to sign in"}))}catch(C){console.error("Magic link exception:",C),Z.error("Something went wrong")}finally{c(!1)}};return v?s.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[s.jsx("header",{className:"sticky top-0 z-40 bg-background/95 backdrop-blur-sm border-b border-border",children:s.jsx("div",{className:"flex items-center gap-3 px-4 h-16 max-w-md mx-auto",children:s.jsxs(dn,{to:"/",className:"flex items-center gap-3",children:[s.jsx("img",{src:Rr,alt:"PSW Direct Logo",className:"h-10 w-auto"}),s.jsx("span",{className:"font-semibold text-foreground",children:"PSW Direct"})]})})}),s.jsx("main",{className:"flex-1 flex items-center justify-center px-4 py-8",children:s.jsx(J,{className:"w-full max-w-md shadow-card",children:s.jsxs(Q,{className:"p-8 text-center space-y-6",children:[s.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto",children:s.jsx(f0,{className:"w-8 h-8 text-primary"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Check Your Email"}),s.jsxs("p",{className:"text-muted-foreground",children:["We sent a password reset link to ",s.jsx("strong",{className:"text-foreground",children:t})]})]}),s.jsxs("div",{className:"bg-muted rounded-lg p-4 text-sm text-muted-foreground space-y-2",children:[s.jsx("p",{children:"Click the link in the email to reset your password."}),s.jsx("p",{className:"text-xs",children:"The link expires in 1 hour."})]}),s.jsx("div",{className:"pt-4 space-y-3",children:s.jsx(K,{variant:"outline",className:"w-full",onClick:()=>{b(!1),y(!1)},children:"Back to Login"})})]})})})]}):p?s.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[s.jsx("header",{className:"sticky top-0 z-40 bg-background/95 backdrop-blur-sm border-b border-border",children:s.jsxs("div",{className:"flex items-center justify-between px-4 h-16 max-w-md mx-auto",children:[s.jsxs(dn,{to:"/",className:"flex items-center gap-3",children:[s.jsx("img",{src:Rr,alt:"PSW Direct Logo",className:"h-10 w-auto"}),s.jsx("span",{className:"font-semibold text-foreground",children:"PSW Direct"})]}),s.jsxs(K,{variant:"ghost",size:"sm",onClick:()=>y(!1),className:"gap-2",children:[s.jsx($n,{className:"w-4 h-4"}),"Back"]})]})}),s.jsx("main",{className:"flex-1 flex items-center justify-center px-4 py-8",children:s.jsxs(J,{className:"w-full max-w-md shadow-card",children:[s.jsxs(ke,{className:"text-center pb-4",children:[s.jsx("div",{className:"w-14 h-14 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(f0,{className:"w-7 h-7 text-primary"})}),s.jsx(Ee,{className:"text-2xl",children:"Reset Password"}),s.jsx(Ge,{children:"Enter your email and we'll send you a link to reset your password"})]}),s.jsxs(Q,{className:"space-y-6",children:[s.jsxs("form",{onSubmit:j,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"email-reset",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(hn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),s.jsx(pe,{id:"email-reset",type:"email",placeholder:"your@email.com",value:t,onChange:S=>r(S.target.value),className:"pl-10",required:!0,autoComplete:"email"})]})]}),s.jsx(K,{type:"submit",className:"w-full h-12",disabled:l,children:l?s.jsxs(s.Fragment,{children:[s.jsx(Ut,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending..."]}):s.jsxs(s.Fragment,{children:[s.jsx(hn,{className:"w-4 h-4 mr-2"}),"Send Reset Link"]})})]}),s.jsx("div",{className:"bg-muted/50 rounded-lg p-3 text-center text-sm text-muted-foreground",children:s.jsxs("p",{children:["Remember your password? ",s.jsx("button",{type:"button",onClick:()=>y(!1),className:"text-primary hover:underline",children:"Sign in"})]})})]})]})})]}):d?s.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[s.jsx("header",{className:"sticky top-0 z-40 bg-background/95 backdrop-blur-sm border-b border-border",children:s.jsx("div",{className:"flex items-center gap-3 px-4 h-16 max-w-md mx-auto",children:s.jsxs(dn,{to:"/",className:"flex items-center gap-3",children:[s.jsx("img",{src:Rr,alt:"PSW Direct Logo",className:"h-10 w-auto"}),s.jsx("span",{className:"font-semibold text-foreground",children:"PSW Direct"})]})})}),s.jsx("main",{className:"flex-1 flex items-center justify-center px-4 py-8",children:s.jsx(J,{className:"w-full max-w-md shadow-card",children:s.jsxs(Q,{className:"p-8 text-center space-y-6",children:[s.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto",children:s.jsx(es,{className:"w-8 h-8 text-primary"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Check Your Email"}),s.jsxs("p",{className:"text-muted-foreground",children:["We sent a magic link to ",s.jsx("strong",{className:"text-foreground",children:t})]})]}),s.jsxs("div",{className:"bg-muted rounded-lg p-4 text-sm text-muted-foreground space-y-2",children:[s.jsx("p",{children:"Click the link in the email to sign in instantly."}),s.jsx("p",{className:"text-xs",children:"The link expires in 1 hour."})]}),s.jsxs("div",{className:"pt-4 space-y-3",children:[s.jsx(K,{variant:"outline",className:"w-full",onClick:()=>h(!1),children:"Try a different email"}),s.jsx(dn,{to:"/",children:s.jsxs(K,{variant:"ghost",className:"w-full gap-2",children:[s.jsx($n,{className:"w-4 h-4"}),"Back to Home"]})})]})]})})})]}):s.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[s.jsx("header",{className:"sticky top-0 z-40 bg-background/95 backdrop-blur-sm border-b border-border",children:s.jsxs("div",{className:"flex items-center justify-between px-4 h-16 max-w-md mx-auto",children:[s.jsxs(dn,{to:"/",className:"flex items-center gap-3",children:[s.jsx("img",{src:Rr,alt:"PSW Direct Logo",className:"h-10 w-auto"}),s.jsx("span",{className:"font-semibold text-foreground",children:"PSW Direct"})]}),s.jsxs(K,{variant:"ghost",size:"sm",onClick:()=>e("/"),className:"gap-2",children:[s.jsx($n,{className:"w-4 h-4"}),"Back"]})]})}),s.jsx("main",{className:"flex-1 flex items-center justify-center px-4 py-8",children:s.jsxs(J,{className:"w-full max-w-md shadow-card",children:[s.jsxs(ke,{className:"text-center pb-4",children:[s.jsx("div",{className:"w-14 h-14 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Hh,{className:"w-7 h-7 text-primary"})}),s.jsx(Ee,{className:"text-2xl",children:"Client Portal"}),s.jsx(Ge,{children:"Sign in to track your care, view history, and rebook instantly"})]}),s.jsxs(Q,{className:"space-y-6",children:[s.jsxs(qi,{value:f,onValueChange:S=>m(S),children:[s.jsxs(ii,{className:"grid w-full grid-cols-2",children:[s.jsxs(ft,{value:"password",className:"gap-2",children:[s.jsx(Jn,{className:"w-4 h-4"}),"Password"]}),s.jsxs(ft,{value:"magic-link",className:"gap-2",children:[s.jsx(hn,{className:"w-4 h-4"}),"Magic Link"]})]}),s.jsxs(Ct,{value:"password",className:"space-y-4 mt-4",children:[s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"email-password",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(hn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),s.jsx(pe,{id:"email-password",type:"email",placeholder:"your@email.com",value:t,onChange:S=>r(S.target.value),className:"pl-10",required:!0,autoComplete:"email"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"password",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Jn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),s.jsx(pe,{id:"password",type:i?"text":"password",placeholder:"",value:n,onChange:S=>a(S.target.value),className:"pl-10 pr-10",required:!0,autoComplete:"current-password"}),s.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:i?s.jsx(ai,{className:"w-5 h-5"}):s.jsx(Ms,{className:"w-5 h-5"})})]})]}),s.jsx(K,{type:"submit",className:"w-full h-12",disabled:l,children:l?s.jsxs(s.Fragment,{children:[s.jsx(Ut,{className:"w-4 h-4 mr-2 animate-spin"}),"Signing in..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Jn,{className:"w-4 h-4 mr-2"}),"Sign In"]})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("button",{type:"button",onClick:()=>y(!0),className:"w-full text-sm text-primary hover:underline",children:"Forgot your password?"}),s.jsx("div",{className:"bg-muted/50 rounded-lg p-3 text-center text-sm text-muted-foreground",children:s.jsx("p",{children:"Use the password you created during your first booking."})})]})]}),s.jsxs(Ct,{value:"magic-link",className:"space-y-4 mt-4",children:[s.jsxs("form",{onSubmit:w,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"email-magic",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(hn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),s.jsx(pe,{id:"email-magic",type:"email",placeholder:"your@email.com",value:t,onChange:S=>r(S.target.value),className:"pl-10",required:!0,autoComplete:"email"})]})]}),s.jsx(K,{type:"submit",className:"w-full h-12",disabled:l,children:l?s.jsxs(s.Fragment,{children:[s.jsx(Ut,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending..."]}):s.jsxs(s.Fragment,{children:[s.jsx(hn,{className:"w-4 h-4 mr-2"}),"Send Magic Link"]})})]}),s.jsx("div",{className:"bg-muted/50 rounded-lg p-3 text-center text-sm text-muted-foreground",children:s.jsx("p",{children:"We'll send you a secure link to sign in instantly. No password needed!"})})]})]}),s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:["New client?"," ",s.jsx(dn,{to:"/",className:"text-primary font-medium hover:underline",children:"Book your first service"})]})})]})]})}),s.jsx("footer",{className:"border-t border-border py-4 px-4",children:s.jsx("div",{className:"max-w-md mx-auto text-center",children:s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Are you a caregiver?"," ",s.jsx(dn,{to:"/psw-login",className:"text-primary hover:underline",children:"PSW Login"})]})})})]})},S9e=({isOpen:e,onClose:t,onConfirm:r,shiftDetails:n})=>{const[a,i]=x.useState(!1),o=()=>{a&&(r(),i(!1))},l=()=>{i(!1),t()};return s.jsx(hr,{open:e,onOpenChange:l,children:s.jsxs(or,{className:"sm:max-w-md",children:[s.jsxs(lr,{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-amber-100 flex items-center justify-center",children:s.jsx(Wr,{className:"w-6 h-6 text-amber-600"})}),s.jsx(cr,{className:"text-xl",children:"Professional Agreement"})]}),s.jsx(bo,{className:"text-left",children:n&&s.jsxs("p",{className:"mb-3 font-medium text-foreground",children:["Shift: ",n.clientName,"  ",n.date,"  ",n.time]})})]}),s.jsxs("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[s.jsx("p",{className:"text-sm font-semibold text-amber-800 uppercase tracking-wide mb-2",children:"IMPORTANT"}),s.jsxs("p",{className:"text-sm text-amber-900 leading-relaxed",children:["By claiming this shift, you agree to arrive on time. Any missed or late shifts will result in ",s.jsx("strong",{children:"immediate removal from the platform"})," per our professional standards."]})]}),s.jsxs("div",{className:"flex items-start space-x-3 pt-2",children:[s.jsx(Co,{id:"accept-terms",checked:a,onCheckedChange:c=>i(c===!0),className:"mt-0.5"}),s.jsx(oe,{htmlFor:"accept-terms",className:"text-sm text-muted-foreground cursor-pointer leading-relaxed",children:"I understand and agree to uphold the professional standards required. I confirm I will arrive on time and complete this shift as scheduled."})]}),s.jsxs(yo,{className:"flex-col sm:flex-row gap-2 pt-4",children:[s.jsx(K,{variant:"outline",onClick:l,className:"w-full sm:w-auto",children:"Cancel"}),s.jsxs(K,{variant:"brand",onClick:o,disabled:!a,className:"w-full sm:w-auto",children:[s.jsx(Kt,{className:"w-4 h-4 mr-2"}),"Accept & Claim Shift"]})]})]})})},WA=e=>({id:e.id,firstName:e.first_name,lastName:e.last_name,email:e.email,phone:e.phone||"",gender:e.gender,homePostalCode:e.home_postal_code,homeCity:e.home_city,profilePhotoUrl:e.profile_photo_url,profilePhotoName:e.profile_photo_name,hscpoaNumber:e.hscpoa_number,policeCheckUrl:e.police_check_url,policeCheckName:e.police_check_name,policeCheckDate:e.police_check_date,languages:e.languages||["en"],vettingStatus:e.vetting_status,vettingUpdatedAt:e.vetting_updated_at,vettingNotes:e.vetting_notes,expiredDueToPoliceCheck:e.expired_due_to_police_check,appliedAt:e.applied_at,approvedAt:e.approved_at,yearsExperience:e.years_experience,certifications:e.certifications,hasOwnTransport:e.has_own_transport,licensePlate:e.license_plate,availableShifts:e.available_shifts,vehicleDisclaimer:e.vehicle_disclaimer,vehiclePhotoUrl:e.vehicle_photo_url,vehiclePhotoName:e.vehicle_photo_name}),xY=async e=>{const{data:t,error:r}=await de.from("psw_profiles").select("*").eq("id",e).single();return r?(console.error("Error fetching PSW profile:",r),null):t?WA(t):null},vY=async e=>{const{data:t,error:r}=await de.from("psw_profiles").select("*").eq("email",e.toLowerCase()).single();return r?(r.code!=="PGRST116"&&console.error("Error fetching PSW profile by email:",r),null):t?WA(t):null},C9e=async(e,t,r)=>{const n={vetting_status:t,vetting_updated_at:new Date().toISOString()};n.vetting_notes=r,n.approved_at=new Date().toISOString();const{data:a,error:i}=await de.from("psw_profiles").update(n).eq("id",e).select().single();return i?(console.error("Error updating vetting status:",i),null):a?WA(a):null},ay=e=>new Promise((t,r)=>{const n=new FileReader;n.onloadend=()=>t(n.result),n.onerror=r,n.readAsDataURL(e)}),P9e=25,iy=75,k9e=()=>{const{user:e}=na(),[t,r]=x.useState([]),[n,a]=x.useState(null),[i,o]=x.useState(!1),[l,c]=x.useState(null),[d,h]=x.useState(!1),[f,m]=x.useState(!0);x.useEffect(()=>{e!=null&&e.id&&xY(e.id).then(E=>{c(E),h((E==null?void 0:E.vettingStatus)==="approved"),m(!1)})},[e==null?void 0:e.id]);const p=x.useMemo(()=>e!=null&&e.id?Tz(e.id):["en"],[e==null?void 0:e.id]);x.useEffect(()=>{(async()=>{vfe();const I=await bI();yI(I),y()})();const D=setInterval(async()=>{const I=await bI();yI(I),y()},3e4);return()=>clearInterval(D)},[]);const y=()=>{const E=hfe();r(E)},v=E=>{const[D,I]=E.scheduledStart.split(":").map(Number),[A,V]=E.scheduledEnd.split(":").map(Number),U=D*60+I,H=(A*60+V-U)/60,F=H*P9e,R=mE(void 0,E.postalCode),z=R?R.pswBonus*H:0,G=R&&R.pswFlatBonus||0;return{basePay:F,urbanBonus:z,flatBonus:G,total:F+z+G,hasUrbanBonus:!!R}},b=E=>l!=null&&l.homePostalCode?pE(l.homePostalCode,E.postalCode):null,N=E=>!E.preferredLanguages||E.preferredLanguages.length===0?!1:ofe((e==null?void 0:e.id)||"",E.preferredLanguages),j=E=>{if(!(l!=null&&l.homePostalCode))return!0;const D=b(E);return D===null?!0:D<=iy},w=E=>!E.preferredGender||E.preferredGender==="no-preference"?!0:!(l!=null&&l.gender)||l.gender==="prefer-not-to-say"||l.gender==="other"?!1:l.gender===E.preferredGender,S=E=>!j(E)||!w(E)?!1:!!(!E.preferredLanguages||E.preferredLanguages.length===0||N(E)||dfe(E.bookingId)),C=x.useMemo(()=>d?t.filter(S):[],[t,p,l==null?void 0:l.homePostalCode,d]),P=E=>{a(E),o(!0)},T=()=>{if(!n||!e)return;const E=e.id||"psw-001";if(console.log("PSWAvailableJobsTab - Claiming shift with PSW ID:",E),mfe(E)){Z.error("Complete your active shift first",{description:"You must complete your current shift and submit the care sheet before accepting a new job."}),o(!1),a(null);return}const D=l==null?void 0:l.profilePhotoUrl,I=l==null?void 0:l.vehiclePhotoUrl,A=l==null?void 0:l.licensePlate;Mz(n.id,E,e.name||"PSW User",D,I,A)?(console.log("PSWAvailableJobsTab - Shift claimed successfully:",n.id),Z.success("Job accepted!",{description:`${n.clientFirstName}'s full address and phone number are now visible in your schedule.`}),y()):Z.error("Failed to accept job. It may have been claimed by someone else."),o(!1),a(null)},O=E=>{const D=E.split(",");return D.length>=2?D[D.length-2].trim():"Area within radius"};return f?s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Available Jobs"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Loading..."})]})}):d?C.length===0?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Available Jobs"}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Jobs within ",iy,"km of your location"]})]}),s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mx-auto mb-4",children:s.jsx(Gp,{className:"w-8 h-8 text-muted-foreground"})}),s.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No Available Jobs"}),s.jsx("p",{className:"text-muted-foreground",children:"Check back later for new opportunities"}),!(l!=null&&l.homePostalCode)&&s.jsx("p",{className:"text-xs text-amber-600 mt-2",children:"Set your home address in Profile to see distance-filtered jobs"})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Available Jobs"}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[C.length," job",C.length!==1?"s":""," within ",iy,"km"]})]}),s.jsx("div",{className:"space-y-3",children:C.map(E=>{var $;const D=N(E),I=E.preferredLanguages&&E.preferredLanguages.length>0,A=v(E),V=O(E.patientAddress),U=b(E);return s.jsx(J,{className:`shadow-card ${D?"ring-2 ring-primary/50":""}`,children:s.jsxs(Q,{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx($t,{className:"w-5 h-5 text-primary"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-foreground",children:E.clientFirstName}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[s.jsx(Lt,{className:"w-3 h-3"}),s.jsx("span",{children:E.scheduledDate})]})]})]}),s.jsxs("div",{className:"flex flex-col gap-1 items-end",children:[s.jsx(ne,{variant:"secondary",className:"bg-emerald-100 text-emerald-700",children:"Available"}),D&&s.jsxs(ne,{className:"bg-primary/10 text-primary border-primary/20 flex items-center gap-1",children:[s.jsx(Oa,{className:"w-3 h-3"}),"Language Match"]})]})]}),s.jsxs("div",{className:"space-y-2 text-sm mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(Qe,{className:"w-4 h-4"}),s.jsxs("span",{children:[E.scheduledStart," - ",E.scheduledEnd]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(St,{className:"w-4 h-4"}),s.jsx("span",{children:V}),U!==null&&s.jsxs(ne,{variant:"outline",className:"text-xs ml-1",children:[s.jsx(el,{className:"w-3 h-3 mr-1"}),Math.round(U),"km"]})]}),I&&s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(Oa,{className:"w-4 h-4"}),s.jsxs("span",{children:["Preferred: ",($=E.preferredLanguages)==null?void 0:$.map(Vd).join(", ")]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-primary font-medium",children:[s.jsx(hs,{className:"w-4 h-4"}),s.jsxs("span",{children:["Est. $",A.total.toFixed(2)]}),A.hasUrbanBonus&&s.jsxs(ne,{className:"bg-emerald-100 text-emerald-700 text-xs",children:["+$",(A.urbanBonus+A.flatBonus).toFixed(0)," Urban Bonus"]})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:E.services.map((H,F)=>s.jsx(ne,{variant:"outline",className:"text-xs",children:H},F))}),s.jsxs(K,{variant:"brand",className:"w-full",onClick:()=>P(E),children:["Accept Job",s.jsx(Pc,{className:"w-4 h-4 ml-2"})]})]})},E.id)})}),s.jsx(S9e,{isOpen:i,onClose:()=>{o(!1),a(null)},onConfirm:T,shiftDetails:n?{clientName:n.clientFirstName,date:n.scheduledDate,time:`${n.scheduledStart} - ${n.scheduledEnd}`}:void 0})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Available Jobs"}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Jobs within ",iy,"km of your location"]})]}),s.jsx(J,{className:"shadow-card border-amber-200 bg-amber-50 dark:bg-amber-950/20",children:s.jsxs(Q,{className:"p-6 text-center",children:[s.jsx(Wr,{className:"w-12 h-12 text-amber-600 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-amber-800 dark:text-amber-200 mb-2",children:"Pending Approval"}),s.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:"Your application is being reviewed. You will be able to see and accept jobs once approved."})]})})]})},E9e=({onSelectShift:e})=>{const{user:t}=na(),[r,n]=x.useState([]),[a,i]=x.useState(null),[o,l]=x.useState(!1),[c,d]=x.useState(Ea);x.useEffect(()=>{Kf().then(d)},[]),x.useEffect(()=>{t!=null&&t.id&&h();const b=setInterval(h,3e4);return()=>clearInterval(b)},[t==null?void 0:t.id]);const h=()=>{const b=(t==null?void 0:t.id)||"psw-001";console.log("PSWUpcomingTab - Loading shifts for PSW ID:",b);const N=ffe(b);console.log("PSWUpcomingTab - Found shifts:",N);const j=N.filter(w=>w.status==="claimed");j.sort((w,S)=>new Date(`${w.scheduledDate} ${w.scheduledStart}`).getTime()-new Date(`${S.scheduledDate} ${S.scheduledStart}`).getTime()),n(j)},f=b=>{const N=new Date(`${b.scheduledDate} ${b.scheduledStart}`),j=new Date;return(N.getTime()-j.getTime())/(1e3*60*60)<24},m=b=>{i(b),l(!0)},p=()=>{if(!a)return;const b=f(a);ou(a.id,{pswId:"",pswName:"",claimedAt:void 0,agreementAccepted:!1,status:"available"})?(b?(Z.warning("Shift cancelled - Late cancellation recorded",{description:"This cancellation has been noted. Repeated late cancellations may affect your standing."}),console.log(" LATE CANCELLATION:",{shiftId:a.id,pswId:t==null?void 0:t.id,pswName:t==null?void 0:t.name,hoursBeforeShift:"< 24 hours",timestamp:new Date().toISOString()})):Z.success("Shift cancelled successfully",{description:"The shift is now available for other PSWs."}),h()):Z.error("Failed to cancel shift. Please try again."),l(!1),i(null)},y=(b,N)=>{N.stopPropagation();const j=encodeURIComponent(b);window.open(`https://www.google.com/maps/dir/?api=1&destination=${j}`,"_blank")},v=b=>{b.stopPropagation(),window.open(`tel:${c.replace(/\D/g,"")}`,"_self")};return r.length===0?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"My Schedule"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Your upcoming claimed shifts"})]}),s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mx-auto mb-4",children:s.jsx(Lt,{className:"w-8 h-8 text-muted-foreground"})}),s.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No Upcoming Shifts"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Claim available shifts to add them to your schedule"})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"My Schedule"}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[r.length," upcoming shift",r.length!==1?"s":""]})]}),s.jsx("div",{className:"space-y-3",children:r.map(b=>{const N=f(b);return s.jsx(J,{className:"shadow-card hover:shadow-card-hover transition-shadow cursor-pointer",onClick:()=>e==null?void 0:e(b),children:s.jsxs(Q,{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx($t,{className:"w-5 h-5 text-primary"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-foreground",children:b.clientName}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[s.jsx(Lt,{className:"w-3 h-3"}),s.jsx("span",{children:b.scheduledDate})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ne,{className:"bg-blue-100 text-blue-700 border-blue-200",children:"Claimed"}),s.jsx(Pc,{className:"w-5 h-5 text-muted-foreground"})]})]}),s.jsxs("div",{className:"space-y-2 text-sm mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(Qe,{className:"w-4 h-4"}),s.jsxs("span",{children:[b.scheduledStart," - ",b.scheduledEnd]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(St,{className:"w-4 h-4"}),s.jsx("span",{className:"flex-1",children:b.patientAddress}),s.jsx(K,{variant:"ghost",size:"sm",className:"h-6 px-2",onClick:j=>y(b.patientAddress,j),children:s.jsx(el,{className:"w-3 h-3"})})]}),s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(JQ,{className:"w-4 h-4"}),s.jsx("span",{className:"flex-1",children:"Contact Office"}),s.jsxs(K,{variant:"outline",size:"sm",className:"h-6 px-2 text-primary border-primary/30",onClick:j=>v(j),children:[s.jsx(Fn,{className:"w-3 h-3 mr-1"}),"Call Office"]})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:b.services.map((j,w)=>s.jsx(ne,{variant:"outline",className:"text-xs",children:j},w))}),s.jsxs("div",{className:"flex gap-2 pt-2 border-t border-border",children:[s.jsx(K,{variant:"brand",className:"flex-1",onClick:j=>{j.stopPropagation(),e==null||e(b)},children:"Start Shift"}),s.jsx(K,{variant:"outline",className:"border-destructive/30 text-destructive hover:bg-destructive/10",onClick:j=>{j.stopPropagation(),m(b)},children:s.jsx(Hr,{className:"w-4 h-4"})})]}),N&&s.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-amber-600",children:[s.jsx(Wr,{className:"w-3 h-3"}),s.jsx("span",{children:"Late cancellation (within 24h)"})]})]})},b.id)})}),s.jsx(di,{open:o,onOpenChange:l,children:s.jsxs(Ia,{children:[s.jsxs(ks,{children:[s.jsxs(Ts,{className:"flex items-center gap-2",children:[s.jsx(Wr,{className:"w-5 h-5 text-destructive"}),"Cancel Shift?"]}),s.jsxs(As,{className:"space-y-3",children:[s.jsxs("p",{children:["Are you sure you want to cancel your shift with"," ",s.jsx("strong",{children:a==null?void 0:a.clientFirstName})," on"," ",s.jsx("strong",{children:a==null?void 0:a.scheduledDate}),"?"]}),a&&f(a)&&s.jsxs("div",{className:"p-3 bg-destructive/10 rounded-lg border border-destructive/20",children:[s.jsx("p",{className:"text-sm font-medium text-destructive",children:" Late Cancellation Warning"}),s.jsx("p",{className:"text-sm text-destructive/90 mt-1",children:"This shift starts in less than 24 hours. Late cancellations are recorded and may affect your standing."})]}),s.jsxs("div",{className:"p-3 bg-muted rounded-lg text-sm",children:[s.jsx("p",{className:"font-medium text-foreground mb-1",children:"Cancellation Policy:"}),s.jsxs("ul",{className:"text-muted-foreground space-y-1",children:[s.jsx("li",{children:" 1st missed/late cancel: Written warning"}),s.jsx("li",{children:" 2nd missed/late cancel: 1 week suspension"}),s.jsx("li",{children:" 3rd missed/late cancel: Contract termination"})]})]})]})]}),s.jsxs(Es,{children:[s.jsx(Ra,{children:"Keep Shift"}),s.jsx(Os,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:p,children:"Yes, Cancel Shift"})]})]})})]})},T9e=25,A9e=()=>{const{user:e}=na(),[t,r]=x.useState([]),[n,a]=x.useState(null),[i,o]=x.useState(!1);x.useEffect(()=>{const p=gs(),y=(e==null?void 0:e.id)||"psw-001",v=p.filter(b=>b.pswId===y&&b.status==="completed");v.sort((b,N)=>new Date(N.signedOutAt||N.scheduledDate).getTime()-new Date(b.signedOutAt||b.scheduledDate).getTime()),r(v)},[e==null?void 0:e.id]);const l=p=>{if(!p.checkedInAt||!p.signedOutAt)return{basePay:0,urbanBonus:0,total:0,hasUrbanBonus:!1};const y=new Date(p.checkedInAt),b=(new Date(p.signedOutAt).getTime()-y.getTime())/(1e3*60*60),N=b*T9e,j=mE(void 0,p.postalCode),w=j?j.pswBonus*b:0,S=j&&j.pswFlatBonus||0;return{basePay:Math.round(N*100)/100,urbanBonus:Math.round((w+S)*100)/100,total:Math.round((N+w+S)*100)/100,hasUrbanBonus:!!j}},c=x.useMemo(()=>{const p=new Date,y=new Date(p.getTime()-7*24*60*60*1e3);let v=0,b=0,N=0;return t.forEach(j=>{if(new Date(j.signedOutAt||j.scheduledDate)>=y){const S=l(j);v+=S.basePay,b+=S.urbanBonus,N++}}),{base:Math.round(v*100)/100,urban:Math.round(b*100)/100,total:Math.round((v+b)*100)/100,shifts:N}},[t]),d=x.useMemo(()=>{const p=new Date,y=new Date(p.getFullYear(),p.getMonth(),1);let v=0,b=0,N=0;return t.forEach(j=>{if(new Date(j.signedOutAt||j.scheduledDate)>=y){const S=l(j);v+=S.basePay,b+=S.urbanBonus,N++}}),{base:Math.round(v*100)/100,urban:Math.round(b*100)/100,total:Math.round((v+b)*100)/100,shifts:N}},[t]),h=x.useMemo(()=>{const p=new Date(new Date().getFullYear(),0,1);let y=0,v=0,b=0;return t.forEach(N=>{if(new Date(N.signedOutAt||N.scheduledDate)>=p){const w=l(N);y+=w.basePay,v+=w.urbanBonus,b++}}),{base:Math.round(y*100)/100,urban:Math.round(v*100)/100,total:Math.round((y+v)*100)/100,shifts:b}},[t]),f=x.useMemo(()=>{let p=0,y=0;return t.forEach(v=>{const b=l(v);p+=b.basePay,y+=b.urbanBonus}),{base:Math.round(p*100)/100,urban:Math.round(y*100)/100,total:Math.round((p+y)*100)/100}},[t]),m=p=>{a(p),o(!0)};return t.length===0?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"History"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Your completed shifts and earnings"})]}),s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mx-auto mb-4",children:s.jsx(Qe,{className:"w-8 h-8 text-muted-foreground"})}),s.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No Completed Shifts Yet"}),s.jsx("p",{className:"text-muted-foreground",children:"Your completed shifts will appear here"})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"History"}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[t.length," shift",t.length!==1?"s":""," completed"]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[s.jsx(J,{className:"shadow-card border-emerald-200 bg-emerald-50/50 dark:bg-emerald-950/20",children:s.jsxs(Q,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(cx,{className:"w-4 h-4 text-emerald-600"}),s.jsx("h3",{className:"font-medium text-emerald-800 dark:text-emerald-200 text-sm",children:"This Week"})]}),s.jsxs("p",{className:"text-2xl font-bold text-emerald-700 dark:text-emerald-300",children:["$",c.total.toFixed(2)]}),s.jsxs("p",{className:"text-xs text-emerald-600/80 dark:text-emerald-400/80",children:[c.shifts," shift",c.shifts!==1?"s":""]}),c.urban>0&&s.jsxs(ne,{className:"mt-2 bg-emerald-100 text-emerald-700 border-emerald-200 text-xs",children:["+$",c.urban.toFixed(2)," Urban"]})]})}),s.jsx(J,{className:"shadow-card border-blue-200 bg-blue-50/50 dark:bg-blue-950/20",children:s.jsxs(Q,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(bk,{className:"w-4 h-4 text-blue-600"}),s.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-200 text-sm",children:"This Month"})]}),s.jsxs("p",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:["$",d.total.toFixed(2)]}),s.jsxs("p",{className:"text-xs text-blue-600/80 dark:text-blue-400/80",children:[d.shifts," shift",d.shifts!==1?"s":""]}),d.urban>0&&s.jsxs(ne,{className:"mt-2 bg-blue-100 text-blue-700 border-blue-200 text-xs",children:["+$",d.urban.toFixed(2)," Urban"]})]})}),s.jsx(J,{className:"shadow-card border-purple-200 bg-purple-50/50 dark:bg-purple-950/20",children:s.jsxs(Q,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Kp,{className:"w-4 h-4 text-purple-600"}),s.jsxs("h3",{className:"font-medium text-purple-800 dark:text-purple-200 text-sm",children:["This Year (",new Date().getFullYear(),")"]})]}),s.jsxs("p",{className:"text-2xl font-bold text-purple-700 dark:text-purple-300",children:["$",h.total.toFixed(2)]}),s.jsxs("p",{className:"text-xs text-purple-600/80 dark:text-purple-400/80",children:[h.shifts," shift",h.shifts!==1?"s":""]}),h.urban>0&&s.jsxs(ne,{className:"mt-2 bg-purple-100 text-purple-700 border-purple-200 text-xs",children:["+$",h.urban.toFixed(2)," Urban"]})]})}),s.jsx(J,{className:"shadow-card border-primary/20 bg-primary/5",children:s.jsxs(Q,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(hs,{className:"w-4 h-4 text-primary"}),s.jsx("h3",{className:"font-medium text-foreground text-sm",children:"All-Time"})]}),s.jsxs("p",{className:"text-2xl font-bold text-foreground",children:["$",f.total.toFixed(2)]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.length," shift",t.length!==1?"s":""]}),f.urban>0&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["incl. $",f.urban.toFixed(2)," urban"]})]})})]}),s.jsx("div",{className:"space-y-3",children:t.map(p=>{const y=l(p),v=p.signedOutAt?new Date(p.signedOutAt).toLocaleDateString():p.scheduledDate;return s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:s.jsx($t,{className:"w-5 h-5 text-muted-foreground"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-foreground",children:p.clientFirstName}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[s.jsx(Lt,{className:"w-3 h-3"}),s.jsx("span",{children:v})]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"font-semibold text-primary",children:["$",y.total.toFixed(2)]}),y.hasUrbanBonus&&s.jsxs(ne,{variant:"outline",className:"text-xs mt-1 text-emerald-600",children:["+$",y.urbanBonus.toFixed(2)," urban"]}),s.jsx(ne,{variant:"outline",className:"text-xs mt-1 block",children:"Completed"})]})]}),s.jsx("div",{className:"space-y-2 text-sm mb-3",children:s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(Qe,{className:"w-4 h-4"}),s.jsxs("span",{children:[p.scheduledStart," - ",p.scheduledEnd]}),p.overtimeMinutes>0&&s.jsxs(ne,{variant:"secondary",className:"text-xs ml-2",children:["+",p.overtimeMinutes,"min OT"]})]})}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[p.services.slice(0,3).map((b,N)=>s.jsx(ne,{variant:"outline",className:"text-xs",children:b},N)),p.services.length>3&&s.jsxs(ne,{variant:"outline",className:"text-xs",children:["+",p.services.length-3," more"]})]}),p.careSheet&&s.jsxs(K,{variant:"outline",size:"sm",className:"w-full",onClick:()=>m(p),children:[s.jsx(zt,{className:"w-4 h-4 mr-2"}),"View Care Sheet"]})]})},p.id)})}),s.jsx(hr,{open:i,onOpenChange:o,children:s.jsxs(or,{className:"max-w-md max-h-[80vh]",children:[s.jsxs(lr,{children:[s.jsxs(cr,{className:"flex items-center gap-2",children:[s.jsx(zt,{className:"w-5 h-5 text-primary"}),"Care Sheet Report"]}),s.jsx(Ice,{className:"absolute right-4 top-4",children:s.jsx(Hr,{className:"w-4 h-4"})})]}),(n==null?void 0:n.careSheet)&&s.jsx(Ps,{className:"max-h-[60vh]",children:s.jsxs("div",{className:"space-y-4 pr-4",children:[s.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[s.jsx("p",{className:"font-medium text-foreground",children:n.clientFirstName}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.scheduledDate,"  ",n.scheduledStart," - ",n.scheduledEnd]})]}),s.jsx(ja,{}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-foreground mb-2",children:"Client Mood"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"flex-1 p-3 bg-muted/50 rounded-lg",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"On Arrival"}),s.jsx("p",{className:"font-medium text-foreground capitalize",children:n.careSheet.moodOnArrival})]}),s.jsxs("div",{className:"flex-1 p-3 bg-muted/50 rounded-lg",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"On Departure"}),s.jsx("p",{className:"font-medium text-foreground capitalize",children:n.careSheet.moodOnDeparture})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-foreground mb-2",children:"Tasks Completed"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:n.careSheet.tasksCompleted.map((p,y)=>s.jsx(ne,{variant:"secondary",className:"text-xs",children:p},y))})]}),n.careSheet.observations&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-foreground mb-2",children:"Observations"}),s.jsx("p",{className:"text-sm text-muted-foreground bg-muted/50 p-3 rounded-lg",children:n.careSheet.observations})]}),n.careSheet.isHospitalDischarge&&s.jsxs("div",{className:"p-3 border border-amber-200 bg-amber-50 dark:bg-amber-950/20 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium text-amber-800 dark:text-amber-200 mb-1",children:"Hospital Discharge"}),n.careSheet.dischargeDocuments&&s.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300",children:" Discharge documents uploaded"})]})]})})]})})]})},O9e=({services:e,pswFirstName:t,onSubmit:r,isSubmitting:n=!1,officeNumber:a=Ea,doctorOfficeName:i,doctorPhone:o})=>{const[l,c]=x.useState(""),[d,h]=x.useState(""),[f,m]=x.useState([]),[p,y]=x.useState(""),[v,b]=x.useState(!1),[N,j]=x.useState(""),[w,S]=x.useState(""),[C,P]=x.useState(""),T=x.useRef(null),O=x.useMemo(()=>zfe(p),[p]),E=!v||v&&N,D=l&&d&&f.length>0&&!O.shouldBlock&&E,I=(H,F)=>{m(F?R=>[...R,H]:R=>R.filter(z=>z!==H))},A=H=>{var G;const F=(G=H.target.files)==null?void 0:G[0];if(!F)return;if(!["image/jpeg","image/png","image/heic","application/pdf"].includes(F.type)){alert("Please upload an image (JPEG, PNG) or PDF file.");return}if(F.size>10*1024*1024){alert("File size must be less than 10MB.");return}const z=new FileReader;z.onload=()=>{j(z.result),S(F.name)},z.readAsDataURL(F)},V=()=>{j(""),S(""),T.current&&(T.current.value="")},U=()=>{if(!D)return;r({moodOnArrival:l,moodOnDeparture:d,tasksCompleted:f,observations:p,pswFirstName:t,officeNumber:a,isHospitalDischarge:v,dischargeDocuments:v?N:void 0,dischargeNotes:v?C:void 0})},$=[{value:"happy",label:"Happy"},{value:"content",label:"Content"},{value:"neutral",label:"Neutral"},{value:"anxious",label:"Anxious"},{value:"sad",label:"Sad"},{value:"agitated",label:"Agitated"}];return s.jsxs(J,{className:"shadow-card animate-fade-in",children:[s.jsxs(ke,{className:"pb-3",children:[s.jsxs(Ee,{className:"text-lg flex items-center gap-2",children:[s.jsx(zt,{className:"w-5 h-5 text-primary"}),"Client Care Sheet"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Complete this form before signing out. It will be emailed to the ordering client."})]}),s.jsxs(Q,{className:"space-y-6",children:[s.jsxs(Tf,{className:"border-amber-300 bg-amber-50 dark:bg-amber-950/30",children:[s.jsx(At,{className:"h-4 w-4 text-amber-600"}),s.jsx(UA,{className:"text-amber-800 dark:text-amber-300",children:"Required Before Sign-Out"}),s.jsx(Af,{className:"text-amber-700 dark:text-amber-400",children:"You must complete this care sheet before ending your shift. It will be sent to the ordering client."})]}),i&&s.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-800 dark:text-blue-300",children:[s.jsx(Ld,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:i})]}),o&&s.jsxs("a",{href:`tel:${o}`,className:"flex items-center gap-2 text-sm text-blue-600 dark:text-blue-400 mt-1 hover:underline",children:[s.jsx(Fn,{className:"w-3 h-3"}),o]}),s.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-2",children:"Contact for medical coordination if needed"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium text-foreground",children:"Client Assessment"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(oe,{children:["Mood on Arrival ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(Xt,{value:l,onValueChange:c,children:[s.jsx(qt,{children:s.jsx(Jt,{placeholder:"Select"})}),s.jsx(Gt,{children:$.map(H=>s.jsx(_e,{value:H.value,children:H.label},H.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(oe,{children:["Mood on Departure ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(Xt,{value:d,onValueChange:h,children:[s.jsx(qt,{children:s.jsx(Jt,{placeholder:"Select"})}),s.jsx(Gt,{children:$.map(H=>s.jsx(_e,{value:H.value,children:H.label},H.value))})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"font-medium text-foreground",children:["Tasks Completed ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Check all services you provided during this visit"}),s.jsx("div",{className:"grid grid-cols-1 gap-3",children:e.map(H=>s.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg border border-border hover:bg-muted/50 transition-colors",children:[s.jsx(Co,{id:`task-${H}`,checked:f.includes(H),onCheckedChange:F=>I(H,F===!0)}),s.jsx(oe,{htmlFor:`task-${H}`,className:"flex-1 cursor-pointer font-medium",children:H}),f.includes(H)&&s.jsx(es,{className:"w-4 h-4 text-primary"})]},H))}),f.length===0&&s.jsx("p",{className:"text-sm text-destructive",children:"Please select at least one task completed"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-border bg-muted/30",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ld,{className:"w-5 h-5 text-amber-600"}),s.jsxs("div",{children:[s.jsx(oe,{htmlFor:"hospital-discharge",className:"font-medium cursor-pointer",children:"Hospital/Doctor Discharge?"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable if patient was discharged from hospital or doctor's office today"})]})]}),s.jsx(mn,{id:"hospital-discharge",checked:v,onCheckedChange:b})]}),v&&s.jsxs("div",{className:"space-y-4 p-4 rounded-lg border-2 border-amber-300 bg-amber-50/50 dark:bg-amber-950/20",children:[s.jsxs("div",{className:"flex items-center gap-2 text-amber-700 dark:text-amber-400",children:[s.jsx(At,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium text-sm",children:"Discharge Documentation Required"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(oe,{children:["Upload Discharge Papers ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Take a photo or upload the discharge documents (PDF, JPEG, PNG - max 10MB)"}),s.jsx("input",{ref:T,type:"file",accept:"image/*,application/pdf",capture:"environment",onChange:A,className:"hidden"}),N?s.jsxs("div",{className:"flex items-center justify-between p-3 bg-primary/10 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(es,{className:"w-5 h-5 text-primary"}),s.jsx("span",{className:"text-sm font-medium truncate max-w-[200px]",children:w})]}),s.jsx(K,{type:"button",variant:"ghost",size:"icon",onClick:V,className:"text-muted-foreground hover:text-destructive",children:s.jsx(Hr,{className:"w-4 h-4"})})]}):s.jsx(K,{type:"button",variant:"outline",className:"w-full h-20 border-dashed border-2",onClick:()=>{var H;return(H=T.current)==null?void 0:H.click()},children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(ad,{className:"w-6 h-6 text-muted-foreground"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Tap to take photo or upload file"})]})}),v&&!N&&s.jsx("p",{className:"text-sm text-destructive",children:"Discharge papers are required for hospital/doctor discharges"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{children:"Private Notes (Admin only)"}),s.jsx(_n,{placeholder:"Any additional notes about the discharge for admin review...",value:C,onChange:H=>P(H.target.value),className:"min-h-[80px]"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"These notes are only visible to admin and will not be shared with the client."})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{children:"Observations / Notes"}),s.jsx(_n,{placeholder:"Document any observations, client condition, activities, or concerns...",value:p,onChange:H=>y(H.target.value),className:"min-h-[120px]"}),O.shouldBlock&&s.jsxs("div",{className:"flex items-start gap-2 p-3 bg-destructive/10 rounded-lg",children:[s.jsx(At,{className:"w-5 h-5 text-destructive shrink-0 mt-0.5"}),s.jsxs("p",{className:"text-sm text-destructive",children:[O.message," Use the office number (",a,") for all follow-ups."]})]})]}),s.jsx(J,{className:"border-green-200 bg-green-50/50 dark:bg-green-950/20",children:s.jsx(Q,{className:"p-3",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(mr,{className:"w-5 h-5 text-green-600 shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-green-800 dark:text-green-300 text-sm",children:"Your Privacy is Protected"}),s.jsxs("p",{className:"text-sm text-green-700 dark:text-green-400",children:["This care sheet will only show your first name (",s.jsx("strong",{children:t}),") and the office contact number (",s.jsx("strong",{children:a}),"). Your last name and personal phone number are never shared with clients."]})]})]})})}),s.jsx(K,{variant:"brand",size:"lg",className:"w-full",onClick:U,disabled:!D||n,children:n?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}),"Submitting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(pw,{className:"w-5 h-5 mr-2"}),"Sign Out & Send Care Sheet"]})}),!D&&s.jsx("p",{className:"text-sm text-center text-muted-foreground",children:"Please complete all required fields to sign out"})]})]})},M9e=({open:e,onAccept:t,onDecline:r})=>{const n=[{icon:St,title:"Seamless Check-In",description:"GPS verifies you're at the correct location, making check-in quick and hassle-free."},{icon:mr,title:"Your Safety First",description:"In case of emergencies, the office can locate you to send assistance."},{icon:yk,title:"Client Peace of Mind",description:"Clients can see you're on your way, building trust and reducing anxiety."}];return s.jsx(di,{open:e,onOpenChange:a=>!a&&r(),children:s.jsxs(Ia,{className:"max-w-md",children:[s.jsxs(ks,{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(St,{className:"w-6 h-6 text-primary"})}),s.jsx(Ts,{className:"text-lg",children:"Enable Location for Check-In"})]}),s.jsx(As,{className:"text-left",children:"To start your shift, we need to verify your location. This helps ensure you're at the right place and keeps everyone safe."})]}),s.jsx("div",{className:"space-y-3 my-4",children:n.map((a,i)=>s.jsx(J,{className:"border-0 bg-muted/50",children:s.jsxs(Q,{className:"p-3 flex items-start gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center shrink-0",children:s.jsx(a.icon,{className:"w-4 h-4 text-primary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm text-foreground",children:a.title}),s.jsx("p",{className:"text-xs text-muted-foreground",children:a.description})]})]})},i))}),s.jsxs("div",{className:"flex items-start gap-2 p-3 bg-emerald-50 dark:bg-emerald-950/30 rounded-lg border border-emerald-200 dark:border-emerald-800",children:[s.jsx(es,{className:"w-4 h-4 text-emerald-600 shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-xs text-emerald-700 dark:text-emerald-300",children:[s.jsx("strong",{children:"Your Privacy Matters:"})," Location is only tracked during active shifts and stops automatically when you complete your care sheet."]})]}),s.jsxs("div",{className:"flex items-start gap-2 p-3 bg-blue-50 dark:bg-blue-950/30 rounded-lg border border-blue-200 dark:border-blue-800 mt-2",children:[s.jsx(Hh,{className:"w-4 h-4 text-blue-600 shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-xs text-blue-700 dark:text-blue-300",children:[s.jsx("strong",{children:"Next Step:"}),' After clicking "Allow Location," your browser will show a permission popup. Please tap ',s.jsx("strong",{children:'"Allow"'})," to proceed."]})]}),s.jsxs(Es,{className:"flex-col sm:flex-row gap-2 mt-4",children:[s.jsx(Ra,{onClick:r,className:"w-full sm:w-auto",children:"Not Now"}),s.jsxs(Os,{onClick:t,className:"w-full sm:w-auto bg-primary hover:bg-primary/90",children:[s.jsx(St,{className:"w-4 h-4 mr-2"}),"Allow Location"]})]})]})})},I9e=({bookingId:e,pswId:t,isActive:r,intervalMinutes:n=5})=>{const[a,i]=x.useState({latitude:null,longitude:null,accuracy:null,timestamp:null,error:null,isTracking:!1,lastLoggedAt:null}),o=x.useRef(null),l=x.useRef(0),c=n*60*1e3,d=x.useCallback(async(v,b)=>{if(!e||!t){console.warn("Cannot log location: missing bookingId or pswId");return}const N=Date.now();if(!(N-l.current<c))try{const{error:j}=await de.from("location_logs").insert({booking_id:e,psw_id:t,latitude:v,longitude:b});j?(console.error("Failed to log location:",j),i(w=>({...w,error:j.message}))):(l.current=N,i(w=>({...w,lastLoggedAt:new Date,error:null})),console.log("Location logged successfully:",{latitude:v,longitude:b}))}catch(j){console.error("Location logging error:",j)}},[e,t,c]),h=x.useCallback(v=>{const{latitude:b,longitude:N,accuracy:j}=v.coords;i(w=>({...w,latitude:b,longitude:N,accuracy:j,timestamp:new Date,error:null})),d(b,N)},[d]),f=x.useCallback(v=>{let b="Unknown location error";switch(v.code){case v.PERMISSION_DENIED:b="Location permission denied. Please enable location access.";break;case v.POSITION_UNAVAILABLE:b="Location information unavailable.";break;case v.TIMEOUT:b="Location request timed out.";break}console.error("Geolocation error:",b),i(N=>({...N,error:b}))},[]),m=x.useCallback(()=>{if(!navigator.geolocation){i(v=>({...v,error:"Geolocation is not supported by this browser."}));return}o.current===null&&(console.log("Starting location tracking..."),navigator.geolocation.getCurrentPosition(v=>{h(v),l.current=0,d(v.coords.latitude,v.coords.longitude)},f,{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}),o.current=navigator.geolocation.watchPosition(h,f,{enableHighAccuracy:!0,timeout:3e4,maximumAge:6e4}),i(v=>({...v,isTracking:!0})))},[h,f,d]),p=x.useCallback(()=>{o.current!==null&&(console.log("Stopping location tracking..."),navigator.geolocation.clearWatch(o.current),o.current=null,i(v=>({...v,isTracking:!1})))},[]);x.useEffect(()=>(r&&e&&t?m():p(),()=>{p()}),[r,e,t,m,p]);const y=x.useCallback(()=>{a.latitude!==null&&a.longitude!==null&&(l.current=0,d(a.latitude,a.longitude))},[a.latitude,a.longitude,d]);return{...a,startTracking:m,stopTracking:p,forceLogCurrentPosition:y}},X5=500,R9e=({shift:e,onBack:t,onComplete:r})=>{const{user:n}=na(),[a,i]=x.useState(e),[o,l]=x.useState(!1),[c,d]=x.useState(null),[h,f]=x.useState(0),[m,p]=x.useState(!1),[y,v]=x.useState(!1),[b,N]=x.useState(!1),[j,w]=x.useState(null),[S,C]=x.useState(null),[P,T]=x.useState(Ea),[O,E]=x.useState(!1);I9e({bookingId:a.bookingId||null,pswId:(n==null?void 0:n.id)||null,isActive:a.status==="checked-in",intervalMinutes:5}),x.useEffect(()=>{Kf().then(T)},[]);const D=x.useMemo(()=>((n==null?void 0:n.name)||"PSW").split(" ")[0],[n]),I=window.location.hostname.includes("lovableproject.com")||window.location.hostname==="localhost",A=a.isTransportShift||a.services.some(le=>le.toLowerCase().includes("hospital")||le.toLowerCase().includes("doctor")||le.toLowerCase().includes("escort")||le.toLowerCase().includes("discharge"));x.useEffect(()=>{let le;if(a.status==="checked-in"&&a.checkedInAt){const fe=new Date(a.checkedInAt).getTime();le=setInterval(()=>{f(Math.floor((Date.now()-fe)/1e3))},1e3)}return()=>clearInterval(le)},[a.status,a.checkedInAt]);const V=le=>{const fe=Math.floor(le/3600),ge=Math.floor(le%3600/60),ee=le%60;return`${fe.toString().padStart(2,"0")}:${ge.toString().padStart(2,"0")}:${ee.toString().padStart(2,"0")}`},U=le=>{const fe=encodeURIComponent(le);window.open(`https://www.google.com/maps/dir/?api=1&destination=${fe}`,"_blank")},$=()=>A&&a.pickupPostalCode?a.pickupPostalCode:a.postalCode,H=()=>A?X5:N3,F=()=>{if(I){G();return}E(!0)},R=()=>{E(!1),G()},z=()=>{E(!1),Z.info("Location access is required to check in. You can try again when ready.")},G=()=>{if(l(!0),d(null),w("checking"),I){console.log("Development mode: GPS proximity check bypassed"),setTimeout(()=>{const ge=PC(a.id,{lat:0,lng:0});ge&&(i(ge),Z.success("Checked in successfully!")),l(!1),w(null)},1e3);return}if(!navigator.geolocation){d("Geolocation is not supported by your browser"),l(!1),w("invalid");return}const le=$(),fe=H();navigator.geolocation.getCurrentPosition(ge=>{const ee=ge.coords.latitude,re=ge.coords.longitude,ue=E0(le);if(!ue){d("Unable to verify location. Please contact the office."),l(!1),w("invalid");return}const Ne=bde(ee,re,ue.lat,ue.lng);if(C(Math.round(Ne)),Ne>fe){const Y=A?`Security Check Failed: You must be at the Pick-up Location to start this shift. You are ${Math.round(Ne)}m away (must be within ${fe}m).`:`You must be at the client's location to check in. You are ${Math.round(Ne)}m away (must be within ${fe}m).`;d(Y),l(!1),w("invalid");return}w("valid");const je=PC(a.id,{lat:ee,lng:re});je&&(i(je),Z.success("Checked in - Location verified"),kz("client@example.com",je.clientName,je.bookingId,je.scheduledDate,new Date().toLocaleTimeString(),(n==null?void 0:n.name)||D)),l(!1)},ge=>{let ee=A?"Security Check Failed: Unable to verify your location. ":"You must be at the client's location to check in. ";ge.code===ge.PERMISSION_DENIED?ee+="Please enable location access in your browser settings.":ee+="If you are having GPS issues, contact the office.",d(ee),l(!1),w("invalid")},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})},ie=()=>{v(!0)},ae=()=>{v(!1),p(!0)},X=async le=>{N(!0);const fe=a.clientEmail||"client@example.com",ge=Iz(a.id,le,fe);ge&&(i(ge),le.isHospitalDischarge&&le.dischargeDocuments?await FE(fe,ge.clientName,le.pswFirstName,a.pswPhotoUrl,ge.scheduledDate,le.tasksCompleted,le.observations,le.dischargeDocuments,"discharge-papers"):await Cz(fe,ge.clientName,le.pswFirstName,ge.scheduledDate,le.tasksCompleted,le.observations),await Pz(ge.id,ge.pswName,ge.clientName,ge.signedOutAt||new Date().toISOString(),ge.flaggedForOvertime),ge.flaggedForOvertime?Z.warning(`Shift completed with ${ge.overtimeMinutes} minutes overtime`,{description:"This has been flagged for additional billing."}):Z.success("Shift completed successfully!",{description:"Care sheet has been sent to the ordering client."}),setTimeout(()=>{r()},2e3)),N(!1)};return a.status==="completed"?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx(K,{variant:"ghost",size:"icon",onClick:t,children:s.jsx($n,{className:"w-5 h-5"})}),s.jsx("h1",{className:"text-xl font-semibold text-foreground",children:"Shift Complete"})]}),s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4",children:s.jsx(es,{className:"w-8 h-8 text-primary"})}),s.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Great Work!"}),s.jsx("p",{className:"text-muted-foreground mb-2",children:"Your shift has been completed."}),a.flaggedForOvertime&&s.jsxs(ne,{variant:"outline",className:"text-amber-600 border-amber-300",children:["+",a.overtimeMinutes," min overtime flagged"]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-4",children:"Care sheet sent to ordering client."})]}),s.jsx(K,{variant:"outline",className:"w-full",onClick:t,children:"Back to Schedule"})]}):a.status==="claimed"?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx(K,{variant:"ghost",size:"icon",onClick:t,children:s.jsx($n,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-semibold text-foreground",children:"Shift Details"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.scheduledDate,"  ",a.scheduledStart," - ",a.scheduledEnd]})]})]}),A&&a.pickupAddress&&s.jsx(J,{className:"shadow-card border-amber-200 bg-amber-50/50 dark:bg-amber-950/20",children:s.jsxs(Q,{className:"p-4 space-y-3",children:[s.jsxs("h3",{className:"font-medium text-amber-800 dark:text-amber-200 flex items-center gap-2",children:[s.jsx(St,{className:"w-4 h-4"}),"Transport Route"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("button",{onClick:()=>U(a.pickupAddress),className:"w-full flex items-center justify-between p-3 bg-white dark:bg-background rounded-lg border border-amber-200 hover:border-primary transition-colors text-left",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Pick-up Location"}),s.jsx("p",{className:"text-sm font-medium text-foreground",children:a.pickupAddress}),s.jsx("p",{className:"text-xs text-muted-foreground",children:a.pickupPostalCode})]}),s.jsx(go,{className:"w-4 h-4 text-primary"})]}),s.jsxs("button",{onClick:()=>U(a.patientAddress),className:"w-full flex items-center justify-between p-3 bg-white dark:bg-background rounded-lg border border-border hover:border-primary transition-colors text-left",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Drop-off Location"}),s.jsx("p",{className:"text-sm font-medium text-foreground",children:a.patientAddress}),s.jsx("p",{className:"text-xs text-muted-foreground",children:a.postalCode})]}),s.jsx(go,{className:"w-4 h-4 text-primary"})]})]})]})}),!A&&s.jsx(J,{className:"shadow-card",children:s.jsx(Q,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx($t,{className:"w-7 h-7 text-primary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-lg font-semibold text-foreground",children:a.clientFirstName}),s.jsxs("button",{onClick:()=>U(a.patientAddress),className:"flex items-center gap-2 text-sm text-muted-foreground mt-1 hover:text-primary",children:[s.jsx(St,{className:"w-4 h-4"}),s.jsx("span",{className:"underline",children:a.patientAddress}),s.jsx(go,{className:"w-3 h-3"})]})]})]})})}),s.jsx("div",{className:"flex flex-wrap gap-2",children:a.services.map((le,fe)=>s.jsx(ne,{variant:"secondary",children:le},fe))}),s.jsxs(K,{variant:"outline",className:"w-full h-12",onClick:()=>U(A&&a.pickupAddress?a.pickupAddress:a.patientAddress),children:[s.jsx(el,{className:"w-5 h-5 mr-2 text-primary"}),"Navigate to ",A?"Pick-up":"Client"]}),s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-3 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(Qe,{className:"w-8 h-8 text-primary"})}),s.jsx("h3",{className:"font-semibold text-foreground",children:"Ready to Start?"}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["GPS will verify you're within ",A?X5:N3,"m of the ",A?"pick-up location":"client"]})]}),c&&s.jsxs("div",{className:"flex items-start gap-2 p-3 bg-destructive/10 rounded-lg",children:[s.jsx(At,{className:"w-5 h-5 text-destructive shrink-0 mt-0.5"}),s.jsx("p",{className:"text-sm text-destructive",children:c})]}),s.jsx(K,{variant:"brand",className:"w-full h-14 text-base",onClick:F,disabled:o,children:o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}),"Verifying Location..."]}):s.jsxs(s.Fragment,{children:[s.jsx(cl,{className:"w-5 h-5 mr-2"}),"Check-In & Start Shift"]})})]})}),s.jsx(M9e,{open:O,onAccept:R,onDecline:z})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx(K,{variant:"ghost",size:"icon",onClick:t,children:s.jsx($n,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-semibold text-foreground",children:"Active Shift"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Currently at ",a.clientFirstName,"'s"]})]})]}),s.jsx(J,{className:"shadow-card border-primary/20 bg-primary/5",children:s.jsxs(Q,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-primary animate-pulse"}),s.jsx("span",{className:"text-sm font-medium text-primary",children:"In Progress"})]}),s.jsxs(ne,{variant:"outline",className:"border-primary/30 text-primary",children:["Started: ",a.checkedInAt?new Date(a.checkedInAt).toLocaleTimeString():""]})]}),s.jsxs("div",{className:"text-center py-4",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(Yo,{className:"w-6 h-6 text-muted-foreground"}),s.jsx("span",{className:"text-4xl font-mono font-bold text-foreground",children:V(h)})]}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Scheduled end: ",a.scheduledEnd]})]}),s.jsxs("div",{className:"flex items-center gap-3 pt-3 border-t border-primary/20",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx($t,{className:"w-5 h-5 text-primary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-foreground",children:a.clientName}),s.jsx("p",{className:"text-sm text-muted-foreground",children:a.patientAddress})]})]})]})}),m?s.jsx(O9e,{services:a.services,pswFirstName:D,onSubmit:X,isSubmitting:b,officeNumber:P}):s.jsxs(s.Fragment,{children:[s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{className:"pb-2",children:s.jsx(Ee,{className:"text-base",children:"Services to Provide"})}),s.jsx(Q,{className:"pt-0",children:s.jsx("div",{className:"flex flex-wrap gap-2",children:a.services.map((le,fe)=>s.jsx(ne,{variant:"outline",children:le},fe))})})]}),s.jsx(K,{variant:"destructive",size:"lg",className:"w-full",onClick:ie,children:"End Shift & Complete Care Sheet"}),s.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"Note: Signing out 15+ minutes after scheduled end will flag for overtime billing."}),s.jsx(di,{open:y,onOpenChange:v,children:s.jsxs(Ia,{children:[s.jsxs(ks,{children:[s.jsxs(Ts,{className:"flex items-center gap-2",children:[s.jsx(zt,{className:"w-5 h-5 text-primary"}),"Care Sheet Required"]}),s.jsx(As,{asChild:!0,children:s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{children:"Before ending this shift, you must complete a care sheet documenting:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[s.jsx("li",{children:"Client's mood on arrival and departure"}),s.jsx("li",{children:"Tasks completed during the visit"}),s.jsx("li",{children:"Any observations or notes"})]}),s.jsx("p",{className:"font-medium text-foreground",children:"This care sheet will be sent to the ordering client."})]})})]}),s.jsxs(Es,{children:[s.jsx(Ra,{children:"Continue Working"}),s.jsx(Os,{onClick:ae,children:"Complete Care Sheet"})]})]})})]})]})},D9e=({onSelectShift:e})=>{const{user:t}=na(),[r,n]=x.useState([]),[a,i]=x.useState({});x.useEffect(()=>{t!=null&&t.id&&o();const c=setInterval(o,1e4);return()=>clearInterval(c)},[t==null?void 0:t.id]),x.useEffect(()=>{const c=setInterval(()=>{const d={};r.forEach(h=>{if(h.checkedInAt){const f=new Date(h.checkedInAt).getTime(),m=Date.now();d[h.id]=Math.floor((m-f)/1e3)}}),i(d)},1e3);return()=>clearInterval(c)},[r]);const o=()=>{const c=(t==null?void 0:t.id)||"psw-001";console.log("PSWActiveTab - Loading active shifts for PSW ID:",c);const d=BE(c);console.log("PSWActiveTab - Found active shifts:",d),n(d)},l=c=>{const d=Math.floor(c/3600),h=Math.floor(c%3600/60),f=c%60;return`${d.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}`};return r.length===0?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Active Shift"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Your current in-progress shift"})]}),s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mx-auto mb-4",children:s.jsx(cl,{className:"w-8 h-8 text-muted-foreground"})}),s.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No Active Shift"}),s.jsx("p",{className:"text-muted-foreground",children:"You'll see your shift here once you check in"})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Active Shift"}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[r.length," shift",r.length!==1?"s":""," in progress"]})]}),s.jsx("div",{className:"space-y-3",children:r.map(c=>{const d=a[c.id]||0;return s.jsx(J,{className:"shadow-card ring-2 ring-primary border-primary",children:s.jsxs(Q,{className:"p-4",children:[s.jsxs("div",{className:"bg-primary/10 rounded-lg p-3 mb-4 text-center",children:[s.jsx("p",{className:"text-xs text-primary mb-1",children:"Shift In Progress"}),s.jsx("p",{className:"text-2xl font-mono font-bold text-primary",children:l(d)})]}),s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx($t,{className:"w-5 h-5 text-primary"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-foreground",children:c.clientName}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[s.jsx(Qe,{className:"w-3 h-3"}),s.jsxs("span",{children:[c.scheduledStart," - ",c.scheduledEnd]})]})]})]}),s.jsx(ne,{className:"bg-primary text-primary-foreground animate-pulse",children:"In Progress"})]}),s.jsxs("div",{className:"space-y-2 text-sm mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(St,{className:"w-4 h-4"}),s.jsx("span",{children:c.patientAddress})]}),c.clientPhone&&s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(Fn,{className:"w-4 h-4"}),s.jsx("a",{href:`tel:${c.clientPhone}`,className:"text-primary hover:underline",children:c.clientPhone})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:c.services.map((h,f)=>s.jsx(ne,{variant:"outline",className:"text-xs",children:h},f))}),s.jsxs(K,{variant:"brand",className:"w-full",onClick:()=>e(c),children:["Continue Shift",s.jsx(Pc,{className:"w-4 h-4 ml-2"})]})]})},c.id)})})]})},$9e=({pswProfileId:e})=>{const[t,r]=x.useState(!1),[n,a]=x.useState(!1),[i,o]=x.useState(!0),[l,c]=x.useState(!1),[d,h]=x.useState({account_number:"",transit_number:"",institution_number:""});x.useEffect(()=>{(async()=>{if(!e)return;const{data:v,error:b}=await de.from("psw_banking").select("*").eq("psw_id",e).maybeSingle();b?console.error("Error loading banking info:",b):v&&h({id:v.id,account_number:v.account_number||"",transit_number:v.transit_number||"",institution_number:v.institution_number||""}),o(!1)})()},[e]);const f=async()=>{if(e){if(!d.account_number||!d.transit_number||!d.institution_number){Z.error("Please fill in all banking fields");return}if(d.transit_number.length!==5){Z.error("Transit number must be 5 digits");return}if(d.institution_number.length!==3){Z.error("Institution number must be 3 digits");return}c(!0);try{if(d.id){const{error:y}=await de.from("psw_banking").update({account_number:d.account_number,transit_number:d.transit_number,institution_number:d.institution_number}).eq("id",d.id);if(y)throw y}else{const{data:y,error:v}=await de.from("psw_banking").insert({psw_id:e,account_number:d.account_number,transit_number:d.transit_number,institution_number:d.institution_number}).select().single();if(v)throw v;h(b=>({...b,id:y.id}))}Z.success("Banking information saved securely"),r(!1)}catch(y){console.error("Error saving banking info:",y),Z.error("Failed to save banking information")}finally{c(!1)}}},m=y=>!y||y.length<4?y:"".repeat(y.length-4)+y.slice(-4),p=d.account_number&&d.transit_number&&d.institution_number;return i?s.jsx(J,{className:"shadow-card",children:s.jsx(Q,{className:"p-4",children:s.jsx("div",{className:"animate-pulse h-20 bg-muted rounded"})})}):s.jsxs(J,{className:`shadow-card ${p?"":"ring-2 ring-amber-400"}`,children:[s.jsx(ke,{className:"pb-2",children:s.jsxs(Ee,{className:"text-base flex items-center gap-2",children:[s.jsx(ms,{className:"w-4 h-4 text-primary"}),"Direct Deposit Banking",!p&&s.jsx("span",{className:"text-xs text-amber-600 font-normal",children:"(Required for payroll)"})]})}),s.jsx(Q,{className:"space-y-4",children:t?s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 rounded-lg",children:s.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:" Your banking information is encrypted and stored securely. Only payroll administrators can access this data."})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"institution",children:"Institution Number (3 digits)"}),s.jsx(pe,{id:"institution",placeholder:"e.g., 004",value:d.institution_number,onChange:y=>h(v=>({...v,institution_number:y.target.value.replace(/\D/g,"").slice(0,3)})),maxLength:3,className:"font-mono"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Found on your cheque or bank app"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"transit",children:"Transit Number (5 digits)"}),s.jsx(pe,{id:"transit",placeholder:"e.g., 12345",value:d.transit_number,onChange:y=>h(v=>({...v,transit_number:y.target.value.replace(/\D/g,"").slice(0,5)})),maxLength:5,className:"font-mono"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"account",children:"Account Number"}),s.jsx(pe,{id:"account",placeholder:"e.g., 1234567890",value:d.account_number,onChange:y=>h(v=>({...v,account_number:y.target.value.replace(/\D/g,"")})),className:"font-mono"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(K,{onClick:f,className:"flex-1",disabled:l,children:[s.jsx(In,{className:"w-4 h-4 mr-2"}),l?"Saving...":"Save"]}),s.jsx(K,{variant:"outline",onClick:()=>r(!1),disabled:l,children:"Cancel"})]})]}):s.jsx("div",{className:"space-y-3",children:p?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[s.jsxs("div",{className:"space-y-1 font-mono text-sm",children:[s.jsxs("p",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Institution:"})," ",n?d.institution_number:m(d.institution_number)]}),s.jsxs("p",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Transit:"})," ",n?d.transit_number:m(d.transit_number)]}),s.jsxs("p",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Account:"})," ",n?d.account_number:m(d.account_number)]})]}),s.jsx("div",{className:"flex flex-col gap-2",children:s.jsx(K,{variant:"ghost",size:"icon",onClick:()=>a(!n),className:"text-muted-foreground",children:n?s.jsx(ai,{className:"w-4 h-4"}):s.jsx(Ms,{className:"w-4 h-4"})})})]}),s.jsx(K,{variant:"outline",size:"sm",onClick:()=>r(!0),className:"w-full",children:"Update Banking Info"})]}):s.jsxs("div",{className:"text-center py-4",children:[s.jsx("p",{className:"text-muted-foreground text-sm mb-3",children:"No banking information on file. Add your direct deposit details to receive payments."}),s.jsxs(K,{onClick:()=>r(!0),children:[s.jsx(ms,{className:"w-4 h-4 mr-2"}),"Add Banking Info"]})]})})})]})},L9e=({isOpen:e,onClose:t,onConfirm:r,fieldType:n})=>{const a=n==="policeCheck"?"police check":"address";return s.jsx(di,{open:e,onOpenChange:i=>!i&&t(),children:s.jsxs(Ia,{children:[s.jsxs(ks,{children:[s.jsxs(Ts,{className:"flex items-center gap-2",children:[s.jsx(Wr,{className:"w-5 h-5 text-amber-500"}),"Verification Required"]}),s.jsxs(As,{className:"space-y-3",children:[s.jsxs("p",{children:["Updating your ",s.jsx("strong",{children:a})," will move your account to"," ",s.jsx("strong",{children:"PENDING"})," status until an admin can review and re-approve you."]}),s.jsxs("div",{className:"p-3 bg-muted rounded-lg space-y-2",children:[s.jsx("p",{className:"font-medium text-foreground",children:"While pending, you:"}),s.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",children:[s.jsx("li",{children:"Cannot claim new shifts"}),s.jsx("li",{children:"Can complete already claimed shifts"})]})]}),s.jsx("p",{className:"text-sm",children:"An admin will review your updated information and re-approve your profile."})]})]}),s.jsxs(Es,{children:[s.jsx(Ra,{onClick:t,children:"Cancel"}),s.jsx(Os,{onClick:r,children:"I Understand, Continue"})]})]})})},F9e="1.0",B9e="I understand that if I use my personal vehicle for hospital/doctor pickups or client transport, it is my sole responsibility to maintain valid commercial or 'business use' insurance as per Ontario law. I acknowledge that the platform does not provide auto insurance for private transport.",z9e=({isOpen:e,onClose:t,onConfirm:r})=>{const[n,a]=x.useState(!1),i=()=>{n&&(r(),a(!1))},o=()=>{a(!1),t()};return s.jsx(di,{open:e,onOpenChange:l=>!l&&o(),children:s.jsxs(Ia,{children:[s.jsxs(ks,{children:[s.jsxs(Ts,{className:"flex items-center gap-2",children:[s.jsx(mr,{className:"w-5 h-5 text-amber-500"}),"Vehicle Insurance Disclaimer"]}),s.jsxs(As,{className:"space-y-4",children:[s.jsx("p",{className:"text-amber-800 dark:text-amber-200 bg-amber-50 dark:bg-amber-950/30 p-3 rounded-lg border border-amber-200 dark:border-amber-800",children:B9e}),s.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-muted rounded-lg border",children:[s.jsx(Co,{id:"vehicleDisclaimerAccept",checked:n,onCheckedChange:l=>a(l)}),s.jsx(oe,{htmlFor:"vehicleDisclaimerAccept",className:"text-sm font-medium cursor-pointer",children:"I understand and agree to the above terms"})]})]})]}),s.jsxs(Es,{children:[s.jsx(Ra,{onClick:o,children:"Cancel"}),s.jsx(Os,{onClick:i,disabled:!n,children:"Accept & Continue"})]})]})})},U9e=()=>{const{user:e,logout:t}=na(),r=(e==null?void 0:e.firstName)||"Worker",[n,a]=x.useState(null),[i,o]=x.useState(""),[l,c]=x.useState(""),[d,h]=x.useState(""),[f,m]=x.useState(""),[p,y]=x.useState(""),[v,b]=x.useState([]),[N,j]=x.useState(""),[w,S]=x.useState(""),[C,P]=x.useState(""),[T,O]=x.useState(),[E,D]=x.useState(),[I,A]=x.useState(!1),[V,U]=x.useState(!1),[$,H]=x.useState(!1),[F,R]=x.useState(!1),[z,G]=x.useState(!1),[ie,ae]=x.useState(!1),[X,le]=x.useState(""),[fe,ge]=x.useState(""),[ee,re]=x.useState(!1),[ue,Ne]=x.useState(!1),[je,Y]=x.useState(!1),[xe,Me]=x.useState(!1),[$e,ce]=x.useState("address"),[Le,qe]=x.useState(!1),[Xe,Et]=x.useState(""),B=x.useRef(null),ve=x.useRef(null),Fe=x.useRef(null),[st,pt]=x.useState(""),[et,Zt]=x.useState(null),[mt,zn]=x.useState(null);x.useEffect(()=>{if(pce(),e!=null&&e.id){const Ae=Ma(e.id);Ae&&(a(Ae),o(Ae.homePostalCode||""),c(Ae.homeCity||""),h(Ae.gender||""),m(Ae.phone||""),y(Ae.email||""),b(Ae.languages||[]),j(Ae.certifications||""),S(Ae.hasOwnTransport||""),P(Ae.licensePlate||""),pt(Ae.policeCheckDate||""),O(Ae.vehiclePhotoUrl),D(Ae.vehiclePhotoName))}},[e==null?void 0:e.id]);const Qt=()=>{if(e!=null&&e.id){const Ae=Ma(e.id);Ae&&a(Ae)}},aa=async Ae=>{var ur;const at=(ur=Ae.target.files)==null?void 0:ur[0];if(!(!at||!(e!=null&&e.id))){if(!at.type.startsWith("image/")){Z.error("Please upload an image file");return}if(at.size>5*1024*1024){Z.error("Image must be less than 5MB");return}try{const Mr=await D_(at);wce(e.id,Mr,at.name)&&(Qt(),Z.success("Profile photo updated"))}catch{Z.error("Failed to upload photo")}}},$r=async Ae=>{var Mr;const at=(Mr=Ae.target.files)==null?void 0:Mr[0];if(!at)return;if(!["application/pdf","image/jpeg","image/png","image/jpg"].includes(at.type)){Z.error("Please upload a PDF or image file");return}if(at.size>10*1024*1024){Z.error("File must be less than 10MB");return}try{const se=await D_(at);Zt({url:se,name:at.name}),ce("policeCheck"),Me(!0)}catch{Z.error("Failed to process file")}},xn=()=>{if(!(e!=null&&e.id)||!et||!st){Z.error("Please select a date for your police check"),Me(!1);return}gce(e.id,et.url,et.name,st)?(Qt(),Zt(null),Me(!1),Z.success("Police check uploaded",{description:"Your profile is now pending admin review."})):Z.error("Failed to update police check")},Cr=()=>{if(!(e!=null&&e.id))return;if(i&&!Ri(i)){Z.error("Invalid postal code",{description:"Please enter a valid Canadian postal code (e.g., M5V 1J9)"});return}const Ae=i?Wd(i):"";(n==null?void 0:n.homePostalCode)?(ce("address"),Me(!0)):dce(e.id,Ae,l||void 0)&&(o(Ae),A(!1),Qt(),Z.success("Home address saved"))},gt=()=>{if(!(e!=null&&e.id))return;const Ae=i?Wd(i):"";xce(e.id,Ae,l||void 0)?(o(Ae),A(!1),Me(!1),Qt(),Z.success("Address updated",{description:"Your profile is now pending admin review."})):Z.error("Failed to update address")},Un=()=>{if(!(e!=null&&e.id)||!d)return;uce(e.id,d)?(U(!1),Qt(),Z.success("Gender preference saved")):Z.error("Failed to save gender preference")},ns=()=>{if(!(e!=null&&e.id))return;if(!f||!p){Z.error("Please fill in all contact fields");return}vce(e.id,f,p)?(H(!1),Qt(),Z.success("Contact information updated")):Z.error("Failed to update contact information")},Fs=()=>{if(!(e!=null&&e.id))return;yce(e.id,v)?(R(!1),Qt(),Z.success("Languages updated")):Z.error("Failed to update languages")},ia=()=>{if(!(e!=null&&e.id))return;bce(e.id,N)?(G(!1),Qt(),Z.success("Certifications updated")):Z.error("Failed to update certifications")},La=Ae=>{Ae==="yes-car"&&w!=="yes-car"?(Et(Ae),qe(!0)):S(Ae)},gi=()=>{if(!(e!=null&&e.id))return;const Ae={accepted:!0,acceptedAt:new Date().toISOString(),disclaimerVersion:F9e};p3(e.id,Xe,C||void 0,Ae,(mt==null?void 0:mt.url)||T,(mt==null?void 0:mt.name)||E)?(S(Xe),qe(!1),Y(!1),zn(null),Qt(),Z.success("Transport status updated")):Z.error("Failed to update transport status")},oa=()=>{if(!(e!=null&&e.id))return;p3(e.id,w,C||void 0,void 0,(mt==null?void 0:mt.url)||T,(mt==null?void 0:mt.name)||E)?(Y(!1),mt&&(O(mt.url),D(mt.name),zn(null)),Qt(),Z.success("Transport status updated")):Z.error("Failed to update transport status")},Tn=async Ae=>{var ur;const at=(ur=Ae.target.files)==null?void 0:ur[0];if(at){if(!at.type.startsWith("image/")){Z.error("Please upload an image file");return}if(at.size>5*1024*1024){Z.error("Image must be less than 5MB");return}try{const Mr=await D_(at);zn({url:Mr,name:at.name})}catch{Z.error("Failed to upload vehicle photo")}}},we=async()=>{if(X.length<6){Z.error("Password must be at least 6 characters");return}if(X!==fe){Z.error("Passwords do not match");return}Ne(!0);try{const{error:Ae}=await de.auth.updateUser({password:X});Ae?Z.error("Failed to update password",{description:Ae.message}):(Z.success("Password updated successfully"),le(""),ge(""),ae(!1))}catch{Z.error("Something went wrong")}finally{Ne(!1)}},Te=Ae=>{switch(Ae){case"female":return"Female";case"male":return"Male";case"other":return"Other";case"prefer-not-to-say":return"Prefer not to say";default:return"Not set"}},Ke=Ae=>{switch(Ae){case"yes-car":return"Own Vehicle";case"yes-transit":return"Public Transit";case"no":return"No Transportation";default:return"Not set"}},xt=(n==null?void 0:n.expiredDueToPoliceCheck)&&(n==null?void 0:n.vettingStatus)==="pending",pr=(n==null?void 0:n.vettingStatus)==="pending",dr=n?mce(n):null,Jr=n?x7(n):!1;return s.jsxs("div",{className:"space-y-6",children:[pr&&s.jsx(J,{className:"border-amber-400 bg-amber-50 dark:bg-amber-950/30",children:s.jsx(Q,{className:"p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(At,{className:"w-5 h-5 text-amber-600 mt-0.5 shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-amber-800 dark:text-amber-200",children:"Account Pending - Action Required"}),xt?s.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 mt-1",children:"Your police clearance check has expired. You must upload a new police check to continue claiming shifts."}):s.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 mt-1",children:"Your profile is pending admin review. You cannot claim new shifts until approved."}),s.jsxs("ul",{className:"text-sm text-amber-700 dark:text-amber-300 mt-2 space-y-1 list-disc list-inside",children:[s.jsx("li",{children:"You cannot claim new shifts"}),s.jsx("li",{children:"You can complete already claimed shifts"})]})]})]})})}),s.jsx(J,{className:"shadow-card",children:s.jsx(Q,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsxs(oi,{className:"w-20 h-20 cursor-pointer",onClick:()=>{var Ae;return(Ae=B.current)==null?void 0:Ae.click()},children:[n!=null&&n.profilePhotoUrl?s.jsx(li,{src:n.profilePhotoUrl,alt:"Profile"}):null,s.jsx(ci,{className:"bg-primary/10 text-primary text-xl",children:r.charAt(0)})]}),s.jsx(K,{variant:"outline",size:"icon",className:"absolute -bottom-1 -right-1 h-7 w-7 rounded-full",onClick:()=>{var Ae;return(Ae=B.current)==null?void 0:Ae.click()},children:s.jsx(qs,{className:"w-3 h-3"})}),s.jsx("input",{ref:B,type:"file",accept:"image/*",className:"hidden",onChange:aa})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-foreground",children:(n==null?void 0:n.firstName)||r}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Personal Support Assistant"}),(n==null?void 0:n.vettingStatus)==="approved"&&s.jsxs(ne,{variant:"outline",className:"mt-1 bg-green-50 text-green-700 border-green-200",children:[s.jsx(Kt,{className:"w-3 h-3 mr-1"}),"Approved"]}),(n==null?void 0:n.vettingStatus)==="pending"&&s.jsx(ne,{variant:"outline",className:"mt-1 bg-amber-50 text-amber-700 border-amber-200",children:"Pending Review"})]})]})})}),s.jsxs(J,{className:`shadow-card ${d?"":"ring-2 ring-amber-400"}`,children:[s.jsx(ke,{className:"pb-2",children:s.jsxs(Ee,{className:"text-base flex items-center gap-2",children:[s.jsx(pn,{className:"w-4 h-4 text-primary"}),"Gender",!d&&s.jsx("span",{className:"text-xs text-amber-600 font-normal",children:"(Required for job matching)"})]})}),s.jsx(Q,{className:"space-y-4",children:V?s.jsxs("div",{className:"space-y-3",children:[s.jsxs(Xt,{value:d,onValueChange:Ae=>h(Ae),children:[s.jsx(qt,{children:s.jsx(Jt,{placeholder:"Select your gender"})}),s.jsxs(Gt,{children:[s.jsx(_e,{value:"female",children:"Female"}),s.jsx(_e,{value:"male",children:"Male"}),s.jsx(_e,{value:"other",children:"Other"}),s.jsx(_e,{value:"prefer-not-to-say",children:"Prefer not to say"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(K,{onClick:Un,className:"flex-1",disabled:!d,children:[s.jsx(In,{className:"w-4 h-4 mr-2"}),"Save"]}),s.jsx(K,{variant:"outline",onClick:()=>U(!1),children:"Cancel"})]})]}):s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[s.jsx("p",{className:`font-medium ${d?"text-foreground":"text-amber-600"}`,children:Te(d)}),s.jsx(K,{variant:"outline",size:"sm",onClick:()=>U(!0),children:d?"Edit":"Set"})]})})]}),s.jsxs(J,{className:`shadow-card ${Jr?"ring-2 ring-destructive":""}`,children:[s.jsx(ke,{className:"pb-2",children:s.jsxs(Ee,{className:"text-base flex items-center gap-2",children:[s.jsx(mr,{className:"w-4 h-4 text-primary"}),"Police Clearance Check",Jr&&s.jsx(ne,{variant:"destructive",className:"ml-2",children:"Expired"})]})}),s.jsxs(Q,{className:"space-y-4",children:[Jr&&s.jsx("div",{className:"p-3 bg-destructive/10 border border-destructive/20 rounded-lg",children:s.jsx("p",{className:"text-sm text-destructive font-medium",children:"Your police check has expired. Upload a new one to continue working."})}),n!=null&&n.policeCheckUrl?s.jsxs("div",{className:"p-3 bg-muted rounded-lg space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(zt,{className:"w-4 h-4 text-primary"}),s.jsx("span",{className:"font-medium",children:n.policeCheckName||"Police Check"})]}),n.policeCheckDate&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(Lt,{className:"w-4 h-4"}),s.jsxs("span",{children:["Issued: ",new Date(n.policeCheckDate).toLocaleDateString()]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Lt,{className:"w-4 h-4"}),s.jsxs("span",{className:Jr?"text-destructive font-medium":"text-muted-foreground",children:["Expires: ",new Date(new Date(n.policeCheckDate).setFullYear(new Date(n.policeCheckDate).getFullYear()+1)).toLocaleDateString()]})]}),!Jr&&dr!==null&&dr<=30&&s.jsxs(ne,{variant:"outline",className:"bg-amber-50 text-amber-700 border-amber-200",children:["Expires in ",dr," days"]})]})]}):s.jsx("div",{className:"p-3 bg-muted rounded-lg",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"No police check uploaded"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"policeCheckDate",children:"Date of Police Check Issue"}),s.jsx(pe,{id:"policeCheckDate",type:"date",value:st,onChange:Ae=>pt(Ae.target.value),max:new Date().toISOString().split("T")[0]})]}),s.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:s.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300",children:" Updating your police check will require admin re-approval. Police checks must be renewed yearly."})}),s.jsx("input",{ref:ve,type:"file",accept:".pdf,image/*",className:"hidden",onChange:$r}),s.jsxs(K,{variant:"outline",className:"w-full",onClick:()=>{var Ae;return(Ae=ve.current)==null?void 0:Ae.click()},disabled:!st,children:[s.jsx(ad,{className:"w-4 h-4 mr-2"}),n!=null&&n.policeCheckUrl?"Upload New Check":"Upload Police Check"]}),!st&&s.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Please select the issue date before uploading"})]})]})]}),s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{className:"pb-2",children:s.jsxs(Ee,{className:"text-base flex items-center gap-2",children:[s.jsx(St,{className:"w-4 h-4 text-primary"}),"Home Address",(n==null?void 0:n.homePostalCode)&&s.jsx("span",{className:"text-xs text-amber-600 font-normal",children:"(Changing requires re-approval)"})]})}),s.jsx(Q,{className:"space-y-4",children:I?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"postalCode",children:"Postal Code"}),s.jsx(pe,{id:"postalCode",placeholder:"L4M 2R1",value:i,onChange:Ae=>o(Ae.target.value.toUpperCase()),onBlur:()=>{if(!i)return;const Ae=px(i);Ae.formatted&&o(Ae.formatted)},maxLength:7})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"city",children:"City (optional)"}),s.jsx(pe,{id:"city",placeholder:"Toronto",value:l,onChange:Ae=>c(Ae.target.value)})]}),(n==null?void 0:n.homePostalCode)&&s.jsx("p",{className:"text-xs text-amber-600",children:" Changing your address will require admin re-approval"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(K,{onClick:Cr,className:"flex-1",children:[s.jsx(In,{className:"w-4 h-4 mr-2"}),"Save"]}),s.jsx(K,{variant:"outline",onClick:()=>A(!1),children:"Cancel"})]})]}):s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[s.jsx("div",{children:i?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"font-medium text-foreground",children:i}),l&&s.jsx("p",{className:"text-sm text-muted-foreground",children:l})]}):s.jsx("p",{className:"text-muted-foreground",children:"No address set"})}),s.jsx(K,{variant:"outline",size:"sm",onClick:()=>A(!0),children:i?"Edit":"Add"})]})})]}),s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{className:"pb-2",children:s.jsxs(Ee,{className:"text-base flex items-center gap-2",children:[s.jsx(Fn,{className:"w-4 h-4 text-primary"}),"Contact Information"]})}),s.jsx(Q,{className:"space-y-4",children:$?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"phone",children:"Phone Number"}),s.jsx(pe,{id:"phone",type:"tel",placeholder:"(416) 555-1234",value:f,onChange:Ae=>m(Ae.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"email",children:"Email Address"}),s.jsx(pe,{id:"email",type:"email",placeholder:"your@email.com",value:p,onChange:Ae=>y(Ae.target.value)})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(K,{onClick:ns,className:"flex-1",children:[s.jsx(In,{className:"w-4 h-4 mr-2"}),"Save"]}),s.jsx(K,{variant:"outline",onClick:()=>H(!1),children:"Cancel"})]})]}):s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Fn,{className:"w-3 h-3 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:f||"No phone set"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hn,{className:"w-3 h-3 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:p||"No email set"})]})]}),s.jsx(K,{variant:"outline",size:"sm",onClick:()=>H(!0),children:"Edit"})]})})})]}),s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{className:"pb-2",children:s.jsxs(Ee,{className:"text-base flex items-center gap-2",children:[s.jsx(Jn,{className:"w-4 h-4 text-primary"}),"Account Security"]})}),s.jsx(Q,{className:"space-y-4",children:ie?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"newPassword",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(pe,{id:"newPassword",type:ee?"text":"password",placeholder:"Enter new password (min 6 characters)",value:X,onChange:Ae=>le(Ae.target.value),className:"pr-10"}),s.jsx(K,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>re(!ee),children:ee?s.jsx(ai,{className:"w-4 h-4 text-muted-foreground"}):s.jsx(Ms,{className:"w-4 h-4 text-muted-foreground"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"confirmNewPassword",children:"Confirm New Password"}),s.jsx(pe,{id:"confirmNewPassword",type:ee?"text":"password",placeholder:"Confirm new password",value:fe,onChange:Ae=>ge(Ae.target.value)})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(K,{onClick:we,className:"flex-1",disabled:ue,children:ue?s.jsx(s.Fragment,{children:"Updating..."}):s.jsxs(s.Fragment,{children:[s.jsx(In,{className:"w-4 h-4 mr-2"}),"Update Password"]})}),s.jsx(K,{variant:"outline",onClick:()=>{ae(!1),le(""),ge("")},children:"Cancel"})]})]}):s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Jn,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:"Password"})]}),s.jsx(K,{variant:"outline",size:"sm",onClick:()=>ae(!0),children:"Change"})]})})]}),s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{className:"pb-2",children:s.jsxs(Ee,{className:"text-base flex items-center gap-2",children:[s.jsx(si,{className:"w-4 h-4 text-primary"}),"Transportation"]})}),s.jsx(Q,{className:"space-y-4",children:je?s.jsxs("div",{className:"space-y-3",children:[s.jsxs(Xt,{value:w,onValueChange:La,children:[s.jsx(qt,{children:s.jsx(Jt,{placeholder:"Select transportation"})}),s.jsxs(Gt,{children:[s.jsx(_e,{value:"yes-car",children:"Yes, I have a car"}),s.jsx(_e,{value:"yes-transit",children:"Yes, I use public transit"}),s.jsx(_e,{value:"no",children:"No"})]})]}),w==="yes-car"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"licensePlate",children:"License Plate Number"}),s.jsx(pe,{id:"licensePlate",placeholder:"e.g., ABCD 123",value:C,onChange:Ae=>P(Ae.target.value.toUpperCase()),className:"font-mono"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Required for hospital/doctor pickup appointments"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(oe,{className:"flex items-center gap-2",children:[s.jsx(qs,{className:"w-4 h-4"}),"Vehicle Side Photo"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Upload a clear photo of the side of your vehicle"}),s.jsx("input",{ref:Fe,type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:Tn}),mt||T?s.jsxs("div",{className:"space-y-2",children:[s.jsx("img",{src:(mt==null?void 0:mt.url)||T,alt:"Vehicle",className:"w-full max-h-32 object-cover rounded-lg border"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:(mt==null?void 0:mt.name)||E||"Vehicle photo"}),s.jsxs(K,{type:"button",variant:"outline",size:"sm",onClick:()=>{var Ae;return(Ae=Fe.current)==null?void 0:Ae.click()},className:"gap-1",children:[s.jsx(qs,{className:"w-3 h-3"}),"Change"]})]})]}):s.jsxs(K,{type:"button",variant:"outline",className:"w-full gap-2",onClick:()=>{var Ae;return(Ae=Fe.current)==null?void 0:Ae.click()},children:[s.jsx(qs,{className:"w-4 h-4"}),"Upload Vehicle Photo"]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(K,{onClick:oa,className:"flex-1",children:[s.jsx(In,{className:"w-4 h-4 mr-2"}),"Save"]}),s.jsx(K,{variant:"outline",onClick:()=>{Y(!1),zn(null)},children:"Cancel"})]})]}):s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"font-medium",children:Ke(w)}),w==="yes-car"&&C&&s.jsxs("p",{className:"text-sm text-muted-foreground font-mono",children:["License Plate: ",C]}),w==="yes-car"&&!C&&s.jsx("p",{className:"text-xs text-amber-600",children:"No license plate on file - add for transport shifts"}),w==="yes-car"&&T&&s.jsxs("p",{className:"text-xs text-emerald-600 flex items-center gap-1",children:[s.jsx(qs,{className:"w-3 h-3"}),"Vehicle photo on file"]}),w==="yes-car"&&!T&&s.jsxs("p",{className:"text-xs text-amber-600 flex items-center gap-1",children:[s.jsx(qs,{className:"w-3 h-3"}),"No vehicle photo - required for transport shifts"]})]}),s.jsx(K,{variant:"outline",size:"sm",onClick:()=>Y(!0),children:"Edit"})]})})})]}),s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{className:"pb-2",children:s.jsxs(Ee,{className:"text-base flex items-center gap-2",children:[s.jsx(Oa,{className:"w-4 h-4 text-primary"}),"Languages"]})}),s.jsx(Q,{className:"space-y-4",children:F?s.jsxs("div",{className:"space-y-3",children:[s.jsx(bx,{selectedLanguages:v,onLanguagesChange:b,maxLanguages:5,label:"",description:"Select up to 5 languages you speak"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(K,{onClick:Fs,className:"flex-1",children:[s.jsx(In,{className:"w-4 h-4 mr-2"}),"Save"]}),s.jsx(K,{variant:"outline",onClick:()=>R(!1),children:"Cancel"})]})]}):s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[s.jsx("div",{className:"flex flex-wrap gap-1",children:v.length>0?v.map(Ae=>s.jsx(ne,{variant:"secondary",children:Ae.toUpperCase()},Ae)):s.jsx("span",{className:"text-muted-foreground",children:"No languages set"})}),s.jsx(K,{variant:"outline",size:"sm",onClick:()=>R(!0),children:"Edit"})]})})]}),s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{className:"pb-2",children:s.jsxs(Ee,{className:"text-base flex items-center gap-2",children:[s.jsx(lx,{className:"w-4 h-4 text-primary"}),"Certifications"]})}),s.jsx(Q,{className:"space-y-4",children:z?s.jsxs("div",{className:"space-y-3",children:[s.jsx(_n,{placeholder:"e.g., PSW Certificate, First Aid, CPR, Dementia Care Training...",value:N,onChange:Ae=>j(Ae.target.value),rows:3}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(K,{onClick:ia,className:"flex-1",children:[s.jsx(In,{className:"w-4 h-4 mr-2"}),"Save"]}),s.jsx(K,{variant:"outline",onClick:()=>G(!1),children:"Cancel"})]})]}):s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[s.jsx("p",{className:"text-sm",children:N||"No certifications listed"}),s.jsx(K,{variant:"outline",size:"sm",onClick:()=>G(!0),children:"Edit"})]})})]}),(n==null?void 0:n.id)&&s.jsx($9e,{pswProfileId:n.id}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"p-4 text-center",children:[s.jsx(Qe,{className:"w-5 h-5 text-primary mx-auto mb-2"}),s.jsx("p",{className:"text-2xl font-bold text-foreground",children:"32"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Hours This Week"})]})}),s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"p-4 text-center",children:[s.jsx(zt,{className:"w-5 h-5 text-primary mx-auto mb-2"}),s.jsx("p",{className:"text-2xl font-bold text-foreground",children:"8"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Shifts Completed"})]})})]}),s.jsxs(J,{className:"shadow-card border-amber-200 dark:border-amber-800 bg-amber-50/50 dark:bg-amber-950/20",children:[s.jsx(ke,{className:"pb-2",children:s.jsxs(Ee,{className:"text-base flex items-center gap-2 text-amber-800 dark:text-amber-200",children:[s.jsx(Wr,{className:"w-4 h-4"}),"Missed Shift Policy"]})}),s.jsxs(Q,{className:"pt-0",children:[s.jsxs("ul",{className:"text-sm text-amber-800/90 dark:text-amber-200/90 space-y-2",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-amber-600 mt-1",children:""}),s.jsx("span",{children:"First missed shift: Written warning"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-amber-600 mt-1",children:""}),s.jsx("span",{children:"Second missed shift: Suspension for 1 week"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-amber-600 mt-1",children:""}),s.jsx("span",{children:"Third missed shift: Termination of contract"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-amber-600 mt-1",children:""}),s.jsx("span",{children:"24-hour notice required for cancellations"})]})]}),s.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300 mt-3 pt-3 border-t border-amber-200 dark:border-amber-800",children:"Emergency situations will be reviewed on a case-by-case basis."})]})]}),s.jsxs(K,{variant:"outline",className:"w-full border-destructive/30 text-destructive hover:bg-destructive/10 hover:text-destructive",onClick:t,children:[s.jsx(Wh,{className:"w-4 h-4 mr-2"}),"Sign Out"]}),s.jsx(L9e,{isOpen:xe,onClose:()=>{Me(!1),Zt(null)},onConfirm:$e==="policeCheck"?xn:gt,fieldType:$e}),s.jsx(z9e,{isOpen:Le,onClose:()=>{qe(!1),Et("")},onConfirm:gi})]})},J5="psadirect_install_banner_dismissed",Q5=()=>{const[e,t]=x.useState(!1),[r,n]=x.useState(!1),[a,i]=x.useState(!1),[o,l]=x.useState(!1);x.useEffect(()=>{if(localStorage.getItem(J5))return;const h=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;if(l(h),h)return;const f=navigator.userAgent.toLowerCase(),m=/iphone|ipad|ipod/.test(f),p=/android/.test(f);if(n(m),i(p),m||p){const y=setTimeout(()=>t(!0),2e3);return()=>clearTimeout(y)}},[]);const c=()=>{localStorage.setItem(J5,"true"),t(!1)};return!e||o?null:s.jsx("div",{className:"fixed bottom-20 left-4 right-4 z-50 animate-in slide-in-from-bottom-4 duration-300",children:s.jsx(J,{className:"shadow-lg border-primary/20 bg-background/95 backdrop-blur-sm",children:s.jsx(Q,{className:"p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center shrink-0",children:s.jsx(nu,{className:"w-5 h-5 text-primary"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-semibold text-foreground text-sm mb-1",children:"Install PSA Direct App"}),r&&s.jsxs("p",{className:"text-xs text-muted-foreground leading-relaxed",children:["Tap the ",s.jsx(Pk,{className:"w-3 h-3 inline-block mx-0.5"})," Share icon, then select ",s.jsx("strong",{children:'"Add to Home Screen"'})," to save this as an app."]}),a&&s.jsxs("p",{className:"text-xs text-muted-foreground leading-relaxed",children:["Tap the ",s.jsx(Nk,{className:"w-3 h-3 inline-block mx-0.5"})," menu, then select ",s.jsx("strong",{children:'"Install App"'})," or ",s.jsx("strong",{children:'"Add to Home Screen"'}),"."]}),!r&&!a&&s.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Install this app for a better experience with quick access from your home screen."})]}),s.jsx(K,{variant:"ghost",size:"icon",className:"shrink-0 h-8 w-8 text-muted-foreground hover:text-foreground",onClick:c,children:s.jsx(Hr,{className:"w-4 h-4"})})]})})})})},W9e=()=>{const{user:e,isAuthenticated:t}=na(),[r,n]=x.useState("available"),[a,i]=x.useState(null),[o,l]=x.useState(null),[c,d]=x.useState(0),[h,f]=x.useState(null);if(x.useEffect(()=>{if(!(e!=null&&e.id))return;const v=()=>{const N=BE(e.id);d(N.length),N.length>0&&r==="available"&&n("active")};v();const b=setInterval(v,5e3);return()=>clearInterval(b)},[e==null?void 0:e.id,r]),x.useEffect(()=>{if(!(e!=null&&e.id))return;const v=async()=>{try{const N=await xY(e.id);N?(l(N.vettingStatus==="approved"),N.homeCity&&f(N.homeCity)):l(!1)}catch(N){console.error("Error checking PSW approval:",N)}};v();const b=setInterval(v,3e4);return()=>clearInterval(b)},[e==null?void 0:e.id]),!t||(e==null?void 0:e.role)!=="psw")return s.jsx(Yh,{to:"/psw-login",replace:!0});if(o===null)return null;if(!o)return s.jsx(Yh,{to:"/psw-pending",replace:!0});const m=v=>{i(v)},p=()=>{i(null)},y=()=>{i(null),n("history")};return a?s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"sticky top-0 z-40 bg-background/95 backdrop-blur-sm border-b border-border",children:s.jsx("div",{className:"flex items-center justify-between px-4 h-16 max-w-md mx-auto",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:Rr,alt:"PSW Direct Logo",className:"h-10 w-auto"}),s.jsx("span",{className:"font-semibold text-foreground",children:"PSW Portal"})]})})}),s.jsx("main",{className:"px-4 py-6 pb-24 max-w-md mx-auto",children:s.jsx(R9e,{shift:a,onBack:p,onComplete:y})}),s.jsx(Q5,{})]}):s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"sticky top-0 z-40 bg-background/95 backdrop-blur-sm border-b border-border",children:s.jsxs("div",{className:"flex items-center justify-between px-4 h-16 max-w-md mx-auto",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:Rr,alt:"PSA Direct Logo",className:"h-10 w-auto"}),s.jsx("span",{className:"font-semibold text-foreground",children:"PSA Portal"})]}),h&&s.jsxs(ne,{variant:"secondary",className:"flex items-center gap-1",children:[s.jsx(St,{className:"w-3 h-3"}),h]})]})}),s.jsx("main",{className:"px-4 py-4 pb-8 max-w-md mx-auto",children:s.jsxs(qi,{value:r,onValueChange:v=>n(v),children:[s.jsxs(ii,{className:"grid w-full grid-cols-5 mb-6",children:[s.jsxs(ft,{value:"available",className:"flex flex-col gap-1 py-2",children:[s.jsx(Gp,{className:"w-4 h-4"}),s.jsx("span",{className:"text-xs",children:"Jobs"})]}),s.jsxs(ft,{value:"active",className:"flex flex-col gap-1 py-2 relative",children:[s.jsx(cl,{className:"w-4 h-4"}),s.jsx("span",{className:"text-xs",children:"Active"}),c>0&&s.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-primary text-primary-foreground text-[10px] rounded-full flex items-center justify-center animate-pulse",children:c})]}),s.jsxs(ft,{value:"schedule",className:"flex flex-col gap-1 py-2",children:[s.jsx(Lt,{className:"w-4 h-4"}),s.jsx("span",{className:"text-xs",children:"Schedule"})]}),s.jsxs(ft,{value:"history",className:"flex flex-col gap-1 py-2",children:[s.jsx(Qe,{className:"w-4 h-4"}),s.jsx("span",{className:"text-xs",children:"History"})]}),s.jsxs(ft,{value:"profile",className:"flex flex-col gap-1 py-2",children:[s.jsx($t,{className:"w-4 h-4"}),s.jsx("span",{className:"text-xs",children:"Profile"})]})]}),s.jsx(Ct,{value:"available",children:s.jsx(k9e,{})}),s.jsx(Ct,{value:"active",children:s.jsx(D9e,{onSelectShift:m})}),s.jsx(Ct,{value:"schedule",children:s.jsx(E9e,{onSelectShift:m})}),s.jsx(Ct,{value:"history",children:s.jsx(A9e,{})}),s.jsx(Ct,{value:"profile",children:s.jsx(U9e,{})})]})}),s.jsx(Q5,{})]})},H9e=()=>{var E;const e=ps(),{login:t}=na(),[r,n]=x.useState(""),[a,i]=x.useState(""),[o,l]=x.useState(!1),[c,d]=x.useState(!1),[h,f]=x.useState(!1),[m,p]=x.useState(!1),[y,v]=x.useState(()=>{const D=window.location.hash;return D.includes("type=recovery")&&D.includes("access_token")}),[b,N]=x.useState(""),[j,w]=x.useState(""),[S,C]=x.useState(!1);x.useEffect(()=>{if(!y)return;(async()=>{const{data:{session:I}}=await de.auth.getSession();if(!I){const{data:{subscription:A}}=de.auth.onAuthStateChange((V,U)=>{(V==="PASSWORD_RECOVERY"||V==="SIGNED_IN"&&U)&&A.unsubscribe()});setTimeout(()=>A.unsubscribe(),5e3)}window.history.replaceState(null,"",window.location.pathname)})()},[y]);const P=async D=>{if(D.preventDefault(),!r||!r.includes("@")){Z.error("Please enter a valid email address");return}if(!a||a.length<6){Z.error("Please enter your password (at least 6 characters)");return}d(!0);try{const I="https://pavibobervhqkfzwkotw.supabase.co",A="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZl9pZCI6InBhdmlib2JlcnZocWtmendlb3R3Iiwicm9sZSI6ImFub24iLCJleHAiOjE3Njg0MTI4OTgzInV4cCI6MjA4Mzk4ODg5OH0.As1JiRkr9Pptpbrwg21sTPMX0VrENv47HPgHkv5_tNQ";console.log("[PSWLogin] Supabase config check:",{hasUrl:!!I,hasKey:!!A,keyPrefix:A==null?void 0:A.substring(0,20)});const{data:V,error:U}=await de.auth.signInWithPassword({email:r,password:a});if(U){console.error("PSW password login error:",U),U.message.includes("Invalid API key")||U.message.includes("apikey")?Z.error("App needs to be refreshed",{description:"Your app has outdated data. Please clear your browser cache, or uninstall and reinstall from psadirect.ca/install",duration:1e4}):U.message.includes("Invalid login credentials")?Z.error("Invalid email or password",{description:"Please check your credentials or reset your password."}):Z.error("Login failed",{description:U.message}),d(!1);return}if(V.session){const $=await vY(r);if(!$){Z.error("No PSW profile found",{description:"This account is not registered as a PSW."}),await de.auth.signOut(),d(!1);return}if($.vettingStatus==="flagged"||$.vettingStatus==="deactivated"){Z.error("Account restricted",{description:"Your account has been restricted. Please contact support for assistance.",duration:6e3}),await de.auth.signOut(),d(!1);return}t("psw",r,{id:$.id,firstName:$.firstName,lastName:$.lastName}),$.vettingStatus==="approved"?(Z.success(`Welcome back, ${$.firstName}!`),e("/psw",{replace:!0})):$.vettingStatus==="pending"?(Z.info("Your application is under review"),e("/psw-pending",{replace:!0})):$.vettingStatus==="rejected"?(t("psw",r,{id:$.id,firstName:$.firstName,lastName:$.lastName}),Z.info("Your previous application was not approved",{description:"You can review your information and resubmit.",duration:6e3}),e("/psw-pending",{replace:!0})):(Z.error("Your application status is unknown",{description:"Please contact support for more information."}),await de.auth.signOut())}}catch(I){console.error("PSW password login exception:",I),Z.error("Something went wrong")}finally{d(!1)}},T=async()=>{if(!r||!r.includes("@")){Z.error("Please enter your email address first");return}d(!0);try{const{data:D,error:I}=await de.functions.invoke("reset-password",{body:{email:r,redirectTo:`${window.location.origin}/psw-login`}});I?(console.error("Password reset error:",I),Z.error("Failed to send reset email",{description:"Please try again later."})):(p(!0),Z.success("Password reset email sent",{description:"Check your inbox for the reset link."}))}catch(D){console.error("Password reset exception:",D),Z.error("Something went wrong")}finally{d(!1)}},O=async()=>{if(b.length<6){Z.error("Password must be at least 6 characters");return}if(b!==j){Z.error("Passwords do not match");return}d(!0);try{const{data:{session:D}}=await de.auth.getSession();if(!D){Z.error("Session expired",{description:"Please request a new password reset link.",duration:6e3}),v(!1);return}const{error:I}=await de.auth.updateUser({password:b});I?(console.error("Password update error:",I),I.message.includes("session")||I.message.includes("token")?(Z.error("Session expired",{description:"Please request a new password reset link.",duration:6e3}),v(!1)):Z.error("Failed to update password",{description:I.message})):(Z.success("Password updated successfully!",{description:"You can now log in with your new password."}),v(!1),N(""),w(""),await de.auth.signOut())}catch{Z.error("Something went wrong")}finally{d(!1)}};return y?s.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[s.jsx("header",{className:"sticky top-0 z-40 bg-background/95 backdrop-blur-sm border-b border-border",children:s.jsx("div",{className:"flex items-center gap-3 px-4 h-16 max-w-md mx-auto",children:s.jsxs(dn,{to:"/",className:"flex items-center gap-3",children:[s.jsx("img",{src:Rr,alt:"PSA Direct Logo",className:"h-10 w-auto"}),s.jsx("span",{className:"font-semibold text-foreground",children:"PSA Direct"})]})})}),s.jsxs("main",{className:"flex-1 flex flex-col justify-center px-6 py-12 max-w-md mx-auto w-full",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(f0,{className:"w-8 h-8 text-primary"})}),s.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Set New Password"}),s.jsx("p",{className:"text-muted-foreground",children:"Enter your new password below"})]}),s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"newPassword",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Jn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(pe,{id:"newPassword",type:S?"text":"password",placeholder:"Enter new password (min 6 characters)",value:b,onChange:D=>N(D.target.value),className:"h-12 pl-10 pr-10"}),s.jsx(K,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>C(!S),children:S?s.jsx(ai,{className:"w-4 h-4 text-muted-foreground"}):s.jsx(Ms,{className:"w-4 h-4 text-muted-foreground"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"confirmPassword",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Jn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(pe,{id:"confirmPassword",type:S?"text":"password",placeholder:"Confirm new password",value:j,onChange:D=>w(D.target.value),className:"h-12 pl-10"})]})]}),s.jsx(K,{variant:"brand",className:"w-full h-12",onClick:O,disabled:c,children:c?s.jsxs(s.Fragment,{children:[s.jsx(Ut,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating Password..."]}):"Update Password"})]})})]})]}):h?s.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[s.jsx("header",{className:"sticky top-0 z-40 bg-background/95 backdrop-blur-sm border-b border-border",children:s.jsxs("div",{className:"flex items-center gap-3 px-4 h-16 max-w-md mx-auto",children:[s.jsx(K,{variant:"ghost",size:"icon",onClick:()=>f(!1),className:"shrink-0",children:s.jsx($n,{className:"w-5 h-5"})}),s.jsxs(dn,{to:"/",className:"flex items-center gap-3",children:[s.jsx("img",{src:Rr,alt:"PSA Direct Logo",className:"h-10 w-auto"}),s.jsx("span",{className:"font-semibold text-foreground",children:"PSA Direct"})]})]})}),s.jsx("main",{className:"flex-1 flex flex-col justify-center px-6 py-12 max-w-md mx-auto w-full",children:s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Reset Password"}),s.jsx("p",{className:"text-muted-foreground",children:m?"Check your email for the reset link":"Enter your email to receive a password reset link"})]}),m?s.jsx("div",{className:"p-4 bg-muted rounded-lg text-center",children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:["We've sent a password reset link to ",s.jsx("strong",{children:r}),". Please check your inbox and spam folder."]})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-foreground",children:"Email Address"}),s.jsx(pe,{id:"reset-email",type:"email",placeholder:"your.email@example.com",value:r,onChange:D=>n(D.target.value),className:"h-12"})]}),s.jsx(K,{variant:"brand",className:"w-full h-12",onClick:T,disabled:c,children:c?s.jsxs(s.Fragment,{children:[s.jsx(Ut,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending..."]}):"Send Reset Link"})]}),s.jsx(K,{variant:"ghost",className:"w-full",onClick:()=>{f(!1),p(!1)},children:"Back to Login"})]})})})]}):s.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[s.jsx("header",{className:"sticky top-0 z-40 bg-background/95 backdrop-blur-sm border-b border-border",children:s.jsxs("div",{className:"flex items-center gap-3 px-4 h-16 max-w-md mx-auto",children:[s.jsx(K,{variant:"ghost",size:"icon",onClick:()=>e("/"),className:"shrink-0",children:s.jsx($n,{className:"w-5 h-5"})}),s.jsxs(dn,{to:"/",className:"flex items-center gap-3",children:[s.jsx("img",{src:Rr,alt:"PSA Direct Logo",className:"h-10 w-auto"}),s.jsx("span",{className:"font-semibold text-foreground",children:"PSA Direct"})]})]})}),s.jsxs("main",{className:"flex-1 flex flex-col justify-center px-6 py-12 max-w-md mx-auto w-full",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h2",{className:"text-2xl lg:text-3xl font-bold text-foreground mb-2",children:"PSA Portal Login"}),s.jsx("p",{className:"text-muted-foreground",children:"Sign in with your email and password"})]}),s.jsx(J,{className:"shadow-card",children:s.jsx(Q,{className:"p-6",children:s.jsxs("form",{onSubmit:P,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-foreground",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(hn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(pe,{id:"email",type:"email",placeholder:"your.email@example.com",value:r,onChange:D=>n(D.target.value),className:"h-12 pl-10"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-foreground",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Jn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(pe,{id:"password",type:o?"text":"password",placeholder:"Enter your password",value:a,onChange:D=>i(D.target.value),className:"h-12 pl-10 pr-10"}),s.jsx(K,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>l(!o),children:o?s.jsx(ai,{className:"w-4 h-4 text-muted-foreground"}):s.jsx(Ms,{className:"w-4 h-4 text-muted-foreground"})})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(K,{type:"button",variant:"link",className:"text-sm text-primary p-0 h-auto",onClick:()=>f(!0),children:"Forgot password?"})}),s.jsx(K,{type:"submit",variant:"brand",className:"w-full h-12",disabled:c,children:c?s.jsxs(s.Fragment,{children:[s.jsx(Ut,{className:"w-4 h-4 mr-2 animate-spin"}),"Signing in..."]}):"Sign In"})]})})}),s.jsxs("div",{className:"mt-8 text-center",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Not a registered PSA yet?"}),s.jsx(K,{variant:"link",className:"text-primary",onClick:()=>e("/join-team"),children:"Apply to join our team "})]}),s.jsxs("p",{className:"mt-6 text-center text-[10px] text-muted-foreground/50 select-all",children:["Build: 2026-02-23T05-PSW-v4 | ref: ",((E=yY.match(/\/\/([^.]+)/))==null?void 0:E[1])||"MISSING"," | tail: ",pP.slice(-6)||"MISSING"]})]})]})},yY="https://pavibobervhqkfzwkotw.supabase.co",pP="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZl9pZCI6InBhdmlib2JlcnZocWtmendlb3R3Iiwicm9sZSI6ImFub24iLCJleHAiOjE3Njg0MTI4OTgzInV4cCI6MjA4Mzk4ODg5OH0.As1JiRkr9Pptpbrwg21sTPMX0VrENv47HPgHkv5_tNQ";var cL;console.info("PSW Build: 2026-02-23T05-PSW-v4","| ref:",((cL=yY.match(/\/\/([^.]+)/))==null?void 0:cL[1])||"MISSING","| anon tail:",pP.slice(-6)||"MISSING","| key len:",pP.length);const V9e=()=>{var C;const{user:e,isAuthenticated:t,logout:r,login:n}=na(),a=ps(),[i,o]=x.useState(!1),[l,c]=x.useState(Ea),[d,h]=x.useState(null),[f,m]=x.useState(!0),[p,y]=x.useState(!1);if(x.useEffect(()=>{Kf().then(c),e!=null&&e.email?de.from("psw_profiles").select("*").eq("email",e.email.toLowerCase()).single().then(({data:P})=>{if(P){const T={id:P.id,firstName:P.first_name,lastName:P.last_name,email:P.email,phone:P.phone||"",homePostalCode:P.home_postal_code,homeCity:P.home_city,hscpoaNumber:P.hscpoa_number,policeCheckName:P.police_check_name,languages:P.languages||["en"],vettingStatus:P.vetting_status,vettingNotes:P.vetting_notes,rejectionReasons:P.rejection_reasons,rejectionNotes:P.rejection_notes,applicationVersion:P.application_version||1};h(T)}m(!1)}):m(!1)},[e==null?void 0:e.email]),!t)return s.jsx(Yh,{to:"/psw-login",replace:!0});const v=()=>{r(),a("/")},b=()=>{window.location.href=`tel:${l.replace(/[^\d]/g,"")}`},N=async()=>{if(d){y(!0);try{const P=d.applicationVersion||1,{error:T}=await de.from("psw_profiles").update({vetting_status:"pending",vetting_notes:"Re-submitted by applicant after rejection",resubmitted_at:new Date().toISOString(),application_version:P+1,last_status_change_at:new Date().toISOString()}).eq("id",d.id);T?Z.error("Failed to resubmit application"):(h({...d,vettingStatus:"pending"}),Z.success("Application resubmitted!",{description:"Your application is now back under review."}))}catch(P){console.error("Resubmit error:",P),Z.error("Something went wrong")}finally{y(!1)}}},j=async()=>{if(!(e!=null&&e.email)){Z.error("No email found in auth context");return}o(!0);try{const P=d||await vY(e.email);if(!P){Z.error("PSW profile not found in database"),o(!1);return}const T=await C9e(P.id,"approved","Dev bypass for Progressier testing");if(!T){Z.error("Failed to update vetting status"),o(!1);return}n("psw",e.email,{id:T.id,firstName:T.firstName,lastName:T.lastName}),Z.success("Bypass successful! Redirecting to dashboard..."),setTimeout(()=>{a("/psw")},500)}catch(P){console.error("Dev bypass error:",P),Z.error("Bypass failed - check console for details"),o(!1)}},w=(d==null?void 0:d.vettingStatus)==="rejected"||(d==null?void 0:d.vettingStatus)==="rejected_final",S=(d==null?void 0:d.vettingStatus)==="rejected_needs_update";return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"sticky top-0 z-40 bg-background/95 backdrop-blur-sm border-b border-border",children:s.jsxs("div",{className:"flex items-center justify-between px-4 h-16 max-w-md mx-auto",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:Rr,alt:"PSA Direct Logo",className:"h-10 w-auto"}),s.jsx("span",{className:"font-semibold text-foreground",children:"PSA Direct"})]}),s.jsx(K,{variant:"ghost",size:"icon",onClick:v,className:"text-muted-foreground hover:text-destructive",children:s.jsx(Wh,{className:"w-5 h-5"})})]})}),s.jsxs("main",{className:"px-4 py-8 max-w-md mx-auto space-y-6",children:[S?s.jsxs(s.Fragment,{children:[s.jsx(J,{className:"shadow-card border-amber-300 bg-amber-50 dark:bg-amber-950/20",children:s.jsxs(Q,{className:"p-6 text-center",children:[s.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full bg-amber-100 flex items-center justify-center",children:s.jsx(At,{className:"w-10 h-10 text-amber-600"})}),s.jsx(ne,{className:"mb-4 bg-amber-100 text-amber-700 border-amber-200",children:"Application Needs Updates"}),s.jsxs("h1",{className:"text-2xl font-bold text-foreground mb-2",children:["Hi, ",(e==null?void 0:e.firstName)||(d==null?void 0:d.firstName)||"there"]}),s.jsx("p",{className:"text-muted-foreground",children:"Your application needs some updates before we can proceed with approval."})]})}),(d==null?void 0:d.rejectionReasons)&&d.rejectionReasons.length>0&&s.jsx(J,{className:"shadow-card border-amber-200",children:s.jsxs(Q,{className:"p-6",children:[s.jsxs("h3",{className:"font-semibold text-foreground mb-3 flex items-center gap-2",children:[s.jsx(At,{className:"w-4 h-4 text-amber-600"}),"Items to update:"]}),s.jsx("ul",{className:"space-y-2",children:d.rejectionReasons.map((P,T)=>s.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[s.jsx(Xn,{className:"w-4 h-4 text-amber-500 mt-0.5 shrink-0"}),s.jsx("span",{children:P})]},T))}),(d==null?void 0:d.rejectionNotes)&&s.jsxs("p",{className:"mt-3 text-sm text-muted-foreground italic border-t pt-3",children:["Admin notes: ",d.rejectionNotes]})]})}),s.jsx(J,{className:"shadow-card border-primary/20",children:s.jsxs(Q,{className:"p-6 text-center space-y-4",children:[s.jsx("h3",{className:"font-semibold text-foreground",children:"Update & Resubmit"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Please update the items listed above, then resubmit your application for review."}),s.jsx(K,{onClick:N,disabled:p,className:"w-full",children:p?s.jsxs(s.Fragment,{children:[s.jsx(Nr,{className:"w-4 h-4 mr-2 animate-spin"}),"Resubmitting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Nr,{className:"w-4 h-4 mr-2"}),"Resubmit Application"]})})]})}),s.jsx(J,{className:"shadow-card border-muted",children:s.jsxs(Q,{className:"p-4 flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:s.jsx(gh,{className:"w-5 h-5 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-foreground",children:"Have questions?"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Our team is here to help"})]}),s.jsx(K,{variant:"outline",size:"sm",onClick:b,children:"Call Office"})]})})]}):w?s.jsxs(s.Fragment,{children:[s.jsx(J,{className:"shadow-card border-destructive/20 bg-destructive/5",children:s.jsxs(Q,{className:"p-6 text-center",children:[s.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full bg-destructive/10 flex items-center justify-center",children:s.jsx(Xn,{className:"w-10 h-10 text-destructive"})}),s.jsx(ne,{variant:"destructive",className:"mb-4",children:"Application Not Approved"}),s.jsxs("h1",{className:"text-2xl font-bold text-foreground mb-2",children:["Hi, ",(e==null?void 0:e.firstName)||(d==null?void 0:d.firstName)||"there"]}),s.jsxs("p",{className:"text-muted-foreground",children:["Unfortunately, your previous application was not approved.",(d==null?void 0:d.vettingNotes)&&s.jsxs("span",{className:"block mt-2 text-sm font-medium text-destructive",children:["Reason: ",d.vettingNotes]})]})]})}),s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"p-6",children:[s.jsx("h3",{className:"font-semibold text-foreground mb-4",children:"Your submitted information:"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[s.jsx($t,{className:"w-4 h-4 text-muted-foreground shrink-0"}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-foreground",children:[d==null?void 0:d.firstName," ",d==null?void 0:d.lastName]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Name"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[s.jsx(Fn,{className:"w-4 h-4 text-muted-foreground shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-foreground",children:(d==null?void 0:d.phone)||"Not provided"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Phone"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[s.jsx(St,{className:"w-4 h-4 text-muted-foreground shrink-0"}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-foreground",children:[(d==null?void 0:d.homeCity)||"Not provided",d!=null&&d.homePostalCode?`, ${d.homePostalCode}`:""]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Location"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[s.jsx(lx,{className:"w-4 h-4 text-muted-foreground shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-foreground",children:(d==null?void 0:d.hscpoaNumber)||"Not provided"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"HSCPOA Number"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[s.jsx(zt,{className:"w-4 h-4 text-muted-foreground shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-foreground",children:(d==null?void 0:d.policeCheckName)||"Not uploaded"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Police Check"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[s.jsx(Oa,{className:"w-4 h-4 text-muted-foreground shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-foreground",children:((C=d==null?void 0:d.languages)==null?void 0:C.join(", "))||"English"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Languages"})]})]})]})]})}),s.jsx(J,{className:"shadow-card border-primary/20",children:s.jsxs(Q,{className:"p-6 text-center space-y-4",children:[s.jsx("h3",{className:"font-semibold text-foreground",children:"Want to try again?"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"If you've updated your documents or believe there was an error, you can resubmit your application for review."}),s.jsx(K,{onClick:N,disabled:p,className:"w-full",children:p?s.jsxs(s.Fragment,{children:[s.jsx(Nr,{className:"w-4 h-4 mr-2 animate-spin"}),"Resubmitting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Nr,{className:"w-4 h-4 mr-2"}),"Resubmit Application"]})})]})}),s.jsx(J,{className:"shadow-card border-muted",children:s.jsxs(Q,{className:"p-4 flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:s.jsx(gh,{className:"w-5 h-5 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-foreground",children:"Have questions?"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Our team is here to help"})]}),s.jsx(K,{variant:"outline",size:"sm",onClick:b,children:"Call Office"})]})})]}):s.jsxs(s.Fragment,{children:[s.jsx(J,{className:"shadow-card border-primary/20 bg-primary/5",children:s.jsxs(Q,{className:"p-6 text-center",children:[s.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(Qe,{className:"w-10 h-10 text-primary animate-pulse"})}),s.jsx(ne,{className:"mb-4 bg-amber-100 text-amber-700 border-amber-200",children:"Application Under Review"}),s.jsxs("h1",{className:"text-2xl font-bold text-foreground mb-2",children:["Hi, ",(e==null?void 0:e.firstName)||"there","! "]}),s.jsx("p",{className:"text-muted-foreground",children:"We have received your application and our team is reviewing your documents."})]})}),s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"p-6",children:[s.jsx("h3",{className:"font-semibold text-foreground mb-4",children:"What we're reviewing:"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(zt,{className:"w-4 h-4 text-primary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-foreground text-sm",children:"Police Check"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Verifying your background check"})]}),s.jsx(Qe,{className:"w-4 h-4 text-amber-500"})]}),s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(mr,{className:"w-4 h-4 text-primary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-foreground text-sm",children:"HSCPOA Registration"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Confirming your HSCPOA number"})]}),s.jsx(Qe,{className:"w-4 h-4 text-amber-500"})]}),s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(Kt,{className:"w-4 h-4 text-primary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-foreground text-sm",children:"Credentials Review"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Verifying your qualifications"})]}),s.jsx(Qe,{className:"w-4 h-4 text-amber-500"})]})]})]})}),s.jsx(J,{className:"shadow-card",children:s.jsxs(Q,{className:"p-6",children:[s.jsx("h3",{className:"font-semibold text-foreground mb-4",children:"What happens next?"}),s.jsxs("ol",{className:"space-y-4",children:[s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx("span",{className:"w-6 h-6 rounded-full bg-primary text-primary-foreground text-xs flex items-center justify-center font-semibold shrink-0",children:"1"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-foreground text-sm",children:"Review Completed"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Usually takes 1-2 business days"})]})]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx("span",{className:"w-6 h-6 rounded-full bg-muted text-muted-foreground text-xs flex items-center justify-center font-semibold shrink-0",children:"2"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-foreground text-sm",children:"Email Notification"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"You'll receive an email when approved"})]})]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx("span",{className:"w-6 h-6 rounded-full bg-muted text-muted-foreground text-xs flex items-center justify-center font-semibold shrink-0",children:"3"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-foreground text-sm",children:"Start Accepting Jobs"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Browse and claim shifts in your area"})]})]})]})]})}),s.jsx(J,{className:"shadow-card border-muted",children:s.jsxs(Q,{className:"p-4 flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:s.jsx(gh,{className:"w-5 h-5 text-muted-foreground"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-foreground",children:"Have questions?"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Our team is here to help"})]}),s.jsx(K,{variant:"outline",size:"sm",onClick:b,children:"Call Office"})]})}),s.jsxs("div",{className:"text-center p-4 bg-primary/5 rounded-lg border border-primary/10",children:[s.jsx("p",{className:"text-sm text-primary font-medium",children:" We're excited to have you join our team!"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"You will receive an email as soon as you are cleared to accept jobs."})]})]}),s.jsx(J,{className:"shadow-card border-amber-300 bg-amber-50 dark:bg-amber-950/20",children:s.jsxs(Q,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(h0,{className:"w-4 h-4 text-amber-600"}),s.jsx("span",{className:"text-xs font-semibold text-amber-700 uppercase tracking-wide",children:"Development Only"})]}),s.jsx(K,{onClick:j,disabled:i,className:"w-full bg-amber-500 hover:bg-amber-600 text-white",children:i?"Bypassing...":"Bypass Approval (Dev Only)"}),s.jsx("p",{className:"text-xs text-amber-600 mt-2 text-center",children:"Skip vetting for Progressier notification testing"})]})})]})]})},q9e=`
PSW DIRECT INC.

INDEPENDENT CONTRACTOR AND PLATFORM ACCESS AGREEMENT

IMPORTANT LEGAL NOTICE  ELECTRONIC ACCEPTANCE

This Independent Contractor and Platform Access Agreement (the "Agreement") is a legally binding contract between you and PSW Direct Inc. governing your access to and use of the PSW Direct website, any web-based application, and any future mobile application or related technology (collectively, the "Platform").

By clicking "I Agree," "Accept," "Continue," or by otherwise accessing or using the Platform, you acknowledge and agree that you have carefully read and understood this Agreement in its entirety, that you are entering into this Agreement voluntarily and electronically, that this Agreement has the same legal effect as a signed written contract, and that no employment relationship exists between you and PSW Direct Inc.

If you do not agree to all terms of this Agreement, you must not access or use the Platform.

1. ROLE AND NATURE OF PSW DIRECT INC.

PSW Direct Inc. is a technology company that operates an online marketplace designed to facilitate introductions and communications between independent personal support workers and individuals or organizations seeking personal support services. The Platform functions solely as a digital intermediary that enables contractors to identify potential service opportunities and enables clients to identify potential service providers.

PSW Direct Inc. does not provide personal support services, healthcare services, nursing services, home-care services, or any hands-on services of any kind. PSW Direct Inc. does not supervise, manage, train, direct, control, or evaluate the manner in which contractors perform services, nor does it determine the methods, timing, tools, equipment, or professional judgment used by contractors in the performance of services.

All services offered, accepted, and performed through the Platform are provided exclusively by the contractor, acting independently and directly for the client. PSW Direct Inc. expressly disclaims any responsibility or liability for the quality, safety, legality, appropriateness, or outcome of services performed by contractors.

Nothing in this Agreement shall be construed as creating any agency, partnership, joint venture, fiduciary, or representative relationship between PSW Direct Inc. and any contractor.

2. INDEPENDENT CONTRACTOR STATUS

You expressly acknowledge, confirm, and agree that you are engaged as an independent contractor and not as an employee of PSW Direct Inc. You acknowledge that you are operating an independent caregiving or support services business and that you retain full control over whether, when, where, and how you perform services.

You further acknowledge that you are not entitled to, and expressly waive any claim to, employment-related rights, benefits, or protections, including employment insurance, Canada Pension Plan contributions by PSW Direct Inc., workers' compensation coverage, minimum wage protections, overtime pay, vacation pay, statutory holiday pay, paid sick leave, notice of termination, or any other benefit or protection arising under employment or labour legislation.

Nothing in this Agreement, nor your use of the Platform, shall be interpreted as creating an employment relationship, and you agree not to assert otherwise in any legal, administrative, or regulatory proceeding.

3. TAXES, REMITTANCES, AND FINANCIAL RESPONSIBILITY

You acknowledge and agree that you are solely responsible for determining, reporting, and remitting all taxes, levies, contributions, and assessments arising from amounts paid to you through the Platform, including income taxes, GST or HST if applicable, Canada Pension Plan contributions, and any other federal, provincial, or municipal obligations.

PSW Direct Inc. does not withhold, deduct, or remit taxes or contributions on your behalf unless expressly required by law, and you agree to indemnify and hold PSW Direct Inc. harmless from any claims, penalties, interest, or assessments arising from your failure to comply with tax or remittance obligations.

4. ELIGIBILITY, QUALIFICATIONS, AND CONTINUING DISCLOSURE

By accepting this Agreement, you represent, warrant, and covenant that you are legally entitled to work in Canada, are at least eighteen years of age, and possess the education, training, skills, experience, and judgment necessary to safely and competently provide personal support services.

You further represent that all information you have provided to PSW Direct Inc., including information relating to your identity, background, training, and experience, is true, accurate, and complete.

You agree that you have an ongoing obligation to promptly disclose to PSW Direct Inc. any change in circumstances that may affect your eligibility or suitability to provide services, including the expiration or loss of relevant training, criminal charges or convictions related to safety or trust, regulatory investigations, or any physical or mental condition that may impair your ability to safely perform services.

PSW Direct Inc. reserves the right, but not the obligation, to suspend or deactivate your access to the Platform based on such disclosures or failures to disclose or for any other reason in its sole discretion.

5. PERSONAL SUPPORT WORKER

You acknowledge and agree that, in the Province of Ontario, personal support workers are not a regulated health profession and are not governed by a professional college under the Regulated Health Professions Act.

You expressly acknowledge that you are not authorized to perform controlled acts under Ontario law, including diagnosing conditions, prescribing medications, or performing medical or nursing procedures, unless otherwise lawfully permitted.

You agree that you will not represent yourself as a nurse, healthcare professional, or regulated health practitioner, and that you are solely responsible for ensuring that all services you provide remain within the lawful scope of personal support services.

PSW Direct Inc. does not verify, certify, or guarantee your compliance with applicable scope-of-practice requirements and expressly disclaims responsibility for any services performed outside lawful scope.

6. PLATFORM ACCESS AND LICENSE

Subject to your compliance with this Agreement, PSW Direct Inc. grants you a limited, non-exclusive, non-transferable, revocable license to access and use the Platform solely for the purpose of identifying and accepting service opportunities.

You agree not to misuse the Platform, including copying, scraping, reverse engineering, or exploiting any portion of the Platform, circumventing payment or fee mechanisms, soliciting clients outside the Platform to avoid fees, sharing access credentials, or using the Platform for unlawful, deceptive, or unsafe purposes.

PSW Direct Inc. may suspend or terminate your access to the Platform at any time, with or without notice, where it determines, in its sole discretion, that continued access poses legal, safety, regulatory, or reputational risk.

7. ACCEPTANCE, PERFORMANCE, AND CANCELLATION OF ASSIGNMENTS

You acknowledge that you are under no obligation to accept any service request and retain complete discretion over whether to accept or decline opportunities presented through the Platform.

Once you accept a service request, you agree to perform the services in a professional, competent, and respectful manner, consistent with industry standards, lawful client instructions, and applicable safety considerations.

Cancellations made within four hours of a scheduled assignment may result in a cancellation fee which is currently $25 (subject to change), which you expressly authorize PSW Direct Inc. to deduct from future payments.

8. PAYMENTS, FEES, AND DEDUCTIONS

You acknowledge that rates for services may be set or accepted through the Platform and that PSW Direct Inc. may charge platform, service, or administrative fees in connection with facilitating transactions.

You expressly authorize PSW Direct Inc. to deduct applicable fees, cancellation charges, chargebacks, dispute adjustments, or other amounts permitted under Platform policies.

Payments are processed electronically and may be delayed, adjusted, or withheld in connection with fraud prevention, dispute resolution, or compliance reviews.

9. PROFESSIONAL CONDUCT AND CLIENT SAFETY

You agree to conduct yourself in a manner that prioritizes client safety, dignity, and privacy. You shall not abuse, neglect, exploit, harass, or discriminate against any client, nor shall you engage in inappropriate personal, financial, or emotional relationships with clients.

You shall not handle client finances, accept gifts or inheritances, provide legal or medical advice, or otherwise exceed the lawful scope of personal support services.

10. INSURANCE

You acknowledge and agree that you are solely responsible for obtaining and maintaining, at your own expense, any insurance coverage you deem necessary or appropriate, including commercial general liability insurance, professional liability insurance, and health or disability insurance.

PSW Direct Inc. does not provide insurance coverage of any kind and expressly disclaims any obligation to do so.

11. ASSUMPTION OF RISK

You acknowledge that providing personal support services involves inherent risks, including risks of physical injury, illness, exposure to communicable diseases, unsafe environments, and unpredictable client or third-party conduct.

To the fullest extent permitted by law, you knowingly and voluntarily assume all such risks and agree that PSW Direct Inc. shall not be responsible for any resulting injury, loss, or damage.

12. INDEMNIFICATION

You agree to fully defend, indemnify, and hold harmless PSW Direct Inc., its directors, officers, employees, shareholders, and affiliates from and against any and all claims, demands, losses, damages, penalties, fines, regulatory actions, and legal costs arising out of or related to your services, your conduct, your breach of this Agreement, or any injury, harm, or death suffered by a client or third party.

13. LIMITATION OF LIABILITY

To the maximum extent permitted by law, PSW Direct Inc. shall not be liable for any indirect, incidental, special, consequential, or punitive damages. In no event shall PSW Direct Inc.'s total liability exceed the lesser of one hundred dollars Canadian or the total platform fees paid to PSW Direct Inc. in the twelve months preceding the event giving rise to the claim.

14. CONFIDENTIALITY AND PRIVACY

You agree to maintain the confidentiality of client information and Platform data and to comply with all applicable privacy legislation, including the Personal Information Protection and Electronic Documents Act.

15. NON-CIRCUMVENTION AND NON-SOLICITATION

You agree that, during the term of this Agreement and for twelve months following its termination, you will not solicit or provide services to clients introduced through the Platform outside the Platform in a manner that circumvents PSW Direct Inc.'s fees.

16. GOVERNING LAW AND JURISDICTION

This Agreement shall be governed by and construed in accordance with the laws of the Province of Ontario and the federal laws of Canada applicable therein. You irrevocably attorn to the exclusive jurisdiction of the courts of Ontario.

17. ELECTRONIC RECORDS AND CLICK-WRAP VALIDITY

You agree that this Agreement may be accepted electronically and that electronic records, click-wrap logs, IP addresses, timestamps, and related data constitute valid and enforceable evidence of your acceptance.

18. ENTIRE AGREEMENT

This Agreement constitutes the entire agreement between you and PSW Direct Inc. and supersedes all prior or contemporaneous agreements, representations, or understandings.

ACKNOWLEDGEMENT

By clicking "I Agree" or otherwise indicating acceptance, you confirm that you have read, understood, and agree to be bound by this Agreement.
`.trim();function G9e(){return s.jsxs(hr,{children:[s.jsx(oE,{asChild:!0,children:s.jsx("button",{type:"button",className:"text-sm font-medium text-foreground underline underline-offset-4 hover:text-primary transition-colors ml-6",children:"View Full Independent Contractor Agreement"})}),s.jsxs(or,{className:"max-w-2xl max-h-[80vh]",children:[s.jsx(lr,{children:s.jsx(cr,{className:"text-xl",children:"Independent Contractor Agreement"})}),s.jsx(Ps,{className:"h-[60vh] pr-4",children:s.jsx("div",{className:"space-y-4 text-sm text-muted-foreground whitespace-pre-wrap leading-relaxed",children:q9e})})]})]})}const K9e="1.0",Y9e="I understand that if I use my personal vehicle for hospital/doctor pickups or client transport, it is my sole responsibility to maintain valid commercial or 'business use' insurance as per Ontario law. I acknowledge that the platform does not provide auto insurance for private transport.",oy=4,Z9e=()=>{const e=ps(),[t,r]=x.useState(1),[n,a]=x.useState(!1),[i,o]=x.useState(!1),[l,c]=x.useState(!1),[d,h]=x.useState(null),[f,m]=x.useState(["en"]),p=x.useRef(null),y=x.useRef(null),v=x.useRef(null),b=x.useRef(null),[N,j]=x.useState(null),[w,S]=x.useState(null),[C,P]=x.useState(null),[T,O]=x.useState(null),[E,D]=x.useState(null),[I,A]=x.useState(null),[V,U]=x.useState(null),[$,H]=x.useState(null),[F,R]=x.useState({firstName:"",lastName:"",email:"",phone:"",gender:"",password:"",confirmPassword:"",streetAddress:"",city:"",province:"ON",postalCode:"",hscpoaNumber:"",policeCheckDate:"",eTransferEmail:"",bankInstitution:"",bankTransit:"",bankAccount:"",yearsExperience:"",certifications:"",hasOwnTransport:"",licensePlate:"",availableShifts:"",govIdType:""}),[z,G]=x.useState(!1),[ie,ae]=x.useState(!1),[X,le]=x.useState(null),[fe,ge]=x.useState(!1),ee=(B,ve)=>{R(Fe=>({...Fe,[B]:ve})),B==="postalCode"&&h(null)},re=B=>{const ve=Wd(B);ee("postalCode",ve),h(null)},ue=()=>{if(!F.postalCode)return;const B=px(F.postalCode);B.formatted?(ee("postalCode",B.formatted),h(null)):h(B.error)},Ne=async B=>{var Fe;const ve=(Fe=B.target.files)==null?void 0:Fe[0];if(ve){if(!ve.type.startsWith("image/")){D("Please upload an image file (JPG, PNG, etc.)");return}if(ve.size>5*1024*1024){D("Image must be less than 5MB");return}try{const st=await ay(ve);j({url:st,name:ve.name}),D(null)}catch{D("Failed to process image")}}},je=async B=>{var st;const ve=(st=B.target.files)==null?void 0:st[0];if(!ve)return;if(!["application/pdf","image/jpeg","image/png","image/jpg"].includes(ve.type)){A("Please upload a PDF or image file");return}if(ve.size>10*1024*1024){A("File must be less than 10MB");return}try{const pt=await ay(ve);S({url:pt,name:ve.name}),A(null)}catch{A("Failed to process file")}},Y=async B=>{var st;const ve=(st=B.target.files)==null?void 0:st[0];if(!ve)return;if(!["application/pdf","image/jpeg","image/png","image/jpg"].includes(ve.type)){H("Please upload a PDF or image file");return}if(ve.size>10*1024*1024){H("File must be less than 10MB");return}try{const pt=await ay(ve);O({url:pt,name:ve.name}),H(null)}catch{H("Failed to process file")}},xe=async B=>{var Fe;const ve=(Fe=B.target.files)==null?void 0:Fe[0];if(ve){if(!ve.type.startsWith("image/")){U("Please upload an image file (JPG, PNG, etc.)");return}if(ve.size>5*1024*1024){U("Image must be less than 5MB");return}try{const st=await ay(ve);P({url:st,name:ve.name}),U(null)}catch{U("Failed to process image")}}},Me=B=>{switch(B){case 1:return F.postalCode&&!Ri(F.postalCode)||!F.password||F.password.length<6||F.password!==F.confirmPassword?!1:!!(F.firstName&&F.lastName&&F.email&&F.phone&&F.gender&&F.streetAddress&&F.city&&F.postalCode&&N);case 2:return!(!F.policeCheckDate||!F.govIdType||!T||F.hasOwnTransport==="yes-car"&&(!fe||!F.licensePlate||!C));case 3:return f.length>0;case 4:return!!(F.bankInstitution&&F.bankTransit&&F.bankAccount&&F.bankInstitution.length===3&&F.bankTransit.length===5&&F.bankAccount.length>=7);default:return!0}},$e=()=>{t<oy&&Me(t)&&r(B=>B+1)},ce=()=>{t>1&&r(B=>B-1)},Le=async(B,ve,Fe)=>{try{const pt=await(await fetch(B.url)).blob(),et=new FormData;et.append("file",pt,B.name),et.append("user_id",ve),et.append("doc_type",Fe);const{data:Zt,error:mt}=await de.functions.invoke("upload-psw-document",{body:et});return mt?(console.error(`Upload ${Fe} error:`,mt),null):Zt}catch(st){return console.error(`Upload ${Fe} exception:`,st),null}},qe=async B=>{if(B.preventDefault(),!F.firstName||!F.lastName||!F.email||!F.phone){Z.error("Please fill in all required fields");return}if(!F.password||F.password.length<6){Z.error("Password must be at least 6 characters");return}if(F.password!==F.confirmPassword){Z.error("Passwords do not match");return}if(!N){D("Profile photo is required"),Z.error("Please upload a profile photo");return}if(!l){Z.error("Please agree to the platform policy");return}o(!0);try{console.log(" Step 1: Uploading documents to storage...");const ve=crypto.randomUUID();let Fe="",st=N.name,pt,et,Zt,mt,zn;const Qt=await Le(N,ve,"profile-photo");if(Qt?(Fe=Qt.url,st=Qt.fileName):console.warn("Profile photo upload failed, proceeding without URL"),w){const gt=await Le(w,ve,"police-check");gt&&(pt=gt.url,et=gt.fileName)}if(T){const gt=new FormData,ns=await(await fetch(T.url)).blob();gt.append("file",ns,T.name),gt.append("user_id",ve),gt.append("doc_type","gov-id"),gt.append("gov_id_type",F.govIdType);const{data:Fs,error:ia}=await de.functions.invoke("upload-psw-document",{body:gt});!ia&&Fs&&(zn=Fs.filePath||Fs.url)}if(F.hasOwnTransport==="yes-car"&&C){const gt=await Le(C,ve,"vehicle-photo");gt&&(Zt=gt.url,mt=gt.fileName)}console.log(" Step 2: Creating account and saving PSW profile...");const aa=F.hasOwnTransport==="yes-car"&&fe?{accepted:!0,acceptedAt:new Date().toISOString(),disclaimerVersion:K9e}:null,{data:$r,error:xn}=await de.functions.invoke("register-psw",{body:{email:F.email,password:F.password,profile:{first_name:F.firstName,last_name:F.lastName,phone:F.phone,gender:F.gender||null,home_postal_code:F.postalCode||null,home_city:F.city||null,profile_photo_url:Fe||null,profile_photo_name:st||null,hscpoa_number:F.hscpoaNumber||null,police_check_url:pt||null,police_check_name:et||null,police_check_date:F.policeCheckDate||null,languages:f,years_experience:F.yearsExperience||null,certifications:F.certifications||null,has_own_transport:F.hasOwnTransport||null,license_plate:F.hasOwnTransport==="yes-car"&&F.licensePlate||null,available_shifts:F.availableShifts||null,vehicle_disclaimer:aa,vehicle_photo_url:Zt||null,vehicle_photo_name:mt||null,gov_id_type:F.govIdType||"missing",gov_id_url:zn||null,gov_id_status:zn?"uploaded":"missing"},banking:{institution_number:F.bankInstitution,transit_number:F.bankTransit,account_number:F.bankAccount}}}),Cr=xn?($r==null?void 0:$r.error)||xn.message:$r==null?void 0:$r.error;if(xn||$r!=null&&$r.error){console.error("register-psw error:",{regError:xn,regData:$r}),Cr!=null&&Cr.includes("already exists")||Cr!=null&&Cr.includes("already been registered")?(Z.error("This email has already been used to register",{description:"Please log in to your existing account instead.",duration:8e3}),setTimeout(()=>e("/psw-login"),3e3)):Z.error("Registration failed",{description:Cr||"Please try again."}),o(!1);return}console.log(" PSW account & profile created:",$r),console.log(" Step 3: Sending welcome email...");try{await Nz(F.email,F.firstName)}catch(gt){console.warn("Welcome email failed (non-blocking):",gt)}console.log(" PSW Application submitted successfully"),a(!0)}catch(ve){console.error("Failed to submit application:",ve),ve instanceof Error?Z.error(`Submission failed: ${ve.message}`):Z.error("Failed to submit application. Please try again.")}finally{o(!1)}};if(n)return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"sticky top-0 z-40 bg-background/95 backdrop-blur-sm border-b border-border",children:s.jsx("div",{className:"flex items-center gap-3 px-4 h-16 max-w-md mx-auto",children:s.jsxs(dn,{to:"/",className:"flex items-center gap-3",children:[s.jsx("img",{src:Rr,alt:"PSA Direct Logo",className:"h-10 w-auto"}),s.jsx("span",{className:"font-semibold text-foreground",children:"PSA Direct"})]})})}),s.jsx("main",{className:"px-4 py-12 max-w-md mx-auto",children:s.jsx(J,{className:"shadow-card text-center",children:s.jsxs(Q,{className:"pt-8 pb-8 space-y-6",children:[s.jsx("div",{className:"w-20 h-20 mx-auto rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center",children:s.jsx(Kt,{className:"w-10 h-10 text-amber-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Application Received!"}),s.jsxs("p",{className:"text-muted-foreground",children:["Thank you for applying, ",F.firstName,"."]})]}),s.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[s.jsx("p",{className:"text-foreground font-medium mb-2",children:"What happens next?"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Your application is being reviewed by our Admin team. You will be notified via email once you are vetted and activated."})]}),s.jsxs("div",{className:"p-4 bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:[s.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:[s.jsx("strong",{children:"Status:"})," Pending Review"]}),s.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300 mt-1",children:"You cannot access the PSA portal until your application is approved."})]}),s.jsx(K,{variant:"outline",onClick:()=>e("/"),className:"w-full",children:"Return to Home"})]})})})]});const Xe=()=>{switch(t){case 1:return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(J,{className:"shadow-card",children:[s.jsxs(ke,{className:"pb-4",children:[s.jsxs(Ee,{className:"text-lg flex items-center gap-2",children:[s.jsx(qs,{className:"w-5 h-5 text-primary"}),"Profile Photo *"]}),s.jsx(Ge,{children:"Upload a clear, professional photo"})]}),s.jsx(Q,{children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsxs(oi,{className:"h-24 w-24 mb-4 cursor-pointer",onClick:()=>{var B;return(B=p.current)==null?void 0:B.click()},children:[N?s.jsx(li,{src:N.url,alt:"Profile preview"}):null,s.jsx(ci,{className:"bg-muted",children:s.jsx(qs,{className:"w-8 h-8 text-muted-foreground"})})]}),s.jsx("input",{ref:p,type:"file",accept:"image/*",className:"hidden",onChange:Ne}),s.jsxs(K,{type:"button",variant:"outline",onClick:()=>{var B;return(B=p.current)==null?void 0:B.click()},children:[s.jsx(ad,{className:"w-4 h-4 mr-2"}),N?"Change Photo":"Upload Photo"]}),N&&s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:N.name}),E&&s.jsx("p",{className:"text-xs text-destructive mt-2",children:E})]})})]}),s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{className:"pb-4",children:s.jsxs(Ee,{className:"text-lg flex items-center gap-2",children:[s.jsx($t,{className:"w-5 h-5 text-primary"}),"Personal Information"]})}),s.jsxs(Q,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"firstName",children:"Legal First Name *"}),s.jsx(pe,{id:"firstName",placeholder:"Sarah",value:F.firstName,onChange:B=>ee("firstName",B.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"lastName",children:"Legal Last Name *"}),s.jsx(pe,{id:"lastName",placeholder:"Johnson",value:F.lastName,onChange:B=>ee("lastName",B.target.value),required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(oe,{htmlFor:"email",className:"flex items-center gap-2",children:[s.jsx(hn,{className:"w-4 h-4 text-muted-foreground"}),"Email Address *"]}),s.jsx(pe,{id:"email",type:"email",placeholder:"sarah.johnson@email.com",value:F.email,onChange:B=>ee("email",B.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(oe,{htmlFor:"phone",className:"flex items-center gap-2",children:[s.jsx(Fn,{className:"w-4 h-4 text-muted-foreground"}),"Phone Number *"]}),s.jsx(pe,{id:"phone",type:"tel",placeholder:"(613) 555-1234",value:F.phone,onChange:B=>ee("phone",B.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"gender",children:"Gender *"}),s.jsxs(Xt,{value:F.gender,onValueChange:B=>ee("gender",B),children:[s.jsx(qt,{children:s.jsx(Jt,{placeholder:"Select your gender"})}),s.jsxs(Gt,{children:[s.jsx(_e,{value:"female",children:"Female"}),s.jsx(_e,{value:"male",children:"Male"}),s.jsx(_e,{value:"other",children:"Other"}),s.jsx(_e,{value:"prefer-not-to-say",children:"Prefer not to say"})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Some clients may request a specific gender for personal care services"})]})]})]}),s.jsxs(J,{className:"shadow-card",children:[s.jsxs(ke,{className:"pb-4",children:[s.jsxs(Ee,{className:"text-lg flex items-center gap-2",children:[s.jsx(Jn,{className:"w-5 h-5 text-primary"}),"Create Password"]}),s.jsx(Ge,{children:"Set a secure password for your account"})]}),s.jsxs(Q,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"password",children:"Password *"}),s.jsxs("div",{className:"relative",children:[s.jsx(pe,{id:"password",type:z?"text":"password",placeholder:"At least 6 characters",value:F.password,onChange:B=>{ee("password",B.target.value),le(null)},required:!0,className:"pr-10"}),s.jsx(K,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>G(!z),children:z?s.jsx(ai,{className:"w-4 h-4 text-muted-foreground"}):s.jsx(Ms,{className:"w-4 h-4 text-muted-foreground"})})]}),F.password&&F.password.length<6&&s.jsx("p",{className:"text-xs text-destructive",children:"Password must be at least 6 characters"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"confirmPassword",children:"Confirm Password *"}),s.jsxs("div",{className:"relative",children:[s.jsx(pe,{id:"confirmPassword",type:ie?"text":"password",placeholder:"Re-enter your password",value:F.confirmPassword,onChange:B=>{ee("confirmPassword",B.target.value),le(null)},required:!0,className:"pr-10"}),s.jsx(K,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>ae(!ie),children:ie?s.jsx(ai,{className:"w-4 h-4 text-muted-foreground"}):s.jsx(Ms,{className:"w-4 h-4 text-muted-foreground"})})]}),F.confirmPassword&&F.password!==F.confirmPassword&&s.jsx("p",{className:"text-xs text-destructive",children:"Passwords do not match"}),X&&s.jsx("p",{className:"text-xs text-destructive",children:X})]})]})]}),s.jsxs(J,{className:"shadow-card",children:[s.jsxs(ke,{className:"pb-4",children:[s.jsxs(Ee,{className:"text-lg flex items-center gap-2",children:[s.jsx(St,{className:"w-5 h-5 text-primary"}),"Home Address"]}),s.jsx(Ge,{children:"Your address helps us match you with nearby clients"})]}),s.jsxs(Q,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"streetAddress",children:"Street Address *"}),s.jsx(pe,{id:"streetAddress",placeholder:"123 Main Street, Unit 456",value:F.streetAddress,onChange:B=>ee("streetAddress",B.target.value),required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"city",children:"City *"}),s.jsx(pe,{id:"city",placeholder:"Ottawa",value:F.city,onChange:B=>ee("city",B.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"province",children:"Province"}),s.jsx(pe,{id:"province",value:F.province,disabled:!0,className:"bg-muted"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"postalCode",children:"Postal Code *"}),s.jsx(pe,{id:"postalCode",placeholder:"L4M 2R1",value:F.postalCode,onChange:B=>re(B.target.value),onBlur:ue,maxLength:7,required:!0}),d&&s.jsx("p",{className:"text-xs text-destructive",children:d})]})]})]})]});case 2:return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(J,{className:"shadow-card",children:[s.jsxs(ke,{className:"pb-4",children:[s.jsxs(Ee,{className:"text-lg flex items-center gap-2",children:[s.jsx(lx,{className:"w-5 h-5 text-primary"}),"HSCPOA Registration"]}),s.jsx(Ge,{children:"Health and Supportive Care Providers Oversight Authority"})]}),s.jsx(Q,{className:"space-y-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"hscpoaNumber",children:"HSCPOA Registration Number"}),s.jsx(pe,{id:"hscpoaNumber",placeholder:"e.g., HSCPOA-2024-12345",value:F.hscpoaNumber,onChange:B=>ee("hscpoaNumber",B.target.value)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"If you don't have this yet, you can submit without it"})]})})]}),s.jsxs(J,{className:"shadow-card",children:[s.jsxs(ke,{className:"pb-4",children:[s.jsxs(Ee,{className:"text-lg flex items-center gap-2",children:[s.jsx(mr,{className:"w-5 h-5 text-primary"}),"Police Check"]}),s.jsx(Ge,{children:"Vulnerable Sector Check document"})]}),s.jsxs(Q,{className:"space-y-4",children:[s.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-4 text-center",children:[s.jsx("input",{ref:y,type:"file",accept:".pdf,image/*",className:"hidden",onChange:je}),w?s.jsxs("div",{className:"space-y-2",children:[s.jsx(zt,{className:"w-8 h-8 text-primary mx-auto"}),s.jsx("p",{className:"text-sm text-foreground font-medium",children:w.name}),s.jsx(K,{type:"button",variant:"outline",size:"sm",onClick:()=>{var B;return(B=y.current)==null?void 0:B.click()},children:"Change File"})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsx(ad,{className:"w-8 h-8 text-muted-foreground mx-auto"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload your police check document"}),s.jsxs(K,{type:"button",variant:"outline",size:"sm",onClick:()=>{var B;return(B=y.current)==null?void 0:B.click()},children:[s.jsx(ad,{className:"w-4 h-4 mr-2"}),"Select File"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Accepts PDF or image files (max 10MB)"})]}),I&&s.jsx("p",{className:"text-xs text-destructive mt-2",children:I})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"policeCheckDate",children:"Date of Police Check Issue *"}),s.jsx(pe,{id:"policeCheckDate",type:"date",value:F.policeCheckDate,onChange:B=>ee("policeCheckDate",B.target.value),max:new Date().toISOString().split("T")[0],required:!0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter the date your police check was issued. Police checks must be renewed yearly."})]})]})]}),s.jsxs(J,{className:"shadow-card border-primary/30",children:[s.jsxs(ke,{className:"pb-4",children:[s.jsxs(Ee,{className:"text-lg flex items-center gap-2",children:[s.jsx(mr,{className:"w-5 h-5 text-primary"}),"Government ID *"]}),s.jsx(Ge,{children:"Upload a valid government-issued photo ID"})]}),s.jsxs(Q,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"govIdType",children:"ID Type *"}),s.jsxs(Xt,{value:F.govIdType,onValueChange:B=>ee("govIdType",B),children:[s.jsx(qt,{children:s.jsx(Jt,{placeholder:"Select ID type"})}),s.jsxs(Gt,{children:[s.jsx(_e,{value:"drivers_license",children:"Driver's License"}),s.jsx(_e,{value:"ontario_photo_card",children:"Ontario Photo Card"}),s.jsx(_e,{value:"passport",children:"Passport"}),s.jsx(_e,{value:"other",children:"Other Government ID"})]})]})]}),s.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-4 text-center",children:[s.jsx("input",{ref:b,type:"file",accept:".pdf,image/*",className:"hidden",onChange:Y}),T?s.jsxs("div",{className:"space-y-2",children:[s.jsx(zt,{className:"w-8 h-8 text-primary mx-auto"}),s.jsx("p",{className:"text-sm text-foreground font-medium",children:T.name}),s.jsx(K,{type:"button",variant:"outline",size:"sm",onClick:()=>{var B;return(B=b.current)==null?void 0:B.click()},children:"Change File"})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsx(ad,{className:"w-8 h-8 text-muted-foreground mx-auto"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload your government ID document"}),s.jsxs(K,{type:"button",variant:"outline",size:"sm",onClick:()=>{var B;return(B=b.current)==null?void 0:B.click()},children:[s.jsx(ad,{className:"w-4 h-4 mr-2"}),"Select File"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Accepts PDF or image files (max 10MB)"})]}),$&&s.jsx("p",{className:"text-xs text-destructive mt-2",children:$})]}),!F.govIdType&&s.jsx("p",{className:"text-xs text-destructive",children:"Please select an ID type"}),F.govIdType&&!T&&s.jsx("p",{className:"text-xs text-destructive",children:"Government ID upload is required"}),s.jsx("div",{className:"p-3 bg-muted rounded-lg",children:s.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.jsx("strong",{children:"Privacy:"})," Your ID is stored securely and only accessible by authorized admin personnel for verification purposes. No ID numbers are stored."]})})]})]}),s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{className:"pb-4",children:s.jsx(Ee,{className:"text-lg",children:"Experience & Availability"})}),s.jsxs(Q,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"yearsExperience",children:"Years of Experience"}),s.jsxs(Xt,{value:F.yearsExperience,onValueChange:B=>ee("yearsExperience",B),children:[s.jsx(qt,{children:s.jsx(Jt,{placeholder:"Select experience level"})}),s.jsxs(Gt,{children:[s.jsx(_e,{value:"0-1",children:"Less than 1 year"}),s.jsx(_e,{value:"1-3",children:"1-3 years"}),s.jsx(_e,{value:"3-5",children:"3-5 years"}),s.jsx(_e,{value:"5+",children:"5+ years"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"certifications",children:"Certifications / Credentials"}),s.jsx(_n,{id:"certifications",placeholder:"e.g., PSW Certificate, First Aid, CPR, Dementia Care Training...",value:F.certifications,onChange:B=>ee("certifications",B.target.value),rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(oe,{htmlFor:"hasOwnTransport",className:"flex items-center gap-2",children:[s.jsx(si,{className:"w-4 h-4 text-muted-foreground"}),"Transportation"]}),s.jsxs(Xt,{value:F.hasOwnTransport,onValueChange:B=>ee("hasOwnTransport",B),children:[s.jsx(qt,{children:s.jsx(Jt,{placeholder:"Do you have transportation?"})}),s.jsxs(Gt,{children:[s.jsx(_e,{value:"yes-car",children:"Yes, I have a car"}),s.jsx(_e,{value:"yes-transit",children:"Yes, I use public transit"}),s.jsx(_e,{value:"no",children:"No"})]})]})]}),F.hasOwnTransport==="yes-car"&&s.jsx(J,{className:"border-amber-200 bg-amber-50 dark:bg-amber-950/20",children:s.jsxs(Q,{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(mr,{className:"w-5 h-5 text-amber-600 mt-0.5 shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-amber-800 dark:text-amber-200",children:"Vehicle Insurance Disclaimer"}),s.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 mt-2",children:Y9e})]})]}),s.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-white dark:bg-background rounded-lg border border-amber-200",children:[s.jsx(Co,{id:"vehicleDisclaimer",checked:fe,onCheckedChange:B=>ge(B)}),s.jsx(oe,{htmlFor:"vehicleDisclaimer",className:"text-sm font-medium cursor-pointer",children:"I Accept - I understand and agree to the above terms *"})]}),F.hasOwnTransport==="yes-car"&&!fe&&s.jsx("p",{className:"text-xs text-destructive",children:"You must accept this disclaimer to continue if you have a vehicle"}),s.jsxs("div",{className:"space-y-2 pt-2 border-t border-amber-200",children:[s.jsx(oe,{htmlFor:"licensePlate",className:"text-amber-800 dark:text-amber-200",children:"License Plate Number *"}),s.jsx(pe,{id:"licensePlate",placeholder:"e.g., ABCD 123",value:F.licensePlate,onChange:B=>ee("licensePlate",B.target.value.toUpperCase()),className:"font-mono bg-white dark:bg-background",required:!0}),s.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300",children:"Your license plate will be shared with clients for hospital/doctor pickup appointments."}),!F.licensePlate&&s.jsx("p",{className:"text-xs text-destructive",children:"License plate is required when you have a vehicle"})]}),s.jsxs("div",{className:"space-y-2 pt-2 border-t border-amber-200",children:[s.jsxs(oe,{className:"text-amber-800 dark:text-amber-200 flex items-center gap-2",children:[s.jsx(qs,{className:"w-4 h-4"}),"Vehicle Side Photo *"]}),s.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300",children:"Upload a clear photo of the side of your vehicle showing the license plate"}),s.jsx("input",{ref:v,type:"file",accept:"image/*",className:"hidden",onChange:xe}),C?s.jsxs("div",{className:"space-y-2",children:[s.jsx("img",{src:C.url,alt:"Vehicle preview",className:"w-full max-h-40 object-cover rounded-lg border border-amber-200"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs text-amber-700",children:C.name}),s.jsxs(K,{type:"button",variant:"outline",size:"sm",onClick:()=>{var B;return(B=v.current)==null?void 0:B.click()},className:"gap-1",children:[s.jsx(qs,{className:"w-3 h-3"}),"Change Photo"]})]})]}):s.jsxs(K,{type:"button",variant:"outline",className:"w-full gap-2 bg-white dark:bg-background",onClick:()=>{var B;return(B=v.current)==null?void 0:B.click()},children:[s.jsx(qs,{className:"w-4 h-4"}),"Take or Upload Vehicle Photo"]}),V&&s.jsx("p",{className:"text-xs text-destructive",children:V}),!C&&s.jsx("p",{className:"text-xs text-destructive",children:"Vehicle photo is required when you have a car"})]})]})})]})]})]});case 3:return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(J,{className:"shadow-card",children:[s.jsxs(ke,{className:"pb-4",children:[s.jsxs(Ee,{className:"text-lg flex items-center gap-2",children:[s.jsx(Oa,{className:"w-5 h-5 text-primary"}),"Languages Spoken"]}),s.jsx(Ge,{children:"Select up to 5 languages you can communicate in with clients"})]}),s.jsx(Q,{children:s.jsx(bx,{selectedLanguages:f,onLanguagesChange:m,maxLanguages:5,label:"",description:"This helps us match you with clients who prefer your language.",placeholder:"Add languages you speak..."})})]}),s.jsx("div",{className:"p-4 bg-primary/5 border border-primary/20 rounded-lg",children:s.jsxs("p",{className:"text-sm text-foreground",children:[s.jsx("strong",{children:"Why languages matter:"})," We prioritize matching PSWs with clients who share a common language. Speaking multiple languages increases your job opportunities."]})})]});case 4:return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(J,{className:"shadow-card",children:[s.jsxs(ke,{className:"pb-4",children:[s.jsxs(Ee,{className:"text-lg flex items-center gap-2",children:[s.jsx(ms,{className:"w-5 h-5 text-primary"}),"Payroll Information"]}),s.jsx(Ge,{children:"Provide your banking details for secure payment"})]}),s.jsxs(Q,{className:"space-y-4",children:[s.jsx("div",{className:"p-3 bg-primary/5 border border-primary/20 rounded-lg mb-4",children:s.jsxs("p",{className:"text-sm text-foreground",children:[s.jsx("strong",{children:"Direct Deposit Only:"})," All payroll is processed via direct deposit. Please provide your banking details below."]})}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"bankInstitution",children:"Institution #"}),s.jsx(pe,{id:"bankInstitution",placeholder:"001",value:F.bankInstitution,onChange:B=>ee("bankInstitution",B.target.value),maxLength:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"bankTransit",children:"Transit #"}),s.jsx(pe,{id:"bankTransit",placeholder:"12345",value:F.bankTransit,onChange:B=>ee("bankTransit",B.target.value),maxLength:5})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"bankAccount",children:"Account #"}),s.jsx(pe,{id:"bankAccount",placeholder:"1234567",value:F.bankAccount,onChange:B=>ee("bankAccount",B.target.value)})]})]})]})]}),s.jsxs("div",{className:"flex items-start gap-3 p-4 bg-primary/5 border border-primary/20 rounded-lg",children:[s.jsx(Jn,{className:"w-5 h-5 text-primary shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-foreground",children:"AES-256 Encryption"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Your banking information is encrypted and stored securely for payroll purposes only. Only authorized admin personnel can access this data."})]})]}),s.jsxs(J,{className:"shadow-card",children:[s.jsx(ke,{className:"pb-4",children:s.jsxs(Ee,{className:"text-lg flex items-center gap-2",children:[s.jsx(zt,{className:"w-5 h-5 text-primary"}),"Platform Policy"]})}),s.jsxs(Q,{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 bg-muted rounded-lg text-sm space-y-2",children:[s.jsx("p",{className:"font-medium text-foreground",children:"Please read carefully:"}),s.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1",children:[s.jsx("li",{children:"All PSWs must maintain valid certifications"}),s.jsx("li",{children:"Missed shifts without 24-hour notice may result in removal"}),s.jsx("li",{children:"Client confidentiality must be maintained at all times"}),s.jsx("li",{children:"Professional conduct is expected during all interactions"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Co,{id:"agreePolicy",checked:l,onCheckedChange:B=>c(B)}),s.jsx(oe,{htmlFor:"agreePolicy",className:"text-sm text-muted-foreground cursor-pointer",children:"I understand and agree to the PSW Direct platform policies"})]}),s.jsx(G9e,{})]})]})]});default:return null}},Et=B=>{switch(B){case 1:return"Personal Info";case 2:return"Credentials";case 3:return"Languages";case 4:return"Banking & Submit";default:return""}};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"sticky top-0 z-40 bg-background/95 backdrop-blur-sm border-b border-border",children:s.jsxs("div",{className:"flex items-center justify-between px-4 h-16 max-w-md mx-auto",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(K,{variant:"ghost",size:"icon",onClick:()=>t>1?ce():e("/"),className:"shrink-0",children:s.jsx($n,{className:"w-5 h-5"})}),s.jsx(dn,{to:"/",className:"flex items-center gap-2",children:s.jsx("img",{src:Rr,alt:"PSW Direct Logo",className:"h-8 w-auto"})})]}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:["Step ",t," of ",oy]})]})}),s.jsxs("div",{className:"px-4 py-4 max-w-md mx-auto",children:[s.jsx(qE,{value:t/oy*100,className:"h-2"}),s.jsx("p",{className:"text-sm font-medium text-foreground mt-2",children:Et(t)})]}),s.jsxs("main",{className:"px-4 pb-32 max-w-md mx-auto",children:[t===1&&s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"w-16 h-16 mx-auto rounded-full gradient-brand flex items-center justify-center mb-4",children:s.jsx(_k,{className:"w-8 h-8 text-white"})}),s.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Join Our Team"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Apply to become a PSW Direct care provider"})]}),s.jsxs("form",{onSubmit:qe,children:[Xe(),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-background/95 backdrop-blur-sm border-t border-border p-4",children:s.jsxs("div",{className:"max-w-md mx-auto flex gap-3",children:[t>1&&s.jsxs(K,{type:"button",variant:"outline",onClick:ce,className:"flex-1",children:[s.jsx($n,{className:"w-4 h-4 mr-2"}),"Back"]}),t<oy?s.jsxs(K,{type:"button",variant:"brand",onClick:$e,disabled:!Me(t),className:"flex-1",children:["Continue",s.jsx(vk,{className:"w-4 h-4 ml-2"})]}):s.jsx(K,{type:"submit",variant:"brand",disabled:i||!l||!Me(4),className:"flex-1",children:i?s.jsx("div",{className:"w-5 h-5 border-2 border-primary-foreground/30 border-t-primary-foreground rounded-full animate-spin"}):"Submit Application"})]})})]})]})]})},X9e=()=>{const[e]=sB(),r=e.get("type")==="client",[n,a]=x.useState("desktop"),[i,o]=x.useState(!1);x.useEffect(()=>{const c=navigator.userAgent.toLowerCase();/iphone|ipad|ipod/.test(c)?a("ios"):/android/.test(c)?a("android"):a("desktop"),window.matchMedia("(display-mode: standalone)").matches&&o(!0)},[]);const l=()=>{window.location.href=r?"/client":"/psw-login"};return i?s.jsx("div",{className:"min-h-screen bg-gradient-to-b from-primary/10 to-background flex items-center justify-center p-4",children:s.jsxs(J,{className:"w-full max-w-md text-center",children:[s.jsxs(ke,{children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(Kt,{className:"w-10 h-10 text-green-600"})}),s.jsx(Ee,{className:"text-2xl",children:"App Installed!"})]}),s.jsxs(Q,{className:"space-y-4",children:[s.jsx("p",{className:"text-muted-foreground",children:"PSA DIRECT is already installed on your device. You're all set!"}),s.jsx(K,{onClick:l,className:"w-full",size:"lg",children:"Go to Login"})]})]})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-b from-primary/10 to-background flex items-center justify-center p-4",children:s.jsxs(J,{className:"w-full max-w-md",children:[s.jsxs(ke,{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-20 h-20 bg-primary/10 rounded-2xl flex items-center justify-center mb-4",children:s.jsx(Hh,{className:"w-12 h-12 text-primary"})}),s.jsx(Ee,{className:"text-2xl",children:"Install PSA DIRECT"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:r?"Get real-time updates on your care booking":"Add our app to your home screen for quick access to shifts"})]}),r&&s.jsx(Q,{className:"pt-0 pb-2",children:s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[s.jsx(yk,{className:"w-4 h-4 text-primary shrink-0"}),s.jsx("span",{className:"text-foreground",children:"Ping when caregiver accepts your booking"})]}),s.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[s.jsx(St,{className:"w-4 h-4 text-primary shrink-0"}),s.jsx("span",{className:"text-foreground",children:"Ping when they arrive at your location"})]}),s.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[s.jsx(Qe,{className:"w-4 h-4 text-primary shrink-0"}),s.jsx("span",{className:"text-foreground",children:"Ping when care is complete"})]})]})}),s.jsxs(Q,{className:"space-y-6",children:[n==="ios"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[s.jsx("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded text-sm",children:"iOS"}),"One Simple Step"]}),s.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"bg-primary text-primary-foreground w-8 h-8 rounded-full flex items-center justify-center font-bold shrink-0",children:"1"}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium",children:["Tap the ",s.jsx(Pk,{className:"inline w-5 h-5 text-blue-500"})," Share button"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Located at the bottom of Safari"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"bg-primary text-primary-foreground w-8 h-8 rounded-full flex items-center justify-center font-bold shrink-0",children:"2"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:'Select "Add to Home Screen"'}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Scroll down in the share menu to find it"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"bg-green-600 text-white w-8 h-8 rounded-full flex items-center justify-center shrink-0",children:s.jsx(Kt,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Done!"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"PSA DIRECT will appear on your home screen"})]})]})]})]}),n==="android"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[s.jsx("span",{className:"bg-green-100 text-green-700 px-2 py-1 rounded text-sm",children:"Android"}),"One Simple Step"]}),s.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"bg-primary text-primary-foreground w-8 h-8 rounded-full flex items-center justify-center font-bold shrink-0",children:"1"}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium",children:["Tap the ",s.jsx(Nk,{className:"inline w-5 h-5"})," Menu (3 dots)"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Located at the top-right of Chrome"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"bg-primary text-primary-foreground w-8 h-8 rounded-full flex items-center justify-center font-bold shrink-0",children:"2"}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium flex items-center gap-1",children:['Select "Install App" ',s.jsx(nu,{className:"w-4 h-4"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:'Or "Add to Home Screen"'})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"bg-green-600 text-white w-8 h-8 rounded-full flex items-center justify-center shrink-0",children:s.jsx(Kt,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Done!"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"PSA DIRECT will install automatically"})]})]})]})]}),n==="desktop"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Desktop Instructions"}),s.jsx("p",{className:"text-muted-foreground",children:"Scan this QR code on your mobile device to install the app:"}),s.jsx("div",{className:"flex justify-center py-4",children:s.jsx("img",{src:Td.qrCodePath,alt:"Scan to install PSA Direct app",className:"w-48 h-48 object-contain"})}),s.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Or install directly on desktop:"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"bg-primary text-primary-foreground w-5 h-5 rounded-full flex items-center justify-center text-xs shrink-0 mt-0.5",children:"1"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Chrome:"})," Click the install icon in the address bar"]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"bg-primary text-primary-foreground w-5 h-5 rounded-full flex items-center justify-center text-xs shrink-0 mt-0.5",children:"2"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Edge:"}),' Click "Install PSA DIRECT" in the menu']})]})]})]}),s.jsx("div",{className:"pt-4 border-t",children:s.jsx(K,{onClick:l,variant:"outline",className:"w-full",children:r?"Skip - Go to Dashboard":"Skip - Go to Login"})})]})]})})},J9e=()=>{const e=ps(),[t]=sB(),r=t.get("token"),[n,a]=x.useState(""),[i,o]=x.useState(""),[l,c]=x.useState(!1),[d,h]=x.useState(!1),[f,m]=x.useState(!1),[p,y]=x.useState(!0),[v,b]=x.useState(null),[N,j]=x.useState(null),[w,S]=x.useState(!1);x.useEffect(()=>{(async()=>{if(!r){b("No invitation token provided."),y(!1);return}try{const{data:T,error:O}=await de.from("admin_invitations").select("email, status, expires_at").eq("invite_token",r).single();if(O||!T){b("Invalid invitation token."),y(!1);return}if(T.status==="accepted"){b("This invitation has already been used."),y(!1);return}if(T.status==="expired"||new Date(T.expires_at)<new Date){b("This invitation has expired. Please request a new one."),y(!1);return}j(T.email),y(!1)}catch(T){console.error("Token validation error:",T),b("Failed to validate invitation."),y(!1)}})()},[r]);const C=async P=>{if(P.preventDefault(),b(null),n.length<8){b("Password must be at least 8 characters.");return}if(n!==i){b("Passwords do not match.");return}m(!0);try{const T=await de.functions.invoke("accept-admin-invite",{body:{token:r,password:n}});if(T.error)throw new Error(T.error.message||"Failed to set up account");const O=T.data;if(!O.success)throw new Error(O.error||"Failed to set up account");S(!0),Z.success("Account set up successfully!"),setTimeout(()=>{e("/office-login")},2e3)}catch(T){const O=T instanceof Error?T.message:"An unexpected error occurred";b(O)}finally{m(!1)}};return p?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ut,{className:"w-8 h-8 animate-spin mx-auto text-primary"}),s.jsx("p",{className:"mt-4 text-muted-foreground",children:"Validating invitation..."})]})}):v&&!N?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:s.jsx(J,{className:"w-full max-w-md shadow-card",children:s.jsx(Q,{className:"pt-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-14 h-14 mx-auto rounded-full bg-destructive/10 flex items-center justify-center mb-4",children:s.jsx(At,{className:"w-7 h-7 text-destructive"})}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Invalid Invitation"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:v}),s.jsx(K,{variant:"outline",onClick:()=>e("/"),children:"Return to Home"})]})})})}):w?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:s.jsx(J,{className:"w-full max-w-md shadow-card",children:s.jsx(Q,{className:"pt-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-14 h-14 mx-auto rounded-full bg-primary/10 flex items-center justify-center mb-4",children:s.jsx(es,{className:"w-7 h-7 text-primary"})}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Account Ready!"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Your admin account has been set up. Redirecting to login..."}),s.jsx(Ut,{className:"w-5 h-5 animate-spin mx-auto text-primary"})]})})})}):s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md space-y-6",children:[s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[s.jsx("img",{src:Rr,alt:"PSW Direct Logo",className:"h-12 w-auto"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-foreground",children:"PSW DIRECT"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Admin Setup"})]})]})}),s.jsxs(J,{className:"shadow-card",children:[s.jsxs(ke,{className:"text-center pb-4",children:[s.jsx("div",{className:"w-14 h-14 mx-auto rounded-full bg-primary/10 flex items-center justify-center mb-4",children:s.jsx(mr,{className:"w-7 h-7 text-primary"})}),s.jsx(Ee,{className:"text-xl",children:"Set Up Your Account"}),s.jsxs(Ge,{children:["Create a password for ",s.jsx("strong",{children:N})]})]}),s.jsxs(Q,{children:[s.jsxs("form",{onSubmit:C,className:"space-y-4",children:[v&&s.jsxs("div",{className:"flex items-start gap-2 p-3 bg-destructive/10 border border-destructive/20 rounded-lg",children:[s.jsx(At,{className:"w-5 h-5 text-destructive shrink-0 mt-0.5"}),s.jsx("p",{className:"text-sm text-destructive",children:v})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"password",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(pe,{id:"password",type:l?"text":"password",value:n,onChange:P=>a(P.target.value),placeholder:"At least 8 characters",required:!0,minLength:8,autoComplete:"new-password",className:"pr-10"}),s.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:l?s.jsx(ai,{className:"w-4 h-4"}):s.jsx(Ms,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(oe,{htmlFor:"confirm-password",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(pe,{id:"confirm-password",type:d?"text":"password",value:i,onChange:P=>o(P.target.value),placeholder:"Confirm your password",required:!0,minLength:8,autoComplete:"new-password",className:"pr-10"}),s.jsx("button",{type:"button",onClick:()=>h(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:d?s.jsx(ai,{className:"w-4 h-4"}):s.jsx(Ms,{className:"w-4 h-4"})})]})]}),s.jsx(K,{type:"submit",variant:"brand",className:"w-full",disabled:f,children:f?s.jsx(Ut,{className:"w-5 h-5 animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(Jn,{className:"w-4 h-4 mr-2"}),"Complete Setup"]})})]}),s.jsx("div",{className:"mt-6 p-3 bg-muted rounded-lg",children:s.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"This will grant you administrator access to PSW Direct. Keep your password secure and do not share it with anyone."})})]})]}),s.jsx("div",{className:"text-center",children:s.jsx(K,{variant:"ghost",size:"sm",onClick:()=>e("/"),children:" Return to main site"})})]})})},Q9e=()=>{const{type:e,id:t}=Nse(),r=ps(),[n,a]=x.useState(!0),[i,o]=x.useState(null),[l,c]=x.useState(null),[d,h]=x.useState(null);x.useEffect(()=>{f()},[e,t]);const f=async()=>{if(!e||!t){o("Invalid verification link"),a(!1);return}if(a(!0),o(null),e==="client"){const{data:m,error:p}=await de.from("client_profiles").select("id, full_name, first_name, email, phone, default_address").eq("id",t).maybeSingle();p?(console.error("Error fetching client:",p),o("Failed to load profile")):m?c(m):o("Profile not found")}else if(e==="psw"){const{data:m,error:p}=await de.from("psw_profiles").select("id, first_name, last_name, email, phone, home_city, vetting_status, profile_photo_url, languages, certifications").eq("id",t).maybeSingle();p?(console.error("Error fetching PSW:",p),o("Failed to load profile")):m?h(m):o("Profile not found")}else o("Invalid profile type");a(!1)};return n?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ut,{className:"w-8 h-8 animate-spin text-primary mx-auto"}),s.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading profile..."})]})}):i?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:s.jsx(J,{className:"max-w-md w-full shadow-card",children:s.jsxs(Q,{className:"pt-6 text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-destructive/10 flex items-center justify-center",children:s.jsx($t,{className:"w-8 h-8 text-destructive"})}),s.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Profile Not Found"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:i}),s.jsxs(K,{onClick:()=>r("/"),variant:"outline",children:[s.jsx($n,{className:"w-4 h-4 mr-2"}),"Go Home"]})]})})}):s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"bg-background/95 backdrop-blur-sm border-b border-border",children:s.jsxs("div",{className:"max-w-md mx-auto px-4 h-16 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:Rr,alt:"PSA Direct Logo",className:"h-10 w-auto"}),s.jsx("span",{className:"font-semibold text-foreground",children:"Verification"})]}),s.jsxs(ne,{variant:"outline",className:"bg-green-50 text-green-700 border-green-300",children:[s.jsx(RS,{className:"w-3 h-3 mr-1"}),"Verified"]})]})}),s.jsxs("main",{className:"max-w-md mx-auto px-4 py-6",children:[e==="client"&&l&&s.jsxs(J,{className:"shadow-card",children:[s.jsxs(ke,{className:"text-center pb-2",children:[s.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx($t,{className:"w-10 h-10 text-primary"})}),s.jsx(Ee,{className:"text-xl",children:l.full_name||l.first_name||"Client"}),s.jsx(ne,{className:"mt-2",children:"Registered Client"})]}),s.jsxs(Q,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted rounded-lg",children:[s.jsx(hn,{className:"w-5 h-5 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Email"}),s.jsx("p",{className:"text-sm font-medium",children:l.email})]})]}),l.phone&&s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted rounded-lg",children:[s.jsx(Fn,{className:"w-5 h-5 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Phone"}),s.jsx("p",{className:"text-sm font-medium",children:l.phone})]})]}),l.default_address&&s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted rounded-lg",children:[s.jsx(St,{className:"w-5 h-5 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Address"}),s.jsx("p",{className:"text-sm font-medium",children:l.default_address})]})]}),s.jsxs("div",{className:"pt-4 border-t border-border",children:[s.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[s.jsx(es,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm font-medium",children:"Profile Verified"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This profile is registered with PSA Direct"})]})]})]}),e==="psw"&&d&&s.jsxs(J,{className:"shadow-card",children:[s.jsxs(ke,{className:"text-center pb-2",children:[s.jsxs(oi,{className:"w-24 h-24 mx-auto mb-4 ring-4 ring-primary/20",children:[d.profile_photo_url?s.jsx(li,{src:d.profile_photo_url,alt:d.first_name}):null,s.jsx(ci,{className:"text-2xl bg-primary/10 text-primary",children:d.first_name.charAt(0)})]}),s.jsxs(Ee,{className:"text-xl",children:[d.first_name," ",d.last_name.charAt(0),"."]}),d.vetting_status==="approved"?s.jsx(ne,{className:"mt-2 bg-green-100 text-green-700",children:"Verified Caregiver"}):s.jsx(ne,{variant:"secondary",className:"mt-2",children:d.vetting_status||"Pending Verification"})]}),s.jsxs(Q,{className:"space-y-4",children:[d.home_city&&s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted rounded-lg",children:[s.jsx(St,{className:"w-5 h-5 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Service Area"}),s.jsx("p",{className:"text-sm font-medium",children:d.home_city})]})]}),d.languages&&d.languages.length>0&&s.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Languages"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:d.languages.map((m,p)=>s.jsx(ne,{variant:"outline",className:"text-xs",children:m},p))})]}),d.certifications&&s.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Certifications"}),s.jsx("p",{className:"text-sm",children:d.certifications})]}),s.jsxs("div",{className:"pt-4 border-t border-border",children:[d.vetting_status==="approved"?s.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[s.jsx(es,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm font-medium",children:"Background Check Verified"})]}):s.jsxs("div",{className:"flex items-center gap-2 text-amber-600",children:[s.jsx(RS,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm font-medium",children:"Verification Pending"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This caregiver is registered with PSA Direct"})]})]})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs(K,{variant:"outline",onClick:()=>r("/"),children:[s.jsx($n,{className:"w-4 h-4 mr-2"}),"Return Home"]})})]})]})},eze=()=>{const e=su();return x.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),s.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),s.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),s.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},tze=new qne,rze=()=>s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}),nze=()=>So()?null:s.jsx(jce,{}),sze=({children:e})=>{const{isAuthenticated:t,user:r,isLoading:n}=na();return n?s.jsx(rze,{}):!t||(r==null?void 0:r.role)!=="admin"?s.jsx(Yh,{to:"/office-login",replace:!0}):s.jsx(s.Fragment,{children:e})},aze=()=>s.jsxs(qse,{children:[s.jsxs(Lse,{children:[s.jsx(zs,{path:"/",element:s.jsx(ime,{})}),s.jsx(zs,{path:"/join-team",element:s.jsx(Z9e,{})}),s.jsx(zs,{path:"/psw-login",element:s.jsx(H9e,{})}),s.jsx(zs,{path:"/psw-pending",element:s.jsx(V9e,{})}),s.jsx(zs,{path:"/psw",element:s.jsx(W9e,{})}),s.jsx(zs,{path:"/install",element:s.jsx(X9e,{})}),s.jsx(zs,{path:"/office-login",element:s.jsx(ome,{})}),s.jsx(zs,{path:"/admin-setup",element:s.jsx(J9e,{})}),s.jsx(zs,{path:"/admin",element:s.jsx(sze,{children:s.jsx(l9e,{children:s.jsx(o9e,{})})})}),s.jsx(zs,{path:"/client-login",element:s.jsx(_9e,{})}),s.jsx(zs,{path:"/client",element:s.jsx(N9e,{})}),s.jsx(zs,{path:"/verify/:type/:id",element:s.jsx(Q9e,{})}),s.jsx(zs,{path:"*",element:s.jsx(eze,{})})]}),s.jsx(nze,{})]}),ize=()=>s.jsx(Kne,{client:tze,children:s.jsx(B8,{children:s.jsxs(Doe,{children:[s.jsx(ste,{}),s.jsx(Dte,{}),s.jsx(aze,{})]})})}),gP="psa_app_version",eL="psa_cache_busted",xP="psa_cache_bust_count",vP="pavibobervhqkfzwkotw";function oze(){const e=localStorage.getItem(gP);return e&&e!==vP?(console.warn("[CacheBuster] App version changed, clearing caches"),cze("version_mismatch")):(localStorage.setItem(gP,vP),localStorage.removeItem(xP),!1)}function lze(){return!!("https://pavibobervhqkfzwkotw.supabase.co".startsWith("https://")&&"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZl9pZCI6InBhdmlib2JlcnZocWtmendlb3R3Iiwicm9sZSI6ImFub24iLCJleHAiOjE3Njg0MTI4OTgzInV4cCI6MjA4Mzk4ODg5OH0.As1JiRkr9Pptpbrwg21sTPMX0VrENv47HPgHkv5_tNQ".length>20)}function cze(e){const t=parseInt(localStorage.getItem(xP)||"0",10);return t>=3?(console.error("[CacheBuster] Max retry limit reached. Stale bundle cannot be resolved automatically."),!1):sessionStorage.getItem(eL)?(console.warn("[CacheBuster] Already attempted cache bust this session, skipping"),!1):(sessionStorage.setItem(eL,"true"),localStorage.setItem(xP,String(t+1)),console.log(`[CacheBuster] Force refresh triggered (reason: ${e}, attempt: ${t+1})`),(async()=>{try{if("serviceWorker"in navigator){const n=await navigator.serviceWorker.getRegistrations();for(const a of n)await a.unregister(),console.log("[CacheBuster] Unregistered service worker:",a.scope)}if("caches"in window){const n=await caches.keys();for(const a of n)await caches.delete(a),console.log("[CacheBuster] Deleted cache:",a)}localStorage.setItem(gP,vP)}catch(n){console.error("[CacheBuster] Error during cache bust:",n)}finally{window.location.reload()}})(),!0)}oce();const dze=oze();if(!dze){const e=document.getElementById("root");lze()?NF(e).render(s.jsx(q.StrictMode,{children:s.jsx(ize,{})})):e.innerHTML=`
      <div style="min-height:100vh;display:flex;align-items:center;justify-content:center;font-family:system-ui,sans-serif;padding:2rem;text-align:center;background:#f8f9fa">
        <div style="max-width:400px">
          <h1 style="font-size:1.5rem;margin-bottom:1rem;color:#dc2626">App Update Required</h1>
          <p style="color:#666;margin-bottom:1.5rem">This app is running an outdated version. Please clear your browser cache and reload.</p>
          <button onclick="localStorage.clear();sessionStorage.clear();caches&&caches.keys().then(k=>Promise.all(k.map(n=>caches.delete(n)))).then(()=>location.reload())" 
            style="background:#2563eb;color:white;border:none;padding:12px 24px;border-radius:8px;font-size:1rem;cursor:pointer">
            Clear Cache & Reload
          </button>
        </div>
      </div>
    `}
